/*! For license information please see index.js.LICENSE.txt */ 
(() => {
    var __webpack_modules__ = {
        528: (e, t, n) => {
          var r, i, a, s;
          function o(e) {
            return (
              (o =
                "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
                  ? function (e) {
                      return typeof e;
                    }
                  : function (e) {
                      return e &&
                        "function" == typeof Symbol &&
                        e.constructor === Symbol &&
                        e !== Symbol.prototype
                        ? "symbol"
                        : typeof e;
                    }),
              o(e)
            );
          }
          (s = function () {
            return (function e(t, n, r) {
              function i(s, o) {
                if (!n[s]) {
                  if (!t[s]) {
                    if (a) return a(s, !0);
                    var l = new Error("Cannot find module '" + s + "'");
                    throw ((l.code = "MODULE_NOT_FOUND"), l);
                  }
                  var h = (n[s] = { exports: {} });
                  t[s][0].call(
                    h.exports,
                    function (e) {
                      return i(t[s][1][e] || e);
                    },
                    h,
                    h.exports,
                    e,
                    t,
                    n,
                    r
                  );
                }
                return n[s].exports;
              }
              for (var a = void 0, s = 0; s < r.length; s++) i(r[s]);
              return i;
            })(
              {
                1: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./utils"),
                      i = e("./support"),
                      a =
                        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
                    (n.encode = function (e) {
                      for (
                        var t,
                          n,
                          i,
                          s,
                          o,
                          l,
                          h,
                          u = [],
                          c = 0,
                          d = e.length,
                          f = d,
                          p = "string" !== r.getTypeOf(e);
                        c < e.length;
  
                      )
                        (f = d - c),
                          (i = p
                            ? ((t = e[c++]),
                              (n = c < d ? e[c++] : 0),
                              c < d ? e[c++] : 0)
                            : ((t = e.charCodeAt(c++)),
                              (n = c < d ? e.charCodeAt(c++) : 0),
                              c < d ? e.charCodeAt(c++) : 0)),
                          (s = t >> 2),
                          (o = ((3 & t) << 4) | (n >> 4)),
                          (l = 1 < f ? ((15 & n) << 2) | (i >> 6) : 64),
                          (h = 2 < f ? 63 & i : 64),
                          u.push(
                            a.charAt(s) + a.charAt(o) + a.charAt(l) + a.charAt(h)
                          );
                      return u.join("");
                    }),
                      (n.decode = function (e) {
                        var t,
                          n,
                          r,
                          s,
                          o,
                          l,
                          h = 0,
                          u = 0,
                          c = "data:";
                        if (e.substr(0, c.length) === c)
                          throw new Error(
                            "Invalid base64 input, it looks like a data url."
                          );
                        var d,
                          f =
                            (3 * (e = e.replace(/[^A-Za-z0-9+/=]/g, "")).length) /
                            4;
                        if (
                          (e.charAt(e.length - 1) === a.charAt(64) && f--,
                          e.charAt(e.length - 2) === a.charAt(64) && f--,
                          f % 1 != 0)
                        )
                          throw new Error(
                            "Invalid base64 input, bad content length."
                          );
                        for (
                          d = i.uint8array
                            ? new Uint8Array(0 | f)
                            : new Array(0 | f);
                          h < e.length;
  
                        )
                          (t =
                            (a.indexOf(e.charAt(h++)) << 2) |
                            ((s = a.indexOf(e.charAt(h++))) >> 4)),
                            (n =
                              ((15 & s) << 4) |
                              ((o = a.indexOf(e.charAt(h++))) >> 2)),
                            (r = ((3 & o) << 6) | (l = a.indexOf(e.charAt(h++)))),
                            (d[u++] = t),
                            64 !== o && (d[u++] = n),
                            64 !== l && (d[u++] = r);
                        return d;
                      });
                  },
                  { "./support": 30, "./utils": 32 }
                ],
                2: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./external"),
                      i = e("./stream/DataWorker"),
                      a = e("./stream/Crc32Probe"),
                      s = e("./stream/DataLengthProbe");
                    function o(e, t, n, r, i) {
                      (this.compressedSize = e),
                        (this.uncompressedSize = t),
                        (this.crc32 = n),
                        (this.compression = r),
                        (this.compressedContent = i);
                    }
                    (o.prototype = {
                      getContentWorker: function () {
                        var e = new i(r.Promise.resolve(this.compressedContent))
                            .pipe(this.compression.uncompressWorker())
                            .pipe(new s("data_length")),
                          t = this;
                        return (
                          e.on("end", function () {
                            if (
                              this.streamInfo.data_length !== t.uncompressedSize
                            )
                              throw new Error(
                                "Bug : uncompressed data size mismatch"
                              );
                          }),
                          e
                        );
                      },
                      getCompressedWorker: function () {
                        return new i(r.Promise.resolve(this.compressedContent))
                          .withStreamInfo("compressedSize", this.compressedSize)
                          .withStreamInfo(
                            "uncompressedSize",
                            this.uncompressedSize
                          )
                          .withStreamInfo("crc32", this.crc32)
                          .withStreamInfo("compression", this.compression);
                      }
                    }),
                      (o.createWorkerFrom = function (e, t, n) {
                        return e
                          .pipe(new a())
                          .pipe(new s("uncompressedSize"))
                          .pipe(t.compressWorker(n))
                          .pipe(new s("compressedSize"))
                          .withStreamInfo("compression", t);
                      }),
                      (t.exports = o);
                  },
                  {
                    "./external": 6,
                    "./stream/Crc32Probe": 25,
                    "./stream/DataLengthProbe": 26,
                    "./stream/DataWorker": 27
                  }
                ],
                3: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./stream/GenericWorker");
                    (n.STORE = {
                      magic: "\0\0",
                      compressWorker: function () {
                        return new r("STORE compression");
                      },
                      uncompressWorker: function () {
                        return new r("STORE decompression");
                      }
                    }),
                      (n.DEFLATE = e("./flate"));
                  },
                  { "./flate": 7, "./stream/GenericWorker": 28 }
                ],
                4: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./utils"),
                      i = (function () {
                        for (var e, t = [], n = 0; n < 256; n++) {
                          e = n;
                          for (var r = 0; r < 8; r++)
                            e = 1 & e ? 3988292384 ^ (e >>> 1) : e >>> 1;
                          t[n] = e;
                        }
                        return t;
                      })();
                    t.exports = function (e, t) {
                      return void 0 !== e && e.length
                        ? "string" !== r.getTypeOf(e)
                          ? (function (e, t, n, r) {
                              var a = i,
                                s = 0 + n;
                              e ^= -1;
                              for (var o = 0; o < s; o++)
                                e = (e >>> 8) ^ a[255 & (e ^ t[o])];
                              return -1 ^ e;
                            })(0 | t, e, e.length)
                          : (function (e, t, n, r) {
                              var a = i,
                                s = 0 + n;
                              e ^= -1;
                              for (var o = 0; o < s; o++)
                                e = (e >>> 8) ^ a[255 & (e ^ t.charCodeAt(o))];
                              return -1 ^ e;
                            })(0 | t, e, e.length)
                        : 0;
                    };
                  },
                  { "./utils": 32 }
                ],
                5: [
                  function (e, t, n) {
                    "use strict";
                    (n.base64 = !1),
                      (n.binary = !1),
                      (n.dir = !1),
                      (n.createFolders = !0),
                      (n.date = null),
                      (n.compression = null),
                      (n.compressionOptions = null),
                      (n.comment = null),
                      (n.unixPermissions = null),
                      (n.dosPermissions = null);
                  },
                  {}
                ],
                6: [
                  function (e, t, n) {
                    "use strict";
                    var r;
                    (r = "undefined" != typeof Promise ? Promise : e("lie")),
                      (t.exports = { Promise: r });
                  },
                  { lie: 37 }
                ],
                7: [
                  function (e, t, n) {
                    "use strict";
                    var r =
                        "undefined" != typeof Uint8Array &&
                        "undefined" != typeof Uint16Array &&
                        "undefined" != typeof Uint32Array,
                      i = e("pako"),
                      a = e("./utils"),
                      s = e("./stream/GenericWorker"),
                      o = r ? "uint8array" : "array";
                    function l(e, t) {
                      s.call(this, "FlateWorker/" + e),
                        (this._pako = null),
                        (this._pakoAction = e),
                        (this._pakoOptions = t),
                        (this.meta = {});
                    }
                    (n.magic = "\b\0"),
                      a.inherits(l, s),
                      (l.prototype.processChunk = function (e) {
                        (this.meta = e.meta),
                          null === this._pako && this._createPako(),
                          this._pako.push(a.transformTo(o, e.data), !1);
                      }),
                      (l.prototype.flush = function () {
                        s.prototype.flush.call(this),
                          null === this._pako && this._createPako(),
                          this._pako.push([], !0);
                      }),
                      (l.prototype.cleanUp = function () {
                        s.prototype.cleanUp.call(this), (this._pako = null);
                      }),
                      (l.prototype._createPako = function () {
                        this._pako = new i[this._pakoAction]({
                          raw: !0,
                          level: this._pakoOptions.level || -1
                        });
                        var e = this;
                        this._pako.onData = function (t) {
                          e.push({ data: t, meta: e.meta });
                        };
                      }),
                      (n.compressWorker = function (e) {
                        return new l("Deflate", e);
                      }),
                      (n.uncompressWorker = function () {
                        return new l("Inflate", {});
                      });
                  },
                  { "./stream/GenericWorker": 28, "./utils": 32, pako: 38 }
                ],
                8: [
                  function (e, t, n) {
                    "use strict";
                    function r(e, t) {
                      var n,
                        r = "";
                      for (n = 0; n < t; n++)
                        (r += String.fromCharCode(255 & e)), (e >>>= 8);
                      return r;
                    }
                    function i(e, t, n, i, s, u) {
                      var c,
                        d,
                        f = e.file,
                        p = e.compression,
                        m = u !== o.utf8encode,
                        g = a.transformTo("string", u(f.name)),
                        v = a.transformTo("string", o.utf8encode(f.name)),
                        y = f.comment,
                        _ = a.transformTo("string", u(y)),
                        b = a.transformTo("string", o.utf8encode(y)),
                        x = v.length !== f.name.length,
                        S = b.length !== y.length,
                        E = "",
                        w = "",
                        T = "",
                        M = f.dir,
                        A = f.date,
                        C = { crc32: 0, compressedSize: 0, uncompressedSize: 0 };
                      (t && !n) ||
                        ((C.crc32 = e.crc32),
                        (C.compressedSize = e.compressedSize),
                        (C.uncompressedSize = e.uncompressedSize));
                      var P = 0;
                      t && (P |= 8), m || (!x && !S) || (P |= 2048);
                      var k = 0,
                        R = 0;
                      M && (k |= 16),
                        "UNIX" === s
                          ? ((R = 798),
                            (k |= (function (e, t) {
                              var n = e;
                              return (
                                e || (n = t ? 16893 : 33204), (65535 & n) << 16
                              );
                            })(f.unixPermissions, M)))
                          : ((R = 20),
                            (k |= (function (e) {
                              return 63 & (e || 0);
                            })(f.dosPermissions))),
                        (c = A.getUTCHours()),
                        (c <<= 6),
                        (c |= A.getUTCMinutes()),
                        (c <<= 5),
                        (c |= A.getUTCSeconds() / 2),
                        (d = A.getUTCFullYear() - 1980),
                        (d <<= 4),
                        (d |= A.getUTCMonth() + 1),
                        (d <<= 5),
                        (d |= A.getUTCDate()),
                        x &&
                          ((w = r(1, 1) + r(l(g), 4) + v),
                          (E += "up" + r(w.length, 2) + w)),
                        S &&
                          ((T = r(1, 1) + r(l(_), 4) + b),
                          (E += "uc" + r(T.length, 2) + T));
                      var D = "";
                      return (
                        (D += "\n\0"),
                        (D += r(P, 2)),
                        (D += p.magic),
                        (D += r(c, 2)),
                        (D += r(d, 2)),
                        (D += r(C.crc32, 4)),
                        (D += r(C.compressedSize, 4)),
                        (D += r(C.uncompressedSize, 4)),
                        (D += r(g.length, 2)),
                        (D += r(E.length, 2)),
                        {
                          fileRecord: h.LOCAL_FILE_HEADER + D + g + E,
                          dirRecord:
                            h.CENTRAL_FILE_HEADER +
                            r(R, 2) +
                            D +
                            r(_.length, 2) +
                            "\0\0\0\0" +
                            r(k, 4) +
                            r(i, 4) +
                            g +
                            E +
                            _
                        }
                      );
                    }
                    var a = e("../utils"),
                      s = e("../stream/GenericWorker"),
                      o = e("../utf8"),
                      l = e("../crc32"),
                      h = e("../signature");
                    function u(e, t, n, r) {
                      s.call(this, "ZipFileWorker"),
                        (this.bytesWritten = 0),
                        (this.zipComment = t),
                        (this.zipPlatform = n),
                        (this.encodeFileName = r),
                        (this.streamFiles = e),
                        (this.accumulate = !1),
                        (this.contentBuffer = []),
                        (this.dirRecords = []),
                        (this.currentSourceOffset = 0),
                        (this.entriesCount = 0),
                        (this.currentFile = null),
                        (this._sources = []);
                    }
                    a.inherits(u, s),
                      (u.prototype.push = function (e) {
                        var t = e.meta.percent || 0,
                          n = this.entriesCount,
                          r = this._sources.length;
                        this.accumulate
                          ? this.contentBuffer.push(e)
                          : ((this.bytesWritten += e.data.length),
                            s.prototype.push.call(this, {
                              data: e.data,
                              meta: {
                                currentFile: this.currentFile,
                                percent: n ? (t + 100 * (n - r - 1)) / n : 100
                              }
                            }));
                      }),
                      (u.prototype.openedSource = function (e) {
                        (this.currentSourceOffset = this.bytesWritten),
                          (this.currentFile = e.file.name);
                        var t = this.streamFiles && !e.file.dir;
                        if (t) {
                          var n = i(
                            e,
                            t,
                            !1,
                            this.currentSourceOffset,
                            this.zipPlatform,
                            this.encodeFileName
                          );
                          this.push({ data: n.fileRecord, meta: { percent: 0 } });
                        } else this.accumulate = !0;
                      }),
                      (u.prototype.closedSource = function (e) {
                        this.accumulate = !1;
                        var t = this.streamFiles && !e.file.dir,
                          n = i(
                            e,
                            t,
                            !0,
                            this.currentSourceOffset,
                            this.zipPlatform,
                            this.encodeFileName
                          );
                        if ((this.dirRecords.push(n.dirRecord), t))
                          this.push({
                            data: (function (e) {
                              return (
                                h.DATA_DESCRIPTOR +
                                r(e.crc32, 4) +
                                r(e.compressedSize, 4) +
                                r(e.uncompressedSize, 4)
                              );
                            })(e),
                            meta: { percent: 100 }
                          });
                        else
                          for (
                            this.push({
                              data: n.fileRecord,
                              meta: { percent: 0 }
                            });
                            this.contentBuffer.length;
  
                          )
                            this.push(this.contentBuffer.shift());
                        this.currentFile = null;
                      }),
                      (u.prototype.flush = function () {
                        for (
                          var e = this.bytesWritten, t = 0;
                          t < this.dirRecords.length;
                          t++
                        )
                          this.push({
                            data: this.dirRecords[t],
                            meta: { percent: 100 }
                          });
                        var n = this.bytesWritten - e,
                          i = (function (e, t, n, i, s) {
                            var o = a.transformTo("string", s(i));
                            return (
                              h.CENTRAL_DIRECTORY_END +
                              "\0\0\0\0" +
                              r(e, 2) +
                              r(e, 2) +
                              r(t, 4) +
                              r(n, 4) +
                              r(o.length, 2) +
                              o
                            );
                          })(
                            this.dirRecords.length,
                            n,
                            e,
                            this.zipComment,
                            this.encodeFileName
                          );
                        this.push({ data: i, meta: { percent: 100 } });
                      }),
                      (u.prototype.prepareNextSource = function () {
                        (this.previous = this._sources.shift()),
                          this.openedSource(this.previous.streamInfo),
                          this.isPaused
                            ? this.previous.pause()
                            : this.previous.resume();
                      }),
                      (u.prototype.registerPrevious = function (e) {
                        this._sources.push(e);
                        var t = this;
                        return (
                          e.on("data", function (e) {
                            t.processChunk(e);
                          }),
                          e.on("end", function () {
                            t.closedSource(t.previous.streamInfo),
                              t._sources.length ? t.prepareNextSource() : t.end();
                          }),
                          e.on("error", function (e) {
                            t.error(e);
                          }),
                          this
                        );
                      }),
                      (u.prototype.resume = function () {
                        return (
                          !!s.prototype.resume.call(this) &&
                          (!this.previous && this._sources.length
                            ? (this.prepareNextSource(), !0)
                            : this.previous ||
                              this._sources.length ||
                              this.generatedError
                            ? void 0
                            : (this.end(), !0))
                        );
                      }),
                      (u.prototype.error = function (e) {
                        var t = this._sources;
                        if (!s.prototype.error.call(this, e)) return !1;
                        for (var n = 0; n < t.length; n++)
                          try {
                            t[n].error(e);
                          } catch (e) {}
                        return !0;
                      }),
                      (u.prototype.lock = function () {
                        s.prototype.lock.call(this);
                        for (var e = this._sources, t = 0; t < e.length; t++)
                          e[t].lock();
                      }),
                      (t.exports = u);
                  },
                  {
                    "../crc32": 4,
                    "../signature": 23,
                    "../stream/GenericWorker": 28,
                    "../utf8": 31,
                    "../utils": 32
                  }
                ],
                9: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../compressions"),
                      i = e("./ZipFileWorker");
                    n.generateWorker = function (e, t, n) {
                      var a = new i(
                          t.streamFiles,
                          n,
                          t.platform,
                          t.encodeFileName
                        ),
                        s = 0;
                      try {
                        e.forEach(function (e, n) {
                          s++;
                          var i = (function (e, t) {
                              var n = e || t,
                                i = r[n];
                              if (!i)
                                throw new Error(
                                  n + " is not a valid compression method !"
                                );
                              return i;
                            })(n.options.compression, t.compression),
                            o =
                              n.options.compressionOptions ||
                              t.compressionOptions ||
                              {},
                            l = n.dir,
                            h = n.date;
                          n._compressWorker(i, o)
                            .withStreamInfo("file", {
                              name: e,
                              dir: l,
                              date: h,
                              comment: n.comment || "",
                              unixPermissions: n.unixPermissions,
                              dosPermissions: n.dosPermissions
                            })
                            .pipe(a);
                        }),
                          (a.entriesCount = s);
                      } catch (e) {
                        a.error(e);
                      }
                      return a;
                    };
                  },
                  { "../compressions": 3, "./ZipFileWorker": 8 }
                ],
                10: [
                  function (e, t, n) {
                    "use strict";
                    function r() {
                      if (!(this instanceof r)) return new r();
                      if (arguments.length)
                        throw new Error(
                          "The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide."
                        );
                      (this.files = Object.create(null)),
                        (this.comment = null),
                        (this.root = ""),
                        (this.clone = function () {
                          var e = new r();
                          for (var t in this)
                            "function" != typeof this[t] && (e[t] = this[t]);
                          return e;
                        });
                    }
                    ((r.prototype = e("./object")).loadAsync = e("./load")),
                      (r.support = e("./support")),
                      (r.defaults = e("./defaults")),
                      (r.version = "3.10.1"),
                      (r.loadAsync = function (e, t) {
                        return new r().loadAsync(e, t);
                      }),
                      (r.external = e("./external")),
                      (t.exports = r);
                  },
                  {
                    "./defaults": 5,
                    "./external": 6,
                    "./load": 11,
                    "./object": 15,
                    "./support": 30
                  }
                ],
                11: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./utils"),
                      i = e("./external"),
                      a = e("./utf8"),
                      s = e("./zipEntries"),
                      o = e("./stream/Crc32Probe"),
                      l = e("./nodejsUtils");
                    function h(e) {
                      return new i.Promise(function (t, n) {
                        var r = e.decompressed.getContentWorker().pipe(new o());
                        r.on("error", function (e) {
                          n(e);
                        })
                          .on("end", function () {
                            r.streamInfo.crc32 !== e.decompressed.crc32
                              ? n(new Error("Corrupted zip : CRC32 mismatch"))
                              : t();
                          })
                          .resume();
                      });
                    }
                    t.exports = function (e, t) {
                      var n = this;
                      return (
                        (t = r.extend(t || {}, {
                          base64: !1,
                          checkCRC32: !1,
                          optimizedBinaryString: !1,
                          createFolders: !1,
                          decodeFileName: a.utf8decode
                        })),
                        l.isNode && l.isStream(e)
                          ? i.Promise.reject(
                              new Error(
                                "JSZip can't accept a stream when loading a zip file."
                              )
                            )
                          : r
                              .prepareContent(
                                "the loaded zip file",
                                e,
                                !0,
                                t.optimizedBinaryString,
                                t.base64
                              )
                              .then(function (e) {
                                var n = new s(t);
                                return n.load(e), n;
                              })
                              .then(function (e) {
                                var n = [i.Promise.resolve(e)],
                                  r = e.files;
                                if (t.checkCRC32)
                                  for (var a = 0; a < r.length; a++)
                                    n.push(h(r[a]));
                                return i.Promise.all(n);
                              })
                              .then(function (e) {
                                for (
                                  var i = e.shift(), a = i.files, s = 0;
                                  s < a.length;
                                  s++
                                ) {
                                  var o = a[s],
                                    l = o.fileNameStr,
                                    h = r.resolve(o.fileNameStr);
                                  n.file(h, o.decompressed, {
                                    binary: !0,
                                    optimizedBinaryString: !0,
                                    date: o.date,
                                    dir: o.dir,
                                    comment: o.fileCommentStr.length
                                      ? o.fileCommentStr
                                      : null,
                                    unixPermissions: o.unixPermissions,
                                    dosPermissions: o.dosPermissions,
                                    createFolders: t.createFolders
                                  }),
                                    o.dir || (n.file(h).unsafeOriginalName = l);
                                }
                                return (
                                  i.zipComment.length &&
                                    (n.comment = i.zipComment),
                                  n
                                );
                              })
                      );
                    };
                  },
                  {
                    "./external": 6,
                    "./nodejsUtils": 14,
                    "./stream/Crc32Probe": 25,
                    "./utf8": 31,
                    "./utils": 32,
                    "./zipEntries": 33
                  }
                ],
                12: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils"),
                      i = e("../stream/GenericWorker");
                    function a(e, t) {
                      i.call(this, "Nodejs stream input adapter for " + e),
                        (this._upstreamEnded = !1),
                        this._bindStream(t);
                    }
                    r.inherits(a, i),
                      (a.prototype._bindStream = function (e) {
                        var t = this;
                        (this._stream = e).pause(),
                          e
                            .on("data", function (e) {
                              t.push({ data: e, meta: { percent: 0 } });
                            })
                            .on("error", function (e) {
                              t.isPaused ? (this.generatedError = e) : t.error(e);
                            })
                            .on("end", function () {
                              t.isPaused ? (t._upstreamEnded = !0) : t.end();
                            });
                      }),
                      (a.prototype.pause = function () {
                        return (
                          !!i.prototype.pause.call(this) &&
                          (this._stream.pause(), !0)
                        );
                      }),
                      (a.prototype.resume = function () {
                        return (
                          !!i.prototype.resume.call(this) &&
                          (this._upstreamEnded
                            ? this.end()
                            : this._stream.resume(),
                          !0)
                        );
                      }),
                      (t.exports = a);
                  },
                  { "../stream/GenericWorker": 28, "../utils": 32 }
                ],
                13: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("readable-stream").Readable;
                    function i(e, t, n) {
                      r.call(this, t), (this._helper = e);
                      var i = this;
                      e.on("data", function (e, t) {
                        i.push(e) || i._helper.pause(), n && n(t);
                      })
                        .on("error", function (e) {
                          i.emit("error", e);
                        })
                        .on("end", function () {
                          i.push(null);
                        });
                    }
                    e("../utils").inherits(i, r),
                      (i.prototype._read = function () {
                        this._helper.resume();
                      }),
                      (t.exports = i);
                  },
                  { "../utils": 32, "readable-stream": 16 }
                ],
                14: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = {
                      isNode: "undefined" != typeof Buffer,
                      newBufferFrom: function (e, t) {
                        if (Buffer.from && Buffer.from !== Uint8Array.from)
                          return Buffer.from(e, t);
                        if ("number" == typeof e)
                          throw new Error(
                            'The "data" argument must not be a number'
                          );
                        return new Buffer(e, t);
                      },
                      allocBuffer: function (e) {
                        if (Buffer.alloc) return Buffer.alloc(e);
                        var t = new Buffer(e);
                        return t.fill(0), t;
                      },
                      isBuffer: function (e) {
                        return Buffer.isBuffer(e);
                      },
                      isStream: function (e) {
                        return (
                          e &&
                          "function" == typeof e.on &&
                          "function" == typeof e.pause &&
                          "function" == typeof e.resume
                        );
                      }
                    };
                  },
                  {}
                ],
                15: [
                  function (e, t, n) {
                    "use strict";
                    function r(e, t, n) {
                      var r,
                        i = a.getTypeOf(t),
                        o = a.extend(n || {}, l);
                      (o.date = o.date || new Date()),
                        null !== o.compression &&
                          (o.compression = o.compression.toUpperCase()),
                        "string" == typeof o.unixPermissions &&
                          (o.unixPermissions = parseInt(o.unixPermissions, 8)),
                        o.unixPermissions &&
                          16384 & o.unixPermissions &&
                          (o.dir = !0),
                        o.dosPermissions && 16 & o.dosPermissions && (o.dir = !0),
                        o.dir && (e = m(e)),
                        o.createFolders && (r = p(e)) && g.call(this, r, !0);
                      var c,
                        v = "string" === i && !1 === o.binary && !1 === o.base64;
                      (n && void 0 !== n.binary) || (o.binary = !v),
                        ((t instanceof h && 0 === t.uncompressedSize) ||
                          o.dir ||
                          !t ||
                          0 === t.length) &&
                          ((o.base64 = !1),
                          (o.binary = !0),
                          (t = ""),
                          (o.compression = "STORE"),
                          (i = "string")),
                        (c =
                          t instanceof h || t instanceof s
                            ? t
                            : d.isNode && d.isStream(t)
                            ? new f(e, t)
                            : a.prepareContent(
                                e,
                                t,
                                o.binary,
                                o.optimizedBinaryString,
                                o.base64
                              ));
                      var y = new u(e, c, o);
                      this.files[e] = y;
                    }
                    var i = e("./utf8"),
                      a = e("./utils"),
                      s = e("./stream/GenericWorker"),
                      o = e("./stream/StreamHelper"),
                      l = e("./defaults"),
                      h = e("./compressedObject"),
                      u = e("./zipObject"),
                      c = e("./generate"),
                      d = e("./nodejsUtils"),
                      f = e("./nodejs/NodejsStreamInputAdapter"),
                      p = function (e) {
                        "/" === e.slice(-1) && (e = e.substring(0, e.length - 1));
                        var t = e.lastIndexOf("/");
                        return 0 < t ? e.substring(0, t) : "";
                      },
                      m = function (e) {
                        return "/" !== e.slice(-1) && (e += "/"), e;
                      },
                      g = function (e, t) {
                        return (
                          (t = void 0 !== t ? t : l.createFolders),
                          (e = m(e)),
                          this.files[e] ||
                            r.call(this, e, null, { dir: !0, createFolders: t }),
                          this.files[e]
                        );
                      };
                    function v(e) {
                      return (
                        "[object RegExp]" === Object.prototype.toString.call(e)
                      );
                    }
                    var y = {
                      load: function () {
                        throw new Error(
                          "This method has been removed in JSZip 3.0, please check the upgrade guide."
                        );
                      },
                      forEach: function (e) {
                        var t, n, r;
                        for (t in this.files)
                          (r = this.files[t]),
                            (n = t.slice(this.root.length, t.length)) &&
                              t.slice(0, this.root.length) === this.root &&
                              e(n, r);
                      },
                      filter: function (e) {
                        var t = [];
                        return (
                          this.forEach(function (n, r) {
                            e(n, r) && t.push(r);
                          }),
                          t
                        );
                      },
                      file: function (e, t, n) {
                        if (1 !== arguments.length)
                          return (e = this.root + e), r.call(this, e, t, n), this;
                        if (v(e)) {
                          var i = e;
                          return this.filter(function (e, t) {
                            return !t.dir && i.test(e);
                          });
                        }
                        var a = this.files[this.root + e];
                        return a && !a.dir ? a : null;
                      },
                      folder: function (e) {
                        if (!e) return this;
                        if (v(e))
                          return this.filter(function (t, n) {
                            return n.dir && e.test(t);
                          });
                        var t = this.root + e,
                          n = g.call(this, t),
                          r = this.clone();
                        return (r.root = n.name), r;
                      },
                      remove: function (e) {
                        e = this.root + e;
                        var t = this.files[e];
                        if (
                          (t ||
                            ("/" !== e.slice(-1) && (e += "/"),
                            (t = this.files[e])),
                          t && !t.dir)
                        )
                          delete this.files[e];
                        else
                          for (
                            var n = this.filter(function (t, n) {
                                return n.name.slice(0, e.length) === e;
                              }),
                              r = 0;
                            r < n.length;
                            r++
                          )
                            delete this.files[n[r].name];
                        return this;
                      },
                      generate: function () {
                        throw new Error(
                          "This method has been removed in JSZip 3.0, please check the upgrade guide."
                        );
                      },
                      generateInternalStream: function (e) {
                        var t,
                          n = {};
                        try {
                          if (
                            (((n = a.extend(e || {}, {
                              streamFiles: !1,
                              compression: "STORE",
                              compressionOptions: null,
                              type: "",
                              platform: "DOS",
                              comment: null,
                              mimeType: "application/zip",
                              encodeFileName: i.utf8encode
                            })).type = n.type.toLowerCase()),
                            (n.compression = n.compression.toUpperCase()),
                            "binarystring" === n.type && (n.type = "string"),
                            !n.type)
                          )
                            throw new Error("No output type specified.");
                          a.checkSupport(n.type),
                            ("darwin" !== n.platform &&
                              "freebsd" !== n.platform &&
                              "linux" !== n.platform &&
                              "sunos" !== n.platform) ||
                              (n.platform = "UNIX"),
                            "win32" === n.platform && (n.platform = "DOS");
                          var r = n.comment || this.comment || "";
                          t = c.generateWorker(this, n, r);
                        } catch (e) {
                          (t = new s("error")).error(e);
                        }
                        return new o(t, n.type || "string", n.mimeType);
                      },
                      generateAsync: function (e, t) {
                        return this.generateInternalStream(e).accumulate(t);
                      },
                      generateNodeStream: function (e, t) {
                        return (
                          (e = e || {}).type || (e.type = "nodebuffer"),
                          this.generateInternalStream(e).toNodejsStream(t)
                        );
                      }
                    };
                    t.exports = y;
                  },
                  {
                    "./compressedObject": 2,
                    "./defaults": 5,
                    "./generate": 9,
                    "./nodejs/NodejsStreamInputAdapter": 12,
                    "./nodejsUtils": 14,
                    "./stream/GenericWorker": 28,
                    "./stream/StreamHelper": 29,
                    "./utf8": 31,
                    "./utils": 32,
                    "./zipObject": 35
                  }
                ],
                16: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = e("stream");
                  },
                  { stream: void 0 }
                ],
                17: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./DataReader");
                    function i(e) {
                      r.call(this, e);
                      for (var t = 0; t < this.data.length; t++)
                        e[t] = 255 & e[t];
                    }
                    e("../utils").inherits(i, r),
                      (i.prototype.byteAt = function (e) {
                        return this.data[this.zero + e];
                      }),
                      (i.prototype.lastIndexOfSignature = function (e) {
                        for (
                          var t = e.charCodeAt(0),
                            n = e.charCodeAt(1),
                            r = e.charCodeAt(2),
                            i = e.charCodeAt(3),
                            a = this.length - 4;
                          0 <= a;
                          --a
                        )
                          if (
                            this.data[a] === t &&
                            this.data[a + 1] === n &&
                            this.data[a + 2] === r &&
                            this.data[a + 3] === i
                          )
                            return a - this.zero;
                        return -1;
                      }),
                      (i.prototype.readAndCheckSignature = function (e) {
                        var t = e.charCodeAt(0),
                          n = e.charCodeAt(1),
                          r = e.charCodeAt(2),
                          i = e.charCodeAt(3),
                          a = this.readData(4);
                        return (
                          t === a[0] && n === a[1] && r === a[2] && i === a[3]
                        );
                      }),
                      (i.prototype.readData = function (e) {
                        if ((this.checkOffset(e), 0 === e)) return [];
                        var t = this.data.slice(
                          this.zero + this.index,
                          this.zero + this.index + e
                        );
                        return (this.index += e), t;
                      }),
                      (t.exports = i);
                  },
                  { "../utils": 32, "./DataReader": 18 }
                ],
                18: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils");
                    function i(e) {
                      (this.data = e),
                        (this.length = e.length),
                        (this.index = 0),
                        (this.zero = 0);
                    }
                    (i.prototype = {
                      checkOffset: function (e) {
                        this.checkIndex(this.index + e);
                      },
                      checkIndex: function (e) {
                        if (this.length < this.zero + e || e < 0)
                          throw new Error(
                            "End of data reached (data length = " +
                              this.length +
                              ", asked index = " +
                              e +
                              "). Corrupted zip ?"
                          );
                      },
                      setIndex: function (e) {
                        this.checkIndex(e), (this.index = e);
                      },
                      skip: function (e) {
                        this.setIndex(this.index + e);
                      },
                      byteAt: function () {},
                      readInt: function (e) {
                        var t,
                          n = 0;
                        for (
                          this.checkOffset(e), t = this.index + e - 1;
                          t >= this.index;
                          t--
                        )
                          n = (n << 8) + this.byteAt(t);
                        return (this.index += e), n;
                      },
                      readString: function (e) {
                        return r.transformTo("string", this.readData(e));
                      },
                      readData: function () {},
                      lastIndexOfSignature: function () {},
                      readAndCheckSignature: function () {},
                      readDate: function () {
                        var e = this.readInt(4);
                        return new Date(
                          Date.UTC(
                            1980 + ((e >> 25) & 127),
                            ((e >> 21) & 15) - 1,
                            (e >> 16) & 31,
                            (e >> 11) & 31,
                            (e >> 5) & 63,
                            (31 & e) << 1
                          )
                        );
                      }
                    }),
                      (t.exports = i);
                  },
                  { "../utils": 32 }
                ],
                19: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./Uint8ArrayReader");
                    function i(e) {
                      r.call(this, e);
                    }
                    e("../utils").inherits(i, r),
                      (i.prototype.readData = function (e) {
                        this.checkOffset(e);
                        var t = this.data.slice(
                          this.zero + this.index,
                          this.zero + this.index + e
                        );
                        return (this.index += e), t;
                      }),
                      (t.exports = i);
                  },
                  { "../utils": 32, "./Uint8ArrayReader": 21 }
                ],
                20: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./DataReader");
                    function i(e) {
                      r.call(this, e);
                    }
                    e("../utils").inherits(i, r),
                      (i.prototype.byteAt = function (e) {
                        return this.data.charCodeAt(this.zero + e);
                      }),
                      (i.prototype.lastIndexOfSignature = function (e) {
                        return this.data.lastIndexOf(e) - this.zero;
                      }),
                      (i.prototype.readAndCheckSignature = function (e) {
                        return e === this.readData(4);
                      }),
                      (i.prototype.readData = function (e) {
                        this.checkOffset(e);
                        var t = this.data.slice(
                          this.zero + this.index,
                          this.zero + this.index + e
                        );
                        return (this.index += e), t;
                      }),
                      (t.exports = i);
                  },
                  { "../utils": 32, "./DataReader": 18 }
                ],
                21: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./ArrayReader");
                    function i(e) {
                      r.call(this, e);
                    }
                    e("../utils").inherits(i, r),
                      (i.prototype.readData = function (e) {
                        if ((this.checkOffset(e), 0 === e))
                          return new Uint8Array(0);
                        var t = this.data.subarray(
                          this.zero + this.index,
                          this.zero + this.index + e
                        );
                        return (this.index += e), t;
                      }),
                      (t.exports = i);
                  },
                  { "../utils": 32, "./ArrayReader": 17 }
                ],
                22: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils"),
                      i = e("../support"),
                      a = e("./ArrayReader"),
                      s = e("./StringReader"),
                      o = e("./NodeBufferReader"),
                      l = e("./Uint8ArrayReader");
                    t.exports = function (e) {
                      var t = r.getTypeOf(e);
                      return (
                        r.checkSupport(t),
                        "string" !== t || i.uint8array
                          ? "nodebuffer" === t
                            ? new o(e)
                            : i.uint8array
                            ? new l(r.transformTo("uint8array", e))
                            : new a(r.transformTo("array", e))
                          : new s(e)
                      );
                    };
                  },
                  {
                    "../support": 30,
                    "../utils": 32,
                    "./ArrayReader": 17,
                    "./NodeBufferReader": 19,
                    "./StringReader": 20,
                    "./Uint8ArrayReader": 21
                  }
                ],
                23: [
                  function (e, t, n) {
                    "use strict";
                    (n.LOCAL_FILE_HEADER = "PK"),
                      (n.CENTRAL_FILE_HEADER = "PK"),
                      (n.CENTRAL_DIRECTORY_END = "PK"),
                      (n.ZIP64_CENTRAL_DIRECTORY_LOCATOR = "PK"),
                      (n.ZIP64_CENTRAL_DIRECTORY_END = "PK"),
                      (n.DATA_DESCRIPTOR = "PK\b");
                  },
                  {}
                ],
                24: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./GenericWorker"),
                      i = e("../utils");
                    function a(e) {
                      r.call(this, "ConvertWorker to " + e), (this.destType = e);
                    }
                    i.inherits(a, r),
                      (a.prototype.processChunk = function (e) {
                        this.push({
                          data: i.transformTo(this.destType, e.data),
                          meta: e.meta
                        });
                      }),
                      (t.exports = a);
                  },
                  { "../utils": 32, "./GenericWorker": 28 }
                ],
                25: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./GenericWorker"),
                      i = e("../crc32");
                    function a() {
                      r.call(this, "Crc32Probe"), this.withStreamInfo("crc32", 0);
                    }
                    e("../utils").inherits(a, r),
                      (a.prototype.processChunk = function (e) {
                        (this.streamInfo.crc32 = i(
                          e.data,
                          this.streamInfo.crc32 || 0
                        )),
                          this.push(e);
                      }),
                      (t.exports = a);
                  },
                  { "../crc32": 4, "../utils": 32, "./GenericWorker": 28 }
                ],
                26: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils"),
                      i = e("./GenericWorker");
                    function a(e) {
                      i.call(this, "DataLengthProbe for " + e),
                        (this.propName = e),
                        this.withStreamInfo(e, 0);
                    }
                    r.inherits(a, i),
                      (a.prototype.processChunk = function (e) {
                        if (e) {
                          var t = this.streamInfo[this.propName] || 0;
                          this.streamInfo[this.propName] = t + e.data.length;
                        }
                        i.prototype.processChunk.call(this, e);
                      }),
                      (t.exports = a);
                  },
                  { "../utils": 32, "./GenericWorker": 28 }
                ],
                27: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils"),
                      i = e("./GenericWorker");
                    function a(e) {
                      i.call(this, "DataWorker");
                      var t = this;
                      (this.dataIsReady = !1),
                        (this.index = 0),
                        (this.max = 0),
                        (this.data = null),
                        (this.type = ""),
                        (this._tickScheduled = !1),
                        e.then(
                          function (e) {
                            (t.dataIsReady = !0),
                              (t.data = e),
                              (t.max = (e && e.length) || 0),
                              (t.type = r.getTypeOf(e)),
                              t.isPaused || t._tickAndRepeat();
                          },
                          function (e) {
                            t.error(e);
                          }
                        );
                    }
                    r.inherits(a, i),
                      (a.prototype.cleanUp = function () {
                        i.prototype.cleanUp.call(this), (this.data = null);
                      }),
                      (a.prototype.resume = function () {
                        return (
                          !!i.prototype.resume.call(this) &&
                          (!this._tickScheduled &&
                            this.dataIsReady &&
                            ((this._tickScheduled = !0),
                            r.delay(this._tickAndRepeat, [], this)),
                          !0)
                        );
                      }),
                      (a.prototype._tickAndRepeat = function () {
                        (this._tickScheduled = !1),
                          this.isPaused ||
                            this.isFinished ||
                            (this._tick(),
                            this.isFinished ||
                              (r.delay(this._tickAndRepeat, [], this),
                              (this._tickScheduled = !0)));
                      }),
                      (a.prototype._tick = function () {
                        if (this.isPaused || this.isFinished) return !1;
                        var e = null,
                          t = Math.min(this.max, this.index + 16384);
                        if (this.index >= this.max) return this.end();
                        switch (this.type) {
                          case "string":
                            e = this.data.substring(this.index, t);
                            break;
                          case "uint8array":
                            e = this.data.subarray(this.index, t);
                            break;
                          case "array":
                          case "nodebuffer":
                            e = this.data.slice(this.index, t);
                        }
                        return (
                          (this.index = t),
                          this.push({
                            data: e,
                            meta: {
                              percent: this.max
                                ? (this.index / this.max) * 100
                                : 0
                            }
                          })
                        );
                      }),
                      (t.exports = a);
                  },
                  { "../utils": 32, "./GenericWorker": 28 }
                ],
                28: [
                  function (e, t, n) {
                    "use strict";
                    function r(e) {
                      (this.name = e || "default"),
                        (this.streamInfo = {}),
                        (this.generatedError = null),
                        (this.extraStreamInfo = {}),
                        (this.isPaused = !0),
                        (this.isFinished = !1),
                        (this.isLocked = !1),
                        (this._listeners = { data: [], end: [], error: [] }),
                        (this.previous = null);
                    }
                    (r.prototype = {
                      push: function (e) {
                        this.emit("data", e);
                      },
                      end: function () {
                        if (this.isFinished) return !1;
                        this.flush();
                        try {
                          this.emit("end"),
                            this.cleanUp(),
                            (this.isFinished = !0);
                        } catch (e) {
                          this.emit("error", e);
                        }
                        return !0;
                      },
                      error: function (e) {
                        return (
                          !this.isFinished &&
                          (this.isPaused
                            ? (this.generatedError = e)
                            : ((this.isFinished = !0),
                              this.emit("error", e),
                              this.previous && this.previous.error(e),
                              this.cleanUp()),
                          !0)
                        );
                      },
                      on: function (e, t) {
                        return this._listeners[e].push(t), this;
                      },
                      cleanUp: function () {
                        (this.streamInfo =
                          this.generatedError =
                          this.extraStreamInfo =
                            null),
                          (this._listeners = []);
                      },
                      emit: function (e, t) {
                        if (this._listeners[e])
                          for (var n = 0; n < this._listeners[e].length; n++)
                            this._listeners[e][n].call(this, t);
                      },
                      pipe: function (e) {
                        return e.registerPrevious(this);
                      },
                      registerPrevious: function (e) {
                        if (this.isLocked)
                          throw new Error(
                            "The stream '" + this + "' has already been used."
                          );
                        (this.streamInfo = e.streamInfo),
                          this.mergeStreamInfo(),
                          (this.previous = e);
                        var t = this;
                        return (
                          e.on("data", function (e) {
                            t.processChunk(e);
                          }),
                          e.on("end", function () {
                            t.end();
                          }),
                          e.on("error", function (e) {
                            t.error(e);
                          }),
                          this
                        );
                      },
                      pause: function () {
                        return (
                          !this.isPaused &&
                          !this.isFinished &&
                          ((this.isPaused = !0),
                          this.previous && this.previous.pause(),
                          !0)
                        );
                      },
                      resume: function () {
                        if (!this.isPaused || this.isFinished) return !1;
                        var e = (this.isPaused = !1);
                        return (
                          this.generatedError &&
                            (this.error(this.generatedError), (e = !0)),
                          this.previous && this.previous.resume(),
                          !e
                        );
                      },
                      flush: function () {},
                      processChunk: function (e) {
                        this.push(e);
                      },
                      withStreamInfo: function (e, t) {
                        return (
                          (this.extraStreamInfo[e] = t),
                          this.mergeStreamInfo(),
                          this
                        );
                      },
                      mergeStreamInfo: function () {
                        for (var e in this.extraStreamInfo)
                          Object.prototype.hasOwnProperty.call(
                            this.extraStreamInfo,
                            e
                          ) && (this.streamInfo[e] = this.extraStreamInfo[e]);
                      },
                      lock: function () {
                        if (this.isLocked)
                          throw new Error(
                            "The stream '" + this + "' has already been used."
                          );
                        (this.isLocked = !0),
                          this.previous && this.previous.lock();
                      },
                      toString: function () {
                        var e = "Worker " + this.name;
                        return this.previous ? this.previous + " -> " + e : e;
                      }
                    }),
                      (t.exports = r);
                  },
                  {}
                ],
                29: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils"),
                      i = e("./ConvertWorker"),
                      a = e("./GenericWorker"),
                      s = e("../base64"),
                      o = e("../support"),
                      l = e("../external"),
                      h = null;
                    if (o.nodestream)
                      try {
                        h = e("../nodejs/NodejsStreamOutputAdapter");
                      } catch (e) {}
                    function u(e, t, n) {
                      var s = t;
                      switch (t) {
                        case "blob":
                        case "arraybuffer":
                          s = "uint8array";
                          break;
                        case "base64":
                          s = "string";
                      }
                      try {
                        (this._internalType = s),
                          (this._outputType = t),
                          (this._mimeType = n),
                          r.checkSupport(s),
                          (this._worker = e.pipe(new i(s))),
                          e.lock();
                      } catch (e) {
                        (this._worker = new a("error")), this._worker.error(e);
                      }
                    }
                    (u.prototype = {
                      accumulate: function (e) {
                        return (function (e, t) {
                          return new l.Promise(function (n, i) {
                            var a = [],
                              o = e._internalType,
                              l = e._outputType,
                              h = e._mimeType;
                            e.on("data", function (e, n) {
                              a.push(e), t && t(n);
                            })
                              .on("error", function (e) {
                                (a = []), i(e);
                              })
                              .on("end", function () {
                                try {
                                  var e = (function (e, t, n) {
                                    switch (e) {
                                      case "blob":
                                        return r.newBlob(
                                          r.transformTo("arraybuffer", t),
                                          n
                                        );
                                      case "base64":
                                        return s.encode(t);
                                      default:
                                        return r.transformTo(e, t);
                                    }
                                  })(
                                    l,
                                    (function (e, t) {
                                      var n,
                                        r = 0,
                                        i = null,
                                        a = 0;
                                      for (n = 0; n < t.length; n++)
                                        a += t[n].length;
                                      switch (e) {
                                        case "string":
                                          return t.join("");
                                        case "array":
                                          return Array.prototype.concat.apply(
                                            [],
                                            t
                                          );
                                        case "uint8array":
                                          for (
                                            i = new Uint8Array(a), n = 0;
                                            n < t.length;
                                            n++
                                          )
                                            i.set(t[n], r), (r += t[n].length);
                                          return i;
                                        case "nodebuffer":
                                          return Buffer.concat(t);
                                        default:
                                          throw new Error(
                                            "concat : unsupported type '" +
                                              e +
                                              "'"
                                          );
                                      }
                                    })(o, a),
                                    h
                                  );
                                  n(e);
                                } catch (e) {
                                  i(e);
                                }
                                a = [];
                              })
                              .resume();
                          });
                        })(this, e);
                      },
                      on: function (e, t) {
                        var n = this;
                        return (
                          "data" === e
                            ? this._worker.on(e, function (e) {
                                t.call(n, e.data, e.meta);
                              })
                            : this._worker.on(e, function () {
                                r.delay(t, arguments, n);
                              }),
                          this
                        );
                      },
                      resume: function () {
                        return (
                          r.delay(this._worker.resume, [], this._worker), this
                        );
                      },
                      pause: function () {
                        return this._worker.pause(), this;
                      },
                      toNodejsStream: function (e) {
                        if (
                          (r.checkSupport("nodestream"),
                          "nodebuffer" !== this._outputType)
                        )
                          throw new Error(
                            this._outputType + " is not supported by this method"
                          );
                        return new h(
                          this,
                          { objectMode: "nodebuffer" !== this._outputType },
                          e
                        );
                      }
                    }),
                      (t.exports = u);
                  },
                  {
                    "../base64": 1,
                    "../external": 6,
                    "../nodejs/NodejsStreamOutputAdapter": 13,
                    "../support": 30,
                    "../utils": 32,
                    "./ConvertWorker": 24,
                    "./GenericWorker": 28
                  }
                ],
                30: [
                  function (e, t, n) {
                    "use strict";
                    if (
                      ((n.base64 = !0),
                      (n.array = !0),
                      (n.string = !0),
                      (n.arraybuffer =
                        "undefined" != typeof ArrayBuffer &&
                        "undefined" != typeof Uint8Array),
                      (n.nodebuffer = "undefined" != typeof Buffer),
                      (n.uint8array = "undefined" != typeof Uint8Array),
                      "undefined" == typeof ArrayBuffer)
                    )
                      n.blob = !1;
                    else {
                      var r = new ArrayBuffer(0);
                      try {
                        n.blob =
                          0 === new Blob([r], { type: "application/zip" }).size;
                      } catch (e) {
                        try {
                          var i = new (self.BlobBuilder ||
                            self.WebKitBlobBuilder ||
                            self.MozBlobBuilder ||
                            self.MSBlobBuilder)();
                          i.append(r),
                            (n.blob = 0 === i.getBlob("application/zip").size);
                        } catch (e) {
                          n.blob = !1;
                        }
                      }
                    }
                    try {
                      n.nodestream = !!e("readable-stream").Readable;
                    } catch (e) {
                      n.nodestream = !1;
                    }
                  },
                  { "readable-stream": 16 }
                ],
                31: [
                  function (e, t, n) {
                    "use strict";
                    for (
                      var r = e("./utils"),
                        i = e("./support"),
                        a = e("./nodejsUtils"),
                        s = e("./stream/GenericWorker"),
                        o = new Array(256),
                        l = 0;
                      l < 256;
                      l++
                    )
                      o[l] =
                        252 <= l
                          ? 6
                          : 248 <= l
                          ? 5
                          : 240 <= l
                          ? 4
                          : 224 <= l
                          ? 3
                          : 192 <= l
                          ? 2
                          : 1;
                    function h() {
                      s.call(this, "utf-8 decode"), (this.leftOver = null);
                    }
                    function u() {
                      s.call(this, "utf-8 encode");
                    }
                    (o[254] = o[254] = 1),
                      (n.utf8encode = function (e) {
                        return i.nodebuffer
                          ? a.newBufferFrom(e, "utf-8")
                          : (function (e) {
                              var t,
                                n,
                                r,
                                a,
                                s,
                                o = e.length,
                                l = 0;
                              for (a = 0; a < o; a++)
                                55296 == (64512 & (n = e.charCodeAt(a))) &&
                                  a + 1 < o &&
                                  56320 == (64512 & (r = e.charCodeAt(a + 1))) &&
                                  ((n =
                                    65536 + ((n - 55296) << 10) + (r - 56320)),
                                  a++),
                                  (l +=
                                    n < 128
                                      ? 1
                                      : n < 2048
                                      ? 2
                                      : n < 65536
                                      ? 3
                                      : 4);
                              for (
                                t = i.uint8array
                                  ? new Uint8Array(l)
                                  : new Array(l),
                                  a = s = 0;
                                s < l;
                                a++
                              )
                                55296 == (64512 & (n = e.charCodeAt(a))) &&
                                  a + 1 < o &&
                                  56320 == (64512 & (r = e.charCodeAt(a + 1))) &&
                                  ((n =
                                    65536 + ((n - 55296) << 10) + (r - 56320)),
                                  a++),
                                  n < 128
                                    ? (t[s++] = n)
                                    : (n < 2048
                                        ? (t[s++] = 192 | (n >>> 6))
                                        : (n < 65536
                                            ? (t[s++] = 224 | (n >>> 12))
                                            : ((t[s++] = 240 | (n >>> 18)),
                                              (t[s++] = 128 | ((n >>> 12) & 63))),
                                          (t[s++] = 128 | ((n >>> 6) & 63))),
                                      (t[s++] = 128 | (63 & n)));
                              return t;
                            })(e);
                      }),
                      (n.utf8decode = function (e) {
                        return i.nodebuffer
                          ? r.transformTo("nodebuffer", e).toString("utf-8")
                          : (function (e) {
                              var t,
                                n,
                                i,
                                a,
                                s = e.length,
                                l = new Array(2 * s);
                              for (t = n = 0; t < s; )
                                if ((i = e[t++]) < 128) l[n++] = i;
                                else if (4 < (a = o[i]))
                                  (l[n++] = 65533), (t += a - 1);
                                else {
                                  for (
                                    i &= 2 === a ? 31 : 3 === a ? 15 : 7;
                                    1 < a && t < s;
  
                                  )
                                    (i = (i << 6) | (63 & e[t++])), a--;
                                  1 < a
                                    ? (l[n++] = 65533)
                                    : i < 65536
                                    ? (l[n++] = i)
                                    : ((i -= 65536),
                                      (l[n++] = 55296 | ((i >> 10) & 1023)),
                                      (l[n++] = 56320 | (1023 & i)));
                                }
                              return (
                                l.length !== n &&
                                  (l.subarray
                                    ? (l = l.subarray(0, n))
                                    : (l.length = n)),
                                r.applyFromCharCode(l)
                              );
                            })(
                              (e = r.transformTo(
                                i.uint8array ? "uint8array" : "array",
                                e
                              ))
                            );
                      }),
                      r.inherits(h, s),
                      (h.prototype.processChunk = function (e) {
                        var t = r.transformTo(
                          i.uint8array ? "uint8array" : "array",
                          e.data
                        );
                        if (this.leftOver && this.leftOver.length) {
                          if (i.uint8array) {
                            var a = t;
                            (t = new Uint8Array(
                              a.length + this.leftOver.length
                            )).set(this.leftOver, 0),
                              t.set(a, this.leftOver.length);
                          } else t = this.leftOver.concat(t);
                          this.leftOver = null;
                        }
                        var s = (function (e, t) {
                            var n;
                            for (
                              (t = t || e.length) > e.length && (t = e.length),
                                n = t - 1;
                              0 <= n && 128 == (192 & e[n]);
  
                            )
                              n--;
                            return n < 0 || 0 === n ? t : n + o[e[n]] > t ? n : t;
                          })(t),
                          l = t;
                        s !== t.length &&
                          (i.uint8array
                            ? ((l = t.subarray(0, s)),
                              (this.leftOver = t.subarray(s, t.length)))
                            : ((l = t.slice(0, s)),
                              (this.leftOver = t.slice(s, t.length)))),
                          this.push({ data: n.utf8decode(l), meta: e.meta });
                      }),
                      (h.prototype.flush = function () {
                        this.leftOver &&
                          this.leftOver.length &&
                          (this.push({
                            data: n.utf8decode(this.leftOver),
                            meta: {}
                          }),
                          (this.leftOver = null));
                      }),
                      (n.Utf8DecodeWorker = h),
                      r.inherits(u, s),
                      (u.prototype.processChunk = function (e) {
                        this.push({ data: n.utf8encode(e.data), meta: e.meta });
                      }),
                      (n.Utf8EncodeWorker = u);
                  },
                  {
                    "./nodejsUtils": 14,
                    "./stream/GenericWorker": 28,
                    "./support": 30,
                    "./utils": 32
                  }
                ],
                32: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./support"),
                      i = e("./base64"),
                      a = e("./nodejsUtils"),
                      s = e("./external");
                    function o(e) {
                      return e;
                    }
                    function l(e, t) {
                      for (var n = 0; n < e.length; ++n)
                        t[n] = 255 & e.charCodeAt(n);
                      return t;
                    }
                    e("setimmediate"),
                      (n.newBlob = function (e, t) {
                        n.checkSupport("blob");
                        try {
                          return new Blob([e], { type: t });
                        } catch (n) {
                          try {
                            var r = new (self.BlobBuilder ||
                              self.WebKitBlobBuilder ||
                              self.MozBlobBuilder ||
                              self.MSBlobBuilder)();
                            return r.append(e), r.getBlob(t);
                          } catch (e) {
                            throw new Error("Bug : can't construct the Blob.");
                          }
                        }
                      });
                    var h = {
                      stringifyByChunk: function (e, t, n) {
                        var r = [],
                          i = 0,
                          a = e.length;
                        if (a <= n) return String.fromCharCode.apply(null, e);
                        for (; i < a; )
                          "array" === t || "nodebuffer" === t
                            ? r.push(
                                String.fromCharCode.apply(
                                  null,
                                  e.slice(i, Math.min(i + n, a))
                                )
                              )
                            : r.push(
                                String.fromCharCode.apply(
                                  null,
                                  e.subarray(i, Math.min(i + n, a))
                                )
                              ),
                            (i += n);
                        return r.join("");
                      },
                      stringifyByChar: function (e) {
                        for (var t = "", n = 0; n < e.length; n++)
                          t += String.fromCharCode(e[n]);
                        return t;
                      },
                      applyCanBeUsed: {
                        uint8array: (function () {
                          try {
                            return (
                              r.uint8array &&
                              1 ===
                                String.fromCharCode.apply(null, new Uint8Array(1))
                                  .length
                            );
                          } catch (e) {
                            return !1;
                          }
                        })(),
                        nodebuffer: (function () {
                          try {
                            return (
                              r.nodebuffer &&
                              1 ===
                                String.fromCharCode.apply(null, a.allocBuffer(1))
                                  .length
                            );
                          } catch (e) {
                            return !1;
                          }
                        })()
                      }
                    };
                    function u(e) {
                      var t = 65536,
                        r = n.getTypeOf(e),
                        i = !0;
                      if (
                        ("uint8array" === r
                          ? (i = h.applyCanBeUsed.uint8array)
                          : "nodebuffer" === r &&
                            (i = h.applyCanBeUsed.nodebuffer),
                        i)
                      )
                        for (; 1 < t; )
                          try {
                            return h.stringifyByChunk(e, r, t);
                          } catch (e) {
                            t = Math.floor(t / 2);
                          }
                      return h.stringifyByChar(e);
                    }
                    function c(e, t) {
                      for (var n = 0; n < e.length; n++) t[n] = e[n];
                      return t;
                    }
                    n.applyFromCharCode = u;
                    var d = {};
                    (d.string = {
                      string: o,
                      array: function (e) {
                        return l(e, new Array(e.length));
                      },
                      arraybuffer: function (e) {
                        return d.string.uint8array(e).buffer;
                      },
                      uint8array: function (e) {
                        return l(e, new Uint8Array(e.length));
                      },
                      nodebuffer: function (e) {
                        return l(e, a.allocBuffer(e.length));
                      }
                    }),
                      (d.array = {
                        string: u,
                        array: o,
                        arraybuffer: function (e) {
                          return new Uint8Array(e).buffer;
                        },
                        uint8array: function (e) {
                          return new Uint8Array(e);
                        },
                        nodebuffer: function (e) {
                          return a.newBufferFrom(e);
                        }
                      }),
                      (d.arraybuffer = {
                        string: function (e) {
                          return u(new Uint8Array(e));
                        },
                        array: function (e) {
                          return c(new Uint8Array(e), new Array(e.byteLength));
                        },
                        arraybuffer: o,
                        uint8array: function (e) {
                          return new Uint8Array(e);
                        },
                        nodebuffer: function (e) {
                          return a.newBufferFrom(new Uint8Array(e));
                        }
                      }),
                      (d.uint8array = {
                        string: u,
                        array: function (e) {
                          return c(e, new Array(e.length));
                        },
                        arraybuffer: function (e) {
                          return e.buffer;
                        },
                        uint8array: o,
                        nodebuffer: function (e) {
                          return a.newBufferFrom(e);
                        }
                      }),
                      (d.nodebuffer = {
                        string: u,
                        array: function (e) {
                          return c(e, new Array(e.length));
                        },
                        arraybuffer: function (e) {
                          return d.nodebuffer.uint8array(e).buffer;
                        },
                        uint8array: function (e) {
                          return c(e, new Uint8Array(e.length));
                        },
                        nodebuffer: o
                      }),
                      (n.transformTo = function (e, t) {
                        if (((t = t || ""), !e)) return t;
                        n.checkSupport(e);
                        var r = n.getTypeOf(t);
                        return d[r][e](t);
                      }),
                      (n.resolve = function (e) {
                        for (
                          var t = e.split("/"), n = [], r = 0;
                          r < t.length;
                          r++
                        ) {
                          var i = t[r];
                          "." === i ||
                            ("" === i && 0 !== r && r !== t.length - 1) ||
                            (".." === i ? n.pop() : n.push(i));
                        }
                        return n.join("/");
                      }),
                      (n.getTypeOf = function (e) {
                        return "string" == typeof e
                          ? "string"
                          : "[object Array]" === Object.prototype.toString.call(e)
                          ? "array"
                          : r.nodebuffer && a.isBuffer(e)
                          ? "nodebuffer"
                          : r.uint8array && e instanceof Uint8Array
                          ? "uint8array"
                          : r.arraybuffer && e instanceof ArrayBuffer
                          ? "arraybuffer"
                          : void 0;
                      }),
                      (n.checkSupport = function (e) {
                        if (!r[e.toLowerCase()])
                          throw new Error(
                            e + " is not supported by this platform"
                          );
                      }),
                      (n.MAX_VALUE_16BITS = 65535),
                      (n.MAX_VALUE_32BITS = -1),
                      (n.pretty = function (e) {
                        var t,
                          n,
                          r = "";
                        for (n = 0; n < (e || "").length; n++)
                          r +=
                            "\\x" +
                            ((t = e.charCodeAt(n)) < 16 ? "0" : "") +
                            t.toString(16).toUpperCase();
                        return r;
                      }),
                      (n.delay = function (e, t, n) {
                        setImmediate(function () {
                          e.apply(n || null, t || []);
                        });
                      }),
                      (n.inherits = function (e, t) {
                        function n() {}
                        (n.prototype = t.prototype), (e.prototype = new n());
                      }),
                      (n.extend = function () {
                        var e,
                          t,
                          n = {};
                        for (e = 0; e < arguments.length; e++)
                          for (t in arguments[e])
                            Object.prototype.hasOwnProperty.call(
                              arguments[e],
                              t
                            ) &&
                              void 0 === n[t] &&
                              (n[t] = arguments[e][t]);
                        return n;
                      }),
                      (n.prepareContent = function (e, t, a, o, h) {
                        return s.Promise.resolve(t)
                          .then(function (e) {
                            return r.blob &&
                              (e instanceof Blob ||
                                -1 !==
                                  ["[object File]", "[object Blob]"].indexOf(
                                    Object.prototype.toString.call(e)
                                  )) &&
                              "undefined" != typeof FileReader
                              ? new s.Promise(function (t, n) {
                                  var r = new FileReader();
                                  (r.onload = function (e) {
                                    t(e.target.result);
                                  }),
                                    (r.onerror = function (e) {
                                      n(e.target.error);
                                    }),
                                    r.readAsArrayBuffer(e);
                                })
                              : e;
                          })
                          .then(function (t) {
                            var u = n.getTypeOf(t);
                            return u
                              ? ("arraybuffer" === u
                                  ? (t = n.transformTo("uint8array", t))
                                  : "string" === u &&
                                    (h
                                      ? (t = i.decode(t))
                                      : a &&
                                        !0 !== o &&
                                        (t = (function (e) {
                                          return l(
                                            e,
                                            r.uint8array
                                              ? new Uint8Array(e.length)
                                              : new Array(e.length)
                                          );
                                        })(t))),
                                t)
                              : s.Promise.reject(
                                  new Error(
                                    "Can't read the data of '" +
                                      e +
                                      "'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"
                                  )
                                );
                          });
                      });
                  },
                  {
                    "./base64": 1,
                    "./external": 6,
                    "./nodejsUtils": 14,
                    "./support": 30,
                    setimmediate: 54
                  }
                ],
                33: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./reader/readerFor"),
                      i = e("./utils"),
                      a = e("./signature"),
                      s = e("./zipEntry"),
                      o = e("./support");
                    function l(e) {
                      (this.files = []), (this.loadOptions = e);
                    }
                    (l.prototype = {
                      checkSignature: function (e) {
                        if (!this.reader.readAndCheckSignature(e)) {
                          this.reader.index -= 4;
                          var t = this.reader.readString(4);
                          throw new Error(
                            "Corrupted zip or bug: unexpected signature (" +
                              i.pretty(t) +
                              ", expected " +
                              i.pretty(e) +
                              ")"
                          );
                        }
                      },
                      isSignature: function (e, t) {
                        var n = this.reader.index;
                        this.reader.setIndex(e);
                        var r = this.reader.readString(4) === t;
                        return this.reader.setIndex(n), r;
                      },
                      readBlockEndOfCentral: function () {
                        (this.diskNumber = this.reader.readInt(2)),
                          (this.diskWithCentralDirStart = this.reader.readInt(2)),
                          (this.centralDirRecordsOnThisDisk =
                            this.reader.readInt(2)),
                          (this.centralDirRecords = this.reader.readInt(2)),
                          (this.centralDirSize = this.reader.readInt(4)),
                          (this.centralDirOffset = this.reader.readInt(4)),
                          (this.zipCommentLength = this.reader.readInt(2));
                        var e = this.reader.readData(this.zipCommentLength),
                          t = o.uint8array ? "uint8array" : "array",
                          n = i.transformTo(t, e);
                        this.zipComment = this.loadOptions.decodeFileName(n);
                      },
                      readBlockZip64EndOfCentral: function () {
                        (this.zip64EndOfCentralSize = this.reader.readInt(8)),
                          this.reader.skip(4),
                          (this.diskNumber = this.reader.readInt(4)),
                          (this.diskWithCentralDirStart = this.reader.readInt(4)),
                          (this.centralDirRecordsOnThisDisk =
                            this.reader.readInt(8)),
                          (this.centralDirRecords = this.reader.readInt(8)),
                          (this.centralDirSize = this.reader.readInt(8)),
                          (this.centralDirOffset = this.reader.readInt(8)),
                          (this.zip64ExtensibleData = {});
                        for (
                          var e, t, n, r = this.zip64EndOfCentralSize - 44;
                          0 < r;
  
                        )
                          (e = this.reader.readInt(2)),
                            (t = this.reader.readInt(4)),
                            (n = this.reader.readData(t)),
                            (this.zip64ExtensibleData[e] = {
                              id: e,
                              length: t,
                              value: n
                            });
                      },
                      readBlockZip64EndOfCentralLocator: function () {
                        if (
                          ((this.diskWithZip64CentralDirStart =
                            this.reader.readInt(4)),
                          (this.relativeOffsetEndOfZip64CentralDir =
                            this.reader.readInt(8)),
                          (this.disksCount = this.reader.readInt(4)),
                          1 < this.disksCount)
                        )
                          throw new Error("Multi-volumes zip are not supported");
                      },
                      readLocalFiles: function () {
                        var e, t;
                        for (e = 0; e < this.files.length; e++)
                          (t = this.files[e]),
                            this.reader.setIndex(t.localHeaderOffset),
                            this.checkSignature(a.LOCAL_FILE_HEADER),
                            t.readLocalPart(this.reader),
                            t.handleUTF8(),
                            t.processAttributes();
                      },
                      readCentralDir: function () {
                        var e;
                        for (
                          this.reader.setIndex(this.centralDirOffset);
                          this.reader.readAndCheckSignature(
                            a.CENTRAL_FILE_HEADER
                          );
  
                        )
                          (e = new s(
                            { zip64: this.zip64 },
                            this.loadOptions
                          )).readCentralPart(this.reader),
                            this.files.push(e);
                        if (
                          this.centralDirRecords !== this.files.length &&
                          0 !== this.centralDirRecords &&
                          0 === this.files.length
                        )
                          throw new Error(
                            "Corrupted zip or bug: expected " +
                              this.centralDirRecords +
                              " records in central dir, got " +
                              this.files.length
                          );
                      },
                      readEndOfCentral: function () {
                        var e = this.reader.lastIndexOfSignature(
                          a.CENTRAL_DIRECTORY_END
                        );
                        if (e < 0)
                          throw this.isSignature(0, a.LOCAL_FILE_HEADER)
                            ? new Error(
                                "Corrupted zip: can't find end of central directory"
                              )
                            : new Error(
                                "Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"
                              );
                        this.reader.setIndex(e);
                        var t = e;
                        if (
                          (this.checkSignature(a.CENTRAL_DIRECTORY_END),
                          this.readBlockEndOfCentral(),
                          this.diskNumber === i.MAX_VALUE_16BITS ||
                            this.diskWithCentralDirStart === i.MAX_VALUE_16BITS ||
                            this.centralDirRecordsOnThisDisk ===
                              i.MAX_VALUE_16BITS ||
                            this.centralDirRecords === i.MAX_VALUE_16BITS ||
                            this.centralDirSize === i.MAX_VALUE_32BITS ||
                            this.centralDirOffset === i.MAX_VALUE_32BITS)
                        ) {
                          if (
                            ((this.zip64 = !0),
                            (e = this.reader.lastIndexOfSignature(
                              a.ZIP64_CENTRAL_DIRECTORY_LOCATOR
                            )) < 0)
                          )
                            throw new Error(
                              "Corrupted zip: can't find the ZIP64 end of central directory locator"
                            );
                          if (
                            (this.reader.setIndex(e),
                            this.checkSignature(
                              a.ZIP64_CENTRAL_DIRECTORY_LOCATOR
                            ),
                            this.readBlockZip64EndOfCentralLocator(),
                            !this.isSignature(
                              this.relativeOffsetEndOfZip64CentralDir,
                              a.ZIP64_CENTRAL_DIRECTORY_END
                            ) &&
                              ((this.relativeOffsetEndOfZip64CentralDir =
                                this.reader.lastIndexOfSignature(
                                  a.ZIP64_CENTRAL_DIRECTORY_END
                                )),
                              this.relativeOffsetEndOfZip64CentralDir < 0))
                          )
                            throw new Error(
                              "Corrupted zip: can't find the ZIP64 end of central directory"
                            );
                          this.reader.setIndex(
                            this.relativeOffsetEndOfZip64CentralDir
                          ),
                            this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),
                            this.readBlockZip64EndOfCentral();
                        }
                        var n = this.centralDirOffset + this.centralDirSize;
                        this.zip64 &&
                          ((n += 20), (n += 12 + this.zip64EndOfCentralSize));
                        var r = t - n;
                        if (0 < r)
                          this.isSignature(t, a.CENTRAL_FILE_HEADER) ||
                            (this.reader.zero = r);
                        else if (r < 0)
                          throw new Error(
                            "Corrupted zip: missing " + Math.abs(r) + " bytes."
                          );
                      },
                      prepareReader: function (e) {
                        this.reader = r(e);
                      },
                      load: function (e) {
                        this.prepareReader(e),
                          this.readEndOfCentral(),
                          this.readCentralDir(),
                          this.readLocalFiles();
                      }
                    }),
                      (t.exports = l);
                  },
                  {
                    "./reader/readerFor": 22,
                    "./signature": 23,
                    "./support": 30,
                    "./utils": 32,
                    "./zipEntry": 34
                  }
                ],
                34: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./reader/readerFor"),
                      i = e("./utils"),
                      a = e("./compressedObject"),
                      s = e("./crc32"),
                      o = e("./utf8"),
                      l = e("./compressions"),
                      h = e("./support");
                    function u(e, t) {
                      (this.options = e), (this.loadOptions = t);
                    }
                    (u.prototype = {
                      isEncrypted: function () {
                        return 1 == (1 & this.bitFlag);
                      },
                      useUTF8: function () {
                        return 2048 == (2048 & this.bitFlag);
                      },
                      readLocalPart: function (e) {
                        var t, n;
                        if (
                          (e.skip(22),
                          (this.fileNameLength = e.readInt(2)),
                          (n = e.readInt(2)),
                          (this.fileName = e.readData(this.fileNameLength)),
                          e.skip(n),
                          -1 === this.compressedSize ||
                            -1 === this.uncompressedSize)
                        )
                          throw new Error(
                            "Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)"
                          );
                        if (
                          null ===
                          (t = (function (e) {
                            for (var t in l)
                              if (
                                Object.prototype.hasOwnProperty.call(l, t) &&
                                l[t].magic === e
                              )
                                return l[t];
                            return null;
                          })(this.compressionMethod))
                        )
                          throw new Error(
                            "Corrupted zip : compression " +
                              i.pretty(this.compressionMethod) +
                              " unknown (inner file : " +
                              i.transformTo("string", this.fileName) +
                              ")"
                          );
                        this.decompressed = new a(
                          this.compressedSize,
                          this.uncompressedSize,
                          this.crc32,
                          t,
                          e.readData(this.compressedSize)
                        );
                      },
                      readCentralPart: function (e) {
                        (this.versionMadeBy = e.readInt(2)),
                          e.skip(2),
                          (this.bitFlag = e.readInt(2)),
                          (this.compressionMethod = e.readString(2)),
                          (this.date = e.readDate()),
                          (this.crc32 = e.readInt(4)),
                          (this.compressedSize = e.readInt(4)),
                          (this.uncompressedSize = e.readInt(4));
                        var t = e.readInt(2);
                        if (
                          ((this.extraFieldsLength = e.readInt(2)),
                          (this.fileCommentLength = e.readInt(2)),
                          (this.diskNumberStart = e.readInt(2)),
                          (this.internalFileAttributes = e.readInt(2)),
                          (this.externalFileAttributes = e.readInt(4)),
                          (this.localHeaderOffset = e.readInt(4)),
                          this.isEncrypted())
                        )
                          throw new Error("Encrypted zip are not supported");
                        e.skip(t),
                          this.readExtraFields(e),
                          this.parseZIP64ExtraField(e),
                          (this.fileComment = e.readData(this.fileCommentLength));
                      },
                      processAttributes: function () {
                        (this.unixPermissions = null),
                          (this.dosPermissions = null);
                        var e = this.versionMadeBy >> 8;
                        (this.dir = !!(16 & this.externalFileAttributes)),
                          0 == e &&
                            (this.dosPermissions =
                              63 & this.externalFileAttributes),
                          3 == e &&
                            (this.unixPermissions =
                              (this.externalFileAttributes >> 16) & 65535),
                          this.dir ||
                            "/" !== this.fileNameStr.slice(-1) ||
                            (this.dir = !0);
                      },
                      parseZIP64ExtraField: function () {
                        if (this.extraFields[1]) {
                          var e = r(this.extraFields[1].value);
                          this.uncompressedSize === i.MAX_VALUE_32BITS &&
                            (this.uncompressedSize = e.readInt(8)),
                            this.compressedSize === i.MAX_VALUE_32BITS &&
                              (this.compressedSize = e.readInt(8)),
                            this.localHeaderOffset === i.MAX_VALUE_32BITS &&
                              (this.localHeaderOffset = e.readInt(8)),
                            this.diskNumberStart === i.MAX_VALUE_32BITS &&
                              (this.diskNumberStart = e.readInt(4));
                        }
                      },
                      readExtraFields: function (e) {
                        var t,
                          n,
                          r,
                          i = e.index + this.extraFieldsLength;
                        for (
                          this.extraFields || (this.extraFields = {});
                          e.index + 4 < i;
  
                        )
                          (t = e.readInt(2)),
                            (n = e.readInt(2)),
                            (r = e.readData(n)),
                            (this.extraFields[t] = {
                              id: t,
                              length: n,
                              value: r
                            });
                        e.setIndex(i);
                      },
                      handleUTF8: function () {
                        var e = h.uint8array ? "uint8array" : "array";
                        if (this.useUTF8())
                          (this.fileNameStr = o.utf8decode(this.fileName)),
                            (this.fileCommentStr = o.utf8decode(
                              this.fileComment
                            ));
                        else {
                          var t = this.findExtraFieldUnicodePath();
                          if (null !== t) this.fileNameStr = t;
                          else {
                            var n = i.transformTo(e, this.fileName);
                            this.fileNameStr = this.loadOptions.decodeFileName(n);
                          }
                          var r = this.findExtraFieldUnicodeComment();
                          if (null !== r) this.fileCommentStr = r;
                          else {
                            var a = i.transformTo(e, this.fileComment);
                            this.fileCommentStr =
                              this.loadOptions.decodeFileName(a);
                          }
                        }
                      },
                      findExtraFieldUnicodePath: function () {
                        var e = this.extraFields[28789];
                        if (e) {
                          var t = r(e.value);
                          return 1 !== t.readInt(1) ||
                            s(this.fileName) !== t.readInt(4)
                            ? null
                            : o.utf8decode(t.readData(e.length - 5));
                        }
                        return null;
                      },
                      findExtraFieldUnicodeComment: function () {
                        var e = this.extraFields[25461];
                        if (e) {
                          var t = r(e.value);
                          return 1 !== t.readInt(1) ||
                            s(this.fileComment) !== t.readInt(4)
                            ? null
                            : o.utf8decode(t.readData(e.length - 5));
                        }
                        return null;
                      }
                    }),
                      (t.exports = u);
                  },
                  {
                    "./compressedObject": 2,
                    "./compressions": 3,
                    "./crc32": 4,
                    "./reader/readerFor": 22,
                    "./support": 30,
                    "./utf8": 31,
                    "./utils": 32
                  }
                ],
                35: [
                  function (e, t, n) {
                    "use strict";
                    function r(e, t, n) {
                      (this.name = e),
                        (this.dir = n.dir),
                        (this.date = n.date),
                        (this.comment = n.comment),
                        (this.unixPermissions = n.unixPermissions),
                        (this.dosPermissions = n.dosPermissions),
                        (this._data = t),
                        (this._dataBinary = n.binary),
                        (this.options = {
                          compression: n.compression,
                          compressionOptions: n.compressionOptions
                        });
                    }
                    var i = e("./stream/StreamHelper"),
                      a = e("./stream/DataWorker"),
                      s = e("./utf8"),
                      o = e("./compressedObject"),
                      l = e("./stream/GenericWorker");
                    r.prototype = {
                      internalStream: function (e) {
                        var t = null,
                          n = "string";
                        try {
                          if (!e) throw new Error("No output type specified.");
                          var r =
                            "string" === (n = e.toLowerCase()) || "text" === n;
                          ("binarystring" !== n && "text" !== n) ||
                            (n = "string"),
                            (t = this._decompressWorker());
                          var a = !this._dataBinary;
                          a && !r && (t = t.pipe(new s.Utf8EncodeWorker())),
                            !a && r && (t = t.pipe(new s.Utf8DecodeWorker()));
                        } catch (e) {
                          (t = new l("error")).error(e);
                        }
                        return new i(t, n, "");
                      },
                      async: function (e, t) {
                        return this.internalStream(e).accumulate(t);
                      },
                      nodeStream: function (e, t) {
                        return this.internalStream(
                          e || "nodebuffer"
                        ).toNodejsStream(t);
                      },
                      _compressWorker: function (e, t) {
                        if (
                          this._data instanceof o &&
                          this._data.compression.magic === e.magic
                        )
                          return this._data.getCompressedWorker();
                        var n = this._decompressWorker();
                        return (
                          this._dataBinary ||
                            (n = n.pipe(new s.Utf8EncodeWorker())),
                          o.createWorkerFrom(n, e, t)
                        );
                      },
                      _decompressWorker: function () {
                        return this._data instanceof o
                          ? this._data.getContentWorker()
                          : this._data instanceof l
                          ? this._data
                          : new a(this._data);
                      }
                    };
                    for (
                      var h = [
                          "asText",
                          "asBinary",
                          "asNodeBuffer",
                          "asUint8Array",
                          "asArrayBuffer"
                        ],
                        u = function () {
                          throw new Error(
                            "This method has been removed in JSZip 3.0, please check the upgrade guide."
                          );
                        },
                        c = 0;
                      c < h.length;
                      c++
                    )
                      r.prototype[h[c]] = u;
                    t.exports = r;
                  },
                  {
                    "./compressedObject": 2,
                    "./stream/DataWorker": 27,
                    "./stream/GenericWorker": 28,
                    "./stream/StreamHelper": 29,
                    "./utf8": 31
                  }
                ],
                36: [
                  function (e, t, r) {
                    (function (e) {
                      "use strict";
                      var n,
                        r,
                        i = e.MutationObserver || e.WebKitMutationObserver;
                      if (i) {
                        var a = 0,
                          s = new i(u),
                          o = e.document.createTextNode("");
                        s.observe(o, { characterData: !0 }),
                          (n = function () {
                            o.data = a = ++a % 2;
                          });
                      } else if (e.setImmediate || void 0 === e.MessageChannel)
                        n =
                          "document" in e &&
                          "onreadystatechange" in
                            e.document.createElement("script")
                            ? function () {
                                var t = e.document.createElement("script");
                                (t.onreadystatechange = function () {
                                  u(),
                                    (t.onreadystatechange = null),
                                    t.parentNode.removeChild(t),
                                    (t = null);
                                }),
                                  e.document.documentElement.appendChild(t);
                              }
                            : function () {
                                setTimeout(u, 0);
                              };
                      else {
                        var l = new e.MessageChannel();
                        (l.port1.onmessage = u),
                          (n = function () {
                            l.port2.postMessage(0);
                          });
                      }
                      var h = [];
                      function u() {
                        var e, t;
                        r = !0;
                        for (var n = h.length; n; ) {
                          for (t = h, h = [], e = -1; ++e < n; ) t[e]();
                          n = h.length;
                        }
                        r = !1;
                      }
                      t.exports = function (e) {
                        1 !== h.push(e) || r || n();
                      };
                    }).call(
                      this,
                      void 0 !== n.g
                        ? n.g
                        : "undefined" != typeof self
                        ? self
                        : "undefined" != typeof window
                        ? window
                        : {}
                    );
                  },
                  {}
                ],
                37: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("immediate");
                    function i() {}
                    var a = {},
                      s = ["REJECTED"],
                      l = ["FULFILLED"],
                      h = ["PENDING"];
                    function u(e) {
                      if ("function" != typeof e)
                        throw new TypeError("resolver must be a function");
                      (this.state = h),
                        (this.queue = []),
                        (this.outcome = void 0),
                        e !== i && p(this, e);
                    }
                    function c(e, t, n) {
                      (this.promise = e),
                        "function" == typeof t &&
                          ((this.onFulfilled = t),
                          (this.callFulfilled = this.otherCallFulfilled)),
                        "function" == typeof n &&
                          ((this.onRejected = n),
                          (this.callRejected = this.otherCallRejected));
                    }
                    function d(e, t, n) {
                      r(function () {
                        var r;
                        try {
                          r = t(n);
                        } catch (r) {
                          return a.reject(e, r);
                        }
                        r === e
                          ? a.reject(
                              e,
                              new TypeError("Cannot resolve promise with itself")
                            )
                          : a.resolve(e, r);
                      });
                    }
                    function f(e) {
                      var t = e && e.then;
                      if (
                        e &&
                        ("object" == o(e) || "function" == typeof e) &&
                        "function" == typeof t
                      )
                        return function () {
                          t.apply(e, arguments);
                        };
                    }
                    function p(e, t) {
                      var n = !1;
                      function r(t) {
                        n || ((n = !0), a.reject(e, t));
                      }
                      function i(t) {
                        n || ((n = !0), a.resolve(e, t));
                      }
                      var s = m(function () {
                        t(i, r);
                      });
                      "error" === s.status && r(s.value);
                    }
                    function m(e, t) {
                      var n = {};
                      try {
                        (n.value = e(t)), (n.status = "success");
                      } catch (e) {
                        (n.status = "error"), (n.value = e);
                      }
                      return n;
                    }
                    ((t.exports = u).prototype.finally = function (e) {
                      if ("function" != typeof e) return this;
                      var t = this.constructor;
                      return this.then(
                        function (n) {
                          return t.resolve(e()).then(function () {
                            return n;
                          });
                        },
                        function (n) {
                          return t.resolve(e()).then(function () {
                            throw n;
                          });
                        }
                      );
                    }),
                      (u.prototype.catch = function (e) {
                        return this.then(null, e);
                      }),
                      (u.prototype.then = function (e, t) {
                        if (
                          ("function" != typeof e && this.state === l) ||
                          ("function" != typeof t && this.state === s)
                        )
                          return this;
                        var n = new this.constructor(i);
                        return (
                          this.state !== h
                            ? d(n, this.state === l ? e : t, this.outcome)
                            : this.queue.push(new c(n, e, t)),
                          n
                        );
                      }),
                      (c.prototype.callFulfilled = function (e) {
                        a.resolve(this.promise, e);
                      }),
                      (c.prototype.otherCallFulfilled = function (e) {
                        d(this.promise, this.onFulfilled, e);
                      }),
                      (c.prototype.callRejected = function (e) {
                        a.reject(this.promise, e);
                      }),
                      (c.prototype.otherCallRejected = function (e) {
                        d(this.promise, this.onRejected, e);
                      }),
                      (a.resolve = function (e, t) {
                        var n = m(f, t);
                        if ("error" === n.status) return a.reject(e, n.value);
                        var r = n.value;
                        if (r) p(e, r);
                        else {
                          (e.state = l), (e.outcome = t);
                          for (var i = -1, s = e.queue.length; ++i < s; )
                            e.queue[i].callFulfilled(t);
                        }
                        return e;
                      }),
                      (a.reject = function (e, t) {
                        (e.state = s), (e.outcome = t);
                        for (var n = -1, r = e.queue.length; ++n < r; )
                          e.queue[n].callRejected(t);
                        return e;
                      }),
                      (u.resolve = function (e) {
                        return e instanceof this ? e : a.resolve(new this(i), e);
                      }),
                      (u.reject = function (e) {
                        var t = new this(i);
                        return a.reject(t, e);
                      }),
                      (u.all = function (e) {
                        var t = this;
                        if (
                          "[object Array]" !== Object.prototype.toString.call(e)
                        )
                          return this.reject(new TypeError("must be an array"));
                        var n = e.length,
                          r = !1;
                        if (!n) return this.resolve([]);
                        for (
                          var s = new Array(n), o = 0, l = -1, h = new this(i);
                          ++l < n;
  
                        )
                          u(e[l], l);
                        return h;
                        function u(e, i) {
                          t.resolve(e).then(
                            function (e) {
                              (s[i] = e),
                                ++o !== n || r || ((r = !0), a.resolve(h, s));
                            },
                            function (e) {
                              r || ((r = !0), a.reject(h, e));
                            }
                          );
                        }
                      }),
                      (u.race = function (e) {
                        if (
                          "[object Array]" !== Object.prototype.toString.call(e)
                        )
                          return this.reject(new TypeError("must be an array"));
                        var t = e.length,
                          n = !1;
                        if (!t) return this.resolve([]);
                        for (var r, s = -1, o = new this(i); ++s < t; )
                          (r = e[s]),
                            this.resolve(r).then(
                              function (e) {
                                n || ((n = !0), a.resolve(o, e));
                              },
                              function (e) {
                                n || ((n = !0), a.reject(o, e));
                              }
                            );
                        return o;
                      });
                  },
                  { immediate: 36 }
                ],
                38: [
                  function (e, t, n) {
                    "use strict";
                    var r = {};
                    (0, e("./lib/utils/common").assign)(
                      r,
                      e("./lib/deflate"),
                      e("./lib/inflate"),
                      e("./lib/zlib/constants")
                    ),
                      (t.exports = r);
                  },
                  {
                    "./lib/deflate": 39,
                    "./lib/inflate": 40,
                    "./lib/utils/common": 41,
                    "./lib/zlib/constants": 44
                  }
                ],
                39: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./zlib/deflate"),
                      i = e("./utils/common"),
                      a = e("./utils/strings"),
                      s = e("./zlib/messages"),
                      o = e("./zlib/zstream"),
                      l = Object.prototype.toString;
                    function h(e) {
                      if (!(this instanceof h)) return new h(e);
                      this.options = i.assign(
                        {
                          level: -1,
                          method: 8,
                          chunkSize: 16384,
                          windowBits: 15,
                          memLevel: 8,
                          strategy: 0,
                          to: ""
                        },
                        e || {}
                      );
                      var t = this.options;
                      t.raw && 0 < t.windowBits
                        ? (t.windowBits = -t.windowBits)
                        : t.gzip &&
                          0 < t.windowBits &&
                          t.windowBits < 16 &&
                          (t.windowBits += 16),
                        (this.err = 0),
                        (this.msg = ""),
                        (this.ended = !1),
                        (this.chunks = []),
                        (this.strm = new o()),
                        (this.strm.avail_out = 0);
                      var n = r.deflateInit2(
                        this.strm,
                        t.level,
                        t.method,
                        t.windowBits,
                        t.memLevel,
                        t.strategy
                      );
                      if (0 !== n) throw new Error(s[n]);
                      if (
                        (t.header && r.deflateSetHeader(this.strm, t.header),
                        t.dictionary)
                      ) {
                        var u;
                        if (
                          ((u =
                            "string" == typeof t.dictionary
                              ? a.string2buf(t.dictionary)
                              : "[object ArrayBuffer]" === l.call(t.dictionary)
                              ? new Uint8Array(t.dictionary)
                              : t.dictionary),
                          0 !== (n = r.deflateSetDictionary(this.strm, u)))
                        )
                          throw new Error(s[n]);
                        this._dict_set = !0;
                      }
                    }
                    function u(e, t) {
                      var n = new h(t);
                      if ((n.push(e, !0), n.err)) throw n.msg || s[n.err];
                      return n.result;
                    }
                    (h.prototype.push = function (e, t) {
                      var n,
                        s,
                        o = this.strm,
                        h = this.options.chunkSize;
                      if (this.ended) return !1;
                      (s = t === ~~t ? t : !0 === t ? 4 : 0),
                        "string" == typeof e
                          ? (o.input = a.string2buf(e))
                          : "[object ArrayBuffer]" === l.call(e)
                          ? (o.input = new Uint8Array(e))
                          : (o.input = e),
                        (o.next_in = 0),
                        (o.avail_in = o.input.length);
                      do {
                        if (
                          (0 === o.avail_out &&
                            ((o.output = new i.Buf8(h)),
                            (o.next_out = 0),
                            (o.avail_out = h)),
                          1 !== (n = r.deflate(o, s)) && 0 !== n)
                        )
                          return this.onEnd(n), !(this.ended = !0);
                        (0 !== o.avail_out &&
                          (0 !== o.avail_in || (4 !== s && 2 !== s))) ||
                          ("string" === this.options.to
                            ? this.onData(
                                a.buf2binstring(i.shrinkBuf(o.output, o.next_out))
                              )
                            : this.onData(i.shrinkBuf(o.output, o.next_out)));
                      } while ((0 < o.avail_in || 0 === o.avail_out) && 1 !== n);
                      return 4 === s
                        ? ((n = r.deflateEnd(this.strm)),
                          this.onEnd(n),
                          (this.ended = !0),
                          0 === n)
                        : 2 !== s || (this.onEnd(0), !(o.avail_out = 0));
                    }),
                      (h.prototype.onData = function (e) {
                        this.chunks.push(e);
                      }),
                      (h.prototype.onEnd = function (e) {
                        0 === e &&
                          ("string" === this.options.to
                            ? (this.result = this.chunks.join(""))
                            : (this.result = i.flattenChunks(this.chunks))),
                          (this.chunks = []),
                          (this.err = e),
                          (this.msg = this.strm.msg);
                      }),
                      (n.Deflate = h),
                      (n.deflate = u),
                      (n.deflateRaw = function (e, t) {
                        return ((t = t || {}).raw = !0), u(e, t);
                      }),
                      (n.gzip = function (e, t) {
                        return ((t = t || {}).gzip = !0), u(e, t);
                      });
                  },
                  {
                    "./utils/common": 41,
                    "./utils/strings": 42,
                    "./zlib/deflate": 46,
                    "./zlib/messages": 51,
                    "./zlib/zstream": 53
                  }
                ],
                40: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./zlib/inflate"),
                      i = e("./utils/common"),
                      a = e("./utils/strings"),
                      s = e("./zlib/constants"),
                      o = e("./zlib/messages"),
                      l = e("./zlib/zstream"),
                      h = e("./zlib/gzheader"),
                      u = Object.prototype.toString;
                    function c(e) {
                      if (!(this instanceof c)) return new c(e);
                      this.options = i.assign(
                        { chunkSize: 16384, windowBits: 0, to: "" },
                        e || {}
                      );
                      var t = this.options;
                      t.raw &&
                        0 <= t.windowBits &&
                        t.windowBits < 16 &&
                        ((t.windowBits = -t.windowBits),
                        0 === t.windowBits && (t.windowBits = -15)),
                        !(0 <= t.windowBits && t.windowBits < 16) ||
                          (e && e.windowBits) ||
                          (t.windowBits += 32),
                        15 < t.windowBits &&
                          t.windowBits < 48 &&
                          0 == (15 & t.windowBits) &&
                          (t.windowBits |= 15),
                        (this.err = 0),
                        (this.msg = ""),
                        (this.ended = !1),
                        (this.chunks = []),
                        (this.strm = new l()),
                        (this.strm.avail_out = 0);
                      var n = r.inflateInit2(this.strm, t.windowBits);
                      if (n !== s.Z_OK) throw new Error(o[n]);
                      (this.header = new h()),
                        r.inflateGetHeader(this.strm, this.header);
                    }
                    function d(e, t) {
                      var n = new c(t);
                      if ((n.push(e, !0), n.err)) throw n.msg || o[n.err];
                      return n.result;
                    }
                    (c.prototype.push = function (e, t) {
                      var n,
                        o,
                        l,
                        h,
                        c,
                        d,
                        f = this.strm,
                        p = this.options.chunkSize,
                        m = this.options.dictionary,
                        g = !1;
                      if (this.ended) return !1;
                      (o = t === ~~t ? t : !0 === t ? s.Z_FINISH : s.Z_NO_FLUSH),
                        "string" == typeof e
                          ? (f.input = a.binstring2buf(e))
                          : "[object ArrayBuffer]" === u.call(e)
                          ? (f.input = new Uint8Array(e))
                          : (f.input = e),
                        (f.next_in = 0),
                        (f.avail_in = f.input.length);
                      do {
                        if (
                          (0 === f.avail_out &&
                            ((f.output = new i.Buf8(p)),
                            (f.next_out = 0),
                            (f.avail_out = p)),
                          (n = r.inflate(f, s.Z_NO_FLUSH)) === s.Z_NEED_DICT &&
                            m &&
                            ((d =
                              "string" == typeof m
                                ? a.string2buf(m)
                                : "[object ArrayBuffer]" === u.call(m)
                                ? new Uint8Array(m)
                                : m),
                            (n = r.inflateSetDictionary(this.strm, d))),
                          n === s.Z_BUF_ERROR &&
                            !0 === g &&
                            ((n = s.Z_OK), (g = !1)),
                          n !== s.Z_STREAM_END && n !== s.Z_OK)
                        )
                          return this.onEnd(n), !(this.ended = !0);
                        f.next_out &&
                          ((0 !== f.avail_out &&
                            n !== s.Z_STREAM_END &&
                            (0 !== f.avail_in ||
                              (o !== s.Z_FINISH && o !== s.Z_SYNC_FLUSH))) ||
                            ("string" === this.options.to
                              ? ((l = a.utf8border(f.output, f.next_out)),
                                (h = f.next_out - l),
                                (c = a.buf2string(f.output, l)),
                                (f.next_out = h),
                                (f.avail_out = p - h),
                                h && i.arraySet(f.output, f.output, l, h, 0),
                                this.onData(c))
                              : this.onData(i.shrinkBuf(f.output, f.next_out)))),
                          0 === f.avail_in && 0 === f.avail_out && (g = !0);
                      } while (
                        (0 < f.avail_in || 0 === f.avail_out) &&
                        n !== s.Z_STREAM_END
                      );
                      return (
                        n === s.Z_STREAM_END && (o = s.Z_FINISH),
                        o === s.Z_FINISH
                          ? ((n = r.inflateEnd(this.strm)),
                            this.onEnd(n),
                            (this.ended = !0),
                            n === s.Z_OK)
                          : o !== s.Z_SYNC_FLUSH ||
                            (this.onEnd(s.Z_OK), !(f.avail_out = 0))
                      );
                    }),
                      (c.prototype.onData = function (e) {
                        this.chunks.push(e);
                      }),
                      (c.prototype.onEnd = function (e) {
                        e === s.Z_OK &&
                          ("string" === this.options.to
                            ? (this.result = this.chunks.join(""))
                            : (this.result = i.flattenChunks(this.chunks))),
                          (this.chunks = []),
                          (this.err = e),
                          (this.msg = this.strm.msg);
                      }),
                      (n.Inflate = c),
                      (n.inflate = d),
                      (n.inflateRaw = function (e, t) {
                        return ((t = t || {}).raw = !0), d(e, t);
                      }),
                      (n.ungzip = d);
                  },
                  {
                    "./utils/common": 41,
                    "./utils/strings": 42,
                    "./zlib/constants": 44,
                    "./zlib/gzheader": 47,
                    "./zlib/inflate": 49,
                    "./zlib/messages": 51,
                    "./zlib/zstream": 53
                  }
                ],
                41: [
                  function (e, t, n) {
                    "use strict";
                    var r =
                      "undefined" != typeof Uint8Array &&
                      "undefined" != typeof Uint16Array &&
                      "undefined" != typeof Int32Array;
                    (n.assign = function (e) {
                      for (
                        var t = Array.prototype.slice.call(arguments, 1);
                        t.length;
  
                      ) {
                        var n = t.shift();
                        if (n) {
                          if ("object" != o(n))
                            throw new TypeError(n + "must be non-object");
                          for (var r in n) n.hasOwnProperty(r) && (e[r] = n[r]);
                        }
                      }
                      return e;
                    }),
                      (n.shrinkBuf = function (e, t) {
                        return e.length === t
                          ? e
                          : e.subarray
                          ? e.subarray(0, t)
                          : ((e.length = t), e);
                      });
                    var i = {
                        arraySet: function (e, t, n, r, i) {
                          if (t.subarray && e.subarray)
                            e.set(t.subarray(n, n + r), i);
                          else for (var a = 0; a < r; a++) e[i + a] = t[n + a];
                        },
                        flattenChunks: function (e) {
                          var t, n, r, i, a, s;
                          for (t = r = 0, n = e.length; t < n; t++)
                            r += e[t].length;
                          for (
                            s = new Uint8Array(r), t = i = 0, n = e.length;
                            t < n;
                            t++
                          )
                            (a = e[t]), s.set(a, i), (i += a.length);
                          return s;
                        }
                      },
                      a = {
                        arraySet: function (e, t, n, r, i) {
                          for (var a = 0; a < r; a++) e[i + a] = t[n + a];
                        },
                        flattenChunks: function (e) {
                          return [].concat.apply([], e);
                        }
                      };
                    (n.setTyped = function (e) {
                      e
                        ? ((n.Buf8 = Uint8Array),
                          (n.Buf16 = Uint16Array),
                          (n.Buf32 = Int32Array),
                          n.assign(n, i))
                        : ((n.Buf8 = Array),
                          (n.Buf16 = Array),
                          (n.Buf32 = Array),
                          n.assign(n, a));
                    }),
                      n.setTyped(r);
                  },
                  {}
                ],
                42: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("./common"),
                      i = !0,
                      a = !0;
                    try {
                      String.fromCharCode.apply(null, [0]);
                    } catch (e) {
                      i = !1;
                    }
                    try {
                      String.fromCharCode.apply(null, new Uint8Array(1));
                    } catch (e) {
                      a = !1;
                    }
                    for (var s = new r.Buf8(256), o = 0; o < 256; o++)
                      s[o] =
                        252 <= o
                          ? 6
                          : 248 <= o
                          ? 5
                          : 240 <= o
                          ? 4
                          : 224 <= o
                          ? 3
                          : 192 <= o
                          ? 2
                          : 1;
                    function l(e, t) {
                      if (t < 65537 && ((e.subarray && a) || (!e.subarray && i)))
                        return String.fromCharCode.apply(null, r.shrinkBuf(e, t));
                      for (var n = "", s = 0; s < t; s++)
                        n += String.fromCharCode(e[s]);
                      return n;
                    }
                    (s[254] = s[254] = 1),
                      (n.string2buf = function (e) {
                        var t,
                          n,
                          i,
                          a,
                          s,
                          o = e.length,
                          l = 0;
                        for (a = 0; a < o; a++)
                          55296 == (64512 & (n = e.charCodeAt(a))) &&
                            a + 1 < o &&
                            56320 == (64512 & (i = e.charCodeAt(a + 1))) &&
                            ((n = 65536 + ((n - 55296) << 10) + (i - 56320)),
                            a++),
                            (l += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4);
                        for (t = new r.Buf8(l), a = s = 0; s < l; a++)
                          55296 == (64512 & (n = e.charCodeAt(a))) &&
                            a + 1 < o &&
                            56320 == (64512 & (i = e.charCodeAt(a + 1))) &&
                            ((n = 65536 + ((n - 55296) << 10) + (i - 56320)),
                            a++),
                            n < 128
                              ? (t[s++] = n)
                              : (n < 2048
                                  ? (t[s++] = 192 | (n >>> 6))
                                  : (n < 65536
                                      ? (t[s++] = 224 | (n >>> 12))
                                      : ((t[s++] = 240 | (n >>> 18)),
                                        (t[s++] = 128 | ((n >>> 12) & 63))),
                                    (t[s++] = 128 | ((n >>> 6) & 63))),
                                (t[s++] = 128 | (63 & n)));
                        return t;
                      }),
                      (n.buf2binstring = function (e) {
                        return l(e, e.length);
                      }),
                      (n.binstring2buf = function (e) {
                        for (
                          var t = new r.Buf8(e.length), n = 0, i = t.length;
                          n < i;
                          n++
                        )
                          t[n] = e.charCodeAt(n);
                        return t;
                      }),
                      (n.buf2string = function (e, t) {
                        var n,
                          r,
                          i,
                          a,
                          o = t || e.length,
                          h = new Array(2 * o);
                        for (n = r = 0; n < o; )
                          if ((i = e[n++]) < 128) h[r++] = i;
                          else if (4 < (a = s[i])) (h[r++] = 65533), (n += a - 1);
                          else {
                            for (
                              i &= 2 === a ? 31 : 3 === a ? 15 : 7;
                              1 < a && n < o;
  
                            )
                              (i = (i << 6) | (63 & e[n++])), a--;
                            1 < a
                              ? (h[r++] = 65533)
                              : i < 65536
                              ? (h[r++] = i)
                              : ((i -= 65536),
                                (h[r++] = 55296 | ((i >> 10) & 1023)),
                                (h[r++] = 56320 | (1023 & i)));
                          }
                        return l(h, r);
                      }),
                      (n.utf8border = function (e, t) {
                        var n;
                        for (
                          (t = t || e.length) > e.length && (t = e.length),
                            n = t - 1;
                          0 <= n && 128 == (192 & e[n]);
  
                        )
                          n--;
                        return n < 0 || 0 === n ? t : n + s[e[n]] > t ? n : t;
                      });
                  },
                  { "./common": 41 }
                ],
                43: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = function (e, t, n, r) {
                      for (
                        var i = (65535 & e) | 0,
                          a = ((e >>> 16) & 65535) | 0,
                          s = 0;
                        0 !== n;
  
                      ) {
                        for (
                          n -= s = 2e3 < n ? 2e3 : n;
                          (a = (a + (i = (i + t[r++]) | 0)) | 0), --s;
  
                        );
                        (i %= 65521), (a %= 65521);
                      }
                      return i | (a << 16) | 0;
                    };
                  },
                  {}
                ],
                44: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = {
                      Z_NO_FLUSH: 0,
                      Z_PARTIAL_FLUSH: 1,
                      Z_SYNC_FLUSH: 2,
                      Z_FULL_FLUSH: 3,
                      Z_FINISH: 4,
                      Z_BLOCK: 5,
                      Z_TREES: 6,
                      Z_OK: 0,
                      Z_STREAM_END: 1,
                      Z_NEED_DICT: 2,
                      Z_ERRNO: -1,
                      Z_STREAM_ERROR: -2,
                      Z_DATA_ERROR: -3,
                      Z_BUF_ERROR: -5,
                      Z_NO_COMPRESSION: 0,
                      Z_BEST_SPEED: 1,
                      Z_BEST_COMPRESSION: 9,
                      Z_DEFAULT_COMPRESSION: -1,
                      Z_FILTERED: 1,
                      Z_HUFFMAN_ONLY: 2,
                      Z_RLE: 3,
                      Z_FIXED: 4,
                      Z_DEFAULT_STRATEGY: 0,
                      Z_BINARY: 0,
                      Z_TEXT: 1,
                      Z_UNKNOWN: 2,
                      Z_DEFLATED: 8
                    };
                  },
                  {}
                ],
                45: [
                  function (e, t, n) {
                    "use strict";
                    var r = (function () {
                      for (var e, t = [], n = 0; n < 256; n++) {
                        e = n;
                        for (var r = 0; r < 8; r++)
                          e = 1 & e ? 3988292384 ^ (e >>> 1) : e >>> 1;
                        t[n] = e;
                      }
                      return t;
                    })();
                    t.exports = function (e, t, n, i) {
                      var a = r,
                        s = i + n;
                      e ^= -1;
                      for (var o = i; o < s; o++)
                        e = (e >>> 8) ^ a[255 & (e ^ t[o])];
                      return -1 ^ e;
                    };
                  },
                  {}
                ],
                46: [
                  function (e, t, n) {
                    "use strict";
                    var r,
                      i = e("../utils/common"),
                      a = e("./trees"),
                      s = e("./adler32"),
                      o = e("./crc32"),
                      l = e("./messages"),
                      h = -2,
                      u = 258,
                      c = 262,
                      d = 113;
                    function f(e, t) {
                      return (e.msg = l[t]), t;
                    }
                    function p(e) {
                      return (e << 1) - (4 < e ? 9 : 0);
                    }
                    function m(e) {
                      for (var t = e.length; 0 <= --t; ) e[t] = 0;
                    }
                    function g(e) {
                      var t = e.state,
                        n = t.pending;
                      n > e.avail_out && (n = e.avail_out),
                        0 !== n &&
                          (i.arraySet(
                            e.output,
                            t.pending_buf,
                            t.pending_out,
                            n,
                            e.next_out
                          ),
                          (e.next_out += n),
                          (t.pending_out += n),
                          (e.total_out += n),
                          (e.avail_out -= n),
                          (t.pending -= n),
                          0 === t.pending && (t.pending_out = 0));
                    }
                    function v(e, t) {
                      a._tr_flush_block(
                        e,
                        0 <= e.block_start ? e.block_start : -1,
                        e.strstart - e.block_start,
                        t
                      ),
                        (e.block_start = e.strstart),
                        g(e.strm);
                    }
                    function y(e, t) {
                      e.pending_buf[e.pending++] = t;
                    }
                    function _(e, t) {
                      (e.pending_buf[e.pending++] = (t >>> 8) & 255),
                        (e.pending_buf[e.pending++] = 255 & t);
                    }
                    function b(e, t) {
                      var n,
                        r,
                        i = e.max_chain_length,
                        a = e.strstart,
                        s = e.prev_length,
                        o = e.nice_match,
                        l =
                          e.strstart > e.w_size - c
                            ? e.strstart - (e.w_size - c)
                            : 0,
                        h = e.window,
                        d = e.w_mask,
                        f = e.prev,
                        p = e.strstart + u,
                        m = h[a + s - 1],
                        g = h[a + s];
                      e.prev_length >= e.good_match && (i >>= 2),
                        o > e.lookahead && (o = e.lookahead);
                      do {
                        if (
                          h[(n = t) + s] === g &&
                          h[n + s - 1] === m &&
                          h[n] === h[a] &&
                          h[++n] === h[a + 1]
                        ) {
                          (a += 2), n++;
                          do {} while (
                            h[++a] === h[++n] &&
                            h[++a] === h[++n] &&
                            h[++a] === h[++n] &&
                            h[++a] === h[++n] &&
                            h[++a] === h[++n] &&
                            h[++a] === h[++n] &&
                            h[++a] === h[++n] &&
                            h[++a] === h[++n] &&
                            a < p
                          );
                          if (((r = u - (p - a)), (a = p - u), s < r)) {
                            if (((e.match_start = t), o <= (s = r))) break;
                            (m = h[a + s - 1]), (g = h[a + s]);
                          }
                        }
                      } while ((t = f[t & d]) > l && 0 != --i);
                      return s <= e.lookahead ? s : e.lookahead;
                    }
                    function x(e) {
                      var t,
                        n,
                        r,
                        a,
                        l,
                        h,
                        u,
                        d,
                        f,
                        p,
                        m = e.w_size;
                      do {
                        if (
                          ((a = e.window_size - e.lookahead - e.strstart),
                          e.strstart >= m + (m - c))
                        ) {
                          for (
                            i.arraySet(e.window, e.window, m, m, 0),
                              e.match_start -= m,
                              e.strstart -= m,
                              e.block_start -= m,
                              t = n = e.hash_size;
                            (r = e.head[--t]),
                              (e.head[t] = m <= r ? r - m : 0),
                              --n;
  
                          );
                          for (
                            t = n = m;
                            (r = e.prev[--t]),
                              (e.prev[t] = m <= r ? r - m : 0),
                              --n;
  
                          );
                          a += m;
                        }
                        if (0 === e.strm.avail_in) break;
                        if (
                          ((h = e.strm),
                          (u = e.window),
                          (d = e.strstart + e.lookahead),
                          (p = void 0),
                          (f = a) < (p = h.avail_in) && (p = f),
                          (n =
                            0 === p
                              ? 0
                              : ((h.avail_in -= p),
                                i.arraySet(u, h.input, h.next_in, p, d),
                                1 === h.state.wrap
                                  ? (h.adler = s(h.adler, u, p, d))
                                  : 2 === h.state.wrap &&
                                    (h.adler = o(h.adler, u, p, d)),
                                (h.next_in += p),
                                (h.total_in += p),
                                p)),
                          (e.lookahead += n),
                          e.lookahead + e.insert >= 3)
                        )
                          for (
                            l = e.strstart - e.insert,
                              e.ins_h = e.window[l],
                              e.ins_h =
                                ((e.ins_h << e.hash_shift) ^ e.window[l + 1]) &
                                e.hash_mask;
                            e.insert &&
                            ((e.ins_h =
                              ((e.ins_h << e.hash_shift) ^ e.window[l + 3 - 1]) &
                              e.hash_mask),
                            (e.prev[l & e.w_mask] = e.head[e.ins_h]),
                            (e.head[e.ins_h] = l),
                            l++,
                            e.insert--,
                            !(e.lookahead + e.insert < 3));
  
                          );
                      } while (e.lookahead < c && 0 !== e.strm.avail_in);
                    }
                    function S(e, t) {
                      for (var n, r; ; ) {
                        if (e.lookahead < c) {
                          if ((x(e), e.lookahead < c && 0 === t)) return 1;
                          if (0 === e.lookahead) break;
                        }
                        if (
                          ((n = 0),
                          e.lookahead >= 3 &&
                            ((e.ins_h =
                              ((e.ins_h << e.hash_shift) ^
                                e.window[e.strstart + 3 - 1]) &
                              e.hash_mask),
                            (n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h]),
                            (e.head[e.ins_h] = e.strstart)),
                          0 !== n &&
                            e.strstart - n <= e.w_size - c &&
                            (e.match_length = b(e, n)),
                          e.match_length >= 3)
                        ) {
                          if (
                            ((r = a._tr_tally(
                              e,
                              e.strstart - e.match_start,
                              e.match_length - 3
                            )),
                            (e.lookahead -= e.match_length),
                            e.match_length <= e.max_lazy_match &&
                              e.lookahead >= 3)
                          ) {
                            for (
                              e.match_length--;
                              e.strstart++,
                                (e.ins_h =
                                  ((e.ins_h << e.hash_shift) ^
                                    e.window[e.strstart + 3 - 1]) &
                                  e.hash_mask),
                                (n = e.prev[e.strstart & e.w_mask] =
                                  e.head[e.ins_h]),
                                (e.head[e.ins_h] = e.strstart),
                                0 != --e.match_length;
  
                            );
                            e.strstart++;
                          } else
                            (e.strstart += e.match_length),
                              (e.match_length = 0),
                              (e.ins_h = e.window[e.strstart]),
                              (e.ins_h =
                                ((e.ins_h << e.hash_shift) ^
                                  e.window[e.strstart + 1]) &
                                e.hash_mask);
                        } else
                          (r = a._tr_tally(e, 0, e.window[e.strstart])),
                            e.lookahead--,
                            e.strstart++;
                        if (r && (v(e, !1), 0 === e.strm.avail_out)) return 1;
                      }
                      return (
                        (e.insert = e.strstart < 2 ? e.strstart : 2),
                        4 === t
                          ? (v(e, !0), 0 === e.strm.avail_out ? 3 : 4)
                          : e.last_lit && (v(e, !1), 0 === e.strm.avail_out)
                          ? 1
                          : 2
                      );
                    }
                    function E(e, t) {
                      for (var n, r, i; ; ) {
                        if (e.lookahead < c) {
                          if ((x(e), e.lookahead < c && 0 === t)) return 1;
                          if (0 === e.lookahead) break;
                        }
                        if (
                          ((n = 0),
                          e.lookahead >= 3 &&
                            ((e.ins_h =
                              ((e.ins_h << e.hash_shift) ^
                                e.window[e.strstart + 3 - 1]) &
                              e.hash_mask),
                            (n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h]),
                            (e.head[e.ins_h] = e.strstart)),
                          (e.prev_length = e.match_length),
                          (e.prev_match = e.match_start),
                          (e.match_length = 2),
                          0 !== n &&
                            e.prev_length < e.max_lazy_match &&
                            e.strstart - n <= e.w_size - c &&
                            ((e.match_length = b(e, n)),
                            e.match_length <= 5 &&
                              (1 === e.strategy ||
                                (3 === e.match_length &&
                                  4096 < e.strstart - e.match_start)) &&
                              (e.match_length = 2)),
                          e.prev_length >= 3 && e.match_length <= e.prev_length)
                        ) {
                          for (
                            i = e.strstart + e.lookahead - 3,
                              r = a._tr_tally(
                                e,
                                e.strstart - 1 - e.prev_match,
                                e.prev_length - 3
                              ),
                              e.lookahead -= e.prev_length - 1,
                              e.prev_length -= 2;
                            ++e.strstart <= i &&
                              ((e.ins_h =
                                ((e.ins_h << e.hash_shift) ^
                                  e.window[e.strstart + 3 - 1]) &
                                e.hash_mask),
                              (n = e.prev[e.strstart & e.w_mask] =
                                e.head[e.ins_h]),
                              (e.head[e.ins_h] = e.strstart)),
                              0 != --e.prev_length;
  
                          );
                          if (
                            ((e.match_available = 0),
                            (e.match_length = 2),
                            e.strstart++,
                            r && (v(e, !1), 0 === e.strm.avail_out))
                          )
                            return 1;
                        } else if (e.match_available) {
                          if (
                            ((r = a._tr_tally(e, 0, e.window[e.strstart - 1])) &&
                              v(e, !1),
                            e.strstart++,
                            e.lookahead--,
                            0 === e.strm.avail_out)
                          )
                            return 1;
                        } else
                          (e.match_available = 1), e.strstart++, e.lookahead--;
                      }
                      return (
                        e.match_available &&
                          ((r = a._tr_tally(e, 0, e.window[e.strstart - 1])),
                          (e.match_available = 0)),
                        (e.insert = e.strstart < 2 ? e.strstart : 2),
                        4 === t
                          ? (v(e, !0), 0 === e.strm.avail_out ? 3 : 4)
                          : e.last_lit && (v(e, !1), 0 === e.strm.avail_out)
                          ? 1
                          : 2
                      );
                    }
                    function w(e, t, n, r, i) {
                      (this.good_length = e),
                        (this.max_lazy = t),
                        (this.nice_length = n),
                        (this.max_chain = r),
                        (this.func = i);
                    }
                    function T() {
                      (this.strm = null),
                        (this.status = 0),
                        (this.pending_buf = null),
                        (this.pending_buf_size = 0),
                        (this.pending_out = 0),
                        (this.pending = 0),
                        (this.wrap = 0),
                        (this.gzhead = null),
                        (this.gzindex = 0),
                        (this.method = 8),
                        (this.last_flush = -1),
                        (this.w_size = 0),
                        (this.w_bits = 0),
                        (this.w_mask = 0),
                        (this.window = null),
                        (this.window_size = 0),
                        (this.prev = null),
                        (this.head = null),
                        (this.ins_h = 0),
                        (this.hash_size = 0),
                        (this.hash_bits = 0),
                        (this.hash_mask = 0),
                        (this.hash_shift = 0),
                        (this.block_start = 0),
                        (this.match_length = 0),
                        (this.prev_match = 0),
                        (this.match_available = 0),
                        (this.strstart = 0),
                        (this.match_start = 0),
                        (this.lookahead = 0),
                        (this.prev_length = 0),
                        (this.max_chain_length = 0),
                        (this.max_lazy_match = 0),
                        (this.level = 0),
                        (this.strategy = 0),
                        (this.good_match = 0),
                        (this.nice_match = 0),
                        (this.dyn_ltree = new i.Buf16(1146)),
                        (this.dyn_dtree = new i.Buf16(122)),
                        (this.bl_tree = new i.Buf16(78)),
                        m(this.dyn_ltree),
                        m(this.dyn_dtree),
                        m(this.bl_tree),
                        (this.l_desc = null),
                        (this.d_desc = null),
                        (this.bl_desc = null),
                        (this.bl_count = new i.Buf16(16)),
                        (this.heap = new i.Buf16(573)),
                        m(this.heap),
                        (this.heap_len = 0),
                        (this.heap_max = 0),
                        (this.depth = new i.Buf16(573)),
                        m(this.depth),
                        (this.l_buf = 0),
                        (this.lit_bufsize = 0),
                        (this.last_lit = 0),
                        (this.d_buf = 0),
                        (this.opt_len = 0),
                        (this.static_len = 0),
                        (this.matches = 0),
                        (this.insert = 0),
                        (this.bi_buf = 0),
                        (this.bi_valid = 0);
                    }
                    function M(e) {
                      var t;
                      return e && e.state
                        ? ((e.total_in = e.total_out = 0),
                          (e.data_type = 2),
                          ((t = e.state).pending = 0),
                          (t.pending_out = 0),
                          t.wrap < 0 && (t.wrap = -t.wrap),
                          (t.status = t.wrap ? 42 : d),
                          (e.adler = 2 === t.wrap ? 0 : 1),
                          (t.last_flush = 0),
                          a._tr_init(t),
                          0)
                        : f(e, h);
                    }
                    function A(e) {
                      var t = M(e);
                      return (
                        0 === t &&
                          (function (e) {
                            (e.window_size = 2 * e.w_size),
                              m(e.head),
                              (e.max_lazy_match = r[e.level].max_lazy),
                              (e.good_match = r[e.level].good_length),
                              (e.nice_match = r[e.level].nice_length),
                              (e.max_chain_length = r[e.level].max_chain),
                              (e.strstart = 0),
                              (e.block_start = 0),
                              (e.lookahead = 0),
                              (e.insert = 0),
                              (e.match_length = e.prev_length = 2),
                              (e.match_available = 0),
                              (e.ins_h = 0);
                          })(e.state),
                        t
                      );
                    }
                    function C(e, t, n, r, a, s) {
                      if (!e) return h;
                      var o = 1;
                      if (
                        (-1 === t && (t = 6),
                        r < 0
                          ? ((o = 0), (r = -r))
                          : 15 < r && ((o = 2), (r -= 16)),
                        a < 1 ||
                          9 < a ||
                          8 !== n ||
                          r < 8 ||
                          15 < r ||
                          t < 0 ||
                          9 < t ||
                          s < 0 ||
                          4 < s)
                      )
                        return f(e, h);
                      8 === r && (r = 9);
                      var l = new T();
                      return (
                        ((e.state = l).strm = e),
                        (l.wrap = o),
                        (l.gzhead = null),
                        (l.w_bits = r),
                        (l.w_size = 1 << l.w_bits),
                        (l.w_mask = l.w_size - 1),
                        (l.hash_bits = a + 7),
                        (l.hash_size = 1 << l.hash_bits),
                        (l.hash_mask = l.hash_size - 1),
                        (l.hash_shift = ~~((l.hash_bits + 3 - 1) / 3)),
                        (l.window = new i.Buf8(2 * l.w_size)),
                        (l.head = new i.Buf16(l.hash_size)),
                        (l.prev = new i.Buf16(l.w_size)),
                        (l.lit_bufsize = 1 << (a + 6)),
                        (l.pending_buf_size = 4 * l.lit_bufsize),
                        (l.pending_buf = new i.Buf8(l.pending_buf_size)),
                        (l.d_buf = 1 * l.lit_bufsize),
                        (l.l_buf = 3 * l.lit_bufsize),
                        (l.level = t),
                        (l.strategy = s),
                        (l.method = n),
                        A(e)
                      );
                    }
                    (r = [
                      new w(0, 0, 0, 0, function (e, t) {
                        var n = 65535;
                        for (
                          n > e.pending_buf_size - 5 &&
                          (n = e.pending_buf_size - 5);
                          ;
  
                        ) {
                          if (e.lookahead <= 1) {
                            if ((x(e), 0 === e.lookahead && 0 === t)) return 1;
                            if (0 === e.lookahead) break;
                          }
                          (e.strstart += e.lookahead), (e.lookahead = 0);
                          var r = e.block_start + n;
                          if (
                            (0 === e.strstart || e.strstart >= r) &&
                            ((e.lookahead = e.strstart - r),
                            (e.strstart = r),
                            v(e, !1),
                            0 === e.strm.avail_out)
                          )
                            return 1;
                          if (
                            e.strstart - e.block_start >= e.w_size - c &&
                            (v(e, !1), 0 === e.strm.avail_out)
                          )
                            return 1;
                        }
                        return (
                          (e.insert = 0),
                          4 === t
                            ? (v(e, !0), 0 === e.strm.avail_out ? 3 : 4)
                            : (e.strstart > e.block_start &&
                                (v(e, !1), e.strm.avail_out),
                              1)
                        );
                      }),
                      new w(4, 4, 8, 4, S),
                      new w(4, 5, 16, 8, S),
                      new w(4, 6, 32, 32, S),
                      new w(4, 4, 16, 16, E),
                      new w(8, 16, 32, 32, E),
                      new w(8, 16, 128, 128, E),
                      new w(8, 32, 128, 256, E),
                      new w(32, 128, 258, 1024, E),
                      new w(32, 258, 258, 4096, E)
                    ]),
                      (n.deflateInit = function (e, t) {
                        return C(e, t, 8, 15, 8, 0);
                      }),
                      (n.deflateInit2 = C),
                      (n.deflateReset = A),
                      (n.deflateResetKeep = M),
                      (n.deflateSetHeader = function (e, t) {
                        return e && e.state
                          ? 2 !== e.state.wrap
                            ? h
                            : ((e.state.gzhead = t), 0)
                          : h;
                      }),
                      (n.deflate = function (e, t) {
                        var n, i, s, l;
                        if (!e || !e.state || 5 < t || t < 0)
                          return e ? f(e, h) : h;
                        if (
                          ((i = e.state),
                          !e.output ||
                            (!e.input && 0 !== e.avail_in) ||
                            (666 === i.status && 4 !== t))
                        )
                          return f(e, 0 === e.avail_out ? -5 : h);
                        if (
                          ((i.strm = e),
                          (n = i.last_flush),
                          (i.last_flush = t),
                          42 === i.status)
                        )
                          if (2 === i.wrap)
                            (e.adler = 0),
                              y(i, 31),
                              y(i, 139),
                              y(i, 8),
                              i.gzhead
                                ? (y(
                                    i,
                                    (i.gzhead.text ? 1 : 0) +
                                      (i.gzhead.hcrc ? 2 : 0) +
                                      (i.gzhead.extra ? 4 : 0) +
                                      (i.gzhead.name ? 8 : 0) +
                                      (i.gzhead.comment ? 16 : 0)
                                  ),
                                  y(i, 255 & i.gzhead.time),
                                  y(i, (i.gzhead.time >> 8) & 255),
                                  y(i, (i.gzhead.time >> 16) & 255),
                                  y(i, (i.gzhead.time >> 24) & 255),
                                  y(
                                    i,
                                    9 === i.level
                                      ? 2
                                      : 2 <= i.strategy || i.level < 2
                                      ? 4
                                      : 0
                                  ),
                                  y(i, 255 & i.gzhead.os),
                                  i.gzhead.extra &&
                                    i.gzhead.extra.length &&
                                    (y(i, 255 & i.gzhead.extra.length),
                                    y(i, (i.gzhead.extra.length >> 8) & 255)),
                                  i.gzhead.hcrc &&
                                    (e.adler = o(
                                      e.adler,
                                      i.pending_buf,
                                      i.pending,
                                      0
                                    )),
                                  (i.gzindex = 0),
                                  (i.status = 69))
                                : (y(i, 0),
                                  y(i, 0),
                                  y(i, 0),
                                  y(i, 0),
                                  y(i, 0),
                                  y(
                                    i,
                                    9 === i.level
                                      ? 2
                                      : 2 <= i.strategy || i.level < 2
                                      ? 4
                                      : 0
                                  ),
                                  y(i, 3),
                                  (i.status = d));
                          else {
                            var c = (8 + ((i.w_bits - 8) << 4)) << 8;
                            (c |=
                              (2 <= i.strategy || i.level < 2
                                ? 0
                                : i.level < 6
                                ? 1
                                : 6 === i.level
                                ? 2
                                : 3) << 6),
                              0 !== i.strstart && (c |= 32),
                              (c += 31 - (c % 31)),
                              (i.status = d),
                              _(i, c),
                              0 !== i.strstart &&
                                (_(i, e.adler >>> 16), _(i, 65535 & e.adler)),
                              (e.adler = 1);
                          }
                        if (69 === i.status)
                          if (i.gzhead.extra) {
                            for (
                              s = i.pending;
                              i.gzindex < (65535 & i.gzhead.extra.length) &&
                              (i.pending !== i.pending_buf_size ||
                                (i.gzhead.hcrc &&
                                  i.pending > s &&
                                  (e.adler = o(
                                    e.adler,
                                    i.pending_buf,
                                    i.pending - s,
                                    s
                                  )),
                                g(e),
                                (s = i.pending),
                                i.pending !== i.pending_buf_size));
  
                            )
                              y(i, 255 & i.gzhead.extra[i.gzindex]), i.gzindex++;
                            i.gzhead.hcrc &&
                              i.pending > s &&
                              (e.adler = o(
                                e.adler,
                                i.pending_buf,
                                i.pending - s,
                                s
                              )),
                              i.gzindex === i.gzhead.extra.length &&
                                ((i.gzindex = 0), (i.status = 73));
                          } else i.status = 73;
                        if (73 === i.status)
                          if (i.gzhead.name) {
                            s = i.pending;
                            do {
                              if (
                                i.pending === i.pending_buf_size &&
                                (i.gzhead.hcrc &&
                                  i.pending > s &&
                                  (e.adler = o(
                                    e.adler,
                                    i.pending_buf,
                                    i.pending - s,
                                    s
                                  )),
                                g(e),
                                (s = i.pending),
                                i.pending === i.pending_buf_size)
                              ) {
                                l = 1;
                                break;
                              }
                              (l =
                                i.gzindex < i.gzhead.name.length
                                  ? 255 & i.gzhead.name.charCodeAt(i.gzindex++)
                                  : 0),
                                y(i, l);
                            } while (0 !== l);
                            i.gzhead.hcrc &&
                              i.pending > s &&
                              (e.adler = o(
                                e.adler,
                                i.pending_buf,
                                i.pending - s,
                                s
                              )),
                              0 === l && ((i.gzindex = 0), (i.status = 91));
                          } else i.status = 91;
                        if (91 === i.status)
                          if (i.gzhead.comment) {
                            s = i.pending;
                            do {
                              if (
                                i.pending === i.pending_buf_size &&
                                (i.gzhead.hcrc &&
                                  i.pending > s &&
                                  (e.adler = o(
                                    e.adler,
                                    i.pending_buf,
                                    i.pending - s,
                                    s
                                  )),
                                g(e),
                                (s = i.pending),
                                i.pending === i.pending_buf_size)
                              ) {
                                l = 1;
                                break;
                              }
                              (l =
                                i.gzindex < i.gzhead.comment.length
                                  ? 255 & i.gzhead.comment.charCodeAt(i.gzindex++)
                                  : 0),
                                y(i, l);
                            } while (0 !== l);
                            i.gzhead.hcrc &&
                              i.pending > s &&
                              (e.adler = o(
                                e.adler,
                                i.pending_buf,
                                i.pending - s,
                                s
                              )),
                              0 === l && (i.status = 103);
                          } else i.status = 103;
                        if (
                          (103 === i.status &&
                            (i.gzhead.hcrc
                              ? (i.pending + 2 > i.pending_buf_size && g(e),
                                i.pending + 2 <= i.pending_buf_size &&
                                  (y(i, 255 & e.adler),
                                  y(i, (e.adler >> 8) & 255),
                                  (e.adler = 0),
                                  (i.status = d)))
                              : (i.status = d)),
                          0 !== i.pending)
                        ) {
                          if ((g(e), 0 === e.avail_out))
                            return (i.last_flush = -1), 0;
                        } else if (0 === e.avail_in && p(t) <= p(n) && 4 !== t)
                          return f(e, -5);
                        if (666 === i.status && 0 !== e.avail_in) return f(e, -5);
                        if (
                          0 !== e.avail_in ||
                          0 !== i.lookahead ||
                          (0 !== t && 666 !== i.status)
                        ) {
                          var b =
                            2 === i.strategy
                              ? (function (e, t) {
                                  for (var n; ; ) {
                                    if (
                                      0 === e.lookahead &&
                                      (x(e), 0 === e.lookahead)
                                    ) {
                                      if (0 === t) return 1;
                                      break;
                                    }
                                    if (
                                      ((e.match_length = 0),
                                      (n = a._tr_tally(
                                        e,
                                        0,
                                        e.window[e.strstart]
                                      )),
                                      e.lookahead--,
                                      e.strstart++,
                                      n && (v(e, !1), 0 === e.strm.avail_out))
                                    )
                                      return 1;
                                  }
                                  return (
                                    (e.insert = 0),
                                    4 === t
                                      ? (v(e, !0), 0 === e.strm.avail_out ? 3 : 4)
                                      : e.last_lit &&
                                        (v(e, !1), 0 === e.strm.avail_out)
                                      ? 1
                                      : 2
                                  );
                                })(i, t)
                              : 3 === i.strategy
                              ? (function (e, t) {
                                  for (var n, r, i, s, o = e.window; ; ) {
                                    if (e.lookahead <= u) {
                                      if ((x(e), e.lookahead <= u && 0 === t))
                                        return 1;
                                      if (0 === e.lookahead) break;
                                    }
                                    if (
                                      ((e.match_length = 0),
                                      e.lookahead >= 3 &&
                                        0 < e.strstart &&
                                        (r = o[(i = e.strstart - 1)]) ===
                                          o[++i] &&
                                        r === o[++i] &&
                                        r === o[++i])
                                    ) {
                                      s = e.strstart + u;
                                      do {} while (
                                        r === o[++i] &&
                                        r === o[++i] &&
                                        r === o[++i] &&
                                        r === o[++i] &&
                                        r === o[++i] &&
                                        r === o[++i] &&
                                        r === o[++i] &&
                                        r === o[++i] &&
                                        i < s
                                      );
                                      (e.match_length = u - (s - i)),
                                        e.match_length > e.lookahead &&
                                          (e.match_length = e.lookahead);
                                    }
                                    if (
                                      (e.match_length >= 3
                                        ? ((n = a._tr_tally(
                                            e,
                                            1,
                                            e.match_length - 3
                                          )),
                                          (e.lookahead -= e.match_length),
                                          (e.strstart += e.match_length),
                                          (e.match_length = 0))
                                        : ((n = a._tr_tally(
                                            e,
                                            0,
                                            e.window[e.strstart]
                                          )),
                                          e.lookahead--,
                                          e.strstart++),
                                      n && (v(e, !1), 0 === e.strm.avail_out))
                                    )
                                      return 1;
                                  }
                                  return (
                                    (e.insert = 0),
                                    4 === t
                                      ? (v(e, !0), 0 === e.strm.avail_out ? 3 : 4)
                                      : e.last_lit &&
                                        (v(e, !1), 0 === e.strm.avail_out)
                                      ? 1
                                      : 2
                                  );
                                })(i, t)
                              : r[i.level].func(i, t);
                          if (
                            ((3 !== b && 4 !== b) || (i.status = 666),
                            1 === b || 3 === b)
                          )
                            return 0 === e.avail_out && (i.last_flush = -1), 0;
                          if (
                            2 === b &&
                            (1 === t
                              ? a._tr_align(i)
                              : 5 !== t &&
                                (a._tr_stored_block(i, 0, 0, !1),
                                3 === t &&
                                  (m(i.head),
                                  0 === i.lookahead &&
                                    ((i.strstart = 0),
                                    (i.block_start = 0),
                                    (i.insert = 0)))),
                            g(e),
                            0 === e.avail_out)
                          )
                            return (i.last_flush = -1), 0;
                        }
                        return 4 !== t
                          ? 0
                          : i.wrap <= 0
                          ? 1
                          : (2 === i.wrap
                              ? (y(i, 255 & e.adler),
                                y(i, (e.adler >> 8) & 255),
                                y(i, (e.adler >> 16) & 255),
                                y(i, (e.adler >> 24) & 255),
                                y(i, 255 & e.total_in),
                                y(i, (e.total_in >> 8) & 255),
                                y(i, (e.total_in >> 16) & 255),
                                y(i, (e.total_in >> 24) & 255))
                              : (_(i, e.adler >>> 16), _(i, 65535 & e.adler)),
                            g(e),
                            0 < i.wrap && (i.wrap = -i.wrap),
                            0 !== i.pending ? 0 : 1);
                      }),
                      (n.deflateEnd = function (e) {
                        var t;
                        return e && e.state
                          ? 42 !== (t = e.state.status) &&
                            69 !== t &&
                            73 !== t &&
                            91 !== t &&
                            103 !== t &&
                            t !== d &&
                            666 !== t
                            ? f(e, h)
                            : ((e.state = null), t === d ? f(e, -3) : 0)
                          : h;
                      }),
                      (n.deflateSetDictionary = function (e, t) {
                        var n,
                          r,
                          a,
                          o,
                          l,
                          u,
                          c,
                          d,
                          f = t.length;
                        if (!e || !e.state) return h;
                        if (
                          2 === (o = (n = e.state).wrap) ||
                          (1 === o && 42 !== n.status) ||
                          n.lookahead
                        )
                          return h;
                        for (
                          1 === o && (e.adler = s(e.adler, t, f, 0)),
                            n.wrap = 0,
                            f >= n.w_size &&
                              (0 === o &&
                                (m(n.head),
                                (n.strstart = 0),
                                (n.block_start = 0),
                                (n.insert = 0)),
                              (d = new i.Buf8(n.w_size)),
                              i.arraySet(d, t, f - n.w_size, n.w_size, 0),
                              (t = d),
                              (f = n.w_size)),
                            l = e.avail_in,
                            u = e.next_in,
                            c = e.input,
                            e.avail_in = f,
                            e.next_in = 0,
                            e.input = t,
                            x(n);
                          n.lookahead >= 3;
  
                        ) {
                          for (
                            r = n.strstart, a = n.lookahead - 2;
                            (n.ins_h =
                              ((n.ins_h << n.hash_shift) ^ n.window[r + 3 - 1]) &
                              n.hash_mask),
                              (n.prev[r & n.w_mask] = n.head[n.ins_h]),
                              (n.head[n.ins_h] = r),
                              r++,
                              --a;
  
                          );
                          (n.strstart = r), (n.lookahead = 2), x(n);
                        }
                        return (
                          (n.strstart += n.lookahead),
                          (n.block_start = n.strstart),
                          (n.insert = n.lookahead),
                          (n.lookahead = 0),
                          (n.match_length = n.prev_length = 2),
                          (n.match_available = 0),
                          (e.next_in = u),
                          (e.input = c),
                          (e.avail_in = l),
                          (n.wrap = o),
                          0
                        );
                      }),
                      (n.deflateInfo = "pako deflate (from Nodeca project)");
                  },
                  {
                    "../utils/common": 41,
                    "./adler32": 43,
                    "./crc32": 45,
                    "./messages": 51,
                    "./trees": 52
                  }
                ],
                47: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = function () {
                      (this.text = 0),
                        (this.time = 0),
                        (this.xflags = 0),
                        (this.os = 0),
                        (this.extra = null),
                        (this.extra_len = 0),
                        (this.name = ""),
                        (this.comment = ""),
                        (this.hcrc = 0),
                        (this.done = !1);
                    };
                  },
                  {}
                ],
                48: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = function (e, t) {
                      var n,
                        r,
                        i,
                        a,
                        s,
                        o,
                        l,
                        h,
                        u,
                        c,
                        d,
                        f,
                        p,
                        m,
                        g,
                        v,
                        y,
                        _,
                        b,
                        x,
                        S,
                        E,
                        w,
                        T,
                        M;
                      (n = e.state),
                        (r = e.next_in),
                        (T = e.input),
                        (i = r + (e.avail_in - 5)),
                        (a = e.next_out),
                        (M = e.output),
                        (s = a - (t - e.avail_out)),
                        (o = a + (e.avail_out - 257)),
                        (l = n.dmax),
                        (h = n.wsize),
                        (u = n.whave),
                        (c = n.wnext),
                        (d = n.window),
                        (f = n.hold),
                        (p = n.bits),
                        (m = n.lencode),
                        (g = n.distcode),
                        (v = (1 << n.lenbits) - 1),
                        (y = (1 << n.distbits) - 1);
                      e: do {
                        p < 15 &&
                          ((f += T[r++] << p),
                          (p += 8),
                          (f += T[r++] << p),
                          (p += 8)),
                          (_ = m[f & v]);
                        t: for (;;) {
                          if (
                            ((f >>>= b = _ >>> 24),
                            (p -= b),
                            0 == (b = (_ >>> 16) & 255))
                          )
                            M[a++] = 65535 & _;
                          else {
                            if (!(16 & b)) {
                              if (0 == (64 & b)) {
                                _ = m[(65535 & _) + (f & ((1 << b) - 1))];
                                continue t;
                              }
                              if (32 & b) {
                                n.mode = 12;
                                break e;
                              }
                              (e.msg = "invalid literal/length code"),
                                (n.mode = 30);
                              break e;
                            }
                            (x = 65535 & _),
                              (b &= 15) &&
                                (p < b && ((f += T[r++] << p), (p += 8)),
                                (x += f & ((1 << b) - 1)),
                                (f >>>= b),
                                (p -= b)),
                              p < 15 &&
                                ((f += T[r++] << p),
                                (p += 8),
                                (f += T[r++] << p),
                                (p += 8)),
                              (_ = g[f & y]);
                            n: for (;;) {
                              if (
                                ((f >>>= b = _ >>> 24),
                                (p -= b),
                                !(16 & (b = (_ >>> 16) & 255)))
                              ) {
                                if (0 == (64 & b)) {
                                  _ = g[(65535 & _) + (f & ((1 << b) - 1))];
                                  continue n;
                                }
                                (e.msg = "invalid distance code"), (n.mode = 30);
                                break e;
                              }
                              if (
                                ((S = 65535 & _),
                                p < (b &= 15) &&
                                  ((f += T[r++] << p),
                                  (p += 8) < b && ((f += T[r++] << p), (p += 8))),
                                l < (S += f & ((1 << b) - 1)))
                              ) {
                                (e.msg = "invalid distance too far back"),
                                  (n.mode = 30);
                                break e;
                              }
                              if (((f >>>= b), (p -= b), (b = a - s) < S)) {
                                if (u < (b = S - b) && n.sane) {
                                  (e.msg = "invalid distance too far back"),
                                    (n.mode = 30);
                                  break e;
                                }
                                if (((w = d), (E = 0) === c)) {
                                  if (((E += h - b), b < x)) {
                                    for (x -= b; (M[a++] = d[E++]), --b; );
                                    (E = a - S), (w = M);
                                  }
                                } else if (c < b) {
                                  if (((E += h + c - b), (b -= c) < x)) {
                                    for (x -= b; (M[a++] = d[E++]), --b; );
                                    if (((E = 0), c < x)) {
                                      for (x -= b = c; (M[a++] = d[E++]), --b; );
                                      (E = a - S), (w = M);
                                    }
                                  }
                                } else if (((E += c - b), b < x)) {
                                  for (x -= b; (M[a++] = d[E++]), --b; );
                                  (E = a - S), (w = M);
                                }
                                for (; 2 < x; )
                                  (M[a++] = w[E++]),
                                    (M[a++] = w[E++]),
                                    (M[a++] = w[E++]),
                                    (x -= 3);
                                x &&
                                  ((M[a++] = w[E++]), 1 < x && (M[a++] = w[E++]));
                              } else {
                                for (
                                  E = a - S;
                                  (M[a++] = M[E++]),
                                    (M[a++] = M[E++]),
                                    (M[a++] = M[E++]),
                                    2 < (x -= 3);
  
                                );
                                x &&
                                  ((M[a++] = M[E++]), 1 < x && (M[a++] = M[E++]));
                              }
                              break;
                            }
                          }
                          break;
                        }
                      } while (r < i && a < o);
                      (r -= x = p >> 3),
                        (f &= (1 << (p -= x << 3)) - 1),
                        (e.next_in = r),
                        (e.next_out = a),
                        (e.avail_in = r < i ? i - r + 5 : 5 - (r - i)),
                        (e.avail_out = a < o ? o - a + 257 : 257 - (a - o)),
                        (n.hold = f),
                        (n.bits = p);
                    };
                  },
                  {}
                ],
                49: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils/common"),
                      i = e("./adler32"),
                      a = e("./crc32"),
                      s = e("./inffast"),
                      o = e("./inftrees"),
                      l = -2;
                    function h(e) {
                      return (
                        ((e >>> 24) & 255) +
                        ((e >>> 8) & 65280) +
                        ((65280 & e) << 8) +
                        ((255 & e) << 24)
                      );
                    }
                    function u() {
                      (this.mode = 0),
                        (this.last = !1),
                        (this.wrap = 0),
                        (this.havedict = !1),
                        (this.flags = 0),
                        (this.dmax = 0),
                        (this.check = 0),
                        (this.total = 0),
                        (this.head = null),
                        (this.wbits = 0),
                        (this.wsize = 0),
                        (this.whave = 0),
                        (this.wnext = 0),
                        (this.window = null),
                        (this.hold = 0),
                        (this.bits = 0),
                        (this.length = 0),
                        (this.offset = 0),
                        (this.extra = 0),
                        (this.lencode = null),
                        (this.distcode = null),
                        (this.lenbits = 0),
                        (this.distbits = 0),
                        (this.ncode = 0),
                        (this.nlen = 0),
                        (this.ndist = 0),
                        (this.have = 0),
                        (this.next = null),
                        (this.lens = new r.Buf16(320)),
                        (this.work = new r.Buf16(288)),
                        (this.lendyn = null),
                        (this.distdyn = null),
                        (this.sane = 0),
                        (this.back = 0),
                        (this.was = 0);
                    }
                    function c(e) {
                      var t;
                      return e && e.state
                        ? ((t = e.state),
                          (e.total_in = e.total_out = t.total = 0),
                          (e.msg = ""),
                          t.wrap && (e.adler = 1 & t.wrap),
                          (t.mode = 1),
                          (t.last = 0),
                          (t.havedict = 0),
                          (t.dmax = 32768),
                          (t.head = null),
                          (t.hold = 0),
                          (t.bits = 0),
                          (t.lencode = t.lendyn = new r.Buf32(852)),
                          (t.distcode = t.distdyn = new r.Buf32(592)),
                          (t.sane = 1),
                          (t.back = -1),
                          0)
                        : l;
                    }
                    function d(e) {
                      var t;
                      return e && e.state
                        ? (((t = e.state).wsize = 0),
                          (t.whave = 0),
                          (t.wnext = 0),
                          c(e))
                        : l;
                    }
                    function f(e, t) {
                      var n, r;
                      return e && e.state
                        ? ((r = e.state),
                          t < 0
                            ? ((n = 0), (t = -t))
                            : ((n = 1 + (t >> 4)), t < 48 && (t &= 15)),
                          t && (t < 8 || 15 < t)
                            ? l
                            : (null !== r.window &&
                                r.wbits !== t &&
                                (r.window = null),
                              (r.wrap = n),
                              (r.wbits = t),
                              d(e)))
                        : l;
                    }
                    function p(e, t) {
                      var n, r;
                      return e
                        ? ((r = new u()),
                          ((e.state = r).window = null),
                          0 !== (n = f(e, t)) && (e.state = null),
                          n)
                        : l;
                    }
                    var m,
                      g,
                      v = !0;
                    function y(e) {
                      if (v) {
                        var t;
                        for (
                          m = new r.Buf32(512), g = new r.Buf32(32), t = 0;
                          t < 144;
  
                        )
                          e.lens[t++] = 8;
                        for (; t < 256; ) e.lens[t++] = 9;
                        for (; t < 280; ) e.lens[t++] = 7;
                        for (; t < 288; ) e.lens[t++] = 8;
                        for (
                          o(1, e.lens, 0, 288, m, 0, e.work, { bits: 9 }), t = 0;
                          t < 32;
  
                        )
                          e.lens[t++] = 5;
                        o(2, e.lens, 0, 32, g, 0, e.work, { bits: 5 }), (v = !1);
                      }
                      (e.lencode = m),
                        (e.lenbits = 9),
                        (e.distcode = g),
                        (e.distbits = 5);
                    }
                    function _(e, t, n, i) {
                      var a,
                        s = e.state;
                      return (
                        null === s.window &&
                          ((s.wsize = 1 << s.wbits),
                          (s.wnext = 0),
                          (s.whave = 0),
                          (s.window = new r.Buf8(s.wsize))),
                        i >= s.wsize
                          ? (r.arraySet(s.window, t, n - s.wsize, s.wsize, 0),
                            (s.wnext = 0),
                            (s.whave = s.wsize))
                          : (i < (a = s.wsize - s.wnext) && (a = i),
                            r.arraySet(s.window, t, n - i, a, s.wnext),
                            (i -= a)
                              ? (r.arraySet(s.window, t, n - i, i, 0),
                                (s.wnext = i),
                                (s.whave = s.wsize))
                              : ((s.wnext += a),
                                s.wnext === s.wsize && (s.wnext = 0),
                                s.whave < s.wsize && (s.whave += a))),
                        0
                      );
                    }
                    (n.inflateReset = d),
                      (n.inflateReset2 = f),
                      (n.inflateResetKeep = c),
                      (n.inflateInit = function (e) {
                        return p(e, 15);
                      }),
                      (n.inflateInit2 = p),
                      (n.inflate = function (e, t) {
                        var n,
                          u,
                          c,
                          d,
                          f,
                          p,
                          m,
                          g,
                          v,
                          b,
                          x,
                          S,
                          E,
                          w,
                          T,
                          M,
                          A,
                          C,
                          P,
                          k,
                          R,
                          D,
                          I,
                          L,
                          F = 0,
                          O = new r.Buf8(4),
                          N = [
                            16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2,
                            14, 1, 15
                          ];
                        if (
                          !e ||
                          !e.state ||
                          !e.output ||
                          (!e.input && 0 !== e.avail_in)
                        )
                          return l;
                        12 === (n = e.state).mode && (n.mode = 13),
                          (f = e.next_out),
                          (c = e.output),
                          (m = e.avail_out),
                          (d = e.next_in),
                          (u = e.input),
                          (p = e.avail_in),
                          (g = n.hold),
                          (v = n.bits),
                          (b = p),
                          (x = m),
                          (D = 0);
                        e: for (;;)
                          switch (n.mode) {
                            case 1:
                              if (0 === n.wrap) {
                                n.mode = 13;
                                break;
                              }
                              for (; v < 16; ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              if (2 & n.wrap && 35615 === g) {
                                (O[(n.check = 0)] = 255 & g),
                                  (O[1] = (g >>> 8) & 255),
                                  (n.check = a(n.check, O, 2, 0)),
                                  (v = g = 0),
                                  (n.mode = 2);
                                break;
                              }
                              if (
                                ((n.flags = 0),
                                n.head && (n.head.done = !1),
                                !(1 & n.wrap) ||
                                  (((255 & g) << 8) + (g >> 8)) % 31)
                              ) {
                                (e.msg = "incorrect header check"), (n.mode = 30);
                                break;
                              }
                              if (8 != (15 & g)) {
                                (e.msg = "unknown compression method"),
                                  (n.mode = 30);
                                break;
                              }
                              if (
                                ((v -= 4),
                                (R = 8 + (15 & (g >>>= 4))),
                                0 === n.wbits)
                              )
                                n.wbits = R;
                              else if (R > n.wbits) {
                                (e.msg = "invalid window size"), (n.mode = 30);
                                break;
                              }
                              (n.dmax = 1 << R),
                                (e.adler = n.check = 1),
                                (n.mode = 512 & g ? 10 : 12),
                                (v = g = 0);
                              break;
                            case 2:
                              for (; v < 16; ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              if (((n.flags = g), 8 != (255 & n.flags))) {
                                (e.msg = "unknown compression method"),
                                  (n.mode = 30);
                                break;
                              }
                              if (57344 & n.flags) {
                                (e.msg = "unknown header flags set"),
                                  (n.mode = 30);
                                break;
                              }
                              n.head && (n.head.text = (g >> 8) & 1),
                                512 & n.flags &&
                                  ((O[0] = 255 & g),
                                  (O[1] = (g >>> 8) & 255),
                                  (n.check = a(n.check, O, 2, 0))),
                                (v = g = 0),
                                (n.mode = 3);
                            case 3:
                              for (; v < 32; ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              n.head && (n.head.time = g),
                                512 & n.flags &&
                                  ((O[0] = 255 & g),
                                  (O[1] = (g >>> 8) & 255),
                                  (O[2] = (g >>> 16) & 255),
                                  (O[3] = (g >>> 24) & 255),
                                  (n.check = a(n.check, O, 4, 0))),
                                (v = g = 0),
                                (n.mode = 4);
                            case 4:
                              for (; v < 16; ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              n.head &&
                                ((n.head.xflags = 255 & g), (n.head.os = g >> 8)),
                                512 & n.flags &&
                                  ((O[0] = 255 & g),
                                  (O[1] = (g >>> 8) & 255),
                                  (n.check = a(n.check, O, 2, 0))),
                                (v = g = 0),
                                (n.mode = 5);
                            case 5:
                              if (1024 & n.flags) {
                                for (; v < 16; ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                (n.length = g),
                                  n.head && (n.head.extra_len = g),
                                  512 & n.flags &&
                                    ((O[0] = 255 & g),
                                    (O[1] = (g >>> 8) & 255),
                                    (n.check = a(n.check, O, 2, 0))),
                                  (v = g = 0);
                              } else n.head && (n.head.extra = null);
                              n.mode = 6;
                            case 6:
                              if (
                                1024 & n.flags &&
                                (p < (S = n.length) && (S = p),
                                S &&
                                  (n.head &&
                                    ((R = n.head.extra_len - n.length),
                                    n.head.extra ||
                                      (n.head.extra = new Array(
                                        n.head.extra_len
                                      )),
                                    r.arraySet(n.head.extra, u, d, S, R)),
                                  512 & n.flags &&
                                    (n.check = a(n.check, u, S, d)),
                                  (p -= S),
                                  (d += S),
                                  (n.length -= S)),
                                n.length)
                              )
                                break e;
                              (n.length = 0), (n.mode = 7);
                            case 7:
                              if (2048 & n.flags) {
                                if (0 === p) break e;
                                for (
                                  S = 0;
                                  (R = u[d + S++]),
                                    n.head &&
                                      R &&
                                      n.length < 65536 &&
                                      (n.head.name += String.fromCharCode(R)),
                                    R && S < p;
  
                                );
                                if (
                                  (512 & n.flags &&
                                    (n.check = a(n.check, u, S, d)),
                                  (p -= S),
                                  (d += S),
                                  R)
                                )
                                  break e;
                              } else n.head && (n.head.name = null);
                              (n.length = 0), (n.mode = 8);
                            case 8:
                              if (4096 & n.flags) {
                                if (0 === p) break e;
                                for (
                                  S = 0;
                                  (R = u[d + S++]),
                                    n.head &&
                                      R &&
                                      n.length < 65536 &&
                                      (n.head.comment += String.fromCharCode(R)),
                                    R && S < p;
  
                                );
                                if (
                                  (512 & n.flags &&
                                    (n.check = a(n.check, u, S, d)),
                                  (p -= S),
                                  (d += S),
                                  R)
                                )
                                  break e;
                              } else n.head && (n.head.comment = null);
                              n.mode = 9;
                            case 9:
                              if (512 & n.flags) {
                                for (; v < 16; ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                if (g !== (65535 & n.check)) {
                                  (e.msg = "header crc mismatch"), (n.mode = 30);
                                  break;
                                }
                                v = g = 0;
                              }
                              n.head &&
                                ((n.head.hcrc = (n.flags >> 9) & 1),
                                (n.head.done = !0)),
                                (e.adler = n.check = 0),
                                (n.mode = 12);
                              break;
                            case 10:
                              for (; v < 32; ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              (e.adler = n.check = h(g)),
                                (v = g = 0),
                                (n.mode = 11);
                            case 11:
                              if (0 === n.havedict)
                                return (
                                  (e.next_out = f),
                                  (e.avail_out = m),
                                  (e.next_in = d),
                                  (e.avail_in = p),
                                  (n.hold = g),
                                  (n.bits = v),
                                  2
                                );
                              (e.adler = n.check = 1), (n.mode = 12);
                            case 12:
                              if (5 === t || 6 === t) break e;
                            case 13:
                              if (n.last) {
                                (g >>>= 7 & v), (v -= 7 & v), (n.mode = 27);
                                break;
                              }
                              for (; v < 3; ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              switch (
                                ((n.last = 1 & g), (v -= 1), 3 & (g >>>= 1))
                              ) {
                                case 0:
                                  n.mode = 14;
                                  break;
                                case 1:
                                  if ((y(n), (n.mode = 20), 6 !== t)) break;
                                  (g >>>= 2), (v -= 2);
                                  break e;
                                case 2:
                                  n.mode = 17;
                                  break;
                                case 3:
                                  (e.msg = "invalid block type"), (n.mode = 30);
                              }
                              (g >>>= 2), (v -= 2);
                              break;
                            case 14:
                              for (g >>>= 7 & v, v -= 7 & v; v < 32; ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              if ((65535 & g) != ((g >>> 16) ^ 65535)) {
                                (e.msg = "invalid stored block lengths"),
                                  (n.mode = 30);
                                break;
                              }
                              if (
                                ((n.length = 65535 & g),
                                (v = g = 0),
                                (n.mode = 15),
                                6 === t)
                              )
                                break e;
                            case 15:
                              n.mode = 16;
                            case 16:
                              if ((S = n.length)) {
                                if ((p < S && (S = p), m < S && (S = m), 0 === S))
                                  break e;
                                r.arraySet(c, u, d, S, f),
                                  (p -= S),
                                  (d += S),
                                  (m -= S),
                                  (f += S),
                                  (n.length -= S);
                                break;
                              }
                              n.mode = 12;
                              break;
                            case 17:
                              for (; v < 14; ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              if (
                                ((n.nlen = 257 + (31 & g)),
                                (g >>>= 5),
                                (v -= 5),
                                (n.ndist = 1 + (31 & g)),
                                (g >>>= 5),
                                (v -= 5),
                                (n.ncode = 4 + (15 & g)),
                                (g >>>= 4),
                                (v -= 4),
                                286 < n.nlen || 30 < n.ndist)
                              ) {
                                (e.msg = "too many length or distance symbols"),
                                  (n.mode = 30);
                                break;
                              }
                              (n.have = 0), (n.mode = 18);
                            case 18:
                              for (; n.have < n.ncode; ) {
                                for (; v < 3; ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                (n.lens[N[n.have++]] = 7 & g),
                                  (g >>>= 3),
                                  (v -= 3);
                              }
                              for (; n.have < 19; ) n.lens[N[n.have++]] = 0;
                              if (
                                ((n.lencode = n.lendyn),
                                (n.lenbits = 7),
                                (I = { bits: n.lenbits }),
                                (D = o(
                                  0,
                                  n.lens,
                                  0,
                                  19,
                                  n.lencode,
                                  0,
                                  n.work,
                                  I
                                )),
                                (n.lenbits = I.bits),
                                D)
                              ) {
                                (e.msg = "invalid code lengths set"),
                                  (n.mode = 30);
                                break;
                              }
                              (n.have = 0), (n.mode = 19);
                            case 19:
                              for (; n.have < n.nlen + n.ndist; ) {
                                for (
                                  ;
                                  (M =
                                    ((F =
                                      n.lencode[g & ((1 << n.lenbits) - 1)]) >>>
                                      16) &
                                    255),
                                    (A = 65535 & F),
                                    !((T = F >>> 24) <= v);
  
                                ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                if (A < 16)
                                  (g >>>= T), (v -= T), (n.lens[n.have++] = A);
                                else {
                                  if (16 === A) {
                                    for (L = T + 2; v < L; ) {
                                      if (0 === p) break e;
                                      p--, (g += u[d++] << v), (v += 8);
                                    }
                                    if (((g >>>= T), (v -= T), 0 === n.have)) {
                                      (e.msg = "invalid bit length repeat"),
                                        (n.mode = 30);
                                      break;
                                    }
                                    (R = n.lens[n.have - 1]),
                                      (S = 3 + (3 & g)),
                                      (g >>>= 2),
                                      (v -= 2);
                                  } else if (17 === A) {
                                    for (L = T + 3; v < L; ) {
                                      if (0 === p) break e;
                                      p--, (g += u[d++] << v), (v += 8);
                                    }
                                    (v -= T),
                                      (R = 0),
                                      (S = 3 + (7 & (g >>>= T))),
                                      (g >>>= 3),
                                      (v -= 3);
                                  } else {
                                    for (L = T + 7; v < L; ) {
                                      if (0 === p) break e;
                                      p--, (g += u[d++] << v), (v += 8);
                                    }
                                    (v -= T),
                                      (R = 0),
                                      (S = 11 + (127 & (g >>>= T))),
                                      (g >>>= 7),
                                      (v -= 7);
                                  }
                                  if (n.have + S > n.nlen + n.ndist) {
                                    (e.msg = "invalid bit length repeat"),
                                      (n.mode = 30);
                                    break;
                                  }
                                  for (; S--; ) n.lens[n.have++] = R;
                                }
                              }
                              if (30 === n.mode) break;
                              if (0 === n.lens[256]) {
                                (e.msg = "invalid code -- missing end-of-block"),
                                  (n.mode = 30);
                                break;
                              }
                              if (
                                ((n.lenbits = 9),
                                (I = { bits: n.lenbits }),
                                (D = o(
                                  1,
                                  n.lens,
                                  0,
                                  n.nlen,
                                  n.lencode,
                                  0,
                                  n.work,
                                  I
                                )),
                                (n.lenbits = I.bits),
                                D)
                              ) {
                                (e.msg = "invalid literal/lengths set"),
                                  (n.mode = 30);
                                break;
                              }
                              if (
                                ((n.distbits = 6),
                                (n.distcode = n.distdyn),
                                (I = { bits: n.distbits }),
                                (D = o(
                                  2,
                                  n.lens,
                                  n.nlen,
                                  n.ndist,
                                  n.distcode,
                                  0,
                                  n.work,
                                  I
                                )),
                                (n.distbits = I.bits),
                                D)
                              ) {
                                (e.msg = "invalid distances set"), (n.mode = 30);
                                break;
                              }
                              if (((n.mode = 20), 6 === t)) break e;
                            case 20:
                              n.mode = 21;
                            case 21:
                              if (6 <= p && 258 <= m) {
                                (e.next_out = f),
                                  (e.avail_out = m),
                                  (e.next_in = d),
                                  (e.avail_in = p),
                                  (n.hold = g),
                                  (n.bits = v),
                                  s(e, x),
                                  (f = e.next_out),
                                  (c = e.output),
                                  (m = e.avail_out),
                                  (d = e.next_in),
                                  (u = e.input),
                                  (p = e.avail_in),
                                  (g = n.hold),
                                  (v = n.bits),
                                  12 === n.mode && (n.back = -1);
                                break;
                              }
                              for (
                                n.back = 0;
                                (M =
                                  ((F = n.lencode[g & ((1 << n.lenbits) - 1)]) >>>
                                    16) &
                                  255),
                                  (A = 65535 & F),
                                  !((T = F >>> 24) <= v);
  
                              ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              if (M && 0 == (240 & M)) {
                                for (
                                  C = T, P = M, k = A;
                                  (M =
                                    ((F =
                                      n.lencode[
                                        k + ((g & ((1 << (C + P)) - 1)) >> C)
                                      ]) >>>
                                      16) &
                                    255),
                                    (A = 65535 & F),
                                    !(C + (T = F >>> 24) <= v);
  
                                ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                (g >>>= C), (v -= C), (n.back += C);
                              }
                              if (
                                ((g >>>= T),
                                (v -= T),
                                (n.back += T),
                                (n.length = A),
                                0 === M)
                              ) {
                                n.mode = 26;
                                break;
                              }
                              if (32 & M) {
                                (n.back = -1), (n.mode = 12);
                                break;
                              }
                              if (64 & M) {
                                (e.msg = "invalid literal/length code"),
                                  (n.mode = 30);
                                break;
                              }
                              (n.extra = 15 & M), (n.mode = 22);
                            case 22:
                              if (n.extra) {
                                for (L = n.extra; v < L; ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                (n.length += g & ((1 << n.extra) - 1)),
                                  (g >>>= n.extra),
                                  (v -= n.extra),
                                  (n.back += n.extra);
                              }
                              (n.was = n.length), (n.mode = 23);
                            case 23:
                              for (
                                ;
                                (M =
                                  ((F =
                                    n.distcode[g & ((1 << n.distbits) - 1)]) >>>
                                    16) &
                                  255),
                                  (A = 65535 & F),
                                  !((T = F >>> 24) <= v);
  
                              ) {
                                if (0 === p) break e;
                                p--, (g += u[d++] << v), (v += 8);
                              }
                              if (0 == (240 & M)) {
                                for (
                                  C = T, P = M, k = A;
                                  (M =
                                    ((F =
                                      n.distcode[
                                        k + ((g & ((1 << (C + P)) - 1)) >> C)
                                      ]) >>>
                                      16) &
                                    255),
                                    (A = 65535 & F),
                                    !(C + (T = F >>> 24) <= v);
  
                                ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                (g >>>= C), (v -= C), (n.back += C);
                              }
                              if (((g >>>= T), (v -= T), (n.back += T), 64 & M)) {
                                (e.msg = "invalid distance code"), (n.mode = 30);
                                break;
                              }
                              (n.offset = A), (n.extra = 15 & M), (n.mode = 24);
                            case 24:
                              if (n.extra) {
                                for (L = n.extra; v < L; ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                (n.offset += g & ((1 << n.extra) - 1)),
                                  (g >>>= n.extra),
                                  (v -= n.extra),
                                  (n.back += n.extra);
                              }
                              if (n.offset > n.dmax) {
                                (e.msg = "invalid distance too far back"),
                                  (n.mode = 30);
                                break;
                              }
                              n.mode = 25;
                            case 25:
                              if (0 === m) break e;
                              if (((S = x - m), n.offset > S)) {
                                if ((S = n.offset - S) > n.whave && n.sane) {
                                  (e.msg = "invalid distance too far back"),
                                    (n.mode = 30);
                                  break;
                                }
                                (E =
                                  S > n.wnext
                                    ? ((S -= n.wnext), n.wsize - S)
                                    : n.wnext - S),
                                  S > n.length && (S = n.length),
                                  (w = n.window);
                              } else (w = c), (E = f - n.offset), (S = n.length);
                              for (
                                m < S && (S = m), m -= S, n.length -= S;
                                (c[f++] = w[E++]), --S;
  
                              );
                              0 === n.length && (n.mode = 21);
                              break;
                            case 26:
                              if (0 === m) break e;
                              (c[f++] = n.length), m--, (n.mode = 21);
                              break;
                            case 27:
                              if (n.wrap) {
                                for (; v < 32; ) {
                                  if (0 === p) break e;
                                  p--, (g |= u[d++] << v), (v += 8);
                                }
                                if (
                                  ((x -= m),
                                  (e.total_out += x),
                                  (n.total += x),
                                  x &&
                                    (e.adler = n.check =
                                      n.flags
                                        ? a(n.check, c, x, f - x)
                                        : i(n.check, c, x, f - x)),
                                  (x = m),
                                  (n.flags ? g : h(g)) !== n.check)
                                ) {
                                  (e.msg = "incorrect data check"), (n.mode = 30);
                                  break;
                                }
                                v = g = 0;
                              }
                              n.mode = 28;
                            case 28:
                              if (n.wrap && n.flags) {
                                for (; v < 32; ) {
                                  if (0 === p) break e;
                                  p--, (g += u[d++] << v), (v += 8);
                                }
                                if (g !== (4294967295 & n.total)) {
                                  (e.msg = "incorrect length check"),
                                    (n.mode = 30);
                                  break;
                                }
                                v = g = 0;
                              }
                              n.mode = 29;
                            case 29:
                              D = 1;
                              break e;
                            case 30:
                              D = -3;
                              break e;
                            case 31:
                              return -4;
                            default:
                              return l;
                          }
                        return (
                          (e.next_out = f),
                          (e.avail_out = m),
                          (e.next_in = d),
                          (e.avail_in = p),
                          (n.hold = g),
                          (n.bits = v),
                          (n.wsize ||
                            (x !== e.avail_out &&
                              n.mode < 30 &&
                              (n.mode < 27 || 4 !== t))) &&
                          _(e, e.output, e.next_out, x - e.avail_out)
                            ? ((n.mode = 31), -4)
                            : ((b -= e.avail_in),
                              (x -= e.avail_out),
                              (e.total_in += b),
                              (e.total_out += x),
                              (n.total += x),
                              n.wrap &&
                                x &&
                                (e.adler = n.check =
                                  n.flags
                                    ? a(n.check, c, x, e.next_out - x)
                                    : i(n.check, c, x, e.next_out - x)),
                              (e.data_type =
                                n.bits +
                                (n.last ? 64 : 0) +
                                (12 === n.mode ? 128 : 0) +
                                (20 === n.mode || 15 === n.mode ? 256 : 0)),
                              ((0 == b && 0 === x) || 4 === t) &&
                                0 === D &&
                                (D = -5),
                              D)
                        );
                      }),
                      (n.inflateEnd = function (e) {
                        if (!e || !e.state) return l;
                        var t = e.state;
                        return t.window && (t.window = null), (e.state = null), 0;
                      }),
                      (n.inflateGetHeader = function (e, t) {
                        var n;
                        return e && e.state
                          ? 0 == (2 & (n = e.state).wrap)
                            ? l
                            : (((n.head = t).done = !1), 0)
                          : l;
                      }),
                      (n.inflateSetDictionary = function (e, t) {
                        var n,
                          r = t.length;
                        return e && e.state
                          ? 0 !== (n = e.state).wrap && 11 !== n.mode
                            ? l
                            : 11 === n.mode && i(1, t, r, 0) !== n.check
                            ? -3
                            : _(e, t, r, r)
                            ? ((n.mode = 31), -4)
                            : ((n.havedict = 1), 0)
                          : l;
                      }),
                      (n.inflateInfo = "pako inflate (from Nodeca project)");
                  },
                  {
                    "../utils/common": 41,
                    "./adler32": 43,
                    "./crc32": 45,
                    "./inffast": 48,
                    "./inftrees": 50
                  }
                ],
                50: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils/common"),
                      i = [
                        3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,
                        35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258,
                        0, 0
                      ],
                      a = [
                        16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18,
                        18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21,
                        16, 72, 78
                      ],
                      s = [
                        1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
                        257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
                        8193, 12289, 16385, 24577, 0, 0
                      ],
                      o = [
                        16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21,
                        22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28,
                        29, 29, 64, 64
                      ];
                    t.exports = function (e, t, n, l, h, u, c, d) {
                      var f,
                        p,
                        m,
                        g,
                        v,
                        y,
                        _,
                        b,
                        x,
                        S = d.bits,
                        E = 0,
                        w = 0,
                        T = 0,
                        M = 0,
                        A = 0,
                        C = 0,
                        P = 0,
                        k = 0,
                        R = 0,
                        D = 0,
                        I = null,
                        L = 0,
                        F = new r.Buf16(16),
                        O = new r.Buf16(16),
                        N = null,
                        B = 0;
                      for (E = 0; E <= 15; E++) F[E] = 0;
                      for (w = 0; w < l; w++) F[t[n + w]]++;
                      for (A = S, M = 15; 1 <= M && 0 === F[M]; M--);
                      if ((M < A && (A = M), 0 === M))
                        return (
                          (h[u++] = 20971520),
                          (h[u++] = 20971520),
                          (d.bits = 1),
                          0
                        );
                      for (T = 1; T < M && 0 === F[T]; T++);
                      for (A < T && (A = T), E = k = 1; E <= 15; E++)
                        if (((k <<= 1), (k -= F[E]) < 0)) return -1;
                      if (0 < k && (0 === e || 1 !== M)) return -1;
                      for (O[1] = 0, E = 1; E < 15; E++) O[E + 1] = O[E] + F[E];
                      for (w = 0; w < l; w++)
                        0 !== t[n + w] && (c[O[t[n + w]]++] = w);
                      if (
                        ((y =
                          0 === e
                            ? ((I = N = c), 19)
                            : 1 === e
                            ? ((I = i), (L -= 257), (N = a), (B -= 257), 256)
                            : ((I = s), (N = o), -1)),
                        (E = T),
                        (v = u),
                        (P = w = D = 0),
                        (m = -1),
                        (g = (R = 1 << (C = A)) - 1),
                        (1 === e && 852 < R) || (2 === e && 592 < R))
                      )
                        return 1;
                      for (;;) {
                        for (
                          _ = E - P,
                            x =
                              c[w] < y
                                ? ((b = 0), c[w])
                                : c[w] > y
                                ? ((b = N[B + c[w]]), I[L + c[w]])
                                : ((b = 96), 0),
                            f = 1 << (E - P),
                            T = p = 1 << C;
                          (h[v + (D >> P) + (p -= f)] =
                            (_ << 24) | (b << 16) | x | 0),
                            0 !== p;
  
                        );
                        for (f = 1 << (E - 1); D & f; ) f >>= 1;
                        if (
                          (0 !== f ? ((D &= f - 1), (D += f)) : (D = 0),
                          w++,
                          0 == --F[E])
                        ) {
                          if (E === M) break;
                          E = t[n + c[w]];
                        }
                        if (A < E && (D & g) !== m) {
                          for (
                            0 === P && (P = A), v += T, k = 1 << (C = E - P);
                            C + P < M && !((k -= F[C + P]) <= 0);
  
                          )
                            C++, (k <<= 1);
                          if (
                            ((R += 1 << C),
                            (1 === e && 852 < R) || (2 === e && 592 < R))
                          )
                            return 1;
                          h[(m = D & g)] = (A << 24) | (C << 16) | (v - u) | 0;
                        }
                      }
                      return (
                        0 !== D && (h[v + D] = ((E - P) << 24) | (64 << 16) | 0),
                        (d.bits = A),
                        0
                      );
                    };
                  },
                  { "../utils/common": 41 }
                ],
                51: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = {
                      2: "need dictionary",
                      1: "stream end",
                      0: "",
                      "-1": "file error",
                      "-2": "stream error",
                      "-3": "data error",
                      "-4": "insufficient memory",
                      "-5": "buffer error",
                      "-6": "incompatible version"
                    };
                  },
                  {}
                ],
                52: [
                  function (e, t, n) {
                    "use strict";
                    var r = e("../utils/common");
                    function i(e) {
                      for (var t = e.length; 0 <= --t; ) e[t] = 0;
                    }
                    var a = [
                        0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3,
                        3, 4, 4, 4, 4, 5, 5, 5, 5, 0
                      ],
                      s = [
                        0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8,
                        8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13
                      ],
                      o = [
                        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7
                      ],
                      l = [
                        16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14,
                        1, 15
                      ],
                      h = new Array(576);
                    i(h);
                    var u = new Array(60);
                    i(u);
                    var c = new Array(512);
                    i(c);
                    var d = new Array(256);
                    i(d);
                    var f = new Array(29);
                    i(f);
                    var p,
                      m,
                      g,
                      v = new Array(30);
                    function y(e, t, n, r, i) {
                      (this.static_tree = e),
                        (this.extra_bits = t),
                        (this.extra_base = n),
                        (this.elems = r),
                        (this.max_length = i),
                        (this.has_stree = e && e.length);
                    }
                    function _(e, t) {
                      (this.dyn_tree = e),
                        (this.max_code = 0),
                        (this.stat_desc = t);
                    }
                    function b(e) {
                      return e < 256 ? c[e] : c[256 + (e >>> 7)];
                    }
                    function x(e, t) {
                      (e.pending_buf[e.pending++] = 255 & t),
                        (e.pending_buf[e.pending++] = (t >>> 8) & 255);
                    }
                    function S(e, t, n) {
                      e.bi_valid > 16 - n
                        ? ((e.bi_buf |= (t << e.bi_valid) & 65535),
                          x(e, e.bi_buf),
                          (e.bi_buf = t >> (16 - e.bi_valid)),
                          (e.bi_valid += n - 16))
                        : ((e.bi_buf |= (t << e.bi_valid) & 65535),
                          (e.bi_valid += n));
                    }
                    function E(e, t, n) {
                      S(e, n[2 * t], n[2 * t + 1]);
                    }
                    function w(e, t) {
                      for (
                        var n = 0;
                        (n |= 1 & e), (e >>>= 1), (n <<= 1), 0 < --t;
  
                      );
                      return n >>> 1;
                    }
                    function T(e, t, n) {
                      var r,
                        i,
                        a = new Array(16),
                        s = 0;
                      for (r = 1; r <= 15; r++) a[r] = s = (s + n[r - 1]) << 1;
                      for (i = 0; i <= t; i++) {
                        var o = e[2 * i + 1];
                        0 !== o && (e[2 * i] = w(a[o]++, o));
                      }
                    }
                    function M(e) {
                      var t;
                      for (t = 0; t < 286; t++) e.dyn_ltree[2 * t] = 0;
                      for (t = 0; t < 30; t++) e.dyn_dtree[2 * t] = 0;
                      for (t = 0; t < 19; t++) e.bl_tree[2 * t] = 0;
                      (e.dyn_ltree[512] = 1),
                        (e.opt_len = e.static_len = 0),
                        (e.last_lit = e.matches = 0);
                    }
                    function A(e) {
                      8 < e.bi_valid
                        ? x(e, e.bi_buf)
                        : 0 < e.bi_valid &&
                          (e.pending_buf[e.pending++] = e.bi_buf),
                        (e.bi_buf = 0),
                        (e.bi_valid = 0);
                    }
                    function C(e, t, n, r) {
                      var i = 2 * t,
                        a = 2 * n;
                      return e[i] < e[a] || (e[i] === e[a] && r[t] <= r[n]);
                    }
                    function P(e, t, n) {
                      for (
                        var r = e.heap[n], i = n << 1;
                        i <= e.heap_len &&
                        (i < e.heap_len &&
                          C(t, e.heap[i + 1], e.heap[i], e.depth) &&
                          i++,
                        !C(t, r, e.heap[i], e.depth));
  
                      )
                        (e.heap[n] = e.heap[i]), (n = i), (i <<= 1);
                      e.heap[n] = r;
                    }
                    function k(e, t, n) {
                      var r,
                        i,
                        o,
                        l,
                        h = 0;
                      if (0 !== e.last_lit)
                        for (
                          ;
                          (r =
                            (e.pending_buf[e.d_buf + 2 * h] << 8) |
                            e.pending_buf[e.d_buf + 2 * h + 1]),
                            (i = e.pending_buf[e.l_buf + h]),
                            h++,
                            0 === r
                              ? E(e, i, t)
                              : (E(e, (o = d[i]) + 256 + 1, t),
                                0 !== (l = a[o]) && S(e, (i -= f[o]), l),
                                E(e, (o = b(--r)), n),
                                0 !== (l = s[o]) && S(e, (r -= v[o]), l)),
                            h < e.last_lit;
  
                        );
                      E(e, 256, t);
                    }
                    function R(e, t) {
                      var n,
                        r,
                        i,
                        a = t.dyn_tree,
                        s = t.stat_desc.static_tree,
                        o = t.stat_desc.has_stree,
                        l = t.stat_desc.elems,
                        h = -1;
                      for (e.heap_len = 0, e.heap_max = 573, n = 0; n < l; n++)
                        0 !== a[2 * n]
                          ? ((e.heap[++e.heap_len] = h = n), (e.depth[n] = 0))
                          : (a[2 * n + 1] = 0);
                      for (; e.heap_len < 2; )
                        (a[2 * (i = e.heap[++e.heap_len] = h < 2 ? ++h : 0)] = 1),
                          (e.depth[i] = 0),
                          e.opt_len--,
                          o && (e.static_len -= s[2 * i + 1]);
                      for (t.max_code = h, n = e.heap_len >> 1; 1 <= n; n--)
                        P(e, a, n);
                      for (
                        i = l;
                        (n = e.heap[1]),
                          (e.heap[1] = e.heap[e.heap_len--]),
                          P(e, a, 1),
                          (r = e.heap[1]),
                          (e.heap[--e.heap_max] = n),
                          (e.heap[--e.heap_max] = r),
                          (a[2 * i] = a[2 * n] + a[2 * r]),
                          (e.depth[i] =
                            (e.depth[n] >= e.depth[r] ? e.depth[n] : e.depth[r]) +
                            1),
                          (a[2 * n + 1] = a[2 * r + 1] = i),
                          (e.heap[1] = i++),
                          P(e, a, 1),
                          2 <= e.heap_len;
  
                      );
                      (e.heap[--e.heap_max] = e.heap[1]),
                        (function (e, t) {
                          var n,
                            r,
                            i,
                            a,
                            s,
                            o,
                            l = t.dyn_tree,
                            h = t.max_code,
                            u = t.stat_desc.static_tree,
                            c = t.stat_desc.has_stree,
                            d = t.stat_desc.extra_bits,
                            f = t.stat_desc.extra_base,
                            p = t.stat_desc.max_length,
                            m = 0;
                          for (a = 0; a <= 15; a++) e.bl_count[a] = 0;
                          for (
                            l[2 * e.heap[e.heap_max] + 1] = 0, n = e.heap_max + 1;
                            n < 573;
                            n++
                          )
                            p < (a = l[2 * l[2 * (r = e.heap[n]) + 1] + 1] + 1) &&
                              ((a = p), m++),
                              (l[2 * r + 1] = a),
                              h < r ||
                                (e.bl_count[a]++,
                                (s = 0),
                                f <= r && (s = d[r - f]),
                                (o = l[2 * r]),
                                (e.opt_len += o * (a + s)),
                                c && (e.static_len += o * (u[2 * r + 1] + s)));
                          if (0 !== m) {
                            do {
                              for (a = p - 1; 0 === e.bl_count[a]; ) a--;
                              e.bl_count[a]--,
                                (e.bl_count[a + 1] += 2),
                                e.bl_count[p]--,
                                (m -= 2);
                            } while (0 < m);
                            for (a = p; 0 !== a; a--)
                              for (r = e.bl_count[a]; 0 !== r; )
                                h < (i = e.heap[--n]) ||
                                  (l[2 * i + 1] !== a &&
                                    ((e.opt_len += (a - l[2 * i + 1]) * l[2 * i]),
                                    (l[2 * i + 1] = a)),
                                  r--);
                          }
                        })(e, t),
                        T(a, h, e.bl_count);
                    }
                    function D(e, t, n) {
                      var r,
                        i,
                        a = -1,
                        s = t[1],
                        o = 0,
                        l = 7,
                        h = 4;
                      for (
                        0 === s && ((l = 138), (h = 3)),
                          t[2 * (n + 1) + 1] = 65535,
                          r = 0;
                        r <= n;
                        r++
                      )
                        (i = s),
                          (s = t[2 * (r + 1) + 1]),
                          (++o < l && i === s) ||
                            (o < h
                              ? (e.bl_tree[2 * i] += o)
                              : 0 !== i
                              ? (i !== a && e.bl_tree[2 * i]++, e.bl_tree[32]++)
                              : o <= 10
                              ? e.bl_tree[34]++
                              : e.bl_tree[36]++,
                            (a = i),
                            (h =
                              (o = 0) === s
                                ? ((l = 138), 3)
                                : i === s
                                ? ((l = 6), 3)
                                : ((l = 7), 4)));
                    }
                    function I(e, t, n) {
                      var r,
                        i,
                        a = -1,
                        s = t[1],
                        o = 0,
                        l = 7,
                        h = 4;
                      for (0 === s && ((l = 138), (h = 3)), r = 0; r <= n; r++)
                        if (
                          ((i = s),
                          (s = t[2 * (r + 1) + 1]),
                          !(++o < l && i === s))
                        ) {
                          if (o < h) for (; E(e, i, e.bl_tree), 0 != --o; );
                          else
                            0 !== i
                              ? (i !== a && (E(e, i, e.bl_tree), o--),
                                E(e, 16, e.bl_tree),
                                S(e, o - 3, 2))
                              : o <= 10
                              ? (E(e, 17, e.bl_tree), S(e, o - 3, 3))
                              : (E(e, 18, e.bl_tree), S(e, o - 11, 7));
                          (a = i),
                            (h =
                              (o = 0) === s
                                ? ((l = 138), 3)
                                : i === s
                                ? ((l = 6), 3)
                                : ((l = 7), 4));
                        }
                    }
                    i(v);
                    var L = !1;
                    function F(e, t, n, i) {
                      S(e, 0 + (i ? 1 : 0), 3),
                        (function (e, t, n, i) {
                          A(e),
                            x(e, n),
                            x(e, ~n),
                            r.arraySet(e.pending_buf, e.window, t, n, e.pending),
                            (e.pending += n);
                        })(e, t, n);
                    }
                    (n._tr_init = function (e) {
                      L ||
                        ((function () {
                          var e,
                            t,
                            n,
                            r,
                            i,
                            l = new Array(16);
                          for (r = n = 0; r < 28; r++)
                            for (f[r] = n, e = 0; e < 1 << a[r]; e++) d[n++] = r;
                          for (d[n - 1] = r, r = i = 0; r < 16; r++)
                            for (v[r] = i, e = 0; e < 1 << s[r]; e++) c[i++] = r;
                          for (i >>= 7; r < 30; r++)
                            for (v[r] = i << 7, e = 0; e < 1 << (s[r] - 7); e++)
                              c[256 + i++] = r;
                          for (t = 0; t <= 15; t++) l[t] = 0;
                          for (e = 0; e <= 143; ) (h[2 * e + 1] = 8), e++, l[8]++;
                          for (; e <= 255; ) (h[2 * e + 1] = 9), e++, l[9]++;
                          for (; e <= 279; ) (h[2 * e + 1] = 7), e++, l[7]++;
                          for (; e <= 287; ) (h[2 * e + 1] = 8), e++, l[8]++;
                          for (T(h, 287, l), e = 0; e < 30; e++)
                            (u[2 * e + 1] = 5), (u[2 * e] = w(e, 5));
                          (p = new y(h, a, 257, 286, 15)),
                            (m = new y(u, s, 0, 30, 15)),
                            (g = new y(new Array(0), o, 0, 19, 7));
                        })(),
                        (L = !0)),
                        (e.l_desc = new _(e.dyn_ltree, p)),
                        (e.d_desc = new _(e.dyn_dtree, m)),
                        (e.bl_desc = new _(e.bl_tree, g)),
                        (e.bi_buf = 0),
                        (e.bi_valid = 0),
                        M(e);
                    }),
                      (n._tr_stored_block = F),
                      (n._tr_flush_block = function (e, t, n, r) {
                        var i,
                          a,
                          s = 0;
                        0 < e.level
                          ? (2 === e.strm.data_type &&
                              (e.strm.data_type = (function (e) {
                                var t,
                                  n = 4093624447;
                                for (t = 0; t <= 31; t++, n >>>= 1)
                                  if (1 & n && 0 !== e.dyn_ltree[2 * t]) return 0;
                                if (
                                  0 !== e.dyn_ltree[18] ||
                                  0 !== e.dyn_ltree[20] ||
                                  0 !== e.dyn_ltree[26]
                                )
                                  return 1;
                                for (t = 32; t < 256; t++)
                                  if (0 !== e.dyn_ltree[2 * t]) return 1;
                                return 0;
                              })(e)),
                            R(e, e.l_desc),
                            R(e, e.d_desc),
                            (s = (function (e) {
                              var t;
                              for (
                                D(e, e.dyn_ltree, e.l_desc.max_code),
                                  D(e, e.dyn_dtree, e.d_desc.max_code),
                                  R(e, e.bl_desc),
                                  t = 18;
                                3 <= t && 0 === e.bl_tree[2 * l[t] + 1];
                                t--
                              );
                              return (e.opt_len += 3 * (t + 1) + 5 + 5 + 4), t;
                            })(e)),
                            (i = (e.opt_len + 3 + 7) >>> 3),
                            (a = (e.static_len + 3 + 7) >>> 3) <= i && (i = a))
                          : (i = a = n + 5),
                          n + 4 <= i && -1 !== t
                            ? F(e, t, n, r)
                            : 4 === e.strategy || a === i
                            ? (S(e, 2 + (r ? 1 : 0), 3), k(e, h, u))
                            : (S(e, 4 + (r ? 1 : 0), 3),
                              (function (e, t, n, r) {
                                var i;
                                for (
                                  S(e, t - 257, 5),
                                    S(e, n - 1, 5),
                                    S(e, r - 4, 4),
                                    i = 0;
                                  i < r;
                                  i++
                                )
                                  S(e, e.bl_tree[2 * l[i] + 1], 3);
                                I(e, e.dyn_ltree, t - 1),
                                  I(e, e.dyn_dtree, n - 1);
                              })(
                                e,
                                e.l_desc.max_code + 1,
                                e.d_desc.max_code + 1,
                                s + 1
                              ),
                              k(e, e.dyn_ltree, e.dyn_dtree)),
                          M(e),
                          r && A(e);
                      }),
                      (n._tr_tally = function (e, t, n) {
                        return (
                          (e.pending_buf[e.d_buf + 2 * e.last_lit] =
                            (t >>> 8) & 255),
                          (e.pending_buf[e.d_buf + 2 * e.last_lit + 1] = 255 & t),
                          (e.pending_buf[e.l_buf + e.last_lit] = 255 & n),
                          e.last_lit++,
                          0 === t
                            ? e.dyn_ltree[2 * n]++
                            : (e.matches++,
                              t--,
                              e.dyn_ltree[2 * (d[n] + 256 + 1)]++,
                              e.dyn_dtree[2 * b(t)]++),
                          e.last_lit === e.lit_bufsize - 1
                        );
                      }),
                      (n._tr_align = function (e) {
                        S(e, 2, 3),
                          E(e, 256, h),
                          (function (e) {
                            16 === e.bi_valid
                              ? (x(e, e.bi_buf), (e.bi_buf = 0), (e.bi_valid = 0))
                              : 8 <= e.bi_valid &&
                                ((e.pending_buf[e.pending++] = 255 & e.bi_buf),
                                (e.bi_buf >>= 8),
                                (e.bi_valid -= 8));
                          })(e);
                      });
                  },
                  { "../utils/common": 41 }
                ],
                53: [
                  function (e, t, n) {
                    "use strict";
                    t.exports = function () {
                      (this.input = null),
                        (this.next_in = 0),
                        (this.avail_in = 0),
                        (this.total_in = 0),
                        (this.output = null),
                        (this.next_out = 0),
                        (this.avail_out = 0),
                        (this.total_out = 0),
                        (this.msg = ""),
                        (this.state = null),
                        (this.data_type = 2),
                        (this.adler = 0);
                    };
                  },
                  {}
                ],
                54: [
                  function (e, t, r) {
                    (function (e) {
                      !(function (e, t) {
                        "use strict";
                        if (!e.setImmediate) {
                          var n,
                            r,
                            i,
                            a,
                            s = 1,
                            o = {},
                            l = !1,
                            h = e.document,
                            u = Object.getPrototypeOf && Object.getPrototypeOf(e);
                          (u = u && u.setTimeout ? u : e),
                            (n =
                              "[object process]" === {}.toString.call(e.process)
                                ? function (e) {
                                    process.nextTick(function () {
                                      d(e);
                                    });
                                  }
                                : (function () {
                                    if (e.postMessage && !e.importScripts) {
                                      var t = !0,
                                        n = e.onmessage;
                                      return (
                                        (e.onmessage = function () {
                                          t = !1;
                                        }),
                                        e.postMessage("", "*"),
                                        (e.onmessage = n),
                                        t
                                      );
                                    }
                                  })()
                                ? ((a = "setImmediate$" + Math.random() + "$"),
                                  e.addEventListener
                                    ? e.addEventListener("message", f, !1)
                                    : e.attachEvent("onmessage", f),
                                  function (t) {
                                    e.postMessage(a + t, "*");
                                  })
                                : e.MessageChannel
                                ? (((i = new MessageChannel()).port1.onmessage =
                                    function (e) {
                                      d(e.data);
                                    }),
                                  function (e) {
                                    i.port2.postMessage(e);
                                  })
                                : h &&
                                  "onreadystatechange" in
                                    h.createElement("script")
                                ? ((r = h.documentElement),
                                  function (e) {
                                    var t = h.createElement("script");
                                    (t.onreadystatechange = function () {
                                      d(e),
                                        (t.onreadystatechange = null),
                                        r.removeChild(t),
                                        (t = null);
                                    }),
                                      r.appendChild(t);
                                  })
                                : function (e) {
                                    setTimeout(d, 0, e);
                                  }),
                            (u.setImmediate = function (e) {
                              "function" != typeof e &&
                                (e = new Function("" + e));
                              for (
                                var t = new Array(arguments.length - 1), r = 0;
                                r < t.length;
                                r++
                              )
                                t[r] = arguments[r + 1];
                              var i = { callback: e, args: t };
                              return (o[s] = i), n(s), s++;
                            }),
                            (u.clearImmediate = c);
                        }
                        function c(e) {
                          delete o[e];
                        }
                        function d(e) {
                          if (l) setTimeout(d, 0, e);
                          else {
                            var t = o[e];
                            if (t) {
                              l = !0;
                              try {
                                !(function (e) {
                                  var t = e.callback,
                                    n = e.args;
                                  switch (n.length) {
                                    case 0:
                                      t();
                                      break;
                                    case 1:
                                      t(n[0]);
                                      break;
                                    case 2:
                                      t(n[0], n[1]);
                                      break;
                                    case 3:
                                      t(n[0], n[1], n[2]);
                                      break;
                                    default:
                                      t.apply(void 0, n);
                                  }
                                })(t);
                              } finally {
                                c(e), (l = !1);
                              }
                            }
                          }
                        }
                        function f(t) {
                          t.source === e &&
                            "string" == typeof t.data &&
                            0 === t.data.indexOf(a) &&
                            d(+t.data.slice(a.length));
                        }
                      })(
                        "undefined" == typeof self
                          ? void 0 === e
                            ? this
                            : e
                          : self
                      );
                    }).call(
                      this,
                      void 0 !== n.g
                        ? n.g
                        : "undefined" != typeof self
                        ? self
                        : "undefined" != typeof window
                        ? window
                        : {}
                    );
                  },
                  {}
                ]
              },
              {},
              [10]
            )(10);
          }),
            "object" == o(t)
              ? (e.exports = s())
              : ((i = []),
                void 0 ===
                  (a = "function" == typeof (r = s) ? r.apply(t, i) : r) ||
                  (e.exports = a));
        },
        196: function (module, exports, __webpack_require__) {
          var __WEBPACK_AMD_DEFINE_FACTORY__,
            __WEBPACK_AMD_DEFINE_RESULT__,
            factory;
          function _typeof2(e) {
            return (
              (_typeof2 =
                "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
                  ? function (e) {
                      return typeof e;
                    }
                  : function (e) {
                      return e &&
                        "function" == typeof Symbol &&
                        e.constructor === Symbol &&
                        e !== Symbol.prototype
                        ? "symbol"
                        : typeof e;
                    }),
              _typeof2(e)
            );
          }
          "undefined" != typeof navigator &&
            ((factory = function () {
              "use strict";
              var svgNS = "http://www.w3.org/2000/svg",
                locationHref = "",
                _useWebWorker = !1,
                initialDefaultFrame = -999999,
                setWebWorker = function (e) {
                  _useWebWorker = !!e;
                },
                getWebWorker = function () {
                  return _useWebWorker;
                },
                setLocationHref = function (e) {
                  locationHref = e;
                },
                getLocationHref = function () {
                  return locationHref;
                };
              function createTag(e) {
                return document.createElement(e);
              }
              function extendPrototype(e, t) {
                var n,
                  r,
                  i = e.length;
                for (n = 0; n < i; n += 1)
                  for (var a in (r = e[n].prototype))
                    Object.prototype.hasOwnProperty.call(r, a) &&
                      (t.prototype[a] = r[a]);
              }
              function getDescriptor(e, t) {
                return Object.getOwnPropertyDescriptor(e, t);
              }
              function createProxyFunction(e) {
                function t() {}
                return (t.prototype = e), t;
              }
              var audioControllerFactory = (function () {
                  function e(e) {
                    (this.audios = []),
                      (this.audioFactory = e),
                      (this._volume = 1),
                      (this._isMuted = !1);
                  }
                  return (
                    (e.prototype = {
                      addAudio: function (e) {
                        this.audios.push(e);
                      },
                      pause: function () {
                        var e,
                          t = this.audios.length;
                        for (e = 0; e < t; e += 1) this.audios[e].pause();
                      },
                      resume: function () {
                        var e,
                          t = this.audios.length;
                        for (e = 0; e < t; e += 1) this.audios[e].resume();
                      },
                      setRate: function (e) {
                        var t,
                          n = this.audios.length;
                        for (t = 0; t < n; t += 1) this.audios[t].setRate(e);
                      },
                      createAudio: function (e) {
                        return this.audioFactory
                          ? this.audioFactory(e)
                          : window.Howl
                          ? new window.Howl({ src: [e] })
                          : {
                              isPlaying: !1,
                              play: function () {
                                this.isPlaying = !0;
                              },
                              seek: function () {
                                this.isPlaying = !1;
                              },
                              playing: function () {},
                              rate: function () {},
                              setVolume: function () {}
                            };
                      },
                      setAudioFactory: function (e) {
                        this.audioFactory = e;
                      },
                      setVolume: function (e) {
                        (this._volume = e), this._updateVolume();
                      },
                      mute: function () {
                        (this._isMuted = !0), this._updateVolume();
                      },
                      unmute: function () {
                        (this._isMuted = !1), this._updateVolume();
                      },
                      getVolume: function () {
                        return this._volume;
                      },
                      _updateVolume: function () {
                        var e,
                          t = this.audios.length;
                        for (e = 0; e < t; e += 1)
                          this.audios[e].volume(
                            this._volume * (this._isMuted ? 0 : 1)
                          );
                      }
                    }),
                    function () {
                      return new e();
                    }
                  );
                })(),
                createTypedArray = (function () {
                  function e(e, t) {
                    var n,
                      r = 0,
                      i = [];
                    switch (e) {
                      case "int16":
                      case "uint8c":
                        n = 1;
                        break;
                      default:
                        n = 1.1;
                    }
                    for (r = 0; r < t; r += 1) i.push(n);
                    return i;
                  }
                  return "function" == typeof Uint8ClampedArray &&
                    "function" == typeof Float32Array
                    ? function (t, n) {
                        return "float32" === t
                          ? new Float32Array(n)
                          : "int16" === t
                          ? new Int16Array(n)
                          : "uint8c" === t
                          ? new Uint8ClampedArray(n)
                          : e(t, n);
                      }
                    : e;
                })();
              function createSizedArray(e) {
                return Array.apply(null, { length: e });
              }
              function _typeof$6(e) {
                return (
                  (_typeof$6 =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (e) {
                          return typeof e;
                        }
                      : function (e) {
                          return e &&
                            "function" == typeof Symbol &&
                            e.constructor === Symbol &&
                            e !== Symbol.prototype
                            ? "symbol"
                            : typeof e;
                        }),
                  _typeof$6(e)
                );
              }
              var subframeEnabled = !0,
                expressionsPlugin = null,
                expressionsInterfaces = null,
                idPrefix$1 = "",
                isSafari = /^((?!chrome|android).)*safari/i.test(
                  navigator.userAgent
                ),
                _shouldRoundValues = !1,
                bmPow = Math.pow,
                bmSqrt = Math.sqrt,
                bmFloor = Math.floor,
                bmMax = Math.max,
                bmMin = Math.min,
                BMMath = {};
              function ProjectInterface$1() {
                return {};
              }
              !(function () {
                var e,
                  t = [
                    "abs",
                    "acos",
                    "acosh",
                    "asin",
                    "asinh",
                    "atan",
                    "atanh",
                    "atan2",
                    "ceil",
                    "cbrt",
                    "expm1",
                    "clz32",
                    "cos",
                    "cosh",
                    "exp",
                    "floor",
                    "fround",
                    "hypot",
                    "imul",
                    "log",
                    "log1p",
                    "log2",
                    "log10",
                    "max",
                    "min",
                    "pow",
                    "random",
                    "round",
                    "sign",
                    "sin",
                    "sinh",
                    "sqrt",
                    "tan",
                    "tanh",
                    "trunc",
                    "E",
                    "LN10",
                    "LN2",
                    "LOG10E",
                    "LOG2E",
                    "PI",
                    "SQRT1_2",
                    "SQRT2"
                  ],
                  n = t.length;
                for (e = 0; e < n; e += 1) BMMath[t[e]] = Math[t[e]];
              })(),
                (BMMath.random = Math.random),
                (BMMath.abs = function (e) {
                  if ("object" === _typeof$6(e) && e.length) {
                    var t,
                      n = createSizedArray(e.length),
                      r = e.length;
                    for (t = 0; t < r; t += 1) n[t] = Math.abs(e[t]);
                    return n;
                  }
                  return Math.abs(e);
                });
              var defaultCurveSegments = 150,
                degToRads = Math.PI / 180,
                roundCorner = 0.5519;
              function roundValues(e) {
                _shouldRoundValues = !!e;
              }
              function bmRnd(e) {
                return _shouldRoundValues ? Math.round(e) : e;
              }
              function styleDiv(e) {
                (e.style.position = "absolute"),
                  (e.style.top = 0),
                  (e.style.left = 0),
                  (e.style.display = "block"),
                  (e.style.transformOrigin = "0 0"),
                  (e.style.webkitTransformOrigin = "0 0"),
                  (e.style.backfaceVisibility = "visible"),
                  (e.style.webkitBackfaceVisibility = "visible"),
                  (e.style.transformStyle = "preserve-3d"),
                  (e.style.webkitTransformStyle = "preserve-3d"),
                  (e.style.mozTransformStyle = "preserve-3d");
              }
              function BMEnterFrameEvent(e, t, n, r) {
                (this.type = e),
                  (this.currentTime = t),
                  (this.totalTime = n),
                  (this.direction = r < 0 ? -1 : 1);
              }
              function BMCompleteEvent(e, t) {
                (this.type = e), (this.direction = t < 0 ? -1 : 1);
              }
              function BMCompleteLoopEvent(e, t, n, r) {
                (this.type = e),
                  (this.currentLoop = n),
                  (this.totalLoops = t),
                  (this.direction = r < 0 ? -1 : 1);
              }
              function BMSegmentStartEvent(e, t, n) {
                (this.type = e), (this.firstFrame = t), (this.totalFrames = n);
              }
              function BMDestroyEvent(e, t) {
                (this.type = e), (this.target = t);
              }
              function BMRenderFrameErrorEvent(e, t) {
                (this.type = "renderFrameError"),
                  (this.nativeError = e),
                  (this.currentTime = t);
              }
              function BMConfigErrorEvent(e) {
                (this.type = "configError"), (this.nativeError = e);
              }
              function BMAnimationConfigErrorEvent(e, t) {
                (this.type = e), (this.nativeError = t);
              }
              var createElementID =
                  ((_count = 0),
                  function () {
                    return idPrefix$1 + "__lottie_element_" + (_count += 1);
                  }),
                _count;
              function HSVtoRGB(e, t, n) {
                var r, i, a, s, o, l, h, u;
                switch (
                  ((l = n * (1 - t)),
                  (h = n * (1 - (o = 6 * e - (s = Math.floor(6 * e))) * t)),
                  (u = n * (1 - (1 - o) * t)),
                  s % 6)
                ) {
                  case 0:
                    (r = n), (i = u), (a = l);
                    break;
                  case 1:
                    (r = h), (i = n), (a = l);
                    break;
                  case 2:
                    (r = l), (i = n), (a = u);
                    break;
                  case 3:
                    (r = l), (i = h), (a = n);
                    break;
                  case 4:
                    (r = u), (i = l), (a = n);
                    break;
                  case 5:
                    (r = n), (i = l), (a = h);
                }
                return [r, i, a];
              }
              function RGBtoHSV(e, t, n) {
                var r,
                  i = Math.max(e, t, n),
                  a = Math.min(e, t, n),
                  s = i - a,
                  o = 0 === i ? 0 : s / i,
                  l = i / 255;
                switch (i) {
                  case a:
                    r = 0;
                    break;
                  case e:
                    (r = t - n + s * (t < n ? 6 : 0)), (r /= 6 * s);
                    break;
                  case t:
                    (r = n - e + 2 * s), (r /= 6 * s);
                    break;
                  case n:
                    (r = e - t + 4 * s), (r /= 6 * s);
                }
                return [r, o, l];
              }
              function addSaturationToRGB(e, t) {
                var n = RGBtoHSV(255 * e[0], 255 * e[1], 255 * e[2]);
                return (
                  (n[1] += t),
                  n[1] > 1 ? (n[1] = 1) : n[1] <= 0 && (n[1] = 0),
                  HSVtoRGB(n[0], n[1], n[2])
                );
              }
              function addBrightnessToRGB(e, t) {
                var n = RGBtoHSV(255 * e[0], 255 * e[1], 255 * e[2]);
                return (
                  (n[2] += t),
                  n[2] > 1 ? (n[2] = 1) : n[2] < 0 && (n[2] = 0),
                  HSVtoRGB(n[0], n[1], n[2])
                );
              }
              function addHueToRGB(e, t) {
                var n = RGBtoHSV(255 * e[0], 255 * e[1], 255 * e[2]);
                return (
                  (n[0] += t / 360),
                  n[0] > 1 ? (n[0] -= 1) : n[0] < 0 && (n[0] += 1),
                  HSVtoRGB(n[0], n[1], n[2])
                );
              }
              var rgbToHex = (function () {
                  var e,
                    t,
                    n = [];
                  for (e = 0; e < 256; e += 1)
                    (t = e.toString(16)), (n[e] = 1 === t.length ? "0" + t : t);
                  return function (e, t, r) {
                    return (
                      e < 0 && (e = 0),
                      t < 0 && (t = 0),
                      r < 0 && (r = 0),
                      "#" + n[e] + n[t] + n[r]
                    );
                  };
                })(),
                setSubframeEnabled = function (e) {
                  subframeEnabled = !!e;
                },
                getSubframeEnabled = function () {
                  return subframeEnabled;
                },
                setExpressionsPlugin = function (e) {
                  expressionsPlugin = e;
                },
                getExpressionsPlugin = function () {
                  return expressionsPlugin;
                },
                setExpressionInterfaces = function (e) {
                  expressionsInterfaces = e;
                },
                getExpressionInterfaces = function () {
                  return expressionsInterfaces;
                },
                setDefaultCurveSegments = function (e) {
                  defaultCurveSegments = e;
                },
                getDefaultCurveSegments = function () {
                  return defaultCurveSegments;
                },
                setIdPrefix = function (e) {
                  idPrefix$1 = e;
                },
                getIdPrefix = function () {
                  return idPrefix$1;
                };
              function createNS(e) {
                return document.createElementNS(svgNS, e);
              }
              function _typeof$5(e) {
                return (
                  (_typeof$5 =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (e) {
                          return typeof e;
                        }
                      : function (e) {
                          return e &&
                            "function" == typeof Symbol &&
                            e.constructor === Symbol &&
                            e !== Symbol.prototype
                            ? "symbol"
                            : typeof e;
                        }),
                  _typeof$5(e)
                );
              }
              var dataManager = (function () {
                  var e,
                    t,
                    n = 1,
                    r = [],
                    i = {
                      onmessage: function () {},
                      postMessage: function (t) {
                        e({ data: t });
                      }
                    },
                    a = {
                      postMessage: function (e) {
                        i.onmessage({ data: e });
                      }
                    };
                  function s() {
                    t ||
                      ((t = (function (t) {
                        if (window.Worker && window.Blob && getWebWorker()) {
                          var n = new Blob(
                              [
                                "var _workerSelf = self; self.onmessage = ",
                                t.toString()
                              ],
                              { type: "text/javascript" }
                            ),
                            r = URL.createObjectURL(n);
                          return new Worker(r);
                        }
                        return (e = t), i;
                      })(function (e) {
                        if (
                          (a.dataManager ||
                            (a.dataManager = (function () {
                              function e(i, a) {
                                var s,
                                  o,
                                  l,
                                  h,
                                  u,
                                  c,
                                  d,
                                  f = i.length;
                                for (o = 0; o < f; o += 1)
                                  if ("ks" in (s = i[o]) && !s.completed) {
                                    if (((s.completed = !0), s.hasMask)) {
                                      var p = s.masksProperties;
                                      for (h = p.length, l = 0; l < h; l += 1)
                                        if (p[l].pt.k.i) r(p[l].pt.k);
                                        else
                                          for (
                                            c = p[l].pt.k.length, u = 0;
                                            u < c;
                                            u += 1
                                          )
                                            p[l].pt.k[u].s &&
                                              r(p[l].pt.k[u].s[0]),
                                              p[l].pt.k[u].e &&
                                                r(p[l].pt.k[u].e[0]);
                                    }
                                    0 === s.ty
                                      ? ((s.layers = t(s.refId, a)),
                                        e(s.layers, a))
                                      : 4 === s.ty
                                      ? n(s.shapes)
                                      : 5 === s.ty &&
                                        0 === (d = s).t.a.length &&
                                        d.t.p;
                                  }
                              }
                              function t(e, t) {
                                var n = (function (e, t) {
                                  for (var n = 0, r = t.length; n < r; ) {
                                    if (t[n].id === e) return t[n];
                                    n += 1;
                                  }
                                  return null;
                                })(e, t);
                                return n
                                  ? n.layers.__used
                                    ? JSON.parse(JSON.stringify(n.layers))
                                    : ((n.layers.__used = !0), n.layers)
                                  : null;
                              }
                              function n(e) {
                                var t, i, a;
                                for (t = e.length - 1; t >= 0; t -= 1)
                                  if ("sh" === e[t].ty) {
                                    if (e[t].ks.k.i) r(e[t].ks.k);
                                    else
                                      for (
                                        a = e[t].ks.k.length, i = 0;
                                        i < a;
                                        i += 1
                                      )
                                        e[t].ks.k[i].s && r(e[t].ks.k[i].s[0]),
                                          e[t].ks.k[i].e && r(e[t].ks.k[i].e[0]);
                                  } else "gr" === e[t].ty && n(e[t].it);
                              }
                              function r(e) {
                                var t,
                                  n = e.i.length;
                                for (t = 0; t < n; t += 1)
                                  (e.i[t][0] += e.v[t][0]),
                                    (e.i[t][1] += e.v[t][1]),
                                    (e.o[t][0] += e.v[t][0]),
                                    (e.o[t][1] += e.v[t][1]);
                              }
                              function i(e, t) {
                                var n = t ? t.split(".") : [100, 100, 100];
                                return (
                                  e[0] > n[0] ||
                                  (!(n[0] > e[0]) &&
                                    (e[1] > n[1] ||
                                      (!(n[1] > e[1]) &&
                                        (e[2] > n[2] ||
                                          (!(n[2] > e[2]) && null)))))
                                );
                              }
                              var a,
                                s = (function () {
                                  var e = [4, 4, 14];
                                  function t(e) {
                                    var t,
                                      n,
                                      r,
                                      i = e.length;
                                    for (t = 0; t < i; t += 1)
                                      5 === e[t].ty &&
                                        (void 0,
                                        (r = (n = e[t]).t.d),
                                        (n.t.d = { k: [{ s: r, t: 0 }] }));
                                  }
                                  return function (n) {
                                    if (i(e, n.v) && (t(n.layers), n.assets)) {
                                      var r,
                                        a = n.assets.length;
                                      for (r = 0; r < a; r += 1)
                                        n.assets[r].layers &&
                                          t(n.assets[r].layers);
                                    }
                                  };
                                })(),
                                o =
                                  ((a = [4, 7, 99]),
                                  function (e) {
                                    if (e.chars && !i(a, e.v)) {
                                      var t,
                                        r = e.chars.length;
                                      for (t = 0; t < r; t += 1) {
                                        var s = e.chars[t];
                                        s.data &&
                                          s.data.shapes &&
                                          (n(s.data.shapes),
                                          (s.data.ip = 0),
                                          (s.data.op = 99999),
                                          (s.data.st = 0),
                                          (s.data.sr = 1),
                                          (s.data.ks = {
                                            p: { k: [0, 0], a: 0 },
                                            s: { k: [100, 100], a: 0 },
                                            a: { k: [0, 0], a: 0 },
                                            r: { k: 0, a: 0 },
                                            o: { k: 100, a: 0 }
                                          }),
                                          e.chars[t].t ||
                                            (s.data.shapes.push({ ty: "no" }),
                                            s.data.shapes[0].it.push({
                                              p: { k: [0, 0], a: 0 },
                                              s: { k: [100, 100], a: 0 },
                                              a: { k: [0, 0], a: 0 },
                                              r: { k: 0, a: 0 },
                                              o: { k: 100, a: 0 },
                                              sk: { k: 0, a: 0 },
                                              sa: { k: 0, a: 0 },
                                              ty: "tr"
                                            })));
                                      }
                                    }
                                  }),
                                l = (function () {
                                  var e = [5, 7, 15];
                                  function t(e) {
                                    var t,
                                      n,
                                      r = e.length;
                                    for (t = 0; t < r; t += 1)
                                      5 === e[t].ty &&
                                        ((n = void 0),
                                        "number" == typeof (n = e[t].t.p).a &&
                                          (n.a = { a: 0, k: n.a }),
                                        "number" == typeof n.p &&
                                          (n.p = { a: 0, k: n.p }),
                                        "number" == typeof n.r &&
                                          (n.r = { a: 0, k: n.r }));
                                  }
                                  return function (n) {
                                    if (i(e, n.v) && (t(n.layers), n.assets)) {
                                      var r,
                                        a = n.assets.length;
                                      for (r = 0; r < a; r += 1)
                                        n.assets[r].layers &&
                                          t(n.assets[r].layers);
                                    }
                                  };
                                })(),
                                h = (function () {
                                  var e = [4, 1, 9];
                                  function t(e) {
                                    var n,
                                      r,
                                      i,
                                      a = e.length;
                                    for (n = 0; n < a; n += 1)
                                      if ("gr" === e[n].ty) t(e[n].it);
                                      else if (
                                        "fl" === e[n].ty ||
                                        "st" === e[n].ty
                                      )
                                        if (e[n].c.k && e[n].c.k[0].i)
                                          for (
                                            i = e[n].c.k.length, r = 0;
                                            r < i;
                                            r += 1
                                          )
                                            e[n].c.k[r].s &&
                                              ((e[n].c.k[r].s[0] /= 255),
                                              (e[n].c.k[r].s[1] /= 255),
                                              (e[n].c.k[r].s[2] /= 255),
                                              (e[n].c.k[r].s[3] /= 255)),
                                              e[n].c.k[r].e &&
                                                ((e[n].c.k[r].e[0] /= 255),
                                                (e[n].c.k[r].e[1] /= 255),
                                                (e[n].c.k[r].e[2] /= 255),
                                                (e[n].c.k[r].e[3] /= 255));
                                        else
                                          (e[n].c.k[0] /= 255),
                                            (e[n].c.k[1] /= 255),
                                            (e[n].c.k[2] /= 255),
                                            (e[n].c.k[3] /= 255);
                                  }
                                  function n(e) {
                                    var n,
                                      r = e.length;
                                    for (n = 0; n < r; n += 1)
                                      4 === e[n].ty && t(e[n].shapes);
                                  }
                                  return function (t) {
                                    if (i(e, t.v) && (n(t.layers), t.assets)) {
                                      var r,
                                        a = t.assets.length;
                                      for (r = 0; r < a; r += 1)
                                        t.assets[r].layers &&
                                          n(t.assets[r].layers);
                                    }
                                  };
                                })(),
                                u = (function () {
                                  var e = [4, 4, 18];
                                  function t(e) {
                                    var n, r, i;
                                    for (n = e.length - 1; n >= 0; n -= 1)
                                      if ("sh" === e[n].ty) {
                                        if (e[n].ks.k.i)
                                          e[n].ks.k.c = e[n].closed;
                                        else
                                          for (
                                            i = e[n].ks.k.length, r = 0;
                                            r < i;
                                            r += 1
                                          )
                                            e[n].ks.k[r].s &&
                                              (e[n].ks.k[r].s[0].c = e[n].closed),
                                              e[n].ks.k[r].e &&
                                                (e[n].ks.k[r].e[0].c =
                                                  e[n].closed);
                                      } else "gr" === e[n].ty && t(e[n].it);
                                  }
                                  function n(e) {
                                    var n,
                                      r,
                                      i,
                                      a,
                                      s,
                                      o,
                                      l = e.length;
                                    for (r = 0; r < l; r += 1) {
                                      if ((n = e[r]).hasMask) {
                                        var h = n.masksProperties;
                                        for (a = h.length, i = 0; i < a; i += 1)
                                          if (h[i].pt.k.i) h[i].pt.k.c = h[i].cl;
                                          else
                                            for (
                                              o = h[i].pt.k.length, s = 0;
                                              s < o;
                                              s += 1
                                            )
                                              h[i].pt.k[s].s &&
                                                (h[i].pt.k[s].s[0].c = h[i].cl),
                                                h[i].pt.k[s].e &&
                                                  (h[i].pt.k[s].e[0].c = h[i].cl);
                                      }
                                      4 === n.ty && t(n.shapes);
                                    }
                                  }
                                  return function (t) {
                                    if (i(e, t.v) && (n(t.layers), t.assets)) {
                                      var r,
                                        a = t.assets.length;
                                      for (r = 0; r < a; r += 1)
                                        t.assets[r].layers &&
                                          n(t.assets[r].layers);
                                    }
                                  };
                                })();
                              var c = {
                                completeData: function (n) {
                                  n.__complete ||
                                    (h(n),
                                    s(n),
                                    o(n),
                                    l(n),
                                    u(n),
                                    e(n.layers, n.assets),
                                    (function (n, r) {
                                      if (n) {
                                        var i = 0,
                                          a = n.length;
                                        for (i = 0; i < a; i += 1)
                                          1 === n[i].t &&
                                            ((n[i].data.layers = t(
                                              n[i].data.refId,
                                              r
                                            )),
                                            e(n[i].data.layers, r));
                                      }
                                    })(n.chars, n.assets),
                                    (n.__complete = !0));
                                }
                              };
                              return (
                                (c.checkColors = h),
                                (c.checkChars = o),
                                (c.checkPathProperties = l),
                                (c.checkShapes = u),
                                (c.completeLayers = e),
                                c
                              );
                            })()),
                          a.assetLoader ||
                            (a.assetLoader = (function () {
                              function e(e) {
                                var t = e.getResponseHeader("content-type");
                                return (t &&
                                  "json" === e.responseType &&
                                  -1 !== t.indexOf("json")) ||
                                  (e.response &&
                                    "object" === _typeof$5(e.response))
                                  ? e.response
                                  : e.response && "string" == typeof e.response
                                  ? JSON.parse(e.response)
                                  : e.responseText
                                  ? JSON.parse(e.responseText)
                                  : null;
                              }
                              return {
                                load: function (t, n, r, i) {
                                  var a,
                                    s = new XMLHttpRequest();
                                  try {
                                    s.responseType = "json";
                                  } catch (e) {}
                                  s.onreadystatechange = function () {
                                    if (4 === s.readyState)
                                      if (200 === s.status) (a = e(s)), r(a);
                                      else
                                        try {
                                          (a = e(s)), r(a);
                                        } catch (e) {
                                          i && i(e);
                                        }
                                  };
                                  try {
                                    s.open(["G", "E", "T"].join(""), t, !0);
                                  } catch (e) {
                                    s.open(
                                      ["G", "E", "T"].join(""),
                                      n + "/" + t,
                                      !0
                                    );
                                  }
                                  s.send();
                                }
                              };
                            })()),
                          "loadAnimation" === e.data.type)
                        )
                          a.assetLoader.load(
                            e.data.path,
                            e.data.fullPath,
                            function (t) {
                              a.dataManager.completeData(t),
                                a.postMessage({
                                  id: e.data.id,
                                  payload: t,
                                  status: "success"
                                });
                            },
                            function () {
                              a.postMessage({ id: e.data.id, status: "error" });
                            }
                          );
                        else if ("complete" === e.data.type) {
                          var t = e.data.animation;
                          a.dataManager.completeData(t),
                            a.postMessage({
                              id: e.data.id,
                              payload: t,
                              status: "success"
                            });
                        } else
                          "loadData" === e.data.type &&
                            a.assetLoader.load(
                              e.data.path,
                              e.data.fullPath,
                              function (t) {
                                a.postMessage({
                                  id: e.data.id,
                                  payload: t,
                                  status: "success"
                                });
                              },
                              function () {
                                a.postMessage({ id: e.data.id, status: "error" });
                              }
                            );
                      })),
                      (t.onmessage = function (e) {
                        var t = e.data,
                          n = t.id,
                          i = r[n];
                        (r[n] = null),
                          "success" === t.status
                            ? i.onComplete(t.payload)
                            : i.onError && i.onError();
                      }));
                  }
                  function o(e, t) {
                    var i = "processId_" + (n += 1);
                    return (r[i] = { onComplete: e, onError: t }), i;
                  }
                  return {
                    loadAnimation: function (e, n, r) {
                      s();
                      var i = o(n, r);
                      t.postMessage({
                        type: "loadAnimation",
                        path: e,
                        fullPath:
                          window.location.origin + window.location.pathname,
                        id: i
                      });
                    },
                    loadData: function (e, n, r) {
                      s();
                      var i = o(n, r);
                      t.postMessage({
                        type: "loadData",
                        path: e,
                        fullPath:
                          window.location.origin + window.location.pathname,
                        id: i
                      });
                    },
                    completeAnimation: function (e, n, r) {
                      s();
                      var i = o(n, r);
                      t.postMessage({ type: "complete", animation: e, id: i });
                    }
                  };
                })(),
                ImagePreloader = (function () {
                  var e = (function () {
                    var e = createTag("canvas");
                    (e.width = 1), (e.height = 1);
                    var t = e.getContext("2d");
                    return (
                      (t.fillStyle = "rgba(0,0,0,0)"), t.fillRect(0, 0, 1, 1), e
                    );
                  })();
                  function t() {
                    (this.loadedAssets += 1),
                      this.loadedAssets === this.totalImages &&
                        this.loadedFootagesCount === this.totalFootages &&
                        this.imagesLoadedCb &&
                        this.imagesLoadedCb(null);
                  }
                  function n() {
                    (this.loadedFootagesCount += 1),
                      this.loadedAssets === this.totalImages &&
                        this.loadedFootagesCount === this.totalFootages &&
                        this.imagesLoadedCb &&
                        this.imagesLoadedCb(null);
                  }
                  function r(e, t, n) {
                    var r = "";
                    if (e.e) r = e.p;
                    else if (t) {
                      var i = e.p;
                      -1 !== i.indexOf("images/") && (i = i.split("/")[1]),
                        (r = t + i);
                    } else (r = n), (r += e.u ? e.u : ""), (r += e.p);
                    return r;
                  }
                  function i(e) {
                    var t = 0,
                      n = setInterval(
                        function () {
                          (e.getBBox().width || t > 500) &&
                            (this._imageLoaded(), clearInterval(n)),
                            (t += 1);
                        }.bind(this),
                        50
                      );
                  }
                  function a(e) {
                    var t = { assetData: e },
                      n = r(e, this.assetsPath, this.path);
                    return (
                      dataManager.loadData(
                        n,
                        function (e) {
                          (t.img = e), this._footageLoaded();
                        }.bind(this),
                        function () {
                          (t.img = {}), this._footageLoaded();
                        }.bind(this)
                      ),
                      t
                    );
                  }
                  function s() {
                    (this._imageLoaded = t.bind(this)),
                      (this._footageLoaded = n.bind(this)),
                      (this.testImageLoaded = i.bind(this)),
                      (this.createFootageData = a.bind(this)),
                      (this.assetsPath = ""),
                      (this.path = ""),
                      (this.totalImages = 0),
                      (this.totalFootages = 0),
                      (this.loadedAssets = 0),
                      (this.loadedFootagesCount = 0),
                      (this.imagesLoadedCb = null),
                      (this.images = []);
                  }
                  return (
                    (s.prototype = {
                      loadAssets: function (e, t) {
                        var n;
                        this.imagesLoadedCb = t;
                        var r = e.length;
                        for (n = 0; n < r; n += 1)
                          e[n].layers ||
                            (e[n].t && "seq" !== e[n].t
                              ? 3 === e[n].t &&
                                ((this.totalFootages += 1),
                                this.images.push(this.createFootageData(e[n])))
                              : ((this.totalImages += 1),
                                this.images.push(this._createImageData(e[n]))));
                      },
                      setAssetsPath: function (e) {
                        this.assetsPath = e || "";
                      },
                      setPath: function (e) {
                        this.path = e || "";
                      },
                      loadedImages: function () {
                        return this.totalImages === this.loadedAssets;
                      },
                      loadedFootages: function () {
                        return this.totalFootages === this.loadedFootagesCount;
                      },
                      destroy: function () {
                        (this.imagesLoadedCb = null), (this.images.length = 0);
                      },
                      getAsset: function (e) {
                        for (var t = 0, n = this.images.length; t < n; ) {
                          if (this.images[t].assetData === e)
                            return this.images[t].img;
                          t += 1;
                        }
                        return null;
                      },
                      createImgData: function (t) {
                        var n = r(t, this.assetsPath, this.path),
                          i = createTag("img");
                        (i.crossOrigin = "anonymous"),
                          i.addEventListener("load", this._imageLoaded, !1),
                          i.addEventListener(
                            "error",
                            function () {
                              (a.img = e), this._imageLoaded();
                            }.bind(this),
                            !1
                          ),
                          (i.src = n);
                        var a = { img: i, assetData: t };
                        return a;
                      },
                      createImageData: function (t) {
                        var n = r(t, this.assetsPath, this.path),
                          i = createNS("image");
                        isSafari
                          ? this.testImageLoaded(i)
                          : i.addEventListener("load", this._imageLoaded, !1),
                          i.addEventListener(
                            "error",
                            function () {
                              (a.img = e), this._imageLoaded();
                            }.bind(this),
                            !1
                          ),
                          i.setAttributeNS(
                            "http://www.w3.org/1999/xlink",
                            "href",
                            n
                          ),
                          this._elementHelper.append
                            ? this._elementHelper.append(i)
                            : this._elementHelper.appendChild(i);
                        var a = { img: i, assetData: t };
                        return a;
                      },
                      imageLoaded: t,
                      footageLoaded: n,
                      setCacheType: function (e, t) {
                        "svg" === e
                          ? ((this._elementHelper = t),
                            (this._createImageData =
                              this.createImageData.bind(this)))
                          : (this._createImageData =
                              this.createImgData.bind(this));
                      }
                    }),
                    s
                  );
                })();
              function BaseEvent() {}
              BaseEvent.prototype = {
                triggerEvent: function (e, t) {
                  if (this._cbs[e])
                    for (var n = this._cbs[e], r = 0; r < n.length; r += 1)
                      n[r](t);
                },
                addEventListener: function (e, t) {
                  return (
                    this._cbs[e] || (this._cbs[e] = []),
                    this._cbs[e].push(t),
                    function () {
                      this.removeEventListener(e, t);
                    }.bind(this)
                  );
                },
                removeEventListener: function (e, t) {
                  if (t) {
                    if (this._cbs[e]) {
                      for (var n = 0, r = this._cbs[e].length; n < r; )
                        this._cbs[e][n] === t &&
                          (this._cbs[e].splice(n, 1), (n -= 1), (r -= 1)),
                          (n += 1);
                      this._cbs[e].length || (this._cbs[e] = null);
                    }
                  } else this._cbs[e] = null;
                }
              };
              var markerParser = (function () {
                  function e(e) {
                    for (
                      var t, n = e.split("\r\n"), r = {}, i = 0, a = 0;
                      a < n.length;
                      a += 1
                    )
                      2 === (t = n[a].split(":")).length &&
                        ((r[t[0]] = t[1].trim()), (i += 1));
                    if (0 === i) throw new Error();
                    return r;
                  }
                  return function (t) {
                    for (var n = [], r = 0; r < t.length; r += 1) {
                      var i = t[r],
                        a = { time: i.tm, duration: i.dr };
                      try {
                        a.payload = JSON.parse(t[r].cm);
                      } catch (n) {
                        try {
                          a.payload = e(t[r].cm);
                        } catch (e) {
                          a.payload = { name: t[r].cm };
                        }
                      }
                      n.push(a);
                    }
                    return n;
                  };
                })(),
                ProjectInterface = (function () {
                  function e(e) {
                    this.compositions.push(e);
                  }
                  return function () {
                    function t(e) {
                      for (var t = 0, n = this.compositions.length; t < n; ) {
                        if (
                          this.compositions[t].data &&
                          this.compositions[t].data.nm === e
                        )
                          return (
                            this.compositions[t].prepareFrame &&
                              this.compositions[t].data.xt &&
                              this.compositions[t].prepareFrame(
                                this.currentFrame
                              ),
                            this.compositions[t].compInterface
                          );
                        t += 1;
                      }
                      return null;
                    }
                    return (
                      (t.compositions = []),
                      (t.currentFrame = 0),
                      (t.registerComposition = e),
                      t
                    );
                  };
                })(),
                renderers = {},
                registerRenderer = function (e, t) {
                  renderers[e] = t;
                };
              function getRenderer(e) {
                return renderers[e];
              }
              function getRegisteredRenderer() {
                if (renderers.canvas) return "canvas";
                for (var e in renderers) if (renderers[e]) return e;
                return "";
              }
              function _typeof$4(e) {
                return (
                  (_typeof$4 =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (e) {
                          return typeof e;
                        }
                      : function (e) {
                          return e &&
                            "function" == typeof Symbol &&
                            e.constructor === Symbol &&
                            e !== Symbol.prototype
                            ? "symbol"
                            : typeof e;
                        }),
                  _typeof$4(e)
                );
              }
              var AnimationItem = function () {
                (this._cbs = []),
                  (this.name = ""),
                  (this.path = ""),
                  (this.isLoaded = !1),
                  (this.currentFrame = 0),
                  (this.currentRawFrame = 0),
                  (this.firstFrame = 0),
                  (this.totalFrames = 0),
                  (this.frameRate = 0),
                  (this.frameMult = 0),
                  (this.playSpeed = 1),
                  (this.playDirection = 1),
                  (this.playCount = 0),
                  (this.animationData = {}),
                  (this.assets = []),
                  (this.isPaused = !0),
                  (this.autoplay = !1),
                  (this.loop = !0),
                  (this.renderer = null),
                  (this.animationID = createElementID()),
                  (this.assetsPath = ""),
                  (this.timeCompleted = 0),
                  (this.segmentPos = 0),
                  (this.isSubframeEnabled = getSubframeEnabled()),
                  (this.segments = []),
                  (this._idle = !0),
                  (this._completedLoop = !1),
                  (this.projectInterface = ProjectInterface()),
                  (this.imagePreloader = new ImagePreloader()),
                  (this.audioController = audioControllerFactory()),
                  (this.markers = []),
                  (this.configAnimation = this.configAnimation.bind(this)),
                  (this.onSetupError = this.onSetupError.bind(this)),
                  (this.onSegmentComplete = this.onSegmentComplete.bind(this)),
                  (this.drawnFrameEvent = new BMEnterFrameEvent(
                    "drawnFrame",
                    0,
                    0,
                    0
                  )),
                  (this.expressionsPlugin = getExpressionsPlugin());
              };
              extendPrototype([BaseEvent], AnimationItem),
                (AnimationItem.prototype.setParams = function (e) {
                  (e.wrapper || e.container) &&
                    (this.wrapper = e.wrapper || e.container);
                  var t = "svg";
                  e.animType ? (t = e.animType) : e.renderer && (t = e.renderer);
                  var n = getRenderer(t);
                  (this.renderer = new n(this, e.rendererSettings)),
                    this.imagePreloader.setCacheType(
                      t,
                      this.renderer.globalData.defs
                    ),
                    this.renderer.setProjectInterface(this.projectInterface),
                    (this.animType = t),
                    "" === e.loop ||
                    null === e.loop ||
                    void 0 === e.loop ||
                    !0 === e.loop
                      ? (this.loop = !0)
                      : !1 === e.loop
                      ? (this.loop = !1)
                      : (this.loop = parseInt(e.loop, 10)),
                    (this.autoplay = !("autoplay" in e) || e.autoplay),
                    (this.name = e.name ? e.name : ""),
                    (this.autoloadSegments =
                      !Object.prototype.hasOwnProperty.call(
                        e,
                        "autoloadSegments"
                      ) || e.autoloadSegments),
                    (this.assetsPath = e.assetsPath),
                    (this.initialSegment = e.initialSegment),
                    e.audioFactory &&
                      this.audioController.setAudioFactory(e.audioFactory),
                    e.animationData
                      ? this.setupAnimation(e.animationData)
                      : e.path &&
                        (-1 !== e.path.lastIndexOf("\\")
                          ? (this.path = e.path.substr(
                              0,
                              e.path.lastIndexOf("\\") + 1
                            ))
                          : (this.path = e.path.substr(
                              0,
                              e.path.lastIndexOf("/") + 1
                            )),
                        (this.fileName = e.path.substr(
                          e.path.lastIndexOf("/") + 1
                        )),
                        (this.fileName = this.fileName.substr(
                          0,
                          this.fileName.lastIndexOf(".json")
                        )),
                        dataManager.loadAnimation(
                          e.path,
                          this.configAnimation,
                          this.onSetupError
                        ));
                }),
                (AnimationItem.prototype.onSetupError = function () {
                  this.trigger("data_failed");
                }),
                (AnimationItem.prototype.setupAnimation = function (e) {
                  dataManager.completeAnimation(e, this.configAnimation);
                }),
                (AnimationItem.prototype.setData = function (e, t) {
                  t && "object" !== _typeof$4(t) && (t = JSON.parse(t));
                  var n = { wrapper: e, animationData: t },
                    r = e.attributes;
                  (n.path = r.getNamedItem("data-animation-path")
                    ? r.getNamedItem("data-animation-path").value
                    : r.getNamedItem("data-bm-path")
                    ? r.getNamedItem("data-bm-path").value
                    : r.getNamedItem("bm-path")
                    ? r.getNamedItem("bm-path").value
                    : ""),
                    (n.animType = r.getNamedItem("data-anim-type")
                      ? r.getNamedItem("data-anim-type").value
                      : r.getNamedItem("data-bm-type")
                      ? r.getNamedItem("data-bm-type").value
                      : r.getNamedItem("bm-type")
                      ? r.getNamedItem("bm-type").value
                      : r.getNamedItem("data-bm-renderer")
                      ? r.getNamedItem("data-bm-renderer").value
                      : r.getNamedItem("bm-renderer")
                      ? r.getNamedItem("bm-renderer").value
                      : getRegisteredRenderer() || "canvas");
                  var i = r.getNamedItem("data-anim-loop")
                    ? r.getNamedItem("data-anim-loop").value
                    : r.getNamedItem("data-bm-loop")
                    ? r.getNamedItem("data-bm-loop").value
                    : r.getNamedItem("bm-loop")
                    ? r.getNamedItem("bm-loop").value
                    : "";
                  "false" === i
                    ? (n.loop = !1)
                    : "true" === i
                    ? (n.loop = !0)
                    : "" !== i && (n.loop = parseInt(i, 10));
                  var a = r.getNamedItem("data-anim-autoplay")
                    ? r.getNamedItem("data-anim-autoplay").value
                    : r.getNamedItem("data-bm-autoplay")
                    ? r.getNamedItem("data-bm-autoplay").value
                    : !r.getNamedItem("bm-autoplay") ||
                      r.getNamedItem("bm-autoplay").value;
                  (n.autoplay = "false" !== a),
                    (n.name = r.getNamedItem("data-name")
                      ? r.getNamedItem("data-name").value
                      : r.getNamedItem("data-bm-name")
                      ? r.getNamedItem("data-bm-name").value
                      : r.getNamedItem("bm-name")
                      ? r.getNamedItem("bm-name").value
                      : ""),
                    "false" ===
                      (r.getNamedItem("data-anim-prerender")
                        ? r.getNamedItem("data-anim-prerender").value
                        : r.getNamedItem("data-bm-prerender")
                        ? r.getNamedItem("data-bm-prerender").value
                        : r.getNamedItem("bm-prerender")
                        ? r.getNamedItem("bm-prerender").value
                        : "") && (n.prerender = !1),
                    n.path ? this.setParams(n) : this.trigger("destroy");
                }),
                (AnimationItem.prototype.includeLayers = function (e) {
                  e.op > this.animationData.op &&
                    ((this.animationData.op = e.op),
                    (this.totalFrames = Math.floor(
                      e.op - this.animationData.ip
                    )));
                  var t,
                    n,
                    r = this.animationData.layers,
                    i = r.length,
                    a = e.layers,
                    s = a.length;
                  for (n = 0; n < s; n += 1)
                    for (t = 0; t < i; ) {
                      if (r[t].id === a[n].id) {
                        r[t] = a[n];
                        break;
                      }
                      t += 1;
                    }
                  if (
                    ((e.chars || e.fonts) &&
                      (this.renderer.globalData.fontManager.addChars(e.chars),
                      this.renderer.globalData.fontManager.addFonts(
                        e.fonts,
                        this.renderer.globalData.defs
                      )),
                    e.assets)
                  )
                    for (i = e.assets.length, t = 0; t < i; t += 1)
                      this.animationData.assets.push(e.assets[t]);
                  (this.animationData.__complete = !1),
                    dataManager.completeAnimation(
                      this.animationData,
                      this.onSegmentComplete
                    );
                }),
                (AnimationItem.prototype.onSegmentComplete = function (e) {
                  this.animationData = e;
                  var t = getExpressionsPlugin();
                  t && t.initExpressions(this), this.loadNextSegment();
                }),
                (AnimationItem.prototype.loadNextSegment = function () {
                  var e = this.animationData.segments;
                  if (!e || 0 === e.length || !this.autoloadSegments)
                    return (
                      this.trigger("data_ready"),
                      void (this.timeCompleted = this.totalFrames)
                    );
                  var t = e.shift();
                  this.timeCompleted = t.time * this.frameRate;
                  var n =
                    this.path + this.fileName + "_" + this.segmentPos + ".json";
                  (this.segmentPos += 1),
                    dataManager.loadData(
                      n,
                      this.includeLayers.bind(this),
                      function () {
                        this.trigger("data_failed");
                      }.bind(this)
                    );
                }),
                (AnimationItem.prototype.loadSegments = function () {
                  this.animationData.segments ||
                    (this.timeCompleted = this.totalFrames),
                    this.loadNextSegment();
                }),
                (AnimationItem.prototype.imagesLoaded = function () {
                  this.trigger("loaded_images"), this.checkLoaded();
                }),
                (AnimationItem.prototype.preloadImages = function () {
                  this.imagePreloader.setAssetsPath(this.assetsPath),
                    this.imagePreloader.setPath(this.path),
                    this.imagePreloader.loadAssets(
                      this.animationData.assets,
                      this.imagesLoaded.bind(this)
                    );
                }),
                (AnimationItem.prototype.configAnimation = function (e) {
                  if (this.renderer)
                    try {
                      (this.animationData = e),
                        this.initialSegment
                          ? ((this.totalFrames = Math.floor(
                              this.initialSegment[1] - this.initialSegment[0]
                            )),
                            (this.firstFrame = Math.round(
                              this.initialSegment[0]
                            )))
                          : ((this.totalFrames = Math.floor(
                              this.animationData.op - this.animationData.ip
                            )),
                            (this.firstFrame = Math.round(
                              this.animationData.ip
                            ))),
                        this.renderer.configAnimation(e),
                        e.assets || (e.assets = []),
                        (this.assets = this.animationData.assets),
                        (this.frameRate = this.animationData.fr),
                        (this.frameMult = this.animationData.fr / 1e3),
                        this.renderer.searchExtraCompositions(e.assets),
                        (this.markers = markerParser(e.markers || [])),
                        this.trigger("config_ready"),
                        this.preloadImages(),
                        this.loadSegments(),
                        this.updaFrameModifier(),
                        this.waitForFontsLoaded(),
                        this.isPaused && this.audioController.pause();
                    } catch (e) {
                      this.triggerConfigError(e);
                    }
                }),
                (AnimationItem.prototype.waitForFontsLoaded = function () {
                  this.renderer &&
                    (this.renderer.globalData.fontManager.isLoaded
                      ? this.checkLoaded()
                      : setTimeout(this.waitForFontsLoaded.bind(this), 20));
                }),
                (AnimationItem.prototype.checkLoaded = function () {
                  if (
                    !this.isLoaded &&
                    this.renderer.globalData.fontManager.isLoaded &&
                    (this.imagePreloader.loadedImages() ||
                      "canvas" !== this.renderer.rendererType) &&
                    this.imagePreloader.loadedFootages()
                  ) {
                    this.isLoaded = !0;
                    var e = getExpressionsPlugin();
                    e && e.initExpressions(this),
                      this.renderer.initItems(),
                      setTimeout(
                        function () {
                          this.trigger("DOMLoaded");
                        }.bind(this),
                        0
                      ),
                      this.gotoFrame(),
                      this.autoplay && this.play();
                  }
                }),
                (AnimationItem.prototype.resize = function (e, t) {
                  var n = "number" == typeof e ? e : void 0,
                    r = "number" == typeof t ? t : void 0;
                  this.renderer.updateContainerSize(n, r);
                }),
                (AnimationItem.prototype.setSubframe = function (e) {
                  this.isSubframeEnabled = !!e;
                }),
                (AnimationItem.prototype.gotoFrame = function () {
                  (this.currentFrame = this.isSubframeEnabled
                    ? this.currentRawFrame
                    : ~~this.currentRawFrame),
                    this.timeCompleted !== this.totalFrames &&
                      this.currentFrame > this.timeCompleted &&
                      (this.currentFrame = this.timeCompleted),
                    this.trigger("enterFrame"),
                    this.renderFrame(),
                    this.trigger("drawnFrame");
                }),
                (AnimationItem.prototype.renderFrame = function () {
                  if (!1 !== this.isLoaded && this.renderer)
                    try {
                      this.expressionsPlugin &&
                        this.expressionsPlugin.resetFrame(),
                        this.renderer.renderFrame(
                          this.currentFrame + this.firstFrame
                        );
                    } catch (e) {
                      this.triggerRenderFrameError(e);
                    }
                }),
                (AnimationItem.prototype.play = function (e) {
                  (e && this.name !== e) ||
                    (!0 === this.isPaused &&
                      ((this.isPaused = !1),
                      this.trigger("_play"),
                      this.audioController.resume(),
                      this._idle &&
                        ((this._idle = !1), this.trigger("_active"))));
                }),
                (AnimationItem.prototype.pause = function (e) {
                  (e && this.name !== e) ||
                    (!1 === this.isPaused &&
                      ((this.isPaused = !0),
                      this.trigger("_pause"),
                      (this._idle = !0),
                      this.trigger("_idle"),
                      this.audioController.pause()));
                }),
                (AnimationItem.prototype.togglePause = function (e) {
                  (e && this.name !== e) ||
                    (!0 === this.isPaused ? this.play() : this.pause());
                }),
                (AnimationItem.prototype.stop = function (e) {
                  (e && this.name !== e) ||
                    (this.pause(),
                    (this.playCount = 0),
                    (this._completedLoop = !1),
                    this.setCurrentRawFrameValue(0));
                }),
                (AnimationItem.prototype.getMarkerData = function (e) {
                  for (var t, n = 0; n < this.markers.length; n += 1)
                    if ((t = this.markers[n]).payload && t.payload.name === e)
                      return t;
                  return null;
                }),
                (AnimationItem.prototype.goToAndStop = function (e, t, n) {
                  if (!n || this.name === n) {
                    var r = Number(e);
                    if (isNaN(r)) {
                      var i = this.getMarkerData(e);
                      i && this.goToAndStop(i.time, !0);
                    } else
                      t
                        ? this.setCurrentRawFrameValue(e)
                        : this.setCurrentRawFrameValue(e * this.frameModifier);
                    this.pause();
                  }
                }),
                (AnimationItem.prototype.goToAndPlay = function (e, t, n) {
                  if (!n || this.name === n) {
                    var r = Number(e);
                    if (isNaN(r)) {
                      var i = this.getMarkerData(e);
                      i &&
                        (i.duration
                          ? this.playSegments([i.time, i.time + i.duration], !0)
                          : this.goToAndStop(i.time, !0));
                    } else this.goToAndStop(r, t, n);
                    this.play();
                  }
                }),
                (AnimationItem.prototype.advanceTime = function (e) {
                  if (!0 !== this.isPaused && !1 !== this.isLoaded) {
                    var t = this.currentRawFrame + e * this.frameModifier,
                      n = !1;
                    t >= this.totalFrames - 1 && this.frameModifier > 0
                      ? this.loop && this.playCount !== this.loop
                        ? t >= this.totalFrames
                          ? ((this.playCount += 1),
                            this.checkSegments(t % this.totalFrames) ||
                              (this.setCurrentRawFrameValue(t % this.totalFrames),
                              (this._completedLoop = !0),
                              this.trigger("loopComplete")))
                          : this.setCurrentRawFrameValue(t)
                        : this.checkSegments(
                            t > this.totalFrames ? t % this.totalFrames : 0
                          ) || ((n = !0), (t = this.totalFrames - 1))
                      : t < 0
                      ? this.checkSegments(t % this.totalFrames) ||
                        (!this.loop || (this.playCount-- <= 0 && !0 !== this.loop)
                          ? ((n = !0), (t = 0))
                          : (this.setCurrentRawFrameValue(
                              this.totalFrames + (t % this.totalFrames)
                            ),
                            this._completedLoop
                              ? this.trigger("loopComplete")
                              : (this._completedLoop = !0)))
                      : this.setCurrentRawFrameValue(t),
                      n &&
                        (this.setCurrentRawFrameValue(t),
                        this.pause(),
                        this.trigger("complete"));
                  }
                }),
                (AnimationItem.prototype.adjustSegment = function (e, t) {
                  (this.playCount = 0),
                    e[1] < e[0]
                      ? (this.frameModifier > 0 &&
                          (this.playSpeed < 0
                            ? this.setSpeed(-this.playSpeed)
                            : this.setDirection(-1)),
                        (this.totalFrames = e[0] - e[1]),
                        (this.timeCompleted = this.totalFrames),
                        (this.firstFrame = e[1]),
                        this.setCurrentRawFrameValue(
                          this.totalFrames - 0.001 - t
                        ))
                      : e[1] > e[0] &&
                        (this.frameModifier < 0 &&
                          (this.playSpeed < 0
                            ? this.setSpeed(-this.playSpeed)
                            : this.setDirection(1)),
                        (this.totalFrames = e[1] - e[0]),
                        (this.timeCompleted = this.totalFrames),
                        (this.firstFrame = e[0]),
                        this.setCurrentRawFrameValue(0.001 + t)),
                    this.trigger("segmentStart");
                }),
                (AnimationItem.prototype.setSegment = function (e, t) {
                  var n = -1;
                  this.isPaused &&
                    (this.currentRawFrame + this.firstFrame < e
                      ? (n = e)
                      : this.currentRawFrame + this.firstFrame > t &&
                        (n = t - e)),
                    (this.firstFrame = e),
                    (this.totalFrames = t - e),
                    (this.timeCompleted = this.totalFrames),
                    -1 !== n && this.goToAndStop(n, !0);
                }),
                (AnimationItem.prototype.playSegments = function (e, t) {
                  if (
                    (t && (this.segments.length = 0),
                    "object" === _typeof$4(e[0]))
                  ) {
                    var n,
                      r = e.length;
                    for (n = 0; n < r; n += 1) this.segments.push(e[n]);
                  } else this.segments.push(e);
                  this.segments.length &&
                    t &&
                    this.adjustSegment(this.segments.shift(), 0),
                    this.isPaused && this.play();
                }),
                (AnimationItem.prototype.resetSegments = function (e) {
                  (this.segments.length = 0),
                    this.segments.push([
                      this.animationData.ip,
                      this.animationData.op
                    ]),
                    e && this.checkSegments(0);
                }),
                (AnimationItem.prototype.checkSegments = function (e) {
                  return (
                    !!this.segments.length &&
                    (this.adjustSegment(this.segments.shift(), e), !0)
                  );
                }),
                (AnimationItem.prototype.destroy = function (e) {
                  (e && this.name !== e) ||
                    !this.renderer ||
                    (this.renderer.destroy(),
                    this.imagePreloader.destroy(),
                    this.trigger("destroy"),
                    (this._cbs = null),
                    (this.onEnterFrame = null),
                    (this.onLoopComplete = null),
                    (this.onComplete = null),
                    (this.onSegmentStart = null),
                    (this.onDestroy = null),
                    (this.renderer = null),
                    (this.expressionsPlugin = null),
                    (this.imagePreloader = null),
                    (this.projectInterface = null));
                }),
                (AnimationItem.prototype.setCurrentRawFrameValue = function (e) {
                  (this.currentRawFrame = e), this.gotoFrame();
                }),
                (AnimationItem.prototype.setSpeed = function (e) {
                  (this.playSpeed = e), this.updaFrameModifier();
                }),
                (AnimationItem.prototype.setDirection = function (e) {
                  (this.playDirection = e < 0 ? -1 : 1), this.updaFrameModifier();
                }),
                (AnimationItem.prototype.setLoop = function (e) {
                  this.loop = e;
                }),
                (AnimationItem.prototype.setVolume = function (e, t) {
                  (t && this.name !== t) || this.audioController.setVolume(e);
                }),
                (AnimationItem.prototype.getVolume = function () {
                  return this.audioController.getVolume();
                }),
                (AnimationItem.prototype.mute = function (e) {
                  (e && this.name !== e) || this.audioController.mute();
                }),
                (AnimationItem.prototype.unmute = function (e) {
                  (e && this.name !== e) || this.audioController.unmute();
                }),
                (AnimationItem.prototype.updaFrameModifier = function () {
                  (this.frameModifier =
                    this.frameMult * this.playSpeed * this.playDirection),
                    this.audioController.setRate(
                      this.playSpeed * this.playDirection
                    );
                }),
                (AnimationItem.prototype.getPath = function () {
                  return this.path;
                }),
                (AnimationItem.prototype.getAssetsPath = function (e) {
                  var t = "";
                  if (e.e) t = e.p;
                  else if (this.assetsPath) {
                    var n = e.p;
                    -1 !== n.indexOf("images/") && (n = n.split("/")[1]),
                      (t = this.assetsPath + n);
                  } else (t = this.path), (t += e.u ? e.u : ""), (t += e.p);
                  return t;
                }),
                (AnimationItem.prototype.getAssetData = function (e) {
                  for (var t = 0, n = this.assets.length; t < n; ) {
                    if (e === this.assets[t].id) return this.assets[t];
                    t += 1;
                  }
                  return null;
                }),
                (AnimationItem.prototype.hide = function () {
                  this.renderer.hide();
                }),
                (AnimationItem.prototype.show = function () {
                  this.renderer.show();
                }),
                (AnimationItem.prototype.getDuration = function (e) {
                  return e ? this.totalFrames : this.totalFrames / this.frameRate;
                }),
                (AnimationItem.prototype.updateDocumentData = function (e, t, n) {
                  try {
                    this.renderer.getElementByPath(e).updateDocumentData(t, n);
                  } catch (e) {}
                }),
                (AnimationItem.prototype.trigger = function (e) {
                  if (this._cbs && this._cbs[e])
                    switch (e) {
                      case "enterFrame":
                        this.triggerEvent(
                          e,
                          new BMEnterFrameEvent(
                            e,
                            this.currentFrame,
                            this.totalFrames,
                            this.frameModifier
                          )
                        );
                        break;
                      case "drawnFrame":
                        (this.drawnFrameEvent.currentTime = this.currentFrame),
                          (this.drawnFrameEvent.totalTime = this.totalFrames),
                          (this.drawnFrameEvent.direction = this.frameModifier),
                          this.triggerEvent(e, this.drawnFrameEvent);
                        break;
                      case "loopComplete":
                        this.triggerEvent(
                          e,
                          new BMCompleteLoopEvent(
                            e,
                            this.loop,
                            this.playCount,
                            this.frameMult
                          )
                        );
                        break;
                      case "complete":
                        this.triggerEvent(
                          e,
                          new BMCompleteEvent(e, this.frameMult)
                        );
                        break;
                      case "segmentStart":
                        this.triggerEvent(
                          e,
                          new BMSegmentStartEvent(
                            e,
                            this.firstFrame,
                            this.totalFrames
                          )
                        );
                        break;
                      case "destroy":
                        this.triggerEvent(e, new BMDestroyEvent(e, this));
                        break;
                      default:
                        this.triggerEvent(e);
                    }
                  "enterFrame" === e &&
                    this.onEnterFrame &&
                    this.onEnterFrame.call(
                      this,
                      new BMEnterFrameEvent(
                        e,
                        this.currentFrame,
                        this.totalFrames,
                        this.frameMult
                      )
                    ),
                    "loopComplete" === e &&
                      this.onLoopComplete &&
                      this.onLoopComplete.call(
                        this,
                        new BMCompleteLoopEvent(
                          e,
                          this.loop,
                          this.playCount,
                          this.frameMult
                        )
                      ),
                    "complete" === e &&
                      this.onComplete &&
                      this.onComplete.call(
                        this,
                        new BMCompleteEvent(e, this.frameMult)
                      ),
                    "segmentStart" === e &&
                      this.onSegmentStart &&
                      this.onSegmentStart.call(
                        this,
                        new BMSegmentStartEvent(
                          e,
                          this.firstFrame,
                          this.totalFrames
                        )
                      ),
                    "destroy" === e &&
                      this.onDestroy &&
                      this.onDestroy.call(this, new BMDestroyEvent(e, this));
                }),
                (AnimationItem.prototype.triggerRenderFrameError = function (e) {
                  var t = new BMRenderFrameErrorEvent(e, this.currentFrame);
                  this.triggerEvent("error", t),
                    this.onError && this.onError.call(this, t);
                }),
                (AnimationItem.prototype.triggerConfigError = function (e) {
                  var t = new BMConfigErrorEvent(e, this.currentFrame);
                  this.triggerEvent("error", t),
                    this.onError && this.onError.call(this, t);
                });
              var animationManager = (function () {
                  var e = {},
                    t = [],
                    n = 0,
                    r = 0,
                    i = 0,
                    a = !0,
                    s = !1;
                  function o(e) {
                    for (var n = 0, i = e.target; n < r; )
                      t[n].animation === i &&
                        (t.splice(n, 1), (n -= 1), (r -= 1), i.isPaused || u()),
                        (n += 1);
                  }
                  function l(e, n) {
                    if (!e) return null;
                    for (var i = 0; i < r; ) {
                      if (t[i].elem === e && null !== t[i].elem)
                        return t[i].animation;
                      i += 1;
                    }
                    var a = new AnimationItem();
                    return c(a, e), a.setData(e, n), a;
                  }
                  function h() {
                    (i += 1), p();
                  }
                  function u() {
                    i -= 1;
                  }
                  function c(e, n) {
                    e.addEventListener("destroy", o),
                      e.addEventListener("_active", h),
                      e.addEventListener("_idle", u),
                      t.push({ elem: n, animation: e }),
                      (r += 1);
                  }
                  function d(e) {
                    var o,
                      l = e - n;
                    for (o = 0; o < r; o += 1) t[o].animation.advanceTime(l);
                    (n = e), i && !s ? window.requestAnimationFrame(d) : (a = !0);
                  }
                  function f(e) {
                    (n = e), window.requestAnimationFrame(d);
                  }
                  function p() {
                    !s && i && a && (window.requestAnimationFrame(f), (a = !1));
                  }
                  return (
                    (e.registerAnimation = l),
                    (e.loadAnimation = function (e) {
                      var t = new AnimationItem();
                      return c(t, null), t.setParams(e), t;
                    }),
                    (e.setSpeed = function (e, n) {
                      var i;
                      for (i = 0; i < r; i += 1) t[i].animation.setSpeed(e, n);
                    }),
                    (e.setDirection = function (e, n) {
                      var i;
                      for (i = 0; i < r; i += 1)
                        t[i].animation.setDirection(e, n);
                    }),
                    (e.play = function (e) {
                      var n;
                      for (n = 0; n < r; n += 1) t[n].animation.play(e);
                    }),
                    (e.pause = function (e) {
                      var n;
                      for (n = 0; n < r; n += 1) t[n].animation.pause(e);
                    }),
                    (e.stop = function (e) {
                      var n;
                      for (n = 0; n < r; n += 1) t[n].animation.stop(e);
                    }),
                    (e.togglePause = function (e) {
                      var n;
                      for (n = 0; n < r; n += 1) t[n].animation.togglePause(e);
                    }),
                    (e.searchAnimations = function (e, t, n) {
                      var r,
                        i = [].concat(
                          [].slice.call(
                            document.getElementsByClassName("lottie")
                          ),
                          [].slice.call(
                            document.getElementsByClassName("bodymovin")
                          )
                        ),
                        a = i.length;
                      for (r = 0; r < a; r += 1)
                        n && i[r].setAttribute("data-bm-type", n), l(i[r], e);
                      if (t && 0 === a) {
                        n || (n = "svg");
                        var s = document.getElementsByTagName("body")[0];
                        s.innerText = "";
                        var o = createTag("div");
                        (o.style.width = "100%"),
                          (o.style.height = "100%"),
                          o.setAttribute("data-bm-type", n),
                          s.appendChild(o),
                          l(o, e);
                      }
                    }),
                    (e.resize = function () {
                      var e;
                      for (e = 0; e < r; e += 1) t[e].animation.resize();
                    }),
                    (e.goToAndStop = function (e, n, i) {
                      var a;
                      for (a = 0; a < r; a += 1)
                        t[a].animation.goToAndStop(e, n, i);
                    }),
                    (e.destroy = function (e) {
                      var n;
                      for (n = r - 1; n >= 0; n -= 1) t[n].animation.destroy(e);
                    }),
                    (e.freeze = function () {
                      s = !0;
                    }),
                    (e.unfreeze = function () {
                      (s = !1), p();
                    }),
                    (e.setVolume = function (e, n) {
                      var i;
                      for (i = 0; i < r; i += 1) t[i].animation.setVolume(e, n);
                    }),
                    (e.mute = function (e) {
                      var n;
                      for (n = 0; n < r; n += 1) t[n].animation.mute(e);
                    }),
                    (e.unmute = function (e) {
                      var n;
                      for (n = 0; n < r; n += 1) t[n].animation.unmute(e);
                    }),
                    (e.getRegisteredAnimations = function () {
                      var e,
                        n = t.length,
                        r = [];
                      for (e = 0; e < n; e += 1) r.push(t[e].animation);
                      return r;
                    }),
                    e
                  );
                })(),
                BezierFactory = (function () {
                  var e = {
                      getBezierEasing: function (e, n, r, i, a) {
                        var s =
                          a ||
                          ("bez_" + e + "_" + n + "_" + r + "_" + i).replace(
                            /\./g,
                            "p"
                          );
                        if (t[s]) return t[s];
                        var o = new h([e, n, r, i]);
                        return (t[s] = o), o;
                      }
                    },
                    t = {},
                    n = 0.1,
                    r = "function" == typeof Float32Array;
                  function i(e, t) {
                    return 1 - 3 * t + 3 * e;
                  }
                  function a(e, t) {
                    return 3 * t - 6 * e;
                  }
                  function s(e) {
                    return 3 * e;
                  }
                  function o(e, t, n) {
                    return ((i(t, n) * e + a(t, n)) * e + s(t)) * e;
                  }
                  function l(e, t, n) {
                    return 3 * i(t, n) * e * e + 2 * a(t, n) * e + s(t);
                  }
                  function h(e) {
                    (this._p = e),
                      (this._mSampleValues = r
                        ? new Float32Array(11)
                        : new Array(11)),
                      (this._precomputed = !1),
                      (this.get = this.get.bind(this));
                  }
                  return (
                    (h.prototype = {
                      get: function (e) {
                        var t = this._p[0],
                          n = this._p[1],
                          r = this._p[2],
                          i = this._p[3];
                        return (
                          this._precomputed || this._precompute(),
                          t === n && r === i
                            ? e
                            : 0 === e
                            ? 0
                            : 1 === e
                            ? 1
                            : o(this._getTForX(e), n, i)
                        );
                      },
                      _precompute: function () {
                        var e = this._p[0],
                          t = this._p[1],
                          n = this._p[2],
                          r = this._p[3];
                        (this._precomputed = !0),
                          (e === t && n === r) || this._calcSampleValues();
                      },
                      _calcSampleValues: function () {
                        for (
                          var e = this._p[0], t = this._p[2], r = 0;
                          r < 11;
                          ++r
                        )
                          this._mSampleValues[r] = o(r * n, e, t);
                      },
                      _getTForX: function (e) {
                        for (
                          var t = this._p[0],
                            r = this._p[2],
                            i = this._mSampleValues,
                            a = 0,
                            s = 1;
                          10 !== s && i[s] <= e;
                          ++s
                        )
                          a += n;
                        var h = a + ((e - i[--s]) / (i[s + 1] - i[s])) * n,
                          u = l(h, t, r);
                        return u >= 0.001
                          ? (function (e, t, n, r) {
                              for (var i = 0; i < 4; ++i) {
                                var a = l(t, n, r);
                                if (0 === a) return t;
                                t -= (o(t, n, r) - e) / a;
                              }
                              return t;
                            })(e, h, t, r)
                          : 0 === u
                          ? h
                          : (function (e, t, n, r, i) {
                              var a,
                                s,
                                l = 0;
                              do {
                                (a = o((s = t + (n - t) / 2), r, i) - e) > 0
                                  ? (n = s)
                                  : (t = s);
                              } while (Math.abs(a) > 1e-7 && ++l < 10);
                              return s;
                            })(e, a, a + n, t, r);
                      }
                    }),
                    e
                  );
                })(),
                pooling = {
                  double: function (e) {
                    return e.concat(createSizedArray(e.length));
                  }
                },
                poolFactory = function (e, t, n) {
                  var r = 0,
                    i = e,
                    a = createSizedArray(i);
                  return {
                    newElement: function () {
                      return r ? a[(r -= 1)] : t();
                    },
                    release: function (e) {
                      r === i && ((a = pooling.double(a)), (i *= 2)),
                        n && n(e),
                        (a[r] = e),
                        (r += 1);
                    }
                  };
                },
                bezierLengthPool = poolFactory(8, function () {
                  return {
                    addedLength: 0,
                    percents: createTypedArray(
                      "float32",
                      getDefaultCurveSegments()
                    ),
                    lengths: createTypedArray(
                      "float32",
                      getDefaultCurveSegments()
                    )
                  };
                }),
                segmentsLengthPool = poolFactory(
                  8,
                  function () {
                    return { lengths: [], totalLength: 0 };
                  },
                  function (e) {
                    var t,
                      n = e.lengths.length;
                    for (t = 0; t < n; t += 1)
                      bezierLengthPool.release(e.lengths[t]);
                    e.lengths.length = 0;
                  }
                );
              function bezFunction() {
                var e = Math;
                function t(e, t, n, r, i, a) {
                  var s = e * r + t * i + n * a - i * r - a * e - n * t;
                  return s > -0.001 && s < 0.001;
                }
                var n = function (e, t, n, r) {
                  var i,
                    a,
                    s,
                    o,
                    l,
                    h,
                    u = getDefaultCurveSegments(),
                    c = 0,
                    d = [],
                    f = [],
                    p = bezierLengthPool.newElement();
                  for (s = n.length, i = 0; i < u; i += 1) {
                    for (l = i / (u - 1), h = 0, a = 0; a < s; a += 1)
                      (o =
                        bmPow(1 - l, 3) * e[a] +
                        3 * bmPow(1 - l, 2) * l * n[a] +
                        3 * (1 - l) * bmPow(l, 2) * r[a] +
                        bmPow(l, 3) * t[a]),
                        (d[a] = o),
                        null !== f[a] && (h += bmPow(d[a] - f[a], 2)),
                        (f[a] = d[a]);
                    h && (c += h = bmSqrt(h)),
                      (p.percents[i] = l),
                      (p.lengths[i] = c);
                  }
                  return (p.addedLength = c), p;
                };
                function r(e) {
                  (this.segmentLength = 0), (this.points = new Array(e));
                }
                function i(e, t) {
                  (this.partialLength = e), (this.point = t);
                }
                var a,
                  s =
                    ((a = {}),
                    function (e, n, s, o) {
                      var l = (
                        e[0] +
                        "_" +
                        e[1] +
                        "_" +
                        n[0] +
                        "_" +
                        n[1] +
                        "_" +
                        s[0] +
                        "_" +
                        s[1] +
                        "_" +
                        o[0] +
                        "_" +
                        o[1]
                      ).replace(/\./g, "p");
                      if (!a[l]) {
                        var h,
                          u,
                          c,
                          d,
                          f,
                          p,
                          m,
                          g = getDefaultCurveSegments(),
                          v = 0,
                          y = null;
                        2 === e.length &&
                          (e[0] !== n[0] || e[1] !== n[1]) &&
                          t(e[0], e[1], n[0], n[1], e[0] + s[0], e[1] + s[1]) &&
                          t(e[0], e[1], n[0], n[1], n[0] + o[0], n[1] + o[1]) &&
                          (g = 2);
                        var _ = new r(g);
                        for (c = s.length, h = 0; h < g; h += 1) {
                          for (
                            m = createSizedArray(c),
                              f = h / (g - 1),
                              p = 0,
                              u = 0;
                            u < c;
                            u += 1
                          )
                            (d =
                              bmPow(1 - f, 3) * e[u] +
                              3 * bmPow(1 - f, 2) * f * (e[u] + s[u]) +
                              3 * (1 - f) * bmPow(f, 2) * (n[u] + o[u]) +
                              bmPow(f, 3) * n[u]),
                              (m[u] = d),
                              null !== y && (p += bmPow(m[u] - y[u], 2));
                          (v += p = bmSqrt(p)),
                            (_.points[h] = new i(p, m)),
                            (y = m);
                        }
                        (_.segmentLength = v), (a[l] = _);
                      }
                      return a[l];
                    });
                function o(e, t) {
                  var n = t.percents,
                    r = t.lengths,
                    i = n.length,
                    a = bmFloor((i - 1) * e),
                    s = e * t.addedLength,
                    o = 0;
                  if (a === i - 1 || 0 === a || s === r[a]) return n[a];
                  for (var l = r[a] > s ? -1 : 1, h = !0; h; )
                    if (
                      (r[a] <= s && r[a + 1] > s
                        ? ((o = (s - r[a]) / (r[a + 1] - r[a])), (h = !1))
                        : (a += l),
                      a < 0 || a >= i - 1)
                    ) {
                      if (a === i - 1) return n[a];
                      h = !1;
                    }
                  return n[a] + (n[a + 1] - n[a]) * o;
                }
                var l = createTypedArray("float32", 8);
                return {
                  getSegmentsLength: function (e) {
                    var t,
                      r = segmentsLengthPool.newElement(),
                      i = e.c,
                      a = e.v,
                      s = e.o,
                      o = e.i,
                      l = e._length,
                      h = r.lengths,
                      u = 0;
                    for (t = 0; t < l - 1; t += 1)
                      (h[t] = n(a[t], a[t + 1], s[t], o[t + 1])),
                        (u += h[t].addedLength);
                    return (
                      i &&
                        l &&
                        ((h[t] = n(a[t], a[0], s[t], o[0])),
                        (u += h[t].addedLength)),
                      (r.totalLength = u),
                      r
                    );
                  },
                  getNewSegment: function (t, n, r, i, a, s, h) {
                    a < 0 ? (a = 0) : a > 1 && (a = 1);
                    var u,
                      c = o(a, h),
                      d = o((s = s > 1 ? 1 : s), h),
                      f = t.length,
                      p = 1 - c,
                      m = 1 - d,
                      g = p * p * p,
                      v = c * p * p * 3,
                      y = c * c * p * 3,
                      _ = c * c * c,
                      b = p * p * m,
                      x = c * p * m + p * c * m + p * p * d,
                      S = c * c * m + p * c * d + c * p * d,
                      E = c * c * d,
                      w = p * m * m,
                      T = c * m * m + p * d * m + p * m * d,
                      M = c * d * m + p * d * d + c * m * d,
                      A = c * d * d,
                      C = m * m * m,
                      P = d * m * m + m * d * m + m * m * d,
                      k = d * d * m + m * d * d + d * m * d,
                      R = d * d * d;
                    for (u = 0; u < f; u += 1)
                      (l[4 * u] =
                        e.round(
                          1e3 * (g * t[u] + v * r[u] + y * i[u] + _ * n[u])
                        ) / 1e3),
                        (l[4 * u + 1] =
                          e.round(
                            1e3 * (b * t[u] + x * r[u] + S * i[u] + E * n[u])
                          ) / 1e3),
                        (l[4 * u + 2] =
                          e.round(
                            1e3 * (w * t[u] + T * r[u] + M * i[u] + A * n[u])
                          ) / 1e3),
                        (l[4 * u + 3] =
                          e.round(
                            1e3 * (C * t[u] + P * r[u] + k * i[u] + R * n[u])
                          ) / 1e3);
                    return l;
                  },
                  getPointInSegment: function (t, n, r, i, a, s) {
                    var l = o(a, s),
                      h = 1 - l;
                    return [
                      e.round(
                        1e3 *
                          (h * h * h * t[0] +
                            (l * h * h + h * l * h + h * h * l) * r[0] +
                            (l * l * h + h * l * l + l * h * l) * i[0] +
                            l * l * l * n[0])
                      ) / 1e3,
                      e.round(
                        1e3 *
                          (h * h * h * t[1] +
                            (l * h * h + h * l * h + h * h * l) * r[1] +
                            (l * l * h + h * l * l + l * h * l) * i[1] +
                            l * l * l * n[1])
                      ) / 1e3
                    ];
                  },
                  buildBezierData: s,
                  pointOnLine2D: t,
                  pointOnLine3D: function (n, r, i, a, s, o, l, h, u) {
                    if (0 === i && 0 === o && 0 === u) return t(n, r, a, s, l, h);
                    var c,
                      d = e.sqrt(
                        e.pow(a - n, 2) + e.pow(s - r, 2) + e.pow(o - i, 2)
                      ),
                      f = e.sqrt(
                        e.pow(l - n, 2) + e.pow(h - r, 2) + e.pow(u - i, 2)
                      ),
                      p = e.sqrt(
                        e.pow(l - a, 2) + e.pow(h - s, 2) + e.pow(u - o, 2)
                      );
                    return (
                      (c =
                        d > f
                          ? d > p
                            ? d - f - p
                            : p - f - d
                          : p > f
                          ? p - f - d
                          : f - d - p) > -1e-4 && c < 1e-4
                    );
                  }
                };
              }
              var bez = bezFunction(),
                initFrame = initialDefaultFrame,
                mathAbs = Math.abs;
              function interpolateValue(e, t) {
                var n,
                  r = this.offsetTime;
                "multidimensional" === this.propType &&
                  (n = createTypedArray("float32", this.pv.length));
                for (
                  var i,
                    a,
                    s,
                    o,
                    l,
                    h,
                    u,
                    c,
                    d,
                    f = t.lastIndex,
                    p = f,
                    m = this.keyframes.length - 1,
                    g = !0;
                  g;
  
                ) {
                  if (
                    ((i = this.keyframes[p]),
                    (a = this.keyframes[p + 1]),
                    p === m - 1 && e >= a.t - r)
                  ) {
                    i.h && (i = a), (f = 0);
                    break;
                  }
                  if (a.t - r > e) {
                    f = p;
                    break;
                  }
                  p < m - 1 ? (p += 1) : ((f = 0), (g = !1));
                }
                s = this.keyframesMetadata[p] || {};
                var v,
                  y = a.t - r,
                  _ = i.t - r;
                if (i.to) {
                  s.bezierData ||
                    (s.bezierData = bez.buildBezierData(
                      i.s,
                      a.s || i.e,
                      i.to,
                      i.ti
                    ));
                  var b = s.bezierData;
                  if (e >= y || e < _) {
                    var x = e >= y ? b.points.length - 1 : 0;
                    for (l = b.points[x].point.length, o = 0; o < l; o += 1)
                      n[o] = b.points[x].point[o];
                  } else {
                    s.__fnct
                      ? (d = s.__fnct)
                      : ((d = BezierFactory.getBezierEasing(
                          i.o.x,
                          i.o.y,
                          i.i.x,
                          i.i.y,
                          i.n
                        ).get),
                        (s.__fnct = d)),
                      (h = d((e - _) / (y - _)));
                    var S,
                      E = b.segmentLength * h,
                      w =
                        t.lastFrame < e && t._lastKeyframeIndex === p
                          ? t._lastAddedLength
                          : 0;
                    for (
                      c =
                        t.lastFrame < e && t._lastKeyframeIndex === p
                          ? t._lastPoint
                          : 0,
                        g = !0,
                        u = b.points.length;
                      g;
  
                    ) {
                      if (
                        ((w += b.points[c].partialLength),
                        0 === E || 0 === h || c === b.points.length - 1)
                      ) {
                        for (l = b.points[c].point.length, o = 0; o < l; o += 1)
                          n[o] = b.points[c].point[o];
                        break;
                      }
                      if (E >= w && E < w + b.points[c + 1].partialLength) {
                        for (
                          S = (E - w) / b.points[c + 1].partialLength,
                            l = b.points[c].point.length,
                            o = 0;
                          o < l;
                          o += 1
                        )
                          n[o] =
                            b.points[c].point[o] +
                            (b.points[c + 1].point[o] - b.points[c].point[o]) * S;
                        break;
                      }
                      c < u - 1 ? (c += 1) : (g = !1);
                    }
                    (t._lastPoint = c),
                      (t._lastAddedLength = w - b.points[c].partialLength),
                      (t._lastKeyframeIndex = p);
                  }
                } else {
                  var T, M, A, C, P;
                  if (((m = i.s.length), (v = a.s || i.e), this.sh && 1 !== i.h))
                    e >= y
                      ? ((n[0] = v[0]), (n[1] = v[1]), (n[2] = v[2]))
                      : e <= _
                      ? ((n[0] = i.s[0]), (n[1] = i.s[1]), (n[2] = i.s[2]))
                      : quaternionToEuler(
                          n,
                          slerp(
                            createQuaternion(i.s),
                            createQuaternion(v),
                            (e - _) / (y - _)
                          )
                        );
                  else
                    for (p = 0; p < m; p += 1)
                      1 !== i.h &&
                        (e >= y
                          ? (h = 1)
                          : e < _
                          ? (h = 0)
                          : (i.o.x.constructor === Array
                              ? (s.__fnct || (s.__fnct = []),
                                s.__fnct[p]
                                  ? (d = s.__fnct[p])
                                  : ((T =
                                      void 0 === i.o.x[p] ? i.o.x[0] : i.o.x[p]),
                                    (M =
                                      void 0 === i.o.y[p] ? i.o.y[0] : i.o.y[p]),
                                    (A =
                                      void 0 === i.i.x[p] ? i.i.x[0] : i.i.x[p]),
                                    (C =
                                      void 0 === i.i.y[p] ? i.i.y[0] : i.i.y[p]),
                                    (d = BezierFactory.getBezierEasing(
                                      T,
                                      M,
                                      A,
                                      C
                                    ).get),
                                    (s.__fnct[p] = d)))
                              : s.__fnct
                              ? (d = s.__fnct)
                              : ((T = i.o.x),
                                (M = i.o.y),
                                (A = i.i.x),
                                (C = i.i.y),
                                (d = BezierFactory.getBezierEasing(
                                  T,
                                  M,
                                  A,
                                  C
                                ).get),
                                (i.keyframeMetadata = d)),
                            (h = d((e - _) / (y - _))))),
                        (v = a.s || i.e),
                        (P = 1 === i.h ? i.s[p] : i.s[p] + (v[p] - i.s[p]) * h),
                        "multidimensional" === this.propType
                          ? (n[p] = P)
                          : (n = P);
                }
                return (t.lastIndex = f), n;
              }
              function slerp(e, t, n) {
                var r,
                  i,
                  a,
                  s,
                  o,
                  l = [],
                  h = e[0],
                  u = e[1],
                  c = e[2],
                  d = e[3],
                  f = t[0],
                  p = t[1],
                  m = t[2],
                  g = t[3];
                return (
                  (i = h * f + u * p + c * m + d * g) < 0 &&
                    ((i = -i), (f = -f), (p = -p), (m = -m), (g = -g)),
                  1 - i > 1e-6
                    ? ((r = Math.acos(i)),
                      (a = Math.sin(r)),
                      (s = Math.sin((1 - n) * r) / a),
                      (o = Math.sin(n * r) / a))
                    : ((s = 1 - n), (o = n)),
                  (l[0] = s * h + o * f),
                  (l[1] = s * u + o * p),
                  (l[2] = s * c + o * m),
                  (l[3] = s * d + o * g),
                  l
                );
              }
              function quaternionToEuler(e, t) {
                var n = t[0],
                  r = t[1],
                  i = t[2],
                  a = t[3],
                  s = Math.atan2(
                    2 * r * a - 2 * n * i,
                    1 - 2 * r * r - 2 * i * i
                  ),
                  o = Math.asin(2 * n * r + 2 * i * a),
                  l = Math.atan2(
                    2 * n * a - 2 * r * i,
                    1 - 2 * n * n - 2 * i * i
                  );
                (e[0] = s / degToRads),
                  (e[1] = o / degToRads),
                  (e[2] = l / degToRads);
              }
              function createQuaternion(e) {
                var t = e[0] * degToRads,
                  n = e[1] * degToRads,
                  r = e[2] * degToRads,
                  i = Math.cos(t / 2),
                  a = Math.cos(n / 2),
                  s = Math.cos(r / 2),
                  o = Math.sin(t / 2),
                  l = Math.sin(n / 2),
                  h = Math.sin(r / 2);
                return [
                  o * l * s + i * a * h,
                  o * a * s + i * l * h,
                  i * l * s - o * a * h,
                  i * a * s - o * l * h
                ];
              }
              function getValueAtCurrentTime() {
                var e = this.comp.renderedFrame - this.offsetTime,
                  t = this.keyframes[0].t - this.offsetTime,
                  n =
                    this.keyframes[this.keyframes.length - 1].t - this.offsetTime;
                if (
                  !(
                    e === this._caching.lastFrame ||
                    (this._caching.lastFrame !== initFrame &&
                      ((this._caching.lastFrame >= n && e >= n) ||
                        (this._caching.lastFrame < t && e < t)))
                  )
                ) {
                  this._caching.lastFrame >= e &&
                    ((this._caching._lastKeyframeIndex = -1),
                    (this._caching.lastIndex = 0));
                  var r = this.interpolateValue(e, this._caching);
                  this.pv = r;
                }
                return (this._caching.lastFrame = e), this.pv;
              }
              function setVValue(e) {
                var t;
                if ("unidimensional" === this.propType)
                  (t = e * this.mult),
                    mathAbs(this.v - t) > 1e-5 &&
                      ((this.v = t), (this._mdf = !0));
                else
                  for (var n = 0, r = this.v.length; n < r; )
                    (t = e[n] * this.mult),
                      mathAbs(this.v[n] - t) > 1e-5 &&
                        ((this.v[n] = t), (this._mdf = !0)),
                      (n += 1);
              }
              function processEffectsSequence() {
                if (
                  this.elem.globalData.frameId !== this.frameId &&
                  this.effectsSequence.length
                )
                  if (this.lock) this.setVValue(this.pv);
                  else {
                    var e;
                    (this.lock = !0), (this._mdf = this._isFirstFrame);
                    var t = this.effectsSequence.length,
                      n = this.kf ? this.pv : this.data.k;
                    for (e = 0; e < t; e += 1) n = this.effectsSequence[e](n);
                    this.setVValue(n),
                      (this._isFirstFrame = !1),
                      (this.lock = !1),
                      (this.frameId = this.elem.globalData.frameId);
                  }
              }
              function addEffect(e) {
                this.effectsSequence.push(e),
                  this.container.addDynamicProperty(this);
              }
              function ValueProperty(e, t, n, r) {
                (this.propType = "unidimensional"),
                  (this.mult = n || 1),
                  (this.data = t),
                  (this.v = n ? t.k * n : t.k),
                  (this.pv = t.k),
                  (this._mdf = !1),
                  (this.elem = e),
                  (this.container = r),
                  (this.comp = e.comp),
                  (this.k = !1),
                  (this.kf = !1),
                  (this.vel = 0),
                  (this.effectsSequence = []),
                  (this._isFirstFrame = !0),
                  (this.getValue = processEffectsSequence),
                  (this.setVValue = setVValue),
                  (this.addEffect = addEffect);
              }
              function MultiDimensionalProperty(e, t, n, r) {
                var i;
                (this.propType = "multidimensional"),
                  (this.mult = n || 1),
                  (this.data = t),
                  (this._mdf = !1),
                  (this.elem = e),
                  (this.container = r),
                  (this.comp = e.comp),
                  (this.k = !1),
                  (this.kf = !1),
                  (this.frameId = -1);
                var a = t.k.length;
                for (
                  this.v = createTypedArray("float32", a),
                    this.pv = createTypedArray("float32", a),
                    this.vel = createTypedArray("float32", a),
                    i = 0;
                  i < a;
                  i += 1
                )
                  (this.v[i] = t.k[i] * this.mult), (this.pv[i] = t.k[i]);
                (this._isFirstFrame = !0),
                  (this.effectsSequence = []),
                  (this.getValue = processEffectsSequence),
                  (this.setVValue = setVValue),
                  (this.addEffect = addEffect);
              }
              function KeyframedValueProperty(e, t, n, r) {
                (this.propType = "unidimensional"),
                  (this.keyframes = t.k),
                  (this.keyframesMetadata = []),
                  (this.offsetTime = e.data.st),
                  (this.frameId = -1),
                  (this._caching = {
                    lastFrame: initFrame,
                    lastIndex: 0,
                    value: 0,
                    _lastKeyframeIndex: -1
                  }),
                  (this.k = !0),
                  (this.kf = !0),
                  (this.data = t),
                  (this.mult = n || 1),
                  (this.elem = e),
                  (this.container = r),
                  (this.comp = e.comp),
                  (this.v = initFrame),
                  (this.pv = initFrame),
                  (this._isFirstFrame = !0),
                  (this.getValue = processEffectsSequence),
                  (this.setVValue = setVValue),
                  (this.interpolateValue = interpolateValue),
                  (this.effectsSequence = [getValueAtCurrentTime.bind(this)]),
                  (this.addEffect = addEffect);
              }
              function KeyframedMultidimensionalProperty(e, t, n, r) {
                var i;
                this.propType = "multidimensional";
                var a,
                  s,
                  o,
                  l,
                  h = t.k.length;
                for (i = 0; i < h - 1; i += 1)
                  t.k[i].to &&
                    t.k[i].s &&
                    t.k[i + 1] &&
                    t.k[i + 1].s &&
                    ((a = t.k[i].s),
                    (s = t.k[i + 1].s),
                    (o = t.k[i].to),
                    (l = t.k[i].ti),
                    ((2 === a.length &&
                      (a[0] !== s[0] || a[1] !== s[1]) &&
                      bez.pointOnLine2D(
                        a[0],
                        a[1],
                        s[0],
                        s[1],
                        a[0] + o[0],
                        a[1] + o[1]
                      ) &&
                      bez.pointOnLine2D(
                        a[0],
                        a[1],
                        s[0],
                        s[1],
                        s[0] + l[0],
                        s[1] + l[1]
                      )) ||
                      (3 === a.length &&
                        (a[0] !== s[0] || a[1] !== s[1] || a[2] !== s[2]) &&
                        bez.pointOnLine3D(
                          a[0],
                          a[1],
                          a[2],
                          s[0],
                          s[1],
                          s[2],
                          a[0] + o[0],
                          a[1] + o[1],
                          a[2] + o[2]
                        ) &&
                        bez.pointOnLine3D(
                          a[0],
                          a[1],
                          a[2],
                          s[0],
                          s[1],
                          s[2],
                          s[0] + l[0],
                          s[1] + l[1],
                          s[2] + l[2]
                        ))) &&
                      ((t.k[i].to = null), (t.k[i].ti = null)),
                    a[0] === s[0] &&
                      a[1] === s[1] &&
                      0 === o[0] &&
                      0 === o[1] &&
                      0 === l[0] &&
                      0 === l[1] &&
                      (2 === a.length ||
                        (a[2] === s[2] && 0 === o[2] && 0 === l[2])) &&
                      ((t.k[i].to = null), (t.k[i].ti = null)));
                (this.effectsSequence = [getValueAtCurrentTime.bind(this)]),
                  (this.data = t),
                  (this.keyframes = t.k),
                  (this.keyframesMetadata = []),
                  (this.offsetTime = e.data.st),
                  (this.k = !0),
                  (this.kf = !0),
                  (this._isFirstFrame = !0),
                  (this.mult = n || 1),
                  (this.elem = e),
                  (this.container = r),
                  (this.comp = e.comp),
                  (this.getValue = processEffectsSequence),
                  (this.setVValue = setVValue),
                  (this.interpolateValue = interpolateValue),
                  (this.frameId = -1);
                var u = t.k[0].s.length;
                for (
                  this.v = createTypedArray("float32", u),
                    this.pv = createTypedArray("float32", u),
                    i = 0;
                  i < u;
                  i += 1
                )
                  (this.v[i] = initFrame), (this.pv[i] = initFrame);
                (this._caching = {
                  lastFrame: initFrame,
                  lastIndex: 0,
                  value: createTypedArray("float32", u)
                }),
                  (this.addEffect = addEffect);
              }
              var PropertyFactory = {
                getProp: function (e, t, n, r, i) {
                  var a;
                  if (
                    (t.sid && (t = e.globalData.slotManager.getProp(t)),
                    t.k.length)
                  ) {
                    if ("number" == typeof t.k[0])
                      a = new MultiDimensionalProperty(e, t, r, i);
                    else
                      switch (n) {
                        case 0:
                          a = new KeyframedValueProperty(e, t, r, i);
                          break;
                        case 1:
                          a = new KeyframedMultidimensionalProperty(e, t, r, i);
                      }
                  } else a = new ValueProperty(e, t, r, i);
                  return a.effectsSequence.length && i.addDynamicProperty(a), a;
                }
              };
              function DynamicPropertyContainer() {}
              DynamicPropertyContainer.prototype = {
                addDynamicProperty: function (e) {
                  -1 === this.dynamicProperties.indexOf(e) &&
                    (this.dynamicProperties.push(e),
                    this.container.addDynamicProperty(this),
                    (this._isAnimated = !0));
                },
                iterateDynamicProperties: function () {
                  var e;
                  this._mdf = !1;
                  var t = this.dynamicProperties.length;
                  for (e = 0; e < t; e += 1)
                    this.dynamicProperties[e].getValue(),
                      this.dynamicProperties[e]._mdf && (this._mdf = !0);
                },
                initDynamicPropertyContainer: function (e) {
                  (this.container = e),
                    (this.dynamicProperties = []),
                    (this._mdf = !1),
                    (this._isAnimated = !1);
                }
              };
              var pointPool = poolFactory(8, function () {
                return createTypedArray("float32", 2);
              });
              function ShapePath() {
                (this.c = !1),
                  (this._length = 0),
                  (this._maxLength = 8),
                  (this.v = createSizedArray(this._maxLength)),
                  (this.o = createSizedArray(this._maxLength)),
                  (this.i = createSizedArray(this._maxLength));
              }
              (ShapePath.prototype.setPathData = function (e, t) {
                (this.c = e), this.setLength(t);
                for (var n = 0; n < t; )
                  (this.v[n] = pointPool.newElement()),
                    (this.o[n] = pointPool.newElement()),
                    (this.i[n] = pointPool.newElement()),
                    (n += 1);
              }),
                (ShapePath.prototype.setLength = function (e) {
                  for (; this._maxLength < e; ) this.doubleArrayLength();
                  this._length = e;
                }),
                (ShapePath.prototype.doubleArrayLength = function () {
                  (this.v = this.v.concat(createSizedArray(this._maxLength))),
                    (this.i = this.i.concat(createSizedArray(this._maxLength))),
                    (this.o = this.o.concat(createSizedArray(this._maxLength))),
                    (this._maxLength *= 2);
                }),
                (ShapePath.prototype.setXYAt = function (e, t, n, r, i) {
                  var a;
                  switch (
                    ((this._length = Math.max(this._length, r + 1)),
                    this._length >= this._maxLength && this.doubleArrayLength(),
                    n)
                  ) {
                    case "v":
                      a = this.v;
                      break;
                    case "i":
                      a = this.i;
                      break;
                    case "o":
                      a = this.o;
                      break;
                    default:
                      a = [];
                  }
                  (!a[r] || (a[r] && !i)) && (a[r] = pointPool.newElement()),
                    (a[r][0] = e),
                    (a[r][1] = t);
                }),
                (ShapePath.prototype.setTripleAt = function (
                  e,
                  t,
                  n,
                  r,
                  i,
                  a,
                  s,
                  o
                ) {
                  this.setXYAt(e, t, "v", s, o),
                    this.setXYAt(n, r, "o", s, o),
                    this.setXYAt(i, a, "i", s, o);
                }),
                (ShapePath.prototype.reverse = function () {
                  var e = new ShapePath();
                  e.setPathData(this.c, this._length);
                  var t = this.v,
                    n = this.o,
                    r = this.i,
                    i = 0;
                  this.c &&
                    (e.setTripleAt(
                      t[0][0],
                      t[0][1],
                      r[0][0],
                      r[0][1],
                      n[0][0],
                      n[0][1],
                      0,
                      !1
                    ),
                    (i = 1));
                  var a,
                    s = this._length - 1,
                    o = this._length;
                  for (a = i; a < o; a += 1)
                    e.setTripleAt(
                      t[s][0],
                      t[s][1],
                      r[s][0],
                      r[s][1],
                      n[s][0],
                      n[s][1],
                      a,
                      !1
                    ),
                      (s -= 1);
                  return e;
                }),
                (ShapePath.prototype.length = function () {
                  return this._length;
                });
              var shapePool =
                  ((factory = poolFactory(
                    4,
                    function () {
                      return new ShapePath();
                    },
                    function (e) {
                      var t,
                        n = e._length;
                      for (t = 0; t < n; t += 1)
                        pointPool.release(e.v[t]),
                          pointPool.release(e.i[t]),
                          pointPool.release(e.o[t]),
                          (e.v[t] = null),
                          (e.i[t] = null),
                          (e.o[t] = null);
                      (e._length = 0), (e.c = !1);
                    }
                  )),
                  (factory.clone = function (e) {
                    var t,
                      n = factory.newElement(),
                      r = void 0 === e._length ? e.v.length : e._length;
                    for (n.setLength(r), n.c = e.c, t = 0; t < r; t += 1)
                      n.setTripleAt(
                        e.v[t][0],
                        e.v[t][1],
                        e.o[t][0],
                        e.o[t][1],
                        e.i[t][0],
                        e.i[t][1],
                        t
                      );
                    return n;
                  }),
                  factory),
                factory;
              function ShapeCollection() {
                (this._length = 0),
                  (this._maxLength = 4),
                  (this.shapes = createSizedArray(this._maxLength));
              }
              (ShapeCollection.prototype.addShape = function (e) {
                this._length === this._maxLength &&
                  ((this.shapes = this.shapes.concat(
                    createSizedArray(this._maxLength)
                  )),
                  (this._maxLength *= 2)),
                  (this.shapes[this._length] = e),
                  (this._length += 1);
              }),
                (ShapeCollection.prototype.releaseShapes = function () {
                  var e;
                  for (e = 0; e < this._length; e += 1)
                    shapePool.release(this.shapes[e]);
                  this._length = 0;
                });
              var shapeCollectionPool =
                  ((ob = {
                    newShapeCollection: function () {
                      return _length
                        ? pool[(_length -= 1)]
                        : new ShapeCollection();
                    },
                    release: function (e) {
                      var t,
                        n = e._length;
                      for (t = 0; t < n; t += 1) shapePool.release(e.shapes[t]);
                      (e._length = 0),
                        _length === _maxLength &&
                          ((pool = pooling.double(pool)), (_maxLength *= 2)),
                        (pool[_length] = e),
                        (_length += 1);
                    }
                  }),
                  (_length = 0),
                  (_maxLength = 4),
                  (pool = createSizedArray(_maxLength)),
                  ob),
                ob,
                _length,
                _maxLength,
                pool,
                ShapePropertyFactory = (function () {
                  var e = -999999;
                  function t(e, t, n) {
                    var r,
                      i,
                      a,
                      s,
                      o,
                      l,
                      h,
                      u,
                      c,
                      d = n.lastIndex,
                      f = this.keyframes;
                    if (e < f[0].t - this.offsetTime)
                      (r = f[0].s[0]), (a = !0), (d = 0);
                    else if (e >= f[f.length - 1].t - this.offsetTime)
                      (r = f[f.length - 1].s
                        ? f[f.length - 1].s[0]
                        : f[f.length - 2].e[0]),
                        (a = !0);
                    else {
                      for (
                        var p, m, g, v = d, y = f.length - 1, _ = !0;
                        _ &&
                        ((p = f[v]), !((m = f[v + 1]).t - this.offsetTime > e));
  
                      )
                        v < y - 1 ? (v += 1) : (_ = !1);
                      if (
                        ((g = this.keyframesMetadata[v] || {}),
                        (d = v),
                        !(a = 1 === p.h))
                      ) {
                        if (e >= m.t - this.offsetTime) u = 1;
                        else if (e < p.t - this.offsetTime) u = 0;
                        else {
                          var b;
                          g.__fnct
                            ? (b = g.__fnct)
                            : ((b = BezierFactory.getBezierEasing(
                                p.o.x,
                                p.o.y,
                                p.i.x,
                                p.i.y
                              ).get),
                              (g.__fnct = b)),
                            (u = b(
                              (e - (p.t - this.offsetTime)) /
                                (m.t - this.offsetTime - (p.t - this.offsetTime))
                            ));
                        }
                        i = m.s ? m.s[0] : p.e[0];
                      }
                      r = p.s[0];
                    }
                    for (
                      l = t._length, h = r.i[0].length, n.lastIndex = d, s = 0;
                      s < l;
                      s += 1
                    )
                      for (o = 0; o < h; o += 1)
                        (c = a
                          ? r.i[s][o]
                          : r.i[s][o] + (i.i[s][o] - r.i[s][o]) * u),
                          (t.i[s][o] = c),
                          (c = a
                            ? r.o[s][o]
                            : r.o[s][o] + (i.o[s][o] - r.o[s][o]) * u),
                          (t.o[s][o] = c),
                          (c = a
                            ? r.v[s][o]
                            : r.v[s][o] + (i.v[s][o] - r.v[s][o]) * u),
                          (t.v[s][o] = c);
                  }
                  function n() {
                    var t = this.comp.renderedFrame - this.offsetTime,
                      n = this.keyframes[0].t - this.offsetTime,
                      r =
                        this.keyframes[this.keyframes.length - 1].t -
                        this.offsetTime,
                      i = this._caching.lastFrame;
                    return (
                      (i !== e && ((i < n && t < n) || (i > r && t > r))) ||
                        ((this._caching.lastIndex =
                          i < t ? this._caching.lastIndex : 0),
                        this.interpolateShape(t, this.pv, this._caching)),
                      (this._caching.lastFrame = t),
                      this.pv
                    );
                  }
                  function r() {
                    this.paths = this.localShapeCollection;
                  }
                  function i(e) {
                    (function (e, t) {
                      if (e._length !== t._length || e.c !== t.c) return !1;
                      var n,
                        r = e._length;
                      for (n = 0; n < r; n += 1)
                        if (
                          e.v[n][0] !== t.v[n][0] ||
                          e.v[n][1] !== t.v[n][1] ||
                          e.o[n][0] !== t.o[n][0] ||
                          e.o[n][1] !== t.o[n][1] ||
                          e.i[n][0] !== t.i[n][0] ||
                          e.i[n][1] !== t.i[n][1]
                        )
                          return !1;
                      return !0;
                    })(this.v, e) ||
                      ((this.v = shapePool.clone(e)),
                      this.localShapeCollection.releaseShapes(),
                      this.localShapeCollection.addShape(this.v),
                      (this._mdf = !0),
                      (this.paths = this.localShapeCollection));
                  }
                  function a() {
                    if (this.elem.globalData.frameId !== this.frameId)
                      if (this.effectsSequence.length) {
                        if (this.lock) this.setVValue(this.pv);
                        else {
                          var e, t;
                          (this.lock = !0),
                            (this._mdf = !1),
                            (e = this.kf
                              ? this.pv
                              : this.data.ks
                              ? this.data.ks.k
                              : this.data.pt.k);
                          var n = this.effectsSequence.length;
                          for (t = 0; t < n; t += 1)
                            e = this.effectsSequence[t](e);
                          this.setVValue(e),
                            (this.lock = !1),
                            (this.frameId = this.elem.globalData.frameId);
                        }
                      } else this._mdf = !1;
                  }
                  function s(e, t, n) {
                    (this.propType = "shape"),
                      (this.comp = e.comp),
                      (this.container = e),
                      (this.elem = e),
                      (this.data = t),
                      (this.k = !1),
                      (this.kf = !1),
                      (this._mdf = !1);
                    var i = 3 === n ? t.pt.k : t.ks.k;
                    (this.v = shapePool.clone(i)),
                      (this.pv = shapePool.clone(this.v)),
                      (this.localShapeCollection =
                        shapeCollectionPool.newShapeCollection()),
                      (this.paths = this.localShapeCollection),
                      this.paths.addShape(this.v),
                      (this.reset = r),
                      (this.effectsSequence = []);
                  }
                  function o(e) {
                    this.effectsSequence.push(e),
                      this.container.addDynamicProperty(this);
                  }
                  function l(t, i, a) {
                    (this.propType = "shape"),
                      (this.comp = t.comp),
                      (this.elem = t),
                      (this.container = t),
                      (this.offsetTime = t.data.st),
                      (this.keyframes = 3 === a ? i.pt.k : i.ks.k),
                      (this.keyframesMetadata = []),
                      (this.k = !0),
                      (this.kf = !0);
                    var s = this.keyframes[0].s[0].i.length;
                    (this.v = shapePool.newElement()),
                      this.v.setPathData(this.keyframes[0].s[0].c, s),
                      (this.pv = shapePool.clone(this.v)),
                      (this.localShapeCollection =
                        shapeCollectionPool.newShapeCollection()),
                      (this.paths = this.localShapeCollection),
                      this.paths.addShape(this.v),
                      (this.lastFrame = e),
                      (this.reset = r),
                      (this._caching = { lastFrame: e, lastIndex: 0 }),
                      (this.effectsSequence = [n.bind(this)]);
                  }
                  (s.prototype.interpolateShape = t),
                    (s.prototype.getValue = a),
                    (s.prototype.setVValue = i),
                    (s.prototype.addEffect = o),
                    (l.prototype.getValue = a),
                    (l.prototype.interpolateShape = t),
                    (l.prototype.setVValue = i),
                    (l.prototype.addEffect = o);
                  var h = (function () {
                      var e = roundCorner;
                      function t(e, t) {
                        (this.v = shapePool.newElement()),
                          this.v.setPathData(!0, 4),
                          (this.localShapeCollection =
                            shapeCollectionPool.newShapeCollection()),
                          (this.paths = this.localShapeCollection),
                          this.localShapeCollection.addShape(this.v),
                          (this.d = t.d),
                          (this.elem = e),
                          (this.comp = e.comp),
                          (this.frameId = -1),
                          this.initDynamicPropertyContainer(e),
                          (this.p = PropertyFactory.getProp(e, t.p, 1, 0, this)),
                          (this.s = PropertyFactory.getProp(e, t.s, 1, 0, this)),
                          this.dynamicProperties.length
                            ? (this.k = !0)
                            : ((this.k = !1), this.convertEllToPath());
                      }
                      return (
                        (t.prototype = {
                          reset: r,
                          getValue: function () {
                            this.elem.globalData.frameId !== this.frameId &&
                              ((this.frameId = this.elem.globalData.frameId),
                              this.iterateDynamicProperties(),
                              this._mdf && this.convertEllToPath());
                          },
                          convertEllToPath: function () {
                            var t = this.p.v[0],
                              n = this.p.v[1],
                              r = this.s.v[0] / 2,
                              i = this.s.v[1] / 2,
                              a = 3 !== this.d,
                              s = this.v;
                            (s.v[0][0] = t),
                              (s.v[0][1] = n - i),
                              (s.v[1][0] = a ? t + r : t - r),
                              (s.v[1][1] = n),
                              (s.v[2][0] = t),
                              (s.v[2][1] = n + i),
                              (s.v[3][0] = a ? t - r : t + r),
                              (s.v[3][1] = n),
                              (s.i[0][0] = a ? t - r * e : t + r * e),
                              (s.i[0][1] = n - i),
                              (s.i[1][0] = a ? t + r : t - r),
                              (s.i[1][1] = n - i * e),
                              (s.i[2][0] = a ? t + r * e : t - r * e),
                              (s.i[2][1] = n + i),
                              (s.i[3][0] = a ? t - r : t + r),
                              (s.i[3][1] = n + i * e),
                              (s.o[0][0] = a ? t + r * e : t - r * e),
                              (s.o[0][1] = n - i),
                              (s.o[1][0] = a ? t + r : t - r),
                              (s.o[1][1] = n + i * e),
                              (s.o[2][0] = a ? t - r * e : t + r * e),
                              (s.o[2][1] = n + i),
                              (s.o[3][0] = a ? t - r : t + r),
                              (s.o[3][1] = n - i * e);
                          }
                        }),
                        extendPrototype([DynamicPropertyContainer], t),
                        t
                      );
                    })(),
                    u = (function () {
                      function e(e, t) {
                        (this.v = shapePool.newElement()),
                          this.v.setPathData(!0, 0),
                          (this.elem = e),
                          (this.comp = e.comp),
                          (this.data = t),
                          (this.frameId = -1),
                          (this.d = t.d),
                          this.initDynamicPropertyContainer(e),
                          1 === t.sy
                            ? ((this.ir = PropertyFactory.getProp(
                                e,
                                t.ir,
                                0,
                                0,
                                this
                              )),
                              (this.is = PropertyFactory.getProp(
                                e,
                                t.is,
                                0,
                                0.01,
                                this
                              )),
                              (this.convertToPath = this.convertStarToPath))
                            : (this.convertToPath = this.convertPolygonToPath),
                          (this.pt = PropertyFactory.getProp(
                            e,
                            t.pt,
                            0,
                            0,
                            this
                          )),
                          (this.p = PropertyFactory.getProp(e, t.p, 1, 0, this)),
                          (this.r = PropertyFactory.getProp(
                            e,
                            t.r,
                            0,
                            degToRads,
                            this
                          )),
                          (this.or = PropertyFactory.getProp(
                            e,
                            t.or,
                            0,
                            0,
                            this
                          )),
                          (this.os = PropertyFactory.getProp(
                            e,
                            t.os,
                            0,
                            0.01,
                            this
                          )),
                          (this.localShapeCollection =
                            shapeCollectionPool.newShapeCollection()),
                          this.localShapeCollection.addShape(this.v),
                          (this.paths = this.localShapeCollection),
                          this.dynamicProperties.length
                            ? (this.k = !0)
                            : ((this.k = !1), this.convertToPath());
                      }
                      return (
                        (e.prototype = {
                          reset: r,
                          getValue: function () {
                            this.elem.globalData.frameId !== this.frameId &&
                              ((this.frameId = this.elem.globalData.frameId),
                              this.iterateDynamicProperties(),
                              this._mdf && this.convertToPath());
                          },
                          convertStarToPath: function () {
                            var e,
                              t,
                              n,
                              r,
                              i = 2 * Math.floor(this.pt.v),
                              a = (2 * Math.PI) / i,
                              s = !0,
                              o = this.or.v,
                              l = this.ir.v,
                              h = this.os.v,
                              u = this.is.v,
                              c = (2 * Math.PI * o) / (2 * i),
                              d = (2 * Math.PI * l) / (2 * i),
                              f = -Math.PI / 2;
                            f += this.r.v;
                            var p = 3 === this.data.d ? -1 : 1;
                            for (this.v._length = 0, e = 0; e < i; e += 1) {
                              (n = s ? h : u), (r = s ? c : d);
                              var m = (t = s ? o : l) * Math.cos(f),
                                g = t * Math.sin(f),
                                v =
                                  0 === m && 0 === g
                                    ? 0
                                    : g / Math.sqrt(m * m + g * g),
                                y =
                                  0 === m && 0 === g
                                    ? 0
                                    : -m / Math.sqrt(m * m + g * g);
                              (m += +this.p.v[0]),
                                (g += +this.p.v[1]),
                                this.v.setTripleAt(
                                  m,
                                  g,
                                  m - v * r * n * p,
                                  g - y * r * n * p,
                                  m + v * r * n * p,
                                  g + y * r * n * p,
                                  e,
                                  !0
                                ),
                                (s = !s),
                                (f += a * p);
                            }
                          },
                          convertPolygonToPath: function () {
                            var e,
                              t = Math.floor(this.pt.v),
                              n = (2 * Math.PI) / t,
                              r = this.or.v,
                              i = this.os.v,
                              a = (2 * Math.PI * r) / (4 * t),
                              s = 0.5 * -Math.PI,
                              o = 3 === this.data.d ? -1 : 1;
                            for (
                              s += this.r.v, this.v._length = 0, e = 0;
                              e < t;
                              e += 1
                            ) {
                              var l = r * Math.cos(s),
                                h = r * Math.sin(s),
                                u =
                                  0 === l && 0 === h
                                    ? 0
                                    : h / Math.sqrt(l * l + h * h),
                                c =
                                  0 === l && 0 === h
                                    ? 0
                                    : -l / Math.sqrt(l * l + h * h);
                              (l += +this.p.v[0]),
                                (h += +this.p.v[1]),
                                this.v.setTripleAt(
                                  l,
                                  h,
                                  l - u * a * i * o,
                                  h - c * a * i * o,
                                  l + u * a * i * o,
                                  h + c * a * i * o,
                                  e,
                                  !0
                                ),
                                (s += n * o);
                            }
                            (this.paths.length = 0), (this.paths[0] = this.v);
                          }
                        }),
                        extendPrototype([DynamicPropertyContainer], e),
                        e
                      );
                    })(),
                    c = (function () {
                      function e(e, t) {
                        (this.v = shapePool.newElement()),
                          (this.v.c = !0),
                          (this.localShapeCollection =
                            shapeCollectionPool.newShapeCollection()),
                          this.localShapeCollection.addShape(this.v),
                          (this.paths = this.localShapeCollection),
                          (this.elem = e),
                          (this.comp = e.comp),
                          (this.frameId = -1),
                          (this.d = t.d),
                          this.initDynamicPropertyContainer(e),
                          (this.p = PropertyFactory.getProp(e, t.p, 1, 0, this)),
                          (this.s = PropertyFactory.getProp(e, t.s, 1, 0, this)),
                          (this.r = PropertyFactory.getProp(e, t.r, 0, 0, this)),
                          this.dynamicProperties.length
                            ? (this.k = !0)
                            : ((this.k = !1), this.convertRectToPath());
                      }
                      return (
                        (e.prototype = {
                          convertRectToPath: function () {
                            var e = this.p.v[0],
                              t = this.p.v[1],
                              n = this.s.v[0] / 2,
                              r = this.s.v[1] / 2,
                              i = bmMin(n, r, this.r.v),
                              a = i * (1 - roundCorner);
                            (this.v._length = 0),
                              2 === this.d || 1 === this.d
                                ? (this.v.setTripleAt(
                                    e + n,
                                    t - r + i,
                                    e + n,
                                    t - r + i,
                                    e + n,
                                    t - r + a,
                                    0,
                                    !0
                                  ),
                                  this.v.setTripleAt(
                                    e + n,
                                    t + r - i,
                                    e + n,
                                    t + r - a,
                                    e + n,
                                    t + r - i,
                                    1,
                                    !0
                                  ),
                                  0 !== i
                                    ? (this.v.setTripleAt(
                                        e + n - i,
                                        t + r,
                                        e + n - i,
                                        t + r,
                                        e + n - a,
                                        t + r,
                                        2,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n + i,
                                        t + r,
                                        e - n + a,
                                        t + r,
                                        e - n + i,
                                        t + r,
                                        3,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n,
                                        t + r - i,
                                        e - n,
                                        t + r - i,
                                        e - n,
                                        t + r - a,
                                        4,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n,
                                        t - r + i,
                                        e - n,
                                        t - r + a,
                                        e - n,
                                        t - r + i,
                                        5,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n + i,
                                        t - r,
                                        e - n + i,
                                        t - r,
                                        e - n + a,
                                        t - r,
                                        6,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e + n - i,
                                        t - r,
                                        e + n - a,
                                        t - r,
                                        e + n - i,
                                        t - r,
                                        7,
                                        !0
                                      ))
                                    : (this.v.setTripleAt(
                                        e - n,
                                        t + r,
                                        e - n + a,
                                        t + r,
                                        e - n,
                                        t + r,
                                        2
                                      ),
                                      this.v.setTripleAt(
                                        e - n,
                                        t - r,
                                        e - n,
                                        t - r + a,
                                        e - n,
                                        t - r,
                                        3
                                      )))
                                : (this.v.setTripleAt(
                                    e + n,
                                    t - r + i,
                                    e + n,
                                    t - r + a,
                                    e + n,
                                    t - r + i,
                                    0,
                                    !0
                                  ),
                                  0 !== i
                                    ? (this.v.setTripleAt(
                                        e + n - i,
                                        t - r,
                                        e + n - i,
                                        t - r,
                                        e + n - a,
                                        t - r,
                                        1,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n + i,
                                        t - r,
                                        e - n + a,
                                        t - r,
                                        e - n + i,
                                        t - r,
                                        2,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n,
                                        t - r + i,
                                        e - n,
                                        t - r + i,
                                        e - n,
                                        t - r + a,
                                        3,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n,
                                        t + r - i,
                                        e - n,
                                        t + r - a,
                                        e - n,
                                        t + r - i,
                                        4,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n + i,
                                        t + r,
                                        e - n + i,
                                        t + r,
                                        e - n + a,
                                        t + r,
                                        5,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e + n - i,
                                        t + r,
                                        e + n - a,
                                        t + r,
                                        e + n - i,
                                        t + r,
                                        6,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e + n,
                                        t + r - i,
                                        e + n,
                                        t + r - i,
                                        e + n,
                                        t + r - a,
                                        7,
                                        !0
                                      ))
                                    : (this.v.setTripleAt(
                                        e - n,
                                        t - r,
                                        e - n + a,
                                        t - r,
                                        e - n,
                                        t - r,
                                        1,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e - n,
                                        t + r,
                                        e - n,
                                        t + r - a,
                                        e - n,
                                        t + r,
                                        2,
                                        !0
                                      ),
                                      this.v.setTripleAt(
                                        e + n,
                                        t + r,
                                        e + n - a,
                                        t + r,
                                        e + n,
                                        t + r,
                                        3,
                                        !0
                                      )));
                          },
                          getValue: function () {
                            this.elem.globalData.frameId !== this.frameId &&
                              ((this.frameId = this.elem.globalData.frameId),
                              this.iterateDynamicProperties(),
                              this._mdf && this.convertRectToPath());
                          },
                          reset: r
                        }),
                        extendPrototype([DynamicPropertyContainer], e),
                        e
                      );
                    })();
                  return {
                    getShapeProp: function (e, t, n) {
                      var r;
                      return (
                        3 === n || 4 === n
                          ? (r = (3 === n ? t.pt : t.ks).k.length
                              ? new l(e, t, n)
                              : new s(e, t, n))
                          : 5 === n
                          ? (r = new c(e, t))
                          : 6 === n
                          ? (r = new h(e, t))
                          : 7 === n && (r = new u(e, t)),
                        r.k && e.addDynamicProperty(r),
                        r
                      );
                    },
                    getConstructorFunction: function () {
                      return s;
                    },
                    getKeyframedConstructorFunction: function () {
                      return l;
                    }
                  };
                })(),
                Matrix = (function () {
                  var e = Math.cos,
                    t = Math.sin,
                    n = Math.tan,
                    r = Math.round;
                  function i() {
                    return (
                      (this.props[0] = 1),
                      (this.props[1] = 0),
                      (this.props[2] = 0),
                      (this.props[3] = 0),
                      (this.props[4] = 0),
                      (this.props[5] = 1),
                      (this.props[6] = 0),
                      (this.props[7] = 0),
                      (this.props[8] = 0),
                      (this.props[9] = 0),
                      (this.props[10] = 1),
                      (this.props[11] = 0),
                      (this.props[12] = 0),
                      (this.props[13] = 0),
                      (this.props[14] = 0),
                      (this.props[15] = 1),
                      this
                    );
                  }
                  function a(n) {
                    if (0 === n) return this;
                    var r = e(n),
                      i = t(n);
                    return this._t(
                      r,
                      -i,
                      0,
                      0,
                      i,
                      r,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      1
                    );
                  }
                  function s(n) {
                    if (0 === n) return this;
                    var r = e(n),
                      i = t(n);
                    return this._t(
                      1,
                      0,
                      0,
                      0,
                      0,
                      r,
                      -i,
                      0,
                      0,
                      i,
                      r,
                      0,
                      0,
                      0,
                      0,
                      1
                    );
                  }
                  function o(n) {
                    if (0 === n) return this;
                    var r = e(n),
                      i = t(n);
                    return this._t(
                      r,
                      0,
                      i,
                      0,
                      0,
                      1,
                      0,
                      0,
                      -i,
                      0,
                      r,
                      0,
                      0,
                      0,
                      0,
                      1
                    );
                  }
                  function l(n) {
                    if (0 === n) return this;
                    var r = e(n),
                      i = t(n);
                    return this._t(
                      r,
                      -i,
                      0,
                      0,
                      i,
                      r,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      1
                    );
                  }
                  function h(e, t) {
                    return this._t(1, t, e, 1, 0, 0);
                  }
                  function u(e, t) {
                    return this.shear(n(e), n(t));
                  }
                  function c(r, i) {
                    var a = e(i),
                      s = t(i);
                    return this._t(
                      a,
                      s,
                      0,
                      0,
                      -s,
                      a,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                      0,
                      0,
                      0,
                      1
                    )
                      ._t(1, 0, 0, 0, n(r), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
                      ._t(a, -s, 0, 0, s, a, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
                  }
                  function d(e, t, n) {
                    return (
                      n || 0 === n || (n = 1),
                      1 === e && 1 === t && 1 === n
                        ? this
                        : this._t(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1)
                    );
                  }
                  function f(e, t, n, r, i, a, s, o, l, h, u, c, d, f, p, m) {
                    return (
                      (this.props[0] = e),
                      (this.props[1] = t),
                      (this.props[2] = n),
                      (this.props[3] = r),
                      (this.props[4] = i),
                      (this.props[5] = a),
                      (this.props[6] = s),
                      (this.props[7] = o),
                      (this.props[8] = l),
                      (this.props[9] = h),
                      (this.props[10] = u),
                      (this.props[11] = c),
                      (this.props[12] = d),
                      (this.props[13] = f),
                      (this.props[14] = p),
                      (this.props[15] = m),
                      this
                    );
                  }
                  function p(e, t, n) {
                    return (
                      (n = n || 0),
                      0 !== e || 0 !== t || 0 !== n
                        ? this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, e, t, n, 1)
                        : this
                    );
                  }
                  function m(e, t, n, r, i, a, s, o, l, h, u, c, d, f, p, m) {
                    var g = this.props;
                    if (
                      1 === e &&
                      0 === t &&
                      0 === n &&
                      0 === r &&
                      0 === i &&
                      1 === a &&
                      0 === s &&
                      0 === o &&
                      0 === l &&
                      0 === h &&
                      1 === u &&
                      0 === c
                    )
                      return (
                        (g[12] = g[12] * e + g[15] * d),
                        (g[13] = g[13] * a + g[15] * f),
                        (g[14] = g[14] * u + g[15] * p),
                        (g[15] *= m),
                        (this._identityCalculated = !1),
                        this
                      );
                    var v = g[0],
                      y = g[1],
                      _ = g[2],
                      b = g[3],
                      x = g[4],
                      S = g[5],
                      E = g[6],
                      w = g[7],
                      T = g[8],
                      M = g[9],
                      A = g[10],
                      C = g[11],
                      P = g[12],
                      k = g[13],
                      R = g[14],
                      D = g[15];
                    return (
                      (g[0] = v * e + y * i + _ * l + b * d),
                      (g[1] = v * t + y * a + _ * h + b * f),
                      (g[2] = v * n + y * s + _ * u + b * p),
                      (g[3] = v * r + y * o + _ * c + b * m),
                      (g[4] = x * e + S * i + E * l + w * d),
                      (g[5] = x * t + S * a + E * h + w * f),
                      (g[6] = x * n + S * s + E * u + w * p),
                      (g[7] = x * r + S * o + E * c + w * m),
                      (g[8] = T * e + M * i + A * l + C * d),
                      (g[9] = T * t + M * a + A * h + C * f),
                      (g[10] = T * n + M * s + A * u + C * p),
                      (g[11] = T * r + M * o + A * c + C * m),
                      (g[12] = P * e + k * i + R * l + D * d),
                      (g[13] = P * t + k * a + R * h + D * f),
                      (g[14] = P * n + k * s + R * u + D * p),
                      (g[15] = P * r + k * o + R * c + D * m),
                      (this._identityCalculated = !1),
                      this
                    );
                  }
                  function g(e) {
                    var t = e.props;
                    return this.transform(
                      t[0],
                      t[1],
                      t[2],
                      t[3],
                      t[4],
                      t[5],
                      t[6],
                      t[7],
                      t[8],
                      t[9],
                      t[10],
                      t[11],
                      t[12],
                      t[13],
                      t[14],
                      t[15]
                    );
                  }
                  function v() {
                    return (
                      this._identityCalculated ||
                        ((this._identity = !(
                          1 !== this.props[0] ||
                          0 !== this.props[1] ||
                          0 !== this.props[2] ||
                          0 !== this.props[3] ||
                          0 !== this.props[4] ||
                          1 !== this.props[5] ||
                          0 !== this.props[6] ||
                          0 !== this.props[7] ||
                          0 !== this.props[8] ||
                          0 !== this.props[9] ||
                          1 !== this.props[10] ||
                          0 !== this.props[11] ||
                          0 !== this.props[12] ||
                          0 !== this.props[13] ||
                          0 !== this.props[14] ||
                          1 !== this.props[15]
                        )),
                        (this._identityCalculated = !0)),
                      this._identity
                    );
                  }
                  function y(e) {
                    for (var t = 0; t < 16; ) {
                      if (e.props[t] !== this.props[t]) return !1;
                      t += 1;
                    }
                    return !0;
                  }
                  function _(e) {
                    var t;
                    for (t = 0; t < 16; t += 1) e.props[t] = this.props[t];
                    return e;
                  }
                  function b(e) {
                    var t;
                    for (t = 0; t < 16; t += 1) this.props[t] = e[t];
                  }
                  function x(e, t, n) {
                    return {
                      x:
                        e * this.props[0] +
                        t * this.props[4] +
                        n * this.props[8] +
                        this.props[12],
                      y:
                        e * this.props[1] +
                        t * this.props[5] +
                        n * this.props[9] +
                        this.props[13],
                      z:
                        e * this.props[2] +
                        t * this.props[6] +
                        n * this.props[10] +
                        this.props[14]
                    };
                  }
                  function S(e, t, n) {
                    return (
                      e * this.props[0] +
                      t * this.props[4] +
                      n * this.props[8] +
                      this.props[12]
                    );
                  }
                  function E(e, t, n) {
                    return (
                      e * this.props[1] +
                      t * this.props[5] +
                      n * this.props[9] +
                      this.props[13]
                    );
                  }
                  function w(e, t, n) {
                    return (
                      e * this.props[2] +
                      t * this.props[6] +
                      n * this.props[10] +
                      this.props[14]
                    );
                  }
                  function T() {
                    var e =
                        this.props[0] * this.props[5] -
                        this.props[1] * this.props[4],
                      t = this.props[5] / e,
                      n = -this.props[1] / e,
                      r = -this.props[4] / e,
                      i = this.props[0] / e,
                      a =
                        (this.props[4] * this.props[13] -
                          this.props[5] * this.props[12]) /
                        e,
                      s =
                        -(
                          this.props[0] * this.props[13] -
                          this.props[1] * this.props[12]
                        ) / e,
                      o = new Matrix();
                    return (
                      (o.props[0] = t),
                      (o.props[1] = n),
                      (o.props[4] = r),
                      (o.props[5] = i),
                      (o.props[12] = a),
                      (o.props[13] = s),
                      o
                    );
                  }
                  function M(e) {
                    return this.getInverseMatrix().applyToPointArray(
                      e[0],
                      e[1],
                      e[2] || 0
                    );
                  }
                  function A(e) {
                    var t,
                      n = e.length,
                      r = [];
                    for (t = 0; t < n; t += 1) r[t] = M(e[t]);
                    return r;
                  }
                  function C(e, t, n) {
                    var r = createTypedArray("float32", 6);
                    if (this.isIdentity())
                      (r[0] = e[0]),
                        (r[1] = e[1]),
                        (r[2] = t[0]),
                        (r[3] = t[1]),
                        (r[4] = n[0]),
                        (r[5] = n[1]);
                    else {
                      var i = this.props[0],
                        a = this.props[1],
                        s = this.props[4],
                        o = this.props[5],
                        l = this.props[12],
                        h = this.props[13];
                      (r[0] = e[0] * i + e[1] * s + l),
                        (r[1] = e[0] * a + e[1] * o + h),
                        (r[2] = t[0] * i + t[1] * s + l),
                        (r[3] = t[0] * a + t[1] * o + h),
                        (r[4] = n[0] * i + n[1] * s + l),
                        (r[5] = n[0] * a + n[1] * o + h);
                    }
                    return r;
                  }
                  function P(e, t, n) {
                    return this.isIdentity()
                      ? [e, t, n]
                      : [
                          e * this.props[0] +
                            t * this.props[4] +
                            n * this.props[8] +
                            this.props[12],
                          e * this.props[1] +
                            t * this.props[5] +
                            n * this.props[9] +
                            this.props[13],
                          e * this.props[2] +
                            t * this.props[6] +
                            n * this.props[10] +
                            this.props[14]
                        ];
                  }
                  function k(e, t) {
                    if (this.isIdentity()) return e + "," + t;
                    var n = this.props;
                    return (
                      Math.round(100 * (e * n[0] + t * n[4] + n[12])) / 100 +
                      "," +
                      Math.round(100 * (e * n[1] + t * n[5] + n[13])) / 100
                    );
                  }
                  function R() {
                    for (var e = 0, t = this.props, n = "matrix3d("; e < 16; )
                      (n += r(1e4 * t[e]) / 1e4),
                        (n += 15 === e ? ")" : ","),
                        (e += 1);
                    return n;
                  }
                  function D(e) {
                    return (e < 1e-6 && e > 0) || (e > -1e-6 && e < 0)
                      ? r(1e4 * e) / 1e4
                      : e;
                  }
                  function I() {
                    var e = this.props;
                    return (
                      "matrix(" +
                      D(e[0]) +
                      "," +
                      D(e[1]) +
                      "," +
                      D(e[4]) +
                      "," +
                      D(e[5]) +
                      "," +
                      D(e[12]) +
                      "," +
                      D(e[13]) +
                      ")"
                    );
                  }
                  return function () {
                    (this.reset = i),
                      (this.rotate = a),
                      (this.rotateX = s),
                      (this.rotateY = o),
                      (this.rotateZ = l),
                      (this.skew = u),
                      (this.skewFromAxis = c),
                      (this.shear = h),
                      (this.scale = d),
                      (this.setTransform = f),
                      (this.translate = p),
                      (this.transform = m),
                      (this.multiply = g),
                      (this.applyToPoint = x),
                      (this.applyToX = S),
                      (this.applyToY = E),
                      (this.applyToZ = w),
                      (this.applyToPointArray = P),
                      (this.applyToTriplePoints = C),
                      (this.applyToPointStringified = k),
                      (this.toCSS = R),
                      (this.to2dCSS = I),
                      (this.clone = _),
                      (this.cloneFromProps = b),
                      (this.equals = y),
                      (this.inversePoints = A),
                      (this.inversePoint = M),
                      (this.getInverseMatrix = T),
                      (this._t = this.transform),
                      (this.isIdentity = v),
                      (this._identity = !0),
                      (this._identityCalculated = !1),
                      (this.props = createTypedArray("float32", 16)),
                      this.reset();
                  };
                })();
              function _typeof$3(e) {
                return (
                  (_typeof$3 =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (e) {
                          return typeof e;
                        }
                      : function (e) {
                          return e &&
                            "function" == typeof Symbol &&
                            e.constructor === Symbol &&
                            e !== Symbol.prototype
                            ? "symbol"
                            : typeof e;
                        }),
                  _typeof$3(e)
                );
              }
              var lottie = {},
                standalone = "__[STANDALONE]__",
                animationData = "__[ANIMATIONDATA]__",
                renderer = "";
              function setLocation(e) {
                setLocationHref(e);
              }
              function searchAnimations() {
                !0 === standalone
                  ? animationManager.searchAnimations(
                      animationData,
                      standalone,
                      renderer
                    )
                  : animationManager.searchAnimations();
              }
              function setSubframeRendering(e) {
                setSubframeEnabled(e);
              }
              function setPrefix(e) {
                setIdPrefix(e);
              }
              function loadAnimation(e) {
                return (
                  !0 === standalone &&
                    (e.animationData = JSON.parse(animationData)),
                  animationManager.loadAnimation(e)
                );
              }
              function setQuality(e) {
                if ("string" == typeof e)
                  switch (e) {
                    case "high":
                      setDefaultCurveSegments(200);
                      break;
                    default:
                    case "medium":
                      setDefaultCurveSegments(50);
                      break;
                    case "low":
                      setDefaultCurveSegments(10);
                  }
                else !isNaN(e) && e > 1 && setDefaultCurveSegments(e);
                getDefaultCurveSegments() >= 50
                  ? roundValues(!1)
                  : roundValues(!0);
              }
              function inBrowser() {
                return "undefined" != typeof navigator;
              }
              function installPlugin(e, t) {
                "expressions" === e && setExpressionsPlugin(t);
              }
              function getFactory(e) {
                switch (e) {
                  case "propertyFactory":
                    return PropertyFactory;
                  case "shapePropertyFactory":
                    return ShapePropertyFactory;
                  case "matrix":
                    return Matrix;
                  default:
                    return null;
                }
              }
              function checkReady() {
                "complete" === document.readyState &&
                  (clearInterval(readyStateCheckInterval), searchAnimations());
              }
              function getQueryVariable(e) {
                for (
                  var t = queryString.split("&"), n = 0;
                  n < t.length;
                  n += 1
                ) {
                  var r = t[n].split("=");
                  if (decodeURIComponent(r[0]) == e)
                    return decodeURIComponent(r[1]);
                }
                return null;
              }
              (lottie.play = animationManager.play),
                (lottie.pause = animationManager.pause),
                (lottie.setLocationHref = setLocation),
                (lottie.togglePause = animationManager.togglePause),
                (lottie.setSpeed = animationManager.setSpeed),
                (lottie.setDirection = animationManager.setDirection),
                (lottie.stop = animationManager.stop),
                (lottie.searchAnimations = searchAnimations),
                (lottie.registerAnimation = animationManager.registerAnimation),
                (lottie.loadAnimation = loadAnimation),
                (lottie.setSubframeRendering = setSubframeRendering),
                (lottie.resize = animationManager.resize),
                (lottie.goToAndStop = animationManager.goToAndStop),
                (lottie.destroy = animationManager.destroy),
                (lottie.setQuality = setQuality),
                (lottie.inBrowser = inBrowser),
                (lottie.installPlugin = installPlugin),
                (lottie.freeze = animationManager.freeze),
                (lottie.unfreeze = animationManager.unfreeze),
                (lottie.setVolume = animationManager.setVolume),
                (lottie.mute = animationManager.mute),
                (lottie.unmute = animationManager.unmute),
                (lottie.getRegisteredAnimations =
                  animationManager.getRegisteredAnimations),
                (lottie.useWebWorker = setWebWorker),
                (lottie.setIDPrefix = setPrefix),
                (lottie.__getFactory = getFactory),
                (lottie.version = "5.12.2");
              var queryString = "";
              if (standalone) {
                var scripts = document.getElementsByTagName("script"),
                  index = scripts.length - 1,
                  myScript = scripts[index] || { src: "" };
                (queryString = myScript.src
                  ? myScript.src.replace(/^[^\?]+\??/, "")
                  : ""),
                  (renderer = getQueryVariable("renderer"));
              }
              var readyStateCheckInterval = setInterval(checkReady, 100);
              try {
                "object" !== _typeof$3(exports) && __webpack_require__.amdO;
              } catch (e) {}
              var ShapeModifiers = (function () {
                var e = {},
                  t = {};
                return (
                  (e.registerModifier = function (e, n) {
                    t[e] || (t[e] = n);
                  }),
                  (e.getModifier = function (e, n, r) {
                    return new t[e](n, r);
                  }),
                  e
                );
              })();
              function ShapeModifier() {}
              function TrimModifier() {}
              function PuckerAndBloatModifier() {}
              (ShapeModifier.prototype.initModifierProperties = function () {}),
                (ShapeModifier.prototype.addShapeToModifier = function () {}),
                (ShapeModifier.prototype.addShape = function (e) {
                  if (!this.closed) {
                    e.sh.container.addDynamicProperty(e.sh);
                    var t = {
                      shape: e.sh,
                      data: e,
                      localShapeCollection:
                        shapeCollectionPool.newShapeCollection()
                    };
                    this.shapes.push(t),
                      this.addShapeToModifier(t),
                      this._isAnimated && e.setAsAnimated();
                  }
                }),
                (ShapeModifier.prototype.init = function (e, t) {
                  (this.shapes = []),
                    (this.elem = e),
                    this.initDynamicPropertyContainer(e),
                    this.initModifierProperties(e, t),
                    (this.frameId = initialDefaultFrame),
                    (this.closed = !1),
                    (this.k = !1),
                    this.dynamicProperties.length
                      ? (this.k = !0)
                      : this.getValue(!0);
                }),
                (ShapeModifier.prototype.processKeys = function () {
                  this.elem.globalData.frameId !== this.frameId &&
                    ((this.frameId = this.elem.globalData.frameId),
                    this.iterateDynamicProperties());
                }),
                extendPrototype([DynamicPropertyContainer], ShapeModifier),
                extendPrototype([ShapeModifier], TrimModifier),
                (TrimModifier.prototype.initModifierProperties = function (e, t) {
                  (this.s = PropertyFactory.getProp(e, t.s, 0, 0.01, this)),
                    (this.e = PropertyFactory.getProp(e, t.e, 0, 0.01, this)),
                    (this.o = PropertyFactory.getProp(e, t.o, 0, 0, this)),
                    (this.sValue = 0),
                    (this.eValue = 0),
                    (this.getValue = this.processKeys),
                    (this.m = t.m),
                    (this._isAnimated =
                      !!this.s.effectsSequence.length ||
                      !!this.e.effectsSequence.length ||
                      !!this.o.effectsSequence.length);
                }),
                (TrimModifier.prototype.addShapeToModifier = function (e) {
                  e.pathsData = [];
                }),
                (TrimModifier.prototype.calculateShapeEdges = function (
                  e,
                  t,
                  n,
                  r,
                  i
                ) {
                  var a = [];
                  t <= 1
                    ? a.push({ s: e, e: t })
                    : e >= 1
                    ? a.push({ s: e - 1, e: t - 1 })
                    : (a.push({ s: e, e: 1 }), a.push({ s: 0, e: t - 1 }));
                  var s,
                    o,
                    l = [],
                    h = a.length;
                  for (s = 0; s < h; s += 1) {
                    var u, c;
                    (o = a[s]).e * i < r ||
                      o.s * i > r + n ||
                      ((u = o.s * i <= r ? 0 : (o.s * i - r) / n),
                      (c = o.e * i >= r + n ? 1 : (o.e * i - r) / n),
                      l.push([u, c]));
                  }
                  return l.length || l.push([0, 0]), l;
                }),
                (TrimModifier.prototype.releasePathsData = function (e) {
                  var t,
                    n = e.length;
                  for (t = 0; t < n; t += 1) segmentsLengthPool.release(e[t]);
                  return (e.length = 0), e;
                }),
                (TrimModifier.prototype.processShapes = function (e) {
                  var t, n, r, i;
                  if (this._mdf || e) {
                    var a = (this.o.v % 360) / 360;
                    if (
                      (a < 0 && (a += 1),
                      (t =
                        this.s.v > 1
                          ? 1 + a
                          : this.s.v < 0
                          ? 0 + a
                          : this.s.v + a) >
                        (n =
                          this.e.v > 1
                            ? 1 + a
                            : this.e.v < 0
                            ? 0 + a
                            : this.e.v + a))
                    ) {
                      var s = t;
                      (t = n), (n = s);
                    }
                    (t = 1e-4 * Math.round(1e4 * t)),
                      (n = 1e-4 * Math.round(1e4 * n)),
                      (this.sValue = t),
                      (this.eValue = n);
                  } else (t = this.sValue), (n = this.eValue);
                  var o,
                    l,
                    h,
                    u,
                    c,
                    d = this.shapes.length,
                    f = 0;
                  if (n === t)
                    for (i = 0; i < d; i += 1)
                      this.shapes[i].localShapeCollection.releaseShapes(),
                        (this.shapes[i].shape._mdf = !0),
                        (this.shapes[i].shape.paths =
                          this.shapes[i].localShapeCollection),
                        this._mdf && (this.shapes[i].pathsData.length = 0);
                  else if ((1 === n && 0 === t) || (0 === n && 1 === t)) {
                    if (this._mdf)
                      for (i = 0; i < d; i += 1)
                        (this.shapes[i].pathsData.length = 0),
                          (this.shapes[i].shape._mdf = !0);
                  } else {
                    var p,
                      m,
                      g = [];
                    for (i = 0; i < d; i += 1)
                      if (
                        (p = this.shapes[i]).shape._mdf ||
                        this._mdf ||
                        e ||
                        2 === this.m
                      ) {
                        if (
                          ((l = (r = p.shape.paths)._length),
                          (c = 0),
                          !p.shape._mdf && p.pathsData.length)
                        )
                          c = p.totalShapeLength;
                        else {
                          for (
                            h = this.releasePathsData(p.pathsData), o = 0;
                            o < l;
                            o += 1
                          )
                            (u = bez.getSegmentsLength(r.shapes[o])),
                              h.push(u),
                              (c += u.totalLength);
                          (p.totalShapeLength = c), (p.pathsData = h);
                        }
                        (f += c), (p.shape._mdf = !0);
                      } else p.shape.paths = p.localShapeCollection;
                    var v,
                      y = t,
                      _ = n,
                      b = 0;
                    for (i = d - 1; i >= 0; i -= 1)
                      if ((p = this.shapes[i]).shape._mdf) {
                        for (
                          (m = p.localShapeCollection).releaseShapes(),
                            2 === this.m && d > 1
                              ? ((v = this.calculateShapeEdges(
                                  t,
                                  n,
                                  p.totalShapeLength,
                                  b,
                                  f
                                )),
                                (b += p.totalShapeLength))
                              : (v = [[y, _]]),
                            l = v.length,
                            o = 0;
                          o < l;
                          o += 1
                        ) {
                          (y = v[o][0]),
                            (_ = v[o][1]),
                            (g.length = 0),
                            _ <= 1
                              ? g.push({
                                  s: p.totalShapeLength * y,
                                  e: p.totalShapeLength * _
                                })
                              : y >= 1
                              ? g.push({
                                  s: p.totalShapeLength * (y - 1),
                                  e: p.totalShapeLength * (_ - 1)
                                })
                              : (g.push({
                                  s: p.totalShapeLength * y,
                                  e: p.totalShapeLength
                                }),
                                g.push({
                                  s: 0,
                                  e: p.totalShapeLength * (_ - 1)
                                }));
                          var x = this.addShapes(p, g[0]);
                          if (g[0].s !== g[0].e) {
                            if (g.length > 1)
                              if (
                                p.shape.paths.shapes[p.shape.paths._length - 1].c
                              ) {
                                var S = x.pop();
                                this.addPaths(x, m),
                                  (x = this.addShapes(p, g[1], S));
                              } else
                                this.addPaths(x, m),
                                  (x = this.addShapes(p, g[1]));
                            this.addPaths(x, m);
                          }
                        }
                        p.shape.paths = m;
                      }
                  }
                }),
                (TrimModifier.prototype.addPaths = function (e, t) {
                  var n,
                    r = e.length;
                  for (n = 0; n < r; n += 1) t.addShape(e[n]);
                }),
                (TrimModifier.prototype.addSegment = function (
                  e,
                  t,
                  n,
                  r,
                  i,
                  a,
                  s
                ) {
                  i.setXYAt(t[0], t[1], "o", a),
                    i.setXYAt(n[0], n[1], "i", a + 1),
                    s && i.setXYAt(e[0], e[1], "v", a),
                    i.setXYAt(r[0], r[1], "v", a + 1);
                }),
                (TrimModifier.prototype.addSegmentFromArray = function (
                  e,
                  t,
                  n,
                  r
                ) {
                  t.setXYAt(e[1], e[5], "o", n),
                    t.setXYAt(e[2], e[6], "i", n + 1),
                    r && t.setXYAt(e[0], e[4], "v", n),
                    t.setXYAt(e[3], e[7], "v", n + 1);
                }),
                (TrimModifier.prototype.addShapes = function (e, t, n) {
                  var r,
                    i,
                    a,
                    s,
                    o,
                    l,
                    h,
                    u,
                    c = e.pathsData,
                    d = e.shape.paths.shapes,
                    f = e.shape.paths._length,
                    p = 0,
                    m = [],
                    g = !0;
                  for (
                    n
                      ? ((o = n._length), (u = n._length))
                      : ((n = shapePool.newElement()), (o = 0), (u = 0)),
                      m.push(n),
                      r = 0;
                    r < f;
                    r += 1
                  ) {
                    for (
                      l = c[r].lengths,
                        n.c = d[r].c,
                        a = d[r].c ? l.length : l.length + 1,
                        i = 1;
                      i < a;
                      i += 1
                    )
                      if (p + (s = l[i - 1]).addedLength < t.s)
                        (p += s.addedLength), (n.c = !1);
                      else {
                        if (p > t.e) {
                          n.c = !1;
                          break;
                        }
                        t.s <= p && t.e >= p + s.addedLength
                          ? (this.addSegment(
                              d[r].v[i - 1],
                              d[r].o[i - 1],
                              d[r].i[i],
                              d[r].v[i],
                              n,
                              o,
                              g
                            ),
                            (g = !1))
                          : ((h = bez.getNewSegment(
                              d[r].v[i - 1],
                              d[r].v[i],
                              d[r].o[i - 1],
                              d[r].i[i],
                              (t.s - p) / s.addedLength,
                              (t.e - p) / s.addedLength,
                              l[i - 1]
                            )),
                            this.addSegmentFromArray(h, n, o, g),
                            (g = !1),
                            (n.c = !1)),
                          (p += s.addedLength),
                          (o += 1);
                      }
                    if (d[r].c && l.length) {
                      if (((s = l[i - 1]), p <= t.e)) {
                        var v = l[i - 1].addedLength;
                        t.s <= p && t.e >= p + v
                          ? (this.addSegment(
                              d[r].v[i - 1],
                              d[r].o[i - 1],
                              d[r].i[0],
                              d[r].v[0],
                              n,
                              o,
                              g
                            ),
                            (g = !1))
                          : ((h = bez.getNewSegment(
                              d[r].v[i - 1],
                              d[r].v[0],
                              d[r].o[i - 1],
                              d[r].i[0],
                              (t.s - p) / v,
                              (t.e - p) / v,
                              l[i - 1]
                            )),
                            this.addSegmentFromArray(h, n, o, g),
                            (g = !1),
                            (n.c = !1));
                      } else n.c = !1;
                      (p += s.addedLength), (o += 1);
                    }
                    if (
                      (n._length &&
                        (n.setXYAt(n.v[u][0], n.v[u][1], "i", u),
                        n.setXYAt(
                          n.v[n._length - 1][0],
                          n.v[n._length - 1][1],
                          "o",
                          n._length - 1
                        )),
                      p > t.e)
                    )
                      break;
                    r < f - 1 &&
                      ((n = shapePool.newElement()),
                      (g = !0),
                      m.push(n),
                      (o = 0));
                  }
                  return m;
                }),
                extendPrototype([ShapeModifier], PuckerAndBloatModifier),
                (PuckerAndBloatModifier.prototype.initModifierProperties =
                  function (e, t) {
                    (this.getValue = this.processKeys),
                      (this.amount = PropertyFactory.getProp(
                        e,
                        t.a,
                        0,
                        null,
                        this
                      )),
                      (this._isAnimated = !!this.amount.effectsSequence.length);
                  }),
                (PuckerAndBloatModifier.prototype.processPath = function (e, t) {
                  var n = t / 100,
                    r = [0, 0],
                    i = e._length,
                    a = 0;
                  for (a = 0; a < i; a += 1)
                    (r[0] += e.v[a][0]), (r[1] += e.v[a][1]);
                  (r[0] /= i), (r[1] /= i);
                  var s,
                    o,
                    l,
                    h,
                    u,
                    c,
                    d = shapePool.newElement();
                  for (d.c = e.c, a = 0; a < i; a += 1)
                    (s = e.v[a][0] + (r[0] - e.v[a][0]) * n),
                      (o = e.v[a][1] + (r[1] - e.v[a][1]) * n),
                      (l = e.o[a][0] + (r[0] - e.o[a][0]) * -n),
                      (h = e.o[a][1] + (r[1] - e.o[a][1]) * -n),
                      (u = e.i[a][0] + (r[0] - e.i[a][0]) * -n),
                      (c = e.i[a][1] + (r[1] - e.i[a][1]) * -n),
                      d.setTripleAt(s, o, l, h, u, c, a);
                  return d;
                }),
                (PuckerAndBloatModifier.prototype.processShapes = function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a,
                    s,
                    o = this.shapes.length,
                    l = this.amount.v;
                  if (0 !== l)
                    for (n = 0; n < o; n += 1) {
                      if (
                        ((s = (a = this.shapes[n]).localShapeCollection),
                        a.shape._mdf || this._mdf || e)
                      )
                        for (
                          s.releaseShapes(),
                            a.shape._mdf = !0,
                            t = a.shape.paths.shapes,
                            i = a.shape.paths._length,
                            r = 0;
                          r < i;
                          r += 1
                        )
                          s.addShape(this.processPath(t[r], l));
                      a.shape.paths = a.localShapeCollection;
                    }
                  this.dynamicProperties.length || (this._mdf = !1);
                });
              var TransformPropertyFactory = (function () {
                var e = [0, 0];
                function t(e, t, n) {
                  if (
                    ((this.elem = e),
                    (this.frameId = -1),
                    (this.propType = "transform"),
                    (this.data = t),
                    (this.v = new Matrix()),
                    (this.pre = new Matrix()),
                    (this.appliedTransformations = 0),
                    this.initDynamicPropertyContainer(n || e),
                    t.p && t.p.s
                      ? ((this.px = PropertyFactory.getProp(
                          e,
                          t.p.x,
                          0,
                          0,
                          this
                        )),
                        (this.py = PropertyFactory.getProp(e, t.p.y, 0, 0, this)),
                        t.p.z &&
                          (this.pz = PropertyFactory.getProp(
                            e,
                            t.p.z,
                            0,
                            0,
                            this
                          )))
                      : (this.p = PropertyFactory.getProp(
                          e,
                          t.p || { k: [0, 0, 0] },
                          1,
                          0,
                          this
                        )),
                    t.rx)
                  ) {
                    if (
                      ((this.rx = PropertyFactory.getProp(
                        e,
                        t.rx,
                        0,
                        degToRads,
                        this
                      )),
                      (this.ry = PropertyFactory.getProp(
                        e,
                        t.ry,
                        0,
                        degToRads,
                        this
                      )),
                      (this.rz = PropertyFactory.getProp(
                        e,
                        t.rz,
                        0,
                        degToRads,
                        this
                      )),
                      t.or.k[0].ti)
                    ) {
                      var r,
                        i = t.or.k.length;
                      for (r = 0; r < i; r += 1)
                        (t.or.k[r].to = null), (t.or.k[r].ti = null);
                    }
                    (this.or = PropertyFactory.getProp(
                      e,
                      t.or,
                      1,
                      degToRads,
                      this
                    )),
                      (this.or.sh = !0);
                  } else
                    this.r = PropertyFactory.getProp(
                      e,
                      t.r || { k: 0 },
                      0,
                      degToRads,
                      this
                    );
                  t.sk &&
                    ((this.sk = PropertyFactory.getProp(
                      e,
                      t.sk,
                      0,
                      degToRads,
                      this
                    )),
                    (this.sa = PropertyFactory.getProp(
                      e,
                      t.sa,
                      0,
                      degToRads,
                      this
                    ))),
                    (this.a = PropertyFactory.getProp(
                      e,
                      t.a || { k: [0, 0, 0] },
                      1,
                      0,
                      this
                    )),
                    (this.s = PropertyFactory.getProp(
                      e,
                      t.s || { k: [100, 100, 100] },
                      1,
                      0.01,
                      this
                    )),
                    t.o
                      ? (this.o = PropertyFactory.getProp(e, t.o, 0, 0.01, e))
                      : (this.o = { _mdf: !1, v: 1 }),
                    (this._isDirty = !0),
                    this.dynamicProperties.length || this.getValue(!0);
                }
                return (
                  (t.prototype = {
                    applyToMatrix: function (e) {
                      var t = this._mdf;
                      this.iterateDynamicProperties(),
                        (this._mdf = this._mdf || t),
                        this.a &&
                          e.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]),
                        this.s && e.scale(this.s.v[0], this.s.v[1], this.s.v[2]),
                        this.sk && e.skewFromAxis(-this.sk.v, this.sa.v),
                        this.r
                          ? e.rotate(-this.r.v)
                          : e
                              .rotateZ(-this.rz.v)
                              .rotateY(this.ry.v)
                              .rotateX(this.rx.v)
                              .rotateZ(-this.or.v[2])
                              .rotateY(this.or.v[1])
                              .rotateX(this.or.v[0]),
                        this.data.p.s
                          ? this.data.p.z
                            ? e.translate(this.px.v, this.py.v, -this.pz.v)
                            : e.translate(this.px.v, this.py.v, 0)
                          : e.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);
                    },
                    getValue: function (t) {
                      if (this.elem.globalData.frameId !== this.frameId) {
                        if (
                          (this._isDirty &&
                            (this.precalculateMatrix(), (this._isDirty = !1)),
                          this.iterateDynamicProperties(),
                          this._mdf || t)
                        ) {
                          var n;
                          if (
                            (this.v.cloneFromProps(this.pre.props),
                            this.appliedTransformations < 1 &&
                              this.v.translate(
                                -this.a.v[0],
                                -this.a.v[1],
                                this.a.v[2]
                              ),
                            this.appliedTransformations < 2 &&
                              this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]),
                            this.sk &&
                              this.appliedTransformations < 3 &&
                              this.v.skewFromAxis(-this.sk.v, this.sa.v),
                            this.r && this.appliedTransformations < 4
                              ? this.v.rotate(-this.r.v)
                              : !this.r &&
                                this.appliedTransformations < 4 &&
                                this.v
                                  .rotateZ(-this.rz.v)
                                  .rotateY(this.ry.v)
                                  .rotateX(this.rx.v)
                                  .rotateZ(-this.or.v[2])
                                  .rotateY(this.or.v[1])
                                  .rotateX(this.or.v[0]),
                            this.autoOriented)
                          ) {
                            var r, i;
                            if (
                              ((n = this.elem.globalData.frameRate),
                              this.p && this.p.keyframes && this.p.getValueAtTime)
                            )
                              this.p._caching.lastFrame + this.p.offsetTime <=
                              this.p.keyframes[0].t
                                ? ((r = this.p.getValueAtTime(
                                    (this.p.keyframes[0].t + 0.01) / n,
                                    0
                                  )),
                                  (i = this.p.getValueAtTime(
                                    this.p.keyframes[0].t / n,
                                    0
                                  )))
                                : this.p._caching.lastFrame + this.p.offsetTime >=
                                  this.p.keyframes[this.p.keyframes.length - 1].t
                                ? ((r = this.p.getValueAtTime(
                                    this.p.keyframes[this.p.keyframes.length - 1]
                                      .t / n,
                                    0
                                  )),
                                  (i = this.p.getValueAtTime(
                                    (this.p.keyframes[this.p.keyframes.length - 1]
                                      .t -
                                      0.05) /
                                      n,
                                    0
                                  )))
                                : ((r = this.p.pv),
                                  (i = this.p.getValueAtTime(
                                    (this.p._caching.lastFrame +
                                      this.p.offsetTime -
                                      0.01) /
                                      n,
                                    this.p.offsetTime
                                  )));
                            else if (
                              this.px &&
                              this.px.keyframes &&
                              this.py.keyframes &&
                              this.px.getValueAtTime &&
                              this.py.getValueAtTime
                            ) {
                              (r = []), (i = []);
                              var a = this.px,
                                s = this.py;
                              a._caching.lastFrame + a.offsetTime <=
                              a.keyframes[0].t
                                ? ((r[0] = a.getValueAtTime(
                                    (a.keyframes[0].t + 0.01) / n,
                                    0
                                  )),
                                  (r[1] = s.getValueAtTime(
                                    (s.keyframes[0].t + 0.01) / n,
                                    0
                                  )),
                                  (i[0] = a.getValueAtTime(
                                    a.keyframes[0].t / n,
                                    0
                                  )),
                                  (i[1] = s.getValueAtTime(
                                    s.keyframes[0].t / n,
                                    0
                                  )))
                                : a._caching.lastFrame + a.offsetTime >=
                                  a.keyframes[a.keyframes.length - 1].t
                                ? ((r[0] = a.getValueAtTime(
                                    a.keyframes[a.keyframes.length - 1].t / n,
                                    0
                                  )),
                                  (r[1] = s.getValueAtTime(
                                    s.keyframes[s.keyframes.length - 1].t / n,
                                    0
                                  )),
                                  (i[0] = a.getValueAtTime(
                                    (a.keyframes[a.keyframes.length - 1].t -
                                      0.01) /
                                      n,
                                    0
                                  )),
                                  (i[1] = s.getValueAtTime(
                                    (s.keyframes[s.keyframes.length - 1].t -
                                      0.01) /
                                      n,
                                    0
                                  )))
                                : ((r = [a.pv, s.pv]),
                                  (i[0] = a.getValueAtTime(
                                    (a._caching.lastFrame + a.offsetTime - 0.01) /
                                      n,
                                    a.offsetTime
                                  )),
                                  (i[1] = s.getValueAtTime(
                                    (s._caching.lastFrame + s.offsetTime - 0.01) /
                                      n,
                                    s.offsetTime
                                  )));
                            } else r = i = e;
                            this.v.rotate(-Math.atan2(r[1] - i[1], r[0] - i[0]));
                          }
                          this.data.p && this.data.p.s
                            ? this.data.p.z
                              ? this.v.translate(this.px.v, this.py.v, -this.pz.v)
                              : this.v.translate(this.px.v, this.py.v, 0)
                            : this.v.translate(
                                this.p.v[0],
                                this.p.v[1],
                                -this.p.v[2]
                              );
                        }
                        this.frameId = this.elem.globalData.frameId;
                      }
                    },
                    precalculateMatrix: function () {
                      if (
                        ((this.appliedTransformations = 0),
                        this.pre.reset(),
                        !this.a.effectsSequence.length &&
                          (this.pre.translate(
                            -this.a.v[0],
                            -this.a.v[1],
                            this.a.v[2]
                          ),
                          (this.appliedTransformations = 1),
                          !this.s.effectsSequence.length))
                      ) {
                        if (
                          (this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]),
                          (this.appliedTransformations = 2),
                          this.sk)
                        ) {
                          if (
                            this.sk.effectsSequence.length ||
                            this.sa.effectsSequence.length
                          )
                            return;
                          this.pre.skewFromAxis(-this.sk.v, this.sa.v),
                            (this.appliedTransformations = 3);
                        }
                        this.r
                          ? this.r.effectsSequence.length ||
                            (this.pre.rotate(-this.r.v),
                            (this.appliedTransformations = 4))
                          : this.rz.effectsSequence.length ||
                            this.ry.effectsSequence.length ||
                            this.rx.effectsSequence.length ||
                            this.or.effectsSequence.length ||
                            (this.pre
                              .rotateZ(-this.rz.v)
                              .rotateY(this.ry.v)
                              .rotateX(this.rx.v)
                              .rotateZ(-this.or.v[2])
                              .rotateY(this.or.v[1])
                              .rotateX(this.or.v[0]),
                            (this.appliedTransformations = 4));
                      }
                    },
                    autoOrient: function () {}
                  }),
                  extendPrototype([DynamicPropertyContainer], t),
                  (t.prototype.addDynamicProperty = function (e) {
                    this._addDynamicProperty(e),
                      this.elem.addDynamicProperty(e),
                      (this._isDirty = !0);
                  }),
                  (t.prototype._addDynamicProperty =
                    DynamicPropertyContainer.prototype.addDynamicProperty),
                  {
                    getTransformProperty: function (e, n, r) {
                      return new t(e, n, r);
                    }
                  }
                );
              })();
              function RepeaterModifier() {}
              function RoundCornersModifier() {}
              function floatEqual(e, t) {
                return (
                  1e5 * Math.abs(e - t) <= Math.min(Math.abs(e), Math.abs(t))
                );
              }
              function floatZero(e) {
                return Math.abs(e) <= 1e-5;
              }
              function lerp(e, t, n) {
                return e * (1 - n) + t * n;
              }
              function lerpPoint(e, t, n) {
                return [lerp(e[0], t[0], n), lerp(e[1], t[1], n)];
              }
              function quadRoots(e, t, n) {
                if (0 === e) return [];
                var r = t * t - 4 * e * n;
                if (r < 0) return [];
                var i = -t / (2 * e);
                if (0 === r) return [i];
                var a = Math.sqrt(r) / (2 * e);
                return [i - a, i + a];
              }
              function polynomialCoefficients(e, t, n, r) {
                return [
                  3 * t - e - 3 * n + r,
                  3 * e - 6 * t + 3 * n,
                  -3 * e + 3 * t,
                  e
                ];
              }
              function singlePoint(e) {
                return new PolynomialBezier(e, e, e, e, !1);
              }
              function PolynomialBezier(e, t, n, r, i) {
                i && pointEqual(e, t) && (t = lerpPoint(e, r, 1 / 3)),
                  i && pointEqual(n, r) && (n = lerpPoint(e, r, 2 / 3));
                var a = polynomialCoefficients(e[0], t[0], n[0], r[0]),
                  s = polynomialCoefficients(e[1], t[1], n[1], r[1]);
                (this.a = [a[0], s[0]]),
                  (this.b = [a[1], s[1]]),
                  (this.c = [a[2], s[2]]),
                  (this.d = [a[3], s[3]]),
                  (this.points = [e, t, n, r]);
              }
              function extrema(e, t) {
                var n = e.points[0][t],
                  r = e.points[e.points.length - 1][t];
                if (n > r) {
                  var i = r;
                  (r = n), (n = i);
                }
                for (
                  var a = quadRoots(3 * e.a[t], 2 * e.b[t], e.c[t]), s = 0;
                  s < a.length;
                  s += 1
                )
                  if (a[s] > 0 && a[s] < 1) {
                    var o = e.point(a[s])[t];
                    o < n ? (n = o) : o > r && (r = o);
                  }
                return { min: n, max: r };
              }
              function intersectData(e, t, n) {
                var r = e.boundingBox();
                return {
                  cx: r.cx,
                  cy: r.cy,
                  width: r.width,
                  height: r.height,
                  bez: e,
                  t: (t + n) / 2,
                  t1: t,
                  t2: n
                };
              }
              function splitData(e) {
                var t = e.bez.split(0.5);
                return [
                  intersectData(t[0], e.t1, e.t),
                  intersectData(t[1], e.t, e.t2)
                ];
              }
              function boxIntersect(e, t) {
                return (
                  2 * Math.abs(e.cx - t.cx) < e.width + t.width &&
                  2 * Math.abs(e.cy - t.cy) < e.height + t.height
                );
              }
              function intersectsImpl(e, t, n, r, i, a) {
                if (boxIntersect(e, t))
                  if (
                    n >= a ||
                    (e.width <= r &&
                      e.height <= r &&
                      t.width <= r &&
                      t.height <= r)
                  )
                    i.push([e.t, t.t]);
                  else {
                    var s = splitData(e),
                      o = splitData(t);
                    intersectsImpl(s[0], o[0], n + 1, r, i, a),
                      intersectsImpl(s[0], o[1], n + 1, r, i, a),
                      intersectsImpl(s[1], o[0], n + 1, r, i, a),
                      intersectsImpl(s[1], o[1], n + 1, r, i, a);
                  }
              }
              function crossProduct(e, t) {
                return [
                  e[1] * t[2] - e[2] * t[1],
                  e[2] * t[0] - e[0] * t[2],
                  e[0] * t[1] - e[1] * t[0]
                ];
              }
              function lineIntersection(e, t, n, r) {
                var i = [e[0], e[1], 1],
                  a = [t[0], t[1], 1],
                  s = [n[0], n[1], 1],
                  o = [r[0], r[1], 1],
                  l = crossProduct(crossProduct(i, a), crossProduct(s, o));
                return floatZero(l[2]) ? null : [l[0] / l[2], l[1] / l[2]];
              }
              function polarOffset(e, t, n) {
                return [e[0] + Math.cos(t) * n, e[1] - Math.sin(t) * n];
              }
              function pointDistance(e, t) {
                return Math.hypot(e[0] - t[0], e[1] - t[1]);
              }
              function pointEqual(e, t) {
                return floatEqual(e[0], t[0]) && floatEqual(e[1], t[1]);
              }
              function ZigZagModifier() {}
              function setPoint(e, t, n, r, i, a, s) {
                var o = n - Math.PI / 2,
                  l = n + Math.PI / 2,
                  h = t[0] + Math.cos(n) * r * i,
                  u = t[1] - Math.sin(n) * r * i;
                e.setTripleAt(
                  h,
                  u,
                  h + Math.cos(o) * a,
                  u - Math.sin(o) * a,
                  h + Math.cos(l) * s,
                  u - Math.sin(l) * s,
                  e.length()
                );
              }
              function getPerpendicularVector(e, t) {
                var n = [t[0] - e[0], t[1] - e[1]],
                  r = 0.5 * -Math.PI;
                return [
                  Math.cos(r) * n[0] - Math.sin(r) * n[1],
                  Math.sin(r) * n[0] + Math.cos(r) * n[1]
                ];
              }
              function getProjectingAngle(e, t) {
                var n = 0 === t ? e.length() - 1 : t - 1,
                  r = (t + 1) % e.length(),
                  i = getPerpendicularVector(e.v[n], e.v[r]);
                return Math.atan2(0, 1) - Math.atan2(i[1], i[0]);
              }
              function zigZagCorner(e, t, n, r, i, a, s) {
                var o = getProjectingAngle(t, n),
                  l = t.v[n % t._length],
                  h = t.v[0 === n ? t._length - 1 : n - 1],
                  u = t.v[(n + 1) % t._length],
                  c =
                    2 === a
                      ? Math.sqrt(
                          Math.pow(l[0] - h[0], 2) + Math.pow(l[1] - h[1], 2)
                        )
                      : 0,
                  d =
                    2 === a
                      ? Math.sqrt(
                          Math.pow(l[0] - u[0], 2) + Math.pow(l[1] - u[1], 2)
                        )
                      : 0;
                setPoint(
                  e,
                  t.v[n % t._length],
                  o,
                  s,
                  r,
                  d / (2 * (i + 1)),
                  c / (2 * (i + 1)),
                  a
                );
              }
              function zigZagSegment(e, t, n, r, i, a) {
                for (var s = 0; s < r; s += 1) {
                  var o = (s + 1) / (r + 1),
                    l =
                      2 === i
                        ? Math.sqrt(
                            Math.pow(t.points[3][0] - t.points[0][0], 2) +
                              Math.pow(t.points[3][1] - t.points[0][1], 2)
                          )
                        : 0,
                    h = t.normalAngle(o);
                  setPoint(
                    e,
                    t.point(o),
                    h,
                    a,
                    n,
                    l / (2 * (r + 1)),
                    l / (2 * (r + 1)),
                    i
                  ),
                    (a = -a);
                }
                return a;
              }
              function linearOffset(e, t, n) {
                var r = Math.atan2(t[0] - e[0], t[1] - e[1]);
                return [polarOffset(e, r, n), polarOffset(t, r, n)];
              }
              function offsetSegment(e, t) {
                var n, r, i, a, s, o, l;
                (n = (l = linearOffset(e.points[0], e.points[1], t))[0]),
                  (r = l[1]),
                  (i = (l = linearOffset(e.points[1], e.points[2], t))[0]),
                  (a = l[1]),
                  (s = (l = linearOffset(e.points[2], e.points[3], t))[0]),
                  (o = l[1]);
                var h = lineIntersection(n, r, i, a);
                null === h && (h = r);
                var u = lineIntersection(s, o, i, a);
                return null === u && (u = s), new PolynomialBezier(n, h, u, o);
              }
              function joinLines(e, t, n, r, i) {
                var a = t.points[3],
                  s = n.points[0];
                if (3 === r) return a;
                if (pointEqual(a, s)) return a;
                if (2 === r) {
                  var o = -t.tangentAngle(1),
                    l = -n.tangentAngle(0) + Math.PI,
                    h = lineIntersection(
                      a,
                      polarOffset(a, o + Math.PI / 2, 100),
                      s,
                      polarOffset(s, o + Math.PI / 2, 100)
                    ),
                    u = h ? pointDistance(h, a) : pointDistance(a, s) / 2,
                    c = polarOffset(a, o, 2 * u * roundCorner);
                  return (
                    e.setXYAt(c[0], c[1], "o", e.length() - 1),
                    (c = polarOffset(s, l, 2 * u * roundCorner)),
                    e.setTripleAt(s[0], s[1], s[0], s[1], c[0], c[1], e.length()),
                    s
                  );
                }
                var d = lineIntersection(
                  pointEqual(a, t.points[2]) ? t.points[0] : t.points[2],
                  a,
                  s,
                  pointEqual(s, n.points[1]) ? n.points[3] : n.points[1]
                );
                return d && pointDistance(d, a) < i
                  ? (e.setTripleAt(
                      d[0],
                      d[1],
                      d[0],
                      d[1],
                      d[0],
                      d[1],
                      e.length()
                    ),
                    d)
                  : a;
              }
              function getIntersection(e, t) {
                var n = e.intersections(t);
                return (
                  n.length && floatEqual(n[0][0], 1) && n.shift(),
                  n.length ? n[0] : null
                );
              }
              function pruneSegmentIntersection(e, t) {
                var n = e.slice(),
                  r = t.slice(),
                  i = getIntersection(e[e.length - 1], t[0]);
                return (
                  i &&
                    ((n[e.length - 1] = e[e.length - 1].split(i[0])[0]),
                    (r[0] = t[0].split(i[1])[1])),
                  e.length > 1 &&
                  t.length > 1 &&
                  (i = getIntersection(e[0], t[t.length - 1]))
                    ? [[e[0].split(i[0])[0]], [t[t.length - 1].split(i[1])[1]]]
                    : [n, r]
                );
              }
              function pruneIntersections(e) {
                for (var t, n = 1; n < e.length; n += 1)
                  (t = pruneSegmentIntersection(e[n - 1], e[n])),
                    (e[n - 1] = t[0]),
                    (e[n] = t[1]);
                return (
                  e.length > 1 &&
                    ((t = pruneSegmentIntersection(e[e.length - 1], e[0])),
                    (e[e.length - 1] = t[0]),
                    (e[0] = t[1])),
                  e
                );
              }
              function offsetSegmentSplit(e, t) {
                var n,
                  r,
                  i,
                  a,
                  s = e.inflectionPoints();
                if (0 === s.length) return [offsetSegment(e, t)];
                if (1 === s.length || floatEqual(s[1], 1))
                  return (
                    (n = (i = e.split(s[0]))[0]),
                    (r = i[1]),
                    [offsetSegment(n, t), offsetSegment(r, t)]
                  );
                n = (i = e.split(s[0]))[0];
                var o = (s[1] - s[0]) / (1 - s[0]);
                return (
                  (a = (i = i[1].split(o))[0]),
                  (r = i[1]),
                  [offsetSegment(n, t), offsetSegment(a, t), offsetSegment(r, t)]
                );
              }
              function OffsetPathModifier() {}
              function getFontProperties(e) {
                for (
                  var t = e.fStyle ? e.fStyle.split(" ") : [],
                    n = "normal",
                    r = "normal",
                    i = t.length,
                    a = 0;
                  a < i;
                  a += 1
                )
                  switch (t[a].toLowerCase()) {
                    case "italic":
                      r = "italic";
                      break;
                    case "bold":
                      n = "700";
                      break;
                    case "black":
                      n = "900";
                      break;
                    case "medium":
                      n = "500";
                      break;
                    case "regular":
                    case "normal":
                      n = "400";
                      break;
                    case "light":
                    case "thin":
                      n = "200";
                  }
                return { style: r, weight: e.fWeight || n };
              }
              extendPrototype([ShapeModifier], RepeaterModifier),
                (RepeaterModifier.prototype.initModifierProperties = function (
                  e,
                  t
                ) {
                  (this.getValue = this.processKeys),
                    (this.c = PropertyFactory.getProp(e, t.c, 0, null, this)),
                    (this.o = PropertyFactory.getProp(e, t.o, 0, null, this)),
                    (this.tr = TransformPropertyFactory.getTransformProperty(
                      e,
                      t.tr,
                      this
                    )),
                    (this.so = PropertyFactory.getProp(
                      e,
                      t.tr.so,
                      0,
                      0.01,
                      this
                    )),
                    (this.eo = PropertyFactory.getProp(
                      e,
                      t.tr.eo,
                      0,
                      0.01,
                      this
                    )),
                    (this.data = t),
                    this.dynamicProperties.length || this.getValue(!0),
                    (this._isAnimated = !!this.dynamicProperties.length),
                    (this.pMatrix = new Matrix()),
                    (this.rMatrix = new Matrix()),
                    (this.sMatrix = new Matrix()),
                    (this.tMatrix = new Matrix()),
                    (this.matrix = new Matrix());
                }),
                (RepeaterModifier.prototype.applyTransforms = function (
                  e,
                  t,
                  n,
                  r,
                  i,
                  a
                ) {
                  var s = a ? -1 : 1,
                    o = r.s.v[0] + (1 - r.s.v[0]) * (1 - i),
                    l = r.s.v[1] + (1 - r.s.v[1]) * (1 - i);
                  e.translate(r.p.v[0] * s * i, r.p.v[1] * s * i, r.p.v[2]),
                    t.translate(-r.a.v[0], -r.a.v[1], r.a.v[2]),
                    t.rotate(-r.r.v * s * i),
                    t.translate(r.a.v[0], r.a.v[1], r.a.v[2]),
                    n.translate(-r.a.v[0], -r.a.v[1], r.a.v[2]),
                    n.scale(a ? 1 / o : o, a ? 1 / l : l),
                    n.translate(r.a.v[0], r.a.v[1], r.a.v[2]);
                }),
                (RepeaterModifier.prototype.init = function (e, t, n, r) {
                  for (
                    this.elem = e,
                      this.arr = t,
                      this.pos = n,
                      this.elemsData = r,
                      this._currentCopies = 0,
                      this._elements = [],
                      this._groups = [],
                      this.frameId = -1,
                      this.initDynamicPropertyContainer(e),
                      this.initModifierProperties(e, t[n]);
                    n > 0;
  
                  )
                    (n -= 1), this._elements.unshift(t[n]);
                  this.dynamicProperties.length
                    ? (this.k = !0)
                    : this.getValue(!0);
                }),
                (RepeaterModifier.prototype.resetElements = function (e) {
                  var t,
                    n = e.length;
                  for (t = 0; t < n; t += 1)
                    (e[t]._processed = !1),
                      "gr" === e[t].ty && this.resetElements(e[t].it);
                }),
                (RepeaterModifier.prototype.cloneElements = function (e) {
                  var t = JSON.parse(JSON.stringify(e));
                  return this.resetElements(t), t;
                }),
                (RepeaterModifier.prototype.changeGroupRender = function (e, t) {
                  var n,
                    r = e.length;
                  for (n = 0; n < r; n += 1)
                    (e[n]._render = t),
                      "gr" === e[n].ty && this.changeGroupRender(e[n].it, t);
                }),
                (RepeaterModifier.prototype.processShapes = function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a,
                    s = !1;
                  if (this._mdf || e) {
                    var o,
                      l = Math.ceil(this.c.v);
                    if (this._groups.length < l) {
                      for (; this._groups.length < l; ) {
                        var h = {
                          it: this.cloneElements(this._elements),
                          ty: "gr"
                        };
                        h.it.push({
                          a: { a: 0, ix: 1, k: [0, 0] },
                          nm: "Transform",
                          o: { a: 0, ix: 7, k: 100 },
                          p: { a: 0, ix: 2, k: [0, 0] },
                          r: {
                            a: 1,
                            ix: 6,
                            k: [
                              { s: 0, e: 0, t: 0 },
                              { s: 0, e: 0, t: 1 }
                            ]
                          },
                          s: { a: 0, ix: 3, k: [100, 100] },
                          sa: { a: 0, ix: 5, k: 0 },
                          sk: { a: 0, ix: 4, k: 0 },
                          ty: "tr"
                        }),
                          this.arr.splice(0, 0, h),
                          this._groups.splice(0, 0, h),
                          (this._currentCopies += 1);
                      }
                      this.elem.reloadShapes(), (s = !0);
                    }
                    for (a = 0, r = 0; r <= this._groups.length - 1; r += 1) {
                      if (
                        ((o = a < l),
                        (this._groups[r]._render = o),
                        this.changeGroupRender(this._groups[r].it, o),
                        !o)
                      ) {
                        var u = this.elemsData[r].it,
                          c = u[u.length - 1];
                        0 !== c.transform.op.v
                          ? ((c.transform.op._mdf = !0), (c.transform.op.v = 0))
                          : (c.transform.op._mdf = !1);
                      }
                      a += 1;
                    }
                    this._currentCopies = l;
                    var d = this.o.v,
                      f = d % 1,
                      p = d > 0 ? Math.floor(d) : Math.ceil(d),
                      m = this.pMatrix.props,
                      g = this.rMatrix.props,
                      v = this.sMatrix.props;
                    this.pMatrix.reset(),
                      this.rMatrix.reset(),
                      this.sMatrix.reset(),
                      this.tMatrix.reset(),
                      this.matrix.reset();
                    var y,
                      _,
                      b = 0;
                    if (d > 0) {
                      for (; b < p; )
                        this.applyTransforms(
                          this.pMatrix,
                          this.rMatrix,
                          this.sMatrix,
                          this.tr,
                          1,
                          !1
                        ),
                          (b += 1);
                      f &&
                        (this.applyTransforms(
                          this.pMatrix,
                          this.rMatrix,
                          this.sMatrix,
                          this.tr,
                          f,
                          !1
                        ),
                        (b += f));
                    } else if (d < 0) {
                      for (; b > p; )
                        this.applyTransforms(
                          this.pMatrix,
                          this.rMatrix,
                          this.sMatrix,
                          this.tr,
                          1,
                          !0
                        ),
                          (b -= 1);
                      f &&
                        (this.applyTransforms(
                          this.pMatrix,
                          this.rMatrix,
                          this.sMatrix,
                          this.tr,
                          -f,
                          !0
                        ),
                        (b -= f));
                    }
                    for (
                      r = 1 === this.data.m ? 0 : this._currentCopies - 1,
                        i = 1 === this.data.m ? 1 : -1,
                        a = this._currentCopies;
                      a;
  
                    ) {
                      if (
                        ((_ = (n = (t = this.elemsData[r].it)[t.length - 1]
                          .transform.mProps.v.props).length),
                        (t[t.length - 1].transform.mProps._mdf = !0),
                        (t[t.length - 1].transform.op._mdf = !0),
                        (t[t.length - 1].transform.op.v =
                          1 === this._currentCopies
                            ? this.so.v
                            : this.so.v +
                              (this.eo.v - this.so.v) *
                                (r / (this._currentCopies - 1))),
                        0 !== b)
                      ) {
                        for (
                          ((0 !== r && 1 === i) ||
                            (r !== this._currentCopies - 1 && -1 === i)) &&
                            this.applyTransforms(
                              this.pMatrix,
                              this.rMatrix,
                              this.sMatrix,
                              this.tr,
                              1,
                              !1
                            ),
                            this.matrix.transform(
                              g[0],
                              g[1],
                              g[2],
                              g[3],
                              g[4],
                              g[5],
                              g[6],
                              g[7],
                              g[8],
                              g[9],
                              g[10],
                              g[11],
                              g[12],
                              g[13],
                              g[14],
                              g[15]
                            ),
                            this.matrix.transform(
                              v[0],
                              v[1],
                              v[2],
                              v[3],
                              v[4],
                              v[5],
                              v[6],
                              v[7],
                              v[8],
                              v[9],
                              v[10],
                              v[11],
                              v[12],
                              v[13],
                              v[14],
                              v[15]
                            ),
                            this.matrix.transform(
                              m[0],
                              m[1],
                              m[2],
                              m[3],
                              m[4],
                              m[5],
                              m[6],
                              m[7],
                              m[8],
                              m[9],
                              m[10],
                              m[11],
                              m[12],
                              m[13],
                              m[14],
                              m[15]
                            ),
                            y = 0;
                          y < _;
                          y += 1
                        )
                          n[y] = this.matrix.props[y];
                        this.matrix.reset();
                      } else
                        for (this.matrix.reset(), y = 0; y < _; y += 1)
                          n[y] = this.matrix.props[y];
                      (b += 1), (a -= 1), (r += i);
                    }
                  } else
                    for (a = this._currentCopies, r = 0, i = 1; a; )
                      (n = (t = this.elemsData[r].it)[t.length - 1].transform
                        .mProps.v.props),
                        (t[t.length - 1].transform.mProps._mdf = !1),
                        (t[t.length - 1].transform.op._mdf = !1),
                        (a -= 1),
                        (r += i);
                  return s;
                }),
                (RepeaterModifier.prototype.addShape = function () {}),
                extendPrototype([ShapeModifier], RoundCornersModifier),
                (RoundCornersModifier.prototype.initModifierProperties =
                  function (e, t) {
                    (this.getValue = this.processKeys),
                      (this.rd = PropertyFactory.getProp(e, t.r, 0, null, this)),
                      (this._isAnimated = !!this.rd.effectsSequence.length);
                  }),
                (RoundCornersModifier.prototype.processPath = function (e, t) {
                  var n,
                    r = shapePool.newElement();
                  r.c = e.c;
                  var i,
                    a,
                    s,
                    o,
                    l,
                    h,
                    u,
                    c,
                    d,
                    f,
                    p,
                    m,
                    g = e._length,
                    v = 0;
                  for (n = 0; n < g; n += 1)
                    (i = e.v[n]),
                      (s = e.o[n]),
                      (a = e.i[n]),
                      i[0] === s[0] &&
                      i[1] === s[1] &&
                      i[0] === a[0] &&
                      i[1] === a[1]
                        ? (0 !== n && n !== g - 1) || e.c
                          ? ((o = 0 === n ? e.v[g - 1] : e.v[n - 1]),
                            (h = (l = Math.sqrt(
                              Math.pow(i[0] - o[0], 2) + Math.pow(i[1] - o[1], 2)
                            ))
                              ? Math.min(l / 2, t) / l
                              : 0),
                            (u = p = i[0] + (o[0] - i[0]) * h),
                            (c = m = i[1] - (i[1] - o[1]) * h),
                            (d = u - (u - i[0]) * roundCorner),
                            (f = c - (c - i[1]) * roundCorner),
                            r.setTripleAt(u, c, d, f, p, m, v),
                            (v += 1),
                            (o = n === g - 1 ? e.v[0] : e.v[n + 1]),
                            (h = (l = Math.sqrt(
                              Math.pow(i[0] - o[0], 2) + Math.pow(i[1] - o[1], 2)
                            ))
                              ? Math.min(l / 2, t) / l
                              : 0),
                            (u = d = i[0] + (o[0] - i[0]) * h),
                            (c = f = i[1] + (o[1] - i[1]) * h),
                            (p = u - (u - i[0]) * roundCorner),
                            (m = c - (c - i[1]) * roundCorner),
                            r.setTripleAt(u, c, d, f, p, m, v),
                            (v += 1))
                          : (r.setTripleAt(i[0], i[1], s[0], s[1], a[0], a[1], v),
                            (v += 1))
                        : (r.setTripleAt(
                            e.v[n][0],
                            e.v[n][1],
                            e.o[n][0],
                            e.o[n][1],
                            e.i[n][0],
                            e.i[n][1],
                            v
                          ),
                          (v += 1));
                  return r;
                }),
                (RoundCornersModifier.prototype.processShapes = function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a,
                    s,
                    o = this.shapes.length,
                    l = this.rd.v;
                  if (0 !== l)
                    for (n = 0; n < o; n += 1) {
                      if (
                        ((s = (a = this.shapes[n]).localShapeCollection),
                        a.shape._mdf || this._mdf || e)
                      )
                        for (
                          s.releaseShapes(),
                            a.shape._mdf = !0,
                            t = a.shape.paths.shapes,
                            i = a.shape.paths._length,
                            r = 0;
                          r < i;
                          r += 1
                        )
                          s.addShape(this.processPath(t[r], l));
                      a.shape.paths = a.localShapeCollection;
                    }
                  this.dynamicProperties.length || (this._mdf = !1);
                }),
                (PolynomialBezier.prototype.point = function (e) {
                  return [
                    ((this.a[0] * e + this.b[0]) * e + this.c[0]) * e + this.d[0],
                    ((this.a[1] * e + this.b[1]) * e + this.c[1]) * e + this.d[1]
                  ];
                }),
                (PolynomialBezier.prototype.derivative = function (e) {
                  return [
                    (3 * e * this.a[0] + 2 * this.b[0]) * e + this.c[0],
                    (3 * e * this.a[1] + 2 * this.b[1]) * e + this.c[1]
                  ];
                }),
                (PolynomialBezier.prototype.tangentAngle = function (e) {
                  var t = this.derivative(e);
                  return Math.atan2(t[1], t[0]);
                }),
                (PolynomialBezier.prototype.normalAngle = function (e) {
                  var t = this.derivative(e);
                  return Math.atan2(t[0], t[1]);
                }),
                (PolynomialBezier.prototype.inflectionPoints = function () {
                  var e = this.a[1] * this.b[0] - this.a[0] * this.b[1];
                  if (floatZero(e)) return [];
                  var t =
                      (-0.5 * (this.a[1] * this.c[0] - this.a[0] * this.c[1])) /
                      e,
                    n =
                      t * t -
                      ((1 / 3) *
                        (this.b[1] * this.c[0] - this.b[0] * this.c[1])) /
                        e;
                  if (n < 0) return [];
                  var r = Math.sqrt(n);
                  return floatZero(r)
                    ? r > 0 && r < 1
                      ? [t]
                      : []
                    : [t - r, t + r].filter(function (e) {
                        return e > 0 && e < 1;
                      });
                }),
                (PolynomialBezier.prototype.split = function (e) {
                  if (e <= 0) return [singlePoint(this.points[0]), this];
                  if (e >= 1)
                    return [
                      this,
                      singlePoint(this.points[this.points.length - 1])
                    ];
                  var t = lerpPoint(this.points[0], this.points[1], e),
                    n = lerpPoint(this.points[1], this.points[2], e),
                    r = lerpPoint(this.points[2], this.points[3], e),
                    i = lerpPoint(t, n, e),
                    a = lerpPoint(n, r, e),
                    s = lerpPoint(i, a, e);
                  return [
                    new PolynomialBezier(this.points[0], t, i, s, !0),
                    new PolynomialBezier(s, a, r, this.points[3], !0)
                  ];
                }),
                (PolynomialBezier.prototype.bounds = function () {
                  return { x: extrema(this, 0), y: extrema(this, 1) };
                }),
                (PolynomialBezier.prototype.boundingBox = function () {
                  var e = this.bounds();
                  return {
                    left: e.x.min,
                    right: e.x.max,
                    top: e.y.min,
                    bottom: e.y.max,
                    width: e.x.max - e.x.min,
                    height: e.y.max - e.y.min,
                    cx: (e.x.max + e.x.min) / 2,
                    cy: (e.y.max + e.y.min) / 2
                  };
                }),
                (PolynomialBezier.prototype.intersections = function (e, t, n) {
                  void 0 === t && (t = 2), void 0 === n && (n = 7);
                  var r = [];
                  return (
                    intersectsImpl(
                      intersectData(this, 0, 1),
                      intersectData(e, 0, 1),
                      0,
                      t,
                      r,
                      n
                    ),
                    r
                  );
                }),
                (PolynomialBezier.shapeSegment = function (e, t) {
                  var n = (t + 1) % e.length();
                  return new PolynomialBezier(e.v[t], e.o[t], e.i[n], e.v[n], !0);
                }),
                (PolynomialBezier.shapeSegmentInverted = function (e, t) {
                  var n = (t + 1) % e.length();
                  return new PolynomialBezier(e.v[n], e.i[n], e.o[t], e.v[t], !0);
                }),
                extendPrototype([ShapeModifier], ZigZagModifier),
                (ZigZagModifier.prototype.initModifierProperties = function (
                  e,
                  t
                ) {
                  (this.getValue = this.processKeys),
                    (this.amplitude = PropertyFactory.getProp(
                      e,
                      t.s,
                      0,
                      null,
                      this
                    )),
                    (this.frequency = PropertyFactory.getProp(
                      e,
                      t.r,
                      0,
                      null,
                      this
                    )),
                    (this.pointsType = PropertyFactory.getProp(
                      e,
                      t.pt,
                      0,
                      null,
                      this
                    )),
                    (this._isAnimated =
                      0 !== this.amplitude.effectsSequence.length ||
                      0 !== this.frequency.effectsSequence.length ||
                      0 !== this.pointsType.effectsSequence.length);
                }),
                (ZigZagModifier.prototype.processPath = function (e, t, n, r) {
                  var i = e._length,
                    a = shapePool.newElement();
                  if (((a.c = e.c), e.c || (i -= 1), 0 === i)) return a;
                  var s = -1,
                    o = PolynomialBezier.shapeSegment(e, 0);
                  zigZagCorner(a, e, 0, t, n, r, s);
                  for (var l = 0; l < i; l += 1)
                    (s = zigZagSegment(a, o, t, n, r, -s)),
                      (o =
                        l !== i - 1 || e.c
                          ? PolynomialBezier.shapeSegment(e, (l + 1) % i)
                          : null),
                      zigZagCorner(a, e, l + 1, t, n, r, s);
                  return a;
                }),
                (ZigZagModifier.prototype.processShapes = function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a,
                    s,
                    o = this.shapes.length,
                    l = this.amplitude.v,
                    h = Math.max(0, Math.round(this.frequency.v)),
                    u = this.pointsType.v;
                  if (0 !== l)
                    for (n = 0; n < o; n += 1) {
                      if (
                        ((s = (a = this.shapes[n]).localShapeCollection),
                        a.shape._mdf || this._mdf || e)
                      )
                        for (
                          s.releaseShapes(),
                            a.shape._mdf = !0,
                            t = a.shape.paths.shapes,
                            i = a.shape.paths._length,
                            r = 0;
                          r < i;
                          r += 1
                        )
                          s.addShape(this.processPath(t[r], l, h, u));
                      a.shape.paths = a.localShapeCollection;
                    }
                  this.dynamicProperties.length || (this._mdf = !1);
                }),
                extendPrototype([ShapeModifier], OffsetPathModifier),
                (OffsetPathModifier.prototype.initModifierProperties = function (
                  e,
                  t
                ) {
                  (this.getValue = this.processKeys),
                    (this.amount = PropertyFactory.getProp(
                      e,
                      t.a,
                      0,
                      null,
                      this
                    )),
                    (this.miterLimit = PropertyFactory.getProp(
                      e,
                      t.ml,
                      0,
                      null,
                      this
                    )),
                    (this.lineJoin = t.lj),
                    (this._isAnimated = 0 !== this.amount.effectsSequence.length);
                }),
                (OffsetPathModifier.prototype.processPath = function (
                  e,
                  t,
                  n,
                  r
                ) {
                  var i = shapePool.newElement();
                  i.c = e.c;
                  var a,
                    s,
                    o,
                    l = e.length();
                  e.c || (l -= 1);
                  var h = [];
                  for (a = 0; a < l; a += 1)
                    (o = PolynomialBezier.shapeSegment(e, a)),
                      h.push(offsetSegmentSplit(o, t));
                  if (!e.c)
                    for (a = l - 1; a >= 0; a -= 1)
                      (o = PolynomialBezier.shapeSegmentInverted(e, a)),
                        h.push(offsetSegmentSplit(o, t));
                  h = pruneIntersections(h);
                  var u = null,
                    c = null;
                  for (a = 0; a < h.length; a += 1) {
                    var d = h[a];
                    for (
                      c && (u = joinLines(i, c, d[0], n, r)),
                        c = d[d.length - 1],
                        s = 0;
                      s < d.length;
                      s += 1
                    )
                      (o = d[s]),
                        u && pointEqual(o.points[0], u)
                          ? i.setXYAt(
                              o.points[1][0],
                              o.points[1][1],
                              "o",
                              i.length() - 1
                            )
                          : i.setTripleAt(
                              o.points[0][0],
                              o.points[0][1],
                              o.points[1][0],
                              o.points[1][1],
                              o.points[0][0],
                              o.points[0][1],
                              i.length()
                            ),
                        i.setTripleAt(
                          o.points[3][0],
                          o.points[3][1],
                          o.points[3][0],
                          o.points[3][1],
                          o.points[2][0],
                          o.points[2][1],
                          i.length()
                        ),
                        (u = o.points[3]);
                  }
                  return h.length && joinLines(i, c, h[0][0], n, r), i;
                }),
                (OffsetPathModifier.prototype.processShapes = function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a,
                    s,
                    o = this.shapes.length,
                    l = this.amount.v,
                    h = this.miterLimit.v,
                    u = this.lineJoin;
                  if (0 !== l)
                    for (n = 0; n < o; n += 1) {
                      if (
                        ((s = (a = this.shapes[n]).localShapeCollection),
                        a.shape._mdf || this._mdf || e)
                      )
                        for (
                          s.releaseShapes(),
                            a.shape._mdf = !0,
                            t = a.shape.paths.shapes,
                            i = a.shape.paths._length,
                            r = 0;
                          r < i;
                          r += 1
                        )
                          s.addShape(this.processPath(t[r], l, u, h));
                      a.shape.paths = a.localShapeCollection;
                    }
                  this.dynamicProperties.length || (this._mdf = !1);
                });
              var FontManager = (function () {
                var e = { w: 0, size: 0, shapes: [], data: { shapes: [] } },
                  t = [];
                t = t.concat([
                  2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366, 2367,
                  2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377,
                  2378, 2379, 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390,
                  2391, 2402, 2403
                ]);
                var n = 127988,
                  r = [
                    "d83cdffb",
                    "d83cdffc",
                    "d83cdffd",
                    "d83cdffe",
                    "d83cdfff"
                  ];
                function i(e, t) {
                  var n = createTag("span");
                  n.setAttribute("aria-hidden", !0), (n.style.fontFamily = t);
                  var r = createTag("span");
                  (r.innerText = "giItT1WQy@!-/#"),
                    (n.style.position = "absolute"),
                    (n.style.left = "-10000px"),
                    (n.style.top = "-10000px"),
                    (n.style.fontSize = "300px"),
                    (n.style.fontVariant = "normal"),
                    (n.style.fontStyle = "normal"),
                    (n.style.fontWeight = "normal"),
                    (n.style.letterSpacing = "0"),
                    n.appendChild(r),
                    document.body.appendChild(n);
                  var i = r.offsetWidth;
                  return (
                    (r.style.fontFamily =
                      (function (e) {
                        var t,
                          n = e.split(","),
                          r = n.length,
                          i = [];
                        for (t = 0; t < r; t += 1)
                          "sans-serif" !== n[t] &&
                            "monospace" !== n[t] &&
                            i.push(n[t]);
                        return i.join(",");
                      })(e) +
                      ", " +
                      t),
                    { node: r, w: i, parent: n }
                  );
                }
                function a(e, t) {
                  var n,
                    r = document.body && t ? "svg" : "canvas",
                    i = getFontProperties(e);
                  if ("svg" === r) {
                    var a = createNS("text");
                    (a.style.fontSize = "100px"),
                      a.setAttribute("font-family", e.fFamily),
                      a.setAttribute("font-style", i.style),
                      a.setAttribute("font-weight", i.weight),
                      (a.textContent = "1"),
                      e.fClass
                        ? ((a.style.fontFamily = "inherit"),
                          a.setAttribute("class", e.fClass))
                        : (a.style.fontFamily = e.fFamily),
                      t.appendChild(a),
                      (n = a);
                  } else {
                    var s = new OffscreenCanvas(500, 500).getContext("2d");
                    (s.font = i.style + " " + i.weight + " 100px " + e.fFamily),
                      (n = s);
                  }
                  return {
                    measureText: function (e) {
                      return "svg" === r
                        ? ((n.textContent = e), n.getComputedTextLength())
                        : n.measureText(e).width;
                    }
                  };
                }
                function s(e) {
                  var t = 0,
                    n = e.charCodeAt(0);
                  if (n >= 55296 && n <= 56319) {
                    var r = e.charCodeAt(1);
                    r >= 56320 &&
                      r <= 57343 &&
                      (t = 1024 * (n - 55296) + r - 56320 + 65536);
                  }
                  return t;
                }
                function o(e) {
                  var t = s(e);
                  return t >= 127462 && t <= 127487;
                }
                var l = function () {
                  (this.fonts = []),
                    (this.chars = null),
                    (this.typekitLoaded = 0),
                    (this.isLoaded = !1),
                    (this._warned = !1),
                    (this.initTime = Date.now()),
                    (this.setIsLoadedBinded = this.setIsLoaded.bind(this)),
                    (this.checkLoadedFontsBinded =
                      this.checkLoadedFonts.bind(this));
                };
                (l.isModifier = function (e, t) {
                  var n = e.toString(16) + t.toString(16);
                  return -1 !== r.indexOf(n);
                }),
                  (l.isZeroWidthJoiner = function (e) {
                    return 8205 === e;
                  }),
                  (l.isFlagEmoji = function (e) {
                    return o(e.substr(0, 2)) && o(e.substr(2, 2));
                  }),
                  (l.isRegionalCode = o),
                  (l.isCombinedCharacter = function (e) {
                    return -1 !== t.indexOf(e);
                  }),
                  (l.isRegionalFlag = function (e, t) {
                    var r = s(e.substr(t, 2));
                    if (r !== n) return !1;
                    var i = 0;
                    for (t += 2; i < 5; ) {
                      if ((r = s(e.substr(t, 2))) < 917601 || r > 917626)
                        return !1;
                      (i += 1), (t += 2);
                    }
                    return 917631 === s(e.substr(t, 2));
                  }),
                  (l.isVariationSelector = function (e) {
                    return 65039 === e;
                  }),
                  (l.BLACK_FLAG_CODE_POINT = n);
                var h = {
                  addChars: function (e) {
                    if (e) {
                      var t;
                      this.chars || (this.chars = []);
                      var n,
                        r,
                        i = e.length,
                        a = this.chars.length;
                      for (t = 0; t < i; t += 1) {
                        for (n = 0, r = !1; n < a; )
                          this.chars[n].style === e[t].style &&
                            this.chars[n].fFamily === e[t].fFamily &&
                            this.chars[n].ch === e[t].ch &&
                            (r = !0),
                            (n += 1);
                        r || (this.chars.push(e[t]), (a += 1));
                      }
                    }
                  },
                  addFonts: function (e, t) {
                    if (e) {
                      if (this.chars)
                        return (this.isLoaded = !0), void (this.fonts = e.list);
                      if (!document.body)
                        return (
                          (this.isLoaded = !0),
                          e.list.forEach(function (e) {
                            (e.helper = a(e)), (e.cache = {});
                          }),
                          void (this.fonts = e.list)
                        );
                      var n,
                        r = e.list,
                        s = r.length,
                        o = s;
                      for (n = 0; n < s; n += 1) {
                        var l,
                          h,
                          u = !0;
                        if (
                          ((r[n].loaded = !1),
                          (r[n].monoCase = i(r[n].fFamily, "monospace")),
                          (r[n].sansCase = i(r[n].fFamily, "sans-serif")),
                          r[n].fPath)
                        ) {
                          if ("p" === r[n].fOrigin || 3 === r[n].origin) {
                            if (
                              ((l = document.querySelectorAll(
                                'style[f-forigin="p"][f-family="' +
                                  r[n].fFamily +
                                  '"], style[f-origin="3"][f-family="' +
                                  r[n].fFamily +
                                  '"]'
                              )).length > 0 && (u = !1),
                              u)
                            ) {
                              var c = createTag("style");
                              c.setAttribute("f-forigin", r[n].fOrigin),
                                c.setAttribute("f-origin", r[n].origin),
                                c.setAttribute("f-family", r[n].fFamily),
                                (c.type = "text/css"),
                                (c.innerText =
                                  "@font-face {font-family: " +
                                  r[n].fFamily +
                                  "; font-style: normal; src: url('" +
                                  r[n].fPath +
                                  "');}"),
                                t.appendChild(c);
                            }
                          } else if ("g" === r[n].fOrigin || 1 === r[n].origin) {
                            for (
                              l = document.querySelectorAll(
                                'link[f-forigin="g"], link[f-origin="1"]'
                              ),
                                h = 0;
                              h < l.length;
                              h += 1
                            )
                              -1 !== l[h].href.indexOf(r[n].fPath) && (u = !1);
                            if (u) {
                              var d = createTag("link");
                              d.setAttribute("f-forigin", r[n].fOrigin),
                                d.setAttribute("f-origin", r[n].origin),
                                (d.type = "text/css"),
                                (d.rel = "stylesheet"),
                                (d.href = r[n].fPath),
                                document.body.appendChild(d);
                            }
                          } else if ("t" === r[n].fOrigin || 2 === r[n].origin) {
                            for (
                              l = document.querySelectorAll(
                                'script[f-forigin="t"], script[f-origin="2"]'
                              ),
                                h = 0;
                              h < l.length;
                              h += 1
                            )
                              r[n].fPath === l[h].src && (u = !1);
                            if (u) {
                              var f = createTag("link");
                              f.setAttribute("f-forigin", r[n].fOrigin),
                                f.setAttribute("f-origin", r[n].origin),
                                f.setAttribute("rel", "stylesheet"),
                                f.setAttribute("href", r[n].fPath),
                                t.appendChild(f);
                            }
                          }
                        } else (r[n].loaded = !0), (o -= 1);
                        (r[n].helper = a(r[n], t)),
                          (r[n].cache = {}),
                          this.fonts.push(r[n]);
                      }
                      0 === o
                        ? (this.isLoaded = !0)
                        : setTimeout(this.checkLoadedFonts.bind(this), 100);
                    } else this.isLoaded = !0;
                  },
                  getCharData: function (t, n, r) {
                    for (var i = 0, a = this.chars.length; i < a; ) {
                      if (
                        this.chars[i].ch === t &&
                        this.chars[i].style === n &&
                        this.chars[i].fFamily === r
                      )
                        return this.chars[i];
                      i += 1;
                    }
                    return (
                      (("string" == typeof t && 13 !== t.charCodeAt(0)) || !t) &&
                        console &&
                        console.warn &&
                        !this._warned &&
                        ((this._warned = !0),
                        console.warn(
                          "Missing character from exported characters list: ",
                          t,
                          n,
                          r
                        )),
                      e
                    );
                  },
                  getFontByName: function (e) {
                    for (var t = 0, n = this.fonts.length; t < n; ) {
                      if (this.fonts[t].fName === e) return this.fonts[t];
                      t += 1;
                    }
                    return this.fonts[0];
                  },
                  measureText: function (e, t, n) {
                    var r = this.getFontByName(t),
                      i = e;
                    if (!r.cache[i]) {
                      var a = r.helper;
                      if (" " === e) {
                        var s = a.measureText("|" + e + "|"),
                          o = a.measureText("||");
                        r.cache[i] = (s - o) / 100;
                      } else r.cache[i] = a.measureText(e) / 100;
                    }
                    return r.cache[i] * n;
                  },
                  checkLoadedFonts: function () {
                    var e,
                      t,
                      n,
                      r = this.fonts.length,
                      i = r;
                    for (e = 0; e < r; e += 1)
                      this.fonts[e].loaded
                        ? (i -= 1)
                        : "n" === this.fonts[e].fOrigin ||
                          0 === this.fonts[e].origin
                        ? (this.fonts[e].loaded = !0)
                        : ((t = this.fonts[e].monoCase.node),
                          (n = this.fonts[e].monoCase.w),
                          t.offsetWidth !== n
                            ? ((i -= 1), (this.fonts[e].loaded = !0))
                            : ((t = this.fonts[e].sansCase.node),
                              (n = this.fonts[e].sansCase.w),
                              t.offsetWidth !== n &&
                                ((i -= 1), (this.fonts[e].loaded = !0))),
                          this.fonts[e].loaded &&
                            (this.fonts[e].sansCase.parent.parentNode.removeChild(
                              this.fonts[e].sansCase.parent
                            ),
                            this.fonts[e].monoCase.parent.parentNode.removeChild(
                              this.fonts[e].monoCase.parent
                            )));
                    0 !== i && Date.now() - this.initTime < 5e3
                      ? setTimeout(this.checkLoadedFontsBinded, 20)
                      : setTimeout(this.setIsLoadedBinded, 10);
                  },
                  setIsLoaded: function () {
                    this.isLoaded = !0;
                  }
                };
                return (l.prototype = h), l;
              })();
              function SlotManager(e) {
                this.animationData = e;
              }
              function slotFactory(e) {
                return new SlotManager(e);
              }
              function RenderableElement() {}
              (SlotManager.prototype.getProp = function (e) {
                return this.animationData.slots && this.animationData.slots[e.sid]
                  ? Object.assign(e, this.animationData.slots[e.sid].p)
                  : e;
              }),
                (RenderableElement.prototype = {
                  initRenderable: function () {
                    (this.isInRange = !1),
                      (this.hidden = !1),
                      (this.isTransparent = !1),
                      (this.renderableComponents = []);
                  },
                  addRenderableComponent: function (e) {
                    -1 === this.renderableComponents.indexOf(e) &&
                      this.renderableComponents.push(e);
                  },
                  removeRenderableComponent: function (e) {
                    -1 !== this.renderableComponents.indexOf(e) &&
                      this.renderableComponents.splice(
                        this.renderableComponents.indexOf(e),
                        1
                      );
                  },
                  prepareRenderableFrame: function (e) {
                    this.checkLayerLimits(e);
                  },
                  checkTransparency: function () {
                    this.finalTransform.mProp.o.v <= 0
                      ? !this.isTransparent &&
                        this.globalData.renderConfig.hideOnTransparent &&
                        ((this.isTransparent = !0), this.hide())
                      : this.isTransparent &&
                        ((this.isTransparent = !1), this.show());
                  },
                  checkLayerLimits: function (e) {
                    this.data.ip - this.data.st <= e &&
                    this.data.op - this.data.st > e
                      ? !0 !== this.isInRange &&
                        ((this.globalData._mdf = !0),
                        (this._mdf = !0),
                        (this.isInRange = !0),
                        this.show())
                      : !1 !== this.isInRange &&
                        ((this.globalData._mdf = !0),
                        (this.isInRange = !1),
                        this.hide());
                  },
                  renderRenderable: function () {
                    var e,
                      t = this.renderableComponents.length;
                    for (e = 0; e < t; e += 1)
                      this.renderableComponents[e].renderFrame(
                        this._isFirstFrame
                      );
                  },
                  sourceRectAtTime: function () {
                    return { top: 0, left: 0, width: 100, height: 100 };
                  },
                  getLayerSize: function () {
                    return 5 === this.data.ty
                      ? {
                          w: this.data.textData.width,
                          h: this.data.textData.height
                        }
                      : { w: this.data.width, h: this.data.height };
                  }
                });
              var getBlendMode =
                  ((blendModeEnums = {
                    0: "source-over",
                    1: "multiply",
                    2: "screen",
                    3: "overlay",
                    4: "darken",
                    5: "lighten",
                    6: "color-dodge",
                    7: "color-burn",
                    8: "hard-light",
                    9: "soft-light",
                    10: "difference",
                    11: "exclusion",
                    12: "hue",
                    13: "saturation",
                    14: "color",
                    15: "luminosity"
                  }),
                  function (e) {
                    return blendModeEnums[e] || "";
                  }),
                blendModeEnums;
              function SliderEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n);
              }
              function AngleEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n);
              }
              function ColorEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 1, 0, n);
              }
              function PointEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 1, 0, n);
              }
              function LayerIndexEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n);
              }
              function MaskIndexEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n);
              }
              function CheckboxEffect(e, t, n) {
                this.p = PropertyFactory.getProp(t, e.v, 0, 0, n);
              }
              function NoValueEffect() {
                this.p = {};
              }
              function EffectsManager(e, t) {
                var n,
                  r = e.ef || [];
                this.effectElements = [];
                var i,
                  a = r.length;
                for (n = 0; n < a; n += 1)
                  (i = new GroupEffect(r[n], t)), this.effectElements.push(i);
              }
              function GroupEffect(e, t) {
                this.init(e, t);
              }
              function BaseElement() {}
              function FrameElement() {}
              function FootageElement(e, t, n) {
                this.initFrame(),
                  this.initRenderable(),
                  (this.assetData = t.getAssetData(e.refId)),
                  (this.footageData = t.imageLoader.getAsset(this.assetData)),
                  this.initBaseData(e, t, n);
              }
              function AudioElement(e, t, n) {
                this.initFrame(),
                  this.initRenderable(),
                  (this.assetData = t.getAssetData(e.refId)),
                  this.initBaseData(e, t, n),
                  (this._isPlaying = !1),
                  (this._canPlay = !1);
                var r = this.globalData.getAssetsPath(this.assetData);
                (this.audio = this.globalData.audioController.createAudio(r)),
                  (this._currentTime = 0),
                  this.globalData.audioController.addAudio(this),
                  (this._volumeMultiplier = 1),
                  (this._volume = 1),
                  (this._previousVolume = null),
                  (this.tm = e.tm
                    ? PropertyFactory.getProp(this, e.tm, 0, t.frameRate, this)
                    : { _placeholder: !0 }),
                  (this.lv = PropertyFactory.getProp(
                    this,
                    e.au && e.au.lv ? e.au.lv : { k: [100] },
                    1,
                    0.01,
                    this
                  ));
              }
              function BaseRenderer() {}
              extendPrototype([DynamicPropertyContainer], GroupEffect),
                (GroupEffect.prototype.getValue =
                  GroupEffect.prototype.iterateDynamicProperties),
                (GroupEffect.prototype.init = function (e, t) {
                  var n;
                  (this.data = e),
                    (this.effectElements = []),
                    this.initDynamicPropertyContainer(t);
                  var r,
                    i = this.data.ef.length,
                    a = this.data.ef;
                  for (n = 0; n < i; n += 1) {
                    switch (((r = null), a[n].ty)) {
                      case 0:
                        r = new SliderEffect(a[n], t, this);
                        break;
                      case 1:
                        r = new AngleEffect(a[n], t, this);
                        break;
                      case 2:
                        r = new ColorEffect(a[n], t, this);
                        break;
                      case 3:
                        r = new PointEffect(a[n], t, this);
                        break;
                      case 4:
                      case 7:
                        r = new CheckboxEffect(a[n], t, this);
                        break;
                      case 10:
                        r = new LayerIndexEffect(a[n], t, this);
                        break;
                      case 11:
                        r = new MaskIndexEffect(a[n], t, this);
                        break;
                      case 5:
                        r = new EffectsManager(a[n], t, this);
                        break;
                      default:
                        r = new NoValueEffect(a[n], t, this);
                    }
                    r && this.effectElements.push(r);
                  }
                }),
                (BaseElement.prototype = {
                  checkMasks: function () {
                    if (!this.data.hasMask) return !1;
                    for (
                      var e = 0, t = this.data.masksProperties.length;
                      e < t;
  
                    ) {
                      if (
                        "n" !== this.data.masksProperties[e].mode &&
                        !1 !== this.data.masksProperties[e].cl
                      )
                        return !0;
                      e += 1;
                    }
                    return !1;
                  },
                  initExpressions: function () {
                    var e = getExpressionInterfaces();
                    if (e) {
                      var t = e("layer"),
                        n = e("effects"),
                        r = e("shape"),
                        i = e("text"),
                        a = e("comp");
                      (this.layerInterface = t(this)),
                        this.data.hasMask &&
                          this.maskManager &&
                          this.layerInterface.registerMaskInterface(
                            this.maskManager
                          );
                      var s = n.createEffectsInterface(this, this.layerInterface);
                      this.layerInterface.registerEffectsInterface(s),
                        0 === this.data.ty || this.data.xt
                          ? (this.compInterface = a(this))
                          : 4 === this.data.ty
                          ? ((this.layerInterface.shapeInterface = r(
                              this.shapesData,
                              this.itemsData,
                              this.layerInterface
                            )),
                            (this.layerInterface.content =
                              this.layerInterface.shapeInterface))
                          : 5 === this.data.ty &&
                            ((this.layerInterface.textInterface = i(this)),
                            (this.layerInterface.text =
                              this.layerInterface.textInterface));
                    }
                  },
                  setBlendMode: function () {
                    var e = getBlendMode(this.data.bm);
                    (this.baseElement || this.layerElement).style[
                      "mix-blend-mode"
                    ] = e;
                  },
                  initBaseData: function (e, t, n) {
                    (this.globalData = t),
                      (this.comp = n),
                      (this.data = e),
                      (this.layerId = createElementID()),
                      this.data.sr || (this.data.sr = 1),
                      (this.effectsManager = new EffectsManager(
                        this.data,
                        this,
                        this.dynamicProperties
                      ));
                  },
                  getType: function () {
                    return this.type;
                  },
                  sourceRectAtTime: function () {}
                }),
                (FrameElement.prototype = {
                  initFrame: function () {
                    (this._isFirstFrame = !1),
                      (this.dynamicProperties = []),
                      (this._mdf = !1);
                  },
                  prepareProperties: function (e, t) {
                    var n,
                      r = this.dynamicProperties.length;
                    for (n = 0; n < r; n += 1)
                      (t ||
                        (this._isParent &&
                          "transform" === this.dynamicProperties[n].propType)) &&
                        (this.dynamicProperties[n].getValue(),
                        this.dynamicProperties[n]._mdf &&
                          ((this.globalData._mdf = !0), (this._mdf = !0)));
                  },
                  addDynamicProperty: function (e) {
                    -1 === this.dynamicProperties.indexOf(e) &&
                      this.dynamicProperties.push(e);
                  }
                }),
                (FootageElement.prototype.prepareFrame = function () {}),
                extendPrototype(
                  [RenderableElement, BaseElement, FrameElement],
                  FootageElement
                ),
                (FootageElement.prototype.getBaseElement = function () {
                  return null;
                }),
                (FootageElement.prototype.renderFrame = function () {}),
                (FootageElement.prototype.destroy = function () {}),
                (FootageElement.prototype.initExpressions = function () {
                  var e = getExpressionInterfaces();
                  if (e) {
                    var t = e("footage");
                    this.layerInterface = t(this);
                  }
                }),
                (FootageElement.prototype.getFootageData = function () {
                  return this.footageData;
                }),
                (AudioElement.prototype.prepareFrame = function (e) {
                  if (
                    (this.prepareRenderableFrame(e, !0),
                    this.prepareProperties(e, !0),
                    this.tm._placeholder)
                  )
                    this._currentTime = e / this.data.sr;
                  else {
                    var t = this.tm.v;
                    this._currentTime = t;
                  }
                  this._volume = this.lv.v[0];
                  var n = this._volume * this._volumeMultiplier;
                  this._previousVolume !== n &&
                    ((this._previousVolume = n), this.audio.volume(n));
                }),
                extendPrototype(
                  [RenderableElement, BaseElement, FrameElement],
                  AudioElement
                ),
                (AudioElement.prototype.renderFrame = function () {
                  this.isInRange &&
                    this._canPlay &&
                    (this._isPlaying
                      ? (!this.audio.playing() ||
                          Math.abs(
                            this._currentTime / this.globalData.frameRate -
                              this.audio.seek()
                          ) > 0.1) &&
                        this.audio.seek(
                          this._currentTime / this.globalData.frameRate
                        )
                      : (this.audio.play(),
                        this.audio.seek(
                          this._currentTime / this.globalData.frameRate
                        ),
                        (this._isPlaying = !0)));
                }),
                (AudioElement.prototype.show = function () {}),
                (AudioElement.prototype.hide = function () {
                  this.audio.pause(), (this._isPlaying = !1);
                }),
                (AudioElement.prototype.pause = function () {
                  this.audio.pause(),
                    (this._isPlaying = !1),
                    (this._canPlay = !1);
                }),
                (AudioElement.prototype.resume = function () {
                  this._canPlay = !0;
                }),
                (AudioElement.prototype.setRate = function (e) {
                  this.audio.rate(e);
                }),
                (AudioElement.prototype.volume = function (e) {
                  (this._volumeMultiplier = e),
                    (this._previousVolume = e * this._volume),
                    this.audio.volume(this._previousVolume);
                }),
                (AudioElement.prototype.getBaseElement = function () {
                  return null;
                }),
                (AudioElement.prototype.destroy = function () {}),
                (AudioElement.prototype.sourceRectAtTime = function () {}),
                (AudioElement.prototype.initExpressions = function () {}),
                (BaseRenderer.prototype.checkLayers = function (e) {
                  var t,
                    n,
                    r = this.layers.length;
                  for (this.completeLayers = !0, t = r - 1; t >= 0; t -= 1)
                    this.elements[t] ||
                      ((n = this.layers[t]).ip - n.st <= e - this.layers[t].st &&
                        n.op - n.st > e - this.layers[t].st &&
                        this.buildItem(t)),
                      (this.completeLayers =
                        !!this.elements[t] && this.completeLayers);
                  this.checkPendingElements();
                }),
                (BaseRenderer.prototype.createItem = function (e) {
                  switch (e.ty) {
                    case 2:
                      return this.createImage(e);
                    case 0:
                      return this.createComp(e);
                    case 1:
                      return this.createSolid(e);
                    case 3:
                    default:
                      return this.createNull(e);
                    case 4:
                      return this.createShape(e);
                    case 5:
                      return this.createText(e);
                    case 6:
                      return this.createAudio(e);
                    case 13:
                      return this.createCamera(e);
                    case 15:
                      return this.createFootage(e);
                  }
                }),
                (BaseRenderer.prototype.createCamera = function () {
                  throw new Error(
                    "You're using a 3d camera. Try the html renderer."
                  );
                }),
                (BaseRenderer.prototype.createAudio = function (e) {
                  return new AudioElement(e, this.globalData, this);
                }),
                (BaseRenderer.prototype.createFootage = function (e) {
                  return new FootageElement(e, this.globalData, this);
                }),
                (BaseRenderer.prototype.buildAllItems = function () {
                  var e,
                    t = this.layers.length;
                  for (e = 0; e < t; e += 1) this.buildItem(e);
                  this.checkPendingElements();
                }),
                (BaseRenderer.prototype.includeLayers = function (e) {
                  var t;
                  this.completeLayers = !1;
                  var n,
                    r = e.length,
                    i = this.layers.length;
                  for (t = 0; t < r; t += 1)
                    for (n = 0; n < i; ) {
                      if (this.layers[n].id === e[t].id) {
                        this.layers[n] = e[t];
                        break;
                      }
                      n += 1;
                    }
                }),
                (BaseRenderer.prototype.setProjectInterface = function (e) {
                  this.globalData.projectInterface = e;
                }),
                (BaseRenderer.prototype.initItems = function () {
                  this.globalData.progressiveLoad || this.buildAllItems();
                }),
                (BaseRenderer.prototype.buildElementParenting = function (
                  e,
                  t,
                  n
                ) {
                  for (
                    var r = this.elements, i = this.layers, a = 0, s = i.length;
                    a < s;
  
                  )
                    i[a].ind == t &&
                      (r[a] && !0 !== r[a]
                        ? (n.push(r[a]),
                          r[a].setAsParent(),
                          void 0 !== i[a].parent
                            ? this.buildElementParenting(e, i[a].parent, n)
                            : e.setHierarchy(n))
                        : (this.buildItem(a), this.addPendingElement(e))),
                      (a += 1);
                }),
                (BaseRenderer.prototype.addPendingElement = function (e) {
                  this.pendingElements.push(e);
                }),
                (BaseRenderer.prototype.searchExtraCompositions = function (e) {
                  var t,
                    n = e.length;
                  for (t = 0; t < n; t += 1)
                    if (e[t].xt) {
                      var r = this.createComp(e[t]);
                      r.initExpressions(),
                        this.globalData.projectInterface.registerComposition(r);
                    }
                }),
                (BaseRenderer.prototype.getElementById = function (e) {
                  var t,
                    n = this.elements.length;
                  for (t = 0; t < n; t += 1)
                    if (this.elements[t].data.ind === e) return this.elements[t];
                  return null;
                }),
                (BaseRenderer.prototype.getElementByPath = function (e) {
                  var t,
                    n = e.shift();
                  if ("number" == typeof n) t = this.elements[n];
                  else {
                    var r,
                      i = this.elements.length;
                    for (r = 0; r < i; r += 1)
                      if (this.elements[r].data.nm === n) {
                        t = this.elements[r];
                        break;
                      }
                  }
                  return 0 === e.length ? t : t.getElementByPath(e);
                }),
                (BaseRenderer.prototype.setupGlobalData = function (e, t) {
                  (this.globalData.fontManager = new FontManager()),
                    (this.globalData.slotManager = slotFactory(e)),
                    this.globalData.fontManager.addChars(e.chars),
                    this.globalData.fontManager.addFonts(e.fonts, t),
                    (this.globalData.getAssetData =
                      this.animationItem.getAssetData.bind(this.animationItem)),
                    (this.globalData.getAssetsPath =
                      this.animationItem.getAssetsPath.bind(this.animationItem)),
                    (this.globalData.imageLoader =
                      this.animationItem.imagePreloader),
                    (this.globalData.audioController =
                      this.animationItem.audioController),
                    (this.globalData.frameId = 0),
                    (this.globalData.frameRate = e.fr),
                    (this.globalData.nm = e.nm),
                    (this.globalData.compSize = { w: e.w, h: e.h });
                });
              var effectTypes = { TRANSFORM_EFFECT: "transformEFfect" };
              function TransformElement() {}
              function MaskElement(e, t, n) {
                (this.data = e),
                  (this.element = t),
                  (this.globalData = n),
                  (this.storedData = []),
                  (this.masksProperties = this.data.masksProperties || []),
                  (this.maskElement = null);
                var r,
                  i,
                  a = this.globalData.defs,
                  s = this.masksProperties ? this.masksProperties.length : 0;
                (this.viewData = createSizedArray(s)), (this.solidPath = "");
                var o,
                  l,
                  h,
                  u,
                  c,
                  d,
                  f = this.masksProperties,
                  p = 0,
                  m = [],
                  g = createElementID(),
                  v = "clipPath",
                  y = "clip-path";
                for (r = 0; r < s; r += 1)
                  if (
                    ((("a" !== f[r].mode && "n" !== f[r].mode) ||
                      f[r].inv ||
                      100 !== f[r].o.k ||
                      f[r].o.x) &&
                      ((v = "mask"), (y = "mask")),
                    ("s" !== f[r].mode && "i" !== f[r].mode) || 0 !== p
                      ? (h = null)
                      : ((h = createNS("rect")).setAttribute("fill", "#ffffff"),
                        h.setAttribute("width", this.element.comp.data.w || 0),
                        h.setAttribute("height", this.element.comp.data.h || 0),
                        m.push(h)),
                    (i = createNS("path")),
                    "n" === f[r].mode)
                  )
                    (this.viewData[r] = {
                      op: PropertyFactory.getProp(
                        this.element,
                        f[r].o,
                        0,
                        0.01,
                        this.element
                      ),
                      prop: ShapePropertyFactory.getShapeProp(
                        this.element,
                        f[r],
                        3
                      ),
                      elem: i,
                      lastPath: ""
                    }),
                      a.appendChild(i);
                  else {
                    var _;
                    if (
                      ((p += 1),
                      i.setAttribute(
                        "fill",
                        "s" === f[r].mode ? "#000000" : "#ffffff"
                      ),
                      i.setAttribute("clip-rule", "nonzero"),
                      0 !== f[r].x.k
                        ? ((v = "mask"),
                          (y = "mask"),
                          (d = PropertyFactory.getProp(
                            this.element,
                            f[r].x,
                            0,
                            null,
                            this.element
                          )),
                          (_ = createElementID()),
                          (u = createNS("filter")).setAttribute("id", _),
                          (c = createNS("feMorphology")).setAttribute(
                            "operator",
                            "erode"
                          ),
                          c.setAttribute("in", "SourceGraphic"),
                          c.setAttribute("radius", "0"),
                          u.appendChild(c),
                          a.appendChild(u),
                          i.setAttribute(
                            "stroke",
                            "s" === f[r].mode ? "#000000" : "#ffffff"
                          ))
                        : ((c = null), (d = null)),
                      (this.storedData[r] = {
                        elem: i,
                        x: d,
                        expan: c,
                        lastPath: "",
                        lastOperator: "",
                        filterId: _,
                        lastRadius: 0
                      }),
                      "i" === f[r].mode)
                    ) {
                      l = m.length;
                      var b = createNS("g");
                      for (o = 0; o < l; o += 1) b.appendChild(m[o]);
                      var x = createNS("mask");
                      x.setAttribute("mask-type", "alpha"),
                        x.setAttribute("id", g + "_" + p),
                        x.appendChild(i),
                        a.appendChild(x),
                        b.setAttribute(
                          "mask",
                          "url(" + getLocationHref() + "#" + g + "_" + p + ")"
                        ),
                        (m.length = 0),
                        m.push(b);
                    } else m.push(i);
                    f[r].inv &&
                      !this.solidPath &&
                      (this.solidPath = this.createLayerSolidPath()),
                      (this.viewData[r] = {
                        elem: i,
                        lastPath: "",
                        op: PropertyFactory.getProp(
                          this.element,
                          f[r].o,
                          0,
                          0.01,
                          this.element
                        ),
                        prop: ShapePropertyFactory.getShapeProp(
                          this.element,
                          f[r],
                          3
                        ),
                        invRect: h
                      }),
                      this.viewData[r].prop.k ||
                        this.drawPath(
                          f[r],
                          this.viewData[r].prop.v,
                          this.viewData[r]
                        );
                  }
                for (
                  this.maskElement = createNS(v), s = m.length, r = 0;
                  r < s;
                  r += 1
                )
                  this.maskElement.appendChild(m[r]);
                p > 0 &&
                  (this.maskElement.setAttribute("id", g),
                  this.element.maskedElement.setAttribute(
                    y,
                    "url(" + getLocationHref() + "#" + g + ")"
                  ),
                  a.appendChild(this.maskElement)),
                  this.viewData.length &&
                    this.element.addRenderableComponent(this);
              }
              (TransformElement.prototype = {
                initTransform: function () {
                  var e = new Matrix();
                  (this.finalTransform = {
                    mProp: this.data.ks
                      ? TransformPropertyFactory.getTransformProperty(
                          this,
                          this.data.ks,
                          this
                        )
                      : { o: 0 },
                    _matMdf: !1,
                    _localMatMdf: !1,
                    _opMdf: !1,
                    mat: e,
                    localMat: e,
                    localOpacity: 1
                  }),
                    this.data.ao && (this.finalTransform.mProp.autoOriented = !0),
                    this.data.ty;
                },
                renderTransform: function () {
                  if (
                    ((this.finalTransform._opMdf =
                      this.finalTransform.mProp.o._mdf || this._isFirstFrame),
                    (this.finalTransform._matMdf =
                      this.finalTransform.mProp._mdf || this._isFirstFrame),
                    this.hierarchy)
                  ) {
                    var e,
                      t = this.finalTransform.mat,
                      n = 0,
                      r = this.hierarchy.length;
                    if (!this.finalTransform._matMdf)
                      for (; n < r; ) {
                        if (this.hierarchy[n].finalTransform.mProp._mdf) {
                          this.finalTransform._matMdf = !0;
                          break;
                        }
                        n += 1;
                      }
                    if (this.finalTransform._matMdf)
                      for (
                        e = this.finalTransform.mProp.v.props,
                          t.cloneFromProps(e),
                          n = 0;
                        n < r;
                        n += 1
                      )
                        t.multiply(this.hierarchy[n].finalTransform.mProp.v);
                  }
                  this.finalTransform._matMdf &&
                    (this.finalTransform._localMatMdf =
                      this.finalTransform._matMdf),
                    this.finalTransform._opMdf &&
                      (this.finalTransform.localOpacity =
                        this.finalTransform.mProp.o.v);
                },
                renderLocalTransform: function () {
                  if (this.localTransforms) {
                    var e = 0,
                      t = this.localTransforms.length;
                    if (
                      ((this.finalTransform._localMatMdf =
                        this.finalTransform._matMdf),
                      !this.finalTransform._localMatMdf ||
                        !this.finalTransform._opMdf)
                    )
                      for (; e < t; )
                        this.localTransforms[e]._mdf &&
                          (this.finalTransform._localMatMdf = !0),
                          this.localTransforms[e]._opMdf &&
                            !this.finalTransform._opMdf &&
                            ((this.finalTransform.localOpacity =
                              this.finalTransform.mProp.o.v),
                            (this.finalTransform._opMdf = !0)),
                          (e += 1);
                    if (this.finalTransform._localMatMdf) {
                      var n = this.finalTransform.localMat;
                      for (
                        this.localTransforms[0].matrix.clone(n), e = 1;
                        e < t;
                        e += 1
                      ) {
                        var r = this.localTransforms[e].matrix;
                        n.multiply(r);
                      }
                      n.multiply(this.finalTransform.mat);
                    }
                    if (this.finalTransform._opMdf) {
                      var i = this.finalTransform.localOpacity;
                      for (e = 0; e < t; e += 1)
                        i *= 0.01 * this.localTransforms[e].opacity;
                      this.finalTransform.localOpacity = i;
                    }
                  }
                },
                searchEffectTransforms: function () {
                  if (this.renderableEffectsManager) {
                    var e = this.renderableEffectsManager.getEffects(
                      effectTypes.TRANSFORM_EFFECT
                    );
                    if (e.length) {
                      (this.localTransforms = []),
                        (this.finalTransform.localMat = new Matrix());
                      var t = 0,
                        n = e.length;
                      for (t = 0; t < n; t += 1) this.localTransforms.push(e[t]);
                    }
                  }
                },
                globalToLocal: function (e) {
                  var t = [];
                  t.push(this.finalTransform);
                  for (var n, r = !0, i = this.comp; r; )
                    i.finalTransform
                      ? (i.data.hasMask && t.splice(0, 0, i.finalTransform),
                        (i = i.comp))
                      : (r = !1);
                  var a,
                    s = t.length;
                  for (n = 0; n < s; n += 1)
                    (a = t[n].mat.applyToPointArray(0, 0, 0)),
                      (e = [e[0] - a[0], e[1] - a[1], 0]);
                  return e;
                },
                mHelper: new Matrix()
              }),
                (MaskElement.prototype.getMaskProperty = function (e) {
                  return this.viewData[e].prop;
                }),
                (MaskElement.prototype.renderFrame = function (e) {
                  var t,
                    n = this.element.finalTransform.mat,
                    r = this.masksProperties.length;
                  for (t = 0; t < r; t += 1)
                    if (
                      ((this.viewData[t].prop._mdf || e) &&
                        this.drawPath(
                          this.masksProperties[t],
                          this.viewData[t].prop.v,
                          this.viewData[t]
                        ),
                      (this.viewData[t].op._mdf || e) &&
                        this.viewData[t].elem.setAttribute(
                          "fill-opacity",
                          this.viewData[t].op.v
                        ),
                      "n" !== this.masksProperties[t].mode &&
                        (this.viewData[t].invRect &&
                          (this.element.finalTransform.mProp._mdf || e) &&
                          this.viewData[t].invRect.setAttribute(
                            "transform",
                            n.getInverseMatrix().to2dCSS()
                          ),
                        this.storedData[t].x && (this.storedData[t].x._mdf || e)))
                    ) {
                      var i = this.storedData[t].expan;
                      this.storedData[t].x.v < 0
                        ? ("erode" !== this.storedData[t].lastOperator &&
                            ((this.storedData[t].lastOperator = "erode"),
                            this.storedData[t].elem.setAttribute(
                              "filter",
                              "url(" +
                                getLocationHref() +
                                "#" +
                                this.storedData[t].filterId +
                                ")"
                            )),
                          i.setAttribute("radius", -this.storedData[t].x.v))
                        : ("dilate" !== this.storedData[t].lastOperator &&
                            ((this.storedData[t].lastOperator = "dilate"),
                            this.storedData[t].elem.setAttribute("filter", null)),
                          this.storedData[t].elem.setAttribute(
                            "stroke-width",
                            2 * this.storedData[t].x.v
                          ));
                    }
                }),
                (MaskElement.prototype.getMaskelement = function () {
                  return this.maskElement;
                }),
                (MaskElement.prototype.createLayerSolidPath = function () {
                  var e = "M0,0 ";
                  return (
                    (e += " h" + this.globalData.compSize.w),
                    (e += " v" + this.globalData.compSize.h),
                    (e += " h-" + this.globalData.compSize.w) +
                      " v-" +
                      this.globalData.compSize.h +
                      " "
                  );
                }),
                (MaskElement.prototype.drawPath = function (e, t, n) {
                  var r,
                    i,
                    a = " M" + t.v[0][0] + "," + t.v[0][1];
                  for (i = t._length, r = 1; r < i; r += 1)
                    a +=
                      " C" +
                      t.o[r - 1][0] +
                      "," +
                      t.o[r - 1][1] +
                      " " +
                      t.i[r][0] +
                      "," +
                      t.i[r][1] +
                      " " +
                      t.v[r][0] +
                      "," +
                      t.v[r][1];
                  if (
                    (t.c &&
                      i > 1 &&
                      (a +=
                        " C" +
                        t.o[r - 1][0] +
                        "," +
                        t.o[r - 1][1] +
                        " " +
                        t.i[0][0] +
                        "," +
                        t.i[0][1] +
                        " " +
                        t.v[0][0] +
                        "," +
                        t.v[0][1]),
                    n.lastPath !== a)
                  ) {
                    var s = "";
                    n.elem &&
                      (t.c && (s = e.inv ? this.solidPath + a : a),
                      n.elem.setAttribute("d", s)),
                      (n.lastPath = a);
                  }
                }),
                (MaskElement.prototype.destroy = function () {
                  (this.element = null),
                    (this.globalData = null),
                    (this.maskElement = null),
                    (this.data = null),
                    (this.masksProperties = null);
                });
              var filtersFactory = {
                  createFilter: function (e, t) {
                    var n = createNS("filter");
                    return (
                      n.setAttribute("id", e),
                      !0 !== t &&
                        (n.setAttribute("filterUnits", "objectBoundingBox"),
                        n.setAttribute("x", "0%"),
                        n.setAttribute("y", "0%"),
                        n.setAttribute("width", "100%"),
                        n.setAttribute("height", "100%")),
                      n
                    );
                  },
                  createAlphaToLuminanceFilter: function () {
                    var e = createNS("feColorMatrix");
                    return (
                      e.setAttribute("type", "matrix"),
                      e.setAttribute("color-interpolation-filters", "sRGB"),
                      e.setAttribute(
                        "values",
                        "0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"
                      ),
                      e
                    );
                  }
                },
                featureSupport = (function () {
                  var e = {
                    maskType: !0,
                    svgLumaHidden: !0,
                    offscreenCanvas: "undefined" != typeof OffscreenCanvas
                  };
                  return (
                    (/MSIE 10/i.test(navigator.userAgent) ||
                      /MSIE 9/i.test(navigator.userAgent) ||
                      /rv:11.0/i.test(navigator.userAgent) ||
                      /Edge\/\d./i.test(navigator.userAgent)) &&
                      (e.maskType = !1),
                    /firefox/i.test(navigator.userAgent) &&
                      (e.svgLumaHidden = !1),
                    e
                  );
                })(),
                registeredEffects$1 = {},
                idPrefix = "filter_result_";
              function SVGEffects(e) {
                var t,
                  n,
                  r = "SourceGraphic",
                  i = e.data.ef ? e.data.ef.length : 0,
                  a = createElementID(),
                  s = filtersFactory.createFilter(a, !0),
                  o = 0;
                for (this.filters = [], t = 0; t < i; t += 1) {
                  n = null;
                  var l = e.data.ef[t].ty;
                  registeredEffects$1[l] &&
                    ((n = new (0, registeredEffects$1[l].effect)(
                      s,
                      e.effectsManager.effectElements[t],
                      e,
                      idPrefix + o,
                      r
                    )),
                    (r = idPrefix + o),
                    registeredEffects$1[l].countsAsEffect && (o += 1)),
                    n && this.filters.push(n);
                }
                o &&
                  (e.globalData.defs.appendChild(s),
                  e.layerElement.setAttribute(
                    "filter",
                    "url(" + getLocationHref() + "#" + a + ")"
                  )),
                  this.filters.length && e.addRenderableComponent(this);
              }
              function registerEffect$1(e, t, n) {
                registeredEffects$1[e] = { effect: t, countsAsEffect: n };
              }
              function SVGBaseElement() {}
              function HierarchyElement() {}
              function RenderableDOMElement() {}
              function IImageElement(e, t, n) {
                (this.assetData = t.getAssetData(e.refId)),
                  this.assetData &&
                    this.assetData.sid &&
                    (this.assetData = t.slotManager.getProp(this.assetData)),
                  this.initElement(e, t, n),
                  (this.sourceRect = {
                    top: 0,
                    left: 0,
                    width: this.assetData.w,
                    height: this.assetData.h
                  });
              }
              function ProcessedElement(e, t) {
                (this.elem = e), (this.pos = t);
              }
              function IShapeElement() {}
              (SVGEffects.prototype.renderFrame = function (e) {
                var t,
                  n = this.filters.length;
                for (t = 0; t < n; t += 1) this.filters[t].renderFrame(e);
              }),
                (SVGEffects.prototype.getEffects = function (e) {
                  var t,
                    n = this.filters.length,
                    r = [];
                  for (t = 0; t < n; t += 1)
                    this.filters[t].type === e && r.push(this.filters[t]);
                  return r;
                }),
                (SVGBaseElement.prototype = {
                  initRendererElement: function () {
                    this.layerElement = createNS("g");
                  },
                  createContainerElements: function () {
                    (this.matteElement = createNS("g")),
                      (this.transformedElement = this.layerElement),
                      (this.maskedElement = this.layerElement),
                      (this._sizeChanged = !1);
                    var e = null;
                    if (this.data.td) {
                      this.matteMasks = {};
                      var t = createNS("g");
                      t.setAttribute("id", this.layerId),
                        t.appendChild(this.layerElement),
                        (e = t),
                        this.globalData.defs.appendChild(t);
                    } else
                      this.data.tt
                        ? (this.matteElement.appendChild(this.layerElement),
                          (e = this.matteElement),
                          (this.baseElement = this.matteElement))
                        : (this.baseElement = this.layerElement);
                    if (
                      (this.data.ln &&
                        this.layerElement.setAttribute("id", this.data.ln),
                      this.data.cl &&
                        this.layerElement.setAttribute("class", this.data.cl),
                      0 === this.data.ty && !this.data.hd)
                    ) {
                      var n = createNS("clipPath"),
                        r = createNS("path");
                      r.setAttribute(
                        "d",
                        "M0,0 L" +
                          this.data.w +
                          ",0 L" +
                          this.data.w +
                          "," +
                          this.data.h +
                          " L0," +
                          this.data.h +
                          "z"
                      );
                      var i = createElementID();
                      if (
                        (n.setAttribute("id", i),
                        n.appendChild(r),
                        this.globalData.defs.appendChild(n),
                        this.checkMasks())
                      ) {
                        var a = createNS("g");
                        a.setAttribute(
                          "clip-path",
                          "url(" + getLocationHref() + "#" + i + ")"
                        ),
                          a.appendChild(this.layerElement),
                          (this.transformedElement = a),
                          e
                            ? e.appendChild(this.transformedElement)
                            : (this.baseElement = this.transformedElement);
                      } else
                        this.layerElement.setAttribute(
                          "clip-path",
                          "url(" + getLocationHref() + "#" + i + ")"
                        );
                    }
                    0 !== this.data.bm && this.setBlendMode();
                  },
                  renderElement: function () {
                    this.finalTransform._localMatMdf &&
                      this.transformedElement.setAttribute(
                        "transform",
                        this.finalTransform.localMat.to2dCSS()
                      ),
                      this.finalTransform._opMdf &&
                        this.transformedElement.setAttribute(
                          "opacity",
                          this.finalTransform.localOpacity
                        );
                  },
                  destroyBaseElement: function () {
                    (this.layerElement = null),
                      (this.matteElement = null),
                      this.maskManager.destroy();
                  },
                  getBaseElement: function () {
                    return this.data.hd ? null : this.baseElement;
                  },
                  createRenderableComponents: function () {
                    (this.maskManager = new MaskElement(
                      this.data,
                      this,
                      this.globalData
                    )),
                      (this.renderableEffectsManager = new SVGEffects(this)),
                      this.searchEffectTransforms();
                  },
                  getMatte: function (e) {
                    if (
                      (this.matteMasks || (this.matteMasks = {}),
                      !this.matteMasks[e])
                    ) {
                      var t,
                        n,
                        r,
                        i,
                        a = this.layerId + "_" + e;
                      if (1 === e || 3 === e) {
                        var s = createNS("mask");
                        s.setAttribute("id", a),
                          s.setAttribute(
                            "mask-type",
                            3 === e ? "luminance" : "alpha"
                          ),
                          (r = createNS("use")).setAttributeNS(
                            "http://www.w3.org/1999/xlink",
                            "href",
                            "#" + this.layerId
                          ),
                          s.appendChild(r),
                          this.globalData.defs.appendChild(s),
                          featureSupport.maskType ||
                            1 !== e ||
                            (s.setAttribute("mask-type", "luminance"),
                            (t = createElementID()),
                            (n = filtersFactory.createFilter(t)),
                            this.globalData.defs.appendChild(n),
                            n.appendChild(
                              filtersFactory.createAlphaToLuminanceFilter()
                            ),
                            (i = createNS("g")).appendChild(r),
                            s.appendChild(i),
                            i.setAttribute(
                              "filter",
                              "url(" + getLocationHref() + "#" + t + ")"
                            ));
                      } else if (2 === e) {
                        var o = createNS("mask");
                        o.setAttribute("id", a),
                          o.setAttribute("mask-type", "alpha");
                        var l = createNS("g");
                        o.appendChild(l),
                          (t = createElementID()),
                          (n = filtersFactory.createFilter(t));
                        var h = createNS("feComponentTransfer");
                        h.setAttribute("in", "SourceGraphic"), n.appendChild(h);
                        var u = createNS("feFuncA");
                        u.setAttribute("type", "table"),
                          u.setAttribute("tableValues", "1.0 0.0"),
                          h.appendChild(u),
                          this.globalData.defs.appendChild(n);
                        var c = createNS("rect");
                        c.setAttribute("width", this.comp.data.w),
                          c.setAttribute("height", this.comp.data.h),
                          c.setAttribute("x", "0"),
                          c.setAttribute("y", "0"),
                          c.setAttribute("fill", "#ffffff"),
                          c.setAttribute("opacity", "0"),
                          l.setAttribute(
                            "filter",
                            "url(" + getLocationHref() + "#" + t + ")"
                          ),
                          l.appendChild(c),
                          (r = createNS("use")).setAttributeNS(
                            "http://www.w3.org/1999/xlink",
                            "href",
                            "#" + this.layerId
                          ),
                          l.appendChild(r),
                          featureSupport.maskType ||
                            (o.setAttribute("mask-type", "luminance"),
                            n.appendChild(
                              filtersFactory.createAlphaToLuminanceFilter()
                            ),
                            (i = createNS("g")),
                            l.appendChild(c),
                            i.appendChild(this.layerElement),
                            l.appendChild(i)),
                          this.globalData.defs.appendChild(o);
                      }
                      this.matteMasks[e] = a;
                    }
                    return this.matteMasks[e];
                  },
                  setMatte: function (e) {
                    this.matteElement &&
                      this.matteElement.setAttribute(
                        "mask",
                        "url(" + getLocationHref() + "#" + e + ")"
                      );
                  }
                }),
                (HierarchyElement.prototype = {
                  initHierarchy: function () {
                    (this.hierarchy = []),
                      (this._isParent = !1),
                      this.checkParenting();
                  },
                  setHierarchy: function (e) {
                    this.hierarchy = e;
                  },
                  setAsParent: function () {
                    this._isParent = !0;
                  },
                  checkParenting: function () {
                    void 0 !== this.data.parent &&
                      this.comp.buildElementParenting(this, this.data.parent, []);
                  }
                }),
                extendPrototype(
                  [
                    RenderableElement,
                    createProxyFunction({
                      initElement: function (e, t, n) {
                        this.initFrame(),
                          this.initBaseData(e, t, n),
                          this.initTransform(e, t, n),
                          this.initHierarchy(),
                          this.initRenderable(),
                          this.initRendererElement(),
                          this.createContainerElements(),
                          this.createRenderableComponents(),
                          this.createContent(),
                          this.hide();
                      },
                      hide: function () {
                        this.hidden ||
                          (this.isInRange && !this.isTransparent) ||
                          (((
                            this.baseElement || this.layerElement
                          ).style.display = "none"),
                          (this.hidden = !0));
                      },
                      show: function () {
                        this.isInRange &&
                          !this.isTransparent &&
                          (this.data.hd ||
                            ((
                              this.baseElement || this.layerElement
                            ).style.display = "block"),
                          (this.hidden = !1),
                          (this._isFirstFrame = !0));
                      },
                      renderFrame: function () {
                        this.data.hd ||
                          this.hidden ||
                          (this.renderTransform(),
                          this.renderRenderable(),
                          this.renderLocalTransform(),
                          this.renderElement(),
                          this.renderInnerContent(),
                          this._isFirstFrame && (this._isFirstFrame = !1));
                      },
                      renderInnerContent: function () {},
                      prepareFrame: function (e) {
                        (this._mdf = !1),
                          this.prepareRenderableFrame(e),
                          this.prepareProperties(e, this.isInRange),
                          this.checkTransparency();
                      },
                      destroy: function () {
                        (this.innerElem = null), this.destroyBaseElement();
                      }
                    })
                  ],
                  RenderableDOMElement
                ),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    SVGBaseElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableDOMElement
                  ],
                  IImageElement
                ),
                (IImageElement.prototype.createContent = function () {
                  var e = this.globalData.getAssetsPath(this.assetData);
                  (this.innerElem = createNS("image")),
                    this.innerElem.setAttribute("width", this.assetData.w + "px"),
                    this.innerElem.setAttribute(
                      "height",
                      this.assetData.h + "px"
                    ),
                    this.innerElem.setAttribute(
                      "preserveAspectRatio",
                      this.assetData.pr ||
                        this.globalData.renderConfig.imagePreserveAspectRatio
                    ),
                    this.innerElem.setAttributeNS(
                      "http://www.w3.org/1999/xlink",
                      "href",
                      e
                    ),
                    this.layerElement.appendChild(this.innerElem);
                }),
                (IImageElement.prototype.sourceRectAtTime = function () {
                  return this.sourceRect;
                }),
                (IShapeElement.prototype = {
                  addShapeToModifiers: function (e) {
                    var t,
                      n = this.shapeModifiers.length;
                    for (t = 0; t < n; t += 1) this.shapeModifiers[t].addShape(e);
                  },
                  isShapeInAnimatedModifiers: function (e) {
                    for (var t = this.shapeModifiers.length; 0 < t; )
                      if (this.shapeModifiers[0].isAnimatedWithShape(e))
                        return !0;
                    return !1;
                  },
                  renderModifiers: function () {
                    if (this.shapeModifiers.length) {
                      var e,
                        t = this.shapes.length;
                      for (e = 0; e < t; e += 1) this.shapes[e].sh.reset();
                      for (
                        e = (t = this.shapeModifiers.length) - 1;
                        e >= 0 &&
                        !this.shapeModifiers[e].processShapes(this._isFirstFrame);
                        e -= 1
                      );
                    }
                  },
                  searchProcessedElement: function (e) {
                    for (
                      var t = this.processedElements, n = 0, r = t.length;
                      n < r;
  
                    ) {
                      if (t[n].elem === e) return t[n].pos;
                      n += 1;
                    }
                    return 0;
                  },
                  addProcessedElement: function (e, t) {
                    for (var n = this.processedElements, r = n.length; r; )
                      if (n[(r -= 1)].elem === e) return void (n[r].pos = t);
                    n.push(new ProcessedElement(e, t));
                  },
                  prepareFrame: function (e) {
                    this.prepareRenderableFrame(e),
                      this.prepareProperties(e, this.isInRange);
                  }
                });
              var lineCapEnum = { 1: "butt", 2: "round", 3: "square" },
                lineJoinEnum = { 1: "miter", 2: "round", 3: "bevel" };
              function SVGShapeData(e, t, n) {
                (this.caches = []),
                  (this.styles = []),
                  (this.transformers = e),
                  (this.lStr = ""),
                  (this.sh = n),
                  (this.lvl = t),
                  (this._isAnimated = !!n.k);
                for (var r = 0, i = e.length; r < i; ) {
                  if (e[r].mProps.dynamicProperties.length) {
                    this._isAnimated = !0;
                    break;
                  }
                  r += 1;
                }
              }
              function SVGStyleData(e, t) {
                (this.data = e),
                  (this.type = e.ty),
                  (this.d = ""),
                  (this.lvl = t),
                  (this._mdf = !1),
                  (this.closed = !0 === e.hd),
                  (this.pElem = createNS("path")),
                  (this.msElem = null);
              }
              function DashProperty(e, t, n, r) {
                var i;
                (this.elem = e),
                  (this.frameId = -1),
                  (this.dataProps = createSizedArray(t.length)),
                  (this.renderer = n),
                  (this.k = !1),
                  (this.dashStr = ""),
                  (this.dashArray = createTypedArray(
                    "float32",
                    t.length ? t.length - 1 : 0
                  )),
                  (this.dashoffset = createTypedArray("float32", 1)),
                  this.initDynamicPropertyContainer(r);
                var a,
                  s = t.length || 0;
                for (i = 0; i < s; i += 1)
                  (a = PropertyFactory.getProp(e, t[i].v, 0, 0, this)),
                    (this.k = a.k || this.k),
                    (this.dataProps[i] = { n: t[i].n, p: a });
                this.k || this.getValue(!0), (this._isAnimated = this.k);
              }
              function SVGStrokeStyleData(e, t, n) {
                this.initDynamicPropertyContainer(e),
                  (this.getValue = this.iterateDynamicProperties),
                  (this.o = PropertyFactory.getProp(e, t.o, 0, 0.01, this)),
                  (this.w = PropertyFactory.getProp(e, t.w, 0, null, this)),
                  (this.d = new DashProperty(e, t.d || {}, "svg", this)),
                  (this.c = PropertyFactory.getProp(e, t.c, 1, 255, this)),
                  (this.style = n),
                  (this._isAnimated = !!this._isAnimated);
              }
              function SVGFillStyleData(e, t, n) {
                this.initDynamicPropertyContainer(e),
                  (this.getValue = this.iterateDynamicProperties),
                  (this.o = PropertyFactory.getProp(e, t.o, 0, 0.01, this)),
                  (this.c = PropertyFactory.getProp(e, t.c, 1, 255, this)),
                  (this.style = n);
              }
              function SVGNoStyleData(e, t, n) {
                this.initDynamicPropertyContainer(e),
                  (this.getValue = this.iterateDynamicProperties),
                  (this.style = n);
              }
              function GradientProperty(e, t, n) {
                (this.data = t), (this.c = createTypedArray("uint8c", 4 * t.p));
                var r = t.k.k[0].s
                  ? t.k.k[0].s.length - 4 * t.p
                  : t.k.k.length - 4 * t.p;
                (this.o = createTypedArray("float32", r)),
                  (this._cmdf = !1),
                  (this._omdf = !1),
                  (this._collapsable = this.checkCollapsable()),
                  (this._hasOpacity = r),
                  this.initDynamicPropertyContainer(n),
                  (this.prop = PropertyFactory.getProp(e, t.k, 1, null, this)),
                  (this.k = this.prop.k),
                  this.getValue(!0);
              }
              function SVGGradientFillStyleData(e, t, n) {
                this.initDynamicPropertyContainer(e),
                  (this.getValue = this.iterateDynamicProperties),
                  this.initGradientData(e, t, n);
              }
              function SVGGradientStrokeStyleData(e, t, n) {
                this.initDynamicPropertyContainer(e),
                  (this.getValue = this.iterateDynamicProperties),
                  (this.w = PropertyFactory.getProp(e, t.w, 0, null, this)),
                  (this.d = new DashProperty(e, t.d || {}, "svg", this)),
                  this.initGradientData(e, t, n),
                  (this._isAnimated = !!this._isAnimated);
              }
              function ShapeGroupData() {
                (this.it = []),
                  (this.prevViewData = []),
                  (this.gr = createNS("g"));
              }
              function SVGTransformData(e, t, n) {
                (this.transform = { mProps: e, op: t, container: n }),
                  (this.elements = []),
                  (this._isAnimated =
                    this.transform.mProps.dynamicProperties.length ||
                    this.transform.op.effectsSequence.length);
              }
              (SVGShapeData.prototype.setAsAnimated = function () {
                this._isAnimated = !0;
              }),
                (SVGStyleData.prototype.reset = function () {
                  (this.d = ""), (this._mdf = !1);
                }),
                (DashProperty.prototype.getValue = function (e) {
                  if (
                    (this.elem.globalData.frameId !== this.frameId || e) &&
                    ((this.frameId = this.elem.globalData.frameId),
                    this.iterateDynamicProperties(),
                    (this._mdf = this._mdf || e),
                    this._mdf)
                  ) {
                    var t = 0,
                      n = this.dataProps.length;
                    for (
                      "svg" === this.renderer && (this.dashStr = ""), t = 0;
                      t < n;
                      t += 1
                    )
                      "o" !== this.dataProps[t].n
                        ? "svg" === this.renderer
                          ? (this.dashStr += " " + this.dataProps[t].p.v)
                          : (this.dashArray[t] = this.dataProps[t].p.v)
                        : (this.dashoffset[0] = this.dataProps[t].p.v);
                  }
                }),
                extendPrototype([DynamicPropertyContainer], DashProperty),
                extendPrototype([DynamicPropertyContainer], SVGStrokeStyleData),
                extendPrototype([DynamicPropertyContainer], SVGFillStyleData),
                extendPrototype([DynamicPropertyContainer], SVGNoStyleData),
                (GradientProperty.prototype.comparePoints = function (e, t) {
                  for (var n = 0, r = this.o.length / 2; n < r; ) {
                    if (Math.abs(e[4 * n] - e[4 * t + 2 * n]) > 0.01) return !1;
                    n += 1;
                  }
                  return !0;
                }),
                (GradientProperty.prototype.checkCollapsable = function () {
                  if (this.o.length / 2 != this.c.length / 4) return !1;
                  if (this.data.k.k[0].s)
                    for (var e = 0, t = this.data.k.k.length; e < t; ) {
                      if (!this.comparePoints(this.data.k.k[e].s, this.data.p))
                        return !1;
                      e += 1;
                    }
                  else if (!this.comparePoints(this.data.k.k, this.data.p))
                    return !1;
                  return !0;
                }),
                (GradientProperty.prototype.getValue = function (e) {
                  if (
                    (this.prop.getValue(),
                    (this._mdf = !1),
                    (this._cmdf = !1),
                    (this._omdf = !1),
                    this.prop._mdf || e)
                  ) {
                    var t,
                      n,
                      r,
                      i = 4 * this.data.p;
                    for (t = 0; t < i; t += 1)
                      (n = t % 4 == 0 ? 100 : 255),
                        (r = Math.round(this.prop.v[t] * n)),
                        this.c[t] !== r && ((this.c[t] = r), (this._cmdf = !e));
                    if (this.o.length)
                      for (
                        i = this.prop.v.length, t = 4 * this.data.p;
                        t < i;
                        t += 1
                      )
                        (n = t % 2 == 0 ? 100 : 1),
                          (r =
                            t % 2 == 0
                              ? Math.round(100 * this.prop.v[t])
                              : this.prop.v[t]),
                          this.o[t - 4 * this.data.p] !== r &&
                            ((this.o[t - 4 * this.data.p] = r),
                            (this._omdf = !e));
                    this._mdf = !e;
                  }
                }),
                extendPrototype([DynamicPropertyContainer], GradientProperty),
                (SVGGradientFillStyleData.prototype.initGradientData = function (
                  e,
                  t,
                  n
                ) {
                  (this.o = PropertyFactory.getProp(e, t.o, 0, 0.01, this)),
                    (this.s = PropertyFactory.getProp(e, t.s, 1, null, this)),
                    (this.e = PropertyFactory.getProp(e, t.e, 1, null, this)),
                    (this.h = PropertyFactory.getProp(
                      e,
                      t.h || { k: 0 },
                      0,
                      0.01,
                      this
                    )),
                    (this.a = PropertyFactory.getProp(
                      e,
                      t.a || { k: 0 },
                      0,
                      degToRads,
                      this
                    )),
                    (this.g = new GradientProperty(e, t.g, this)),
                    (this.style = n),
                    (this.stops = []),
                    this.setGradientData(n.pElem, t),
                    this.setGradientOpacity(t, n),
                    (this._isAnimated = !!this._isAnimated);
                }),
                (SVGGradientFillStyleData.prototype.setGradientData = function (
                  e,
                  t
                ) {
                  var n = createElementID(),
                    r = createNS(1 === t.t ? "linearGradient" : "radialGradient");
                  r.setAttribute("id", n),
                    r.setAttribute("spreadMethod", "pad"),
                    r.setAttribute("gradientUnits", "userSpaceOnUse");
                  var i,
                    a,
                    s,
                    o = [];
                  for (s = 4 * t.g.p, a = 0; a < s; a += 4)
                    (i = createNS("stop")), r.appendChild(i), o.push(i);
                  e.setAttribute(
                    "gf" === t.ty ? "fill" : "stroke",
                    "url(" + getLocationHref() + "#" + n + ")"
                  ),
                    (this.gf = r),
                    (this.cst = o);
                }),
                (SVGGradientFillStyleData.prototype.setGradientOpacity =
                  function (e, t) {
                    if (this.g._hasOpacity && !this.g._collapsable) {
                      var n,
                        r,
                        i,
                        a = createNS("mask"),
                        s = createNS("path");
                      a.appendChild(s);
                      var o = createElementID(),
                        l = createElementID();
                      a.setAttribute("id", l);
                      var h = createNS(
                        1 === e.t ? "linearGradient" : "radialGradient"
                      );
                      h.setAttribute("id", o),
                        h.setAttribute("spreadMethod", "pad"),
                        h.setAttribute("gradientUnits", "userSpaceOnUse"),
                        (i = e.g.k.k[0].s ? e.g.k.k[0].s.length : e.g.k.k.length);
                      var u = this.stops;
                      for (r = 4 * e.g.p; r < i; r += 2)
                        (n = createNS("stop")).setAttribute(
                          "stop-color",
                          "rgb(255,255,255)"
                        ),
                          h.appendChild(n),
                          u.push(n);
                      s.setAttribute(
                        "gf" === e.ty ? "fill" : "stroke",
                        "url(" + getLocationHref() + "#" + o + ")"
                      ),
                        "gs" === e.ty &&
                          (s.setAttribute(
                            "stroke-linecap",
                            lineCapEnum[e.lc || 2]
                          ),
                          s.setAttribute(
                            "stroke-linejoin",
                            lineJoinEnum[e.lj || 2]
                          ),
                          1 === e.lj &&
                            s.setAttribute("stroke-miterlimit", e.ml)),
                        (this.of = h),
                        (this.ms = a),
                        (this.ost = u),
                        (this.maskId = l),
                        (t.msElem = s);
                    }
                  }),
                extendPrototype(
                  [DynamicPropertyContainer],
                  SVGGradientFillStyleData
                ),
                extendPrototype(
                  [SVGGradientFillStyleData, DynamicPropertyContainer],
                  SVGGradientStrokeStyleData
                );
              var buildShapeString = function (e, t, n, r) {
                  if (0 === t) return "";
                  var i,
                    a = e.o,
                    s = e.i,
                    o = e.v,
                    l = " M" + r.applyToPointStringified(o[0][0], o[0][1]);
                  for (i = 1; i < t; i += 1)
                    l +=
                      " C" +
                      r.applyToPointStringified(a[i - 1][0], a[i - 1][1]) +
                      " " +
                      r.applyToPointStringified(s[i][0], s[i][1]) +
                      " " +
                      r.applyToPointStringified(o[i][0], o[i][1]);
                  return (
                    n &&
                      t &&
                      ((l +=
                        " C" +
                        r.applyToPointStringified(a[i - 1][0], a[i - 1][1]) +
                        " " +
                        r.applyToPointStringified(s[0][0], s[0][1]) +
                        " " +
                        r.applyToPointStringified(o[0][0], o[0][1])),
                      (l += "z")),
                    l
                  );
                },
                SVGElementsRenderer = (function () {
                  var e = new Matrix(),
                    t = new Matrix();
                  function n(e, t, n) {
                    (n || t.transform.op._mdf) &&
                      t.transform.container.setAttribute(
                        "opacity",
                        t.transform.op.v
                      ),
                      (n || t.transform.mProps._mdf) &&
                        t.transform.container.setAttribute(
                          "transform",
                          t.transform.mProps.v.to2dCSS()
                        );
                  }
                  function r() {}
                  function i(n, r, i) {
                    var a,
                      s,
                      o,
                      l,
                      h,
                      u,
                      c,
                      d,
                      f,
                      p,
                      m = r.styles.length,
                      g = r.lvl;
                    for (u = 0; u < m; u += 1) {
                      if (((l = r.sh._mdf || i), r.styles[u].lvl < g)) {
                        for (
                          d = t.reset(),
                            f = g - r.styles[u].lvl,
                            p = r.transformers.length - 1;
                          !l && f > 0;
  
                        )
                          (l = r.transformers[p].mProps._mdf || l),
                            (f -= 1),
                            (p -= 1);
                        if (l)
                          for (
                            f = g - r.styles[u].lvl,
                              p = r.transformers.length - 1;
                            f > 0;
  
                          )
                            d.multiply(r.transformers[p].mProps.v),
                              (f -= 1),
                              (p -= 1);
                      } else d = e;
                      if (((s = (c = r.sh.paths)._length), l)) {
                        for (o = "", a = 0; a < s; a += 1)
                          (h = c.shapes[a]) &&
                            h._length &&
                            (o += buildShapeString(h, h._length, h.c, d));
                        r.caches[u] = o;
                      } else o = r.caches[u];
                      (r.styles[u].d += !0 === n.hd ? "" : o),
                        (r.styles[u]._mdf = l || r.styles[u]._mdf);
                    }
                  }
                  function a(e, t, n) {
                    var r = t.style;
                    (t.c._mdf || n) &&
                      r.pElem.setAttribute(
                        "fill",
                        "rgb(" +
                          bmFloor(t.c.v[0]) +
                          "," +
                          bmFloor(t.c.v[1]) +
                          "," +
                          bmFloor(t.c.v[2]) +
                          ")"
                      ),
                      (t.o._mdf || n) &&
                        r.pElem.setAttribute("fill-opacity", t.o.v);
                  }
                  function s(e, t, n) {
                    o(e, t, n), l(0, t, n);
                  }
                  function o(e, t, n) {
                    var r,
                      i,
                      a,
                      s,
                      o,
                      l = t.gf,
                      h = t.g._hasOpacity,
                      u = t.s.v,
                      c = t.e.v;
                    if (t.o._mdf || n) {
                      var d = "gf" === e.ty ? "fill-opacity" : "stroke-opacity";
                      t.style.pElem.setAttribute(d, t.o.v);
                    }
                    if (t.s._mdf || n) {
                      var f = 1 === e.t ? "x1" : "cx",
                        p = "x1" === f ? "y1" : "cy";
                      l.setAttribute(f, u[0]),
                        l.setAttribute(p, u[1]),
                        h &&
                          !t.g._collapsable &&
                          (t.of.setAttribute(f, u[0]),
                          t.of.setAttribute(p, u[1]));
                    }
                    if (t.g._cmdf || n) {
                      r = t.cst;
                      var m = t.g.c;
                      for (a = r.length, i = 0; i < a; i += 1)
                        (s = r[i]).setAttribute("offset", m[4 * i] + "%"),
                          s.setAttribute(
                            "stop-color",
                            "rgb(" +
                              m[4 * i + 1] +
                              "," +
                              m[4 * i + 2] +
                              "," +
                              m[4 * i + 3] +
                              ")"
                          );
                    }
                    if (h && (t.g._omdf || n)) {
                      var g = t.g.o;
                      for (
                        a = (r = t.g._collapsable ? t.cst : t.ost).length, i = 0;
                        i < a;
                        i += 1
                      )
                        (s = r[i]),
                          t.g._collapsable ||
                            s.setAttribute("offset", g[2 * i] + "%"),
                          s.setAttribute("stop-opacity", g[2 * i + 1]);
                    }
                    if (1 === e.t)
                      (t.e._mdf || n) &&
                        (l.setAttribute("x2", c[0]),
                        l.setAttribute("y2", c[1]),
                        h &&
                          !t.g._collapsable &&
                          (t.of.setAttribute("x2", c[0]),
                          t.of.setAttribute("y2", c[1])));
                    else if (
                      ((t.s._mdf || t.e._mdf || n) &&
                        ((o = Math.sqrt(
                          Math.pow(u[0] - c[0], 2) + Math.pow(u[1] - c[1], 2)
                        )),
                        l.setAttribute("r", o),
                        h && !t.g._collapsable && t.of.setAttribute("r", o)),
                      t.e._mdf || t.h._mdf || t.a._mdf || n)
                    ) {
                      o ||
                        (o = Math.sqrt(
                          Math.pow(u[0] - c[0], 2) + Math.pow(u[1] - c[1], 2)
                        ));
                      var v = Math.atan2(c[1] - u[1], c[0] - u[0]),
                        y = t.h.v;
                      y >= 1 ? (y = 0.99) : y <= -1 && (y = -0.99);
                      var _ = o * y,
                        b = Math.cos(v + t.a.v) * _ + u[0],
                        x = Math.sin(v + t.a.v) * _ + u[1];
                      l.setAttribute("fx", b),
                        l.setAttribute("fy", x),
                        h &&
                          !t.g._collapsable &&
                          (t.of.setAttribute("fx", b),
                          t.of.setAttribute("fy", x));
                    }
                  }
                  function l(e, t, n) {
                    var r = t.style,
                      i = t.d;
                    i &&
                      (i._mdf || n) &&
                      i.dashStr &&
                      (r.pElem.setAttribute("stroke-dasharray", i.dashStr),
                      r.pElem.setAttribute("stroke-dashoffset", i.dashoffset[0])),
                      t.c &&
                        (t.c._mdf || n) &&
                        r.pElem.setAttribute(
                          "stroke",
                          "rgb(" +
                            bmFloor(t.c.v[0]) +
                            "," +
                            bmFloor(t.c.v[1]) +
                            "," +
                            bmFloor(t.c.v[2]) +
                            ")"
                        ),
                      (t.o._mdf || n) &&
                        r.pElem.setAttribute("stroke-opacity", t.o.v),
                      (t.w._mdf || n) &&
                        (r.pElem.setAttribute("stroke-width", t.w.v),
                        r.msElem && r.msElem.setAttribute("stroke-width", t.w.v));
                  }
                  return {
                    createRenderFunction: function (e) {
                      switch (e.ty) {
                        case "fl":
                          return a;
                        case "gf":
                          return o;
                        case "gs":
                          return s;
                        case "st":
                          return l;
                        case "sh":
                        case "el":
                        case "rc":
                        case "sr":
                          return i;
                        case "tr":
                          return n;
                        case "no":
                          return r;
                        default:
                          return null;
                      }
                    }
                  };
                })();
              function SVGShapeElement(e, t, n) {
                (this.shapes = []),
                  (this.shapesData = e.shapes),
                  (this.stylesList = []),
                  (this.shapeModifiers = []),
                  (this.itemsData = []),
                  (this.processedElements = []),
                  (this.animatedContents = []),
                  this.initElement(e, t, n),
                  (this.prevViewData = []);
              }
              function LetterProps(e, t, n, r, i, a) {
                (this.o = e),
                  (this.sw = t),
                  (this.sc = n),
                  (this.fc = r),
                  (this.m = i),
                  (this.p = a),
                  (this._mdf = {
                    o: !0,
                    sw: !!t,
                    sc: !!n,
                    fc: !!r,
                    m: !0,
                    p: !0
                  });
              }
              function TextProperty(e, t) {
                (this._frameId = initialDefaultFrame),
                  (this.pv = ""),
                  (this.v = ""),
                  (this.kf = !1),
                  (this._isFirstFrame = !0),
                  (this._mdf = !1),
                  t.d && t.d.sid && (t.d = e.globalData.slotManager.getProp(t.d)),
                  (this.data = t),
                  (this.elem = e),
                  (this.comp = this.elem.comp),
                  (this.keysIndex = 0),
                  (this.canResize = !1),
                  (this.minimumFontSize = 1),
                  (this.effectsSequence = []),
                  (this.currentData = {
                    ascent: 0,
                    boxWidth: this.defaultBoxWidth,
                    f: "",
                    fStyle: "",
                    fWeight: "",
                    fc: "",
                    j: "",
                    justifyOffset: "",
                    l: [],
                    lh: 0,
                    lineWidths: [],
                    ls: "",
                    of: "",
                    s: "",
                    sc: "",
                    sw: 0,
                    t: 0,
                    tr: 0,
                    sz: 0,
                    ps: null,
                    fillColorAnim: !1,
                    strokeColorAnim: !1,
                    strokeWidthAnim: !1,
                    yOffset: 0,
                    finalSize: 0,
                    finalText: [],
                    finalLineHeight: 0,
                    __complete: !1
                  }),
                  this.copyData(this.currentData, this.data.d.k[0].s),
                  this.searchProperty() ||
                    this.completeTextData(this.currentData);
              }
              extendPrototype(
                [
                  BaseElement,
                  TransformElement,
                  SVGBaseElement,
                  IShapeElement,
                  HierarchyElement,
                  FrameElement,
                  RenderableDOMElement
                ],
                SVGShapeElement
              ),
                (SVGShapeElement.prototype.initSecondaryElement = function () {}),
                (SVGShapeElement.prototype.identityMatrix = new Matrix()),
                (SVGShapeElement.prototype.buildExpressionInterface =
                  function () {}),
                (SVGShapeElement.prototype.createContent = function () {
                  this.searchShapes(
                    this.shapesData,
                    this.itemsData,
                    this.prevViewData,
                    this.layerElement,
                    0,
                    [],
                    !0
                  ),
                    this.filterUniqueShapes();
                }),
                (SVGShapeElement.prototype.filterUniqueShapes = function () {
                  var e,
                    t,
                    n,
                    r,
                    i = this.shapes.length,
                    a = this.stylesList.length,
                    s = [],
                    o = !1;
                  for (n = 0; n < a; n += 1) {
                    for (
                      r = this.stylesList[n], o = !1, s.length = 0, e = 0;
                      e < i;
                      e += 1
                    )
                      -1 !== (t = this.shapes[e]).styles.indexOf(r) &&
                        (s.push(t), (o = t._isAnimated || o));
                    s.length > 1 && o && this.setShapesAsAnimated(s);
                  }
                }),
                (SVGShapeElement.prototype.setShapesAsAnimated = function (e) {
                  var t,
                    n = e.length;
                  for (t = 0; t < n; t += 1) e[t].setAsAnimated();
                }),
                (SVGShapeElement.prototype.createStyleElement = function (e, t) {
                  var n,
                    r = new SVGStyleData(e, t),
                    i = r.pElem;
                  return (
                    "st" === e.ty
                      ? (n = new SVGStrokeStyleData(this, e, r))
                      : "fl" === e.ty
                      ? (n = new SVGFillStyleData(this, e, r))
                      : "gf" === e.ty || "gs" === e.ty
                      ? ((n = new (
                          "gf" === e.ty
                            ? SVGGradientFillStyleData
                            : SVGGradientStrokeStyleData
                        )(this, e, r)),
                        this.globalData.defs.appendChild(n.gf),
                        n.maskId &&
                          (this.globalData.defs.appendChild(n.ms),
                          this.globalData.defs.appendChild(n.of),
                          i.setAttribute(
                            "mask",
                            "url(" + getLocationHref() + "#" + n.maskId + ")"
                          )))
                      : "no" === e.ty && (n = new SVGNoStyleData(this, e, r)),
                    ("st" !== e.ty && "gs" !== e.ty) ||
                      (i.setAttribute("stroke-linecap", lineCapEnum[e.lc || 2]),
                      i.setAttribute("stroke-linejoin", lineJoinEnum[e.lj || 2]),
                      i.setAttribute("fill-opacity", "0"),
                      1 === e.lj && i.setAttribute("stroke-miterlimit", e.ml)),
                    2 === e.r && i.setAttribute("fill-rule", "evenodd"),
                    e.ln && i.setAttribute("id", e.ln),
                    e.cl && i.setAttribute("class", e.cl),
                    e.bm && (i.style["mix-blend-mode"] = getBlendMode(e.bm)),
                    this.stylesList.push(r),
                    this.addToAnimatedContents(e, n),
                    n
                  );
                }),
                (SVGShapeElement.prototype.createGroupElement = function (e) {
                  var t = new ShapeGroupData();
                  return (
                    e.ln && t.gr.setAttribute("id", e.ln),
                    e.cl && t.gr.setAttribute("class", e.cl),
                    e.bm && (t.gr.style["mix-blend-mode"] = getBlendMode(e.bm)),
                    t
                  );
                }),
                (SVGShapeElement.prototype.createTransformElement = function (
                  e,
                  t
                ) {
                  var n = TransformPropertyFactory.getTransformProperty(
                      this,
                      e,
                      this
                    ),
                    r = new SVGTransformData(n, n.o, t);
                  return this.addToAnimatedContents(e, r), r;
                }),
                (SVGShapeElement.prototype.createShapeElement = function (
                  e,
                  t,
                  n
                ) {
                  var r = 4;
                  "rc" === e.ty
                    ? (r = 5)
                    : "el" === e.ty
                    ? (r = 6)
                    : "sr" === e.ty && (r = 7);
                  var i = new SVGShapeData(
                    t,
                    n,
                    ShapePropertyFactory.getShapeProp(this, e, r, this)
                  );
                  return (
                    this.shapes.push(i),
                    this.addShapeToModifiers(i),
                    this.addToAnimatedContents(e, i),
                    i
                  );
                }),
                (SVGShapeElement.prototype.addToAnimatedContents = function (
                  e,
                  t
                ) {
                  for (var n = 0, r = this.animatedContents.length; n < r; ) {
                    if (this.animatedContents[n].element === t) return;
                    n += 1;
                  }
                  this.animatedContents.push({
                    fn: SVGElementsRenderer.createRenderFunction(e),
                    element: t,
                    data: e
                  });
                }),
                (SVGShapeElement.prototype.setElementStyles = function (e) {
                  var t,
                    n = e.styles,
                    r = this.stylesList.length;
                  for (t = 0; t < r; t += 1)
                    this.stylesList[t].closed || n.push(this.stylesList[t]);
                }),
                (SVGShapeElement.prototype.reloadShapes = function () {
                  var e;
                  this._isFirstFrame = !0;
                  var t = this.itemsData.length;
                  for (e = 0; e < t; e += 1)
                    this.prevViewData[e] = this.itemsData[e];
                  for (
                    this.searchShapes(
                      this.shapesData,
                      this.itemsData,
                      this.prevViewData,
                      this.layerElement,
                      0,
                      [],
                      !0
                    ),
                      this.filterUniqueShapes(),
                      t = this.dynamicProperties.length,
                      e = 0;
                    e < t;
                    e += 1
                  )
                    this.dynamicProperties[e].getValue();
                  this.renderModifiers();
                }),
                (SVGShapeElement.prototype.searchShapes = function (
                  e,
                  t,
                  n,
                  r,
                  i,
                  a,
                  s
                ) {
                  var o,
                    l,
                    h,
                    u,
                    c,
                    d,
                    f = [].concat(a),
                    p = e.length - 1,
                    m = [],
                    g = [];
                  for (o = p; o >= 0; o -= 1) {
                    if (
                      ((d = this.searchProcessedElement(e[o]))
                        ? (t[o] = n[d - 1])
                        : (e[o]._render = s),
                      "fl" === e[o].ty ||
                        "st" === e[o].ty ||
                        "gf" === e[o].ty ||
                        "gs" === e[o].ty ||
                        "no" === e[o].ty)
                    )
                      d
                        ? (t[o].style.closed = !1)
                        : (t[o] = this.createStyleElement(e[o], i)),
                        e[o]._render &&
                          t[o].style.pElem.parentNode !== r &&
                          r.appendChild(t[o].style.pElem),
                        m.push(t[o].style);
                    else if ("gr" === e[o].ty) {
                      if (d)
                        for (h = t[o].it.length, l = 0; l < h; l += 1)
                          t[o].prevViewData[l] = t[o].it[l];
                      else t[o] = this.createGroupElement(e[o]);
                      this.searchShapes(
                        e[o].it,
                        t[o].it,
                        t[o].prevViewData,
                        t[o].gr,
                        i + 1,
                        f,
                        s
                      ),
                        e[o]._render &&
                          t[o].gr.parentNode !== r &&
                          r.appendChild(t[o].gr);
                    } else
                      "tr" === e[o].ty
                        ? (d || (t[o] = this.createTransformElement(e[o], r)),
                          (u = t[o].transform),
                          f.push(u))
                        : "sh" === e[o].ty ||
                          "rc" === e[o].ty ||
                          "el" === e[o].ty ||
                          "sr" === e[o].ty
                        ? (d || (t[o] = this.createShapeElement(e[o], f, i)),
                          this.setElementStyles(t[o]))
                        : "tm" === e[o].ty ||
                          "rd" === e[o].ty ||
                          "ms" === e[o].ty ||
                          "pb" === e[o].ty ||
                          "zz" === e[o].ty ||
                          "op" === e[o].ty
                        ? (d
                            ? ((c = t[o]).closed = !1)
                            : ((c = ShapeModifiers.getModifier(e[o].ty)).init(
                                this,
                                e[o]
                              ),
                              (t[o] = c),
                              this.shapeModifiers.push(c)),
                          g.push(c))
                        : "rp" === e[o].ty &&
                          (d
                            ? ((c = t[o]).closed = !0)
                            : ((c = ShapeModifiers.getModifier(e[o].ty)),
                              (t[o] = c),
                              c.init(this, e, o, t),
                              this.shapeModifiers.push(c),
                              (s = !1)),
                          g.push(c));
                    this.addProcessedElement(e[o], o + 1);
                  }
                  for (p = m.length, o = 0; o < p; o += 1) m[o].closed = !0;
                  for (p = g.length, o = 0; o < p; o += 1) g[o].closed = !0;
                }),
                (SVGShapeElement.prototype.renderInnerContent = function () {
                  var e;
                  this.renderModifiers();
                  var t = this.stylesList.length;
                  for (e = 0; e < t; e += 1) this.stylesList[e].reset();
                  for (this.renderShape(), e = 0; e < t; e += 1)
                    (this.stylesList[e]._mdf || this._isFirstFrame) &&
                      (this.stylesList[e].msElem &&
                        (this.stylesList[e].msElem.setAttribute(
                          "d",
                          this.stylesList[e].d
                        ),
                        (this.stylesList[e].d = "M0 0" + this.stylesList[e].d)),
                      this.stylesList[e].pElem.setAttribute(
                        "d",
                        this.stylesList[e].d || "M0 0"
                      ));
                }),
                (SVGShapeElement.prototype.renderShape = function () {
                  var e,
                    t,
                    n = this.animatedContents.length;
                  for (e = 0; e < n; e += 1)
                    (t = this.animatedContents[e]),
                      (this._isFirstFrame || t.element._isAnimated) &&
                        !0 !== t.data &&
                        t.fn(t.data, t.element, this._isFirstFrame);
                }),
                (SVGShapeElement.prototype.destroy = function () {
                  this.destroyBaseElement(),
                    (this.shapesData = null),
                    (this.itemsData = null);
                }),
                (LetterProps.prototype.update = function (e, t, n, r, i, a) {
                  (this._mdf.o = !1),
                    (this._mdf.sw = !1),
                    (this._mdf.sc = !1),
                    (this._mdf.fc = !1),
                    (this._mdf.m = !1),
                    (this._mdf.p = !1);
                  var s = !1;
                  return (
                    this.o !== e && ((this.o = e), (this._mdf.o = !0), (s = !0)),
                    this.sw !== t &&
                      ((this.sw = t), (this._mdf.sw = !0), (s = !0)),
                    this.sc !== n &&
                      ((this.sc = n), (this._mdf.sc = !0), (s = !0)),
                    this.fc !== r &&
                      ((this.fc = r), (this._mdf.fc = !0), (s = !0)),
                    this.m !== i && ((this.m = i), (this._mdf.m = !0), (s = !0)),
                    !a.length ||
                      (this.p[0] === a[0] &&
                        this.p[1] === a[1] &&
                        this.p[4] === a[4] &&
                        this.p[5] === a[5] &&
                        this.p[12] === a[12] &&
                        this.p[13] === a[13]) ||
                      ((this.p = a), (this._mdf.p = !0), (s = !0)),
                    s
                  );
                }),
                (TextProperty.prototype.defaultBoxWidth = [0, 0]),
                (TextProperty.prototype.copyData = function (e, t) {
                  for (var n in t)
                    Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
                  return e;
                }),
                (TextProperty.prototype.setCurrentData = function (e) {
                  e.__complete || this.completeTextData(e),
                    (this.currentData = e),
                    (this.currentData.boxWidth =
                      this.currentData.boxWidth || this.defaultBoxWidth),
                    (this._mdf = !0);
                }),
                (TextProperty.prototype.searchProperty = function () {
                  return this.searchKeyframes();
                }),
                (TextProperty.prototype.searchKeyframes = function () {
                  return (
                    (this.kf = this.data.d.k.length > 1),
                    this.kf && this.addEffect(this.getKeyframeValue.bind(this)),
                    this.kf
                  );
                }),
                (TextProperty.prototype.addEffect = function (e) {
                  this.effectsSequence.push(e),
                    this.elem.addDynamicProperty(this);
                }),
                (TextProperty.prototype.getValue = function (e) {
                  if (
                    (this.elem.globalData.frameId !== this.frameId &&
                      this.effectsSequence.length) ||
                    e
                  ) {
                    this.currentData.t = this.data.d.k[this.keysIndex].s.t;
                    var t = this.currentData,
                      n = this.keysIndex;
                    if (this.lock) this.setCurrentData(this.currentData);
                    else {
                      var r;
                      (this.lock = !0), (this._mdf = !1);
                      var i = this.effectsSequence.length,
                        a = e || this.data.d.k[this.keysIndex].s;
                      for (r = 0; r < i; r += 1)
                        a =
                          n !== this.keysIndex
                            ? this.effectsSequence[r](a, a.t)
                            : this.effectsSequence[r](this.currentData, a.t);
                      t !== a && this.setCurrentData(a),
                        (this.v = this.currentData),
                        (this.pv = this.v),
                        (this.lock = !1),
                        (this.frameId = this.elem.globalData.frameId);
                    }
                  }
                }),
                (TextProperty.prototype.getKeyframeValue = function () {
                  for (
                    var e = this.data.d.k,
                      t = this.elem.comp.renderedFrame,
                      n = 0,
                      r = e.length;
                    n <= r - 1 && !(n === r - 1 || e[n + 1].t > t);
  
                  )
                    n += 1;
                  return (
                    this.keysIndex !== n && (this.keysIndex = n),
                    this.data.d.k[this.keysIndex].s
                  );
                }),
                (TextProperty.prototype.buildFinalText = function (e) {
                  for (
                    var t, n, r = [], i = 0, a = e.length, s = !1, o = !1, l = "";
                    i < a;
  
                  )
                    (s = o),
                      (o = !1),
                      (t = e.charCodeAt(i)),
                      (l = e.charAt(i)),
                      FontManager.isCombinedCharacter(t)
                        ? (s = !0)
                        : t >= 55296 && t <= 56319
                        ? FontManager.isRegionalFlag(e, i)
                          ? (l = e.substr(i, 14))
                          : (n = e.charCodeAt(i + 1)) >= 56320 &&
                            n <= 57343 &&
                            (FontManager.isModifier(t, n)
                              ? ((l = e.substr(i, 2)), (s = !0))
                              : (l = FontManager.isFlagEmoji(e.substr(i, 4))
                                  ? e.substr(i, 4)
                                  : e.substr(i, 2)))
                        : t > 56319
                        ? ((n = e.charCodeAt(i + 1)),
                          FontManager.isVariationSelector(t) && (s = !0))
                        : FontManager.isZeroWidthJoiner(t) &&
                          ((s = !0), (o = !0)),
                      s ? ((r[r.length - 1] += l), (s = !1)) : r.push(l),
                      (i += l.length);
                  return r;
                }),
                (TextProperty.prototype.completeTextData = function (e) {
                  e.__complete = !0;
                  var t,
                    n,
                    r,
                    i,
                    a,
                    s,
                    o,
                    l = this.elem.globalData.fontManager,
                    h = this.data,
                    u = [],
                    c = 0,
                    d = h.m.g,
                    f = 0,
                    p = 0,
                    m = 0,
                    g = [],
                    v = 0,
                    y = 0,
                    _ = l.getFontByName(e.f),
                    b = 0,
                    x = getFontProperties(_);
                  (e.fWeight = x.weight),
                    (e.fStyle = x.style),
                    (e.finalSize = e.s),
                    (e.finalText = this.buildFinalText(e.t)),
                    (n = e.finalText.length),
                    (e.finalLineHeight = e.lh);
                  var S,
                    E = (e.tr / 1e3) * e.finalSize;
                  if (e.sz)
                    for (var w, T, M = !0, A = e.sz[0], C = e.sz[1]; M; ) {
                      (w = 0),
                        (v = 0),
                        (n = (T = this.buildFinalText(e.t)).length),
                        (E = (e.tr / 1e3) * e.finalSize);
                      var P = -1;
                      for (t = 0; t < n; t += 1)
                        (S = T[t].charCodeAt(0)),
                          (r = !1),
                          " " === T[t]
                            ? (P = t)
                            : (13 !== S && 3 !== S) ||
                              ((v = 0),
                              (r = !0),
                              (w += e.finalLineHeight || 1.2 * e.finalSize)),
                          l.chars
                            ? ((o = l.getCharData(T[t], _.fStyle, _.fFamily)),
                              (b = r ? 0 : (o.w * e.finalSize) / 100))
                            : (b = l.measureText(T[t], e.f, e.finalSize)),
                          v + b > A && " " !== T[t]
                            ? (-1 === P ? (n += 1) : (t = P),
                              (w += e.finalLineHeight || 1.2 * e.finalSize),
                              T.splice(t, P === t ? 1 : 0, "\r"),
                              (P = -1),
                              (v = 0))
                            : ((v += b), (v += E));
                      (w += (_.ascent * e.finalSize) / 100),
                        this.canResize &&
                        e.finalSize > this.minimumFontSize &&
                        C < w
                          ? ((e.finalSize -= 1),
                            (e.finalLineHeight = (e.finalSize * e.lh) / e.s))
                          : ((e.finalText = T),
                            (n = e.finalText.length),
                            (M = !1));
                    }
                  (v = -E), (b = 0);
                  var k,
                    R = 0;
                  for (t = 0; t < n; t += 1)
                    if (
                      ((r = !1),
                      13 === (S = (k = e.finalText[t]).charCodeAt(0)) || 3 === S
                        ? ((R = 0),
                          g.push(v),
                          (y = v > y ? v : y),
                          (v = -2 * E),
                          (i = ""),
                          (r = !0),
                          (m += 1))
                        : (i = k),
                      l.chars
                        ? ((o = l.getCharData(
                            k,
                            _.fStyle,
                            l.getFontByName(e.f).fFamily
                          )),
                          (b = r ? 0 : (o.w * e.finalSize) / 100))
                        : (b = l.measureText(i, e.f, e.finalSize)),
                      " " === k ? (R += b + E) : ((v += b + E + R), (R = 0)),
                      u.push({
                        l: b,
                        an: b,
                        add: f,
                        n: r,
                        anIndexes: [],
                        val: i,
                        line: m,
                        animatorJustifyOffset: 0
                      }),
                      2 == d)
                    ) {
                      if (((f += b), "" === i || " " === i || t === n - 1)) {
                        for (("" !== i && " " !== i) || (f -= b); p <= t; )
                          (u[p].an = f),
                            (u[p].ind = c),
                            (u[p].extra = b),
                            (p += 1);
                        (c += 1), (f = 0);
                      }
                    } else if (3 == d) {
                      if (((f += b), "" === i || t === n - 1)) {
                        for ("" === i && (f -= b); p <= t; )
                          (u[p].an = f),
                            (u[p].ind = c),
                            (u[p].extra = b),
                            (p += 1);
                        (f = 0), (c += 1);
                      }
                    } else (u[c].ind = c), (u[c].extra = 0), (c += 1);
                  if (((e.l = u), (y = v > y ? v : y), g.push(v), e.sz))
                    (e.boxWidth = e.sz[0]), (e.justifyOffset = 0);
                  else
                    switch (((e.boxWidth = y), e.j)) {
                      case 1:
                        e.justifyOffset = -e.boxWidth;
                        break;
                      case 2:
                        e.justifyOffset = -e.boxWidth / 2;
                        break;
                      default:
                        e.justifyOffset = 0;
                    }
                  e.lineWidths = g;
                  var D,
                    I,
                    L,
                    F,
                    O = h.a;
                  s = O.length;
                  var N = [];
                  for (a = 0; a < s; a += 1) {
                    for (
                      (D = O[a]).a.sc && (e.strokeColorAnim = !0),
                        D.a.sw && (e.strokeWidthAnim = !0),
                        (D.a.fc || D.a.fh || D.a.fs || D.a.fb) &&
                          (e.fillColorAnim = !0),
                        F = 0,
                        L = D.s.b,
                        t = 0;
                      t < n;
                      t += 1
                    )
                      ((I = u[t]).anIndexes[a] = F),
                        ((1 == L && "" !== I.val) ||
                          (2 == L && "" !== I.val && " " !== I.val) ||
                          (3 == L && (I.n || " " == I.val || t == n - 1)) ||
                          (4 == L && (I.n || t == n - 1))) &&
                          (1 === D.s.rn && N.push(F), (F += 1));
                    h.a[a].s.totalChars = F;
                    var B,
                      U = -1;
                    if (1 === D.s.rn)
                      for (t = 0; t < n; t += 1)
                        U != (I = u[t]).anIndexes[a] &&
                          ((U = I.anIndexes[a]),
                          (B = N.splice(
                            Math.floor(Math.random() * N.length),
                            1
                          )[0])),
                          (I.anIndexes[a] = B);
                  }
                  (e.yOffset = e.finalLineHeight || 1.2 * e.finalSize),
                    (e.ls = e.ls || 0),
                    (e.ascent = (_.ascent * e.finalSize) / 100);
                }),
                (TextProperty.prototype.updateDocumentData = function (e, t) {
                  t = void 0 === t ? this.keysIndex : t;
                  var n = this.copyData({}, this.data.d.k[t].s);
                  (n = this.copyData(n, e)),
                    (this.data.d.k[t].s = n),
                    this.recalculate(t),
                    this.setCurrentData(n),
                    this.elem.addDynamicProperty(this);
                }),
                (TextProperty.prototype.recalculate = function (e) {
                  var t = this.data.d.k[e].s;
                  (t.__complete = !1),
                    (this.keysIndex = 0),
                    (this._isFirstFrame = !0),
                    this.getValue(t);
                }),
                (TextProperty.prototype.canResizeFont = function (e) {
                  (this.canResize = e),
                    this.recalculate(this.keysIndex),
                    this.elem.addDynamicProperty(this);
                }),
                (TextProperty.prototype.setMinimumFontSize = function (e) {
                  (this.minimumFontSize = Math.floor(e) || 1),
                    this.recalculate(this.keysIndex),
                    this.elem.addDynamicProperty(this);
                });
              var TextSelectorProp = (function () {
                var e = Math.max,
                  t = Math.min,
                  n = Math.floor;
                function r(e, t) {
                  (this._currentTextLength = -1),
                    (this.k = !1),
                    (this.data = t),
                    (this.elem = e),
                    (this.comp = e.comp),
                    (this.finalS = 0),
                    (this.finalE = 0),
                    this.initDynamicPropertyContainer(e),
                    (this.s = PropertyFactory.getProp(
                      e,
                      t.s || { k: 0 },
                      0,
                      0,
                      this
                    )),
                    (this.e =
                      "e" in t
                        ? PropertyFactory.getProp(e, t.e, 0, 0, this)
                        : { v: 100 }),
                    (this.o = PropertyFactory.getProp(
                      e,
                      t.o || { k: 0 },
                      0,
                      0,
                      this
                    )),
                    (this.xe = PropertyFactory.getProp(
                      e,
                      t.xe || { k: 0 },
                      0,
                      0,
                      this
                    )),
                    (this.ne = PropertyFactory.getProp(
                      e,
                      t.ne || { k: 0 },
                      0,
                      0,
                      this
                    )),
                    (this.sm = PropertyFactory.getProp(
                      e,
                      t.sm || { k: 100 },
                      0,
                      0,
                      this
                    )),
                    (this.a = PropertyFactory.getProp(e, t.a, 0, 0.01, this)),
                    this.dynamicProperties.length || this.getValue();
                }
                return (
                  (r.prototype = {
                    getMult: function (r) {
                      this._currentTextLength !==
                        this.elem.textProperty.currentData.l.length &&
                        this.getValue();
                      var i = 0,
                        a = 0,
                        s = 1,
                        o = 1;
                      this.ne.v > 0
                        ? (i = this.ne.v / 100)
                        : (a = -this.ne.v / 100),
                        this.xe.v > 0
                          ? (s = 1 - this.xe.v / 100)
                          : (o = 1 + this.xe.v / 100);
                      var l = BezierFactory.getBezierEasing(i, a, s, o).get,
                        h = 0,
                        u = this.finalS,
                        c = this.finalE,
                        d = this.data.sh;
                      if (2 === d)
                        h = l(
                          (h =
                            c === u
                              ? r >= c
                                ? 1
                                : 0
                              : e(0, t(0.5 / (c - u) + (r - u) / (c - u), 1)))
                        );
                      else if (3 === d)
                        h = l(
                          (h =
                            c === u
                              ? r >= c
                                ? 0
                                : 1
                              : 1 - e(0, t(0.5 / (c - u) + (r - u) / (c - u), 1)))
                        );
                      else if (4 === d)
                        c === u
                          ? (h = 0)
                          : (h = e(0, t(0.5 / (c - u) + (r - u) / (c - u), 1))) <
                            0.5
                          ? (h *= 2)
                          : (h = 1 - 2 * (h - 0.5)),
                          (h = l(h));
                      else if (5 === d) {
                        if (c === u) h = 0;
                        else {
                          var f = c - u,
                            p = -f / 2 + (r = t(e(0, r + 0.5 - u), c - u)),
                            m = f / 2;
                          h = Math.sqrt(1 - (p * p) / (m * m));
                        }
                        h = l(h);
                      } else
                        6 === d
                          ? (c === u
                              ? (h = 0)
                              : ((r = t(e(0, r + 0.5 - u), c - u)),
                                (h =
                                  (1 +
                                    Math.cos(
                                      Math.PI + (2 * Math.PI * r) / (c - u)
                                    )) /
                                  2)),
                            (h = l(h)))
                          : (r >= n(u) &&
                              (h = e(
                                0,
                                t(r - u < 0 ? t(c, 1) - (u - r) : c - r, 1)
                              )),
                            (h = l(h)));
                      if (100 !== this.sm.v) {
                        var g = 0.01 * this.sm.v;
                        0 === g && (g = 1e-8);
                        var v = 0.5 - 0.5 * g;
                        h < v ? (h = 0) : (h = (h - v) / g) > 1 && (h = 1);
                      }
                      return h * this.a.v;
                    },
                    getValue: function (e) {
                      this.iterateDynamicProperties(),
                        (this._mdf = e || this._mdf),
                        (this._currentTextLength =
                          this.elem.textProperty.currentData.l.length || 0),
                        e &&
                          2 === this.data.r &&
                          (this.e.v = this._currentTextLength);
                      var t = 2 === this.data.r ? 1 : 100 / this.data.totalChars,
                        n = this.o.v / t,
                        r = this.s.v / t + n,
                        i = this.e.v / t + n;
                      if (r > i) {
                        var a = r;
                        (r = i), (i = a);
                      }
                      (this.finalS = r), (this.finalE = i);
                    }
                  }),
                  extendPrototype([DynamicPropertyContainer], r),
                  {
                    getTextSelectorProp: function (e, t, n) {
                      return new r(e, t, n);
                    }
                  }
                );
              })();
              function TextAnimatorDataProperty(e, t, n) {
                var r = { propType: !1 },
                  i = PropertyFactory.getProp,
                  a = t.a;
                (this.a = {
                  r: a.r ? i(e, a.r, 0, degToRads, n) : r,
                  rx: a.rx ? i(e, a.rx, 0, degToRads, n) : r,
                  ry: a.ry ? i(e, a.ry, 0, degToRads, n) : r,
                  sk: a.sk ? i(e, a.sk, 0, degToRads, n) : r,
                  sa: a.sa ? i(e, a.sa, 0, degToRads, n) : r,
                  s: a.s ? i(e, a.s, 1, 0.01, n) : r,
                  a: a.a ? i(e, a.a, 1, 0, n) : r,
                  o: a.o ? i(e, a.o, 0, 0.01, n) : r,
                  p: a.p ? i(e, a.p, 1, 0, n) : r,
                  sw: a.sw ? i(e, a.sw, 0, 0, n) : r,
                  sc: a.sc ? i(e, a.sc, 1, 0, n) : r,
                  fc: a.fc ? i(e, a.fc, 1, 0, n) : r,
                  fh: a.fh ? i(e, a.fh, 0, 0, n) : r,
                  fs: a.fs ? i(e, a.fs, 0, 0.01, n) : r,
                  fb: a.fb ? i(e, a.fb, 0, 0.01, n) : r,
                  t: a.t ? i(e, a.t, 0, 0, n) : r
                }),
                  (this.s = TextSelectorProp.getTextSelectorProp(e, t.s, n)),
                  (this.s.t = t.s.t);
              }
              function TextAnimatorProperty(e, t, n) {
                (this._isFirstFrame = !0),
                  (this._hasMaskedPath = !1),
                  (this._frameId = -1),
                  (this._textData = e),
                  (this._renderType = t),
                  (this._elem = n),
                  (this._animatorsData = createSizedArray(
                    this._textData.a.length
                  )),
                  (this._pathData = {}),
                  (this._moreOptions = { alignment: {} }),
                  (this.renderedLetters = []),
                  (this.lettersChangedFlag = !1),
                  this.initDynamicPropertyContainer(n);
              }
              function ITextElement() {}
              (TextAnimatorProperty.prototype.searchProperties = function () {
                var e,
                  t,
                  n = this._textData.a.length,
                  r = PropertyFactory.getProp;
                for (e = 0; e < n; e += 1)
                  (t = this._textData.a[e]),
                    (this._animatorsData[e] = new TextAnimatorDataProperty(
                      this._elem,
                      t,
                      this
                    ));
                this._textData.p && "m" in this._textData.p
                  ? ((this._pathData = {
                      a: r(this._elem, this._textData.p.a, 0, 0, this),
                      f: r(this._elem, this._textData.p.f, 0, 0, this),
                      l: r(this._elem, this._textData.p.l, 0, 0, this),
                      r: r(this._elem, this._textData.p.r, 0, 0, this),
                      p: r(this._elem, this._textData.p.p, 0, 0, this),
                      m: this._elem.maskManager.getMaskProperty(
                        this._textData.p.m
                      )
                    }),
                    (this._hasMaskedPath = !0))
                  : (this._hasMaskedPath = !1),
                  (this._moreOptions.alignment = r(
                    this._elem,
                    this._textData.m.a,
                    1,
                    0,
                    this
                  ));
              }),
                (TextAnimatorProperty.prototype.getMeasures = function (e, t) {
                  if (
                    ((this.lettersChangedFlag = t),
                    this._mdf ||
                      this._isFirstFrame ||
                      t ||
                      (this._hasMaskedPath && this._pathData.m._mdf))
                  ) {
                    this._isFirstFrame = !1;
                    var n,
                      r,
                      i,
                      a,
                      s,
                      o,
                      l,
                      h,
                      u,
                      c,
                      d,
                      f,
                      p,
                      m,
                      g,
                      v,
                      y,
                      _,
                      b,
                      x = this._moreOptions.alignment.v,
                      S = this._animatorsData,
                      E = this._textData,
                      w = this.mHelper,
                      T = this._renderType,
                      M = this.renderedLetters.length,
                      A = e.l;
                    if (this._hasMaskedPath) {
                      if (
                        ((b = this._pathData.m),
                        !this._pathData.n || this._pathData._mdf)
                      ) {
                        var C,
                          P = b.v;
                        for (
                          this._pathData.r.v && (P = P.reverse()),
                            s = { tLength: 0, segments: [] },
                            a = P._length - 1,
                            v = 0,
                            i = 0;
                          i < a;
                          i += 1
                        )
                          (C = bez.buildBezierData(
                            P.v[i],
                            P.v[i + 1],
                            [P.o[i][0] - P.v[i][0], P.o[i][1] - P.v[i][1]],
                            [
                              P.i[i + 1][0] - P.v[i + 1][0],
                              P.i[i + 1][1] - P.v[i + 1][1]
                            ]
                          )),
                            (s.tLength += C.segmentLength),
                            s.segments.push(C),
                            (v += C.segmentLength);
                        (i = a),
                          b.v.c &&
                            ((C = bez.buildBezierData(
                              P.v[i],
                              P.v[0],
                              [P.o[i][0] - P.v[i][0], P.o[i][1] - P.v[i][1]],
                              [P.i[0][0] - P.v[0][0], P.i[0][1] - P.v[0][1]]
                            )),
                            (s.tLength += C.segmentLength),
                            s.segments.push(C),
                            (v += C.segmentLength)),
                          (this._pathData.pi = s);
                      }
                      if (
                        ((s = this._pathData.pi),
                        (o = this._pathData.f.v),
                        (d = 0),
                        (c = 1),
                        (h = 0),
                        (u = !0),
                        (m = s.segments),
                        o < 0 && b.v.c)
                      )
                        for (
                          s.tLength < Math.abs(o) &&
                            (o = -Math.abs(o) % s.tLength),
                            c = (p = m[(d = m.length - 1)].points).length - 1;
                          o < 0;
  
                        )
                          (o += p[c].partialLength),
                            (c -= 1) < 0 &&
                              (c = (p = m[(d -= 1)].points).length - 1);
                      (f = (p = m[d].points)[c - 1]),
                        (g = (l = p[c]).partialLength);
                    }
                    (a = A.length), (n = 0), (r = 0);
                    var k,
                      R,
                      D,
                      I,
                      L,
                      F = 1.2 * e.finalSize * 0.714,
                      O = !0;
                    D = S.length;
                    var N,
                      B,
                      U,
                      z,
                      V,
                      H,
                      G,
                      W,
                      j,
                      X,
                      q,
                      Y,
                      K = -1,
                      Z = o,
                      J = d,
                      $ = c,
                      Q = -1,
                      ee = "",
                      te = this.defaultPropsArray;
                    if (2 === e.j || 1 === e.j) {
                      var ne = 0,
                        re = 0,
                        ie = 2 === e.j ? -0.5 : -1,
                        ae = 0,
                        se = !0;
                      for (i = 0; i < a; i += 1)
                        if (A[i].n) {
                          for (ne && (ne += re); ae < i; )
                            (A[ae].animatorJustifyOffset = ne), (ae += 1);
                          (ne = 0), (se = !0);
                        } else {
                          for (R = 0; R < D; R += 1)
                            (k = S[R].a).t.propType &&
                              (se && 2 === e.j && (re += k.t.v * ie),
                              (L = S[R].s.getMult(
                                A[i].anIndexes[R],
                                E.a[R].s.totalChars
                              )).length
                                ? (ne += k.t.v * L[0] * ie)
                                : (ne += k.t.v * L * ie));
                          se = !1;
                        }
                      for (ne && (ne += re); ae < i; )
                        (A[ae].animatorJustifyOffset = ne), (ae += 1);
                    }
                    for (i = 0; i < a; i += 1) {
                      if ((w.reset(), (z = 1), A[i].n))
                        (n = 0),
                          (r += e.yOffset),
                          (r += O ? 1 : 0),
                          (o = Z),
                          (O = !1),
                          this._hasMaskedPath &&
                            ((c = $),
                            (f = (p = m[(d = J)].points)[c - 1]),
                            (g = (l = p[c]).partialLength),
                            (h = 0)),
                          (ee = ""),
                          (q = ""),
                          (j = ""),
                          (Y = ""),
                          (te = this.defaultPropsArray);
                      else {
                        if (this._hasMaskedPath) {
                          if (Q !== A[i].line) {
                            switch (e.j) {
                              case 1:
                                o += v - e.lineWidths[A[i].line];
                                break;
                              case 2:
                                o += (v - e.lineWidths[A[i].line]) / 2;
                            }
                            Q = A[i].line;
                          }
                          K !== A[i].ind &&
                            (A[K] && (o += A[K].extra),
                            (o += A[i].an / 2),
                            (K = A[i].ind)),
                            (o += x[0] * A[i].an * 0.005);
                          var oe = 0;
                          for (R = 0; R < D; R += 1)
                            (k = S[R].a).p.propType &&
                              ((L = S[R].s.getMult(
                                A[i].anIndexes[R],
                                E.a[R].s.totalChars
                              )).length
                                ? (oe += k.p.v[0] * L[0])
                                : (oe += k.p.v[0] * L)),
                              k.a.propType &&
                                ((L = S[R].s.getMult(
                                  A[i].anIndexes[R],
                                  E.a[R].s.totalChars
                                )).length
                                  ? (oe += k.a.v[0] * L[0])
                                  : (oe += k.a.v[0] * L));
                          for (
                            u = !0,
                              this._pathData.a.v &&
                                ((o =
                                  0.5 * A[0].an +
                                  ((v -
                                    this._pathData.f.v -
                                    0.5 * A[0].an -
                                    0.5 * A[A.length - 1].an) *
                                    K) /
                                    (a - 1)),
                                (o += this._pathData.f.v));
                            u;
  
                          )
                            h + g >= o + oe || !p
                              ? ((y = (o + oe - h) / l.partialLength),
                                (B = f.point[0] + (l.point[0] - f.point[0]) * y),
                                (U = f.point[1] + (l.point[1] - f.point[1]) * y),
                                w.translate(
                                  -x[0] * A[i].an * 0.005,
                                  -x[1] * F * 0.01
                                ),
                                (u = !1))
                              : p &&
                                ((h += l.partialLength),
                                (c += 1) >= p.length &&
                                  ((c = 0),
                                  m[(d += 1)]
                                    ? (p = m[d].points)
                                    : b.v.c
                                    ? ((c = 0), (p = m[(d = 0)].points))
                                    : ((h -= l.partialLength), (p = null))),
                                p && ((f = l), (g = (l = p[c]).partialLength)));
                          (N = A[i].an / 2 - A[i].add), w.translate(-N, 0, 0);
                        } else
                          (N = A[i].an / 2 - A[i].add),
                            w.translate(-N, 0, 0),
                            w.translate(
                              -x[0] * A[i].an * 0.005,
                              -x[1] * F * 0.01,
                              0
                            );
                        for (R = 0; R < D; R += 1)
                          (k = S[R].a).t.propType &&
                            ((L = S[R].s.getMult(
                              A[i].anIndexes[R],
                              E.a[R].s.totalChars
                            )),
                            (0 === n && 0 === e.j) ||
                              (this._hasMaskedPath
                                ? L.length
                                  ? (o += k.t.v * L[0])
                                  : (o += k.t.v * L)
                                : L.length
                                ? (n += k.t.v * L[0])
                                : (n += k.t.v * L)));
                        for (
                          e.strokeWidthAnim && (H = e.sw || 0),
                            e.strokeColorAnim &&
                              (V = e.sc
                                ? [e.sc[0], e.sc[1], e.sc[2]]
                                : [0, 0, 0]),
                            e.fillColorAnim &&
                              e.fc &&
                              (G = [e.fc[0], e.fc[1], e.fc[2]]),
                            R = 0;
                          R < D;
                          R += 1
                        )
                          (k = S[R].a).a.propType &&
                            ((L = S[R].s.getMult(
                              A[i].anIndexes[R],
                              E.a[R].s.totalChars
                            )).length
                              ? w.translate(
                                  -k.a.v[0] * L[0],
                                  -k.a.v[1] * L[1],
                                  k.a.v[2] * L[2]
                                )
                              : w.translate(
                                  -k.a.v[0] * L,
                                  -k.a.v[1] * L,
                                  k.a.v[2] * L
                                ));
                        for (R = 0; R < D; R += 1)
                          (k = S[R].a).s.propType &&
                            ((L = S[R].s.getMult(
                              A[i].anIndexes[R],
                              E.a[R].s.totalChars
                            )).length
                              ? w.scale(
                                  1 + (k.s.v[0] - 1) * L[0],
                                  1 + (k.s.v[1] - 1) * L[1],
                                  1
                                )
                              : w.scale(
                                  1 + (k.s.v[0] - 1) * L,
                                  1 + (k.s.v[1] - 1) * L,
                                  1
                                ));
                        for (R = 0; R < D; R += 1) {
                          if (
                            ((k = S[R].a),
                            (L = S[R].s.getMult(
                              A[i].anIndexes[R],
                              E.a[R].s.totalChars
                            )),
                            k.sk.propType &&
                              (L.length
                                ? w.skewFromAxis(-k.sk.v * L[0], k.sa.v * L[1])
                                : w.skewFromAxis(-k.sk.v * L, k.sa.v * L)),
                            k.r.propType &&
                              (L.length
                                ? w.rotateZ(-k.r.v * L[2])
                                : w.rotateZ(-k.r.v * L)),
                            k.ry.propType &&
                              (L.length
                                ? w.rotateY(k.ry.v * L[1])
                                : w.rotateY(k.ry.v * L)),
                            k.rx.propType &&
                              (L.length
                                ? w.rotateX(k.rx.v * L[0])
                                : w.rotateX(k.rx.v * L)),
                            k.o.propType &&
                              (L.length
                                ? (z += (k.o.v * L[0] - z) * L[0])
                                : (z += (k.o.v * L - z) * L)),
                            e.strokeWidthAnim &&
                              k.sw.propType &&
                              (L.length
                                ? (H += k.sw.v * L[0])
                                : (H += k.sw.v * L)),
                            e.strokeColorAnim && k.sc.propType)
                          )
                            for (W = 0; W < 3; W += 1)
                              L.length
                                ? (V[W] += (k.sc.v[W] - V[W]) * L[0])
                                : (V[W] += (k.sc.v[W] - V[W]) * L);
                          if (e.fillColorAnim && e.fc) {
                            if (k.fc.propType)
                              for (W = 0; W < 3; W += 1)
                                L.length
                                  ? (G[W] += (k.fc.v[W] - G[W]) * L[0])
                                  : (G[W] += (k.fc.v[W] - G[W]) * L);
                            k.fh.propType &&
                              (G = L.length
                                ? addHueToRGB(G, k.fh.v * L[0])
                                : addHueToRGB(G, k.fh.v * L)),
                              k.fs.propType &&
                                (G = L.length
                                  ? addSaturationToRGB(G, k.fs.v * L[0])
                                  : addSaturationToRGB(G, k.fs.v * L)),
                              k.fb.propType &&
                                (G = L.length
                                  ? addBrightnessToRGB(G, k.fb.v * L[0])
                                  : addBrightnessToRGB(G, k.fb.v * L));
                          }
                        }
                        for (R = 0; R < D; R += 1)
                          (k = S[R].a).p.propType &&
                            ((L = S[R].s.getMult(
                              A[i].anIndexes[R],
                              E.a[R].s.totalChars
                            )),
                            this._hasMaskedPath
                              ? L.length
                                ? w.translate(
                                    0,
                                    k.p.v[1] * L[0],
                                    -k.p.v[2] * L[1]
                                  )
                                : w.translate(0, k.p.v[1] * L, -k.p.v[2] * L)
                              : L.length
                              ? w.translate(
                                  k.p.v[0] * L[0],
                                  k.p.v[1] * L[1],
                                  -k.p.v[2] * L[2]
                                )
                              : w.translate(
                                  k.p.v[0] * L,
                                  k.p.v[1] * L,
                                  -k.p.v[2] * L
                                ));
                        if (
                          (e.strokeWidthAnim && (j = H < 0 ? 0 : H),
                          e.strokeColorAnim &&
                            (X =
                              "rgb(" +
                              Math.round(255 * V[0]) +
                              "," +
                              Math.round(255 * V[1]) +
                              "," +
                              Math.round(255 * V[2]) +
                              ")"),
                          e.fillColorAnim &&
                            e.fc &&
                            (q =
                              "rgb(" +
                              Math.round(255 * G[0]) +
                              "," +
                              Math.round(255 * G[1]) +
                              "," +
                              Math.round(255 * G[2]) +
                              ")"),
                          this._hasMaskedPath)
                        ) {
                          if (
                            (w.translate(0, -e.ls),
                            w.translate(0, x[1] * F * 0.01 + r, 0),
                            this._pathData.p.v)
                          ) {
                            _ =
                              (l.point[1] - f.point[1]) /
                              (l.point[0] - f.point[0]);
                            var le = (180 * Math.atan(_)) / Math.PI;
                            l.point[0] < f.point[0] && (le += 180),
                              w.rotate((-le * Math.PI) / 180);
                          }
                          w.translate(B, U, 0),
                            (o -= x[0] * A[i].an * 0.005),
                            A[i + 1] &&
                              K !== A[i + 1].ind &&
                              ((o += A[i].an / 2),
                              (o += 0.001 * e.tr * e.finalSize));
                        } else {
                          switch (
                            (w.translate(n, r, 0),
                            e.ps && w.translate(e.ps[0], e.ps[1] + e.ascent, 0),
                            e.j)
                          ) {
                            case 1:
                              w.translate(
                                A[i].animatorJustifyOffset +
                                  e.justifyOffset +
                                  (e.boxWidth - e.lineWidths[A[i].line]),
                                0,
                                0
                              );
                              break;
                            case 2:
                              w.translate(
                                A[i].animatorJustifyOffset +
                                  e.justifyOffset +
                                  (e.boxWidth - e.lineWidths[A[i].line]) / 2,
                                0,
                                0
                              );
                          }
                          w.translate(0, -e.ls),
                            w.translate(N, 0, 0),
                            w.translate(
                              x[0] * A[i].an * 0.005,
                              x[1] * F * 0.01,
                              0
                            ),
                            (n += A[i].l + 0.001 * e.tr * e.finalSize);
                        }
                        "html" === T
                          ? (ee = w.toCSS())
                          : "svg" === T
                          ? (ee = w.to2dCSS())
                          : (te = [
                              w.props[0],
                              w.props[1],
                              w.props[2],
                              w.props[3],
                              w.props[4],
                              w.props[5],
                              w.props[6],
                              w.props[7],
                              w.props[8],
                              w.props[9],
                              w.props[10],
                              w.props[11],
                              w.props[12],
                              w.props[13],
                              w.props[14],
                              w.props[15]
                            ]),
                          (Y = z);
                      }
                      M <= i
                        ? ((I = new LetterProps(Y, j, X, q, ee, te)),
                          this.renderedLetters.push(I),
                          (M += 1),
                          (this.lettersChangedFlag = !0))
                        : ((I = this.renderedLetters[i]),
                          (this.lettersChangedFlag =
                            I.update(Y, j, X, q, ee, te) ||
                            this.lettersChangedFlag));
                    }
                  }
                }),
                (TextAnimatorProperty.prototype.getValue = function () {
                  this._elem.globalData.frameId !== this._frameId &&
                    ((this._frameId = this._elem.globalData.frameId),
                    this.iterateDynamicProperties());
                }),
                (TextAnimatorProperty.prototype.mHelper = new Matrix()),
                (TextAnimatorProperty.prototype.defaultPropsArray = []),
                extendPrototype([DynamicPropertyContainer], TextAnimatorProperty),
                (ITextElement.prototype.initElement = function (e, t, n) {
                  (this.lettersChangedFlag = !0),
                    this.initFrame(),
                    this.initBaseData(e, t, n),
                    (this.textProperty = new TextProperty(
                      this,
                      e.t,
                      this.dynamicProperties
                    )),
                    (this.textAnimator = new TextAnimatorProperty(
                      e.t,
                      this.renderType,
                      this
                    )),
                    this.initTransform(e, t, n),
                    this.initHierarchy(),
                    this.initRenderable(),
                    this.initRendererElement(),
                    this.createContainerElements(),
                    this.createRenderableComponents(),
                    this.createContent(),
                    this.hide(),
                    this.textAnimator.searchProperties(this.dynamicProperties);
                }),
                (ITextElement.prototype.prepareFrame = function (e) {
                  (this._mdf = !1),
                    this.prepareRenderableFrame(e),
                    this.prepareProperties(e, this.isInRange);
                }),
                (ITextElement.prototype.createPathShape = function (e, t) {
                  var n,
                    r,
                    i = t.length,
                    a = "";
                  for (n = 0; n < i; n += 1)
                    "sh" === t[n].ty &&
                      ((r = t[n].ks.k),
                      (a += buildShapeString(r, r.i.length, !0, e)));
                  return a;
                }),
                (ITextElement.prototype.updateDocumentData = function (e, t) {
                  this.textProperty.updateDocumentData(e, t);
                }),
                (ITextElement.prototype.canResizeFont = function (e) {
                  this.textProperty.canResizeFont(e);
                }),
                (ITextElement.prototype.setMinimumFontSize = function (e) {
                  this.textProperty.setMinimumFontSize(e);
                }),
                (ITextElement.prototype.applyTextPropertiesToMatrix = function (
                  e,
                  t,
                  n,
                  r,
                  i
                ) {
                  switch (
                    (e.ps && t.translate(e.ps[0], e.ps[1] + e.ascent, 0),
                    t.translate(0, -e.ls, 0),
                    e.j)
                  ) {
                    case 1:
                      t.translate(
                        e.justifyOffset + (e.boxWidth - e.lineWidths[n]),
                        0,
                        0
                      );
                      break;
                    case 2:
                      t.translate(
                        e.justifyOffset + (e.boxWidth - e.lineWidths[n]) / 2,
                        0,
                        0
                      );
                  }
                  t.translate(r, i, 0);
                }),
                (ITextElement.prototype.buildColor = function (e) {
                  return (
                    "rgb(" +
                    Math.round(255 * e[0]) +
                    "," +
                    Math.round(255 * e[1]) +
                    "," +
                    Math.round(255 * e[2]) +
                    ")"
                  );
                }),
                (ITextElement.prototype.emptyProp = new LetterProps()),
                (ITextElement.prototype.destroy = function () {}),
                (ITextElement.prototype.validateText = function () {
                  (this.textProperty._mdf || this.textProperty._isFirstFrame) &&
                    (this.buildNewText(),
                    (this.textProperty._isFirstFrame = !1),
                    (this.textProperty._mdf = !1));
                });
              var emptyShapeData = { shapes: [] };
              function SVGTextLottieElement(e, t, n) {
                (this.textSpans = []),
                  (this.renderType = "svg"),
                  this.initElement(e, t, n);
              }
              function ISolidElement(e, t, n) {
                this.initElement(e, t, n);
              }
              function NullElement(e, t, n) {
                this.initFrame(),
                  this.initBaseData(e, t, n),
                  this.initFrame(),
                  this.initTransform(e, t, n),
                  this.initHierarchy();
              }
              function SVGRendererBase() {}
              function ICompElement() {}
              function SVGCompElement(e, t, n) {
                (this.layers = e.layers),
                  (this.supports3d = !0),
                  (this.completeLayers = !1),
                  (this.pendingElements = []),
                  (this.elements = this.layers
                    ? createSizedArray(this.layers.length)
                    : []),
                  this.initElement(e, t, n),
                  (this.tm = e.tm
                    ? PropertyFactory.getProp(this, e.tm, 0, t.frameRate, this)
                    : { _placeholder: !0 });
              }
              function SVGRenderer(e, t) {
                (this.animationItem = e),
                  (this.layers = null),
                  (this.renderedFrame = -1),
                  (this.svgElement = createNS("svg"));
                var n = "";
                if (t && t.title) {
                  var r = createNS("title"),
                    i = createElementID();
                  r.setAttribute("id", i),
                    (r.textContent = t.title),
                    this.svgElement.appendChild(r),
                    (n += i);
                }
                if (t && t.description) {
                  var a = createNS("desc"),
                    s = createElementID();
                  a.setAttribute("id", s),
                    (a.textContent = t.description),
                    this.svgElement.appendChild(a),
                    (n += " " + s);
                }
                n && this.svgElement.setAttribute("aria-labelledby", n);
                var o = createNS("defs");
                this.svgElement.appendChild(o);
                var l = createNS("g");
                this.svgElement.appendChild(l),
                  (this.layerElement = l),
                  (this.renderConfig = {
                    preserveAspectRatio:
                      (t && t.preserveAspectRatio) || "xMidYMid meet",
                    imagePreserveAspectRatio:
                      (t && t.imagePreserveAspectRatio) || "xMidYMid slice",
                    contentVisibility: (t && t.contentVisibility) || "visible",
                    progressiveLoad: (t && t.progressiveLoad) || !1,
                    hideOnTransparent: !(t && !1 === t.hideOnTransparent),
                    viewBoxOnly: (t && t.viewBoxOnly) || !1,
                    viewBoxSize: (t && t.viewBoxSize) || !1,
                    className: (t && t.className) || "",
                    id: (t && t.id) || "",
                    focusable: t && t.focusable,
                    filterSize: {
                      width: (t && t.filterSize && t.filterSize.width) || "100%",
                      height:
                        (t && t.filterSize && t.filterSize.height) || "100%",
                      x: (t && t.filterSize && t.filterSize.x) || "0%",
                      y: (t && t.filterSize && t.filterSize.y) || "0%"
                    },
                    width: t && t.width,
                    height: t && t.height,
                    runExpressions:
                      !t || void 0 === t.runExpressions || t.runExpressions
                  }),
                  (this.globalData = {
                    _mdf: !1,
                    frameNum: -1,
                    defs: o,
                    renderConfig: this.renderConfig
                  }),
                  (this.elements = []),
                  (this.pendingElements = []),
                  (this.destroyed = !1),
                  (this.rendererType = "svg");
              }
              function ShapeTransformManager() {
                (this.sequences = {}),
                  (this.sequenceList = []),
                  (this.transform_key_count = 0);
              }
              extendPrototype(
                [
                  BaseElement,
                  TransformElement,
                  SVGBaseElement,
                  HierarchyElement,
                  FrameElement,
                  RenderableDOMElement,
                  ITextElement
                ],
                SVGTextLottieElement
              ),
                (SVGTextLottieElement.prototype.createContent = function () {
                  this.data.singleShape &&
                    !this.globalData.fontManager.chars &&
                    (this.textContainer = createNS("text"));
                }),
                (SVGTextLottieElement.prototype.buildTextContents = function (e) {
                  for (var t = 0, n = e.length, r = [], i = ""; t < n; )
                    e[t] === String.fromCharCode(13) ||
                    e[t] === String.fromCharCode(3)
                      ? (r.push(i), (i = ""))
                      : (i += e[t]),
                      (t += 1);
                  return r.push(i), r;
                }),
                (SVGTextLottieElement.prototype.buildShapeData = function (e, t) {
                  if (e.shapes && e.shapes.length) {
                    var n = e.shapes[0];
                    if (n.it) {
                      var r = n.it[n.it.length - 1];
                      r.s && ((r.s.k[0] = t), (r.s.k[1] = t));
                    }
                  }
                  return e;
                }),
                (SVGTextLottieElement.prototype.buildNewText = function () {
                  var e, t;
                  this.addDynamicProperty(this);
                  var n = this.textProperty.currentData;
                  (this.renderedLetters = createSizedArray(n ? n.l.length : 0)),
                    n.fc
                      ? this.layerElement.setAttribute(
                          "fill",
                          this.buildColor(n.fc)
                        )
                      : this.layerElement.setAttribute("fill", "rgba(0,0,0,0)"),
                    n.sc &&
                      (this.layerElement.setAttribute(
                        "stroke",
                        this.buildColor(n.sc)
                      ),
                      this.layerElement.setAttribute("stroke-width", n.sw)),
                    this.layerElement.setAttribute("font-size", n.finalSize);
                  var r = this.globalData.fontManager.getFontByName(n.f);
                  if (r.fClass) this.layerElement.setAttribute("class", r.fClass);
                  else {
                    this.layerElement.setAttribute("font-family", r.fFamily);
                    var i = n.fWeight,
                      a = n.fStyle;
                    this.layerElement.setAttribute("font-style", a),
                      this.layerElement.setAttribute("font-weight", i);
                  }
                  this.layerElement.setAttribute("aria-label", n.t);
                  var s,
                    o = n.l || [],
                    l = !!this.globalData.fontManager.chars;
                  t = o.length;
                  var h = this.mHelper,
                    u = this.data.singleShape,
                    c = 0,
                    d = 0,
                    f = !0,
                    p = 0.001 * n.tr * n.finalSize;
                  if (!u || l || n.sz) {
                    var m,
                      g = this.textSpans.length;
                    for (e = 0; e < t; e += 1) {
                      if (
                        (this.textSpans[e] ||
                          (this.textSpans[e] = {
                            span: null,
                            childSpan: null,
                            glyph: null
                          }),
                        !l || !u || 0 === e)
                      ) {
                        if (
                          ((s =
                            g > e
                              ? this.textSpans[e].span
                              : createNS(l ? "g" : "text")),
                          g <= e)
                        ) {
                          if (
                            (s.setAttribute("stroke-linecap", "butt"),
                            s.setAttribute("stroke-linejoin", "round"),
                            s.setAttribute("stroke-miterlimit", "4"),
                            (this.textSpans[e].span = s),
                            l)
                          ) {
                            var v = createNS("g");
                            s.appendChild(v), (this.textSpans[e].childSpan = v);
                          }
                          (this.textSpans[e].span = s),
                            this.layerElement.appendChild(s);
                        }
                        s.style.display = "inherit";
                      }
                      if (
                        (h.reset(),
                        u &&
                          (o[e].n &&
                            ((c = -p),
                            (d += n.yOffset),
                            (d += f ? 1 : 0),
                            (f = !1)),
                          this.applyTextPropertiesToMatrix(n, h, o[e].line, c, d),
                          (c += o[e].l || 0),
                          (c += p)),
                        l)
                      ) {
                        var y;
                        if (
                          1 ===
                          (m = this.globalData.fontManager.getCharData(
                            n.finalText[e],
                            r.fStyle,
                            this.globalData.fontManager.getFontByName(n.f).fFamily
                          )).t
                        )
                          y = new SVGCompElement(m.data, this.globalData, this);
                        else {
                          var _ = emptyShapeData;
                          m.data &&
                            m.data.shapes &&
                            (_ = this.buildShapeData(m.data, n.finalSize)),
                            (y = new SVGShapeElement(_, this.globalData, this));
                        }
                        if (this.textSpans[e].glyph) {
                          var b = this.textSpans[e].glyph;
                          this.textSpans[e].childSpan.removeChild(b.layerElement),
                            b.destroy();
                        }
                        (this.textSpans[e].glyph = y),
                          (y._debug = !0),
                          y.prepareFrame(0),
                          y.renderFrame(),
                          this.textSpans[e].childSpan.appendChild(y.layerElement),
                          1 === m.t &&
                            this.textSpans[e].childSpan.setAttribute(
                              "transform",
                              "scale(" +
                                n.finalSize / 100 +
                                "," +
                                n.finalSize / 100 +
                                ")"
                            );
                      } else
                        u &&
                          s.setAttribute(
                            "transform",
                            "translate(" + h.props[12] + "," + h.props[13] + ")"
                          ),
                          (s.textContent = o[e].val),
                          s.setAttributeNS(
                            "http://www.w3.org/XML/1998/namespace",
                            "xml:space",
                            "preserve"
                          );
                    }
                    u && s && s.setAttribute("d", "");
                  } else {
                    var x = this.textContainer,
                      S = "start";
                    switch (n.j) {
                      case 1:
                        S = "end";
                        break;
                      case 2:
                        S = "middle";
                        break;
                      default:
                        S = "start";
                    }
                    x.setAttribute("text-anchor", S),
                      x.setAttribute("letter-spacing", p);
                    var E = this.buildTextContents(n.finalText);
                    for (
                      t = E.length, d = n.ps ? n.ps[1] + n.ascent : 0, e = 0;
                      e < t;
                      e += 1
                    )
                      ((s =
                        this.textSpans[e].span || createNS("tspan")).textContent =
                        E[e]),
                        s.setAttribute("x", 0),
                        s.setAttribute("y", d),
                        (s.style.display = "inherit"),
                        x.appendChild(s),
                        this.textSpans[e] ||
                          (this.textSpans[e] = { span: null, glyph: null }),
                        (this.textSpans[e].span = s),
                        (d += n.finalLineHeight);
                    this.layerElement.appendChild(x);
                  }
                  for (; e < this.textSpans.length; )
                    (this.textSpans[e].span.style.display = "none"), (e += 1);
                  this._sizeChanged = !0;
                }),
                (SVGTextLottieElement.prototype.sourceRectAtTime = function () {
                  if (
                    (this.prepareFrame(this.comp.renderedFrame - this.data.st),
                    this.renderInnerContent(),
                    this._sizeChanged)
                  ) {
                    this._sizeChanged = !1;
                    var e = this.layerElement.getBBox();
                    this.bbox = {
                      top: e.y,
                      left: e.x,
                      width: e.width,
                      height: e.height
                    };
                  }
                  return this.bbox;
                }),
                (SVGTextLottieElement.prototype.getValue = function () {
                  var e,
                    t,
                    n = this.textSpans.length;
                  for (
                    this.renderedFrame = this.comp.renderedFrame, e = 0;
                    e < n;
                    e += 1
                  )
                    (t = this.textSpans[e].glyph) &&
                      (t.prepareFrame(this.comp.renderedFrame - this.data.st),
                      t._mdf && (this._mdf = !0));
                }),
                (SVGTextLottieElement.prototype.renderInnerContent = function () {
                  if (
                    (this.validateText(),
                    (!this.data.singleShape || this._mdf) &&
                      (this.textAnimator.getMeasures(
                        this.textProperty.currentData,
                        this.lettersChangedFlag
                      ),
                      this.lettersChangedFlag ||
                        this.textAnimator.lettersChangedFlag))
                  ) {
                    var e, t;
                    this._sizeChanged = !0;
                    var n,
                      r,
                      i,
                      a = this.textAnimator.renderedLetters,
                      s = this.textProperty.currentData.l;
                    for (t = s.length, e = 0; e < t; e += 1)
                      s[e].n ||
                        ((n = a[e]),
                        (r = this.textSpans[e].span),
                        (i = this.textSpans[e].glyph) && i.renderFrame(),
                        n._mdf.m && r.setAttribute("transform", n.m),
                        n._mdf.o && r.setAttribute("opacity", n.o),
                        n._mdf.sw && r.setAttribute("stroke-width", n.sw),
                        n._mdf.sc && r.setAttribute("stroke", n.sc),
                        n._mdf.fc && r.setAttribute("fill", n.fc));
                  }
                }),
                extendPrototype([IImageElement], ISolidElement),
                (ISolidElement.prototype.createContent = function () {
                  var e = createNS("rect");
                  e.setAttribute("width", this.data.sw),
                    e.setAttribute("height", this.data.sh),
                    e.setAttribute("fill", this.data.sc),
                    this.layerElement.appendChild(e);
                }),
                (NullElement.prototype.prepareFrame = function (e) {
                  this.prepareProperties(e, !0);
                }),
                (NullElement.prototype.renderFrame = function () {}),
                (NullElement.prototype.getBaseElement = function () {
                  return null;
                }),
                (NullElement.prototype.destroy = function () {}),
                (NullElement.prototype.sourceRectAtTime = function () {}),
                (NullElement.prototype.hide = function () {}),
                extendPrototype(
                  [BaseElement, TransformElement, HierarchyElement, FrameElement],
                  NullElement
                ),
                extendPrototype([BaseRenderer], SVGRendererBase),
                (SVGRendererBase.prototype.createNull = function (e) {
                  return new NullElement(e, this.globalData, this);
                }),
                (SVGRendererBase.prototype.createShape = function (e) {
                  return new SVGShapeElement(e, this.globalData, this);
                }),
                (SVGRendererBase.prototype.createText = function (e) {
                  return new SVGTextLottieElement(e, this.globalData, this);
                }),
                (SVGRendererBase.prototype.createImage = function (e) {
                  return new IImageElement(e, this.globalData, this);
                }),
                (SVGRendererBase.prototype.createSolid = function (e) {
                  return new ISolidElement(e, this.globalData, this);
                }),
                (SVGRendererBase.prototype.configAnimation = function (e) {
                  this.svgElement.setAttribute(
                    "xmlns",
                    "http://www.w3.org/2000/svg"
                  ),
                    this.svgElement.setAttribute(
                      "xmlns:xlink",
                      "http://www.w3.org/1999/xlink"
                    ),
                    this.renderConfig.viewBoxSize
                      ? this.svgElement.setAttribute(
                          "viewBox",
                          this.renderConfig.viewBoxSize
                        )
                      : this.svgElement.setAttribute(
                          "viewBox",
                          "0 0 " + e.w + " " + e.h
                        ),
                    this.renderConfig.viewBoxOnly ||
                      (this.svgElement.setAttribute("width", e.w),
                      this.svgElement.setAttribute("height", e.h),
                      (this.svgElement.style.width = "100%"),
                      (this.svgElement.style.height = "100%"),
                      (this.svgElement.style.transform = "translate3d(0,0,0)"),
                      (this.svgElement.style.contentVisibility =
                        this.renderConfig.contentVisibility)),
                    this.renderConfig.width &&
                      this.svgElement.setAttribute(
                        "width",
                        this.renderConfig.width
                      ),
                    this.renderConfig.height &&
                      this.svgElement.setAttribute(
                        "height",
                        this.renderConfig.height
                      ),
                    this.renderConfig.className &&
                      this.svgElement.setAttribute(
                        "class",
                        this.renderConfig.className
                      ),
                    this.renderConfig.id &&
                      this.svgElement.setAttribute("id", this.renderConfig.id),
                    void 0 !== this.renderConfig.focusable &&
                      this.svgElement.setAttribute(
                        "focusable",
                        this.renderConfig.focusable
                      ),
                    this.svgElement.setAttribute(
                      "preserveAspectRatio",
                      this.renderConfig.preserveAspectRatio
                    ),
                    this.animationItem.wrapper.appendChild(this.svgElement);
                  var t = this.globalData.defs;
                  this.setupGlobalData(e, t),
                    (this.globalData.progressiveLoad =
                      this.renderConfig.progressiveLoad),
                    (this.data = e);
                  var n = createNS("clipPath"),
                    r = createNS("rect");
                  r.setAttribute("width", e.w),
                    r.setAttribute("height", e.h),
                    r.setAttribute("x", 0),
                    r.setAttribute("y", 0);
                  var i = createElementID();
                  n.setAttribute("id", i),
                    n.appendChild(r),
                    this.layerElement.setAttribute(
                      "clip-path",
                      "url(" + getLocationHref() + "#" + i + ")"
                    ),
                    t.appendChild(n),
                    (this.layers = e.layers),
                    (this.elements = createSizedArray(e.layers.length));
                }),
                (SVGRendererBase.prototype.destroy = function () {
                  var e;
                  this.animationItem.wrapper &&
                    (this.animationItem.wrapper.innerText = ""),
                    (this.layerElement = null),
                    (this.globalData.defs = null);
                  var t = this.layers ? this.layers.length : 0;
                  for (e = 0; e < t; e += 1)
                    this.elements[e] &&
                      this.elements[e].destroy &&
                      this.elements[e].destroy();
                  (this.elements.length = 0),
                    (this.destroyed = !0),
                    (this.animationItem = null);
                }),
                (SVGRendererBase.prototype.updateContainerSize = function () {}),
                (SVGRendererBase.prototype.findIndexByInd = function (e) {
                  var t = 0,
                    n = this.layers.length;
                  for (t = 0; t < n; t += 1)
                    if (this.layers[t].ind === e) return t;
                  return -1;
                }),
                (SVGRendererBase.prototype.buildItem = function (e) {
                  var t = this.elements;
                  if (!t[e] && 99 !== this.layers[e].ty) {
                    t[e] = !0;
                    var n = this.createItem(this.layers[e]);
                    if (
                      ((t[e] = n),
                      getExpressionsPlugin() &&
                        (0 === this.layers[e].ty &&
                          this.globalData.projectInterface.registerComposition(n),
                        n.initExpressions()),
                      this.appendElementInPos(n, e),
                      this.layers[e].tt)
                    ) {
                      var r =
                        "tp" in this.layers[e]
                          ? this.findIndexByInd(this.layers[e].tp)
                          : e - 1;
                      if (-1 === r) return;
                      if (this.elements[r] && !0 !== this.elements[r]) {
                        var i = t[r].getMatte(this.layers[e].tt);
                        n.setMatte(i);
                      } else this.buildItem(r), this.addPendingElement(n);
                    }
                  }
                }),
                (SVGRendererBase.prototype.checkPendingElements = function () {
                  for (; this.pendingElements.length; ) {
                    var e = this.pendingElements.pop();
                    if ((e.checkParenting(), e.data.tt))
                      for (var t = 0, n = this.elements.length; t < n; ) {
                        if (this.elements[t] === e) {
                          var r =
                              "tp" in e.data
                                ? this.findIndexByInd(e.data.tp)
                                : t - 1,
                            i = this.elements[r].getMatte(this.layers[t].tt);
                          e.setMatte(i);
                          break;
                        }
                        t += 1;
                      }
                  }
                }),
                (SVGRendererBase.prototype.renderFrame = function (e) {
                  if (this.renderedFrame !== e && !this.destroyed) {
                    var t;
                    null === e
                      ? (e = this.renderedFrame)
                      : (this.renderedFrame = e),
                      (this.globalData.frameNum = e),
                      (this.globalData.frameId += 1),
                      (this.globalData.projectInterface.currentFrame = e),
                      (this.globalData._mdf = !1);
                    var n = this.layers.length;
                    for (
                      this.completeLayers || this.checkLayers(e), t = n - 1;
                      t >= 0;
                      t -= 1
                    )
                      (this.completeLayers || this.elements[t]) &&
                        this.elements[t].prepareFrame(e - this.layers[t].st);
                    if (this.globalData._mdf)
                      for (t = 0; t < n; t += 1)
                        (this.completeLayers || this.elements[t]) &&
                          this.elements[t].renderFrame();
                  }
                }),
                (SVGRendererBase.prototype.appendElementInPos = function (e, t) {
                  var n = e.getBaseElement();
                  if (n) {
                    for (var r, i = 0; i < t; )
                      this.elements[i] &&
                        !0 !== this.elements[i] &&
                        this.elements[i].getBaseElement() &&
                        (r = this.elements[i].getBaseElement()),
                        (i += 1);
                    r
                      ? this.layerElement.insertBefore(n, r)
                      : this.layerElement.appendChild(n);
                  }
                }),
                (SVGRendererBase.prototype.hide = function () {
                  this.layerElement.style.display = "none";
                }),
                (SVGRendererBase.prototype.show = function () {
                  this.layerElement.style.display = "block";
                }),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableDOMElement
                  ],
                  ICompElement
                ),
                (ICompElement.prototype.initElement = function (e, t, n) {
                  this.initFrame(),
                    this.initBaseData(e, t, n),
                    this.initTransform(e, t, n),
                    this.initRenderable(),
                    this.initHierarchy(),
                    this.initRendererElement(),
                    this.createContainerElements(),
                    this.createRenderableComponents(),
                    (!this.data.xt && t.progressiveLoad) || this.buildAllItems(),
                    this.hide();
                }),
                (ICompElement.prototype.prepareFrame = function (e) {
                  if (
                    ((this._mdf = !1),
                    this.prepareRenderableFrame(e),
                    this.prepareProperties(e, this.isInRange),
                    this.isInRange || this.data.xt)
                  ) {
                    if (this.tm._placeholder)
                      this.renderedFrame = e / this.data.sr;
                    else {
                      var t = this.tm.v;
                      t === this.data.op && (t = this.data.op - 1),
                        (this.renderedFrame = t);
                    }
                    var n,
                      r = this.elements.length;
                    for (
                      this.completeLayers || this.checkLayers(this.renderedFrame),
                        n = r - 1;
                      n >= 0;
                      n -= 1
                    )
                      (this.completeLayers || this.elements[n]) &&
                        (this.elements[n].prepareFrame(
                          this.renderedFrame - this.layers[n].st
                        ),
                        this.elements[n]._mdf && (this._mdf = !0));
                  }
                }),
                (ICompElement.prototype.renderInnerContent = function () {
                  var e,
                    t = this.layers.length;
                  for (e = 0; e < t; e += 1)
                    (this.completeLayers || this.elements[e]) &&
                      this.elements[e].renderFrame();
                }),
                (ICompElement.prototype.setElements = function (e) {
                  this.elements = e;
                }),
                (ICompElement.prototype.getElements = function () {
                  return this.elements;
                }),
                (ICompElement.prototype.destroyElements = function () {
                  var e,
                    t = this.layers.length;
                  for (e = 0; e < t; e += 1)
                    this.elements[e] && this.elements[e].destroy();
                }),
                (ICompElement.prototype.destroy = function () {
                  this.destroyElements(), this.destroyBaseElement();
                }),
                extendPrototype(
                  [SVGRendererBase, ICompElement, SVGBaseElement],
                  SVGCompElement
                ),
                (SVGCompElement.prototype.createComp = function (e) {
                  return new SVGCompElement(e, this.globalData, this);
                }),
                extendPrototype([SVGRendererBase], SVGRenderer),
                (SVGRenderer.prototype.createComp = function (e) {
                  return new SVGCompElement(e, this.globalData, this);
                }),
                (ShapeTransformManager.prototype = {
                  addTransformSequence: function (e) {
                    var t,
                      n = e.length,
                      r = "_";
                    for (t = 0; t < n; t += 1) r += e[t].transform.key + "_";
                    var i = this.sequences[r];
                    return (
                      i ||
                        ((i = {
                          transforms: [].concat(e),
                          finalTransform: new Matrix(),
                          _mdf: !1
                        }),
                        (this.sequences[r] = i),
                        this.sequenceList.push(i)),
                      i
                    );
                  },
                  processSequence: function (e, t) {
                    for (
                      var n = 0, r = e.transforms.length, i = t;
                      n < r && !t;
  
                    ) {
                      if (e.transforms[n].transform.mProps._mdf) {
                        i = !0;
                        break;
                      }
                      n += 1;
                    }
                    if (i)
                      for (e.finalTransform.reset(), n = r - 1; n >= 0; n -= 1)
                        e.finalTransform.multiply(
                          e.transforms[n].transform.mProps.v
                        );
                    e._mdf = i;
                  },
                  processSequences: function (e) {
                    var t,
                      n = this.sequenceList.length;
                    for (t = 0; t < n; t += 1)
                      this.processSequence(this.sequenceList[t], e);
                  },
                  getNewKey: function () {
                    return (
                      (this.transform_key_count += 1),
                      "_" + this.transform_key_count
                    );
                  }
                });
              var lumaLoader = function () {
                var e = "__lottie_element_luma_buffer",
                  t = null,
                  n = null,
                  r = null;
                function i() {
                  var i, a, s;
                  t ||
                    ((i = createNS("svg")),
                    (a = createNS("filter")),
                    (s = createNS("feColorMatrix")),
                    a.setAttribute("id", e),
                    s.setAttribute("type", "matrix"),
                    s.setAttribute("color-interpolation-filters", "sRGB"),
                    s.setAttribute(
                      "values",
                      "0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"
                    ),
                    a.appendChild(s),
                    i.appendChild(a),
                    i.setAttribute("id", e + "_svg"),
                    featureSupport.svgLumaHidden && (i.style.display = "none"),
                    (r = i),
                    document.body.appendChild(r),
                    (t = createTag("canvas")),
                    ((n = t.getContext("2d")).filter = "url(#" + e + ")"),
                    (n.fillStyle = "rgba(0,0,0,0)"),
                    n.fillRect(0, 0, 1, 1));
                }
                return {
                  load: i,
                  get: function (r) {
                    return (
                      t || i(),
                      (t.width = r.width),
                      (t.height = r.height),
                      (n.filter = "url(#" + e + ")"),
                      t
                    );
                  }
                };
              };
              function createCanvas(e, t) {
                if (featureSupport.offscreenCanvas)
                  return new OffscreenCanvas(e, t);
                var n = createTag("canvas");
                return (n.width = e), (n.height = t), n;
              }
              var assetLoader = {
                  loadLumaCanvas: lumaLoader.load,
                  getLumaCanvas: lumaLoader.get,
                  createCanvas
                },
                registeredEffects = {};
              function CVEffects(e) {
                var t,
                  n,
                  r = e.data.ef ? e.data.ef.length : 0;
                for (this.filters = [], t = 0; t < r; t += 1) {
                  n = null;
                  var i = e.data.ef[t].ty;
                  registeredEffects[i] &&
                    (n = new (0, registeredEffects[i].effect)(
                      e.effectsManager.effectElements[t],
                      e
                    )),
                    n && this.filters.push(n);
                }
                this.filters.length && e.addRenderableComponent(this);
              }
              function registerEffect(e, t) {
                registeredEffects[e] = { effect: t };
              }
              function CVMaskElement(e, t) {
                var n;
                (this.data = e),
                  (this.element = t),
                  (this.masksProperties = this.data.masksProperties || []),
                  (this.viewData = createSizedArray(this.masksProperties.length));
                var r = this.masksProperties.length,
                  i = !1;
                for (n = 0; n < r; n += 1)
                  "n" !== this.masksProperties[n].mode && (i = !0),
                    (this.viewData[n] = ShapePropertyFactory.getShapeProp(
                      this.element,
                      this.masksProperties[n],
                      3
                    ));
                (this.hasMasks = i),
                  i && this.element.addRenderableComponent(this);
              }
              function CVBaseElement() {}
              (CVEffects.prototype.renderFrame = function (e) {
                var t,
                  n = this.filters.length;
                for (t = 0; t < n; t += 1) this.filters[t].renderFrame(e);
              }),
                (CVEffects.prototype.getEffects = function (e) {
                  var t,
                    n = this.filters.length,
                    r = [];
                  for (t = 0; t < n; t += 1)
                    this.filters[t].type === e && r.push(this.filters[t]);
                  return r;
                }),
                (CVMaskElement.prototype.renderFrame = function () {
                  if (this.hasMasks) {
                    var e,
                      t,
                      n,
                      r,
                      i = this.element.finalTransform.mat,
                      a = this.element.canvasContext,
                      s = this.masksProperties.length;
                    for (a.beginPath(), e = 0; e < s; e += 1)
                      if ("n" !== this.masksProperties[e].mode) {
                        var o;
                        this.masksProperties[e].inv &&
                          (a.moveTo(0, 0),
                          a.lineTo(this.element.globalData.compSize.w, 0),
                          a.lineTo(
                            this.element.globalData.compSize.w,
                            this.element.globalData.compSize.h
                          ),
                          a.lineTo(0, this.element.globalData.compSize.h),
                          a.lineTo(0, 0)),
                          (r = this.viewData[e].v),
                          (t = i.applyToPointArray(r.v[0][0], r.v[0][1], 0)),
                          a.moveTo(t[0], t[1]);
                        var l = r._length;
                        for (o = 1; o < l; o += 1)
                          (n = i.applyToTriplePoints(r.o[o - 1], r.i[o], r.v[o])),
                            a.bezierCurveTo(n[0], n[1], n[2], n[3], n[4], n[5]);
                        (n = i.applyToTriplePoints(r.o[o - 1], r.i[0], r.v[0])),
                          a.bezierCurveTo(n[0], n[1], n[2], n[3], n[4], n[5]);
                      }
                    this.element.globalData.renderer.save(!0), a.clip();
                  }
                }),
                (CVMaskElement.prototype.getMaskProperty =
                  MaskElement.prototype.getMaskProperty),
                (CVMaskElement.prototype.destroy = function () {
                  this.element = null;
                });
              var operationsMap = {
                1: "source-in",
                2: "source-out",
                3: "source-in",
                4: "source-out"
              };
              function CVShapeData(e, t, n, r) {
                (this.styledShapes = []), (this.tr = [0, 0, 0, 0, 0, 0]);
                var i,
                  a = 4;
                "rc" === t.ty
                  ? (a = 5)
                  : "el" === t.ty
                  ? (a = 6)
                  : "sr" === t.ty && (a = 7),
                  (this.sh = ShapePropertyFactory.getShapeProp(e, t, a, e));
                var s,
                  o = n.length;
                for (i = 0; i < o; i += 1)
                  n[i].closed ||
                    ((s = {
                      transforms: r.addTransformSequence(n[i].transforms),
                      trNodes: []
                    }),
                    this.styledShapes.push(s),
                    n[i].elements.push(s));
              }
              function CVShapeElement(e, t, n) {
                (this.shapes = []),
                  (this.shapesData = e.shapes),
                  (this.stylesList = []),
                  (this.itemsData = []),
                  (this.prevViewData = []),
                  (this.shapeModifiers = []),
                  (this.processedElements = []),
                  (this.transformsManager = new ShapeTransformManager()),
                  this.initElement(e, t, n);
              }
              function CVTextElement(e, t, n) {
                (this.textSpans = []),
                  (this.yOffset = 0),
                  (this.fillColorAnim = !1),
                  (this.strokeColorAnim = !1),
                  (this.strokeWidthAnim = !1),
                  (this.stroke = !1),
                  (this.fill = !1),
                  (this.justifyOffset = 0),
                  (this.currentRender = null),
                  (this.renderType = "canvas"),
                  (this.values = {
                    fill: "rgba(0,0,0,0)",
                    stroke: "rgba(0,0,0,0)",
                    sWidth: 0,
                    fValue: ""
                  }),
                  this.initElement(e, t, n);
              }
              function CVImageElement(e, t, n) {
                (this.assetData = t.getAssetData(e.refId)),
                  (this.img = t.imageLoader.getAsset(this.assetData)),
                  this.initElement(e, t, n);
              }
              function CVSolidElement(e, t, n) {
                this.initElement(e, t, n);
              }
              function CanvasRendererBase() {}
              function CanvasContext() {
                (this.opacity = -1),
                  (this.transform = createTypedArray("float32", 16)),
                  (this.fillStyle = ""),
                  (this.strokeStyle = ""),
                  (this.lineWidth = ""),
                  (this.lineCap = ""),
                  (this.lineJoin = ""),
                  (this.miterLimit = ""),
                  (this.id = Math.random());
              }
              function CVContextData() {
                var e;
                for (
                  this.stack = [],
                    this.cArrPos = 0,
                    this.cTr = new Matrix(),
                    e = 0;
                  e < 15;
                  e += 1
                ) {
                  var t = new CanvasContext();
                  this.stack[e] = t;
                }
                (this._length = 15),
                  (this.nativeContext = null),
                  (this.transformMat = new Matrix()),
                  (this.currentOpacity = 1),
                  (this.currentFillStyle = ""),
                  (this.appliedFillStyle = ""),
                  (this.currentStrokeStyle = ""),
                  (this.appliedStrokeStyle = ""),
                  (this.currentLineWidth = ""),
                  (this.appliedLineWidth = ""),
                  (this.currentLineCap = ""),
                  (this.appliedLineCap = ""),
                  (this.currentLineJoin = ""),
                  (this.appliedLineJoin = ""),
                  (this.appliedMiterLimit = ""),
                  (this.currentMiterLimit = "");
              }
              function CVCompElement(e, t, n) {
                (this.completeLayers = !1),
                  (this.layers = e.layers),
                  (this.pendingElements = []),
                  (this.elements = createSizedArray(this.layers.length)),
                  this.initElement(e, t, n),
                  (this.tm = e.tm
                    ? PropertyFactory.getProp(this, e.tm, 0, t.frameRate, this)
                    : { _placeholder: !0 });
              }
              function CanvasRenderer(e, t) {
                (this.animationItem = e),
                  (this.renderConfig = {
                    clearCanvas: !t || void 0 === t.clearCanvas || t.clearCanvas,
                    context: (t && t.context) || null,
                    progressiveLoad: (t && t.progressiveLoad) || !1,
                    preserveAspectRatio:
                      (t && t.preserveAspectRatio) || "xMidYMid meet",
                    imagePreserveAspectRatio:
                      (t && t.imagePreserveAspectRatio) || "xMidYMid slice",
                    contentVisibility: (t && t.contentVisibility) || "visible",
                    className: (t && t.className) || "",
                    id: (t && t.id) || "",
                    runExpressions:
                      !t || void 0 === t.runExpressions || t.runExpressions
                  }),
                  (this.renderConfig.dpr = (t && t.dpr) || 1),
                  this.animationItem.wrapper &&
                    (this.renderConfig.dpr =
                      (t && t.dpr) || window.devicePixelRatio || 1),
                  (this.renderedFrame = -1),
                  (this.globalData = {
                    frameNum: -1,
                    _mdf: !1,
                    renderConfig: this.renderConfig,
                    currentGlobalAlpha: -1
                  }),
                  (this.contextData = new CVContextData()),
                  (this.elements = []),
                  (this.pendingElements = []),
                  (this.transformMat = new Matrix()),
                  (this.completeLayers = !1),
                  (this.rendererType = "canvas"),
                  this.renderConfig.clearCanvas &&
                    ((this.ctxTransform = this.contextData.transform.bind(
                      this.contextData
                    )),
                    (this.ctxOpacity = this.contextData.opacity.bind(
                      this.contextData
                    )),
                    (this.ctxFillStyle = this.contextData.fillStyle.bind(
                      this.contextData
                    )),
                    (this.ctxStrokeStyle = this.contextData.strokeStyle.bind(
                      this.contextData
                    )),
                    (this.ctxLineWidth = this.contextData.lineWidth.bind(
                      this.contextData
                    )),
                    (this.ctxLineCap = this.contextData.lineCap.bind(
                      this.contextData
                    )),
                    (this.ctxLineJoin = this.contextData.lineJoin.bind(
                      this.contextData
                    )),
                    (this.ctxMiterLimit = this.contextData.miterLimit.bind(
                      this.contextData
                    )),
                    (this.ctxFill = this.contextData.fill.bind(this.contextData)),
                    (this.ctxFillRect = this.contextData.fillRect.bind(
                      this.contextData
                    )),
                    (this.ctxStroke = this.contextData.stroke.bind(
                      this.contextData
                    )),
                    (this.save = this.contextData.save.bind(this.contextData)));
              }
              function HBaseElement() {}
              function HSolidElement(e, t, n) {
                this.initElement(e, t, n);
              }
              function HShapeElement(e, t, n) {
                (this.shapes = []),
                  (this.shapesData = e.shapes),
                  (this.stylesList = []),
                  (this.shapeModifiers = []),
                  (this.itemsData = []),
                  (this.processedElements = []),
                  (this.animatedContents = []),
                  (this.shapesContainer = createNS("g")),
                  this.initElement(e, t, n),
                  (this.prevViewData = []),
                  (this.currentBBox = { x: 999999, y: -999999, h: 0, w: 0 });
              }
              function HTextElement(e, t, n) {
                (this.textSpans = []),
                  (this.textPaths = []),
                  (this.currentBBox = { x: 999999, y: -999999, h: 0, w: 0 }),
                  (this.renderType = "svg"),
                  (this.isMasked = !1),
                  this.initElement(e, t, n);
              }
              function HCameraElement(e, t, n) {
                this.initFrame(),
                  this.initBaseData(e, t, n),
                  this.initHierarchy();
                var r = PropertyFactory.getProp;
                if (
                  ((this.pe = r(this, e.pe, 0, 0, this)),
                  e.ks.p.s
                    ? ((this.px = r(this, e.ks.p.x, 1, 0, this)),
                      (this.py = r(this, e.ks.p.y, 1, 0, this)),
                      (this.pz = r(this, e.ks.p.z, 1, 0, this)))
                    : (this.p = r(this, e.ks.p, 1, 0, this)),
                  e.ks.a && (this.a = r(this, e.ks.a, 1, 0, this)),
                  e.ks.or.k.length && e.ks.or.k[0].to)
                ) {
                  var i,
                    a = e.ks.or.k.length;
                  for (i = 0; i < a; i += 1)
                    (e.ks.or.k[i].to = null), (e.ks.or.k[i].ti = null);
                }
                (this.or = r(this, e.ks.or, 1, degToRads, this)),
                  (this.or.sh = !0),
                  (this.rx = r(this, e.ks.rx, 0, degToRads, this)),
                  (this.ry = r(this, e.ks.ry, 0, degToRads, this)),
                  (this.rz = r(this, e.ks.rz, 0, degToRads, this)),
                  (this.mat = new Matrix()),
                  (this._prevMat = new Matrix()),
                  (this._isFirstFrame = !0),
                  (this.finalTransform = { mProp: this });
              }
              function HImageElement(e, t, n) {
                (this.assetData = t.getAssetData(e.refId)),
                  this.initElement(e, t, n);
              }
              function HybridRendererBase(e, t) {
                (this.animationItem = e),
                  (this.layers = null),
                  (this.renderedFrame = -1),
                  (this.renderConfig = {
                    className: (t && t.className) || "",
                    imagePreserveAspectRatio:
                      (t && t.imagePreserveAspectRatio) || "xMidYMid slice",
                    hideOnTransparent: !(t && !1 === t.hideOnTransparent),
                    filterSize: {
                      width: (t && t.filterSize && t.filterSize.width) || "400%",
                      height:
                        (t && t.filterSize && t.filterSize.height) || "400%",
                      x: (t && t.filterSize && t.filterSize.x) || "-100%",
                      y: (t && t.filterSize && t.filterSize.y) || "-100%"
                    }
                  }),
                  (this.globalData = {
                    _mdf: !1,
                    frameNum: -1,
                    renderConfig: this.renderConfig
                  }),
                  (this.pendingElements = []),
                  (this.elements = []),
                  (this.threeDElements = []),
                  (this.destroyed = !1),
                  (this.camera = null),
                  (this.supports3d = !0),
                  (this.rendererType = "html");
              }
              function HCompElement(e, t, n) {
                (this.layers = e.layers),
                  (this.supports3d = !e.hasMask),
                  (this.completeLayers = !1),
                  (this.pendingElements = []),
                  (this.elements = this.layers
                    ? createSizedArray(this.layers.length)
                    : []),
                  this.initElement(e, t, n),
                  (this.tm = e.tm
                    ? PropertyFactory.getProp(this, e.tm, 0, t.frameRate, this)
                    : { _placeholder: !0 });
              }
              function HybridRenderer(e, t) {
                (this.animationItem = e),
                  (this.layers = null),
                  (this.renderedFrame = -1),
                  (this.renderConfig = {
                    className: (t && t.className) || "",
                    imagePreserveAspectRatio:
                      (t && t.imagePreserveAspectRatio) || "xMidYMid slice",
                    hideOnTransparent: !(t && !1 === t.hideOnTransparent),
                    filterSize: {
                      width: (t && t.filterSize && t.filterSize.width) || "400%",
                      height:
                        (t && t.filterSize && t.filterSize.height) || "400%",
                      x: (t && t.filterSize && t.filterSize.x) || "-100%",
                      y: (t && t.filterSize && t.filterSize.y) || "-100%"
                    },
                    runExpressions:
                      !t || void 0 === t.runExpressions || t.runExpressions
                  }),
                  (this.globalData = {
                    _mdf: !1,
                    frameNum: -1,
                    renderConfig: this.renderConfig
                  }),
                  (this.pendingElements = []),
                  (this.elements = []),
                  (this.threeDElements = []),
                  (this.destroyed = !1),
                  (this.camera = null),
                  (this.supports3d = !0),
                  (this.rendererType = "html");
              }
              (CVBaseElement.prototype = {
                createElements: function () {},
                initRendererElement: function () {},
                createContainerElements: function () {
                  if (this.data.tt >= 1) {
                    this.buffers = [];
                    var e = this.globalData.canvasContext,
                      t = assetLoader.createCanvas(
                        e.canvas.width,
                        e.canvas.height
                      );
                    this.buffers.push(t);
                    var n = assetLoader.createCanvas(
                      e.canvas.width,
                      e.canvas.height
                    );
                    this.buffers.push(n),
                      this.data.tt >= 3 &&
                        !document._isProxy &&
                        assetLoader.loadLumaCanvas();
                  }
                  (this.canvasContext = this.globalData.canvasContext),
                    (this.transformCanvas = this.globalData.transformCanvas),
                    (this.renderableEffectsManager = new CVEffects(this)),
                    this.searchEffectTransforms();
                },
                createContent: function () {},
                setBlendMode: function () {
                  var e = this.globalData;
                  if (e.blendMode !== this.data.bm) {
                    e.blendMode = this.data.bm;
                    var t = getBlendMode(this.data.bm);
                    e.canvasContext.globalCompositeOperation = t;
                  }
                },
                createRenderableComponents: function () {
                  (this.maskManager = new CVMaskElement(this.data, this)),
                    (this.transformEffects =
                      this.renderableEffectsManager.getEffects(
                        effectTypes.TRANSFORM_EFFECT
                      ));
                },
                hideElement: function () {
                  this.hidden ||
                    (this.isInRange && !this.isTransparent) ||
                    (this.hidden = !0);
                },
                showElement: function () {
                  this.isInRange &&
                    !this.isTransparent &&
                    ((this.hidden = !1),
                    (this._isFirstFrame = !0),
                    (this.maskManager._isFirstFrame = !0));
                },
                clearCanvas: function (e) {
                  e.clearRect(
                    this.transformCanvas.tx,
                    this.transformCanvas.ty,
                    this.transformCanvas.w * this.transformCanvas.sx,
                    this.transformCanvas.h * this.transformCanvas.sy
                  );
                },
                prepareLayer: function () {
                  if (this.data.tt >= 1) {
                    var e = this.buffers[0].getContext("2d");
                    this.clearCanvas(e),
                      e.drawImage(this.canvasContext.canvas, 0, 0),
                      (this.currentTransform = this.canvasContext.getTransform()),
                      this.canvasContext.setTransform(1, 0, 0, 1, 0, 0),
                      this.clearCanvas(this.canvasContext),
                      this.canvasContext.setTransform(this.currentTransform);
                  }
                },
                exitLayer: function () {
                  if (this.data.tt >= 1) {
                    var e = this.buffers[1],
                      t = e.getContext("2d");
                    if (
                      (this.clearCanvas(t),
                      t.drawImage(this.canvasContext.canvas, 0, 0),
                      this.canvasContext.setTransform(1, 0, 0, 1, 0, 0),
                      this.clearCanvas(this.canvasContext),
                      this.canvasContext.setTransform(this.currentTransform),
                      this.comp
                        .getElementById(
                          "tp" in this.data ? this.data.tp : this.data.ind - 1
                        )
                        .renderFrame(!0),
                      this.canvasContext.setTransform(1, 0, 0, 1, 0, 0),
                      this.data.tt >= 3 && !document._isProxy)
                    ) {
                      var n = assetLoader.getLumaCanvas(
                        this.canvasContext.canvas
                      );
                      n
                        .getContext("2d")
                        .drawImage(this.canvasContext.canvas, 0, 0),
                        this.clearCanvas(this.canvasContext),
                        this.canvasContext.drawImage(n, 0, 0);
                    }
                    (this.canvasContext.globalCompositeOperation =
                      operationsMap[this.data.tt]),
                      this.canvasContext.drawImage(e, 0, 0),
                      (this.canvasContext.globalCompositeOperation =
                        "destination-over"),
                      this.canvasContext.drawImage(this.buffers[0], 0, 0),
                      this.canvasContext.setTransform(this.currentTransform),
                      (this.canvasContext.globalCompositeOperation =
                        "source-over");
                  }
                },
                renderFrame: function (e) {
                  if (
                    !this.hidden &&
                    !this.data.hd &&
                    (1 !== this.data.td || e)
                  ) {
                    this.renderTransform(),
                      this.renderRenderable(),
                      this.renderLocalTransform(),
                      this.setBlendMode();
                    var t = 0 === this.data.ty;
                    this.prepareLayer(),
                      this.globalData.renderer.save(t),
                      this.globalData.renderer.ctxTransform(
                        this.finalTransform.localMat.props
                      ),
                      this.globalData.renderer.ctxOpacity(
                        this.finalTransform.localOpacity
                      ),
                      this.renderInnerContent(),
                      this.globalData.renderer.restore(t),
                      this.exitLayer(),
                      this.maskManager.hasMasks &&
                        this.globalData.renderer.restore(!0),
                      this._isFirstFrame && (this._isFirstFrame = !1);
                  }
                },
                destroy: function () {
                  (this.canvasContext = null),
                    (this.data = null),
                    (this.globalData = null),
                    this.maskManager.destroy();
                },
                mHelper: new Matrix()
              }),
                (CVBaseElement.prototype.hide =
                  CVBaseElement.prototype.hideElement),
                (CVBaseElement.prototype.show =
                  CVBaseElement.prototype.showElement),
                (CVShapeData.prototype.setAsAnimated =
                  SVGShapeData.prototype.setAsAnimated),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    CVBaseElement,
                    IShapeElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableElement
                  ],
                  CVShapeElement
                ),
                (CVShapeElement.prototype.initElement =
                  RenderableDOMElement.prototype.initElement),
                (CVShapeElement.prototype.transformHelper = {
                  opacity: 1,
                  _opMdf: !1
                }),
                (CVShapeElement.prototype.dashResetter = []),
                (CVShapeElement.prototype.createContent = function () {
                  this.searchShapes(
                    this.shapesData,
                    this.itemsData,
                    this.prevViewData,
                    !0,
                    []
                  );
                }),
                (CVShapeElement.prototype.createStyleElement = function (e, t) {
                  var n = {
                      data: e,
                      type: e.ty,
                      preTransforms:
                        this.transformsManager.addTransformSequence(t),
                      transforms: [],
                      elements: [],
                      closed: !0 === e.hd
                    },
                    r = {};
                  if (
                    ("fl" === e.ty || "st" === e.ty
                      ? ((r.c = PropertyFactory.getProp(this, e.c, 1, 255, this)),
                        r.c.k ||
                          (n.co =
                            "rgb(" +
                            bmFloor(r.c.v[0]) +
                            "," +
                            bmFloor(r.c.v[1]) +
                            "," +
                            bmFloor(r.c.v[2]) +
                            ")"))
                      : ("gf" !== e.ty && "gs" !== e.ty) ||
                        ((r.s = PropertyFactory.getProp(
                          this,
                          e.s,
                          1,
                          null,
                          this
                        )),
                        (r.e = PropertyFactory.getProp(this, e.e, 1, null, this)),
                        (r.h = PropertyFactory.getProp(
                          this,
                          e.h || { k: 0 },
                          0,
                          0.01,
                          this
                        )),
                        (r.a = PropertyFactory.getProp(
                          this,
                          e.a || { k: 0 },
                          0,
                          degToRads,
                          this
                        )),
                        (r.g = new GradientProperty(this, e.g, this))),
                    (r.o = PropertyFactory.getProp(this, e.o, 0, 0.01, this)),
                    "st" === e.ty || "gs" === e.ty)
                  ) {
                    if (
                      ((n.lc = lineCapEnum[e.lc || 2]),
                      (n.lj = lineJoinEnum[e.lj || 2]),
                      1 == e.lj && (n.ml = e.ml),
                      (r.w = PropertyFactory.getProp(this, e.w, 0, null, this)),
                      r.w.k || (n.wi = r.w.v),
                      e.d)
                    ) {
                      var i = new DashProperty(this, e.d, "canvas", this);
                      (r.d = i),
                        r.d.k ||
                          ((n.da = r.d.dashArray), (n.do = r.d.dashoffset[0]));
                    }
                  } else n.r = 2 === e.r ? "evenodd" : "nonzero";
                  return this.stylesList.push(n), (r.style = n), r;
                }),
                (CVShapeElement.prototype.createGroupElement = function () {
                  return { it: [], prevViewData: [] };
                }),
                (CVShapeElement.prototype.createTransformElement = function (e) {
                  return {
                    transform: {
                      opacity: 1,
                      _opMdf: !1,
                      key: this.transformsManager.getNewKey(),
                      op: PropertyFactory.getProp(this, e.o, 0, 0.01, this),
                      mProps: TransformPropertyFactory.getTransformProperty(
                        this,
                        e,
                        this
                      )
                    }
                  };
                }),
                (CVShapeElement.prototype.createShapeElement = function (e) {
                  var t = new CVShapeData(
                    this,
                    e,
                    this.stylesList,
                    this.transformsManager
                  );
                  return this.shapes.push(t), this.addShapeToModifiers(t), t;
                }),
                (CVShapeElement.prototype.reloadShapes = function () {
                  var e;
                  this._isFirstFrame = !0;
                  var t = this.itemsData.length;
                  for (e = 0; e < t; e += 1)
                    this.prevViewData[e] = this.itemsData[e];
                  for (
                    this.searchShapes(
                      this.shapesData,
                      this.itemsData,
                      this.prevViewData,
                      !0,
                      []
                    ),
                      t = this.dynamicProperties.length,
                      e = 0;
                    e < t;
                    e += 1
                  )
                    this.dynamicProperties[e].getValue();
                  this.renderModifiers(),
                    this.transformsManager.processSequences(this._isFirstFrame);
                }),
                (CVShapeElement.prototype.addTransformToStyleList = function (e) {
                  var t,
                    n = this.stylesList.length;
                  for (t = 0; t < n; t += 1)
                    this.stylesList[t].closed ||
                      this.stylesList[t].transforms.push(e);
                }),
                (CVShapeElement.prototype.removeTransformFromStyleList =
                  function () {
                    var e,
                      t = this.stylesList.length;
                    for (e = 0; e < t; e += 1)
                      this.stylesList[e].closed ||
                        this.stylesList[e].transforms.pop();
                  }),
                (CVShapeElement.prototype.closeStyles = function (e) {
                  var t,
                    n = e.length;
                  for (t = 0; t < n; t += 1) e[t].closed = !0;
                }),
                (CVShapeElement.prototype.searchShapes = function (
                  e,
                  t,
                  n,
                  r,
                  i
                ) {
                  var a,
                    s,
                    o,
                    l,
                    h,
                    u,
                    c = e.length - 1,
                    d = [],
                    f = [],
                    p = [].concat(i);
                  for (a = c; a >= 0; a -= 1) {
                    if (
                      ((l = this.searchProcessedElement(e[a]))
                        ? (t[a] = n[l - 1])
                        : (e[a]._shouldRender = r),
                      "fl" === e[a].ty ||
                        "st" === e[a].ty ||
                        "gf" === e[a].ty ||
                        "gs" === e[a].ty)
                    )
                      l
                        ? (t[a].style.closed = !1)
                        : (t[a] = this.createStyleElement(e[a], p)),
                        d.push(t[a].style);
                    else if ("gr" === e[a].ty) {
                      if (l)
                        for (o = t[a].it.length, s = 0; s < o; s += 1)
                          t[a].prevViewData[s] = t[a].it[s];
                      else t[a] = this.createGroupElement(e[a]);
                      this.searchShapes(
                        e[a].it,
                        t[a].it,
                        t[a].prevViewData,
                        r,
                        p
                      );
                    } else
                      "tr" === e[a].ty
                        ? (l ||
                            ((u = this.createTransformElement(e[a])), (t[a] = u)),
                          p.push(t[a]),
                          this.addTransformToStyleList(t[a]))
                        : "sh" === e[a].ty ||
                          "rc" === e[a].ty ||
                          "el" === e[a].ty ||
                          "sr" === e[a].ty
                        ? l || (t[a] = this.createShapeElement(e[a]))
                        : "tm" === e[a].ty ||
                          "rd" === e[a].ty ||
                          "pb" === e[a].ty ||
                          "zz" === e[a].ty ||
                          "op" === e[a].ty
                        ? (l
                            ? ((h = t[a]).closed = !1)
                            : ((h = ShapeModifiers.getModifier(e[a].ty)).init(
                                this,
                                e[a]
                              ),
                              (t[a] = h),
                              this.shapeModifiers.push(h)),
                          f.push(h))
                        : "rp" === e[a].ty &&
                          (l
                            ? ((h = t[a]).closed = !0)
                            : ((h = ShapeModifiers.getModifier(e[a].ty)),
                              (t[a] = h),
                              h.init(this, e, a, t),
                              this.shapeModifiers.push(h),
                              (r = !1)),
                          f.push(h));
                    this.addProcessedElement(e[a], a + 1);
                  }
                  for (
                    this.removeTransformFromStyleList(),
                      this.closeStyles(d),
                      c = f.length,
                      a = 0;
                    a < c;
                    a += 1
                  )
                    f[a].closed = !0;
                }),
                (CVShapeElement.prototype.renderInnerContent = function () {
                  (this.transformHelper.opacity = 1),
                    (this.transformHelper._opMdf = !1),
                    this.renderModifiers(),
                    this.transformsManager.processSequences(this._isFirstFrame),
                    this.renderShape(
                      this.transformHelper,
                      this.shapesData,
                      this.itemsData,
                      !0
                    );
                }),
                (CVShapeElement.prototype.renderShapeTransform = function (e, t) {
                  (e._opMdf || t.op._mdf || this._isFirstFrame) &&
                    ((t.opacity = e.opacity),
                    (t.opacity *= t.op.v),
                    (t._opMdf = !0));
                }),
                (CVShapeElement.prototype.drawLayer = function () {
                  var e,
                    t,
                    n,
                    r,
                    i,
                    a,
                    s,
                    o,
                    l,
                    h = this.stylesList.length,
                    u = this.globalData.renderer,
                    c = this.globalData.canvasContext;
                  for (e = 0; e < h; e += 1)
                    if (
                      (("st" !== (o = (l = this.stylesList[e]).type) &&
                        "gs" !== o) ||
                        0 !== l.wi) &&
                      l.data._shouldRender &&
                      0 !== l.coOp &&
                      0 !== this.globalData.currentGlobalAlpha
                    ) {
                      for (
                        u.save(),
                          a = l.elements,
                          "st" === o || "gs" === o
                            ? (u.ctxStrokeStyle("st" === o ? l.co : l.grd),
                              u.ctxLineWidth(l.wi),
                              u.ctxLineCap(l.lc),
                              u.ctxLineJoin(l.lj),
                              u.ctxMiterLimit(l.ml || 0))
                            : u.ctxFillStyle("fl" === o ? l.co : l.grd),
                          u.ctxOpacity(l.coOp),
                          "st" !== o && "gs" !== o && c.beginPath(),
                          u.ctxTransform(l.preTransforms.finalTransform.props),
                          n = a.length,
                          t = 0;
                        t < n;
                        t += 1
                      ) {
                        for (
                          ("st" !== o && "gs" !== o) ||
                            (c.beginPath(),
                            l.da &&
                              (c.setLineDash(l.da), (c.lineDashOffset = l.do))),
                            i = (s = a[t].trNodes).length,
                            r = 0;
                          r < i;
                          r += 1
                        )
                          "m" === s[r].t
                            ? c.moveTo(s[r].p[0], s[r].p[1])
                            : "c" === s[r].t
                            ? c.bezierCurveTo(
                                s[r].pts[0],
                                s[r].pts[1],
                                s[r].pts[2],
                                s[r].pts[3],
                                s[r].pts[4],
                                s[r].pts[5]
                              )
                            : c.closePath();
                        ("st" !== o && "gs" !== o) ||
                          (u.ctxStroke(),
                          l.da && c.setLineDash(this.dashResetter));
                      }
                      "st" !== o &&
                        "gs" !== o &&
                        this.globalData.renderer.ctxFill(l.r),
                        u.restore();
                    }
                }),
                (CVShapeElement.prototype.renderShape = function (e, t, n, r) {
                  var i, a;
                  for (a = e, i = t.length - 1; i >= 0; i -= 1)
                    "tr" === t[i].ty
                      ? ((a = n[i].transform), this.renderShapeTransform(e, a))
                      : "sh" === t[i].ty ||
                        "el" === t[i].ty ||
                        "rc" === t[i].ty ||
                        "sr" === t[i].ty
                      ? this.renderPath(t[i], n[i])
                      : "fl" === t[i].ty
                      ? this.renderFill(t[i], n[i], a)
                      : "st" === t[i].ty
                      ? this.renderStroke(t[i], n[i], a)
                      : "gf" === t[i].ty || "gs" === t[i].ty
                      ? this.renderGradientFill(t[i], n[i], a)
                      : "gr" === t[i].ty
                      ? this.renderShape(a, t[i].it, n[i].it)
                      : t[i].ty;
                  r && this.drawLayer();
                }),
                (CVShapeElement.prototype.renderStyledShape = function (e, t) {
                  if (this._isFirstFrame || t._mdf || e.transforms._mdf) {
                    var n,
                      r,
                      i,
                      a = e.trNodes,
                      s = t.paths,
                      o = s._length;
                    a.length = 0;
                    var l = e.transforms.finalTransform;
                    for (i = 0; i < o; i += 1) {
                      var h = s.shapes[i];
                      if (h && h.v) {
                        for (r = h._length, n = 1; n < r; n += 1)
                          1 === n &&
                            a.push({
                              t: "m",
                              p: l.applyToPointArray(h.v[0][0], h.v[0][1], 0)
                            }),
                            a.push({
                              t: "c",
                              pts: l.applyToTriplePoints(
                                h.o[n - 1],
                                h.i[n],
                                h.v[n]
                              )
                            });
                        1 === r &&
                          a.push({
                            t: "m",
                            p: l.applyToPointArray(h.v[0][0], h.v[0][1], 0)
                          }),
                          h.c &&
                            r &&
                            (a.push({
                              t: "c",
                              pts: l.applyToTriplePoints(
                                h.o[n - 1],
                                h.i[0],
                                h.v[0]
                              )
                            }),
                            a.push({ t: "z" }));
                      }
                    }
                    e.trNodes = a;
                  }
                }),
                (CVShapeElement.prototype.renderPath = function (e, t) {
                  if (!0 !== e.hd && e._shouldRender) {
                    var n,
                      r = t.styledShapes.length;
                    for (n = 0; n < r; n += 1)
                      this.renderStyledShape(t.styledShapes[n], t.sh);
                  }
                }),
                (CVShapeElement.prototype.renderFill = function (e, t, n) {
                  var r = t.style;
                  (t.c._mdf || this._isFirstFrame) &&
                    (r.co =
                      "rgb(" +
                      bmFloor(t.c.v[0]) +
                      "," +
                      bmFloor(t.c.v[1]) +
                      "," +
                      bmFloor(t.c.v[2]) +
                      ")"),
                    (t.o._mdf || n._opMdf || this._isFirstFrame) &&
                      (r.coOp = t.o.v * n.opacity);
                }),
                (CVShapeElement.prototype.renderGradientFill = function (
                  e,
                  t,
                  n
                ) {
                  var r,
                    i = t.style;
                  if (
                    !i.grd ||
                    t.g._mdf ||
                    t.s._mdf ||
                    t.e._mdf ||
                    (1 !== e.t && (t.h._mdf || t.a._mdf))
                  ) {
                    var a,
                      s = this.globalData.canvasContext,
                      o = t.s.v,
                      l = t.e.v;
                    if (1 === e.t)
                      r = s.createLinearGradient(o[0], o[1], l[0], l[1]);
                    else {
                      var h = Math.sqrt(
                          Math.pow(o[0] - l[0], 2) + Math.pow(o[1] - l[1], 2)
                        ),
                        u = Math.atan2(l[1] - o[1], l[0] - o[0]),
                        c = t.h.v;
                      c >= 1 ? (c = 0.99) : c <= -1 && (c = -0.99);
                      var d = h * c,
                        f = Math.cos(u + t.a.v) * d + o[0],
                        p = Math.sin(u + t.a.v) * d + o[1];
                      r = s.createRadialGradient(f, p, 0, o[0], o[1], h);
                    }
                    var m = e.g.p,
                      g = t.g.c,
                      v = 1;
                    for (a = 0; a < m; a += 1)
                      t.g._hasOpacity &&
                        t.g._collapsable &&
                        (v = t.g.o[2 * a + 1]),
                        r.addColorStop(
                          g[4 * a] / 100,
                          "rgba(" +
                            g[4 * a + 1] +
                            "," +
                            g[4 * a + 2] +
                            "," +
                            g[4 * a + 3] +
                            "," +
                            v +
                            ")"
                        );
                    i.grd = r;
                  }
                  i.coOp = t.o.v * n.opacity;
                }),
                (CVShapeElement.prototype.renderStroke = function (e, t, n) {
                  var r = t.style,
                    i = t.d;
                  i &&
                    (i._mdf || this._isFirstFrame) &&
                    ((r.da = i.dashArray), (r.do = i.dashoffset[0])),
                    (t.c._mdf || this._isFirstFrame) &&
                      (r.co =
                        "rgb(" +
                        bmFloor(t.c.v[0]) +
                        "," +
                        bmFloor(t.c.v[1]) +
                        "," +
                        bmFloor(t.c.v[2]) +
                        ")"),
                    (t.o._mdf || n._opMdf || this._isFirstFrame) &&
                      (r.coOp = t.o.v * n.opacity),
                    (t.w._mdf || this._isFirstFrame) && (r.wi = t.w.v);
                }),
                (CVShapeElement.prototype.destroy = function () {
                  (this.shapesData = null),
                    (this.globalData = null),
                    (this.canvasContext = null),
                    (this.stylesList.length = 0),
                    (this.itemsData.length = 0);
                }),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    CVBaseElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableElement,
                    ITextElement
                  ],
                  CVTextElement
                ),
                (CVTextElement.prototype.tHelper =
                  createTag("canvas").getContext("2d")),
                (CVTextElement.prototype.buildNewText = function () {
                  var e = this.textProperty.currentData;
                  this.renderedLetters = createSizedArray(e.l ? e.l.length : 0);
                  var t = !1;
                  e.fc
                    ? ((t = !0), (this.values.fill = this.buildColor(e.fc)))
                    : (this.values.fill = "rgba(0,0,0,0)"),
                    (this.fill = t);
                  var n = !1;
                  e.sc &&
                    ((n = !0),
                    (this.values.stroke = this.buildColor(e.sc)),
                    (this.values.sWidth = e.sw));
                  var r,
                    i,
                    a,
                    s,
                    o,
                    l,
                    h,
                    u,
                    c,
                    d,
                    f,
                    p,
                    m = this.globalData.fontManager.getFontByName(e.f),
                    g = e.l,
                    v = this.mHelper;
                  (this.stroke = n),
                    (this.values.fValue =
                      e.finalSize +
                      "px " +
                      this.globalData.fontManager.getFontByName(e.f).fFamily),
                    (i = e.finalText.length);
                  var y = this.data.singleShape,
                    _ = 0.001 * e.tr * e.finalSize,
                    b = 0,
                    x = 0,
                    S = !0,
                    E = 0;
                  for (r = 0; r < i; r += 1) {
                    (s =
                      ((a = this.globalData.fontManager.getCharData(
                        e.finalText[r],
                        m.fStyle,
                        this.globalData.fontManager.getFontByName(e.f).fFamily
                      )) &&
                        a.data) ||
                      {}),
                      v.reset(),
                      y &&
                        g[r].n &&
                        ((b = -_), (x += e.yOffset), (x += S ? 1 : 0), (S = !1)),
                      (c = (h = s.shapes ? s.shapes[0].it : []).length),
                      v.scale(e.finalSize / 100, e.finalSize / 100),
                      y &&
                        this.applyTextPropertiesToMatrix(e, v, g[r].line, b, x),
                      (f = createSizedArray(c - 1));
                    var w = 0;
                    for (u = 0; u < c; u += 1)
                      if ("sh" === h[u].ty) {
                        for (
                          l = h[u].ks.k.i.length, d = h[u].ks.k, p = [], o = 1;
                          o < l;
                          o += 1
                        )
                          1 === o &&
                            p.push(
                              v.applyToX(d.v[0][0], d.v[0][1], 0),
                              v.applyToY(d.v[0][0], d.v[0][1], 0)
                            ),
                            p.push(
                              v.applyToX(d.o[o - 1][0], d.o[o - 1][1], 0),
                              v.applyToY(d.o[o - 1][0], d.o[o - 1][1], 0),
                              v.applyToX(d.i[o][0], d.i[o][1], 0),
                              v.applyToY(d.i[o][0], d.i[o][1], 0),
                              v.applyToX(d.v[o][0], d.v[o][1], 0),
                              v.applyToY(d.v[o][0], d.v[o][1], 0)
                            );
                        p.push(
                          v.applyToX(d.o[o - 1][0], d.o[o - 1][1], 0),
                          v.applyToY(d.o[o - 1][0], d.o[o - 1][1], 0),
                          v.applyToX(d.i[0][0], d.i[0][1], 0),
                          v.applyToY(d.i[0][0], d.i[0][1], 0),
                          v.applyToX(d.v[0][0], d.v[0][1], 0),
                          v.applyToY(d.v[0][0], d.v[0][1], 0)
                        ),
                          (f[w] = p),
                          (w += 1);
                      }
                    y && ((b += g[r].l), (b += _)),
                      this.textSpans[E]
                        ? (this.textSpans[E].elem = f)
                        : (this.textSpans[E] = { elem: f }),
                      (E += 1);
                  }
                }),
                (CVTextElement.prototype.renderInnerContent = function () {
                  var e, t, n, r, i, a;
                  this.validateText(),
                    (this.canvasContext.font = this.values.fValue),
                    this.globalData.renderer.ctxLineCap("butt"),
                    this.globalData.renderer.ctxLineJoin("miter"),
                    this.globalData.renderer.ctxMiterLimit(4),
                    this.data.singleShape ||
                      this.textAnimator.getMeasures(
                        this.textProperty.currentData,
                        this.lettersChangedFlag
                      );
                  var s,
                    o = this.textAnimator.renderedLetters,
                    l = this.textProperty.currentData.l;
                  t = l.length;
                  var h,
                    u,
                    c = null,
                    d = null,
                    f = null,
                    p = this.globalData.renderer;
                  for (e = 0; e < t; e += 1)
                    if (!l[e].n) {
                      if (
                        ((s = o[e]) &&
                          (p.save(), p.ctxTransform(s.p), p.ctxOpacity(s.o)),
                        this.fill)
                      ) {
                        for (
                          s && s.fc
                            ? c !== s.fc && (p.ctxFillStyle(s.fc), (c = s.fc))
                            : c !== this.values.fill &&
                              ((c = this.values.fill),
                              p.ctxFillStyle(this.values.fill)),
                            r = (h = this.textSpans[e].elem).length,
                            this.globalData.canvasContext.beginPath(),
                            n = 0;
                          n < r;
                          n += 1
                        )
                          for (
                            a = (u = h[n]).length,
                              this.globalData.canvasContext.moveTo(u[0], u[1]),
                              i = 2;
                            i < a;
                            i += 6
                          )
                            this.globalData.canvasContext.bezierCurveTo(
                              u[i],
                              u[i + 1],
                              u[i + 2],
                              u[i + 3],
                              u[i + 4],
                              u[i + 5]
                            );
                        this.globalData.canvasContext.closePath(), p.ctxFill();
                      }
                      if (this.stroke) {
                        for (
                          s && s.sw
                            ? f !== s.sw && ((f = s.sw), p.ctxLineWidth(s.sw))
                            : f !== this.values.sWidth &&
                              ((f = this.values.sWidth),
                              p.ctxLineWidth(this.values.sWidth)),
                            s && s.sc
                              ? d !== s.sc && ((d = s.sc), p.ctxStrokeStyle(s.sc))
                              : d !== this.values.stroke &&
                                ((d = this.values.stroke),
                                p.ctxStrokeStyle(this.values.stroke)),
                            r = (h = this.textSpans[e].elem).length,
                            this.globalData.canvasContext.beginPath(),
                            n = 0;
                          n < r;
                          n += 1
                        )
                          for (
                            a = (u = h[n]).length,
                              this.globalData.canvasContext.moveTo(u[0], u[1]),
                              i = 2;
                            i < a;
                            i += 6
                          )
                            this.globalData.canvasContext.bezierCurveTo(
                              u[i],
                              u[i + 1],
                              u[i + 2],
                              u[i + 3],
                              u[i + 4],
                              u[i + 5]
                            );
                        this.globalData.canvasContext.closePath(), p.ctxStroke();
                      }
                      s && this.globalData.renderer.restore();
                    }
                }),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    CVBaseElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableElement
                  ],
                  CVImageElement
                ),
                (CVImageElement.prototype.initElement =
                  SVGShapeElement.prototype.initElement),
                (CVImageElement.prototype.prepareFrame =
                  IImageElement.prototype.prepareFrame),
                (CVImageElement.prototype.createContent = function () {
                  if (
                    this.img.width &&
                    (this.assetData.w !== this.img.width ||
                      this.assetData.h !== this.img.height)
                  ) {
                    var e = createTag("canvas");
                    (e.width = this.assetData.w), (e.height = this.assetData.h);
                    var t,
                      n,
                      r = e.getContext("2d"),
                      i = this.img.width,
                      a = this.img.height,
                      s = i / a,
                      o = this.assetData.w / this.assetData.h,
                      l =
                        this.assetData.pr ||
                        this.globalData.renderConfig.imagePreserveAspectRatio;
                    (s > o && "xMidYMid slice" === l) ||
                    (s < o && "xMidYMid slice" !== l)
                      ? (t = (n = a) * o)
                      : (n = (t = i) / o),
                      r.drawImage(
                        this.img,
                        (i - t) / 2,
                        (a - n) / 2,
                        t,
                        n,
                        0,
                        0,
                        this.assetData.w,
                        this.assetData.h
                      ),
                      (this.img = e);
                  }
                }),
                (CVImageElement.prototype.renderInnerContent = function () {
                  this.canvasContext.drawImage(this.img, 0, 0);
                }),
                (CVImageElement.prototype.destroy = function () {
                  this.img = null;
                }),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    CVBaseElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableElement
                  ],
                  CVSolidElement
                ),
                (CVSolidElement.prototype.initElement =
                  SVGShapeElement.prototype.initElement),
                (CVSolidElement.prototype.prepareFrame =
                  IImageElement.prototype.prepareFrame),
                (CVSolidElement.prototype.renderInnerContent = function () {
                  this.globalData.renderer.ctxFillStyle(this.data.sc),
                    this.globalData.renderer.ctxFillRect(
                      0,
                      0,
                      this.data.sw,
                      this.data.sh
                    );
                }),
                extendPrototype([BaseRenderer], CanvasRendererBase),
                (CanvasRendererBase.prototype.createShape = function (e) {
                  return new CVShapeElement(e, this.globalData, this);
                }),
                (CanvasRendererBase.prototype.createText = function (e) {
                  return new CVTextElement(e, this.globalData, this);
                }),
                (CanvasRendererBase.prototype.createImage = function (e) {
                  return new CVImageElement(e, this.globalData, this);
                }),
                (CanvasRendererBase.prototype.createSolid = function (e) {
                  return new CVSolidElement(e, this.globalData, this);
                }),
                (CanvasRendererBase.prototype.createNull =
                  SVGRenderer.prototype.createNull),
                (CanvasRendererBase.prototype.ctxTransform = function (e) {
                  (1 === e[0] &&
                    0 === e[1] &&
                    0 === e[4] &&
                    1 === e[5] &&
                    0 === e[12] &&
                    0 === e[13]) ||
                    this.canvasContext.transform(
                      e[0],
                      e[1],
                      e[4],
                      e[5],
                      e[12],
                      e[13]
                    );
                }),
                (CanvasRendererBase.prototype.ctxOpacity = function (e) {
                  this.canvasContext.globalAlpha *= e < 0 ? 0 : e;
                }),
                (CanvasRendererBase.prototype.ctxFillStyle = function (e) {
                  this.canvasContext.fillStyle = e;
                }),
                (CanvasRendererBase.prototype.ctxStrokeStyle = function (e) {
                  this.canvasContext.strokeStyle = e;
                }),
                (CanvasRendererBase.prototype.ctxLineWidth = function (e) {
                  this.canvasContext.lineWidth = e;
                }),
                (CanvasRendererBase.prototype.ctxLineCap = function (e) {
                  this.canvasContext.lineCap = e;
                }),
                (CanvasRendererBase.prototype.ctxLineJoin = function (e) {
                  this.canvasContext.lineJoin = e;
                }),
                (CanvasRendererBase.prototype.ctxMiterLimit = function (e) {
                  this.canvasContext.miterLimit = e;
                }),
                (CanvasRendererBase.prototype.ctxFill = function (e) {
                  this.canvasContext.fill(e);
                }),
                (CanvasRendererBase.prototype.ctxFillRect = function (
                  e,
                  t,
                  n,
                  r
                ) {
                  this.canvasContext.fillRect(e, t, n, r);
                }),
                (CanvasRendererBase.prototype.ctxStroke = function () {
                  this.canvasContext.stroke();
                }),
                (CanvasRendererBase.prototype.reset = function () {
                  this.renderConfig.clearCanvas
                    ? this.contextData.reset()
                    : this.canvasContext.restore();
                }),
                (CanvasRendererBase.prototype.save = function () {
                  this.canvasContext.save();
                }),
                (CanvasRendererBase.prototype.restore = function (e) {
                  this.renderConfig.clearCanvas
                    ? (e && (this.globalData.blendMode = "source-over"),
                      this.contextData.restore(e))
                    : this.canvasContext.restore();
                }),
                (CanvasRendererBase.prototype.configAnimation = function (e) {
                  if (this.animationItem.wrapper) {
                    this.animationItem.container = createTag("canvas");
                    var t = this.animationItem.container.style;
                    (t.width = "100%"), (t.height = "100%");
                    var n = "0px 0px 0px";
                    (t.transformOrigin = n),
                      (t.mozTransformOrigin = n),
                      (t.webkitTransformOrigin = n),
                      (t["-webkit-transform"] = n),
                      (t.contentVisibility = this.renderConfig.contentVisibility),
                      this.animationItem.wrapper.appendChild(
                        this.animationItem.container
                      ),
                      (this.canvasContext =
                        this.animationItem.container.getContext("2d")),
                      this.renderConfig.className &&
                        this.animationItem.container.setAttribute(
                          "class",
                          this.renderConfig.className
                        ),
                      this.renderConfig.id &&
                        this.animationItem.container.setAttribute(
                          "id",
                          this.renderConfig.id
                        );
                  } else this.canvasContext = this.renderConfig.context;
                  this.contextData.setContext(this.canvasContext),
                    (this.data = e),
                    (this.layers = e.layers),
                    (this.transformCanvas = {
                      w: e.w,
                      h: e.h,
                      sx: 0,
                      sy: 0,
                      tx: 0,
                      ty: 0
                    }),
                    this.setupGlobalData(e, document.body),
                    (this.globalData.canvasContext = this.canvasContext),
                    (this.globalData.renderer = this),
                    (this.globalData.isDashed = !1),
                    (this.globalData.progressiveLoad =
                      this.renderConfig.progressiveLoad),
                    (this.globalData.transformCanvas = this.transformCanvas),
                    (this.elements = createSizedArray(e.layers.length)),
                    this.updateContainerSize();
                }),
                (CanvasRendererBase.prototype.updateContainerSize = function (
                  e,
                  t
                ) {
                  var n, r, i, a;
                  if (
                    (this.reset(),
                    e
                      ? ((n = e),
                        (r = t),
                        (this.canvasContext.canvas.width = n),
                        (this.canvasContext.canvas.height = r))
                      : (this.animationItem.wrapper &&
                        this.animationItem.container
                          ? ((n = this.animationItem.wrapper.offsetWidth),
                            (r = this.animationItem.wrapper.offsetHeight))
                          : ((n = this.canvasContext.canvas.width),
                            (r = this.canvasContext.canvas.height)),
                        (this.canvasContext.canvas.width =
                          n * this.renderConfig.dpr),
                        (this.canvasContext.canvas.height =
                          r * this.renderConfig.dpr)),
                    -1 !==
                      this.renderConfig.preserveAspectRatio.indexOf("meet") ||
                      -1 !==
                        this.renderConfig.preserveAspectRatio.indexOf("slice"))
                  ) {
                    var s = this.renderConfig.preserveAspectRatio.split(" "),
                      o = s[1] || "meet",
                      l = s[0] || "xMidYMid",
                      h = l.substr(0, 4),
                      u = l.substr(4);
                    (i = n / r),
                      ((a = this.transformCanvas.w / this.transformCanvas.h) >
                        i &&
                        "meet" === o) ||
                      (a < i && "slice" === o)
                        ? ((this.transformCanvas.sx =
                            n / (this.transformCanvas.w / this.renderConfig.dpr)),
                          (this.transformCanvas.sy =
                            n / (this.transformCanvas.w / this.renderConfig.dpr)))
                        : ((this.transformCanvas.sx =
                            r / (this.transformCanvas.h / this.renderConfig.dpr)),
                          (this.transformCanvas.sy =
                            r /
                            (this.transformCanvas.h / this.renderConfig.dpr))),
                      (this.transformCanvas.tx =
                        "xMid" === h &&
                        ((a < i && "meet" === o) || (a > i && "slice" === o))
                          ? ((n -
                              this.transformCanvas.w *
                                (r / this.transformCanvas.h)) /
                              2) *
                            this.renderConfig.dpr
                          : "xMax" === h &&
                            ((a < i && "meet" === o) || (a > i && "slice" === o))
                          ? (n -
                              this.transformCanvas.w *
                                (r / this.transformCanvas.h)) *
                            this.renderConfig.dpr
                          : 0),
                      (this.transformCanvas.ty =
                        "YMid" === u &&
                        ((a > i && "meet" === o) || (a < i && "slice" === o))
                          ? ((r -
                              this.transformCanvas.h *
                                (n / this.transformCanvas.w)) /
                              2) *
                            this.renderConfig.dpr
                          : "YMax" === u &&
                            ((a > i && "meet" === o) || (a < i && "slice" === o))
                          ? (r -
                              this.transformCanvas.h *
                                (n / this.transformCanvas.w)) *
                            this.renderConfig.dpr
                          : 0);
                  } else
                    "none" === this.renderConfig.preserveAspectRatio
                      ? ((this.transformCanvas.sx =
                          n / (this.transformCanvas.w / this.renderConfig.dpr)),
                        (this.transformCanvas.sy =
                          r / (this.transformCanvas.h / this.renderConfig.dpr)),
                        (this.transformCanvas.tx = 0),
                        (this.transformCanvas.ty = 0))
                      : ((this.transformCanvas.sx = this.renderConfig.dpr),
                        (this.transformCanvas.sy = this.renderConfig.dpr),
                        (this.transformCanvas.tx = 0),
                        (this.transformCanvas.ty = 0));
                  (this.transformCanvas.props = [
                    this.transformCanvas.sx,
                    0,
                    0,
                    0,
                    0,
                    this.transformCanvas.sy,
                    0,
                    0,
                    0,
                    0,
                    1,
                    0,
                    this.transformCanvas.tx,
                    this.transformCanvas.ty,
                    0,
                    1
                  ]),
                    this.ctxTransform(this.transformCanvas.props),
                    this.canvasContext.beginPath(),
                    this.canvasContext.rect(
                      0,
                      0,
                      this.transformCanvas.w,
                      this.transformCanvas.h
                    ),
                    this.canvasContext.closePath(),
                    this.canvasContext.clip(),
                    this.renderFrame(this.renderedFrame, !0);
                }),
                (CanvasRendererBase.prototype.destroy = function () {
                  var e;
                  for (
                    this.renderConfig.clearCanvas &&
                      this.animationItem.wrapper &&
                      (this.animationItem.wrapper.innerText = ""),
                      e = (this.layers ? this.layers.length : 0) - 1;
                    e >= 0;
                    e -= 1
                  )
                    this.elements[e] &&
                      this.elements[e].destroy &&
                      this.elements[e].destroy();
                  (this.elements.length = 0),
                    (this.globalData.canvasContext = null),
                    (this.animationItem.container = null),
                    (this.destroyed = !0);
                }),
                (CanvasRendererBase.prototype.renderFrame = function (e, t) {
                  if (
                    (this.renderedFrame !== e ||
                      !0 !== this.renderConfig.clearCanvas ||
                      t) &&
                    !this.destroyed &&
                    -1 !== e
                  ) {
                    var n;
                    (this.renderedFrame = e),
                      (this.globalData.frameNum =
                        e - this.animationItem._isFirstFrame),
                      (this.globalData.frameId += 1),
                      (this.globalData._mdf =
                        !this.renderConfig.clearCanvas || t),
                      (this.globalData.projectInterface.currentFrame = e);
                    var r = this.layers.length;
                    for (
                      this.completeLayers || this.checkLayers(e), n = r - 1;
                      n >= 0;
                      n -= 1
                    )
                      (this.completeLayers || this.elements[n]) &&
                        this.elements[n].prepareFrame(e - this.layers[n].st);
                    if (this.globalData._mdf) {
                      for (
                        !0 === this.renderConfig.clearCanvas
                          ? this.canvasContext.clearRect(
                              0,
                              0,
                              this.transformCanvas.w,
                              this.transformCanvas.h
                            )
                          : this.save(),
                          n = r - 1;
                        n >= 0;
                        n -= 1
                      )
                        (this.completeLayers || this.elements[n]) &&
                          this.elements[n].renderFrame();
                      !0 !== this.renderConfig.clearCanvas && this.restore();
                    }
                  }
                }),
                (CanvasRendererBase.prototype.buildItem = function (e) {
                  var t = this.elements;
                  if (!t[e] && 99 !== this.layers[e].ty) {
                    var n = this.createItem(
                      this.layers[e],
                      this,
                      this.globalData
                    );
                    (t[e] = n), n.initExpressions();
                  }
                }),
                (CanvasRendererBase.prototype.checkPendingElements = function () {
                  for (; this.pendingElements.length; )
                    this.pendingElements.pop().checkParenting();
                }),
                (CanvasRendererBase.prototype.hide = function () {
                  this.animationItem.container.style.display = "none";
                }),
                (CanvasRendererBase.prototype.show = function () {
                  this.animationItem.container.style.display = "block";
                }),
                (CVContextData.prototype.duplicate = function () {
                  var e = 2 * this._length,
                    t = 0;
                  for (t = this._length; t < e; t += 1)
                    this.stack[t] = new CanvasContext();
                  this._length = e;
                }),
                (CVContextData.prototype.reset = function () {
                  (this.cArrPos = 0),
                    this.cTr.reset(),
                    (this.stack[this.cArrPos].opacity = 1);
                }),
                (CVContextData.prototype.restore = function (e) {
                  this.cArrPos -= 1;
                  var t,
                    n = this.stack[this.cArrPos],
                    r = n.transform,
                    i = this.cTr.props;
                  for (t = 0; t < 16; t += 1) i[t] = r[t];
                  if (e) {
                    this.nativeContext.restore();
                    var a = this.stack[this.cArrPos + 1];
                    (this.appliedFillStyle = a.fillStyle),
                      (this.appliedStrokeStyle = a.strokeStyle),
                      (this.appliedLineWidth = a.lineWidth),
                      (this.appliedLineCap = a.lineCap),
                      (this.appliedLineJoin = a.lineJoin),
                      (this.appliedMiterLimit = a.miterLimit);
                  }
                  this.nativeContext.setTransform(
                    r[0],
                    r[1],
                    r[4],
                    r[5],
                    r[12],
                    r[13]
                  ),
                    (e ||
                      (-1 !== n.opacity && this.currentOpacity !== n.opacity)) &&
                      ((this.nativeContext.globalAlpha = n.opacity),
                      (this.currentOpacity = n.opacity)),
                    (this.currentFillStyle = n.fillStyle),
                    (this.currentStrokeStyle = n.strokeStyle),
                    (this.currentLineWidth = n.lineWidth),
                    (this.currentLineCap = n.lineCap),
                    (this.currentLineJoin = n.lineJoin),
                    (this.currentMiterLimit = n.miterLimit);
                }),
                (CVContextData.prototype.save = function (e) {
                  e && this.nativeContext.save();
                  var t = this.cTr.props;
                  this._length <= this.cArrPos && this.duplicate();
                  var n,
                    r = this.stack[this.cArrPos];
                  for (n = 0; n < 16; n += 1) r.transform[n] = t[n];
                  this.cArrPos += 1;
                  var i = this.stack[this.cArrPos];
                  (i.opacity = r.opacity),
                    (i.fillStyle = r.fillStyle),
                    (i.strokeStyle = r.strokeStyle),
                    (i.lineWidth = r.lineWidth),
                    (i.lineCap = r.lineCap),
                    (i.lineJoin = r.lineJoin),
                    (i.miterLimit = r.miterLimit);
                }),
                (CVContextData.prototype.setOpacity = function (e) {
                  this.stack[this.cArrPos].opacity = e;
                }),
                (CVContextData.prototype.setContext = function (e) {
                  this.nativeContext = e;
                }),
                (CVContextData.prototype.fillStyle = function (e) {
                  this.stack[this.cArrPos].fillStyle !== e &&
                    ((this.currentFillStyle = e),
                    (this.stack[this.cArrPos].fillStyle = e));
                }),
                (CVContextData.prototype.strokeStyle = function (e) {
                  this.stack[this.cArrPos].strokeStyle !== e &&
                    ((this.currentStrokeStyle = e),
                    (this.stack[this.cArrPos].strokeStyle = e));
                }),
                (CVContextData.prototype.lineWidth = function (e) {
                  this.stack[this.cArrPos].lineWidth !== e &&
                    ((this.currentLineWidth = e),
                    (this.stack[this.cArrPos].lineWidth = e));
                }),
                (CVContextData.prototype.lineCap = function (e) {
                  this.stack[this.cArrPos].lineCap !== e &&
                    ((this.currentLineCap = e),
                    (this.stack[this.cArrPos].lineCap = e));
                }),
                (CVContextData.prototype.lineJoin = function (e) {
                  this.stack[this.cArrPos].lineJoin !== e &&
                    ((this.currentLineJoin = e),
                    (this.stack[this.cArrPos].lineJoin = e));
                }),
                (CVContextData.prototype.miterLimit = function (e) {
                  this.stack[this.cArrPos].miterLimit !== e &&
                    ((this.currentMiterLimit = e),
                    (this.stack[this.cArrPos].miterLimit = e));
                }),
                (CVContextData.prototype.transform = function (e) {
                  this.transformMat.cloneFromProps(e);
                  var t = this.cTr;
                  this.transformMat.multiply(t),
                    t.cloneFromProps(this.transformMat.props);
                  var n = t.props;
                  this.nativeContext.setTransform(
                    n[0],
                    n[1],
                    n[4],
                    n[5],
                    n[12],
                    n[13]
                  );
                }),
                (CVContextData.prototype.opacity = function (e) {
                  var t = this.stack[this.cArrPos].opacity;
                  (t *= e < 0 ? 0 : e),
                    this.stack[this.cArrPos].opacity !== t &&
                      (this.currentOpacity !== e &&
                        ((this.nativeContext.globalAlpha = e),
                        (this.currentOpacity = e)),
                      (this.stack[this.cArrPos].opacity = t));
                }),
                (CVContextData.prototype.fill = function (e) {
                  this.appliedFillStyle !== this.currentFillStyle &&
                    ((this.appliedFillStyle = this.currentFillStyle),
                    (this.nativeContext.fillStyle = this.appliedFillStyle)),
                    this.nativeContext.fill(e);
                }),
                (CVContextData.prototype.fillRect = function (e, t, n, r) {
                  this.appliedFillStyle !== this.currentFillStyle &&
                    ((this.appliedFillStyle = this.currentFillStyle),
                    (this.nativeContext.fillStyle = this.appliedFillStyle)),
                    this.nativeContext.fillRect(e, t, n, r);
                }),
                (CVContextData.prototype.stroke = function () {
                  this.appliedStrokeStyle !== this.currentStrokeStyle &&
                    ((this.appliedStrokeStyle = this.currentStrokeStyle),
                    (this.nativeContext.strokeStyle = this.appliedStrokeStyle)),
                    this.appliedLineWidth !== this.currentLineWidth &&
                      ((this.appliedLineWidth = this.currentLineWidth),
                      (this.nativeContext.lineWidth = this.appliedLineWidth)),
                    this.appliedLineCap !== this.currentLineCap &&
                      ((this.appliedLineCap = this.currentLineCap),
                      (this.nativeContext.lineCap = this.appliedLineCap)),
                    this.appliedLineJoin !== this.currentLineJoin &&
                      ((this.appliedLineJoin = this.currentLineJoin),
                      (this.nativeContext.lineJoin = this.appliedLineJoin)),
                    this.appliedMiterLimit !== this.currentMiterLimit &&
                      ((this.appliedMiterLimit = this.currentMiterLimit),
                      (this.nativeContext.miterLimit = this.appliedMiterLimit)),
                    this.nativeContext.stroke();
                }),
                extendPrototype(
                  [CanvasRendererBase, ICompElement, CVBaseElement],
                  CVCompElement
                ),
                (CVCompElement.prototype.renderInnerContent = function () {
                  var e,
                    t = this.canvasContext;
                  for (
                    t.beginPath(),
                      t.moveTo(0, 0),
                      t.lineTo(this.data.w, 0),
                      t.lineTo(this.data.w, this.data.h),
                      t.lineTo(0, this.data.h),
                      t.lineTo(0, 0),
                      t.clip(),
                      e = this.layers.length - 1;
                    e >= 0;
                    e -= 1
                  )
                    (this.completeLayers || this.elements[e]) &&
                      this.elements[e].renderFrame();
                }),
                (CVCompElement.prototype.destroy = function () {
                  var e;
                  for (e = this.layers.length - 1; e >= 0; e -= 1)
                    this.elements[e] && this.elements[e].destroy();
                  (this.layers = null), (this.elements = null);
                }),
                (CVCompElement.prototype.createComp = function (e) {
                  return new CVCompElement(e, this.globalData, this);
                }),
                extendPrototype([CanvasRendererBase], CanvasRenderer),
                (CanvasRenderer.prototype.createComp = function (e) {
                  return new CVCompElement(e, this.globalData, this);
                }),
                (HBaseElement.prototype = {
                  checkBlendMode: function () {},
                  initRendererElement: function () {
                    (this.baseElement = createTag(this.data.tg || "div")),
                      this.data.hasMask
                        ? ((this.svgElement = createNS("svg")),
                          (this.layerElement = createNS("g")),
                          (this.maskedElement = this.layerElement),
                          this.svgElement.appendChild(this.layerElement),
                          this.baseElement.appendChild(this.svgElement))
                        : (this.layerElement = this.baseElement),
                      styleDiv(this.baseElement);
                  },
                  createContainerElements: function () {
                    (this.renderableEffectsManager = new CVEffects(this)),
                      (this.transformedElement = this.baseElement),
                      (this.maskedElement = this.layerElement),
                      this.data.ln &&
                        this.layerElement.setAttribute("id", this.data.ln),
                      this.data.cl &&
                        this.layerElement.setAttribute("class", this.data.cl),
                      0 !== this.data.bm && this.setBlendMode();
                  },
                  renderElement: function () {
                    var e = this.transformedElement
                      ? this.transformedElement.style
                      : {};
                    if (this.finalTransform._matMdf) {
                      var t = this.finalTransform.mat.toCSS();
                      (e.transform = t), (e.webkitTransform = t);
                    }
                    this.finalTransform._opMdf &&
                      (e.opacity = this.finalTransform.mProp.o.v);
                  },
                  renderFrame: function () {
                    this.data.hd ||
                      this.hidden ||
                      (this.renderTransform(),
                      this.renderRenderable(),
                      this.renderElement(),
                      this.renderInnerContent(),
                      this._isFirstFrame && (this._isFirstFrame = !1));
                  },
                  destroy: function () {
                    (this.layerElement = null),
                      (this.transformedElement = null),
                      this.matteElement && (this.matteElement = null),
                      this.maskManager &&
                        (this.maskManager.destroy(), (this.maskManager = null));
                  },
                  createRenderableComponents: function () {
                    this.maskManager = new MaskElement(
                      this.data,
                      this,
                      this.globalData
                    );
                  },
                  addEffects: function () {},
                  setMatte: function () {}
                }),
                (HBaseElement.prototype.getBaseElement =
                  SVGBaseElement.prototype.getBaseElement),
                (HBaseElement.prototype.destroyBaseElement =
                  HBaseElement.prototype.destroy),
                (HBaseElement.prototype.buildElementParenting =
                  BaseRenderer.prototype.buildElementParenting),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    HBaseElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableDOMElement
                  ],
                  HSolidElement
                ),
                (HSolidElement.prototype.createContent = function () {
                  var e;
                  this.data.hasMask
                    ? ((e = createNS("rect")).setAttribute("width", this.data.sw),
                      e.setAttribute("height", this.data.sh),
                      e.setAttribute("fill", this.data.sc),
                      this.svgElement.setAttribute("width", this.data.sw),
                      this.svgElement.setAttribute("height", this.data.sh))
                    : (((e = createTag("div")).style.width = this.data.sw + "px"),
                      (e.style.height = this.data.sh + "px"),
                      (e.style.backgroundColor = this.data.sc)),
                    this.layerElement.appendChild(e);
                }),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    HSolidElement,
                    SVGShapeElement,
                    HBaseElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableElement
                  ],
                  HShapeElement
                ),
                (HShapeElement.prototype._renderShapeFrame =
                  HShapeElement.prototype.renderInnerContent),
                (HShapeElement.prototype.createContent = function () {
                  var e;
                  if (((this.baseElement.style.fontSize = 0), this.data.hasMask))
                    this.layerElement.appendChild(this.shapesContainer),
                      (e = this.svgElement);
                  else {
                    e = createNS("svg");
                    var t = this.comp.data
                      ? this.comp.data
                      : this.globalData.compSize;
                    e.setAttribute("width", t.w),
                      e.setAttribute("height", t.h),
                      e.appendChild(this.shapesContainer),
                      this.layerElement.appendChild(e);
                  }
                  this.searchShapes(
                    this.shapesData,
                    this.itemsData,
                    this.prevViewData,
                    this.shapesContainer,
                    0,
                    [],
                    !0
                  ),
                    this.filterUniqueShapes(),
                    (this.shapeCont = e);
                }),
                (HShapeElement.prototype.getTransformedPoint = function (e, t) {
                  var n,
                    r = e.length;
                  for (n = 0; n < r; n += 1)
                    t = e[n].mProps.v.applyToPointArray(t[0], t[1], 0);
                  return t;
                }),
                (HShapeElement.prototype.calculateShapeBoundingBox = function (
                  e,
                  t
                ) {
                  var n,
                    r,
                    i,
                    a,
                    s,
                    o = e.sh.v,
                    l = e.transformers,
                    h = o._length;
                  if (!(h <= 1)) {
                    for (n = 0; n < h - 1; n += 1)
                      (r = this.getTransformedPoint(l, o.v[n])),
                        (i = this.getTransformedPoint(l, o.o[n])),
                        (a = this.getTransformedPoint(l, o.i[n + 1])),
                        (s = this.getTransformedPoint(l, o.v[n + 1])),
                        this.checkBounds(r, i, a, s, t);
                    o.c &&
                      ((r = this.getTransformedPoint(l, o.v[n])),
                      (i = this.getTransformedPoint(l, o.o[n])),
                      (a = this.getTransformedPoint(l, o.i[0])),
                      (s = this.getTransformedPoint(l, o.v[0])),
                      this.checkBounds(r, i, a, s, t));
                  }
                }),
                (HShapeElement.prototype.checkBounds = function (e, t, n, r, i) {
                  this.getBoundsOfCurve(e, t, n, r);
                  var a = this.shapeBoundingBox;
                  (i.x = bmMin(a.left, i.x)),
                    (i.xMax = bmMax(a.right, i.xMax)),
                    (i.y = bmMin(a.top, i.y)),
                    (i.yMax = bmMax(a.bottom, i.yMax));
                }),
                (HShapeElement.prototype.shapeBoundingBox = {
                  left: 0,
                  right: 0,
                  top: 0,
                  bottom: 0
                }),
                (HShapeElement.prototype.tempBoundingBox = {
                  x: 0,
                  xMax: 0,
                  y: 0,
                  yMax: 0,
                  width: 0,
                  height: 0
                }),
                (HShapeElement.prototype.getBoundsOfCurve = function (
                  e,
                  t,
                  n,
                  r
                ) {
                  for (
                    var i,
                      a,
                      s,
                      o,
                      l,
                      h,
                      u,
                      c = [
                        [e[0], r[0]],
                        [e[1], r[1]]
                      ],
                      d = 0;
                    d < 2;
                    ++d
                  )
                    (a = 6 * e[d] - 12 * t[d] + 6 * n[d]),
                      (i = -3 * e[d] + 9 * t[d] - 9 * n[d] + 3 * r[d]),
                      (s = 3 * t[d] - 3 * e[d]),
                      (a |= 0),
                      (s |= 0),
                      (0 == (i |= 0) && 0 === a) ||
                        (0 === i
                          ? (o = -s / a) > 0 &&
                            o < 1 &&
                            c[d].push(this.calculateF(o, e, t, n, r, d))
                          : (l = a * a - 4 * s * i) >= 0 &&
                            ((h = (-a + bmSqrt(l)) / (2 * i)) > 0 &&
                              h < 1 &&
                              c[d].push(this.calculateF(h, e, t, n, r, d)),
                            (u = (-a - bmSqrt(l)) / (2 * i)) > 0 &&
                              u < 1 &&
                              c[d].push(this.calculateF(u, e, t, n, r, d))));
                  (this.shapeBoundingBox.left = bmMin.apply(null, c[0])),
                    (this.shapeBoundingBox.top = bmMin.apply(null, c[1])),
                    (this.shapeBoundingBox.right = bmMax.apply(null, c[0])),
                    (this.shapeBoundingBox.bottom = bmMax.apply(null, c[1]));
                }),
                (HShapeElement.prototype.calculateF = function (
                  e,
                  t,
                  n,
                  r,
                  i,
                  a
                ) {
                  return (
                    bmPow(1 - e, 3) * t[a] +
                    3 * bmPow(1 - e, 2) * e * n[a] +
                    3 * (1 - e) * bmPow(e, 2) * r[a] +
                    bmPow(e, 3) * i[a]
                  );
                }),
                (HShapeElement.prototype.calculateBoundingBox = function (e, t) {
                  var n,
                    r = e.length;
                  for (n = 0; n < r; n += 1)
                    e[n] && e[n].sh
                      ? this.calculateShapeBoundingBox(e[n], t)
                      : e[n] && e[n].it
                      ? this.calculateBoundingBox(e[n].it, t)
                      : e[n] &&
                        e[n].style &&
                        e[n].w &&
                        this.expandStrokeBoundingBox(e[n].w, t);
                }),
                (HShapeElement.prototype.expandStrokeBoundingBox = function (
                  e,
                  t
                ) {
                  var n = 0;
                  if (e.keyframes) {
                    for (var r = 0; r < e.keyframes.length; r += 1) {
                      var i = e.keyframes[r].s;
                      i > n && (n = i);
                    }
                    n *= e.mult;
                  } else n = e.v * e.mult;
                  (t.x -= n), (t.xMax += n), (t.y -= n), (t.yMax += n);
                }),
                (HShapeElement.prototype.currentBoxContains = function (e) {
                  return (
                    this.currentBBox.x <= e.x &&
                    this.currentBBox.y <= e.y &&
                    this.currentBBox.width + this.currentBBox.x >=
                      e.x + e.width &&
                    this.currentBBox.height + this.currentBBox.y >= e.y + e.height
                  );
                }),
                (HShapeElement.prototype.renderInnerContent = function () {
                  if (
                    (this._renderShapeFrame(),
                    !this.hidden && (this._isFirstFrame || this._mdf))
                  ) {
                    var e = this.tempBoundingBox,
                      t = 999999;
                    if (
                      ((e.x = t),
                      (e.xMax = -t),
                      (e.y = t),
                      (e.yMax = -t),
                      this.calculateBoundingBox(this.itemsData, e),
                      (e.width = e.xMax < e.x ? 0 : e.xMax - e.x),
                      (e.height = e.yMax < e.y ? 0 : e.yMax - e.y),
                      this.currentBoxContains(e))
                    )
                      return;
                    var n = !1;
                    if (
                      (this.currentBBox.w !== e.width &&
                        ((this.currentBBox.w = e.width),
                        this.shapeCont.setAttribute("width", e.width),
                        (n = !0)),
                      this.currentBBox.h !== e.height &&
                        ((this.currentBBox.h = e.height),
                        this.shapeCont.setAttribute("height", e.height),
                        (n = !0)),
                      n ||
                        this.currentBBox.x !== e.x ||
                        this.currentBBox.y !== e.y)
                    ) {
                      (this.currentBBox.w = e.width),
                        (this.currentBBox.h = e.height),
                        (this.currentBBox.x = e.x),
                        (this.currentBBox.y = e.y),
                        this.shapeCont.setAttribute(
                          "viewBox",
                          this.currentBBox.x +
                            " " +
                            this.currentBBox.y +
                            " " +
                            this.currentBBox.w +
                            " " +
                            this.currentBBox.h
                        );
                      var r = this.shapeCont.style,
                        i =
                          "translate(" +
                          this.currentBBox.x +
                          "px," +
                          this.currentBBox.y +
                          "px)";
                      (r.transform = i), (r.webkitTransform = i);
                    }
                  }
                }),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    HBaseElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableDOMElement,
                    ITextElement
                  ],
                  HTextElement
                ),
                (HTextElement.prototype.createContent = function () {
                  if (((this.isMasked = this.checkMasks()), this.isMasked)) {
                    (this.renderType = "svg"),
                      (this.compW = this.comp.data.w),
                      (this.compH = this.comp.data.h),
                      this.svgElement.setAttribute("width", this.compW),
                      this.svgElement.setAttribute("height", this.compH);
                    var e = createNS("g");
                    this.maskedElement.appendChild(e), (this.innerElem = e);
                  } else
                    (this.renderType = "html"),
                      (this.innerElem = this.layerElement);
                  this.checkParenting();
                }),
                (HTextElement.prototype.buildNewText = function () {
                  var e = this.textProperty.currentData;
                  this.renderedLetters = createSizedArray(e.l ? e.l.length : 0);
                  var t = this.innerElem.style,
                    n = e.fc ? this.buildColor(e.fc) : "rgba(0,0,0,0)";
                  (t.fill = n),
                    (t.color = n),
                    e.sc &&
                      ((t.stroke = this.buildColor(e.sc)),
                      (t.strokeWidth = e.sw + "px"));
                  var r,
                    i,
                    a = this.globalData.fontManager.getFontByName(e.f);
                  if (!this.globalData.fontManager.chars)
                    if (
                      ((t.fontSize = e.finalSize + "px"),
                      (t.lineHeight = e.finalSize + "px"),
                      a.fClass)
                    )
                      this.innerElem.className = a.fClass;
                    else {
                      t.fontFamily = a.fFamily;
                      var s = e.fWeight,
                        o = e.fStyle;
                      (t.fontStyle = o), (t.fontWeight = s);
                    }
                  var l,
                    h,
                    u,
                    c = e.l;
                  i = c.length;
                  var d,
                    f = this.mHelper,
                    p = "",
                    m = 0;
                  for (r = 0; r < i; r += 1) {
                    if (
                      (this.globalData.fontManager.chars
                        ? (this.textPaths[m]
                            ? (l = this.textPaths[m])
                            : ((l = createNS("path")).setAttribute(
                                "stroke-linecap",
                                lineCapEnum[1]
                              ),
                              l.setAttribute("stroke-linejoin", lineJoinEnum[2]),
                              l.setAttribute("stroke-miterlimit", "4")),
                          this.isMasked ||
                            (this.textSpans[m]
                              ? (u = (h = this.textSpans[m]).children[0])
                              : (((h = createTag("div")).style.lineHeight = 0),
                                (u = createNS("svg")).appendChild(l),
                                styleDiv(h))))
                        : this.isMasked
                        ? (l = this.textPaths[m]
                            ? this.textPaths[m]
                            : createNS("text"))
                        : this.textSpans[m]
                        ? ((h = this.textSpans[m]), (l = this.textPaths[m]))
                        : (styleDiv((h = createTag("span"))),
                          styleDiv((l = createTag("span"))),
                          h.appendChild(l)),
                      this.globalData.fontManager.chars)
                    ) {
                      var g,
                        v = this.globalData.fontManager.getCharData(
                          e.finalText[r],
                          a.fStyle,
                          this.globalData.fontManager.getFontByName(e.f).fFamily
                        );
                      if (
                        ((g = v ? v.data : null),
                        f.reset(),
                        g &&
                          g.shapes &&
                          g.shapes.length &&
                          ((d = g.shapes[0].it),
                          f.scale(e.finalSize / 100, e.finalSize / 100),
                          (p = this.createPathShape(f, d)),
                          l.setAttribute("d", p)),
                        this.isMasked)
                      )
                        this.innerElem.appendChild(l);
                      else {
                        if ((this.innerElem.appendChild(h), g && g.shapes)) {
                          document.body.appendChild(u);
                          var y = u.getBBox();
                          u.setAttribute("width", y.width + 2),
                            u.setAttribute("height", y.height + 2),
                            u.setAttribute(
                              "viewBox",
                              y.x -
                                1 +
                                " " +
                                (y.y - 1) +
                                " " +
                                (y.width + 2) +
                                " " +
                                (y.height + 2)
                            );
                          var _ = u.style,
                            b =
                              "translate(" +
                              (y.x - 1) +
                              "px," +
                              (y.y - 1) +
                              "px)";
                          (_.transform = b),
                            (_.webkitTransform = b),
                            (c[r].yOffset = y.y - 1);
                        } else
                          u.setAttribute("width", 1), u.setAttribute("height", 1);
                        h.appendChild(u);
                      }
                    } else if (
                      ((l.textContent = c[r].val),
                      l.setAttributeNS(
                        "http://www.w3.org/XML/1998/namespace",
                        "xml:space",
                        "preserve"
                      ),
                      this.isMasked)
                    )
                      this.innerElem.appendChild(l);
                    else {
                      this.innerElem.appendChild(h);
                      var x = l.style,
                        S = "translate3d(0," + -e.finalSize / 1.2 + "px,0)";
                      (x.transform = S), (x.webkitTransform = S);
                    }
                    this.isMasked
                      ? (this.textSpans[m] = l)
                      : (this.textSpans[m] = h),
                      (this.textSpans[m].style.display = "block"),
                      (this.textPaths[m] = l),
                      (m += 1);
                  }
                  for (; m < this.textSpans.length; )
                    (this.textSpans[m].style.display = "none"), (m += 1);
                }),
                (HTextElement.prototype.renderInnerContent = function () {
                  var e;
                  if ((this.validateText(), this.data.singleShape)) {
                    if (!this._isFirstFrame && !this.lettersChangedFlag) return;
                    if (this.isMasked && this.finalTransform._matMdf) {
                      this.svgElement.setAttribute(
                        "viewBox",
                        -this.finalTransform.mProp.p.v[0] +
                          " " +
                          -this.finalTransform.mProp.p.v[1] +
                          " " +
                          this.compW +
                          " " +
                          this.compH
                      ),
                        (e = this.svgElement.style);
                      var t =
                        "translate(" +
                        -this.finalTransform.mProp.p.v[0] +
                        "px," +
                        -this.finalTransform.mProp.p.v[1] +
                        "px)";
                      (e.transform = t), (e.webkitTransform = t);
                    }
                  }
                  if (
                    (this.textAnimator.getMeasures(
                      this.textProperty.currentData,
                      this.lettersChangedFlag
                    ),
                    this.lettersChangedFlag ||
                      this.textAnimator.lettersChangedFlag)
                  ) {
                    var n,
                      r,
                      i,
                      a,
                      s,
                      o = 0,
                      l = this.textAnimator.renderedLetters,
                      h = this.textProperty.currentData.l;
                    for (r = h.length, n = 0; n < r; n += 1)
                      h[n].n
                        ? (o += 1)
                        : ((a = this.textSpans[n]),
                          (s = this.textPaths[n]),
                          (i = l[o]),
                          (o += 1),
                          i._mdf.m &&
                            (this.isMasked
                              ? a.setAttribute("transform", i.m)
                              : ((a.style.webkitTransform = i.m),
                                (a.style.transform = i.m))),
                          (a.style.opacity = i.o),
                          i.sw &&
                            i._mdf.sw &&
                            s.setAttribute("stroke-width", i.sw),
                          i.sc && i._mdf.sc && s.setAttribute("stroke", i.sc),
                          i.fc &&
                            i._mdf.fc &&
                            (s.setAttribute("fill", i.fc),
                            (s.style.color = i.fc)));
                    if (
                      this.innerElem.getBBox &&
                      !this.hidden &&
                      (this._isFirstFrame || this._mdf)
                    ) {
                      var u = this.innerElem.getBBox();
                      if (
                        (this.currentBBox.w !== u.width &&
                          ((this.currentBBox.w = u.width),
                          this.svgElement.setAttribute("width", u.width)),
                        this.currentBBox.h !== u.height &&
                          ((this.currentBBox.h = u.height),
                          this.svgElement.setAttribute("height", u.height)),
                        this.currentBBox.w !== u.width + 2 ||
                          this.currentBBox.h !== u.height + 2 ||
                          this.currentBBox.x !== u.x - 1 ||
                          this.currentBBox.y !== u.y - 1)
                      ) {
                        (this.currentBBox.w = u.width + 2),
                          (this.currentBBox.h = u.height + 2),
                          (this.currentBBox.x = u.x - 1),
                          (this.currentBBox.y = u.y - 1),
                          this.svgElement.setAttribute(
                            "viewBox",
                            this.currentBBox.x +
                              " " +
                              this.currentBBox.y +
                              " " +
                              this.currentBBox.w +
                              " " +
                              this.currentBBox.h
                          ),
                          (e = this.svgElement.style);
                        var c =
                          "translate(" +
                          this.currentBBox.x +
                          "px," +
                          this.currentBBox.y +
                          "px)";
                        (e.transform = c), (e.webkitTransform = c);
                      }
                    }
                  }
                }),
                extendPrototype(
                  [BaseElement, FrameElement, HierarchyElement],
                  HCameraElement
                ),
                (HCameraElement.prototype.setup = function () {
                  var e,
                    t,
                    n,
                    r,
                    i = this.comp.threeDElements.length;
                  for (e = 0; e < i; e += 1)
                    if ("3d" === (t = this.comp.threeDElements[e]).type) {
                      (n = t.perspectiveElem.style), (r = t.container.style);
                      var a = this.pe.v + "px",
                        s = "0px 0px 0px",
                        o = "matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";
                      (n.perspective = a),
                        (n.webkitPerspective = a),
                        (r.transformOrigin = s),
                        (r.mozTransformOrigin = s),
                        (r.webkitTransformOrigin = s),
                        (n.transform = o),
                        (n.webkitTransform = o);
                    }
                }),
                (HCameraElement.prototype.createElements = function () {}),
                (HCameraElement.prototype.hide = function () {}),
                (HCameraElement.prototype.renderFrame = function () {
                  var e,
                    t,
                    n = this._isFirstFrame;
                  if (this.hierarchy)
                    for (t = this.hierarchy.length, e = 0; e < t; e += 1)
                      n = this.hierarchy[e].finalTransform.mProp._mdf || n;
                  if (
                    n ||
                    this.pe._mdf ||
                    (this.p && this.p._mdf) ||
                    (this.px && (this.px._mdf || this.py._mdf || this.pz._mdf)) ||
                    this.rx._mdf ||
                    this.ry._mdf ||
                    this.rz._mdf ||
                    this.or._mdf ||
                    (this.a && this.a._mdf)
                  ) {
                    if ((this.mat.reset(), this.hierarchy))
                      for (e = t = this.hierarchy.length - 1; e >= 0; e -= 1) {
                        var r = this.hierarchy[e].finalTransform.mProp;
                        this.mat.translate(-r.p.v[0], -r.p.v[1], r.p.v[2]),
                          this.mat
                            .rotateX(-r.or.v[0])
                            .rotateY(-r.or.v[1])
                            .rotateZ(r.or.v[2]),
                          this.mat
                            .rotateX(-r.rx.v)
                            .rotateY(-r.ry.v)
                            .rotateZ(r.rz.v),
                          this.mat.scale(
                            1 / r.s.v[0],
                            1 / r.s.v[1],
                            1 / r.s.v[2]
                          ),
                          this.mat.translate(r.a.v[0], r.a.v[1], r.a.v[2]);
                      }
                    if (
                      (this.p
                        ? this.mat.translate(
                            -this.p.v[0],
                            -this.p.v[1],
                            this.p.v[2]
                          )
                        : this.mat.translate(-this.px.v, -this.py.v, this.pz.v),
                      this.a)
                    ) {
                      var i;
                      i = this.p
                        ? [
                            this.p.v[0] - this.a.v[0],
                            this.p.v[1] - this.a.v[1],
                            this.p.v[2] - this.a.v[2]
                          ]
                        : [
                            this.px.v - this.a.v[0],
                            this.py.v - this.a.v[1],
                            this.pz.v - this.a.v[2]
                          ];
                      var a = Math.sqrt(
                          Math.pow(i[0], 2) +
                            Math.pow(i[1], 2) +
                            Math.pow(i[2], 2)
                        ),
                        s = [i[0] / a, i[1] / a, i[2] / a],
                        o = Math.sqrt(s[2] * s[2] + s[0] * s[0]),
                        l = Math.atan2(s[1], o),
                        h = Math.atan2(s[0], -s[2]);
                      this.mat.rotateY(h).rotateX(-l);
                    }
                    this.mat
                      .rotateX(-this.rx.v)
                      .rotateY(-this.ry.v)
                      .rotateZ(this.rz.v),
                      this.mat
                        .rotateX(-this.or.v[0])
                        .rotateY(-this.or.v[1])
                        .rotateZ(this.or.v[2]),
                      this.mat.translate(
                        this.globalData.compSize.w / 2,
                        this.globalData.compSize.h / 2,
                        0
                      ),
                      this.mat.translate(0, 0, this.pe.v);
                    var u = !this._prevMat.equals(this.mat);
                    if ((u || this.pe._mdf) && this.comp.threeDElements) {
                      var c, d, f;
                      for (
                        t = this.comp.threeDElements.length, e = 0;
                        e < t;
                        e += 1
                      )
                        if ("3d" === (c = this.comp.threeDElements[e]).type) {
                          if (u) {
                            var p = this.mat.toCSS();
                            ((f = c.container.style).transform = p),
                              (f.webkitTransform = p);
                          }
                          this.pe._mdf &&
                            (((d = c.perspectiveElem.style).perspective =
                              this.pe.v + "px"),
                            (d.webkitPerspective = this.pe.v + "px"));
                        }
                      this.mat.clone(this._prevMat);
                    }
                  }
                  this._isFirstFrame = !1;
                }),
                (HCameraElement.prototype.prepareFrame = function (e) {
                  this.prepareProperties(e, !0);
                }),
                (HCameraElement.prototype.destroy = function () {}),
                (HCameraElement.prototype.getBaseElement = function () {
                  return null;
                }),
                extendPrototype(
                  [
                    BaseElement,
                    TransformElement,
                    HBaseElement,
                    HSolidElement,
                    HierarchyElement,
                    FrameElement,
                    RenderableElement
                  ],
                  HImageElement
                ),
                (HImageElement.prototype.createContent = function () {
                  var e = this.globalData.getAssetsPath(this.assetData),
                    t = new Image();
                  this.data.hasMask
                    ? ((this.imageElem = createNS("image")),
                      this.imageElem.setAttribute(
                        "width",
                        this.assetData.w + "px"
                      ),
                      this.imageElem.setAttribute(
                        "height",
                        this.assetData.h + "px"
                      ),
                      this.imageElem.setAttributeNS(
                        "http://www.w3.org/1999/xlink",
                        "href",
                        e
                      ),
                      this.layerElement.appendChild(this.imageElem),
                      this.baseElement.setAttribute("width", this.assetData.w),
                      this.baseElement.setAttribute("height", this.assetData.h))
                    : this.layerElement.appendChild(t),
                    (t.crossOrigin = "anonymous"),
                    (t.src = e),
                    this.data.ln &&
                      this.baseElement.setAttribute("id", this.data.ln);
                }),
                extendPrototype([BaseRenderer], HybridRendererBase),
                (HybridRendererBase.prototype.buildItem =
                  SVGRenderer.prototype.buildItem),
                (HybridRendererBase.prototype.checkPendingElements = function () {
                  for (; this.pendingElements.length; )
                    this.pendingElements.pop().checkParenting();
                }),
                (HybridRendererBase.prototype.appendElementInPos = function (
                  e,
                  t
                ) {
                  var n = e.getBaseElement();
                  if (n) {
                    var r = this.layers[t];
                    if (r.ddd && this.supports3d) this.addTo3dContainer(n, t);
                    else if (this.threeDElements) this.addTo3dContainer(n, t);
                    else {
                      for (var i, a, s = 0; s < t; )
                        this.elements[s] &&
                          !0 !== this.elements[s] &&
                          this.elements[s].getBaseElement &&
                          ((a = this.elements[s]),
                          (i =
                            (this.layers[s].ddd
                              ? this.getThreeDContainerByPos(s)
                              : a.getBaseElement()) || i)),
                          (s += 1);
                      i
                        ? (r.ddd && this.supports3d) ||
                          this.layerElement.insertBefore(n, i)
                        : (r.ddd && this.supports3d) ||
                          this.layerElement.appendChild(n);
                    }
                  }
                }),
                (HybridRendererBase.prototype.createShape = function (e) {
                  return this.supports3d
                    ? new HShapeElement(e, this.globalData, this)
                    : new SVGShapeElement(e, this.globalData, this);
                }),
                (HybridRendererBase.prototype.createText = function (e) {
                  return this.supports3d
                    ? new HTextElement(e, this.globalData, this)
                    : new SVGTextLottieElement(e, this.globalData, this);
                }),
                (HybridRendererBase.prototype.createCamera = function (e) {
                  return (
                    (this.camera = new HCameraElement(e, this.globalData, this)),
                    this.camera
                  );
                }),
                (HybridRendererBase.prototype.createImage = function (e) {
                  return this.supports3d
                    ? new HImageElement(e, this.globalData, this)
                    : new IImageElement(e, this.globalData, this);
                }),
                (HybridRendererBase.prototype.createSolid = function (e) {
                  return this.supports3d
                    ? new HSolidElement(e, this.globalData, this)
                    : new ISolidElement(e, this.globalData, this);
                }),
                (HybridRendererBase.prototype.createNull =
                  SVGRenderer.prototype.createNull),
                (HybridRendererBase.prototype.getThreeDContainerByPos = function (
                  e
                ) {
                  for (var t = 0, n = this.threeDElements.length; t < n; ) {
                    if (
                      this.threeDElements[t].startPos <= e &&
                      this.threeDElements[t].endPos >= e
                    )
                      return this.threeDElements[t].perspectiveElem;
                    t += 1;
                  }
                  return null;
                }),
                (HybridRendererBase.prototype.createThreeDContainer = function (
                  e,
                  t
                ) {
                  var n,
                    r,
                    i = createTag("div");
                  styleDiv(i);
                  var a = createTag("div");
                  if ((styleDiv(a), "3d" === t)) {
                    ((n = i.style).width = this.globalData.compSize.w + "px"),
                      (n.height = this.globalData.compSize.h + "px");
                    var s = "50% 50%";
                    (n.webkitTransformOrigin = s),
                      (n.mozTransformOrigin = s),
                      (n.transformOrigin = s);
                    var o = "matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";
                    ((r = a.style).transform = o), (r.webkitTransform = o);
                  }
                  i.appendChild(a);
                  var l = {
                    container: a,
                    perspectiveElem: i,
                    startPos: e,
                    endPos: e,
                    type: t
                  };
                  return this.threeDElements.push(l), l;
                }),
                (HybridRendererBase.prototype.build3dContainers = function () {
                  var e,
                    t,
                    n = this.layers.length,
                    r = "";
                  for (e = 0; e < n; e += 1)
                    this.layers[e].ddd && 3 !== this.layers[e].ty
                      ? ("3d" !== r &&
                          ((r = "3d"), (t = this.createThreeDContainer(e, "3d"))),
                        (t.endPos = Math.max(t.endPos, e)))
                      : ("2d" !== r &&
                          ((r = "2d"), (t = this.createThreeDContainer(e, "2d"))),
                        (t.endPos = Math.max(t.endPos, e)));
                  for (e = (n = this.threeDElements.length) - 1; e >= 0; e -= 1)
                    this.resizerElem.appendChild(
                      this.threeDElements[e].perspectiveElem
                    );
                }),
                (HybridRendererBase.prototype.addTo3dContainer = function (e, t) {
                  for (var n = 0, r = this.threeDElements.length; n < r; ) {
                    if (t <= this.threeDElements[n].endPos) {
                      for (var i, a = this.threeDElements[n].startPos; a < t; )
                        this.elements[a] &&
                          this.elements[a].getBaseElement &&
                          (i = this.elements[a].getBaseElement()),
                          (a += 1);
                      i
                        ? this.threeDElements[n].container.insertBefore(e, i)
                        : this.threeDElements[n].container.appendChild(e);
                      break;
                    }
                    n += 1;
                  }
                }),
                (HybridRendererBase.prototype.configAnimation = function (e) {
                  var t = createTag("div"),
                    n = this.animationItem.wrapper,
                    r = t.style;
                  (r.width = e.w + "px"),
                    (r.height = e.h + "px"),
                    (this.resizerElem = t),
                    styleDiv(t),
                    (r.transformStyle = "flat"),
                    (r.mozTransformStyle = "flat"),
                    (r.webkitTransformStyle = "flat"),
                    this.renderConfig.className &&
                      t.setAttribute("class", this.renderConfig.className),
                    n.appendChild(t),
                    (r.overflow = "hidden");
                  var i = createNS("svg");
                  i.setAttribute("width", "1"),
                    i.setAttribute("height", "1"),
                    styleDiv(i),
                    this.resizerElem.appendChild(i);
                  var a = createNS("defs");
                  i.appendChild(a),
                    (this.data = e),
                    this.setupGlobalData(e, i),
                    (this.globalData.defs = a),
                    (this.layers = e.layers),
                    (this.layerElement = this.resizerElem),
                    this.build3dContainers(),
                    this.updateContainerSize();
                }),
                (HybridRendererBase.prototype.destroy = function () {
                  var e;
                  this.animationItem.wrapper &&
                    (this.animationItem.wrapper.innerText = ""),
                    (this.animationItem.container = null),
                    (this.globalData.defs = null);
                  var t = this.layers ? this.layers.length : 0;
                  for (e = 0; e < t; e += 1)
                    this.elements[e] &&
                      this.elements[e].destroy &&
                      this.elements[e].destroy();
                  (this.elements.length = 0),
                    (this.destroyed = !0),
                    (this.animationItem = null);
                }),
                (HybridRendererBase.prototype.updateContainerSize = function () {
                  var e,
                    t,
                    n,
                    r,
                    i = this.animationItem.wrapper.offsetWidth,
                    a = this.animationItem.wrapper.offsetHeight,
                    s = i / a;
                  this.globalData.compSize.w / this.globalData.compSize.h > s
                    ? ((e = i / this.globalData.compSize.w),
                      (t = i / this.globalData.compSize.w),
                      (n = 0),
                      (r =
                        (a -
                          this.globalData.compSize.h *
                            (i / this.globalData.compSize.w)) /
                        2))
                    : ((e = a / this.globalData.compSize.h),
                      (t = a / this.globalData.compSize.h),
                      (n =
                        (i -
                          this.globalData.compSize.w *
                            (a / this.globalData.compSize.h)) /
                        2),
                      (r = 0));
                  var o = this.resizerElem.style;
                  (o.webkitTransform =
                    "matrix3d(" +
                    e +
                    ",0,0,0,0," +
                    t +
                    ",0,0,0,0,1,0," +
                    n +
                    "," +
                    r +
                    ",0,1)"),
                    (o.transform = o.webkitTransform);
                }),
                (HybridRendererBase.prototype.renderFrame =
                  SVGRenderer.prototype.renderFrame),
                (HybridRendererBase.prototype.hide = function () {
                  this.resizerElem.style.display = "none";
                }),
                (HybridRendererBase.prototype.show = function () {
                  this.resizerElem.style.display = "block";
                }),
                (HybridRendererBase.prototype.initItems = function () {
                  if ((this.buildAllItems(), this.camera)) this.camera.setup();
                  else {
                    var e,
                      t = this.globalData.compSize.w,
                      n = this.globalData.compSize.h,
                      r = this.threeDElements.length;
                    for (e = 0; e < r; e += 1) {
                      var i = this.threeDElements[e].perspectiveElem.style;
                      (i.webkitPerspective =
                        Math.sqrt(Math.pow(t, 2) + Math.pow(n, 2)) + "px"),
                        (i.perspective = i.webkitPerspective);
                    }
                  }
                }),
                (HybridRendererBase.prototype.searchExtraCompositions = function (
                  e
                ) {
                  var t,
                    n = e.length,
                    r = createTag("div");
                  for (t = 0; t < n; t += 1)
                    if (e[t].xt) {
                      var i = this.createComp(
                        e[t],
                        r,
                        this.globalData.comp,
                        null
                      );
                      i.initExpressions(),
                        this.globalData.projectInterface.registerComposition(i);
                    }
                }),
                extendPrototype(
                  [HybridRendererBase, ICompElement, HBaseElement],
                  HCompElement
                ),
                (HCompElement.prototype._createBaseContainerElements =
                  HCompElement.prototype.createContainerElements),
                (HCompElement.prototype.createContainerElements = function () {
                  this._createBaseContainerElements(),
                    this.data.hasMask
                      ? (this.svgElement.setAttribute("width", this.data.w),
                        this.svgElement.setAttribute("height", this.data.h),
                        (this.transformedElement = this.baseElement))
                      : (this.transformedElement = this.layerElement);
                }),
                (HCompElement.prototype.addTo3dContainer = function (e, t) {
                  for (var n, r = 0; r < t; )
                    this.elements[r] &&
                      this.elements[r].getBaseElement &&
                      (n = this.elements[r].getBaseElement()),
                      (r += 1);
                  n
                    ? this.layerElement.insertBefore(e, n)
                    : this.layerElement.appendChild(e);
                }),
                (HCompElement.prototype.createComp = function (e) {
                  return this.supports3d
                    ? new HCompElement(e, this.globalData, this)
                    : new SVGCompElement(e, this.globalData, this);
                }),
                extendPrototype([HybridRendererBase], HybridRenderer),
                (HybridRenderer.prototype.createComp = function (e) {
                  return this.supports3d
                    ? new HCompElement(e, this.globalData, this)
                    : new SVGCompElement(e, this.globalData, this);
                });
              var CompExpressionInterface = function (e) {
                function t(t) {
                  for (var n = 0, r = e.layers.length; n < r; ) {
                    if (e.layers[n].nm === t || e.layers[n].ind === t)
                      return e.elements[n].layerInterface;
                    n += 1;
                  }
                  return null;
                }
                return (
                  Object.defineProperty(t, "_name", { value: e.data.nm }),
                  (t.layer = t),
                  (t.pixelAspect = 1),
                  (t.height = e.data.h || e.globalData.compSize.h),
                  (t.width = e.data.w || e.globalData.compSize.w),
                  (t.pixelAspect = 1),
                  (t.frameDuration = 1 / e.globalData.frameRate),
                  (t.displayStartTime = 0),
                  (t.numLayers = e.layers.length),
                  t
                );
              };
              function _typeof$2(e) {
                return (
                  (_typeof$2 =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (e) {
                          return typeof e;
                        }
                      : function (e) {
                          return e &&
                            "function" == typeof Symbol &&
                            e.constructor === Symbol &&
                            e !== Symbol.prototype
                            ? "symbol"
                            : typeof e;
                        }),
                  _typeof$2(e)
                );
              }
              function seedRandom(e, t) {
                var n = this,
                  r = 256,
                  i = t.pow(r, 6),
                  a = t.pow(2, 52),
                  s = 2 * a,
                  o = 255;
                function l(e) {
                  var t,
                    n = e.length,
                    i = this,
                    a = 0,
                    s = (i.i = i.j = 0),
                    l = (i.S = []);
                  for (n || (e = [n++]); a < r; ) l[a] = a++;
                  for (a = 0; a < r; a++)
                    (l[a] = l[(s = o & (s + e[a % n] + (t = l[a])))]), (l[s] = t);
                  i.g = function (e) {
                    for (var t, n = 0, a = i.i, s = i.j, l = i.S; e--; )
                      (t = l[(a = o & (a + 1))]),
                        (n =
                          n * r +
                          l[o & ((l[a] = l[(s = o & (s + t))]) + (l[s] = t))]);
                    return (i.i = a), (i.j = s), n;
                  };
                }
                function h(e, t) {
                  return (t.i = e.i), (t.j = e.j), (t.S = e.S.slice()), t;
                }
                function u(e, t) {
                  var n,
                    r = [],
                    i = _typeof$2(e);
                  if (t && "object" == i)
                    for (n in e)
                      try {
                        r.push(u(e[n], t - 1));
                      } catch (e) {}
                  return r.length ? r : "string" == i ? e : e + "\0";
                }
                function c(e, t) {
                  for (var n, r = e + "", i = 0; i < r.length; )
                    t[o & i] = o & ((n ^= 19 * t[o & i]) + r.charCodeAt(i++));
                  return d(t);
                }
                function d(e) {
                  return String.fromCharCode.apply(0, e);
                }
                (t.seedrandom = function (o, f, p) {
                  var m = [],
                    g = c(
                      u(
                        (f = !0 === f ? { entropy: !0 } : f || {}).entropy
                          ? [o, d(e)]
                          : null === o
                          ? (function () {
                              try {
                                var t = new Uint8Array(r);
                                return (
                                  (n.crypto || n.msCrypto).getRandomValues(t),
                                  d(t)
                                );
                              } catch (t) {
                                var i = n.navigator,
                                  a = i && i.plugins;
                                return [+new Date(), n, a, n.screen, d(e)];
                              }
                            })()
                          : o,
                        3
                      ),
                      m
                    ),
                    v = new l(m),
                    y = function () {
                      for (var e = v.g(6), t = i, n = 0; e < a; )
                        (e = (e + n) * r), (t *= r), (n = v.g(1));
                      for (; e >= s; ) (e /= 2), (t /= 2), (n >>>= 1);
                      return (e + n) / t;
                    };
                  return (
                    (y.int32 = function () {
                      return 0 | v.g(4);
                    }),
                    (y.quick = function () {
                      return v.g(4) / 4294967296;
                    }),
                    (y.double = y),
                    c(d(v.S), e),
                    (
                      f.pass ||
                      p ||
                      function (e, n, r, i) {
                        return (
                          i &&
                            (i.S && h(i, v),
                            (e.state = function () {
                              return h(v, {});
                            })),
                          r ? ((t.random = e), n) : e
                        );
                      }
                    )(y, g, "global" in f ? f.global : this == t, f.state)
                  );
                }),
                  c(t.random(), e);
              }
              function initialize$2(e) {
                seedRandom([], e);
              }
              var propTypes = { SHAPE: "shape" };
              function _typeof$1(e) {
                return (
                  (_typeof$1 =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (e) {
                          return typeof e;
                        }
                      : function (e) {
                          return e &&
                            "function" == typeof Symbol &&
                            e.constructor === Symbol &&
                            e !== Symbol.prototype
                            ? "symbol"
                            : typeof e;
                        }),
                  _typeof$1(e)
                );
              }
              var ExpressionManager = (function () {
                  var ob = {},
                    Math = BMMath,
                    window = null,
                    document = null,
                    XMLHttpRequest = null,
                    fetch = null,
                    frames = null,
                    _lottieGlobal = {};
                  function resetFrame() {
                    _lottieGlobal = {};
                  }
                  function $bm_isInstanceOfArray(e) {
                    return (
                      e.constructor === Array || e.constructor === Float32Array
                    );
                  }
                  function isNumerable(e, t) {
                    return (
                      "number" === e ||
                      t instanceof Number ||
                      "boolean" === e ||
                      "string" === e
                    );
                  }
                  function $bm_neg(e) {
                    var t = _typeof$1(e);
                    if ("number" === t || e instanceof Number || "boolean" === t)
                      return -e;
                    if ($bm_isInstanceOfArray(e)) {
                      var n,
                        r = e.length,
                        i = [];
                      for (n = 0; n < r; n += 1) i[n] = -e[n];
                      return i;
                    }
                    return e.propType ? e.v : -e;
                  }
                  initialize$2(BMMath);
                  var easeInBez = BezierFactory.getBezierEasing(
                      0.333,
                      0,
                      0.833,
                      0.833,
                      "easeIn"
                    ).get,
                    easeOutBez = BezierFactory.getBezierEasing(
                      0.167,
                      0.167,
                      0.667,
                      1,
                      "easeOut"
                    ).get,
                    easeInOutBez = BezierFactory.getBezierEasing(
                      0.33,
                      0,
                      0.667,
                      1,
                      "easeInOut"
                    ).get;
                  function sum(e, t) {
                    var n = _typeof$1(e),
                      r = _typeof$1(t);
                    if (
                      (isNumerable(n, e) && isNumerable(r, t)) ||
                      "string" === n ||
                      "string" === r
                    )
                      return e + t;
                    if ($bm_isInstanceOfArray(e) && isNumerable(r, t))
                      return ((e = e.slice(0))[0] += t), e;
                    if (isNumerable(n, e) && $bm_isInstanceOfArray(t))
                      return ((t = t.slice(0))[0] = e + t[0]), t;
                    if ($bm_isInstanceOfArray(e) && $bm_isInstanceOfArray(t)) {
                      for (
                        var i = 0, a = e.length, s = t.length, o = [];
                        i < a || i < s;
  
                      )
                        ("number" == typeof e[i] || e[i] instanceof Number) &&
                        ("number" == typeof t[i] || t[i] instanceof Number)
                          ? (o[i] = e[i] + t[i])
                          : (o[i] = void 0 === t[i] ? e[i] : e[i] || t[i]),
                          (i += 1);
                      return o;
                    }
                    return 0;
                  }
                  var add = sum;
                  function sub(e, t) {
                    var n = _typeof$1(e),
                      r = _typeof$1(t);
                    if (isNumerable(n, e) && isNumerable(r, t))
                      return (
                        "string" === n && (e = parseInt(e, 10)),
                        "string" === r && (t = parseInt(t, 10)),
                        e - t
                      );
                    if ($bm_isInstanceOfArray(e) && isNumerable(r, t))
                      return ((e = e.slice(0))[0] -= t), e;
                    if (isNumerable(n, e) && $bm_isInstanceOfArray(t))
                      return ((t = t.slice(0))[0] = e - t[0]), t;
                    if ($bm_isInstanceOfArray(e) && $bm_isInstanceOfArray(t)) {
                      for (
                        var i = 0, a = e.length, s = t.length, o = [];
                        i < a || i < s;
  
                      )
                        ("number" == typeof e[i] || e[i] instanceof Number) &&
                        ("number" == typeof t[i] || t[i] instanceof Number)
                          ? (o[i] = e[i] - t[i])
                          : (o[i] = void 0 === t[i] ? e[i] : e[i] || t[i]),
                          (i += 1);
                      return o;
                    }
                    return 0;
                  }
                  function mul(e, t) {
                    var n,
                      r,
                      i,
                      a = _typeof$1(e),
                      s = _typeof$1(t);
                    if (isNumerable(a, e) && isNumerable(s, t)) return e * t;
                    if ($bm_isInstanceOfArray(e) && isNumerable(s, t)) {
                      for (
                        i = e.length, n = createTypedArray("float32", i), r = 0;
                        r < i;
                        r += 1
                      )
                        n[r] = e[r] * t;
                      return n;
                    }
                    if (isNumerable(a, e) && $bm_isInstanceOfArray(t)) {
                      for (
                        i = t.length, n = createTypedArray("float32", i), r = 0;
                        r < i;
                        r += 1
                      )
                        n[r] = e * t[r];
                      return n;
                    }
                    return 0;
                  }
                  function div(e, t) {
                    var n,
                      r,
                      i,
                      a = _typeof$1(e),
                      s = _typeof$1(t);
                    if (isNumerable(a, e) && isNumerable(s, t)) return e / t;
                    if ($bm_isInstanceOfArray(e) && isNumerable(s, t)) {
                      for (
                        i = e.length, n = createTypedArray("float32", i), r = 0;
                        r < i;
                        r += 1
                      )
                        n[r] = e[r] / t;
                      return n;
                    }
                    if (isNumerable(a, e) && $bm_isInstanceOfArray(t)) {
                      for (
                        i = t.length, n = createTypedArray("float32", i), r = 0;
                        r < i;
                        r += 1
                      )
                        n[r] = e / t[r];
                      return n;
                    }
                    return 0;
                  }
                  function mod(e, t) {
                    return (
                      "string" == typeof e && (e = parseInt(e, 10)),
                      "string" == typeof t && (t = parseInt(t, 10)),
                      e % t
                    );
                  }
                  var $bm_sum = sum,
                    $bm_sub = sub,
                    $bm_mul = mul,
                    $bm_div = div,
                    $bm_mod = mod;
                  function clamp(e, t, n) {
                    if (t > n) {
                      var r = n;
                      (n = t), (t = r);
                    }
                    return Math.min(Math.max(e, t), n);
                  }
                  function radiansToDegrees(e) {
                    return e / degToRads;
                  }
                  var radians_to_degrees = radiansToDegrees;
                  function degreesToRadians(e) {
                    return e * degToRads;
                  }
                  var degrees_to_radians = radiansToDegrees,
                    helperLengthArray = [0, 0, 0, 0, 0, 0];
                  function length(e, t) {
                    if ("number" == typeof e || e instanceof Number)
                      return (t = t || 0), Math.abs(e - t);
                    var n;
                    t || (t = helperLengthArray);
                    var r = Math.min(e.length, t.length),
                      i = 0;
                    for (n = 0; n < r; n += 1) i += Math.pow(t[n] - e[n], 2);
                    return Math.sqrt(i);
                  }
                  function normalize(e) {
                    return div(e, length(e));
                  }
                  function rgbToHsl(e) {
                    var t,
                      n,
                      r = e[0],
                      i = e[1],
                      a = e[2],
                      s = Math.max(r, i, a),
                      o = Math.min(r, i, a),
                      l = (s + o) / 2;
                    if (s === o) (t = 0), (n = 0);
                    else {
                      var h = s - o;
                      switch (
                        ((n = l > 0.5 ? h / (2 - s - o) : h / (s + o)), s)
                      ) {
                        case r:
                          t = (i - a) / h + (i < a ? 6 : 0);
                          break;
                        case i:
                          t = (a - r) / h + 2;
                          break;
                        case a:
                          t = (r - i) / h + 4;
                      }
                      t /= 6;
                    }
                    return [t, n, l, e[3]];
                  }
                  function hue2rgb(e, t, n) {
                    return (
                      n < 0 && (n += 1),
                      n > 1 && (n -= 1),
                      n < 1 / 6
                        ? e + 6 * (t - e) * n
                        : n < 0.5
                        ? t
                        : n < 2 / 3
                        ? e + (t - e) * (2 / 3 - n) * 6
                        : e
                    );
                  }
                  function hslToRgb(e) {
                    var t,
                      n,
                      r,
                      i = e[0],
                      a = e[1],
                      s = e[2];
                    if (0 === a) (t = s), (r = s), (n = s);
                    else {
                      var o = s < 0.5 ? s * (1 + a) : s + a - s * a,
                        l = 2 * s - o;
                      (t = hue2rgb(l, o, i + 1 / 3)),
                        (n = hue2rgb(l, o, i)),
                        (r = hue2rgb(l, o, i - 1 / 3));
                    }
                    return [t, n, r, e[3]];
                  }
                  function linear(e, t, n, r, i) {
                    if (
                      ((void 0 !== r && void 0 !== i) ||
                        ((r = t), (i = n), (t = 0), (n = 1)),
                      n < t)
                    ) {
                      var a = n;
                      (n = t), (t = a);
                    }
                    if (e <= t) return r;
                    if (e >= n) return i;
                    var s,
                      o = n === t ? 0 : (e - t) / (n - t);
                    if (!r.length) return r + (i - r) * o;
                    var l = r.length,
                      h = createTypedArray("float32", l);
                    for (s = 0; s < l; s += 1) h[s] = r[s] + (i[s] - r[s]) * o;
                    return h;
                  }
                  function random(e, t) {
                    if (
                      (void 0 === t &&
                        (void 0 === e
                          ? ((e = 0), (t = 1))
                          : ((t = e), (e = void 0))),
                      t.length)
                    ) {
                      var n,
                        r = t.length;
                      e || (e = createTypedArray("float32", r));
                      var i = createTypedArray("float32", r),
                        a = BMMath.random();
                      for (n = 0; n < r; n += 1) i[n] = e[n] + a * (t[n] - e[n]);
                      return i;
                    }
                    return void 0 === e && (e = 0), e + BMMath.random() * (t - e);
                  }
                  function createPath(e, t, n, r) {
                    var i,
                      a = e.length,
                      s = shapePool.newElement();
                    s.setPathData(!!r, a);
                    var o,
                      l,
                      h = [0, 0];
                    for (i = 0; i < a; i += 1)
                      (o = t && t[i] ? t[i] : h),
                        (l = n && n[i] ? n[i] : h),
                        s.setTripleAt(
                          e[i][0],
                          e[i][1],
                          l[0] + e[i][0],
                          l[1] + e[i][1],
                          o[0] + e[i][0],
                          o[1] + e[i][1],
                          i,
                          !0
                        );
                    return s;
                  }
                  function initiateExpression(elem, data, property) {
                    function noOp(e) {
                      return e;
                    }
                    if (!elem.globalData.renderConfig.runExpressions) return noOp;
                    var val = data.x,
                      needsVelocity = /velocity(?![\w\d])/.test(val),
                      _needsRandom = -1 !== val.indexOf("random"),
                      elemType = elem.data.ty,
                      transform,
                      $bm_transform,
                      content,
                      effect,
                      thisProperty = property;
                    (thisProperty.valueAtTime = thisProperty.getValueAtTime),
                      Object.defineProperty(thisProperty, "value", {
                        get: function () {
                          return thisProperty.v;
                        }
                      }),
                      (elem.comp.frameDuration =
                        1 / elem.comp.globalData.frameRate),
                      (elem.comp.displayStartTime = 0);
                    var inPoint = elem.data.ip / elem.comp.globalData.frameRate,
                      outPoint = elem.data.op / elem.comp.globalData.frameRate,
                      width = elem.data.sw ? elem.data.sw : 0,
                      height = elem.data.sh ? elem.data.sh : 0,
                      name = elem.data.nm,
                      loopIn,
                      loop_in,
                      loopOut,
                      loop_out,
                      smooth,
                      toWorld,
                      fromWorld,
                      fromComp,
                      toComp,
                      fromCompToSurface,
                      position,
                      rotation,
                      anchorPoint,
                      scale,
                      thisLayer,
                      thisComp,
                      mask,
                      valueAtTime,
                      velocityAtTime,
                      scoped_bm_rt,
                      expression_function = eval(
                        "[function _expression_function(){" +
                          val +
                          ";scoped_bm_rt=$bm_rt}]"
                      )[0],
                      numKeys = property.kf ? data.k.length : 0,
                      active = !this.data || !0 !== this.data.hd,
                      wiggle = function (e, t) {
                        var n,
                          r,
                          i = this.pv.length ? this.pv.length : 1,
                          a = createTypedArray("float32", i),
                          s = Math.floor(5 * time);
                        for (n = 0, r = 0; n < s; ) {
                          for (r = 0; r < i; r += 1)
                            a[r] += -t + 2 * t * BMMath.random();
                          n += 1;
                        }
                        var o = 5 * time,
                          l = o - Math.floor(o),
                          h = createTypedArray("float32", i);
                        if (i > 1) {
                          for (r = 0; r < i; r += 1)
                            h[r] =
                              this.pv[r] +
                              a[r] +
                              (-t + 2 * t * BMMath.random()) * l;
                          return h;
                        }
                        return (
                          this.pv + a[0] + (-t + 2 * t * BMMath.random()) * l
                        );
                      }.bind(this);
                    function loopInDuration(e, t) {
                      return loopIn(e, t, !0);
                    }
                    function loopOutDuration(e, t) {
                      return loopOut(e, t, !0);
                    }
                    thisProperty.loopIn &&
                      ((loopIn = thisProperty.loopIn.bind(thisProperty)),
                      (loop_in = loopIn)),
                      thisProperty.loopOut &&
                        ((loopOut = thisProperty.loopOut.bind(thisProperty)),
                        (loop_out = loopOut)),
                      thisProperty.smooth &&
                        (smooth = thisProperty.smooth.bind(thisProperty)),
                      this.getValueAtTime &&
                        (valueAtTime = this.getValueAtTime.bind(this)),
                      this.getVelocityAtTime &&
                        (velocityAtTime = this.getVelocityAtTime.bind(this));
                    var comp = elem.comp.globalData.projectInterface.bind(
                        elem.comp.globalData.projectInterface
                      ),
                      time,
                      velocity,
                      value,
                      text,
                      textIndex,
                      textTotal,
                      selectorValue;
                    function lookAt(e, t) {
                      var n = [t[0] - e[0], t[1] - e[1], t[2] - e[2]],
                        r =
                          Math.atan2(n[0], Math.sqrt(n[1] * n[1] + n[2] * n[2])) /
                          degToRads;
                      return [-Math.atan2(n[1], n[2]) / degToRads, r, 0];
                    }
                    function easeOut(e, t, n, r, i) {
                      return applyEase(easeOutBez, e, t, n, r, i);
                    }
                    function easeIn(e, t, n, r, i) {
                      return applyEase(easeInBez, e, t, n, r, i);
                    }
                    function ease(e, t, n, r, i) {
                      return applyEase(easeInOutBez, e, t, n, r, i);
                    }
                    function applyEase(e, t, n, r, i, a) {
                      void 0 === i ? ((i = n), (a = r)) : (t = (t - n) / (r - n)),
                        t > 1 ? (t = 1) : t < 0 && (t = 0);
                      var s = e(t);
                      if ($bm_isInstanceOfArray(i)) {
                        var o,
                          l = i.length,
                          h = createTypedArray("float32", l);
                        for (o = 0; o < l; o += 1)
                          h[o] = (a[o] - i[o]) * s + i[o];
                        return h;
                      }
                      return (a - i) * s + i;
                    }
                    function nearestKey(e) {
                      var t,
                        n,
                        r,
                        i = data.k.length;
                      if (data.k.length && "number" != typeof data.k[0]) {
                        if (
                          ((n = -1),
                          (e *= elem.comp.globalData.frameRate) < data.k[0].t)
                        )
                          (n = 1), (r = data.k[0].t);
                        else {
                          for (t = 0; t < i - 1; t += 1) {
                            if (e === data.k[t].t) {
                              (n = t + 1), (r = data.k[t].t);
                              break;
                            }
                            if (e > data.k[t].t && e < data.k[t + 1].t) {
                              e - data.k[t].t > data.k[t + 1].t - e
                                ? ((n = t + 2), (r = data.k[t + 1].t))
                                : ((n = t + 1), (r = data.k[t].t));
                              break;
                            }
                          }
                          -1 === n && ((n = t + 1), (r = data.k[t].t));
                        }
                      } else (n = 0), (r = 0);
                      var a = {};
                      return (
                        (a.index = n),
                        (a.time = r / elem.comp.globalData.frameRate),
                        a
                      );
                    }
                    function key(e) {
                      var t, n, r;
                      if (!data.k.length || "number" == typeof data.k[0])
                        throw new Error(
                          "The property has no keyframe at index " + e
                        );
                      (e -= 1),
                        (t = {
                          time: data.k[e].t / elem.comp.globalData.frameRate,
                          value: []
                        });
                      var i = Object.prototype.hasOwnProperty.call(data.k[e], "s")
                        ? data.k[e].s
                        : data.k[e - 1].e;
                      for (r = i.length, n = 0; n < r; n += 1)
                        (t[n] = i[n]), (t.value[n] = i[n]);
                      return t;
                    }
                    function framesToTime(e, t) {
                      return t || (t = elem.comp.globalData.frameRate), e / t;
                    }
                    function timeToFrames(e, t) {
                      return (
                        e || 0 === e || (e = time),
                        t || (t = elem.comp.globalData.frameRate),
                        e * t
                      );
                    }
                    function seedRandom(e) {
                      BMMath.seedrandom(randSeed + e);
                    }
                    function sourceRectAtTime() {
                      return elem.sourceRectAtTime();
                    }
                    function substring(e, t) {
                      return "string" == typeof value
                        ? void 0 === t
                          ? value.substring(e)
                          : value.substring(e, t)
                        : "";
                    }
                    function substr(e, t) {
                      return "string" == typeof value
                        ? void 0 === t
                          ? value.substr(e)
                          : value.substr(e, t)
                        : "";
                    }
                    function posterizeTime(e) {
                      (time = 0 === e ? 0 : Math.floor(time * e) / e),
                        (value = valueAtTime(time));
                    }
                    var index = elem.data.ind,
                      hasParent = !(!elem.hierarchy || !elem.hierarchy.length),
                      parent,
                      randSeed = Math.floor(1e6 * Math.random()),
                      globalData = elem.globalData;
                    function executeExpression(e) {
                      return (
                        (value = e),
                        this.frameExpressionId === elem.globalData.frameId &&
                        "textSelector" !== this.propType
                          ? value
                          : ("textSelector" === this.propType &&
                              ((textIndex = this.textIndex),
                              (textTotal = this.textTotal),
                              (selectorValue = this.selectorValue)),
                            thisLayer ||
                              ((text = elem.layerInterface.text),
                              (thisLayer = elem.layerInterface),
                              (thisComp = elem.comp.compInterface),
                              (toWorld = thisLayer.toWorld.bind(thisLayer)),
                              (fromWorld = thisLayer.fromWorld.bind(thisLayer)),
                              (fromComp = thisLayer.fromComp.bind(thisLayer)),
                              (toComp = thisLayer.toComp.bind(thisLayer)),
                              (mask = thisLayer.mask
                                ? thisLayer.mask.bind(thisLayer)
                                : null),
                              (fromCompToSurface = fromComp)),
                            transform ||
                              ((transform = elem.layerInterface(
                                "ADBE Transform Group"
                              )),
                              ($bm_transform = transform),
                              transform && (anchorPoint = transform.anchorPoint)),
                            4 !== elemType ||
                              content ||
                              (content = thisLayer("ADBE Root Vectors Group")),
                            effect || (effect = thisLayer(4)),
                            (hasParent = !(
                              !elem.hierarchy || !elem.hierarchy.length
                            )) &&
                              !parent &&
                              (parent = elem.hierarchy[0].layerInterface),
                            (time =
                              this.comp.renderedFrame /
                              this.comp.globalData.frameRate),
                            _needsRandom && seedRandom(randSeed + time),
                            needsVelocity && (velocity = velocityAtTime(time)),
                            expression_function(),
                            (this.frameExpressionId = elem.globalData.frameId),
                            (scoped_bm_rt =
                              scoped_bm_rt.propType === propTypes.SHAPE
                                ? scoped_bm_rt.v
                                : scoped_bm_rt))
                      );
                    }
                    return (
                      (executeExpression.__preventDeadCodeRemoval = [
                        $bm_transform,
                        anchorPoint,
                        time,
                        velocity,
                        inPoint,
                        outPoint,
                        width,
                        height,
                        name,
                        loop_in,
                        loop_out,
                        smooth,
                        toComp,
                        fromCompToSurface,
                        toWorld,
                        fromWorld,
                        mask,
                        position,
                        rotation,
                        scale,
                        thisComp,
                        numKeys,
                        active,
                        wiggle,
                        loopInDuration,
                        loopOutDuration,
                        comp,
                        lookAt,
                        easeOut,
                        easeIn,
                        ease,
                        nearestKey,
                        key,
                        text,
                        textIndex,
                        textTotal,
                        selectorValue,
                        framesToTime,
                        timeToFrames,
                        sourceRectAtTime,
                        substring,
                        substr,
                        posterizeTime,
                        index,
                        globalData
                      ]),
                      executeExpression
                    );
                  }
                  return (
                    (ob.initiateExpression = initiateExpression),
                    (ob.__preventDeadCodeRemoval = [
                      window,
                      document,
                      XMLHttpRequest,
                      fetch,
                      frames,
                      $bm_neg,
                      add,
                      $bm_sum,
                      $bm_sub,
                      $bm_mul,
                      $bm_div,
                      $bm_mod,
                      clamp,
                      radians_to_degrees,
                      degreesToRadians,
                      degrees_to_radians,
                      normalize,
                      rgbToHsl,
                      hslToRgb,
                      linear,
                      random,
                      createPath,
                      _lottieGlobal
                    ]),
                    (ob.resetFrame = resetFrame),
                    ob
                  );
                })(),
                Expressions = (function () {
                  var e = {
                    initExpressions: function (e) {
                      var t = 0,
                        n = [];
                      (e.renderer.compInterface = CompExpressionInterface(
                        e.renderer
                      )),
                        e.renderer.globalData.projectInterface.registerComposition(
                          e.renderer
                        ),
                        (e.renderer.globalData.pushExpression = function () {
                          t += 1;
                        }),
                        (e.renderer.globalData.popExpression = function () {
                          0 == (t -= 1) &&
                            (function () {
                              var e,
                                t = n.length;
                              for (e = 0; e < t; e += 1) n[e].release();
                              n.length = 0;
                            })();
                        }),
                        (e.renderer.globalData.registerExpressionProperty =
                          function (e) {
                            -1 === n.indexOf(e) && n.push(e);
                          });
                    }
                  };
                  return (e.resetFrame = ExpressionManager.resetFrame), e;
                })(),
                MaskManagerInterface = (function () {
                  function e(e, t) {
                    (this._mask = e), (this._data = t);
                  }
                  return (
                    Object.defineProperty(e.prototype, "maskPath", {
                      get: function () {
                        return (
                          this._mask.prop.k && this._mask.prop.getValue(),
                          this._mask.prop
                        );
                      }
                    }),
                    Object.defineProperty(e.prototype, "maskOpacity", {
                      get: function () {
                        return (
                          this._mask.op.k && this._mask.op.getValue(),
                          100 * this._mask.op.v
                        );
                      }
                    }),
                    function (t) {
                      var n,
                        r = createSizedArray(t.viewData.length),
                        i = t.viewData.length;
                      for (n = 0; n < i; n += 1)
                        r[n] = new e(t.viewData[n], t.masksProperties[n]);
                      return function (e) {
                        for (n = 0; n < i; ) {
                          if (t.masksProperties[n].nm === e) return r[n];
                          n += 1;
                        }
                        return null;
                      };
                    }
                  );
                })(),
                ExpressionPropertyInterface = (function () {
                  var e = { pv: 0, v: 0, mult: 1 },
                    t = { pv: [0, 0, 0], v: [0, 0, 0], mult: 1 };
                  function n(e, t, n) {
                    Object.defineProperty(e, "velocity", {
                      get: function () {
                        return t.getVelocityAtTime(t.comp.currentFrame);
                      }
                    }),
                      (e.numKeys = t.keyframes ? t.keyframes.length : 0),
                      (e.key = function (r) {
                        if (!e.numKeys) return 0;
                        var i;
                        i =
                          "s" in t.keyframes[r - 1]
                            ? t.keyframes[r - 1].s
                            : "e" in t.keyframes[r - 2]
                            ? t.keyframes[r - 2].e
                            : t.keyframes[r - 2].s;
                        var a =
                          "unidimensional" === n
                            ? new Number(i)
                            : Object.assign({}, i);
                        return (
                          (a.time =
                            t.keyframes[r - 1].t /
                            t.elem.comp.globalData.frameRate),
                          (a.value = "unidimensional" === n ? i[0] : i),
                          a
                        );
                      }),
                      (e.valueAtTime = t.getValueAtTime),
                      (e.speedAtTime = t.getSpeedAtTime),
                      (e.velocityAtTime = t.getVelocityAtTime),
                      (e.propertyGroup = t.propertyGroup);
                  }
                  function r() {
                    return e;
                  }
                  return function (i) {
                    return i
                      ? "unidimensional" === i.propType
                        ? (function (t) {
                            (t && "pv" in t) || (t = e);
                            var r = 1 / t.mult,
                              i = t.pv * r,
                              a = new Number(i);
                            return (
                              (a.value = i),
                              n(a, t, "unidimensional"),
                              function () {
                                return (
                                  t.k && t.getValue(),
                                  (i = t.v * r),
                                  a.value !== i &&
                                    (((a = new Number(i)).value = i),
                                    n(a, t, "unidimensional")),
                                  a
                                );
                              }
                            );
                          })(i)
                        : (function (e) {
                            (e && "pv" in e) || (e = t);
                            var r = 1 / e.mult,
                              i = (e.data && e.data.l) || e.pv.length,
                              a = createTypedArray("float32", i),
                              s = createTypedArray("float32", i);
                            return (
                              (a.value = s),
                              n(a, e, "multidimensional"),
                              function () {
                                e.k && e.getValue();
                                for (var t = 0; t < i; t += 1)
                                  (s[t] = e.v[t] * r), (a[t] = s[t]);
                                return a;
                              }
                            );
                          })(i)
                      : r;
                  };
                })(),
                TransformExpressionInterface = function (e) {
                  function t(e) {
                    switch (e) {
                      case "scale":
                      case "Scale":
                      case "ADBE Scale":
                      case 6:
                        return t.scale;
                      case "rotation":
                      case "Rotation":
                      case "ADBE Rotation":
                      case "ADBE Rotate Z":
                      case 10:
                        return t.rotation;
                      case "ADBE Rotate X":
                        return t.xRotation;
                      case "ADBE Rotate Y":
                        return t.yRotation;
                      case "position":
                      case "Position":
                      case "ADBE Position":
                      case 2:
                        return t.position;
                      case "ADBE Position_0":
                        return t.xPosition;
                      case "ADBE Position_1":
                        return t.yPosition;
                      case "ADBE Position_2":
                        return t.zPosition;
                      case "anchorPoint":
                      case "AnchorPoint":
                      case "Anchor Point":
                      case "ADBE AnchorPoint":
                      case 1:
                        return t.anchorPoint;
                      case "opacity":
                      case "Opacity":
                      case 11:
                        return t.opacity;
                      default:
                        return null;
                    }
                  }
                  var n, r, i, a;
                  return (
                    Object.defineProperty(t, "rotation", {
                      get: ExpressionPropertyInterface(e.r || e.rz)
                    }),
                    Object.defineProperty(t, "zRotation", {
                      get: ExpressionPropertyInterface(e.rz || e.r)
                    }),
                    Object.defineProperty(t, "xRotation", {
                      get: ExpressionPropertyInterface(e.rx)
                    }),
                    Object.defineProperty(t, "yRotation", {
                      get: ExpressionPropertyInterface(e.ry)
                    }),
                    Object.defineProperty(t, "scale", {
                      get: ExpressionPropertyInterface(e.s)
                    }),
                    e.p
                      ? (a = ExpressionPropertyInterface(e.p))
                      : ((n = ExpressionPropertyInterface(e.px)),
                        (r = ExpressionPropertyInterface(e.py)),
                        e.pz && (i = ExpressionPropertyInterface(e.pz))),
                    Object.defineProperty(t, "position", {
                      get: function () {
                        return e.p ? a() : [n(), r(), i ? i() : 0];
                      }
                    }),
                    Object.defineProperty(t, "xPosition", {
                      get: ExpressionPropertyInterface(e.px)
                    }),
                    Object.defineProperty(t, "yPosition", {
                      get: ExpressionPropertyInterface(e.py)
                    }),
                    Object.defineProperty(t, "zPosition", {
                      get: ExpressionPropertyInterface(e.pz)
                    }),
                    Object.defineProperty(t, "anchorPoint", {
                      get: ExpressionPropertyInterface(e.a)
                    }),
                    Object.defineProperty(t, "opacity", {
                      get: ExpressionPropertyInterface(e.o)
                    }),
                    Object.defineProperty(t, "skew", {
                      get: ExpressionPropertyInterface(e.sk)
                    }),
                    Object.defineProperty(t, "skewAxis", {
                      get: ExpressionPropertyInterface(e.sa)
                    }),
                    Object.defineProperty(t, "orientation", {
                      get: ExpressionPropertyInterface(e.or)
                    }),
                    t
                  );
                },
                LayerExpressionInterface = (function () {
                  function e(e) {
                    var t = new Matrix();
                    return (
                      void 0 !== e
                        ? this._elem.finalTransform.mProp
                            .getValueAtTime(e)
                            .clone(t)
                        : this._elem.finalTransform.mProp.applyToMatrix(t),
                      t
                    );
                  }
                  function t(e, t) {
                    var n = this.getMatrix(t);
                    return (
                      (n.props[12] = 0),
                      (n.props[13] = 0),
                      (n.props[14] = 0),
                      this.applyPoint(n, e)
                    );
                  }
                  function n(e, t) {
                    var n = this.getMatrix(t);
                    return this.applyPoint(n, e);
                  }
                  function r(e, t) {
                    var n = this.getMatrix(t);
                    return (
                      (n.props[12] = 0),
                      (n.props[13] = 0),
                      (n.props[14] = 0),
                      this.invertPoint(n, e)
                    );
                  }
                  function i(e, t) {
                    var n = this.getMatrix(t);
                    return this.invertPoint(n, e);
                  }
                  function a(e, t) {
                    if (this._elem.hierarchy && this._elem.hierarchy.length) {
                      var n,
                        r = this._elem.hierarchy.length;
                      for (n = 0; n < r; n += 1)
                        this._elem.hierarchy[
                          n
                        ].finalTransform.mProp.applyToMatrix(e);
                    }
                    return e.applyToPointArray(t[0], t[1], t[2] || 0);
                  }
                  function s(e, t) {
                    if (this._elem.hierarchy && this._elem.hierarchy.length) {
                      var n,
                        r = this._elem.hierarchy.length;
                      for (n = 0; n < r; n += 1)
                        this._elem.hierarchy[
                          n
                        ].finalTransform.mProp.applyToMatrix(e);
                    }
                    return e.inversePoint(t);
                  }
                  function o(e) {
                    var t = new Matrix();
                    if (
                      (t.reset(),
                      this._elem.finalTransform.mProp.applyToMatrix(t),
                      this._elem.hierarchy && this._elem.hierarchy.length)
                    ) {
                      var n,
                        r = this._elem.hierarchy.length;
                      for (n = 0; n < r; n += 1)
                        this._elem.hierarchy[
                          n
                        ].finalTransform.mProp.applyToMatrix(t);
                      return t.inversePoint(e);
                    }
                    return t.inversePoint(e);
                  }
                  function l() {
                    return [1, 1, 1, 1];
                  }
                  return function (h) {
                    var u;
                    function c(e) {
                      switch (e) {
                        case "ADBE Root Vectors Group":
                        case "Contents":
                        case 2:
                          return c.shapeInterface;
                        case 1:
                        case 6:
                        case "Transform":
                        case "transform":
                        case "ADBE Transform Group":
                          return u;
                        case 4:
                        case "ADBE Effect Parade":
                        case "effects":
                        case "Effects":
                          return c.effect;
                        case "ADBE Text Properties":
                          return c.textInterface;
                        default:
                          return null;
                      }
                    }
                    (c.getMatrix = e),
                      (c.invertPoint = s),
                      (c.applyPoint = a),
                      (c.toWorld = n),
                      (c.toWorldVec = t),
                      (c.fromWorld = i),
                      (c.fromWorldVec = r),
                      (c.toComp = n),
                      (c.fromComp = o),
                      (c.sampleImage = l),
                      (c.sourceRectAtTime = h.sourceRectAtTime.bind(h)),
                      (c._elem = h);
                    var d = getDescriptor(
                      (u = TransformExpressionInterface(h.finalTransform.mProp)),
                      "anchorPoint"
                    );
                    return (
                      Object.defineProperties(c, {
                        hasParent: {
                          get: function () {
                            return h.hierarchy.length;
                          }
                        },
                        parent: {
                          get: function () {
                            return h.hierarchy[0].layerInterface;
                          }
                        },
                        rotation: getDescriptor(u, "rotation"),
                        scale: getDescriptor(u, "scale"),
                        position: getDescriptor(u, "position"),
                        opacity: getDescriptor(u, "opacity"),
                        anchorPoint: d,
                        anchor_point: d,
                        transform: {
                          get: function () {
                            return u;
                          }
                        },
                        active: {
                          get: function () {
                            return h.isInRange;
                          }
                        }
                      }),
                      (c.startTime = h.data.st),
                      (c.index = h.data.ind),
                      (c.source = h.data.refId),
                      (c.height = 0 === h.data.ty ? h.data.h : 100),
                      (c.width = 0 === h.data.ty ? h.data.w : 100),
                      (c.inPoint = h.data.ip / h.comp.globalData.frameRate),
                      (c.outPoint = h.data.op / h.comp.globalData.frameRate),
                      (c._name = h.data.nm),
                      (c.registerMaskInterface = function (e) {
                        c.mask = new MaskManagerInterface(e, h);
                      }),
                      (c.registerEffectsInterface = function (e) {
                        c.effect = e;
                      }),
                      c
                    );
                  };
                })(),
                propertyGroupFactory = function (e, t) {
                  return function (n) {
                    return (n = void 0 === n ? 1 : n) <= 0 ? e : t(n - 1);
                  };
                },
                PropertyInterface = function (e, t) {
                  var n = { _name: e };
                  return function (e) {
                    return (e = void 0 === e ? 1 : e) <= 0 ? n : t(e - 1);
                  };
                },
                EffectsExpressionInterface = (function () {
                  function e(n, r, i, a) {
                    function s(e) {
                      for (var t = n.ef, r = 0, i = t.length; r < i; ) {
                        if (e === t[r].nm || e === t[r].mn || e === t[r].ix)
                          return 5 === t[r].ty ? h[r] : h[r]();
                        r += 1;
                      }
                      throw new Error();
                    }
                    var o,
                      l = propertyGroupFactory(s, i),
                      h = [],
                      u = n.ef.length;
                    for (o = 0; o < u; o += 1)
                      5 === n.ef[o].ty
                        ? h.push(
                            e(
                              n.ef[o],
                              r.effectElements[o],
                              r.effectElements[o].propertyGroup,
                              a
                            )
                          )
                        : h.push(t(r.effectElements[o], n.ef[o].ty, a, l));
                    return (
                      "ADBE Color Control" === n.mn &&
                        Object.defineProperty(s, "color", {
                          get: function () {
                            return h[0]();
                          }
                        }),
                      Object.defineProperties(s, {
                        numProperties: {
                          get: function () {
                            return n.np;
                          }
                        },
                        _name: { value: n.nm },
                        propertyGroup: { value: l }
                      }),
                      (s.enabled = 0 !== n.en),
                      (s.active = s.enabled),
                      s
                    );
                  }
                  function t(e, t, n, r) {
                    var i = ExpressionPropertyInterface(e.p);
                    return (
                      e.p.setGroupProperty &&
                        e.p.setGroupProperty(PropertyInterface("", r)),
                      function () {
                        return 10 === t ? n.comp.compInterface(e.p.v) : i();
                      }
                    );
                  }
                  return {
                    createEffectsInterface: function (t, n) {
                      if (t.effectsManager) {
                        var r,
                          i = [],
                          a = t.data.ef,
                          s = t.effectsManager.effectElements.length;
                        for (r = 0; r < s; r += 1)
                          i.push(
                            e(a[r], t.effectsManager.effectElements[r], n, t)
                          );
                        var o = t.data.ef || [],
                          l = function (e) {
                            for (r = 0, s = o.length; r < s; ) {
                              if (e === o[r].nm || e === o[r].mn || e === o[r].ix)
                                return i[r];
                              r += 1;
                            }
                            return null;
                          };
                        return (
                          Object.defineProperty(l, "numProperties", {
                            get: function () {
                              return o.length;
                            }
                          }),
                          l
                        );
                      }
                      return null;
                    }
                  };
                })(),
                ShapePathInterface = function (e, t, n) {
                  var r = t.sh;
                  function i(e) {
                    return "Shape" === e ||
                      "shape" === e ||
                      "Path" === e ||
                      "path" === e ||
                      "ADBE Vector Shape" === e ||
                      2 === e
                      ? i.path
                      : null;
                  }
                  var a = propertyGroupFactory(i, n);
                  return (
                    r.setGroupProperty(PropertyInterface("Path", a)),
                    Object.defineProperties(i, {
                      path: {
                        get: function () {
                          return r.k && r.getValue(), r;
                        }
                      },
                      shape: {
                        get: function () {
                          return r.k && r.getValue(), r;
                        }
                      },
                      _name: { value: e.nm },
                      ix: { value: e.ix },
                      propertyIndex: { value: e.ix },
                      mn: { value: e.mn },
                      propertyGroup: { value: n }
                    }),
                    i
                  );
                },
                ShapeExpressionInterface = (function () {
                  function e(e, s, d) {
                    var f,
                      p = [],
                      m = e ? e.length : 0;
                    for (f = 0; f < m; f += 1)
                      "gr" === e[f].ty
                        ? p.push(t(e[f], s[f], d))
                        : "fl" === e[f].ty
                        ? p.push(n(e[f], s[f], d))
                        : "st" === e[f].ty
                        ? p.push(i(e[f], s[f], d))
                        : "tm" === e[f].ty
                        ? p.push(a(e[f], s[f], d))
                        : "tr" === e[f].ty ||
                          ("el" === e[f].ty
                            ? p.push(o(e[f], s[f], d))
                            : "sr" === e[f].ty
                            ? p.push(l(e[f], s[f], d))
                            : "sh" === e[f].ty
                            ? p.push(ShapePathInterface(e[f], s[f], d))
                            : "rc" === e[f].ty
                            ? p.push(h(e[f], s[f], d))
                            : "rd" === e[f].ty
                            ? p.push(u(e[f], s[f], d))
                            : "rp" === e[f].ty
                            ? p.push(c(e[f], s[f], d))
                            : "gf" === e[f].ty
                            ? p.push(r(e[f], s[f], d))
                            : p.push(
                                (e[f],
                                s[f],
                                function () {
                                  return null;
                                })
                              ));
                    return p;
                  }
                  function t(t, n, r) {
                    var i = function (e) {
                      switch (e) {
                        case "ADBE Vectors Group":
                        case "Contents":
                        case 2:
                          return i.content;
                        default:
                          return i.transform;
                      }
                    };
                    i.propertyGroup = propertyGroupFactory(i, r);
                    var a = (function (t, n, r) {
                        var i,
                          a = function (e) {
                            for (var t = 0, n = i.length; t < n; ) {
                              if (
                                i[t]._name === e ||
                                i[t].mn === e ||
                                i[t].propertyIndex === e ||
                                i[t].ix === e ||
                                i[t].ind === e
                              )
                                return i[t];
                              t += 1;
                            }
                            return "number" == typeof e ? i[e - 1] : null;
                          };
                        (a.propertyGroup = propertyGroupFactory(a, r)),
                          (i = e(t.it, n.it, a.propertyGroup)),
                          (a.numProperties = i.length);
                        var o = s(
                          t.it[t.it.length - 1],
                          n.it[n.it.length - 1],
                          a.propertyGroup
                        );
                        return (
                          (a.transform = o),
                          (a.propertyIndex = t.cix),
                          (a._name = t.nm),
                          a
                        );
                      })(t, n, i.propertyGroup),
                      o = s(
                        t.it[t.it.length - 1],
                        n.it[n.it.length - 1],
                        i.propertyGroup
                      );
                    return (
                      (i.content = a),
                      (i.transform = o),
                      Object.defineProperty(i, "_name", {
                        get: function () {
                          return t.nm;
                        }
                      }),
                      (i.numProperties = t.np),
                      (i.propertyIndex = t.ix),
                      (i.nm = t.nm),
                      (i.mn = t.mn),
                      i
                    );
                  }
                  function n(e, t, n) {
                    function r(e) {
                      return "Color" === e || "color" === e
                        ? r.color
                        : "Opacity" === e || "opacity" === e
                        ? r.opacity
                        : null;
                    }
                    return (
                      Object.defineProperties(r, {
                        color: { get: ExpressionPropertyInterface(t.c) },
                        opacity: { get: ExpressionPropertyInterface(t.o) },
                        _name: { value: e.nm },
                        mn: { value: e.mn }
                      }),
                      t.c.setGroupProperty(PropertyInterface("Color", n)),
                      t.o.setGroupProperty(PropertyInterface("Opacity", n)),
                      r
                    );
                  }
                  function r(e, t, n) {
                    function r(e) {
                      return "Start Point" === e || "start point" === e
                        ? r.startPoint
                        : "End Point" === e || "end point" === e
                        ? r.endPoint
                        : "Opacity" === e || "opacity" === e
                        ? r.opacity
                        : null;
                    }
                    return (
                      Object.defineProperties(r, {
                        startPoint: { get: ExpressionPropertyInterface(t.s) },
                        endPoint: { get: ExpressionPropertyInterface(t.e) },
                        opacity: { get: ExpressionPropertyInterface(t.o) },
                        type: {
                          get: function () {
                            return "a";
                          }
                        },
                        _name: { value: e.nm },
                        mn: { value: e.mn }
                      }),
                      t.s.setGroupProperty(PropertyInterface("Start Point", n)),
                      t.e.setGroupProperty(PropertyInterface("End Point", n)),
                      t.o.setGroupProperty(PropertyInterface("Opacity", n)),
                      r
                    );
                  }
                  function i(e, t, n) {
                    var r,
                      i = propertyGroupFactory(h, n),
                      a = propertyGroupFactory(l, i);
                    function s(n) {
                      Object.defineProperty(l, e.d[n].nm, {
                        get: ExpressionPropertyInterface(t.d.dataProps[n].p)
                      });
                    }
                    var o = e.d ? e.d.length : 0,
                      l = {};
                    for (r = 0; r < o; r += 1)
                      s(r), t.d.dataProps[r].p.setGroupProperty(a);
                    function h(e) {
                      return "Color" === e || "color" === e
                        ? h.color
                        : "Opacity" === e || "opacity" === e
                        ? h.opacity
                        : "Stroke Width" === e || "stroke width" === e
                        ? h.strokeWidth
                        : null;
                    }
                    return (
                      Object.defineProperties(h, {
                        color: { get: ExpressionPropertyInterface(t.c) },
                        opacity: { get: ExpressionPropertyInterface(t.o) },
                        strokeWidth: { get: ExpressionPropertyInterface(t.w) },
                        dash: {
                          get: function () {
                            return l;
                          }
                        },
                        _name: { value: e.nm },
                        mn: { value: e.mn }
                      }),
                      t.c.setGroupProperty(PropertyInterface("Color", i)),
                      t.o.setGroupProperty(PropertyInterface("Opacity", i)),
                      t.w.setGroupProperty(PropertyInterface("Stroke Width", i)),
                      h
                    );
                  }
                  function a(e, t, n) {
                    function r(t) {
                      return t === e.e.ix || "End" === t || "end" === t
                        ? r.end
                        : t === e.s.ix
                        ? r.start
                        : t === e.o.ix
                        ? r.offset
                        : null;
                    }
                    var i = propertyGroupFactory(r, n);
                    return (
                      (r.propertyIndex = e.ix),
                      t.s.setGroupProperty(PropertyInterface("Start", i)),
                      t.e.setGroupProperty(PropertyInterface("End", i)),
                      t.o.setGroupProperty(PropertyInterface("Offset", i)),
                      (r.propertyIndex = e.ix),
                      (r.propertyGroup = n),
                      Object.defineProperties(r, {
                        start: { get: ExpressionPropertyInterface(t.s) },
                        end: { get: ExpressionPropertyInterface(t.e) },
                        offset: { get: ExpressionPropertyInterface(t.o) },
                        _name: { value: e.nm }
                      }),
                      (r.mn = e.mn),
                      r
                    );
                  }
                  function s(e, t, n) {
                    function r(t) {
                      return e.a.ix === t || "Anchor Point" === t
                        ? r.anchorPoint
                        : e.o.ix === t || "Opacity" === t
                        ? r.opacity
                        : e.p.ix === t || "Position" === t
                        ? r.position
                        : e.r.ix === t ||
                          "Rotation" === t ||
                          "ADBE Vector Rotation" === t
                        ? r.rotation
                        : e.s.ix === t || "Scale" === t
                        ? r.scale
                        : (e.sk && e.sk.ix === t) || "Skew" === t
                        ? r.skew
                        : (e.sa && e.sa.ix === t) || "Skew Axis" === t
                        ? r.skewAxis
                        : null;
                    }
                    var i = propertyGroupFactory(r, n);
                    return (
                      t.transform.mProps.o.setGroupProperty(
                        PropertyInterface("Opacity", i)
                      ),
                      t.transform.mProps.p.setGroupProperty(
                        PropertyInterface("Position", i)
                      ),
                      t.transform.mProps.a.setGroupProperty(
                        PropertyInterface("Anchor Point", i)
                      ),
                      t.transform.mProps.s.setGroupProperty(
                        PropertyInterface("Scale", i)
                      ),
                      t.transform.mProps.r.setGroupProperty(
                        PropertyInterface("Rotation", i)
                      ),
                      t.transform.mProps.sk &&
                        (t.transform.mProps.sk.setGroupProperty(
                          PropertyInterface("Skew", i)
                        ),
                        t.transform.mProps.sa.setGroupProperty(
                          PropertyInterface("Skew Angle", i)
                        )),
                      t.transform.op.setGroupProperty(
                        PropertyInterface("Opacity", i)
                      ),
                      Object.defineProperties(r, {
                        opacity: {
                          get: ExpressionPropertyInterface(t.transform.mProps.o)
                        },
                        position: {
                          get: ExpressionPropertyInterface(t.transform.mProps.p)
                        },
                        anchorPoint: {
                          get: ExpressionPropertyInterface(t.transform.mProps.a)
                        },
                        scale: {
                          get: ExpressionPropertyInterface(t.transform.mProps.s)
                        },
                        rotation: {
                          get: ExpressionPropertyInterface(t.transform.mProps.r)
                        },
                        skew: {
                          get: ExpressionPropertyInterface(t.transform.mProps.sk)
                        },
                        skewAxis: {
                          get: ExpressionPropertyInterface(t.transform.mProps.sa)
                        },
                        _name: { value: e.nm }
                      }),
                      (r.ty = "tr"),
                      (r.mn = e.mn),
                      (r.propertyGroup = n),
                      r
                    );
                  }
                  function o(e, t, n) {
                    function r(t) {
                      return e.p.ix === t
                        ? r.position
                        : e.s.ix === t
                        ? r.size
                        : null;
                    }
                    var i = propertyGroupFactory(r, n);
                    r.propertyIndex = e.ix;
                    var a = "tm" === t.sh.ty ? t.sh.prop : t.sh;
                    return (
                      a.s.setGroupProperty(PropertyInterface("Size", i)),
                      a.p.setGroupProperty(PropertyInterface("Position", i)),
                      Object.defineProperties(r, {
                        size: { get: ExpressionPropertyInterface(a.s) },
                        position: { get: ExpressionPropertyInterface(a.p) },
                        _name: { value: e.nm }
                      }),
                      (r.mn = e.mn),
                      r
                    );
                  }
                  function l(e, t, n) {
                    function r(t) {
                      return e.p.ix === t
                        ? r.position
                        : e.r.ix === t
                        ? r.rotation
                        : e.pt.ix === t
                        ? r.points
                        : e.or.ix === t || "ADBE Vector Star Outer Radius" === t
                        ? r.outerRadius
                        : e.os.ix === t
                        ? r.outerRoundness
                        : !e.ir ||
                          (e.ir.ix !== t && "ADBE Vector Star Inner Radius" !== t)
                        ? e.is && e.is.ix === t
                          ? r.innerRoundness
                          : null
                        : r.innerRadius;
                    }
                    var i = propertyGroupFactory(r, n),
                      a = "tm" === t.sh.ty ? t.sh.prop : t.sh;
                    return (
                      (r.propertyIndex = e.ix),
                      a.or.setGroupProperty(PropertyInterface("Outer Radius", i)),
                      a.os.setGroupProperty(
                        PropertyInterface("Outer Roundness", i)
                      ),
                      a.pt.setGroupProperty(PropertyInterface("Points", i)),
                      a.p.setGroupProperty(PropertyInterface("Position", i)),
                      a.r.setGroupProperty(PropertyInterface("Rotation", i)),
                      e.ir &&
                        (a.ir.setGroupProperty(
                          PropertyInterface("Inner Radius", i)
                        ),
                        a.is.setGroupProperty(
                          PropertyInterface("Inner Roundness", i)
                        )),
                      Object.defineProperties(r, {
                        position: { get: ExpressionPropertyInterface(a.p) },
                        rotation: { get: ExpressionPropertyInterface(a.r) },
                        points: { get: ExpressionPropertyInterface(a.pt) },
                        outerRadius: { get: ExpressionPropertyInterface(a.or) },
                        outerRoundness: {
                          get: ExpressionPropertyInterface(a.os)
                        },
                        innerRadius: { get: ExpressionPropertyInterface(a.ir) },
                        innerRoundness: {
                          get: ExpressionPropertyInterface(a.is)
                        },
                        _name: { value: e.nm }
                      }),
                      (r.mn = e.mn),
                      r
                    );
                  }
                  function h(e, t, n) {
                    function r(t) {
                      return e.p.ix === t
                        ? r.position
                        : e.r.ix === t
                        ? r.roundness
                        : e.s.ix === t ||
                          "Size" === t ||
                          "ADBE Vector Rect Size" === t
                        ? r.size
                        : null;
                    }
                    var i = propertyGroupFactory(r, n),
                      a = "tm" === t.sh.ty ? t.sh.prop : t.sh;
                    return (
                      (r.propertyIndex = e.ix),
                      a.p.setGroupProperty(PropertyInterface("Position", i)),
                      a.s.setGroupProperty(PropertyInterface("Size", i)),
                      a.r.setGroupProperty(PropertyInterface("Rotation", i)),
                      Object.defineProperties(r, {
                        position: { get: ExpressionPropertyInterface(a.p) },
                        roundness: { get: ExpressionPropertyInterface(a.r) },
                        size: { get: ExpressionPropertyInterface(a.s) },
                        _name: { value: e.nm }
                      }),
                      (r.mn = e.mn),
                      r
                    );
                  }
                  function u(e, t, n) {
                    function r(t) {
                      return e.r.ix === t || "Round Corners 1" === t
                        ? r.radius
                        : null;
                    }
                    var i = propertyGroupFactory(r, n),
                      a = t;
                    return (
                      (r.propertyIndex = e.ix),
                      a.rd.setGroupProperty(PropertyInterface("Radius", i)),
                      Object.defineProperties(r, {
                        radius: { get: ExpressionPropertyInterface(a.rd) },
                        _name: { value: e.nm }
                      }),
                      (r.mn = e.mn),
                      r
                    );
                  }
                  function c(e, t, n) {
                    function r(t) {
                      return e.c.ix === t || "Copies" === t
                        ? r.copies
                        : e.o.ix === t || "Offset" === t
                        ? r.offset
                        : null;
                    }
                    var i = propertyGroupFactory(r, n),
                      a = t;
                    return (
                      (r.propertyIndex = e.ix),
                      a.c.setGroupProperty(PropertyInterface("Copies", i)),
                      a.o.setGroupProperty(PropertyInterface("Offset", i)),
                      Object.defineProperties(r, {
                        copies: { get: ExpressionPropertyInterface(a.c) },
                        offset: { get: ExpressionPropertyInterface(a.o) },
                        _name: { value: e.nm }
                      }),
                      (r.mn = e.mn),
                      r
                    );
                  }
                  return function (t, n, r) {
                    var i;
                    function a(e) {
                      if ("number" == typeof e)
                        return 0 === (e = void 0 === e ? 1 : e) ? r : i[e - 1];
                      for (var t = 0, n = i.length; t < n; ) {
                        if (i[t]._name === e) return i[t];
                        t += 1;
                      }
                      return null;
                    }
                    return (
                      (a.propertyGroup = propertyGroupFactory(a, function () {
                        return r;
                      })),
                      (i = e(t, n, a.propertyGroup)),
                      (a.numProperties = i.length),
                      (a._name = "Contents"),
                      a
                    );
                  };
                })(),
                TextExpressionInterface = function (e) {
                  var t;
                  function n(e) {
                    return "ADBE Text Document" === e ? n.sourceText : null;
                  }
                  return (
                    Object.defineProperty(n, "sourceText", {
                      get: function () {
                        e.textProperty.getValue();
                        var n = e.textProperty.currentData.t;
                        return (
                          (t && n === t.value) ||
                            (((t = new String(n)).value = n || new String(n)),
                            Object.defineProperty(t, "style", {
                              get: function () {
                                return {
                                  fillColor: e.textProperty.currentData.fc
                                };
                              }
                            })),
                          t
                        );
                      }
                    }),
                    n
                  );
                };
              function _typeof(e) {
                return (
                  (_typeof =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                      ? function (e) {
                          return typeof e;
                        }
                      : function (e) {
                          return e &&
                            "function" == typeof Symbol &&
                            e.constructor === Symbol &&
                            e !== Symbol.prototype
                            ? "symbol"
                            : typeof e;
                        }),
                  _typeof(e)
                );
              }
              var FootageInterface =
                  ((dataInterfaceFactory = function (e) {
                    function t(e) {
                      return "Outline" === e ? t.outlineInterface() : null;
                    }
                    return (
                      (t._name = "Outline"),
                      (t.outlineInterface = (function (e) {
                        var t = "",
                          n = e.getFootageData();
                        function r(e) {
                          if (n[e])
                            return (
                              (t = e), "object" === _typeof((n = n[e])) ? r : n
                            );
                          var i = e.indexOf(t);
                          if (-1 !== i) {
                            var a = parseInt(e.substr(i + t.length), 10);
                            return "object" === _typeof((n = n[a])) ? r : n;
                          }
                          return "";
                        }
                        return function () {
                          return (t = ""), (n = e.getFootageData()), r;
                        };
                      })(e)),
                      t
                    );
                  }),
                  function (e) {
                    function t(e) {
                      return "Data" === e ? t.dataInterface : null;
                    }
                    return (
                      (t._name = "Data"),
                      (t.dataInterface = dataInterfaceFactory(e)),
                      t
                    );
                  }),
                dataInterfaceFactory,
                interfaces = {
                  layer: LayerExpressionInterface,
                  effects: EffectsExpressionInterface,
                  comp: CompExpressionInterface,
                  shape: ShapeExpressionInterface,
                  text: TextExpressionInterface,
                  footage: FootageInterface
                };
              function getInterface(e) {
                return interfaces[e] || null;
              }
              var expressionHelpers = {
                searchExpressions: function (e, t, n) {
                  t.x &&
                    ((n.k = !0),
                    (n.x = !0),
                    (n.initiateExpression = ExpressionManager.initiateExpression),
                    n.effectsSequence.push(
                      n.initiateExpression(e, t, n).bind(n)
                    ));
                },
                getSpeedAtTime: function (e) {
                  var t = this.getValueAtTime(e),
                    n = this.getValueAtTime(e + -0.01),
                    r = 0;
                  if (t.length) {
                    var i;
                    for (i = 0; i < t.length; i += 1)
                      r += Math.pow(n[i] - t[i], 2);
                    r = 100 * Math.sqrt(r);
                  } else r = 0;
                  return r;
                },
                getVelocityAtTime: function (e) {
                  if (void 0 !== this.vel) return this.vel;
                  var t,
                    n,
                    r = -0.001,
                    i = this.getValueAtTime(e),
                    a = this.getValueAtTime(e + r);
                  if (i.length)
                    for (
                      t = createTypedArray("float32", i.length), n = 0;
                      n < i.length;
                      n += 1
                    )
                      t[n] = (a[n] - i[n]) / r;
                  else t = (a - i) / r;
                  return t;
                },
                getValueAtTime: function (e) {
                  return (
                    (e *= this.elem.globalData.frameRate),
                    (e -= this.offsetTime) !== this._cachingAtTime.lastFrame &&
                      ((this._cachingAtTime.lastIndex =
                        this._cachingAtTime.lastFrame < e
                          ? this._cachingAtTime.lastIndex
                          : 0),
                      (this._cachingAtTime.value = this.interpolateValue(
                        e,
                        this._cachingAtTime
                      )),
                      (this._cachingAtTime.lastFrame = e)),
                    this._cachingAtTime.value
                  );
                },
                getStaticValueAtTime: function () {
                  return this.pv;
                },
                setGroupProperty: function (e) {
                  this.propertyGroup = e;
                }
              };
              function addPropertyDecorator() {
                function e(e, t, n) {
                  if (!this.k || !this.keyframes) return this.pv;
                  e = e ? e.toLowerCase() : "";
                  var r,
                    i,
                    a,
                    s,
                    o,
                    l = this.comp.renderedFrame,
                    h = this.keyframes,
                    u = h[h.length - 1].t;
                  if (l <= u) return this.pv;
                  if (
                    (n
                      ? (i =
                          u -
                          (r = t
                            ? Math.abs(
                                u - this.elem.comp.globalData.frameRate * t
                              )
                            : Math.max(0, u - this.elem.data.ip)))
                      : ((!t || t > h.length - 1) && (t = h.length - 1),
                        (r = u - (i = h[h.length - 1 - t].t))),
                    "pingpong" === e)
                  ) {
                    if (Math.floor((l - i) / r) % 2 != 0)
                      return this.getValueAtTime(
                        (r - ((l - i) % r) + i) / this.comp.globalData.frameRate,
                        0
                      );
                  } else {
                    if ("offset" === e) {
                      var c = this.getValueAtTime(
                          i / this.comp.globalData.frameRate,
                          0
                        ),
                        d = this.getValueAtTime(
                          u / this.comp.globalData.frameRate,
                          0
                        ),
                        f = this.getValueAtTime(
                          (((l - i) % r) + i) / this.comp.globalData.frameRate,
                          0
                        ),
                        p = Math.floor((l - i) / r);
                      if (this.pv.length) {
                        for (
                          s = (o = new Array(c.length)).length, a = 0;
                          a < s;
                          a += 1
                        )
                          o[a] = (d[a] - c[a]) * p + f[a];
                        return o;
                      }
                      return (d - c) * p + f;
                    }
                    if ("continue" === e) {
                      var m = this.getValueAtTime(
                          u / this.comp.globalData.frameRate,
                          0
                        ),
                        g = this.getValueAtTime(
                          (u - 0.001) / this.comp.globalData.frameRate,
                          0
                        );
                      if (this.pv.length) {
                        for (
                          s = (o = new Array(m.length)).length, a = 0;
                          a < s;
                          a += 1
                        )
                          o[a] =
                            m[a] +
                            ((m[a] - g[a]) *
                              ((l - u) / this.comp.globalData.frameRate)) /
                              5e-4;
                        return o;
                      }
                      return m + ((l - u) / 0.001) * (m - g);
                    }
                  }
                  return this.getValueAtTime(
                    (((l - i) % r) + i) / this.comp.globalData.frameRate,
                    0
                  );
                }
                function t(e, t, n) {
                  if (!this.k) return this.pv;
                  e = e ? e.toLowerCase() : "";
                  var r,
                    i,
                    a,
                    s,
                    o,
                    l = this.comp.renderedFrame,
                    h = this.keyframes,
                    u = h[0].t;
                  if (l >= u) return this.pv;
                  if (
                    (n
                      ? (i =
                          u +
                          (r = t
                            ? Math.abs(this.elem.comp.globalData.frameRate * t)
                            : Math.max(0, this.elem.data.op - u)))
                      : ((!t || t > h.length - 1) && (t = h.length - 1),
                        (r = (i = h[t].t) - u)),
                    "pingpong" === e)
                  ) {
                    if (Math.floor((u - l) / r) % 2 == 0)
                      return this.getValueAtTime(
                        (((u - l) % r) + u) / this.comp.globalData.frameRate,
                        0
                      );
                  } else {
                    if ("offset" === e) {
                      var c = this.getValueAtTime(
                          u / this.comp.globalData.frameRate,
                          0
                        ),
                        d = this.getValueAtTime(
                          i / this.comp.globalData.frameRate,
                          0
                        ),
                        f = this.getValueAtTime(
                          (r - ((u - l) % r) + u) /
                            this.comp.globalData.frameRate,
                          0
                        ),
                        p = Math.floor((u - l) / r) + 1;
                      if (this.pv.length) {
                        for (
                          s = (o = new Array(c.length)).length, a = 0;
                          a < s;
                          a += 1
                        )
                          o[a] = f[a] - (d[a] - c[a]) * p;
                        return o;
                      }
                      return f - (d - c) * p;
                    }
                    if ("continue" === e) {
                      var m = this.getValueAtTime(
                          u / this.comp.globalData.frameRate,
                          0
                        ),
                        g = this.getValueAtTime(
                          (u + 0.001) / this.comp.globalData.frameRate,
                          0
                        );
                      if (this.pv.length) {
                        for (
                          s = (o = new Array(m.length)).length, a = 0;
                          a < s;
                          a += 1
                        )
                          o[a] = m[a] + ((m[a] - g[a]) * (u - l)) / 0.001;
                        return o;
                      }
                      return m + ((m - g) * (u - l)) / 0.001;
                    }
                  }
                  return this.getValueAtTime(
                    (r - (((u - l) % r) + u)) / this.comp.globalData.frameRate,
                    0
                  );
                }
                function n(e, t) {
                  if (!this.k) return this.pv;
                  if (((e = 0.5 * (e || 0.4)), (t = Math.floor(t || 5)) <= 1))
                    return this.pv;
                  var n,
                    r,
                    i = this.comp.renderedFrame / this.comp.globalData.frameRate,
                    a = i - e,
                    s = t > 1 ? (i + e - a) / (t - 1) : 1,
                    o = 0,
                    l = 0;
                  for (
                    n = this.pv.length
                      ? createTypedArray("float32", this.pv.length)
                      : 0;
                    o < t;
  
                  ) {
                    if (((r = this.getValueAtTime(a + o * s)), this.pv.length))
                      for (l = 0; l < this.pv.length; l += 1) n[l] += r[l];
                    else n += r;
                    o += 1;
                  }
                  if (this.pv.length)
                    for (l = 0; l < this.pv.length; l += 1) n[l] /= t;
                  else n /= t;
                  return n;
                }
                function r(e) {
                  this._transformCachingAtTime ||
                    (this._transformCachingAtTime = { v: new Matrix() });
                  var t = this._transformCachingAtTime.v;
                  if (
                    (t.cloneFromProps(this.pre.props),
                    this.appliedTransformations < 1)
                  ) {
                    var n = this.a.getValueAtTime(e);
                    t.translate(
                      -n[0] * this.a.mult,
                      -n[1] * this.a.mult,
                      n[2] * this.a.mult
                    );
                  }
                  if (this.appliedTransformations < 2) {
                    var r = this.s.getValueAtTime(e);
                    t.scale(
                      r[0] * this.s.mult,
                      r[1] * this.s.mult,
                      r[2] * this.s.mult
                    );
                  }
                  if (this.sk && this.appliedTransformations < 3) {
                    var i = this.sk.getValueAtTime(e),
                      a = this.sa.getValueAtTime(e);
                    t.skewFromAxis(-i * this.sk.mult, a * this.sa.mult);
                  }
                  if (this.r && this.appliedTransformations < 4) {
                    var s = this.r.getValueAtTime(e);
                    t.rotate(-s * this.r.mult);
                  } else if (!this.r && this.appliedTransformations < 4) {
                    var o = this.rz.getValueAtTime(e),
                      l = this.ry.getValueAtTime(e),
                      h = this.rx.getValueAtTime(e),
                      u = this.or.getValueAtTime(e);
                    t.rotateZ(-o * this.rz.mult)
                      .rotateY(l * this.ry.mult)
                      .rotateX(h * this.rx.mult)
                      .rotateZ(-u[2] * this.or.mult)
                      .rotateY(u[1] * this.or.mult)
                      .rotateX(u[0] * this.or.mult);
                  }
                  if (this.data.p && this.data.p.s) {
                    var c = this.px.getValueAtTime(e),
                      d = this.py.getValueAtTime(e);
                    if (this.data.p.z) {
                      var f = this.pz.getValueAtTime(e);
                      t.translate(
                        c * this.px.mult,
                        d * this.py.mult,
                        -f * this.pz.mult
                      );
                    } else t.translate(c * this.px.mult, d * this.py.mult, 0);
                  } else {
                    var p = this.p.getValueAtTime(e);
                    t.translate(
                      p[0] * this.p.mult,
                      p[1] * this.p.mult,
                      -p[2] * this.p.mult
                    );
                  }
                  return t;
                }
                function i() {
                  return this.v.clone(new Matrix());
                }
                var a = TransformPropertyFactory.getTransformProperty;
                TransformPropertyFactory.getTransformProperty = function (
                  e,
                  t,
                  n
                ) {
                  var s = a(e, t, n);
                  return (
                    s.dynamicProperties.length
                      ? (s.getValueAtTime = r.bind(s))
                      : (s.getValueAtTime = i.bind(s)),
                    (s.setGroupProperty = expressionHelpers.setGroupProperty),
                    s
                  );
                };
                var s = PropertyFactory.getProp;
                PropertyFactory.getProp = function (r, i, a, o, l) {
                  var h = s(r, i, a, o, l);
                  h.kf
                    ? (h.getValueAtTime =
                        expressionHelpers.getValueAtTime.bind(h))
                    : (h.getValueAtTime =
                        expressionHelpers.getStaticValueAtTime.bind(h)),
                    (h.setGroupProperty = expressionHelpers.setGroupProperty),
                    (h.loopOut = e),
                    (h.loopIn = t),
                    (h.smooth = n),
                    (h.getVelocityAtTime =
                      expressionHelpers.getVelocityAtTime.bind(h)),
                    (h.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(h)),
                    (h.numKeys = 1 === i.a ? i.k.length : 0),
                    (h.propertyIndex = i.ix);
                  var u = 0;
                  return (
                    0 !== a &&
                      (u = createTypedArray(
                        "float32",
                        1 === i.a ? i.k[0].s.length : i.k.length
                      )),
                    (h._cachingAtTime = {
                      lastFrame: initialDefaultFrame,
                      lastIndex: 0,
                      value: u
                    }),
                    expressionHelpers.searchExpressions(r, i, h),
                    h.k && l.addDynamicProperty(h),
                    h
                  );
                };
                var o = ShapePropertyFactory.getConstructorFunction(),
                  l = ShapePropertyFactory.getKeyframedConstructorFunction();
                function h() {}
                (h.prototype = {
                  vertices: function (e, t) {
                    this.k && this.getValue();
                    var n,
                      r = this.v;
                    void 0 !== t && (r = this.getValueAtTime(t, 0));
                    var i = r._length,
                      a = r[e],
                      s = r.v,
                      o = createSizedArray(i);
                    for (n = 0; n < i; n += 1)
                      o[n] =
                        "i" === e || "o" === e
                          ? [a[n][0] - s[n][0], a[n][1] - s[n][1]]
                          : [a[n][0], a[n][1]];
                    return o;
                  },
                  points: function (e) {
                    return this.vertices("v", e);
                  },
                  inTangents: function (e) {
                    return this.vertices("i", e);
                  },
                  outTangents: function (e) {
                    return this.vertices("o", e);
                  },
                  isClosed: function () {
                    return this.v.c;
                  },
                  pointOnPath: function (e, t) {
                    var n = this.v;
                    void 0 !== t && (n = this.getValueAtTime(t, 0)),
                      this._segmentsLength ||
                        (this._segmentsLength = bez.getSegmentsLength(n));
                    for (
                      var r,
                        i = this._segmentsLength,
                        a = i.lengths,
                        s = i.totalLength * e,
                        o = 0,
                        l = a.length,
                        h = 0;
                      o < l;
  
                    ) {
                      if (h + a[o].addedLength > s) {
                        var u = o,
                          c = n.c && o === l - 1 ? 0 : o + 1,
                          d = (s - h) / a[o].addedLength;
                        r = bez.getPointInSegment(
                          n.v[u],
                          n.v[c],
                          n.o[u],
                          n.i[c],
                          d,
                          a[o]
                        );
                        break;
                      }
                      (h += a[o].addedLength), (o += 1);
                    }
                    return (
                      r ||
                        (r = n.c
                          ? [n.v[0][0], n.v[0][1]]
                          : [n.v[n._length - 1][0], n.v[n._length - 1][1]]),
                      r
                    );
                  },
                  vectorOnPath: function (e, t, n) {
                    1 == e ? (e = this.v.c) : 0 == e && (e = 0.999);
                    var r = this.pointOnPath(e, t),
                      i = this.pointOnPath(e + 0.001, t),
                      a = i[0] - r[0],
                      s = i[1] - r[1],
                      o = Math.sqrt(Math.pow(a, 2) + Math.pow(s, 2));
                    return 0 === o
                      ? [0, 0]
                      : "tangent" === n
                      ? [a / o, s / o]
                      : [-s / o, a / o];
                  },
                  tangentOnPath: function (e, t) {
                    return this.vectorOnPath(e, t, "tangent");
                  },
                  normalOnPath: function (e, t) {
                    return this.vectorOnPath(e, t, "normal");
                  },
                  setGroupProperty: expressionHelpers.setGroupProperty,
                  getValueAtTime: expressionHelpers.getStaticValueAtTime
                }),
                  extendPrototype([h], o),
                  extendPrototype([h], l),
                  (l.prototype.getValueAtTime = function (e) {
                    return (
                      this._cachingAtTime ||
                        (this._cachingAtTime = {
                          shapeValue: shapePool.clone(this.pv),
                          lastIndex: 0,
                          lastTime: initialDefaultFrame
                        }),
                      (e *= this.elem.globalData.frameRate),
                      (e -= this.offsetTime) !== this._cachingAtTime.lastTime &&
                        ((this._cachingAtTime.lastIndex =
                          this._cachingAtTime.lastTime < e
                            ? this._caching.lastIndex
                            : 0),
                        (this._cachingAtTime.lastTime = e),
                        this.interpolateShape(
                          e,
                          this._cachingAtTime.shapeValue,
                          this._cachingAtTime
                        )),
                      this._cachingAtTime.shapeValue
                    );
                  }),
                  (l.prototype.initiateExpression =
                    ExpressionManager.initiateExpression);
                var u = ShapePropertyFactory.getShapeProp;
                ShapePropertyFactory.getShapeProp = function (e, t, n, r, i) {
                  var a = u(e, t, n, r, i);
                  return (
                    (a.propertyIndex = t.ix),
                    (a.lock = !1),
                    3 === n
                      ? expressionHelpers.searchExpressions(e, t.pt, a)
                      : 4 === n &&
                        expressionHelpers.searchExpressions(e, t.ks, a),
                    a.k && e.addDynamicProperty(a),
                    a
                  );
                };
              }
              function initialize$1() {
                addPropertyDecorator();
              }
              function addDecorator() {
                (TextProperty.prototype.getExpressionValue = function (e, t) {
                  var n = this.calculateExpression(t);
                  if (e.t !== n) {
                    var r = {};
                    return (
                      this.copyData(r, e),
                      (r.t = n.toString()),
                      (r.__complete = !1),
                      r
                    );
                  }
                  return e;
                }),
                  (TextProperty.prototype.searchProperty = function () {
                    var e = this.searchKeyframes(),
                      t = this.searchExpressions();
                    return (this.kf = e || t), this.kf;
                  }),
                  (TextProperty.prototype.searchExpressions = function () {
                    return this.data.d.x
                      ? ((this.calculateExpression =
                          ExpressionManager.initiateExpression.bind(this)(
                            this.elem,
                            this.data.d,
                            this
                          )),
                        this.addEffect(this.getExpressionValue.bind(this)),
                        !0)
                      : null;
                  });
              }
              function initialize() {
                addDecorator();
              }
              function SVGComposableEffect() {}
              SVGComposableEffect.prototype = {
                createMergeNode: function (e, t) {
                  var n,
                    r,
                    i = createNS("feMerge");
                  for (i.setAttribute("result", e), r = 0; r < t.length; r += 1)
                    (n = createNS("feMergeNode")).setAttribute("in", t[r]),
                      i.appendChild(n),
                      i.appendChild(n);
                  return i;
                }
              };
              var linearFilterValue =
                "0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";
              function SVGTintFilter(e, t, n, r, i) {
                this.filterManager = t;
                var a = createNS("feColorMatrix");
                a.setAttribute("type", "matrix"),
                  a.setAttribute("color-interpolation-filters", "linearRGB"),
                  a.setAttribute("values", linearFilterValue + " 1 0"),
                  (this.linearFilter = a),
                  a.setAttribute("result", r + "_tint_1"),
                  e.appendChild(a),
                  (a = createNS("feColorMatrix")).setAttribute("type", "matrix"),
                  a.setAttribute("color-interpolation-filters", "sRGB"),
                  a.setAttribute(
                    "values",
                    "1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"
                  ),
                  a.setAttribute("result", r + "_tint_2"),
                  e.appendChild(a),
                  (this.matrixFilter = a);
                var s = this.createMergeNode(r, [
                  i,
                  r + "_tint_1",
                  r + "_tint_2"
                ]);
                e.appendChild(s);
              }
              function SVGFillFilter(e, t, n, r) {
                this.filterManager = t;
                var i = createNS("feColorMatrix");
                i.setAttribute("type", "matrix"),
                  i.setAttribute("color-interpolation-filters", "sRGB"),
                  i.setAttribute(
                    "values",
                    "1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"
                  ),
                  i.setAttribute("result", r),
                  e.appendChild(i),
                  (this.matrixFilter = i);
              }
              function SVGStrokeEffect(e, t, n) {
                (this.initialized = !1),
                  (this.filterManager = t),
                  (this.elem = n),
                  (this.paths = []);
              }
              function SVGTritoneFilter(e, t, n, r) {
                this.filterManager = t;
                var i = createNS("feColorMatrix");
                i.setAttribute("type", "matrix"),
                  i.setAttribute("color-interpolation-filters", "linearRGB"),
                  i.setAttribute(
                    "values",
                    "0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"
                  ),
                  e.appendChild(i);
                var a = createNS("feComponentTransfer");
                a.setAttribute("color-interpolation-filters", "sRGB"),
                  a.setAttribute("result", r),
                  (this.matrixFilter = a);
                var s = createNS("feFuncR");
                s.setAttribute("type", "table"),
                  a.appendChild(s),
                  (this.feFuncR = s);
                var o = createNS("feFuncG");
                o.setAttribute("type", "table"),
                  a.appendChild(o),
                  (this.feFuncG = o);
                var l = createNS("feFuncB");
                l.setAttribute("type", "table"),
                  a.appendChild(l),
                  (this.feFuncB = l),
                  e.appendChild(a);
              }
              function SVGProLevelsFilter(e, t, n, r) {
                this.filterManager = t;
                var i = this.filterManager.effectElements,
                  a = createNS("feComponentTransfer");
                (i[10].p.k ||
                  0 !== i[10].p.v ||
                  i[11].p.k ||
                  1 !== i[11].p.v ||
                  i[12].p.k ||
                  1 !== i[12].p.v ||
                  i[13].p.k ||
                  0 !== i[13].p.v ||
                  i[14].p.k ||
                  1 !== i[14].p.v) &&
                  (this.feFuncR = this.createFeFunc("feFuncR", a)),
                  (i[17].p.k ||
                    0 !== i[17].p.v ||
                    i[18].p.k ||
                    1 !== i[18].p.v ||
                    i[19].p.k ||
                    1 !== i[19].p.v ||
                    i[20].p.k ||
                    0 !== i[20].p.v ||
                    i[21].p.k ||
                    1 !== i[21].p.v) &&
                    (this.feFuncG = this.createFeFunc("feFuncG", a)),
                  (i[24].p.k ||
                    0 !== i[24].p.v ||
                    i[25].p.k ||
                    1 !== i[25].p.v ||
                    i[26].p.k ||
                    1 !== i[26].p.v ||
                    i[27].p.k ||
                    0 !== i[27].p.v ||
                    i[28].p.k ||
                    1 !== i[28].p.v) &&
                    (this.feFuncB = this.createFeFunc("feFuncB", a)),
                  (i[31].p.k ||
                    0 !== i[31].p.v ||
                    i[32].p.k ||
                    1 !== i[32].p.v ||
                    i[33].p.k ||
                    1 !== i[33].p.v ||
                    i[34].p.k ||
                    0 !== i[34].p.v ||
                    i[35].p.k ||
                    1 !== i[35].p.v) &&
                    (this.feFuncA = this.createFeFunc("feFuncA", a)),
                  (this.feFuncR ||
                    this.feFuncG ||
                    this.feFuncB ||
                    this.feFuncA) &&
                    (a.setAttribute("color-interpolation-filters", "sRGB"),
                    e.appendChild(a)),
                  (i[3].p.k ||
                    0 !== i[3].p.v ||
                    i[4].p.k ||
                    1 !== i[4].p.v ||
                    i[5].p.k ||
                    1 !== i[5].p.v ||
                    i[6].p.k ||
                    0 !== i[6].p.v ||
                    i[7].p.k ||
                    1 !== i[7].p.v) &&
                    ((a = createNS("feComponentTransfer")).setAttribute(
                      "color-interpolation-filters",
                      "sRGB"
                    ),
                    a.setAttribute("result", r),
                    e.appendChild(a),
                    (this.feFuncRComposed = this.createFeFunc("feFuncR", a)),
                    (this.feFuncGComposed = this.createFeFunc("feFuncG", a)),
                    (this.feFuncBComposed = this.createFeFunc("feFuncB", a)));
              }
              function SVGDropShadowEffect(e, t, n, r, i) {
                var a = t.container.globalData.renderConfig.filterSize,
                  s = t.data.fs || a;
                e.setAttribute("x", s.x || a.x),
                  e.setAttribute("y", s.y || a.y),
                  e.setAttribute("width", s.width || a.width),
                  e.setAttribute("height", s.height || a.height),
                  (this.filterManager = t);
                var o = createNS("feGaussianBlur");
                o.setAttribute("in", "SourceAlpha"),
                  o.setAttribute("result", r + "_drop_shadow_1"),
                  o.setAttribute("stdDeviation", "0"),
                  (this.feGaussianBlur = o),
                  e.appendChild(o);
                var l = createNS("feOffset");
                l.setAttribute("dx", "25"),
                  l.setAttribute("dy", "0"),
                  l.setAttribute("in", r + "_drop_shadow_1"),
                  l.setAttribute("result", r + "_drop_shadow_2"),
                  (this.feOffset = l),
                  e.appendChild(l);
                var h = createNS("feFlood");
                h.setAttribute("flood-color", "#00ff00"),
                  h.setAttribute("flood-opacity", "1"),
                  h.setAttribute("result", r + "_drop_shadow_3"),
                  (this.feFlood = h),
                  e.appendChild(h);
                var u = createNS("feComposite");
                u.setAttribute("in", r + "_drop_shadow_3"),
                  u.setAttribute("in2", r + "_drop_shadow_2"),
                  u.setAttribute("operator", "in"),
                  u.setAttribute("result", r + "_drop_shadow_4"),
                  e.appendChild(u);
                var c = this.createMergeNode(r, [r + "_drop_shadow_4", i]);
                e.appendChild(c);
              }
              extendPrototype([SVGComposableEffect], SVGTintFilter),
                (SVGTintFilter.prototype.renderFrame = function (e) {
                  if (e || this.filterManager._mdf) {
                    var t = this.filterManager.effectElements[0].p.v,
                      n = this.filterManager.effectElements[1].p.v,
                      r = this.filterManager.effectElements[2].p.v / 100;
                    this.linearFilter.setAttribute(
                      "values",
                      linearFilterValue + " " + r + " 0"
                    ),
                      this.matrixFilter.setAttribute(
                        "values",
                        n[0] -
                          t[0] +
                          " 0 0 0 " +
                          t[0] +
                          " " +
                          (n[1] - t[1]) +
                          " 0 0 0 " +
                          t[1] +
                          " " +
                          (n[2] - t[2]) +
                          " 0 0 0 " +
                          t[2] +
                          " 0 0 0 1 0"
                      );
                  }
                }),
                (SVGFillFilter.prototype.renderFrame = function (e) {
                  if (e || this.filterManager._mdf) {
                    var t = this.filterManager.effectElements[2].p.v,
                      n = this.filterManager.effectElements[6].p.v;
                    this.matrixFilter.setAttribute(
                      "values",
                      "0 0 0 0 " +
                        t[0] +
                        " 0 0 0 0 " +
                        t[1] +
                        " 0 0 0 0 " +
                        t[2] +
                        " 0 0 0 " +
                        n +
                        " 0"
                    );
                  }
                }),
                (SVGStrokeEffect.prototype.initialize = function () {
                  var e,
                    t,
                    n,
                    r,
                    i =
                      this.elem.layerElement.children ||
                      this.elem.layerElement.childNodes;
                  for (
                    1 === this.filterManager.effectElements[1].p.v
                      ? ((r = this.elem.maskManager.masksProperties.length),
                        (n = 0))
                      : (r =
                          1 + (n = this.filterManager.effectElements[0].p.v - 1)),
                      (t = createNS("g")).setAttribute("fill", "none"),
                      t.setAttribute("stroke-linecap", "round"),
                      t.setAttribute("stroke-dashoffset", 1);
                    n < r;
                    n += 1
                  )
                    (e = createNS("path")),
                      t.appendChild(e),
                      this.paths.push({ p: e, m: n });
                  if (3 === this.filterManager.effectElements[10].p.v) {
                    var a = createNS("mask"),
                      s = createElementID();
                    a.setAttribute("id", s),
                      a.setAttribute("mask-type", "alpha"),
                      a.appendChild(t),
                      this.elem.globalData.defs.appendChild(a);
                    var o = createNS("g");
                    for (
                      o.setAttribute(
                        "mask",
                        "url(" + getLocationHref() + "#" + s + ")"
                      );
                      i[0];
  
                    )
                      o.appendChild(i[0]);
                    this.elem.layerElement.appendChild(o),
                      (this.masker = a),
                      t.setAttribute("stroke", "#fff");
                  } else if (
                    1 === this.filterManager.effectElements[10].p.v ||
                    2 === this.filterManager.effectElements[10].p.v
                  ) {
                    if (2 === this.filterManager.effectElements[10].p.v)
                      for (
                        i =
                          this.elem.layerElement.children ||
                          this.elem.layerElement.childNodes;
                        i.length;
  
                      )
                        this.elem.layerElement.removeChild(i[0]);
                    this.elem.layerElement.appendChild(t),
                      this.elem.layerElement.removeAttribute("mask"),
                      t.setAttribute("stroke", "#fff");
                  }
                  (this.initialized = !0), (this.pathMasker = t);
                }),
                (SVGStrokeEffect.prototype.renderFrame = function (e) {
                  var t;
                  this.initialized || this.initialize();
                  var n,
                    r,
                    i = this.paths.length;
                  for (t = 0; t < i; t += 1)
                    if (
                      -1 !== this.paths[t].m &&
                      ((n = this.elem.maskManager.viewData[this.paths[t].m]),
                      (r = this.paths[t].p),
                      (e || this.filterManager._mdf || n.prop._mdf) &&
                        r.setAttribute("d", n.lastPath),
                      e ||
                        this.filterManager.effectElements[9].p._mdf ||
                        this.filterManager.effectElements[4].p._mdf ||
                        this.filterManager.effectElements[7].p._mdf ||
                        this.filterManager.effectElements[8].p._mdf ||
                        n.prop._mdf)
                    ) {
                      var a;
                      if (
                        0 !== this.filterManager.effectElements[7].p.v ||
                        100 !== this.filterManager.effectElements[8].p.v
                      ) {
                        var s =
                            0.01 *
                            Math.min(
                              this.filterManager.effectElements[7].p.v,
                              this.filterManager.effectElements[8].p.v
                            ),
                          o =
                            0.01 *
                            Math.max(
                              this.filterManager.effectElements[7].p.v,
                              this.filterManager.effectElements[8].p.v
                            ),
                          l = r.getTotalLength();
                        a = "0 0 0 " + l * s + " ";
                        var h,
                          u = l * (o - s),
                          c =
                            1 +
                            2 *
                              this.filterManager.effectElements[4].p.v *
                              this.filterManager.effectElements[9].p.v *
                              0.01,
                          d = Math.floor(u / c);
                        for (h = 0; h < d; h += 1)
                          a +=
                            "1 " +
                            2 *
                              this.filterManager.effectElements[4].p.v *
                              this.filterManager.effectElements[9].p.v *
                              0.01 +
                            " ";
                        a += "0 " + 10 * l + " 0 0";
                      } else
                        a =
                          "1 " +
                          2 *
                            this.filterManager.effectElements[4].p.v *
                            this.filterManager.effectElements[9].p.v *
                            0.01;
                      r.setAttribute("stroke-dasharray", a);
                    }
                  if (
                    ((e || this.filterManager.effectElements[4].p._mdf) &&
                      this.pathMasker.setAttribute(
                        "stroke-width",
                        2 * this.filterManager.effectElements[4].p.v
                      ),
                    (e || this.filterManager.effectElements[6].p._mdf) &&
                      this.pathMasker.setAttribute(
                        "opacity",
                        this.filterManager.effectElements[6].p.v
                      ),
                    (1 === this.filterManager.effectElements[10].p.v ||
                      2 === this.filterManager.effectElements[10].p.v) &&
                      (e || this.filterManager.effectElements[3].p._mdf))
                  ) {
                    var f = this.filterManager.effectElements[3].p.v;
                    this.pathMasker.setAttribute(
                      "stroke",
                      "rgb(" +
                        bmFloor(255 * f[0]) +
                        "," +
                        bmFloor(255 * f[1]) +
                        "," +
                        bmFloor(255 * f[2]) +
                        ")"
                    );
                  }
                }),
                (SVGTritoneFilter.prototype.renderFrame = function (e) {
                  if (e || this.filterManager._mdf) {
                    var t = this.filterManager.effectElements[0].p.v,
                      n = this.filterManager.effectElements[1].p.v,
                      r = this.filterManager.effectElements[2].p.v,
                      i = r[0] + " " + n[0] + " " + t[0],
                      a = r[1] + " " + n[1] + " " + t[1],
                      s = r[2] + " " + n[2] + " " + t[2];
                    this.feFuncR.setAttribute("tableValues", i),
                      this.feFuncG.setAttribute("tableValues", a),
                      this.feFuncB.setAttribute("tableValues", s);
                  }
                }),
                (SVGProLevelsFilter.prototype.createFeFunc = function (e, t) {
                  var n = createNS(e);
                  return n.setAttribute("type", "table"), t.appendChild(n), n;
                }),
                (SVGProLevelsFilter.prototype.getTableValue = function (
                  e,
                  t,
                  n,
                  r,
                  i
                ) {
                  for (
                    var a,
                      s,
                      o = 0,
                      l = Math.min(e, t),
                      h = Math.max(e, t),
                      u = Array.call(null, { length: 256 }),
                      c = 0,
                      d = i - r,
                      f = t - e;
                    o <= 256;
  
                  )
                    (s =
                      (a = o / 256) <= l
                        ? f < 0
                          ? i
                          : r
                        : a >= h
                        ? f < 0
                          ? r
                          : i
                        : r + d * Math.pow((a - e) / f, 1 / n)),
                      (u[c] = s),
                      (c += 1),
                      (o += 256 / 255);
                  return u.join(" ");
                }),
                (SVGProLevelsFilter.prototype.renderFrame = function (e) {
                  if (e || this.filterManager._mdf) {
                    var t,
                      n = this.filterManager.effectElements;
                    this.feFuncRComposed &&
                      (e ||
                        n[3].p._mdf ||
                        n[4].p._mdf ||
                        n[5].p._mdf ||
                        n[6].p._mdf ||
                        n[7].p._mdf) &&
                      ((t = this.getTableValue(
                        n[3].p.v,
                        n[4].p.v,
                        n[5].p.v,
                        n[6].p.v,
                        n[7].p.v
                      )),
                      this.feFuncRComposed.setAttribute("tableValues", t),
                      this.feFuncGComposed.setAttribute("tableValues", t),
                      this.feFuncBComposed.setAttribute("tableValues", t)),
                      this.feFuncR &&
                        (e ||
                          n[10].p._mdf ||
                          n[11].p._mdf ||
                          n[12].p._mdf ||
                          n[13].p._mdf ||
                          n[14].p._mdf) &&
                        ((t = this.getTableValue(
                          n[10].p.v,
                          n[11].p.v,
                          n[12].p.v,
                          n[13].p.v,
                          n[14].p.v
                        )),
                        this.feFuncR.setAttribute("tableValues", t)),
                      this.feFuncG &&
                        (e ||
                          n[17].p._mdf ||
                          n[18].p._mdf ||
                          n[19].p._mdf ||
                          n[20].p._mdf ||
                          n[21].p._mdf) &&
                        ((t = this.getTableValue(
                          n[17].p.v,
                          n[18].p.v,
                          n[19].p.v,
                          n[20].p.v,
                          n[21].p.v
                        )),
                        this.feFuncG.setAttribute("tableValues", t)),
                      this.feFuncB &&
                        (e ||
                          n[24].p._mdf ||
                          n[25].p._mdf ||
                          n[26].p._mdf ||
                          n[27].p._mdf ||
                          n[28].p._mdf) &&
                        ((t = this.getTableValue(
                          n[24].p.v,
                          n[25].p.v,
                          n[26].p.v,
                          n[27].p.v,
                          n[28].p.v
                        )),
                        this.feFuncB.setAttribute("tableValues", t)),
                      this.feFuncA &&
                        (e ||
                          n[31].p._mdf ||
                          n[32].p._mdf ||
                          n[33].p._mdf ||
                          n[34].p._mdf ||
                          n[35].p._mdf) &&
                        ((t = this.getTableValue(
                          n[31].p.v,
                          n[32].p.v,
                          n[33].p.v,
                          n[34].p.v,
                          n[35].p.v
                        )),
                        this.feFuncA.setAttribute("tableValues", t));
                  }
                }),
                extendPrototype([SVGComposableEffect], SVGDropShadowEffect),
                (SVGDropShadowEffect.prototype.renderFrame = function (e) {
                  if (e || this.filterManager._mdf) {
                    if (
                      ((e || this.filterManager.effectElements[4].p._mdf) &&
                        this.feGaussianBlur.setAttribute(
                          "stdDeviation",
                          this.filterManager.effectElements[4].p.v / 4
                        ),
                      e || this.filterManager.effectElements[0].p._mdf)
                    ) {
                      var t = this.filterManager.effectElements[0].p.v;
                      this.feFlood.setAttribute(
                        "flood-color",
                        rgbToHex(
                          Math.round(255 * t[0]),
                          Math.round(255 * t[1]),
                          Math.round(255 * t[2])
                        )
                      );
                    }
                    if (
                      ((e || this.filterManager.effectElements[1].p._mdf) &&
                        this.feFlood.setAttribute(
                          "flood-opacity",
                          this.filterManager.effectElements[1].p.v / 255
                        ),
                      e ||
                        this.filterManager.effectElements[2].p._mdf ||
                        this.filterManager.effectElements[3].p._mdf)
                    ) {
                      var n = this.filterManager.effectElements[3].p.v,
                        r =
                          (this.filterManager.effectElements[2].p.v - 90) *
                          degToRads,
                        i = n * Math.cos(r),
                        a = n * Math.sin(r);
                      this.feOffset.setAttribute("dx", i),
                        this.feOffset.setAttribute("dy", a);
                    }
                  }
                });
              var _svgMatteSymbols = [];
              function SVGMatte3Effect(e, t, n) {
                (this.initialized = !1),
                  (this.filterManager = t),
                  (this.filterElem = e),
                  (this.elem = n),
                  (n.matteElement = createNS("g")),
                  n.matteElement.appendChild(n.layerElement),
                  n.matteElement.appendChild(n.transformedElement),
                  (n.baseElement = n.matteElement);
              }
              function SVGGaussianBlurEffect(e, t, n, r) {
                e.setAttribute("x", "-100%"),
                  e.setAttribute("y", "-100%"),
                  e.setAttribute("width", "300%"),
                  e.setAttribute("height", "300%"),
                  (this.filterManager = t);
                var i = createNS("feGaussianBlur");
                i.setAttribute("result", r),
                  e.appendChild(i),
                  (this.feGaussianBlur = i);
              }
              function TransformEffect() {}
              function SVGTransformEffect(e, t) {
                this.init(t);
              }
              function CVTransformEffect(e) {
                this.init(e);
              }
              return (
                (SVGMatte3Effect.prototype.findSymbol = function (e) {
                  for (var t = 0, n = _svgMatteSymbols.length; t < n; ) {
                    if (_svgMatteSymbols[t] === e) return _svgMatteSymbols[t];
                    t += 1;
                  }
                  return null;
                }),
                (SVGMatte3Effect.prototype.replaceInParent = function (e, t) {
                  var n = e.layerElement.parentNode;
                  if (n) {
                    for (
                      var r, i = n.children, a = 0, s = i.length;
                      a < s && i[a] !== e.layerElement;
  
                    )
                      a += 1;
                    a <= s - 2 && (r = i[a + 1]);
                    var o = createNS("use");
                    o.setAttribute("href", "#" + t),
                      r ? n.insertBefore(o, r) : n.appendChild(o);
                  }
                }),
                (SVGMatte3Effect.prototype.setElementAsMask = function (e, t) {
                  if (!this.findSymbol(t)) {
                    var n = createElementID(),
                      r = createNS("mask");
                    r.setAttribute("id", t.layerId),
                      r.setAttribute("mask-type", "alpha"),
                      _svgMatteSymbols.push(t);
                    var i = e.globalData.defs;
                    i.appendChild(r);
                    var a = createNS("symbol");
                    a.setAttribute("id", n),
                      this.replaceInParent(t, n),
                      a.appendChild(t.layerElement),
                      i.appendChild(a);
                    var s = createNS("use");
                    s.setAttribute("href", "#" + n),
                      r.appendChild(s),
                      (t.data.hd = !1),
                      t.show();
                  }
                  e.setMatte(t.layerId);
                }),
                (SVGMatte3Effect.prototype.initialize = function () {
                  for (
                    var e = this.filterManager.effectElements[0].p.v,
                      t = this.elem.comp.elements,
                      n = 0,
                      r = t.length;
                    n < r;
  
                  )
                    t[n] &&
                      t[n].data.ind === e &&
                      this.setElementAsMask(this.elem, t[n]),
                      (n += 1);
                  this.initialized = !0;
                }),
                (SVGMatte3Effect.prototype.renderFrame = function () {
                  this.initialized || this.initialize();
                }),
                (SVGGaussianBlurEffect.prototype.renderFrame = function (e) {
                  if (e || this.filterManager._mdf) {
                    var t = 0.3 * this.filterManager.effectElements[0].p.v,
                      n = this.filterManager.effectElements[1].p.v,
                      r = 3 == n ? 0 : t,
                      i = 2 == n ? 0 : t;
                    this.feGaussianBlur.setAttribute("stdDeviation", r + " " + i);
                    var a =
                      1 == this.filterManager.effectElements[2].p.v
                        ? "wrap"
                        : "duplicate";
                    this.feGaussianBlur.setAttribute("edgeMode", a);
                  }
                }),
                (TransformEffect.prototype.init = function (e) {
                  (this.effectsManager = e),
                    (this.type = effectTypes.TRANSFORM_EFFECT),
                    (this.matrix = new Matrix()),
                    (this.opacity = -1),
                    (this._mdf = !1),
                    (this._opMdf = !1);
                }),
                (TransformEffect.prototype.renderFrame = function (e) {
                  if (
                    ((this._opMdf = !1),
                    (this._mdf = !1),
                    e || this.effectsManager._mdf)
                  ) {
                    var t = this.effectsManager.effectElements,
                      n = t[0].p.v,
                      r = t[1].p.v,
                      i = 1 === t[2].p.v,
                      a = t[3].p.v,
                      s = i ? a : t[4].p.v,
                      o = t[5].p.v,
                      l = t[6].p.v,
                      h = t[7].p.v;
                    this.matrix.reset(),
                      this.matrix.translate(-n[0], -n[1], n[2]),
                      this.matrix.scale(0.01 * s, 0.01 * a, 1),
                      this.matrix.rotate(-h * degToRads),
                      this.matrix.skewFromAxis(
                        -o * degToRads,
                        (l + 90) * degToRads
                      ),
                      this.matrix.translate(r[0], r[1], 0),
                      (this._mdf = !0),
                      this.opacity !== t[8].p.v &&
                        ((this.opacity = t[8].p.v), (this._opMdf = !0));
                  }
                }),
                extendPrototype([TransformEffect], SVGTransformEffect),
                extendPrototype([TransformEffect], CVTransformEffect),
                registerRenderer("canvas", CanvasRenderer),
                registerRenderer("html", HybridRenderer),
                registerRenderer("svg", SVGRenderer),
                ShapeModifiers.registerModifier("tm", TrimModifier),
                ShapeModifiers.registerModifier("pb", PuckerAndBloatModifier),
                ShapeModifiers.registerModifier("rp", RepeaterModifier),
                ShapeModifiers.registerModifier("rd", RoundCornersModifier),
                ShapeModifiers.registerModifier("zz", ZigZagModifier),
                ShapeModifiers.registerModifier("op", OffsetPathModifier),
                setExpressionsPlugin(Expressions),
                setExpressionInterfaces(getInterface),
                initialize$1(),
                initialize(),
                registerEffect$1(20, SVGTintFilter, !0),
                registerEffect$1(21, SVGFillFilter, !0),
                registerEffect$1(22, SVGStrokeEffect, !1),
                registerEffect$1(23, SVGTritoneFilter, !0),
                registerEffect$1(24, SVGProLevelsFilter, !0),
                registerEffect$1(25, SVGDropShadowEffect, !0),
                registerEffect$1(28, SVGMatte3Effect, !1),
                registerEffect$1(29, SVGGaussianBlurEffect, !0),
                registerEffect$1(35, SVGTransformEffect, !1),
                registerEffect(35, CVTransformEffect),
                lottie
              );
            }),
            "object" === _typeof2(exports)
              ? (module.exports = factory())
              : void 0 ===
                  (__WEBPACK_AMD_DEFINE_RESULT__ =
                    "function" ==
                    typeof (__WEBPACK_AMD_DEFINE_FACTORY__ = factory)
                      ? __WEBPACK_AMD_DEFINE_FACTORY__.call(
                          exports,
                          __webpack_require__,
                          exports,
                          module
                        )
                      : __WEBPACK_AMD_DEFINE_FACTORY__) ||
                (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
        }
      },
      __webpack_module_cache__ = {};
    function __webpack_require__(e) {
      var t = __webpack_module_cache__[e];
      if (void 0 !== t) return t.exports;
      var n = (__webpack_module_cache__[e] = { exports: {} });
      return (
        __webpack_modules__[e].call(n.exports, n, n.exports, __webpack_require__),
        n.exports
      );
    }
    (__webpack_require__.amdO = {}),
      (__webpack_require__.n = (e) => {
        var t = e && e.__esModule ? () => e.default : () => e;
        return __webpack_require__.d(t, { a: t }), t;
      }),
      (__webpack_require__.d = (e, t) => {
        for (var n in t)
          __webpack_require__.o(t, n) &&
            !__webpack_require__.o(e, n) &&
            Object.defineProperty(e, n, { enumerable: !0, get: t[n] });
      }),
      (__webpack_require__.g = (function () {
        if ("object" == typeof globalThis) return globalThis;
        try {
          return this || new Function("return this")();
        } catch (e) {
          if ("object" == typeof window) return window;
        }
      })()),
      (__webpack_require__.o = (e, t) =>
        Object.prototype.hasOwnProperty.call(e, t));
    var __webpack_exports__ = {};
    (() => {
      "use strict";
      var e = function (e, t, n, r) {
        return new (n || (n = Promise))(function (i, a) {
          function s(e) {
            try {
              l(r.next(e));
            } catch (e) {
              a(e);
            }
          }
          function o(e) {
            try {
              l(r.throw(e));
            } catch (e) {
              a(e);
            }
          }
          function l(e) {
            var t;
            e.done
              ? i(e.value)
              : ((t = e.value),
                t instanceof n
                  ? t
                  : new n(function (e) {
                      e(t);
                    })).then(s, o);
          }
          l((r = r.apply(e, t || [])).next());
        });
      };
      class t {
        static waitLoad() {
          return e(this, void 0, void 0, function* () {
            return new Promise((e) => {
              window.eventControllerCancelWaitLoad
                ? e()
                : window.addEventListener("load", () => {
                    e();
                  });
            });
          });
        }
        static waitLoadImage(t) {
          return e(this, void 0, void 0, function* () {
            return new Promise((e) => {
              const n = new Image();
              n.addEventListener("load", () => {
                e();
              }),
                n.addEventListener("error", () => {
                  e();
                }),
                (n.src = t);
            });
          });
        }
        static cancelWaitLoadGlobal() {
          window.eventControllerCancelWaitLoad = !0;
        }
      }
      class n {
        constructor(e) {
          (this.pageLoaderFrameHtmlSourcePresenter =
            e.pageLoaderFrameHtmlSourcePresenter),
            (this.htmlSourceApiRepository = e.htmlSourceApiRepository),
            (this.loadedPageHtmlSourceRepository =
              e.loadedPageHtmlSourceRepository),
            (this.routerRepository = e.routerRepository),
            (this.pageAnimationPresenter = e.pageAnimationPresenter),
            (this.pageLoaderEventsPresenter = e.pageLoaderEventsPresenter),
            (this.pageScrollerPresenter = e.pageScrollerPresenter),
            (this.lottieAnimationPresenter = e.lottieAnimationPresenter);
        }
        applyLinksEvents() {
          this.pageLoaderFrameHtmlSourcePresenter.setLinks({
            func: (e) => (t) => {
              t.preventDefault(),
                this.routerRepository.pushHistory({
                  url: e,
                  onComplete: () => {
                    this.load({ url: e });
                  }
                });
            }
          });
        }
        gotoTopPage() {
          const e = this.routerRepository.getRootUrl();
          this.routerRepository.pushHistory({
            url: e,
            onComplete: () => {
              this.load({ url: e });
            }
          });
        }
        initialize() {
          this.pageLoaderFrameHtmlSourcePresenter.setLoadingState("loaded"),
            this.applyLinksEvents(),
            this.pageLoaderFrameHtmlSourcePresenter.setHoverEffects(),
            this.pageScrollerPresenter.initialize({
              onComplete: () => {
                this.gotoTopPage();
              }
            }),
            this.lottieAnimationPresenter.applyEndSectionAnimation(),
            this.routerRepository.setEventOnChangeHistoryState({
              event: () => {
                this.load({ url: this.routerRepository.getCurrentUrl().url });
              }
            }),
            this.pageLoaderFrameHtmlSourcePresenter.setLogoState("shown");
        }
        load({ url: e }) {
          return (
            (t = this),
            (n = void 0),
            (i = function* () {
              const t = new URL(this.routerRepository.getOldUrl()),
                n = new URL(e, this.routerRepository.getOriginBaseUrl());
              if (t.host !== n.host || t.pathname !== n.pathname) {
                this.pageLoaderFrameHtmlSourcePresenter.setLoadingState(
                  "loading"
                ),
                  this.pageLoaderEventsPresenter.doOnStateChangedEvent({
                    state: "loading"
                  }),
                  this.pageLoaderFrameHtmlSourcePresenter.setLogoState(
                    "/" === n.pathname ? "shown" : "hidden"
                  );
                try {
                  const t = yield this.htmlSourceApiRepository.get({ url: e });
                  this.loadedPageHtmlSourceRepository.initialize({
                    html: t.html,
                    loadedUrl: e
                  }),
                    this.loadedPageHtmlSourceRepository.replaceRelativePaths({
                      originBaseUrl: this.routerRepository.getOriginBaseUrl()
                    }),
                    this.pageLoaderFrameHtmlSourcePresenter.setPageName({
                      pageName: this.loadedPageHtmlSourceRepository.getPageName()
                    });
                  const r = this.loadedPageHtmlSourceRepository.getPageElement(),
                    i = this.pageLoaderFrameHtmlSourcePresenter.getPageElement(),
                    { immediatelyReplacementElements: a } =
                      this.pageLoaderFrameHtmlSourcePresenter.getImmediatelyReplacementElements(),
                    { immediatelyReplacementElements: s } =
                      this.loadedPageHtmlSourceRepository.getImmediatelyReplacementElements();
                  yield this.pageLoaderFrameHtmlSourcePresenter.appendReplacementElements(
                    { elements: s }
                  ),
                    this.pageLoaderFrameHtmlSourcePresenter.removeReplacementElements(
                      { elements: a }
                    );
                  const { overlapReplacementElements: o } =
                      this.pageLoaderFrameHtmlSourcePresenter.getOverlapReplacementElements(
                        { targetTag: "headLink" }
                      ),
                    { overlapReplacementElements: l } =
                      this.loadedPageHtmlSourceRepository.getOverlapReplacementElements(
                        { targetTag: "headLink" }
                      ),
                    { overlapReplacementElements: h } =
                      this.pageLoaderFrameHtmlSourcePresenter.getOverlapReplacementElements(
                        { targetTag: "headScript" }
                      ),
                    { overlapReplacementElements: u } =
                      this.loadedPageHtmlSourceRepository.getOverlapReplacementElements(
                        { targetTag: "headScript" }
                      ),
                    { overlapReplacementElements: c } =
                      this.pageLoaderFrameHtmlSourcePresenter.getOverlapReplacementElements(
                        { targetTag: "other" }
                      ),
                    { overlapReplacementElements: d } =
                      this.loadedPageHtmlSourceRepository.getOverlapReplacementElements(
                        { targetTag: "other" }
                      );
                  yield this.pageLoaderFrameHtmlSourcePresenter.appendReplacementElements(
                    { elements: l }
                  ),
                    yield this.pageLoaderFrameHtmlSourcePresenter.appendReplacementElements(
                      { elements: d }
                    ),
                    yield this.pageLoaderFrameHtmlSourcePresenter.appendReplacementElements(
                      { elements: u }
                    ),
                    this.applyLinksEvents(),
                    this.pageLoaderFrameHtmlSourcePresenter.setHoverEffects(),
                    this.pageLoaderFrameHtmlSourcePresenter.setLoadingState(
                      "appended"
                    ),
                    this.pageLoaderEventsPresenter.doOnStateChangedEvent({
                      state: "appended"
                    }),
                    this.pageLoaderFrameHtmlSourcePresenter.setNavigationState(
                      this.loadedPageHtmlSourceRepository.getNavigationState()
                    ),
                    this.pageScrollerPresenter.destroy(),
                    this.lottieAnimationPresenter.destroyEndSectionAnimation(),
                    "/" === n.pathname
                      ? yield this.pageAnimationPresenter.animatePageToTopPage({
                          oldPage: i,
                          newPage: r
                        })
                      : yield this.pageAnimationPresenter.animatePageToSubPage({
                          oldPage: i,
                          newPage: r
                        }),
                    this.pageScrollerPresenter.initialize({
                      onComplete: () => {
                        this.gotoTopPage();
                      }
                    }),
                    this.lottieAnimationPresenter.applyEndSectionAnimation(),
                    this.pageLoaderFrameHtmlSourcePresenter.removeReplacementElements(
                      { elements: h }
                    ),
                    this.pageLoaderFrameHtmlSourcePresenter.removeReplacementElements(
                      { elements: c }
                    ),
                    this.pageLoaderFrameHtmlSourcePresenter.removeReplacementElements(
                      { elements: o }
                    ),
                    this.pageLoaderFrameHtmlSourcePresenter.setLoadingState(
                      "loaded"
                    ),
                    this.pageLoaderEventsPresenter.doOnStateChangedEvent({
                      state: "loaded"
                    });
                } catch (e) {
                  console.warn(e);
                }
              }
            }),
            new ((r = void 0) || (r = Promise))(function (e, a) {
              function s(e) {
                try {
                  l(i.next(e));
                } catch (e) {
                  a(e);
                }
              }
              function o(e) {
                try {
                  l(i.throw(e));
                } catch (e) {
                  a(e);
                }
              }
              function l(t) {
                var n;
                t.done
                  ? e(t.value)
                  : ((n = t.value),
                    n instanceof r
                      ? n
                      : new r(function (e) {
                          e(n);
                        })).then(s, o);
              }
              l((i = i.apply(t, n || [])).next());
            })
          );
          var t, n, r, i;
        }
      }
      const r = (e) =>
        new Promise((t) => {
          setTimeout(() => t(), e);
        });
      class i {
        constructor() {
          (this.originBaseUrl = window.location.href),
            (this.oldUrl = window.location.href);
        }
        setEventOnChangeHistoryState(e) {
          window.addEventListener("popstate", () => {
            e.event(), (this.oldUrl = window.location.href);
          });
        }
        popHistory(e) {
          return (
            (t = this),
            (n = void 0),
            (a = function* () {
              window.history.go(-Math.abs((null == e ? void 0 : e.offset) || 1)),
                yield r(10);
            }),
            new ((i = void 0) || (i = Promise))(function (e, r) {
              function s(e) {
                try {
                  l(a.next(e));
                } catch (e) {
                  r(e);
                }
              }
              function o(e) {
                try {
                  l(a.throw(e));
                } catch (e) {
                  r(e);
                }
              }
              function l(t) {
                var n;
                t.done
                  ? e(t.value)
                  : ((n = t.value),
                    n instanceof i
                      ? n
                      : new i(function (e) {
                          e(n);
                        })).then(s, o);
              }
              l((a = a.apply(t, n || [])).next());
            })
          );
          var t, n, i, a;
        }
        getOriginBaseUrl() {
          return this.originBaseUrl;
        }
        pushHistory({ url: e, onComplete: t }) {
          window.history.pushState({}, "", e), t(), (this.oldUrl = e);
        }
        getCurrentUrl() {
          return {
            url: window.location.href,
            pathname: new URL(window.location.href).pathname
          };
        }
        getOldUrl() {
          return this.oldUrl;
        }
        getRootUrl() {
          return window.location.origin + "/";
        }
      }
      var a = function (e, t, n, r) {
        return new (n || (n = Promise))(function (i, a) {
          function s(e) {
            try {
              l(r.next(e));
            } catch (e) {
              a(e);
            }
          }
          function o(e) {
            try {
              l(r.throw(e));
            } catch (e) {
              a(e);
            }
          }
          function l(e) {
            var t;
            e.done
              ? i(e.value)
              : ((t = e.value),
                t instanceof n
                  ? t
                  : new n(function (e) {
                      e(t);
                    })).then(s, o);
          }
          l((r = r.apply(e, t || [])).next());
        });
      };
      class s {
        constructor(e) {
          (this.routerRepository = e.routerRepository),
            (this.render3DPresenter = e.render3DPresenter),
            (this.mainVisualHtmlSourcePresenter =
              e.mainVisualHtmlSourcePresenter),
            (this.keyframeAnimationPresenter = e.keyframeAnimationPresenter),
            (this.lottieAnimationPresenter = e.lottieAnimationPresenter),
            (this.screenSwipeRepository = e.screenSwipeRepository),
            (this.screenGrabRepository = e.screenGrabRepository),
            e.pageLoaderEventsPresenter.setOnStateChangedEvent({
              onStateChanged: ({ state: e }) => {
                "appended" === e && this.onPageLoaded();
              }
            });
        }
        onPageLoaded(e = !1) {//rotatecamera
          return a(this, void 0, void 0, function* () {
            const t = this.routerRepository.getCurrentUrl();
            switch (
              (this.keyframeAnimationPresenter.destroyPrevCameraRotationAnimation(),
              "/" === t.pathname
                ? (this.mainVisualHtmlSourcePresenter.setMouseWheelEvent({
                    onWheel: (e) => {
                      const t = this.routerRepository.getCurrentUrl();
                      e &&
                        "/" === t.pathname &&
                        (this.keyframeAnimationPresenter.destroyPassiveCameraRotation(),
                        this.keyframeAnimationPresenter.rotateCameraBy({
                          degree: 0.3 * e,
                          refPivotCamera: this.render3DPresenter.refPivotCamera,
                          onComplete: () => {
                            "/" === t.pathname &&
                              this.keyframeAnimationPresenter.applyPassiveCameraRotation(
                                {
                                  refPivotCamera:
                                    this.render3DPresenter.refPivotCamera
                                }
                              );
                          }
                        }));
                    }
                  }),
                  this.screenSwipeRepository.setSwipeEvent({
                    onSwipe: ({ deltaX: e }) => {
                      e &&
                        (this.keyframeAnimationPresenter.destroyPassiveCameraRotation(),
                        this.keyframeAnimationPresenter.rotateCameraBy({
                          degree: 5 * -e,
                          refPivotCamera: this.render3DPresenter.refPivotCamera,
                          onComplete: () => {
                            "/" === t.pathname &&
                              this.keyframeAnimationPresenter.applyPassiveCameraRotation(
                                {
                                  refPivotCamera:
                                    this.render3DPresenter.refPivotCamera
                                }
                              );
                          }
                        }));
                    }
                  }),
                  this.screenGrabRepository.setGrabEvent({
                    onGrab: ({ deltaX: e }) => {
                      e &&
                        (this.keyframeAnimationPresenter.destroyPassiveCameraRotation(),
                        this.keyframeAnimationPresenter.rotateCameraBy({
                          degree: 5 * -e,
                          refPivotCamera: this.render3DPresenter.refPivotCamera,
                          onComplete: () => {
                            "/" === t.pathname &&
                              this.keyframeAnimationPresenter.applyPassiveCameraRotation(
                                {
                                  refPivotCamera:
                                    this.render3DPresenter.refPivotCamera
                                }
                              );
                          }
                        }));
                    }
                  }))
                : (this.mainVisualHtmlSourcePresenter.destroyMouseWheelEvent(),
                  this.screenSwipeRepository.destroySwipeEvent(),
                  this.screenGrabRepository.destroyGrabEvent()),
              this.keyframeAnimationPresenter.destroyPassiveCameraRotation(),
              t.pathname)
            ) {
              case "/"://setcamera
                yield this.keyframeAnimationPresenter.resetPivotCameraToCenter({
                  draft: e ? 270 : 0,
                  refPivotCamera: this.render3DPresenter.refPivotCamera,
                  target: this.mainVisualHtmlSourcePresenter.isSP()
                    ? {
                        position: { x: -0.66, y: 0.12, z: 1.59 },
                        distance: 16,
                        rotation: { y: 35.1 }
                      }
                    : {
                        position: { x: -0.16, y: 0.45, z: 2.39 },
                        distance: 8,
                        rotation: { y: 23 }
                      }
                }),
                  this.keyframeAnimationPresenter.applyPassiveCameraRotation({
                    refPivotCamera: this.render3DPresenter.refPivotCamera
                  });
                break;
              case "/reduce/":
                yield this.keyframeAnimationPresenter.zoomPivotCameraTo({
                  refPivotCamera: this.render3DPresenter.refPivotCamera,
                  target: this.mainVisualHtmlSourcePresenter.isSP()
                    ? {
                        position: { x: 1.95, y: 0.45, z: 0.71 },
                        rotation: { x: 55.9, y: 22 },
                        distance: 4.84
                      }
                    : {
                        position: { x: 1.33, y: 0, z: 1.15 },
                        rotation: { x: 145.1, y: 24.2 },
                        distance: 5.15
                      }
                });
                break;
              case "/personal/":
                yield this.keyframeAnimationPresenter.zoomPivotCameraTo({
                  refPivotCamera: this.render3DPresenter.refPivotCamera,
                  target: this.mainVisualHtmlSourcePresenter.isSP()
                    ? {
                        position: { x: -3.7, y: 0.01, z: 2.48 },
                        rotation: { x: -22.9, y: 20 },
                        distance: 4.48
                      }
                    : {
                        position: { x: -3.66, y: 0.23, z: 3.32 },
                        rotation: { x: -22.9, y: 24 },
                        distance: 2.51
                      }
                });
                break;
              case "/offset/":
                yield this.keyframeAnimationPresenter.zoomPivotCameraTo({
                  refPivotCamera: this.render3DPresenter.refPivotCamera,
                  target: this.mainVisualHtmlSourcePresenter.isSP()
                    ? {
                        position: { x: 0.36, y: -0.79, z: 0.61 },
                        rotation: { x: -15.6, y: 20 },
                        distance: 9.25
                      }
                    : {
                        position: { x: -0.7, y: 0.18, z: 2.83 },
                        rotation: { x: -11.2, y: 30 },
                        distance: 3.3
                      }
                });
                break;
              case "/contribute/":
                yield this.keyframeAnimationPresenter.zoomPivotCameraTo({
                  refPivotCamera: this.render3DPresenter.refPivotCamera,
                  target: this.mainVisualHtmlSourcePresenter.isSP()
                    ? {
                        position: { x: -0.52, y: -0.52, z: 0.27 },
                        rotation: { x: -118.8, y: 22 },
                        distance: 5.37
                      }
                    : {
                        position: { x: -1.79, y: 0.01, z: -0.71 },
                        rotation: { x: -110.9, y: 38.8 },
                        distance: 3.96
                      }
                });
                break;
              case "/calculate/":
                yield this.keyframeAnimationPresenter.zoomPivotCameraTo({
                  refPivotCamera: this.render3DPresenter.refPivotCamera,
                  target: this.mainVisualHtmlSourcePresenter.isSP()
                    ? {
                        position: { x: 2.56, y: 0.53, z: 3.18 },
                        rotation: { x: -31.5, y: 22 },
                        distance: 4.66
                      }
                    : {
                        position: { x: 1.88, y: 0.1, z: 2.87 },
                        rotation: { x: 25.6, y: 23.3 },
                        distance: 3.3
                      }
                });
                break;
              default:
                console.log(t.pathname);
            }
          });
        }
        initialize() {
          return a(this, void 0, void 0, function* () {
            yield Promise.all([
              this.lottieAnimationPresenter.applyLoadingAnimation(),
              (() =>
                a(this, void 0, void 0, function* () {
                  const e = yield this.render3DPresenter.initialize({
                    ambientColor:
                      this.mainVisualHtmlSourcePresenter.getAmbientColor()
                  });
                  this.mainVisualHtmlSourcePresenter.appendMainVisualCanvas(e);
                  const t = this.render3DPresenter.getPipes();
                  this.mainVisualHtmlSourcePresenter.setMainVisualCanvasRootResizeEvent(
                    {
                      onResize: () => {
                        t.onResize(
                          this.mainVisualHtmlSourcePresenter.getMainVisualCanvasRootProps()
                        );
                      }
                    }
                  ),
                    t.onResize(
                      this.mainVisualHtmlSourcePresenter.getMainVisualCanvasRootProps()
                    ),
                    this.render3DPresenter.setOnRenderEvent({
                      onRender: (e) => {
                        this.mainVisualHtmlSourcePresenter.setBillboardElementPosition(
                          {
                            accessPointCalculate:
                              this.render3DPresenter.refScreenAccessPointCalculate
                                .position,
                            accessPointContribute:
                              this.render3DPresenter
                                .refScreenAccessPointContribute.position,
                            accessPointOffset:
                              this.render3DPresenter.refScreenAccessPointOffset
                                .position,
                            accessPointPersonal:
                              this.render3DPresenter.refScreenAccessPointPersonal
                                .position,
                            accessPointReduce:
                              this.render3DPresenter.refScreenAccessPointReduce
                                .position
                          }
                        );
                      }
                    }),
                    this.mainVisualHtmlSourcePresenter.setBillboardElementEvents({
                      accessPoints: {
                        onEnter: () =>
                          this.keyframeAnimationPresenter.destroyPassiveCameraRotation(),
                        onLeave: () => {
                          "/" ===
                            this.routerRepository.getCurrentUrl().pathname &&
                            this.keyframeAnimationPresenter.applyPassiveCameraRotation(
                              {
                                refPivotCamera:
                                  this.render3DPresenter.refPivotCamera
                              }
                            );
                        }
                      }
                    }),
                    this.keyframeAnimationPresenter.applyNavigationPointAnimation();
                }))()
            ]),
              yield r(500),
              this.mainVisualHtmlSourcePresenter.setLoadingState(["loaded"]),
              yield r(1500),
              yield this.onPageLoaded(!0),
              this.mainVisualHtmlSourcePresenter.setLoadingState([
                "loaded",
                "loadAnimated"
              ]),
              "/" !== this.routerRepository.getCurrentUrl().pathname &&
                this.keyframeAnimationPresenter.playSubPageLoadedAnimation(),
              yield r(1500),
              this.lottieAnimationPresenter.destroyLoadingAnimation();
          });
        }
      }
      class o {
        constructor(e) {
          (this.repositoryFactory = e.repositoryFactory),
            (this.presenterFactory = e.presenterFactory);
        }
        get loadPageUsecase() {
          return new n({
            pageLoaderEventsPresenter:
              this.presenterFactory.pageLoaderEventsPresenter,
            pageAnimationPresenter: this.presenterFactory.pageAnimationPresenter,
            routerRepository: this.repositoryFactory.routerRepository,
            pageLoaderFrameHtmlSourcePresenter:
              this.presenterFactory.framePageHtmlSourcePresenter,
            loadedPageHtmlSourceRepository:
              this.repositoryFactory.loadedPageHtmlSourceRepository,
            htmlSourceApiRepository: this.repositoryFactory.htmlSourceApiFactory,
            pageScrollerPresenter: this.presenterFactory.pageScrollerPresenter,
            lottieAnimationPresenter:
              this.presenterFactory.lottieAnimationPresenter
          });
        }
        get mainVisualUsecase() {
          return new s({
            routerRepository: this.repositoryFactory.routerRepository,
            pageLoaderEventsPresenter:
              this.presenterFactory.pageLoaderEventsPresenter,
            mainVisualHtmlSourcePresenter:
              this.presenterFactory.mainVisualHtmlSourcePresenter,
            render3DPresenter: this.presenterFactory.render3DPresenter,
            keyframeAnimationPresenter:
              this.presenterFactory.keyframeAnimationPresenter,
            screenSwipeRepository: this.repositoryFactory.screenSwipeRepository,
            screenGrabRepository: this.repositoryFactory.screenGrabRepository,
            lottieAnimationPresenter:
              this.presenterFactory.lottieAnimationPresenter
          });
        }
      }
      class l {
        get({ url: e }) {
          return (
            (t = this),
            (n = void 0),
            (i = function* () {
              const t = yield fetch(e);
              return { html: yield t.text() };
            }),
            new ((r = void 0) || (r = Promise))(function (e, a) {
              function s(e) {
                try {
                  l(i.next(e));
                } catch (e) {
                  a(e);
                }
              }
              function o(e) {
                try {
                  l(i.throw(e));
                } catch (e) {
                  a(e);
                }
              }
              function l(t) {
                var n;
                t.done
                  ? e(t.value)
                  : ((n = t.value),
                    n instanceof r
                      ? n
                      : new r(function (e) {
                          e(n);
                        })).then(s, o);
              }
              l((i = i.apply(t, n || [])).next());
            })
          );
          var t, n, r, i;
        }
      }
      const h = "data-seamless-page-loader-link-applied",
        u = "data-seamless-page-loader-overlap",
        c = "data-page",
        d = (e) => {
          if ("immediately" === e) return "data-seamless-page-loader-immediately";
          if ("overlap" === e) return u;
          throw new Error(`unknown timing "${e}"`);
        },
        f = (e, t, n) => {
          const r = d(e),
            i =
              "headScript" === n
                ? {
                    filter: (e) =>
                      "SCRIPT" === e.tagName && e.parentElement === t.head
                  }
                : "headLink" === n
                ? {
                    filter: (e) =>
                      "LINK" === e.tagName && e.parentElement === t.head
                  }
                : "other" === n
                ? {
                    filter: (e) =>
                      !(
                        ("SCRIPT" === e.tagName || "LINK" === e.tagName) &&
                        e.parentElement === t.head
                      )
                  }
                : { filter: () => !0 };
          return Array.from(t.querySelectorAll(`[${r}]`))
            .map((t) => ({ element: t, timing: e, id: t.getAttribute(r) || "" }))
            .filter((e) => i.filter(e.element));
        },
        p = (e) => {
          const t = e.querySelector(`[${u}="main"]`);
          if (!t) throw new Error(`[${u}="main"] is not found`);
          return { element: t };
        },
        m = (e, t) => {
          const n = e.querySelector(t);
          if (!n) throw new Error(`${t} is not found`);
          return n;
        };
      class g {
        constructor() {
          (this.document = void 0), (this.loadedUrl = "");
        }
        initialize({ loadedUrl: e, html: t }) {
          (this.document = new DOMParser().parseFromString(t, "text/html")),
            (this.loadedUrl = e);
        }
        replaceRelativePaths({ originBaseUrl: e }) {
          if (!this.document) return;
          const t = (e) =>
              e
                ? -1 !== e.indexOf("//:")
                  ? e
                  : new URL(e, this.loadedUrl).href
                : "",
            n = this.document;
          ["src", "href"].forEach((e) => {
            Array.from(n.querySelectorAll(`[${e}]`))
              .filter((t) => {
                var n;
                return (
                  t.hasAttribute(e) &&
                  !(null === (n = t.getAttribute(e)) || void 0 === n
                    ? void 0
                    : n.startsWith("#"))
                );
              })
              .forEach((n) => n.setAttribute(e, t(n.getAttribute(e) || "")));
          });
        }
        getOverlapReplacementElements(e) {
          if (!this.document) throw new Error("document is not loaded");
          return {
            overlapReplacementElements: f("overlap", this.document, e.targetTag)
          };
        }
        getImmediatelyReplacementElements(e) {
          if (!this.document) throw new Error("document is not loaded");
          return {
            immediatelyReplacementElements: f("immediately", this.document, "all")
          };
        }
        getPageElement(e) {
          if (!this.document) throw new Error("document is not loaded");
          return p(this.document);
        }
        getPageName(e) {
          var t;
          return (
            (null === (t = this.document) || void 0 === t
              ? void 0
              : t.documentElement.getAttribute(c)) || ""
          );
        }
        getNavigationState() {
          var e, t;
          return "shown" ===
            (null ===
              (t =
                null === (e = this.document) || void 0 === e
                  ? void 0
                  : e.documentElement.querySelector(
                      "[data-bind-navigation-state]"
                    )) || void 0 === t
              ? void 0
              : t.getAttribute("data-bind-navigation-state"))
            ? "shown"
            : "hidden";
        }
      }
      class v {}
      class y {
        constructor() {
          (this.functions = []),
            (this.touchStartEvents = []),
            (this.touchMoveEvents = []);
          let e = 0,
            t = 0;
          const n = (n) => {
            (e = n.touches[0].pageX), (t = n.touches[0].pageY);
          };
          window.addEventListener("touchstart", n), this.touchStartEvents.push(n);
          const r = (n) => {
            const r = n.changedTouches[0].pageX - e,
              i = n.changedTouches[0].pageY - t;
            this.functions.forEach((e) => e({ deltaX: r, deltaY: i })),
              (e = n.touches[0].pageX),
              (t = n.touches[0].pageY);
          };
          window.addEventListener("touchmove", r), this.touchMoveEvents.push(r);
        }
        setSwipeEvent({ onSwipe: e }) {
          this.functions.push(e);
        }
        destroySwipeEvent() {
          this.functions.splice(0);
        }
      }
      class _ {
        constructor() {
          (this.functions = []),
            (this.mouseDownEvents = []),
            (this.mouseMoveEvents = []),
            (this.mouseUpEvents = []);
          let e = 0,
            t = 0,
            n = !1;
          const r = (r) => {
            (e = r.pageX),
              (t = r.pageY),
              (n = !0),
              document.documentElement.setAttribute(
                "data-bind-screen-grabbing",
                "true"
              );
          };
          window.addEventListener("mousedown", r), this.mouseDownEvents.push(r);
          const i = (r) => {
            if (!n) return;
            const i = r.pageX - e,
              a = r.pageY - t;
            this.functions.forEach((e) => e({ deltaX: i, deltaY: a })),
              (e = r.pageX),
              (t = r.pageY);
          };
          window.addEventListener("mousemove", i), this.mouseMoveEvents.push(i);
          const a = (e) => {
            (n = !1),
              document.documentElement.setAttribute(
                "data-bind-screen-grabbing",
                "false"
              );
          };
          window.addEventListener("mouseup", a), this.mouseDownEvents.push(a);
        }
        setGrabEvent({ onGrab: e }) {
          this.functions.push(e);
        }
        destroyGrabEvent() {
          this.functions.splice(0);
        }
      }
      class b {
        constructor() {
          this.routerRepository = new i();
        }
        get loadedPageHtmlSourceRepository() {
          return new g();
        }
        get htmlSourceApiFactory() {
          return new l();
        }
        get logicalAnimationRepository() {
          return new v();
        }
        get screenSwipeRepository() {
          return new y();
        }
        get screenGrabRepository() {
          return new _();
        }
      }
      class x {
        constructor(e) {
          (this.host = e.host), (this.ignore = e.ignore);
        }
        setLogoState(e) {
          document.querySelectorAll("[data-bind-logo-state]").forEach((t) => {
            t.setAttribute("data-bind-logo-state", e);
          });
        }
        setNavigationState(e) {
          document
            .querySelectorAll("[data-bind-navigation-state]")
            .forEach((t) => {
              t.setAttribute("data-bind-navigation-state", e);
            });
        }
        setLoadingState(e) {
          document.documentElement.setAttribute(
            "data-bind-seamless-page-loader-loading-state",
            e
          );
        }
        setLinks({ func: e }) {
          this.ignore.find((e) => document.location.pathname.startsWith(e)) ||
            Array.from(document.querySelectorAll("a"))
              .filter((t) => {
                var n;
                if (
                  t.hasAttribute(h) ||
                  t.hasAttribute("data-seamless-page-loader-link-ignore")
                )
                  return !1;
                if (
                  (null === (n = t.getAttribute("href")) || void 0 === n
                    ? void 0
                    : n.startsWith("#")) ||
                  "_blank" === t.getAttribute("target")
                )
                  return !1;
                try {
                  const e = new URL(t.href);
                  if (e.host !== this.host) return !1;
                  if (this.ignore.find((t) => t === e.pathname)) return !1;
                } catch (e) {
                  console.error(e);
                }
                const r = e(t.href);
                return !!r && (t.addEventListener("click", r), !0);
              })
              .forEach((e) => e.setAttribute(h, ""));
        }
        getImmediatelyReplacementElements(e) {
          return {
            immediatelyReplacementElements: f(
              "immediately",
              window.document,
              "all"
            )
          };
        }
        getOverlapReplacementElements(e) {
          return {
            overlapReplacementElements: f("overlap", window.document, e.targetTag)
          };
        }
        appendReplacementElements({ elements: e }) {
          return (
            (t = this),
            (n = void 0),
            (i = function* () {
              yield Promise.all(
                e.map(({ element: e, id: t, timing: n }) => {
                  const r = d(n),
                    i = window.document.querySelectorAll(`[${r}="${t}"]`);
                  if (0 === i.length)
                    return (
                      console.error(
                        `[${r}="${t}"] is not found. base replace element is required!`
                      ),
                      Promise.resolve()
                    );
                  1 !== i.length &&
                    console.error(
                      `[${r}="${t}"] is duplicated id. ID is most be unique`
                    );
                  const a = i[0],
                    s = (e) => {
                      a.insertAdjacentElement("afterend", e);
                    };
                  return new Promise((t) => {
                    if ("SCRIPT" === e.tagName) {
                      const n = document.createElement("script");
                      return (
                        n.addEventListener(
                          "load",
                          () => {
                            t();
                          },
                          !1
                        ),
                        (n.src = e.getAttribute("src") || ""),
                        e
                          .getAttributeNames()
                          .filter((e) => "src" !== e)
                          .forEach((t) => {
                            n.setAttribute(t, e.getAttribute(t) || "");
                          }),
                        void s(n)
                      );
                    }
                    if ("LINK" === e.tagName) {
                      const n = document.createElement("link");
                      return (
                        n.addEventListener(
                          "load",
                          () => {
                            t();
                          },
                          !1
                        ),
                        (n.href = e.getAttribute("href") || ""),
                        e
                          .getAttributeNames()
                          .filter((e) => "href" !== e)
                          .forEach((t) => {
                            n.setAttribute(t, e.getAttribute(t) || "");
                          }),
                        void s(n)
                      );
                    }
                    s(e), t();
                  });
                })
              );
            }),
            new ((r = void 0) || (r = Promise))(function (e, a) {
              function s(e) {
                try {
                  l(i.next(e));
                } catch (e) {
                  a(e);
                }
              }
              function o(e) {
                try {
                  l(i.throw(e));
                } catch (e) {
                  a(e);
                }
              }
              function l(t) {
                var n;
                t.done
                  ? e(t.value)
                  : ((n = t.value),
                    n instanceof r
                      ? n
                      : new r(function (e) {
                          e(n);
                        })).then(s, o);
              }
              l((i = i.apply(t, n || [])).next());
            })
          );
          var t, n, r, i;
        }
        removeReplacementElements({ elements: e }) {
          e.forEach(({ element: e }) => {
            e.remove();
          });
        }
        getPageElement(e) {
          return p(window.document);
        }
        setPageName(e) {
          window.document.documentElement.setAttribute(c, e.pageName);
        }
        setHoverEffects() {
          Array.from(document.querySelectorAll("[data-bind-hover-effect-state]"))
            .filter((e) => {
              const t = e.getAttribute("[data-bind-hover-effect-state]");
              return !t || "loading" === t;
            })
            .forEach((e) => {
              e.addEventListener("mouseenter", () => {
                e.setAttribute("data-bind-hover-effect-state", "entered");
              }),
                e.addEventListener("mouseleave", () => {
                  e.setAttribute("data-bind-hover-effect-state", "leaved");
                }),
                e.setAttribute("data-bind-hover-effect-state", "attached");
            });
        }
      }
      function S(e) {
        return (
          (S =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          S(e)
        );
      }
      function E(e) {
        if (void 0 === e)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called"
          );
        return e;
      }
      function w(e, t) {
        (e.prototype = Object.create(t.prototype)),
          (e.prototype.constructor = e),
          (e.__proto__ = t);
      }
      var T,
        M,
        A,
        C,
        P,
        k,
        R,
        D,
        I,
        L,
        F,
        O,
        N,
        B,
        U,
        z = {
          autoSleep: 120,
          force3D: "auto",
          nullTargetWarn: 1,
          units: { lineHeight: "" }
        },
        V = { duration: 0.5, overwrite: !1, delay: 0 },
        H = 1e8,
        G = 1e-8,
        W = 2 * Math.PI,
        j = W / 4,
        X = 0,
        q = Math.sqrt,
        Y = Math.cos,
        K = Math.sin,
        Z = function (e) {
          return "string" == typeof e;
        },
        J = function (e) {
          return "function" == typeof e;
        },
        $ = function (e) {
          return "number" == typeof e;
        },
        Q = function (e) {
          return void 0 === e;
        },
        ee = function (e) {
          return "object" === S(e);
        },
        te = function (e) {
          return !1 !== e;
        },
        ne = function () {
          return "undefined" != typeof window;
        },
        re = function (e) {
          return J(e) || Z(e);
        },
        ie =
          ("function" == typeof ArrayBuffer && ArrayBuffer.isView) ||
          function () {},
        ae = Array.isArray,
        se = /(?:-?\.?\d|\.)+/gi,
        oe = /[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,
        le = /[-+=.]*\d+[.e-]*\d*[a-z%]*/g,
        he = /[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,
        ue = /[+-]=-?[.\d]+/,
        ce = /[^,'"\[\]\s]+/gi,
        de = /^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,
        fe = {},
        pe = {},
        me = function (e) {
          return (pe = We(e, fe)) && Xn;
        },
        ge = function (e, t) {
          return console.warn(
            "Invalid property",
            e,
            "set to",
            t,
            "Missing plugin? gsap.registerPlugin()"
          );
        },
        ve = function (e, t) {
          return !t && console.warn(e);
        },
        ye = function (e, t) {
          return (e && (fe[e] = t) && pe && (pe[e] = t)) || fe;
        },
        _e = function () {
          return 0;
        },
        be = { suppressEvents: !0, isStart: !0, kill: !1 },
        xe = { suppressEvents: !0, kill: !1 },
        Se = { suppressEvents: !0 },
        Ee = {},
        we = [],
        Te = {},
        Me = {},
        Ae = {},
        Ce = 30,
        Pe = [],
        ke = "",
        Re = function (e) {
          var t,
            n,
            r = e[0];
          if ((ee(r) || J(r) || (e = [e]), !(t = (r._gsap || {}).harness))) {
            for (n = Pe.length; n-- && !Pe[n].targetTest(r); );
            t = Pe[n];
          }
          for (n = e.length; n--; )
            (e[n] && (e[n]._gsap || (e[n]._gsap = new sn(e[n], t)))) ||
              e.splice(n, 1);
          return e;
        },
        De = function (e) {
          return e._gsap || Re(St(e))[0]._gsap;
        },
        Ie = function (e, t, n) {
          return (n = e[t]) && J(n)
            ? e[t]()
            : (Q(n) && e.getAttribute && e.getAttribute(t)) || n;
        },
        Le = function (e, t) {
          return (e = e.split(",")).forEach(t) || e;
        },
        Fe = function (e) {
          return Math.round(1e5 * e) / 1e5 || 0;
        },
        Oe = function (e) {
          return Math.round(1e7 * e) / 1e7 || 0;
        },
        Ne = function (e, t) {
          var n = t.charAt(0),
            r = parseFloat(t.substr(2));
          return (
            (e = parseFloat(e)),
            "+" === n ? e + r : "-" === n ? e - r : "*" === n ? e * r : e / r
          );
        },
        Be = function (e, t) {
          for (var n = t.length, r = 0; e.indexOf(t[r]) < 0 && ++r < n; );
          return r < n;
        },
        Ue = function () {
          var e,
            t,
            n = we.length,
            r = we.slice(0);
          for (Te = {}, we.length = 0, e = 0; e < n; e++)
            (t = r[e]) &&
              t._lazy &&
              (t.render(t._lazy[0], t._lazy[1], !0)._lazy = 0);
        },
        ze = function (e, t, n, r) {
          we.length && !M && Ue(),
            e.render(t, n, r || (M && t < 0 && (e._initted || e._startAt))),
            we.length && !M && Ue();
        },
        Ve = function (e) {
          var t = parseFloat(e);
          return (t || 0 === t) && (e + "").match(ce).length < 2
            ? t
            : Z(e)
            ? e.trim()
            : e;
        },
        He = function (e) {
          return e;
        },
        Ge = function (e, t) {
          for (var n in t) n in e || (e[n] = t[n]);
          return e;
        },
        We = function (e, t) {
          for (var n in t) e[n] = t[n];
          return e;
        },
        je = function e(t, n) {
          for (var r in n)
            "__proto__" !== r &&
              "constructor" !== r &&
              "prototype" !== r &&
              (t[r] = ee(n[r]) ? e(t[r] || (t[r] = {}), n[r]) : n[r]);
          return t;
        },
        Xe = function (e, t) {
          var n,
            r = {};
          for (n in e) n in t || (r[n] = e[n]);
          return r;
        },
        qe = function (e) {
          var t,
            n = e.parent || C,
            r = e.keyframes
              ? ((t = ae(e.keyframes)),
                function (e, n) {
                  for (var r in n)
                    r in e ||
                      ("duration" === r && t) ||
                      "ease" === r ||
                      (e[r] = n[r]);
                })
              : Ge;
          if (te(e.inherit))
            for (; n; ) r(e, n.vars.defaults), (n = n.parent || n._dp);
          return e;
        },
        Ye = function (e, t, n, r, i) {
          void 0 === n && (n = "_first"), void 0 === r && (r = "_last");
          var a,
            s = e[r];
          if (i) for (a = t[i]; s && s[i] > a; ) s = s._prev;
          return (
            s
              ? ((t._next = s._next), (s._next = t))
              : ((t._next = e[n]), (e[n] = t)),
            t._next ? (t._next._prev = t) : (e[r] = t),
            (t._prev = s),
            (t.parent = t._dp = e),
            t
          );
        },
        Ke = function (e, t, n, r) {
          void 0 === n && (n = "_first"), void 0 === r && (r = "_last");
          var i = t._prev,
            a = t._next;
          i ? (i._next = a) : e[n] === t && (e[n] = a),
            a ? (a._prev = i) : e[r] === t && (e[r] = i),
            (t._next = t._prev = t.parent = null);
        },
        Ze = function (e, t) {
          e.parent &&
            (!t || e.parent.autoRemoveChildren) &&
            e.parent.remove &&
            e.parent.remove(e),
            (e._act = 0);
        },
        Je = function (e, t) {
          if (e && (!t || t._end > e._dur || t._start < 0))
            for (var n = e; n; ) (n._dirty = 1), (n = n.parent);
          return e;
        },
        $e = function (e) {
          for (var t = e.parent; t && t.parent; )
            (t._dirty = 1), t.totalDuration(), (t = t.parent);
          return e;
        },
        Qe = function (e, t, n, r) {
          return (
            e._startAt &&
            (M
              ? e._startAt.revert(xe)
              : (e.vars.immediateRender && !e.vars.autoRevert) ||
                e._startAt.render(t, !0, r))
          );
        },
        et = function e(t) {
          return !t || (t._ts && e(t.parent));
        },
        tt = function (e) {
          return e._repeat ? nt(e._tTime, (e = e.duration() + e._rDelay)) * e : 0;
        },
        nt = function (e, t) {
          var n = Math.floor((e /= t));
          return e && n === e ? n - 1 : n;
        },
        rt = function (e, t) {
          return (
            (e - t._start) * t._ts +
            (t._ts >= 0 ? 0 : t._dirty ? t.totalDuration() : t._tDur)
          );
        },
        it = function (e) {
          return (e._end = Oe(
            e._start + (e._tDur / Math.abs(e._ts || e._rts || G) || 0)
          ));
        },
        at = function (e, t) {
          var n = e._dp;
          return (
            n &&
              n.smoothChildTiming &&
              e._ts &&
              ((e._start = Oe(
                n._time -
                  (e._ts > 0
                    ? t / e._ts
                    : ((e._dirty ? e.totalDuration() : e._tDur) - t) / -e._ts)
              )),
              it(e),
              n._dirty || Je(n, e)),
            e
          );
        },
        st = function (e, t) {
          var n;
          if (
            ((t._time ||
              (!t._dur && t._initted) ||
              (t._start < e._time && (t._dur || !t.add))) &&
              ((n = rt(e.rawTime(), t)),
              (!t._dur || yt(0, t.totalDuration(), n) - t._tTime > G) &&
                t.render(n, !0)),
            Je(e, t)._dp && e._initted && e._time >= e._dur && e._ts)
          ) {
            if (e._dur < e.duration())
              for (n = e; n._dp; )
                n.rawTime() >= 0 && n.totalTime(n._tTime), (n = n._dp);
            e._zTime = -1e-8;
          }
        },
        ot = function (e, t, n, r) {
          return (
            t.parent && Ze(t),
            (t._start = Oe(
              ($(n) ? n : n || e !== C ? mt(e, n, t) : e._time) + t._delay
            )),
            (t._end = Oe(
              t._start + (t.totalDuration() / Math.abs(t.timeScale()) || 0)
            )),
            Ye(e, t, "_first", "_last", e._sort ? "_start" : 0),
            ct(t) || (e._recent = t),
            r || st(e, t),
            e._ts < 0 && at(e, e._tTime),
            e
          );
        },
        lt = function (e, t) {
          return (
            (fe.ScrollTrigger || ge("scrollTrigger", t)) &&
            fe.ScrollTrigger.create(t, e)
          );
        },
        ht = function (e, t, n, r, i) {
          return (
            pn(e, t, i),
            e._initted
              ? !n &&
                e._pt &&
                !M &&
                ((e._dur && !1 !== e.vars.lazy) || (!e._dur && e.vars.lazy)) &&
                I !== Xt.frame
                ? (we.push(e), (e._lazy = [i, r]), 1)
                : void 0
              : 1
          );
        },
        ut = function e(t) {
          var n = t.parent;
          return (
            n && n._ts && n._initted && !n._lock && (n.rawTime() < 0 || e(n))
          );
        },
        ct = function (e) {
          var t = e.data;
          return "isFromStart" === t || "isStart" === t;
        },
        dt = function (e, t, n, r) {
          var i = e._repeat,
            a = Oe(t) || 0,
            s = e._tTime / e._tDur;
          return (
            s && !r && (e._time *= a / e._dur),
            (e._dur = a),
            (e._tDur = i ? (i < 0 ? 1e10 : Oe(a * (i + 1) + e._rDelay * i)) : a),
            s > 0 && !r && at(e, (e._tTime = e._tDur * s)),
            e.parent && it(e),
            n || Je(e.parent, e),
            e
          );
        },
        ft = function (e) {
          return e instanceof ln ? Je(e) : dt(e, e._dur);
        },
        pt = { _start: 0, endTime: _e, totalDuration: _e },
        mt = function e(t, n, r) {
          var i,
            a,
            s,
            o = t.labels,
            l = t._recent || pt,
            h = t.duration() >= H ? l.endTime(!1) : t._dur;
          return Z(n) && (isNaN(n) || n in o)
            ? ((a = n.charAt(0)),
              (s = "%" === n.substr(-1)),
              (i = n.indexOf("=")),
              "<" === a || ">" === a
                ? (i >= 0 && (n = n.replace(/=/, "")),
                  ("<" === a ? l._start : l.endTime(l._repeat >= 0)) +
                    (parseFloat(n.substr(1)) || 0) *
                      (s ? (i < 0 ? l : r).totalDuration() / 100 : 1))
                : i < 0
                ? (n in o || (o[n] = h), o[n])
                : ((a = parseFloat(n.charAt(i - 1) + n.substr(i + 1))),
                  s && r && (a = (a / 100) * (ae(r) ? r[0] : r).totalDuration()),
                  i > 1 ? e(t, n.substr(0, i - 1), r) + a : h + a))
            : null == n
            ? h
            : +n;
        },
        gt = function (e, t, n) {
          var r,
            i,
            a = $(t[1]),
            s = (a ? 2 : 1) + (e < 2 ? 0 : 1),
            o = t[s];
          if ((a && (o.duration = t[1]), (o.parent = n), e)) {
            for (r = o, i = n; i && !("immediateRender" in r); )
              (r = i.vars.defaults || {}), (i = te(i.vars.inherit) && i.parent);
            (o.immediateRender = te(r.immediateRender)),
              e < 2 ? (o.runBackwards = 1) : (o.startAt = t[s - 1]);
          }
          return new _n(t[0], o, t[s + 1]);
        },
        vt = function (e, t) {
          return e || 0 === e ? t(e) : t;
        },
        yt = function (e, t, n) {
          return n < e ? e : n > t ? t : n;
        },
        _t = function (e, t) {
          return Z(e) && (t = de.exec(e)) ? t[1] : "";
        },
        bt = [].slice,
        xt = function (e, t) {
          return (
            e &&
            ee(e) &&
            "length" in e &&
            ((!t && !e.length) || (e.length - 1 in e && ee(e[0]))) &&
            !e.nodeType &&
            e !== P
          );
        },
        St = function (e, t, n) {
          return A && !t && A.selector
            ? A.selector(e)
            : !Z(e) || n || (!k && qt())
            ? ae(e)
              ? (function (e, t, n) {
                  return (
                    void 0 === n && (n = []),
                    e.forEach(function (e) {
                      var r;
                      return (Z(e) && !t) || xt(e, 1)
                        ? (r = n).push.apply(r, St(e))
                        : n.push(e);
                    }) || n
                  );
                })(e, n)
              : xt(e)
              ? bt.call(e, 0)
              : e
              ? [e]
              : []
            : bt.call((t || R).querySelectorAll(e), 0);
        },
        Et = function (e) {
          return (
            (e = St(e)[0] || ve("Invalid scope") || {}),
            function (t) {
              var n = e.current || e.nativeElement || e;
              return St(
                t,
                n.querySelectorAll
                  ? n
                  : n === e
                  ? ve("Invalid scope") || R.createElement("div")
                  : e
              );
            }
          );
        },
        wt = function (e) {
          return e.sort(function () {
            return 0.5 - Math.random();
          });
        },
        Tt = function (e) {
          if (J(e)) return e;
          var t = ee(e) ? e : { each: e },
            n = en(t.ease),
            r = t.from || 0,
            i = parseFloat(t.base) || 0,
            a = {},
            s = r > 0 && r < 1,
            o = isNaN(r) || s,
            l = t.axis,
            h = r,
            u = r;
          return (
            Z(r)
              ? (h = u = { center: 0.5, edges: 0.5, end: 1 }[r] || 0)
              : !s && o && ((h = r[0]), (u = r[1])),
            function (e, s, c) {
              var d,
                f,
                p,
                m,
                g,
                v,
                y,
                _,
                b,
                x = (c || t).length,
                S = a[x];
              if (!S) {
                if (!(b = "auto" === t.grid ? 0 : (t.grid || [1, H])[1])) {
                  for (
                    y = -H;
                    y < (y = c[b++].getBoundingClientRect().left) && b < x;
  
                  );
                  b < x && b--;
                }
                for (
                  S = a[x] = [],
                    d = o ? Math.min(b, x) * h - 0.5 : r % b,
                    f = b === H ? 0 : o ? (x * u) / b - 0.5 : (r / b) | 0,
                    y = 0,
                    _ = H,
                    v = 0;
                  v < x;
                  v++
                )
                  (p = (v % b) - d),
                    (m = f - ((v / b) | 0)),
                    (S[v] = g =
                      l ? Math.abs("y" === l ? m : p) : q(p * p + m * m)),
                    g > y && (y = g),
                    g < _ && (_ = g);
                "random" === r && wt(S),
                  (S.max = y - _),
                  (S.min = _),
                  (S.v = x =
                    (parseFloat(t.amount) ||
                      parseFloat(t.each) *
                        (b > x
                          ? x - 1
                          : l
                          ? "y" === l
                            ? x / b
                            : b
                          : Math.max(b, x / b)) ||
                      0) * ("edges" === r ? -1 : 1)),
                  (S.b = x < 0 ? i - x : i),
                  (S.u = _t(t.amount || t.each) || 0),
                  (n = n && x < 0 ? $t(n) : n);
              }
              return (
                (x = (S[e] - S.min) / S.max || 0),
                Oe(S.b + (n ? n(x) : x) * S.v) + S.u
              );
            }
          );
        },
        Mt = function (e) {
          var t = Math.pow(10, ((e + "").split(".")[1] || "").length);
          return function (n) {
            var r = Oe(Math.round(parseFloat(n) / e) * e * t);
            return (r - (r % 1)) / t + ($(n) ? 0 : _t(n));
          };
        },
        At = function (e, t) {
          var n,
            r,
            i = ae(e);
          return (
            !i &&
              ee(e) &&
              ((n = i = e.radius || H),
              e.values
                ? ((e = St(e.values)), (r = !$(e[0])) && (n *= n))
                : (e = Mt(e.increment))),
            vt(
              t,
              i
                ? J(e)
                  ? function (t) {
                      return (r = e(t)), Math.abs(r - t) <= n ? r : t;
                    }
                  : function (t) {
                      for (
                        var i,
                          a,
                          s = parseFloat(r ? t.x : t),
                          o = parseFloat(r ? t.y : 0),
                          l = H,
                          h = 0,
                          u = e.length;
                        u--;
  
                      )
                        (i = r
                          ? (i = e[u].x - s) * i + (a = e[u].y - o) * a
                          : Math.abs(e[u] - s)) < l && ((l = i), (h = u));
                      return (
                        (h = !n || l <= n ? e[h] : t),
                        r || h === t || $(t) ? h : h + _t(t)
                      );
                    }
                : Mt(e)
            )
          );
        },
        Ct = function (e, t, n, r) {
          return vt(ae(e) ? !t : !0 === n ? !!(n = 0) : !r, function () {
            return ae(e)
              ? e[~~(Math.random() * e.length)]
              : (n = n || 1e-5) &&
                  (r = n < 1 ? Math.pow(10, (n + "").length - 2) : 1) &&
                  Math.floor(
                    Math.round(
                      (e - n / 2 + Math.random() * (t - e + 0.99 * n)) / n
                    ) *
                      n *
                      r
                  ) / r;
          });
        },
        Pt = function (e, t, n) {
          return vt(n, function (n) {
            return e[~~t(n)];
          });
        },
        kt = function (e) {
          for (var t, n, r, i, a = 0, s = ""; ~(t = e.indexOf("random(", a)); )
            (r = e.indexOf(")", t)),
              (i = "[" === e.charAt(t + 7)),
              (n = e.substr(t + 7, r - t - 7).match(i ? ce : se)),
              (s +=
                e.substr(a, t - a) +
                Ct(i ? n : +n[0], i ? 0 : +n[1], +n[2] || 1e-5)),
              (a = r + 1);
          return s + e.substr(a, e.length - a);
        },
        Rt = function (e, t, n, r, i) {
          var a = t - e,
            s = r - n;
          return vt(i, function (t) {
            return n + (((t - e) / a) * s || 0);
          });
        },
        Dt = function (e, t, n) {
          var r,
            i,
            a,
            s = e.labels,
            o = H;
          for (r in s)
            (i = s[r] - t) < 0 == !!n &&
              i &&
              o > (i = Math.abs(i)) &&
              ((a = r), (o = i));
          return a;
        },
        It = function (e, t, n) {
          var r,
            i,
            a,
            s = e.vars,
            o = s[t],
            l = A,
            h = e._ctx;
          if (o)
            return (
              (r = s[t + "Params"]),
              (i = s.callbackScope || e),
              n && we.length && Ue(),
              h && (A = h),
              (a = r ? o.apply(i, r) : o.call(i)),
              (A = l),
              a
            );
        },
        Lt = function (e) {
          return (
            Ze(e),
            e.scrollTrigger && e.scrollTrigger.kill(!!M),
            e.progress() < 1 && It(e, "onInterrupt"),
            e
          );
        },
        Ft = [],
        Ot = function (e) {
          if (ne() && e) {
            var t = (e = (!e.name && e.default) || e).name,
              n = J(e),
              r =
                t && !n && e.init
                  ? function () {
                      this._props = [];
                    }
                  : e,
              i = {
                init: _e,
                render: Cn,
                add: dn,
                kill: kn,
                modifier: Pn,
                rawVars: 0
              },
              a = {
                targetTest: 0,
                get: 0,
                getSetter: wn,
                aliases: {},
                register: 0
              };
            if ((qt(), e !== r)) {
              if (Me[t]) return;
              Ge(r, Ge(Xe(e, i), a)),
                We(r.prototype, We(i, Xe(e, a))),
                (Me[(r.prop = t)] = r),
                e.targetTest && (Pe.push(r), (Ee[t] = 1)),
                (t =
                  ("css" === t
                    ? "CSS"
                    : t.charAt(0).toUpperCase() + t.substr(1)) + "Plugin");
            }
            ye(t, r), e.register && e.register(Xn, r, In);
          } else e && Ft.push(e);
        },
        Nt = 255,
        Bt = {
          aqua: [0, Nt, Nt],
          lime: [0, Nt, 0],
          silver: [192, 192, 192],
          black: [0, 0, 0],
          maroon: [128, 0, 0],
          teal: [0, 128, 128],
          blue: [0, 0, Nt],
          navy: [0, 0, 128],
          white: [Nt, Nt, Nt],
          olive: [128, 128, 0],
          yellow: [Nt, Nt, 0],
          orange: [Nt, 165, 0],
          gray: [128, 128, 128],
          purple: [128, 0, 128],
          green: [0, 128, 0],
          red: [Nt, 0, 0],
          pink: [Nt, 192, 203],
          cyan: [0, Nt, Nt],
          transparent: [Nt, Nt, Nt, 0]
        },
        Ut = function (e, t, n) {
          return (
            ((6 * (e += e < 0 ? 1 : e > 1 ? -1 : 0) < 1
              ? t + (n - t) * e * 6
              : e < 0.5
              ? n
              : 3 * e < 2
              ? t + (n - t) * (2 / 3 - e) * 6
              : t) *
              Nt +
              0.5) |
            0
          );
        },
        zt = function (e, t, n) {
          var r,
            i,
            a,
            s,
            o,
            l,
            h,
            u,
            c,
            d,
            f = e ? ($(e) ? [e >> 16, (e >> 8) & Nt, e & Nt] : 0) : Bt.black;
          if (!f) {
            if (("," === e.substr(-1) && (e = e.substr(0, e.length - 1)), Bt[e]))
              f = Bt[e];
            else if ("#" === e.charAt(0)) {
              if (
                (e.length < 6 &&
                  ((r = e.charAt(1)),
                  (i = e.charAt(2)),
                  (a = e.charAt(3)),
                  (e =
                    "#" +
                    r +
                    r +
                    i +
                    i +
                    a +
                    a +
                    (5 === e.length ? e.charAt(4) + e.charAt(4) : ""))),
                9 === e.length)
              )
                return [
                  (f = parseInt(e.substr(1, 6), 16)) >> 16,
                  (f >> 8) & Nt,
                  f & Nt,
                  parseInt(e.substr(7), 16) / 255
                ];
              f = [(e = parseInt(e.substr(1), 16)) >> 16, (e >> 8) & Nt, e & Nt];
            } else if ("hsl" === e.substr(0, 3)) {
              if (((f = d = e.match(se)), t)) {
                if (~e.indexOf("="))
                  return (f = e.match(oe)), n && f.length < 4 && (f[3] = 1), f;
              } else
                (s = (+f[0] % 360) / 360),
                  (o = +f[1] / 100),
                  (r =
                    2 * (l = +f[2] / 100) -
                    (i = l <= 0.5 ? l * (o + 1) : l + o - l * o)),
                  f.length > 3 && (f[3] *= 1),
                  (f[0] = Ut(s + 1 / 3, r, i)),
                  (f[1] = Ut(s, r, i)),
                  (f[2] = Ut(s - 1 / 3, r, i));
            } else f = e.match(se) || Bt.transparent;
            f = f.map(Number);
          }
          return (
            t &&
              !d &&
              ((r = f[0] / Nt),
              (i = f[1] / Nt),
              (a = f[2] / Nt),
              (l = ((h = Math.max(r, i, a)) + (u = Math.min(r, i, a))) / 2),
              h === u
                ? (s = o = 0)
                : ((c = h - u),
                  (o = l > 0.5 ? c / (2 - h - u) : c / (h + u)),
                  (s =
                    h === r
                      ? (i - a) / c + (i < a ? 6 : 0)
                      : h === i
                      ? (a - r) / c + 2
                      : (r - i) / c + 4),
                  (s *= 60)),
              (f[0] = ~~(s + 0.5)),
              (f[1] = ~~(100 * o + 0.5)),
              (f[2] = ~~(100 * l + 0.5))),
            n && f.length < 4 && (f[3] = 1),
            f
          );
        },
        Vt = function (e) {
          var t = [],
            n = [],
            r = -1;
          return (
            e.split(Gt).forEach(function (e) {
              var i = e.match(le) || [];
              t.push.apply(t, i), n.push((r += i.length + 1));
            }),
            (t.c = n),
            t
          );
        },
        Ht = function (e, t, n) {
          var r,
            i,
            a,
            s,
            o = "",
            l = (e + o).match(Gt),
            h = t ? "hsla(" : "rgba(",
            u = 0;
          if (!l) return e;
          if (
            ((l = l.map(function (e) {
              return (
                (e = zt(e, t, 1)) &&
                h +
                  (t
                    ? e[0] + "," + e[1] + "%," + e[2] + "%," + e[3]
                    : e.join(",")) +
                  ")"
              );
            })),
            n && ((a = Vt(e)), (r = n.c).join(o) !== a.c.join(o)))
          )
            for (s = (i = e.replace(Gt, "1").split(le)).length - 1; u < s; u++)
              o +=
                i[u] +
                (~r.indexOf(u)
                  ? l.shift() || h + "0,0,0,0)"
                  : (a.length ? a : l.length ? l : n).shift());
          if (!i)
            for (s = (i = e.split(Gt)).length - 1; u < s; u++) o += i[u] + l[u];
          return o + i[s];
        },
        Gt = (function () {
          var e,
            t =
              "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";
          for (e in Bt) t += "|" + e + "\\b";
          return new RegExp(t + ")", "gi");
        })(),
        Wt = /hsl[a]?\(/,
        jt = function (e) {
          var t,
            n = e.join(" ");
          if (((Gt.lastIndex = 0), Gt.test(n)))
            return (
              (t = Wt.test(n)),
              (e[1] = Ht(e[1], t)),
              (e[0] = Ht(e[0], t, Vt(e[1]))),
              !0
            );
        },
        Xt = (function () {
          var e,
            t,
            n,
            r,
            i,
            a,
            s = Date.now,
            o = 500,
            l = 33,
            h = s(),
            u = h,
            c = 1e3 / 240,
            d = c,
            f = [],
            p = function n(p) {
              var m,
                g,
                v,
                y,
                _ = s() - u,
                b = !0 === p;
              if (
                (_ > o && (h += _ - l),
                ((m = (v = (u += _) - h) - d) > 0 || b) &&
                  ((y = ++r.frame),
                  (i = v - 1e3 * r.time),
                  (r.time = v /= 1e3),
                  (d += m + (m >= c ? 4 : c - m)),
                  (g = 1)),
                b || (e = t(n)),
                g)
              )
                for (a = 0; a < f.length; a++) f[a](v, i, y, p);
            };
          return (r = {
            time: 0,
            frame: 0,
            tick: function () {
              p(!0);
            },
            deltaRatio: function (e) {
              return i / (1e3 / (e || 60));
            },
            wake: function () {
              D &&
                (!k &&
                  ne() &&
                  ((P = k = window),
                  (R = P.document || {}),
                  (fe.gsap = Xn),
                  (P.gsapVersions || (P.gsapVersions = [])).push(Xn.version),
                  me(pe || P.GreenSockGlobals || (!P.gsap && P) || {}),
                  (n = P.requestAnimationFrame),
                  Ft.forEach(Ot)),
                e && r.sleep(),
                (t =
                  n ||
                  function (e) {
                    return setTimeout(e, (d - 1e3 * r.time + 1) | 0);
                  }),
                (F = 1),
                p(2));
            },
            sleep: function () {
              (n ? P.cancelAnimationFrame : clearTimeout)(e), (F = 0), (t = _e);
            },
            lagSmoothing: function (e, t) {
              (o = e || 1 / 0), (l = Math.min(t || 33, o));
            },
            fps: function (e) {
              (c = 1e3 / (e || 240)), (d = 1e3 * r.time + c);
            },
            add: function (e, t, n) {
              var i = t
                ? function (t, n, a, s) {
                    e(t, n, a, s), r.remove(i);
                  }
                : e;
              return r.remove(e), f[n ? "unshift" : "push"](i), qt(), i;
            },
            remove: function (e, t) {
              ~(t = f.indexOf(e)) && f.splice(t, 1) && a >= t && a--;
            },
            _listeners: f
          });
        })(),
        qt = function () {
          return !F && Xt.wake();
        },
        Yt = {},
        Kt = /^[\d.\-M][\d.\-,\s]/,
        Zt = /["']/g,
        Jt = function (e) {
          for (
            var t,
              n,
              r,
              i = {},
              a = e.substr(1, e.length - 3).split(":"),
              s = a[0],
              o = 1,
              l = a.length;
            o < l;
            o++
          )
            (n = a[o]),
              (t = o !== l - 1 ? n.lastIndexOf(",") : n.length),
              (r = n.substr(0, t)),
              (i[s] = isNaN(r) ? r.replace(Zt, "").trim() : +r),
              (s = n.substr(t + 1).trim());
          return i;
        },
        $t = function (e) {
          return function (t) {
            return 1 - e(1 - t);
          };
        },
        Qt = function e(t, n) {
          for (var r, i = t._first; i; )
            i instanceof ln
              ? e(i, n)
              : !i.vars.yoyoEase ||
                (i._yoyo && i._repeat) ||
                i._yoyo === n ||
                (i.timeline
                  ? e(i.timeline, n)
                  : ((r = i._ease),
                    (i._ease = i._yEase),
                    (i._yEase = r),
                    (i._yoyo = n))),
              (i = i._next);
        },
        en = function (e, t) {
          return (
            (e &&
              (J(e)
                ? e
                : Yt[e] ||
                  (function (e) {
                    var t,
                      n,
                      r,
                      i,
                      a = (e + "").split("("),
                      s = Yt[a[0]];
                    return s && a.length > 1 && s.config
                      ? s.config.apply(
                          null,
                          ~e.indexOf("{")
                            ? [Jt(a[1])]
                            : ((t = e),
                              (n = t.indexOf("(") + 1),
                              (r = t.indexOf(")")),
                              (i = t.indexOf("(", n)),
                              t.substring(
                                n,
                                ~i && i < r ? t.indexOf(")", r + 1) : r
                              ))
                                .split(",")
                                .map(Ve)
                        )
                      : Yt._CE && Kt.test(e)
                      ? Yt._CE("", e)
                      : s;
                  })(e))) ||
            t
          );
        },
        tn = function (e, t, n, r) {
          void 0 === n &&
            (n = function (e) {
              return 1 - t(1 - e);
            }),
            void 0 === r &&
              (r = function (e) {
                return e < 0.5 ? t(2 * e) / 2 : 1 - t(2 * (1 - e)) / 2;
              });
          var i,
            a = { easeIn: t, easeOut: n, easeInOut: r };
          return (
            Le(e, function (e) {
              for (var t in ((Yt[e] = fe[e] = a),
              (Yt[(i = e.toLowerCase())] = n),
              a))
                Yt[
                  i +
                    ("easeIn" === t ? ".in" : "easeOut" === t ? ".out" : ".inOut")
                ] = Yt[e + "." + t] = a[t];
            }),
            a
          );
        },
        nn = function (e) {
          return function (t) {
            return t < 0.5 ? (1 - e(1 - 2 * t)) / 2 : 0.5 + e(2 * (t - 0.5)) / 2;
          };
        },
        rn = function e(t, n, r) {
          var i = n >= 1 ? n : 1,
            a = (r || (t ? 0.3 : 0.45)) / (n < 1 ? n : 1),
            s = (a / W) * (Math.asin(1 / i) || 0),
            o = function (e) {
              return 1 === e ? 1 : i * Math.pow(2, -10 * e) * K((e - s) * a) + 1;
            },
            l =
              "out" === t
                ? o
                : "in" === t
                ? function (e) {
                    return 1 - o(1 - e);
                  }
                : nn(o);
          return (
            (a = W / a),
            (l.config = function (n, r) {
              return e(t, n, r);
            }),
            l
          );
        },
        an = function e(t, n) {
          void 0 === n && (n = 1.70158);
          var r = function (e) {
              return e ? --e * e * ((n + 1) * e + n) + 1 : 0;
            },
            i =
              "out" === t
                ? r
                : "in" === t
                ? function (e) {
                    return 1 - r(1 - e);
                  }
                : nn(r);
          return (
            (i.config = function (n) {
              return e(t, n);
            }),
            i
          );
        };
      Le("Linear,Quad,Cubic,Quart,Quint,Strong", function (e, t) {
        var n = t < 5 ? t + 1 : t;
        tn(
          e + ",Power" + (n - 1),
          t
            ? function (e) {
                return Math.pow(e, n);
              }
            : function (e) {
                return e;
              },
          function (e) {
            return 1 - Math.pow(1 - e, n);
          },
          function (e) {
            return e < 0.5
              ? Math.pow(2 * e, n) / 2
              : 1 - Math.pow(2 * (1 - e), n) / 2;
          }
        );
      }),
        (Yt.Linear.easeNone = Yt.none = Yt.Linear.easeIn),
        tn("Elastic", rn("in"), rn("out"), rn()),
        (O = 7.5625),
        (B = 1 / (N = 2.75)),
        tn(
          "Bounce",
          function (e) {
            return 1 - U(1 - e);
          },
          (U = function (e) {
            return e < B
              ? O * e * e
              : e < 0.7272727272727273
              ? O * Math.pow(e - 1.5 / N, 2) + 0.75
              : e < 0.9090909090909092
              ? O * (e -= 2.25 / N) * e + 0.9375
              : O * Math.pow(e - 2.625 / N, 2) + 0.984375;
          })
        ),
        tn("Expo", function (e) {
          return e ? Math.pow(2, 10 * (e - 1)) : 0;
        }),
        tn("Circ", function (e) {
          return -(q(1 - e * e) - 1);
        }),
        tn("Sine", function (e) {
          return 1 === e ? 1 : 1 - Y(e * j);
        }),
        tn("Back", an("in"), an("out"), an()),
        (Yt.SteppedEase =
          Yt.steps =
          fe.SteppedEase =
            {
              config: function (e, t) {
                void 0 === e && (e = 1);
                var n = 1 / e,
                  r = e + (t ? 0 : 1),
                  i = t ? 1 : 0;
                return function (e) {
                  return (((r * yt(0, 0.99999999, e)) | 0) + i) * n;
                };
              }
            }),
        (V.ease = Yt["quad.out"]),
        Le(
          "onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",
          function (e) {
            return (ke += e + "," + e + "Params,");
          }
        );
      var sn = function (e, t) {
          (this.id = X++),
            (e._gsap = this),
            (this.target = e),
            (this.harness = t),
            (this.get = t ? t.get : Ie),
            (this.set = t ? t.getSetter : wn);
        },
        on = (function () {
          function e(e) {
            (this.vars = e),
              (this._delay = +e.delay || 0),
              (this._repeat = e.repeat === 1 / 0 ? -2 : e.repeat || 0) &&
                ((this._rDelay = e.repeatDelay || 0),
                (this._yoyo = !!e.yoyo || !!e.yoyoEase)),
              (this._ts = 1),
              dt(this, +e.duration, 1, 1),
              (this.data = e.data),
              A && ((this._ctx = A), A.data.push(this)),
              F || Xt.wake();
          }
          var t = e.prototype;
          return (
            (t.delay = function (e) {
              return e || 0 === e
                ? (this.parent &&
                    this.parent.smoothChildTiming &&
                    this.startTime(this._start + e - this._delay),
                  (this._delay = e),
                  this)
                : this._delay;
            }),
            (t.duration = function (e) {
              return arguments.length
                ? this.totalDuration(
                    this._repeat > 0 ? e + (e + this._rDelay) * this._repeat : e
                  )
                : this.totalDuration() && this._dur;
            }),
            (t.totalDuration = function (e) {
              return arguments.length
                ? ((this._dirty = 0),
                  dt(
                    this,
                    this._repeat < 0
                      ? e
                      : (e - this._repeat * this._rDelay) / (this._repeat + 1)
                  ))
                : this._tDur;
            }),
            (t.totalTime = function (e, t) {
              if ((qt(), !arguments.length)) return this._tTime;
              var n = this._dp;
              if (n && n.smoothChildTiming && this._ts) {
                for (
                  at(this, e), !n._dp || n.parent || st(n, this);
                  n && n.parent;
  
                )
                  n.parent._time !==
                    n._start +
                      (n._ts >= 0
                        ? n._tTime / n._ts
                        : (n.totalDuration() - n._tTime) / -n._ts) &&
                    n.totalTime(n._tTime, !0),
                    (n = n.parent);
                !this.parent &&
                  this._dp.autoRemoveChildren &&
                  ((this._ts > 0 && e < this._tDur) ||
                    (this._ts < 0 && e > 0) ||
                    (!this._tDur && !e)) &&
                  ot(this._dp, this, this._start - this._delay);
              }
              return (
                (this._tTime !== e ||
                  (!this._dur && !t) ||
                  (this._initted && Math.abs(this._zTime) === G) ||
                  (!e && !this._initted && (this.add || this._ptLookup))) &&
                  (this._ts || (this._pTime = e), ze(this, e, t)),
                this
              );
            }),
            (t.time = function (e, t) {
              return arguments.length
                ? this.totalTime(
                    Math.min(this.totalDuration(), e + tt(this)) %
                      (this._dur + this._rDelay) || (e ? this._dur : 0),
                    t
                  )
                : this._time;
            }),
            (t.totalProgress = function (e, t) {
              return arguments.length
                ? this.totalTime(this.totalDuration() * e, t)
                : this.totalDuration()
                ? Math.min(1, this._tTime / this._tDur)
                : this.rawTime() > 0
                ? 1
                : 0;
            }),
            (t.progress = function (e, t) {
              return arguments.length
                ? this.totalTime(
                    this.duration() *
                      (!this._yoyo || 1 & this.iteration() ? e : 1 - e) +
                      tt(this),
                    t
                  )
                : this.duration()
                ? Math.min(1, this._time / this._dur)
                : this.rawTime() > 0
                ? 1
                : 0;
            }),
            (t.iteration = function (e, t) {
              var n = this.duration() + this._rDelay;
              return arguments.length
                ? this.totalTime(this._time + (e - 1) * n, t)
                : this._repeat
                ? nt(this._tTime, n) + 1
                : 1;
            }),
            (t.timeScale = function (e, t) {
              if (!arguments.length) return -1e-8 === this._rts ? 0 : this._rts;
              if (this._rts === e) return this;
              var n =
                this.parent && this._ts
                  ? rt(this.parent._time, this)
                  : this._tTime;
              return (
                (this._rts = +e || 0),
                (this._ts = this._ps || -1e-8 === e ? 0 : this._rts),
                this.totalTime(
                  yt(-Math.abs(this._delay), this._tDur, n),
                  !1 !== t
                ),
                it(this),
                $e(this)
              );
            }),
            (t.paused = function (e) {
              return arguments.length
                ? (this._ps !== e &&
                    ((this._ps = e),
                    e
                      ? ((this._pTime =
                          this._tTime || Math.max(-this._delay, this.rawTime())),
                        (this._ts = this._act = 0))
                      : (qt(),
                        (this._ts = this._rts),
                        this.totalTime(
                          this.parent && !this.parent.smoothChildTiming
                            ? this.rawTime()
                            : this._tTime || this._pTime,
                          1 === this.progress() &&
                            Math.abs(this._zTime) !== G &&
                            (this._tTime -= G)
                        ))),
                  this)
                : this._ps;
            }),
            (t.startTime = function (e) {
              if (arguments.length) {
                this._start = e;
                var t = this.parent || this._dp;
                return (
                  t && (t._sort || !this.parent) && ot(t, this, e - this._delay),
                  this
                );
              }
              return this._start;
            }),
            (t.endTime = function (e) {
              return (
                this._start +
                (te(e) ? this.totalDuration() : this.duration()) /
                  Math.abs(this._ts || 1)
              );
            }),
            (t.rawTime = function (e) {
              var t = this.parent || this._dp;
              return t
                ? e &&
                  (!this._ts ||
                    (this._repeat && this._time && this.totalProgress() < 1))
                  ? this._tTime % (this._dur + this._rDelay)
                  : this._ts
                  ? rt(t.rawTime(e), this)
                  : this._tTime
                : this._tTime;
            }),
            (t.revert = function (e) {
              void 0 === e && (e = Se);
              var t = M;
              return (
                (M = e),
                (this._initted || this._startAt) &&
                  (this.timeline && this.timeline.revert(e),
                  this.totalTime(-0.01, e.suppressEvents)),
                "nested" !== this.data && !1 !== e.kill && this.kill(),
                (M = t),
                this
              );
            }),
            (t.globalTime = function (e) {
              for (var t = this, n = arguments.length ? e : t.rawTime(); t; )
                (n = t._start + n / (Math.abs(t._ts) || 1)), (t = t._dp);
              return !this.parent && this._sat ? this._sat.globalTime(e) : n;
            }),
            (t.repeat = function (e) {
              return arguments.length
                ? ((this._repeat = e === 1 / 0 ? -2 : e), ft(this))
                : -2 === this._repeat
                ? 1 / 0
                : this._repeat;
            }),
            (t.repeatDelay = function (e) {
              if (arguments.length) {
                var t = this._time;
                return (this._rDelay = e), ft(this), t ? this.time(t) : this;
              }
              return this._rDelay;
            }),
            (t.yoyo = function (e) {
              return arguments.length ? ((this._yoyo = e), this) : this._yoyo;
            }),
            (t.seek = function (e, t) {
              return this.totalTime(mt(this, e), te(t));
            }),
            (t.restart = function (e, t) {
              return this.play().totalTime(e ? -this._delay : 0, te(t));
            }),
            (t.play = function (e, t) {
              return null != e && this.seek(e, t), this.reversed(!1).paused(!1);
            }),
            (t.reverse = function (e, t) {
              return (
                null != e && this.seek(e || this.totalDuration(), t),
                this.reversed(!0).paused(!1)
              );
            }),
            (t.pause = function (e, t) {
              return null != e && this.seek(e, t), this.paused(!0);
            }),
            (t.resume = function () {
              return this.paused(!1);
            }),
            (t.reversed = function (e) {
              return arguments.length
                ? (!!e !== this.reversed() &&
                    this.timeScale(-this._rts || (e ? -1e-8 : 0)),
                  this)
                : this._rts < 0;
            }),
            (t.invalidate = function () {
              return (this._initted = this._act = 0), (this._zTime = -1e-8), this;
            }),
            (t.isActive = function () {
              var e,
                t = this.parent || this._dp,
                n = this._start;
              return !(
                t &&
                !(
                  this._ts &&
                  this._initted &&
                  t.isActive() &&
                  (e = t.rawTime(!0)) >= n &&
                  e < this.endTime(!0) - G
                )
              );
            }),
            (t.eventCallback = function (e, t, n) {
              var r = this.vars;
              return arguments.length > 1
                ? (t
                    ? ((r[e] = t),
                      n && (r[e + "Params"] = n),
                      "onUpdate" === e && (this._onUpdate = t))
                    : delete r[e],
                  this)
                : r[e];
            }),
            (t.then = function (e) {
              var t = this;
              return new Promise(function (n) {
                var r = J(e) ? e : He,
                  i = function () {
                    var e = t.then;
                    (t.then = null),
                      J(r) && (r = r(t)) && (r.then || r === t) && (t.then = e),
                      n(r),
                      (t.then = e);
                  };
                (t._initted && 1 === t.totalProgress() && t._ts >= 0) ||
                (!t._tTime && t._ts < 0)
                  ? i()
                  : (t._prom = i);
              });
            }),
            (t.kill = function () {
              Lt(this);
            }),
            e
          );
        })();
      Ge(on.prototype, {
        _time: 0,
        _start: 0,
        _end: 0,
        _tTime: 0,
        _tDur: 0,
        _dirty: 0,
        _repeat: 0,
        _yoyo: !1,
        parent: null,
        _initted: !1,
        _rDelay: 0,
        _ts: 1,
        _dp: 0,
        ratio: 0,
        _zTime: -1e-8,
        _prom: 0,
        _ps: !1,
        _rts: 1
      });
      var ln = (function (e) {
        function t(t, n) {
          var r;
          return (
            void 0 === t && (t = {}),
            ((r = e.call(this, t) || this).labels = {}),
            (r.smoothChildTiming = !!t.smoothChildTiming),
            (r.autoRemoveChildren = !!t.autoRemoveChildren),
            (r._sort = te(t.sortChildren)),
            C && ot(t.parent || C, E(r), n),
            t.reversed && r.reverse(),
            t.paused && r.paused(!0),
            t.scrollTrigger && lt(E(r), t.scrollTrigger),
            r
          );
        }
        w(t, e);
        var n = t.prototype;
        return (
          (n.to = function (e, t, n) {
            return gt(0, arguments, this), this;
          }),
          (n.from = function (e, t, n) {
            return gt(1, arguments, this), this;
          }),
          (n.fromTo = function (e, t, n, r) {
            return gt(2, arguments, this), this;
          }),
          (n.set = function (e, t, n) {
            return (
              (t.duration = 0),
              (t.parent = this),
              qe(t).repeatDelay || (t.repeat = 0),
              (t.immediateRender = !!t.immediateRender),
              new _n(e, t, mt(this, n), 1),
              this
            );
          }),
          (n.call = function (e, t, n) {
            return ot(this, _n.delayedCall(0, e, t), n);
          }),
          (n.staggerTo = function (e, t, n, r, i, a, s) {
            return (
              (n.duration = t),
              (n.stagger = n.stagger || r),
              (n.onComplete = a),
              (n.onCompleteParams = s),
              (n.parent = this),
              new _n(e, n, mt(this, i)),
              this
            );
          }),
          (n.staggerFrom = function (e, t, n, r, i, a, s) {
            return (
              (n.runBackwards = 1),
              (qe(n).immediateRender = te(n.immediateRender)),
              this.staggerTo(e, t, n, r, i, a, s)
            );
          }),
          (n.staggerFromTo = function (e, t, n, r, i, a, s, o) {
            return (
              (r.startAt = n),
              (qe(r).immediateRender = te(r.immediateRender)),
              this.staggerTo(e, t, r, i, a, s, o)
            );
          }),
          (n.render = function (e, t, n) {
            var r,
              i,
              a,
              s,
              o,
              l,
              h,
              u,
              c,
              d,
              f,
              p,
              m = this._time,
              g = this._dirty ? this.totalDuration() : this._tDur,
              v = this._dur,
              y = e <= 0 ? 0 : Oe(e),
              _ = this._zTime < 0 != e < 0 && (this._initted || !v);
            if (
              (this !== C && y > g && e >= 0 && (y = g),
              y !== this._tTime || n || _)
            ) {
              if (
                (m !== this._time &&
                  v &&
                  ((y += this._time - m), (e += this._time - m)),
                (r = y),
                (c = this._start),
                (l = !(u = this._ts)),
                _ && (v || (m = this._zTime), (e || !t) && (this._zTime = e)),
                this._repeat)
              ) {
                if (
                  ((f = this._yoyo),
                  (o = v + this._rDelay),
                  this._repeat < -1 && e < 0)
                )
                  return this.totalTime(100 * o + e, t, n);
                if (
                  ((r = Oe(y % o)),
                  y === g
                    ? ((s = this._repeat), (r = v))
                    : ((s = ~~(y / o)) && s === y / o && ((r = v), s--),
                      r > v && (r = v)),
                  (d = nt(this._tTime, o)),
                  !m &&
                    this._tTime &&
                    d !== s &&
                    this._tTime - d * o - this._dur <= 0 &&
                    (d = s),
                  f && 1 & s && ((r = v - r), (p = 1)),
                  s !== d && !this._lock)
                ) {
                  var b = f && 1 & d,
                    x = b === (f && 1 & s);
                  if (
                    (s < d && (b = !b),
                    (m = b ? 0 : y % v ? v : y),
                    (this._lock = 1),
                    (this.render(m || (p ? 0 : Oe(s * o)), t, !v)._lock = 0),
                    (this._tTime = y),
                    !t && this.parent && It(this, "onRepeat"),
                    this.vars.repeatRefresh &&
                      !p &&
                      (this.invalidate()._lock = 1),
                    (m && m !== this._time) ||
                      l !== !this._ts ||
                      (this.vars.onRepeat && !this.parent && !this._act))
                  )
                    return this;
                  if (
                    ((v = this._dur),
                    (g = this._tDur),
                    x &&
                      ((this._lock = 2),
                      (m = b ? v : -1e-4),
                      this.render(m, !0),
                      this.vars.repeatRefresh && !p && this.invalidate()),
                    (this._lock = 0),
                    !this._ts && !l)
                  )
                    return this;
                  Qt(this, p);
                }
              }
              if (
                (this._hasPause &&
                  !this._forcing &&
                  this._lock < 2 &&
                  ((h = (function (e, t, n) {
                    var r;
                    if (n > t)
                      for (r = e._first; r && r._start <= n; ) {
                        if ("isPause" === r.data && r._start > t) return r;
                        r = r._next;
                      }
                    else
                      for (r = e._last; r && r._start >= n; ) {
                        if ("isPause" === r.data && r._start < t) return r;
                        r = r._prev;
                      }
                  })(this, Oe(m), Oe(r))),
                  h && (y -= r - (r = h._start))),
                (this._tTime = y),
                (this._time = r),
                (this._act = !u),
                this._initted ||
                  ((this._onUpdate = this.vars.onUpdate),
                  (this._initted = 1),
                  (this._zTime = e),
                  (m = 0)),
                !m && r && !t && !s && (It(this, "onStart"), this._tTime !== y))
              )
                return this;
              if (r >= m && e >= 0)
                for (i = this._first; i; ) {
                  if (
                    ((a = i._next), (i._act || r >= i._start) && i._ts && h !== i)
                  ) {
                    if (i.parent !== this) return this.render(e, t, n);
                    if (
                      (i.render(
                        i._ts > 0
                          ? (r - i._start) * i._ts
                          : (i._dirty ? i.totalDuration() : i._tDur) +
                              (r - i._start) * i._ts,
                        t,
                        n
                      ),
                      r !== this._time || (!this._ts && !l))
                    ) {
                      (h = 0), a && (y += this._zTime = -1e-8);
                      break;
                    }
                  }
                  i = a;
                }
              else {
                i = this._last;
                for (var S = e < 0 ? e : r; i; ) {
                  if (
                    ((a = i._prev), (i._act || S <= i._end) && i._ts && h !== i)
                  ) {
                    if (i.parent !== this) return this.render(e, t, n);
                    if (
                      (i.render(
                        i._ts > 0
                          ? (S - i._start) * i._ts
                          : (i._dirty ? i.totalDuration() : i._tDur) +
                              (S - i._start) * i._ts,
                        t,
                        n || (M && (i._initted || i._startAt))
                      ),
                      r !== this._time || (!this._ts && !l))
                    ) {
                      (h = 0), a && (y += this._zTime = S ? -1e-8 : G);
                      break;
                    }
                  }
                  i = a;
                }
              }
              if (
                h &&
                !t &&
                (this.pause(),
                (h.render(r >= m ? 0 : -1e-8)._zTime = r >= m ? 1 : -1),
                this._ts)
              )
                return (this._start = c), it(this), this.render(e, t, n);
              this._onUpdate && !t && It(this, "onUpdate", !0),
                ((y === g && this._tTime >= this.totalDuration()) || (!y && m)) &&
                  ((c !== this._start && Math.abs(u) === Math.abs(this._ts)) ||
                    this._lock ||
                    ((e || !v) &&
                      ((y === g && this._ts > 0) || (!y && this._ts < 0)) &&
                      Ze(this, 1),
                    t ||
                      (e < 0 && !m) ||
                      (!y && !m && g) ||
                      (It(
                        this,
                        y === g && e >= 0 ? "onComplete" : "onReverseComplete",
                        !0
                      ),
                      this._prom &&
                        !(y < g && this.timeScale() > 0) &&
                        this._prom())));
            }
            return this;
          }),
          (n.add = function (e, t) {
            var n = this;
            if (($(t) || (t = mt(this, t, e)), !(e instanceof on))) {
              if (ae(e))
                return (
                  e.forEach(function (e) {
                    return n.add(e, t);
                  }),
                  this
                );
              if (Z(e)) return this.addLabel(e, t);
              if (!J(e)) return this;
              e = _n.delayedCall(0, e);
            }
            return this !== e ? ot(this, e, t) : this;
          }),
          (n.getChildren = function (e, t, n, r) {
            void 0 === e && (e = !0),
              void 0 === t && (t = !0),
              void 0 === n && (n = !0),
              void 0 === r && (r = -H);
            for (var i = [], a = this._first; a; )
              a._start >= r &&
                (a instanceof _n
                  ? t && i.push(a)
                  : (n && i.push(a),
                    e && i.push.apply(i, a.getChildren(!0, t, n)))),
                (a = a._next);
            return i;
          }),
          (n.getById = function (e) {
            for (var t = this.getChildren(1, 1, 1), n = t.length; n--; )
              if (t[n].vars.id === e) return t[n];
          }),
          (n.remove = function (e) {
            return Z(e)
              ? this.removeLabel(e)
              : J(e)
              ? this.killTweensOf(e)
              : (Ke(this, e),
                e === this._recent && (this._recent = this._last),
                Je(this));
          }),
          (n.totalTime = function (t, n) {
            return arguments.length
              ? ((this._forcing = 1),
                !this._dp &&
                  this._ts &&
                  (this._start = Oe(
                    Xt.time -
                      (this._ts > 0
                        ? t / this._ts
                        : (this.totalDuration() - t) / -this._ts)
                  )),
                e.prototype.totalTime.call(this, t, n),
                (this._forcing = 0),
                this)
              : this._tTime;
          }),
          (n.addLabel = function (e, t) {
            return (this.labels[e] = mt(this, t)), this;
          }),
          (n.removeLabel = function (e) {
            return delete this.labels[e], this;
          }),
          (n.addPause = function (e, t, n) {
            var r = _n.delayedCall(0, t || _e, n);
            return (
              (r.data = "isPause"), (this._hasPause = 1), ot(this, r, mt(this, e))
            );
          }),
          (n.removePause = function (e) {
            var t = this._first;
            for (e = mt(this, e); t; )
              t._start === e && "isPause" === t.data && Ze(t), (t = t._next);
          }),
          (n.killTweensOf = function (e, t, n) {
            for (var r = this.getTweensOf(e, n), i = r.length; i--; )
              hn !== r[i] && r[i].kill(e, t);
            return this;
          }),
          (n.getTweensOf = function (e, t) {
            for (var n, r = [], i = St(e), a = this._first, s = $(t); a; )
              a instanceof _n
                ? Be(a._targets, i) &&
                  (s
                    ? (!hn || (a._initted && a._ts)) &&
                      a.globalTime(0) <= t &&
                      a.globalTime(a.totalDuration()) > t
                    : !t || a.isActive()) &&
                  r.push(a)
                : (n = a.getTweensOf(i, t)).length && r.push.apply(r, n),
                (a = a._next);
            return r;
          }),
          (n.tweenTo = function (e, t) {
            t = t || {};
            var n,
              r = this,
              i = mt(r, e),
              a = t,
              s = a.startAt,
              o = a.onStart,
              l = a.onStartParams,
              h = a.immediateRender,
              u = _n.to(
                r,
                Ge(
                  {
                    ease: t.ease || "none",
                    lazy: !1,
                    immediateRender: !1,
                    time: i,
                    overwrite: "auto",
                    duration:
                      t.duration ||
                      Math.abs(
                        (i - (s && "time" in s ? s.time : r._time)) /
                          r.timeScale()
                      ) ||
                      G,
                    onStart: function () {
                      if ((r.pause(), !n)) {
                        var e =
                          t.duration ||
                          Math.abs(
                            (i - (s && "time" in s ? s.time : r._time)) /
                              r.timeScale()
                          );
                        u._dur !== e && dt(u, e, 0, 1).render(u._time, !0, !0),
                          (n = 1);
                      }
                      o && o.apply(u, l || []);
                    }
                  },
                  t
                )
              );
            return h ? u.render(0) : u;
          }),
          (n.tweenFromTo = function (e, t, n) {
            return this.tweenTo(t, Ge({ startAt: { time: mt(this, e) } }, n));
          }),
          (n.recent = function () {
            return this._recent;
          }),
          (n.nextLabel = function (e) {
            return void 0 === e && (e = this._time), Dt(this, mt(this, e));
          }),
          (n.previousLabel = function (e) {
            return void 0 === e && (e = this._time), Dt(this, mt(this, e), 1);
          }),
          (n.currentLabel = function (e) {
            return arguments.length
              ? this.seek(e, !0)
              : this.previousLabel(this._time + G);
          }),
          (n.shiftChildren = function (e, t, n) {
            void 0 === n && (n = 0);
            for (var r, i = this._first, a = this.labels; i; )
              i._start >= n && ((i._start += e), (i._end += e)), (i = i._next);
            if (t) for (r in a) a[r] >= n && (a[r] += e);
            return Je(this);
          }),
          (n.invalidate = function (t) {
            var n = this._first;
            for (this._lock = 0; n; ) n.invalidate(t), (n = n._next);
            return e.prototype.invalidate.call(this, t);
          }),
          (n.clear = function (e) {
            void 0 === e && (e = !0);
            for (var t, n = this._first; n; )
              (t = n._next), this.remove(n), (n = t);
            return (
              this._dp && (this._time = this._tTime = this._pTime = 0),
              e && (this.labels = {}),
              Je(this)
            );
          }),
          (n.totalDuration = function (e) {
            var t,
              n,
              r,
              i = 0,
              a = this,
              s = a._last,
              o = H;
            if (arguments.length)
              return a.timeScale(
                (a._repeat < 0 ? a.duration() : a.totalDuration()) /
                  (a.reversed() ? -e : e)
              );
            if (a._dirty) {
              for (r = a.parent; s; )
                (t = s._prev),
                  s._dirty && s.totalDuration(),
                  (n = s._start) > o && a._sort && s._ts && !a._lock
                    ? ((a._lock = 1), (ot(a, s, n - s._delay, 1)._lock = 0))
                    : (o = n),
                  n < 0 &&
                    s._ts &&
                    ((i -= n),
                    ((!r && !a._dp) || (r && r.smoothChildTiming)) &&
                      ((a._start += n / a._ts), (a._time -= n), (a._tTime -= n)),
                    a.shiftChildren(-n, !1, -Infinity),
                    (o = 0)),
                  s._end > i && s._ts && (i = s._end),
                  (s = t);
              dt(a, a === C && a._time > i ? a._time : i, 1, 1), (a._dirty = 0);
            }
            return a._tDur;
          }),
          (t.updateRoot = function (e) {
            if ((C._ts && (ze(C, rt(e, C)), (I = Xt.frame)), Xt.frame >= Ce)) {
              Ce += z.autoSleep || 120;
              var t = C._first;
              if ((!t || !t._ts) && z.autoSleep && Xt._listeners.length < 2) {
                for (; t && !t._ts; ) t = t._next;
                t || Xt.sleep();
              }
            }
          }),
          t
        );
      })(on);
      Ge(ln.prototype, { _lock: 0, _hasPause: 0, _forcing: 0 });
      var hn,
        un,
        cn = function (e, t, n, r, i, a, s) {
          var o,
            l,
            h,
            u,
            c,
            d,
            f,
            p,
            m = new In(this._pt, e, t, 0, 1, An, null, i),
            g = 0,
            v = 0;
          for (
            m.b = n,
              m.e = r,
              n += "",
              (f = ~(r += "").indexOf("random(")) && (r = kt(r)),
              a && (a((p = [n, r]), e, t), (n = p[0]), (r = p[1])),
              l = n.match(he) || [];
            (o = he.exec(r));
  
          )
            (u = o[0]),
              (c = r.substring(g, o.index)),
              h ? (h = (h + 1) % 5) : "rgba(" === c.substr(-5) && (h = 1),
              u !== l[v++] &&
                ((d = parseFloat(l[v - 1]) || 0),
                (m._pt = {
                  _next: m._pt,
                  p: c || 1 === v ? c : ",",
                  s: d,
                  c: "=" === u.charAt(1) ? Ne(d, u) - d : parseFloat(u) - d,
                  m: h && h < 4 ? Math.round : 0
                }),
                (g = he.lastIndex));
          return (
            (m.c = g < r.length ? r.substring(g, r.length) : ""),
            (m.fp = s),
            (ue.test(r) || f) && (m.e = 0),
            (this._pt = m),
            m
          );
        },
        dn = function (e, t, n, r, i, a, s, o, l, h) {
          J(r) && (r = r(i || 0, e, a));
          var u,
            c = e[t],
            d =
              "get" !== n
                ? n
                : J(c)
                ? l
                  ? e[
                      t.indexOf("set") || !J(e["get" + t.substr(3)])
                        ? t
                        : "get" + t.substr(3)
                    ](l)
                  : e[t]()
                : c,
            f = J(c) ? (l ? Sn : xn) : bn;
          if (
            (Z(r) &&
              (~r.indexOf("random(") && (r = kt(r)),
              "=" === r.charAt(1) &&
                ((u = Ne(d, r) + (_t(d) || 0)) || 0 === u) &&
                (r = u)),
            !h || d !== r || un)
          )
            return isNaN(d * r) || "" === r
              ? (!c && !(t in e) && ge(t, r),
                cn.call(this, e, t, d, r, f, o || z.stringFilter, l))
              : ((u = new In(
                  this._pt,
                  e,
                  t,
                  +d || 0,
                  r - (d || 0),
                  "boolean" == typeof c ? Mn : Tn,
                  0,
                  f
                )),
                l && (u.fp = l),
                s && u.modifier(s, this, e),
                (this._pt = u));
        },
        fn = function (e, t, n, r, i, a) {
          var s, o, l, h;
          if (
            Me[e] &&
            !1 !==
              (s = new Me[e]()).init(
                i,
                s.rawVars
                  ? t[e]
                  : (function (e, t, n, r, i) {
                      if (
                        (J(e) && (e = gn(e, i, t, n, r)),
                        !ee(e) || (e.style && e.nodeType) || ae(e) || ie(e))
                      )
                        return Z(e) ? gn(e, i, t, n, r) : e;
                      var a,
                        s = {};
                      for (a in e) s[a] = gn(e[a], i, t, n, r);
                      return s;
                    })(t[e], r, i, a, n),
                n,
                r,
                a
              ) &&
            ((n._pt = o = new In(n._pt, i, e, 0, 1, s.render, s, 0, s.priority)),
            n !== L)
          )
            for (
              l = n._ptLookup[n._targets.indexOf(i)], h = s._props.length;
              h--;
  
            )
              l[s._props[h]] = o;
          return s;
        },
        pn = function e(t, n, r) {
          var i,
            a,
            s,
            o,
            l,
            h,
            u,
            c,
            d,
            f,
            p,
            m,
            g,
            v = t.vars,
            y = v.ease,
            _ = v.startAt,
            b = v.immediateRender,
            x = v.lazy,
            S = v.onUpdate,
            E = v.runBackwards,
            w = v.yoyoEase,
            A = v.keyframes,
            P = v.autoRevert,
            k = t._dur,
            R = t._startAt,
            D = t._targets,
            I = t.parent,
            L = I && "nested" === I.data ? I.vars.targets : D,
            F = "auto" === t._overwrite && !T,
            O = t.timeline;
          if (
            (O && (!A || !y) && (y = "none"),
            (t._ease = en(y, V.ease)),
            (t._yEase = w ? $t(en(!0 === w ? y : w, V.ease)) : 0),
            w &&
              t._yoyo &&
              !t._repeat &&
              ((w = t._yEase), (t._yEase = t._ease), (t._ease = w)),
            (t._from = !O && !!v.runBackwards),
            !O || (A && !v.stagger))
          ) {
            if (
              ((m = (c = D[0] ? De(D[0]).harness : 0) && v[c.prop]),
              (i = Xe(v, Ee)),
              R &&
                (R._zTime < 0 && R.progress(1),
                n < 0 && E && b && !P
                  ? R.render(-1, !0)
                  : R.revert(E && k ? xe : be),
                (R._lazy = 0)),
              _)
            ) {
              if (
                (Ze(
                  (t._startAt = _n.set(
                    D,
                    Ge(
                      {
                        data: "isStart",
                        overwrite: !1,
                        parent: I,
                        immediateRender: !0,
                        lazy: !R && te(x),
                        startAt: null,
                        delay: 0,
                        onUpdate:
                          S &&
                          function () {
                            return It(t, "onUpdate");
                          },
                        stagger: 0
                      },
                      _
                    )
                  ))
                ),
                (t._startAt._dp = 0),
                (t._startAt._sat = t),
                n < 0 && (M || (!b && !P)) && t._startAt.revert(xe),
                b && k && n <= 0 && r <= 0)
              )
                return void (n && (t._zTime = n));
            } else if (E && k && !R)
              if (
                (n && (b = !1),
                (s = Ge(
                  {
                    overwrite: !1,
                    data: "isFromStart",
                    lazy: b && !R && te(x),
                    immediateRender: b,
                    stagger: 0,
                    parent: I
                  },
                  i
                )),
                m && (s[c.prop] = m),
                Ze((t._startAt = _n.set(D, s))),
                (t._startAt._dp = 0),
                (t._startAt._sat = t),
                n < 0 && (M ? t._startAt.revert(xe) : t._startAt.render(-1, !0)),
                (t._zTime = n),
                b)
              ) {
                if (!n) return;
              } else e(t._startAt, G, G);
            for (
              t._pt = t._ptCache = 0, x = (k && te(x)) || (x && !k), a = 0;
              a < D.length;
              a++
            ) {
              if (
                ((u = (l = D[a])._gsap || Re(D)[a]._gsap),
                (t._ptLookup[a] = f = {}),
                Te[u.id] && we.length && Ue(),
                (p = L === D ? a : L.indexOf(l)),
                c &&
                  !1 !== (d = new c()).init(l, m || i, t, p, L) &&
                  ((t._pt = o =
                    new In(t._pt, l, d.name, 0, 1, d.render, d, 0, d.priority)),
                  d._props.forEach(function (e) {
                    f[e] = o;
                  }),
                  d.priority && (h = 1)),
                !c || m)
              )
                for (s in i)
                  Me[s] && (d = fn(s, i, t, p, l, L))
                    ? d.priority && (h = 1)
                    : (f[s] = o =
                        dn.call(t, l, s, "get", i[s], p, L, 0, v.stringFilter));
              t._op && t._op[a] && t.kill(l, t._op[a]),
                F &&
                  t._pt &&
                  ((hn = t),
                  C.killTweensOf(l, f, t.globalTime(n)),
                  (g = !t.parent),
                  (hn = 0)),
                t._pt && x && (Te[u.id] = 1);
            }
            h && Dn(t), t._onInit && t._onInit(t);
          }
          (t._onUpdate = S),
            (t._initted = (!t._op || t._pt) && !g),
            A && n <= 0 && O.render(H, !0, !0);
        },
        mn = function (e, t, n, r) {
          var i,
            a,
            s = t.ease || r || "power1.inOut";
          if (ae(t))
            (a = n[e] || (n[e] = [])),
              t.forEach(function (e, n) {
                return a.push({ t: (n / (t.length - 1)) * 100, v: e, e: s });
              });
          else
            for (i in t)
              (a = n[i] || (n[i] = [])),
                "ease" === i || a.push({ t: parseFloat(e), v: t[i], e: s });
        },
        gn = function (e, t, n, r, i) {
          return J(e)
            ? e.call(t, n, r, i)
            : Z(e) && ~e.indexOf("random(")
            ? kt(e)
            : e;
        },
        vn = ke + "repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",
        yn = {};
      Le(vn + ",id,stagger,delay,duration,paused,scrollTrigger", function (e) {
        return (yn[e] = 1);
      });
      var _n = (function (e) {
        function t(t, n, r, i) {
          var a;
          "number" == typeof n && ((r.duration = n), (n = r), (r = null));
          var s,
            o,
            l,
            h,
            u,
            c,
            d,
            f,
            p = (a = e.call(this, i ? n : qe(n)) || this).vars,
            m = p.duration,
            g = p.delay,
            v = p.immediateRender,
            y = p.stagger,
            _ = p.overwrite,
            b = p.keyframes,
            x = p.defaults,
            S = p.scrollTrigger,
            w = p.yoyoEase,
            M = n.parent || C,
            A = (ae(t) || ie(t) ? $(t[0]) : "length" in n) ? [t] : St(t);
          if (
            ((a._targets = A.length
              ? Re(A)
              : ve(
                  "GSAP target " + t + " not found. https://gsap.com",
                  !z.nullTargetWarn
                ) || []),
            (a._ptLookup = []),
            (a._overwrite = _),
            b || y || re(m) || re(g))
          ) {
            if (
              ((n = a.vars),
              (s = a.timeline =
                new ln({
                  data: "nested",
                  defaults: x || {},
                  targets: M && "nested" === M.data ? M.vars.targets : A
                })).kill(),
              (s.parent = s._dp = E(a)),
              (s._start = 0),
              y || re(m) || re(g))
            ) {
              if (((h = A.length), (d = y && Tt(y)), ee(y)))
                for (u in y) ~vn.indexOf(u) && (f || (f = {}), (f[u] = y[u]));
              for (o = 0; o < h; o++)
                ((l = Xe(n, yn)).stagger = 0),
                  w && (l.yoyoEase = w),
                  f && We(l, f),
                  (c = A[o]),
                  (l.duration = +gn(m, E(a), o, c, A)),
                  (l.delay = (+gn(g, E(a), o, c, A) || 0) - a._delay),
                  !y &&
                    1 === h &&
                    l.delay &&
                    ((a._delay = g = l.delay), (a._start += g), (l.delay = 0)),
                  s.to(c, l, d ? d(o, c, A) : 0),
                  (s._ease = Yt.none);
              s.duration() ? (m = g = 0) : (a.timeline = 0);
            } else if (b) {
              qe(Ge(s.vars.defaults, { ease: "none" })),
                (s._ease = en(b.ease || n.ease || "none"));
              var P,
                k,
                R,
                D = 0;
              if (ae(b))
                b.forEach(function (e) {
                  return s.to(A, e, ">");
                }),
                  s.duration();
              else {
                for (u in ((l = {}), b))
                  "ease" === u || "easeEach" === u || mn(u, b[u], l, b.easeEach);
                for (u in l)
                  for (
                    P = l[u].sort(function (e, t) {
                      return e.t - t.t;
                    }),
                      D = 0,
                      o = 0;
                    o < P.length;
                    o++
                  )
                    ((R = {
                      ease: (k = P[o]).e,
                      duration: ((k.t - (o ? P[o - 1].t : 0)) / 100) * m
                    })[u] = k.v),
                      s.to(A, R, D),
                      (D += R.duration);
                s.duration() < m && s.to({}, { duration: m - s.duration() });
              }
            }
            m || a.duration((m = s.duration()));
          } else a.timeline = 0;
          return (
            !0 !== _ || T || ((hn = E(a)), C.killTweensOf(A), (hn = 0)),
            ot(M, E(a), r),
            n.reversed && a.reverse(),
            n.paused && a.paused(!0),
            (v ||
              (!m &&
                !b &&
                a._start === Oe(M._time) &&
                te(v) &&
                et(E(a)) &&
                "nested" !== M.data)) &&
              ((a._tTime = -1e-8), a.render(Math.max(0, -g) || 0)),
            S && lt(E(a), S),
            a
          );
        }
        w(t, e);
        var n = t.prototype;
        return (
          (n.render = function (e, t, n) {
            var r,
              i,
              a,
              s,
              o,
              l,
              h,
              u,
              c,
              d = this._time,
              f = this._tDur,
              p = this._dur,
              m = e < 0,
              g = e > f - G && !m ? f : e < G ? 0 : e;
            if (p) {
              if (
                g !== this._tTime ||
                !e ||
                n ||
                (!this._initted && this._tTime) ||
                (this._startAt && this._zTime < 0 !== m)
              ) {
                if (((r = g), (u = this.timeline), this._repeat)) {
                  if (((s = p + this._rDelay), this._repeat < -1 && m))
                    return this.totalTime(100 * s + e, t, n);
                  if (
                    ((r = Oe(g % s)),
                    g === f
                      ? ((a = this._repeat), (r = p))
                      : ((a = ~~(g / s)) && a === Oe(g / s) && ((r = p), a--),
                        r > p && (r = p)),
                    (l = this._yoyo && 1 & a) && ((c = this._yEase), (r = p - r)),
                    (o = nt(this._tTime, s)),
                    r === d && !n && this._initted && a === o)
                  )
                    return (this._tTime = g), this;
                  a !== o &&
                    (u && this._yEase && Qt(u, l),
                    this.vars.repeatRefresh &&
                      !l &&
                      !this._lock &&
                      this._time !== p &&
                      this._initted &&
                      ((this._lock = n = 1),
                      (this.render(Oe(s * a), !0).invalidate()._lock = 0)));
                }
                if (!this._initted) {
                  if (ht(this, m ? e : r, n, t, g))
                    return (this._tTime = 0), this;
                  if (
                    !(
                      d === this._time ||
                      (n && this.vars.repeatRefresh && a !== o)
                    )
                  )
                    return this;
                  if (p !== this._dur) return this.render(e, t, n);
                }
                if (
                  ((this._tTime = g),
                  (this._time = r),
                  !this._act && this._ts && ((this._act = 1), (this._lazy = 0)),
                  (this.ratio = h = (c || this._ease)(r / p)),
                  this._from && (this.ratio = h = 1 - h),
                  r && !d && !t && !a && (It(this, "onStart"), this._tTime !== g))
                )
                  return this;
                for (i = this._pt; i; ) i.r(h, i.d), (i = i._next);
                (u &&
                  u.render(
                    e < 0 ? e : !r && l ? -1e-8 : u._dur * u._ease(r / this._dur),
                    t,
                    n
                  )) ||
                  (this._startAt && (this._zTime = e)),
                  this._onUpdate &&
                    !t &&
                    (m && Qe(this, e, 0, n), It(this, "onUpdate")),
                  this._repeat &&
                    a !== o &&
                    this.vars.onRepeat &&
                    !t &&
                    this.parent &&
                    It(this, "onRepeat"),
                  (g !== this._tDur && g) ||
                    this._tTime !== g ||
                    (m && !this._onUpdate && Qe(this, e, 0, !0),
                    (e || !p) &&
                      ((g === this._tDur && this._ts > 0) ||
                        (!g && this._ts < 0)) &&
                      Ze(this, 1),
                    t ||
                      (m && !d) ||
                      !(g || d || l) ||
                      (It(this, g === f ? "onComplete" : "onReverseComplete", !0),
                      this._prom &&
                        !(g < f && this.timeScale() > 0) &&
                        this._prom()));
              }
            } else
              !(function (e, t, n, r) {
                var i,
                  a,
                  s,
                  o = e.ratio,
                  l =
                    t < 0 ||
                    (!t &&
                      ((!e._start && ut(e) && (e._initted || !ct(e))) ||
                        ((e._ts < 0 || e._dp._ts < 0) && !ct(e))))
                      ? 0
                      : 1,
                  h = e._rDelay,
                  u = 0;
                if (
                  (h &&
                    e._repeat &&
                    ((u = yt(0, e._tDur, t)),
                    (a = nt(u, h)),
                    e._yoyo && 1 & a && (l = 1 - l),
                    a !== nt(e._tTime, h) &&
                      ((o = 1 - l),
                      e.vars.repeatRefresh && e._initted && e.invalidate())),
                  l !== o || M || r || e._zTime === G || (!t && e._zTime))
                ) {
                  if (!e._initted && ht(e, t, r, n, u)) return;
                  for (
                    s = e._zTime,
                      e._zTime = t || (n ? G : 0),
                      n || (n = t && !s),
                      e.ratio = l,
                      e._from && (l = 1 - l),
                      e._time = 0,
                      e._tTime = u,
                      i = e._pt;
                    i;
  
                  )
                    i.r(l, i.d), (i = i._next);
                  t < 0 && Qe(e, t, 0, !0),
                    e._onUpdate && !n && It(e, "onUpdate"),
                    u && e._repeat && !n && e.parent && It(e, "onRepeat"),
                    (t >= e._tDur || t < 0) &&
                      e.ratio === l &&
                      (l && Ze(e, 1),
                      n ||
                        M ||
                        (It(e, l ? "onComplete" : "onReverseComplete", !0),
                        e._prom && e._prom()));
                } else e._zTime || (e._zTime = t);
              })(this, e, t, n);
            return this;
          }),
          (n.targets = function () {
            return this._targets;
          }),
          (n.invalidate = function (t) {
            return (
              (!t || !this.vars.runBackwards) && (this._startAt = 0),
              (this._pt =
                this._op =
                this._onUpdate =
                this._lazy =
                this.ratio =
                  0),
              (this._ptLookup = []),
              this.timeline && this.timeline.invalidate(t),
              e.prototype.invalidate.call(this, t)
            );
          }),
          (n.resetTo = function (e, t, n, r, i) {
            F || Xt.wake(), this._ts || this.play();
            var a = Math.min(
              this._dur,
              (this._dp._time - this._start) * this._ts
            );
            return (
              this._initted || pn(this, a),
              (function (e, t, n, r, i, a, s, o) {
                var l,
                  h,
                  u,
                  c,
                  d = ((e._pt && e._ptCache) || (e._ptCache = {}))[t];
                if (!d)
                  for (
                    d = e._ptCache[t] = [],
                      u = e._ptLookup,
                      c = e._targets.length;
                    c--;
  
                  ) {
                    if ((l = u[c][t]) && l.d && l.d._pt)
                      for (l = l.d._pt; l && l.p !== t && l.fp !== t; )
                        l = l._next;
                    if (!l)
                      return (
                        (un = 1),
                        (e.vars[t] = "+=0"),
                        pn(e, s),
                        (un = 0),
                        o ? ve(t + " not eligible for reset") : 1
                      );
                    d.push(l);
                  }
                for (c = d.length; c--; )
                  ((l = (h = d[c])._pt || h).s =
                    (!r && 0 !== r) || i ? l.s + (r || 0) + a * l.c : r),
                    (l.c = n - l.s),
                    h.e && (h.e = Fe(n) + _t(h.e)),
                    h.b && (h.b = l.s + _t(h.b));
              })(this, e, t, n, r, this._ease(a / this._dur), a, i)
                ? this.resetTo(e, t, n, r, 1)
                : (at(this, 0),
                  this.parent ||
                    Ye(
                      this._dp,
                      this,
                      "_first",
                      "_last",
                      this._dp._sort ? "_start" : 0
                    ),
                  this.render(0))
            );
          }),
          (n.kill = function (e, t) {
            if ((void 0 === t && (t = "all"), !(e || (t && "all" !== t))))
              return (this._lazy = this._pt = 0), this.parent ? Lt(this) : this;
            if (this.timeline) {
              var n = this.timeline.totalDuration();
              return (
                this.timeline.killTweensOf(e, t, hn && !0 !== hn.vars.overwrite)
                  ._first || Lt(this),
                this.parent &&
                  n !== this.timeline.totalDuration() &&
                  dt(this, (this._dur * this.timeline._tDur) / n, 0, 1),
                this
              );
            }
            var r,
              i,
              a,
              s,
              o,
              l,
              h,
              u = this._targets,
              c = e ? St(e) : u,
              d = this._ptLookup,
              f = this._pt;
            if (
              (!t || "all" === t) &&
              (function (e, t) {
                for (
                  var n = e.length, r = n === t.length;
                  r && n-- && e[n] === t[n];
  
                );
                return n < 0;
              })(u, c)
            )
              return "all" === t && (this._pt = 0), Lt(this);
            for (
              r = this._op = this._op || [],
                "all" !== t &&
                  (Z(t) &&
                    ((o = {}),
                    Le(t, function (e) {
                      return (o[e] = 1);
                    }),
                    (t = o)),
                  (t = (function (e, t) {
                    var n,
                      r,
                      i,
                      a,
                      s = e[0] ? De(e[0]).harness : 0,
                      o = s && s.aliases;
                    if (!o) return t;
                    for (r in ((n = We({}, t)), o))
                      if ((r in n))
                        for (i = (a = o[r].split(",")).length; i--; )
                          n[a[i]] = n[r];
                    return n;
                  })(u, t))),
                h = u.length;
              h--;
  
            )
              if (~c.indexOf(u[h]))
                for (o in ((i = d[h]),
                "all" === t
                  ? ((r[h] = t), (s = i), (a = {}))
                  : ((a = r[h] = r[h] || {}), (s = t)),
                s))
                  (l = i && i[o]) &&
                    (("kill" in l.d && !0 !== l.d.kill(o)) || Ke(this, l, "_pt"),
                    delete i[o]),
                    "all" !== a && (a[o] = 1);
            return this._initted && !this._pt && f && Lt(this), this;
          }),
          (t.to = function (e, n) {
            return new t(e, n, arguments[2]);
          }),
          (t.from = function (e, t) {
            return gt(1, arguments);
          }),
          (t.delayedCall = function (e, n, r, i) {
            return new t(n, 0, {
              immediateRender: !1,
              lazy: !1,
              overwrite: !1,
              delay: e,
              onComplete: n,
              onReverseComplete: n,
              onCompleteParams: r,
              onReverseCompleteParams: r,
              callbackScope: i
            });
          }),
          (t.fromTo = function (e, t, n) {
            return gt(2, arguments);
          }),
          (t.set = function (e, n) {
            return (n.duration = 0), n.repeatDelay || (n.repeat = 0), new t(e, n);
          }),
          (t.killTweensOf = function (e, t, n) {
            return C.killTweensOf(e, t, n);
          }),
          t
        );
      })(on);
      Ge(_n.prototype, {
        _targets: [],
        _lazy: 0,
        _startAt: 0,
        _op: 0,
        _onInit: 0
      }),
        Le("staggerTo,staggerFrom,staggerFromTo", function (e) {
          _n[e] = function () {
            var t = new ln(),
              n = bt.call(arguments, 0);
            return (
              n.splice("staggerFromTo" === e ? 5 : 4, 0, 0), t[e].apply(t, n)
            );
          };
        });
      var bn = function (e, t, n) {
          return (e[t] = n);
        },
        xn = function (e, t, n) {
          return e[t](n);
        },
        Sn = function (e, t, n, r) {
          return e[t](r.fp, n);
        },
        En = function (e, t, n) {
          return e.setAttribute(t, n);
        },
        wn = function (e, t) {
          return J(e[t]) ? xn : Q(e[t]) && e.setAttribute ? En : bn;
        },
        Tn = function (e, t) {
          return t.set(t.t, t.p, Math.round(1e6 * (t.s + t.c * e)) / 1e6, t);
        },
        Mn = function (e, t) {
          return t.set(t.t, t.p, !!(t.s + t.c * e), t);
        },
        An = function (e, t) {
          var n = t._pt,
            r = "";
          if (!e && t.b) r = t.b;
          else if (1 === e && t.e) r = t.e;
          else {
            for (; n; )
              (r =
                n.p +
                (n.m
                  ? n.m(n.s + n.c * e)
                  : Math.round(1e4 * (n.s + n.c * e)) / 1e4) +
                r),
                (n = n._next);
            r += t.c;
          }
          t.set(t.t, t.p, r, t);
        },
        Cn = function (e, t) {
          for (var n = t._pt; n; ) n.r(e, n.d), (n = n._next);
        },
        Pn = function (e, t, n, r) {
          for (var i, a = this._pt; a; )
            (i = a._next), a.p === r && a.modifier(e, t, n), (a = i);
        },
        kn = function (e) {
          for (var t, n, r = this._pt; r; )
            (n = r._next),
              (r.p === e && !r.op) || r.op === e
                ? Ke(this, r, "_pt")
                : r.dep || (t = 1),
              (r = n);
          return !t;
        },
        Rn = function (e, t, n, r) {
          r.mSet(e, t, r.m.call(r.tween, n, r.mt), r);
        },
        Dn = function (e) {
          for (var t, n, r, i, a = e._pt; a; ) {
            for (t = a._next, n = r; n && n.pr > a.pr; ) n = n._next;
            (a._prev = n ? n._prev : i) ? (a._prev._next = a) : (r = a),
              (a._next = n) ? (n._prev = a) : (i = a),
              (a = t);
          }
          e._pt = r;
        },
        In = (function () {
          function e(e, t, n, r, i, a, s, o, l) {
            (this.t = t),
              (this.s = r),
              (this.c = i),
              (this.p = n),
              (this.r = a || Tn),
              (this.d = s || this),
              (this.set = o || bn),
              (this.pr = l || 0),
              (this._next = e),
              e && (e._prev = this);
          }
          return (
            (e.prototype.modifier = function (e, t, n) {
              (this.mSet = this.mSet || this.set),
                (this.set = Rn),
                (this.m = e),
                (this.mt = n),
                (this.tween = t);
            }),
            e
          );
        })();
      Le(
        ke +
          "parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",
        function (e) {
          return (Ee[e] = 1);
        }
      ),
        (fe.TweenMax = fe.TweenLite = _n),
        (fe.TimelineLite = fe.TimelineMax = ln),
        (C = new ln({
          sortChildren: !1,
          defaults: V,
          autoRemoveChildren: !0,
          id: "root",
          smoothChildTiming: !0
        })),
        (z.stringFilter = jt);
      var Ln = [],
        Fn = {},
        On = [],
        Nn = 0,
        Bn = 0,
        Un = function (e) {
          return (Fn[e] || On).map(function (e) {
            return e();
          });
        },
        zn = function () {
          var e = Date.now(),
            t = [];
          e - Nn > 2 &&
            (Un("matchMediaInit"),
            Ln.forEach(function (e) {
              var n,
                r,
                i,
                a,
                s = e.queries,
                o = e.conditions;
              for (r in s)
                (n = P.matchMedia(s[r]).matches) && (i = 1),
                  n !== o[r] && ((o[r] = n), (a = 1));
              a && (e.revert(), i && t.push(e));
            }),
            Un("matchMediaRevert"),
            t.forEach(function (e) {
              return e.onMatch(e, function (t) {
                return e.add(null, t);
              });
            }),
            (Nn = e),
            Un("matchMedia"));
        },
        Vn = (function () {
          function e(e, t) {
            (this.selector = t && Et(t)),
              (this.data = []),
              (this._r = []),
              (this.isReverted = !1),
              (this.id = Bn++),
              e && this.add(e);
          }
          var t = e.prototype;
          return (
            (t.add = function (e, t, n) {
              J(e) && ((n = t), (t = e), (e = J));
              var r = this,
                i = function () {
                  var e,
                    i = A,
                    a = r.selector;
                  return (
                    i && i !== r && i.data.push(r),
                    n && (r.selector = Et(n)),
                    (A = r),
                    (e = t.apply(r, arguments)),
                    J(e) && r._r.push(e),
                    (A = i),
                    (r.selector = a),
                    (r.isReverted = !1),
                    e
                  );
                };
              return (
                (r.last = i),
                e === J
                  ? i(r, function (e) {
                      return r.add(null, e);
                    })
                  : e
                  ? (r[e] = i)
                  : i
              );
            }),
            (t.ignore = function (e) {
              var t = A;
              (A = null), e(this), (A = t);
            }),
            (t.getTweens = function () {
              var t = [];
              return (
                this.data.forEach(function (n) {
                  return n instanceof e
                    ? t.push.apply(t, n.getTweens())
                    : n instanceof _n &&
                        !(n.parent && "nested" === n.parent.data) &&
                        t.push(n);
                }),
                t
              );
            }),
            (t.clear = function () {
              this._r.length = this.data.length = 0;
            }),
            (t.kill = function (e, t) {
              var n = this;
              if (
                (e
                  ? (function () {
                      for (var t, r = n.getTweens(), i = n.data.length; i--; )
                        "isFlip" === (t = n.data[i]).data &&
                          (t.revert(),
                          t.getChildren(!0, !0, !1).forEach(function (e) {
                            return r.splice(r.indexOf(e), 1);
                          }));
                      for (
                        r
                          .map(function (e) {
                            return {
                              g:
                                e._dur ||
                                e._delay ||
                                (e._sat && !e._sat.vars.immediateRender)
                                  ? e.globalTime(0)
                                  : -1 / 0,
                              t: e
                            };
                          })
                          .sort(function (e, t) {
                            return t.g - e.g || -1 / 0;
                          })
                          .forEach(function (t) {
                            return t.t.revert(e);
                          }),
                          i = n.data.length;
                        i--;
  
                      )
                        (t = n.data[i]) instanceof ln
                          ? "nested" !== t.data &&
                            (t.scrollTrigger && t.scrollTrigger.revert(),
                            t.kill())
                          : !(t instanceof _n) && t.revert && t.revert(e);
                      n._r.forEach(function (t) {
                        return t(e, n);
                      }),
                        (n.isReverted = !0);
                    })()
                  : this.data.forEach(function (e) {
                      return e.kill && e.kill();
                    }),
                this.clear(),
                t)
              )
                for (var r = Ln.length; r--; )
                  Ln[r].id === this.id && Ln.splice(r, 1);
            }),
            (t.revert = function (e) {
              this.kill(e || {});
            }),
            e
          );
        })(),
        Hn = (function () {
          function e(e) {
            (this.contexts = []), (this.scope = e);
          }
          var t = e.prototype;
          return (
            (t.add = function (e, t, n) {
              ee(e) || (e = { matches: e });
              var r,
                i,
                a,
                s = new Vn(0, n || this.scope),
                o = (s.conditions = {});
              for (i in (A && !s.selector && (s.selector = A.selector),
              this.contexts.push(s),
              (t = s.add("onMatch", t)),
              (s.queries = e),
              e))
                "all" === i
                  ? (a = 1)
                  : (r = P.matchMedia(e[i])) &&
                    (Ln.indexOf(s) < 0 && Ln.push(s),
                    (o[i] = r.matches) && (a = 1),
                    r.addListener
                      ? r.addListener(zn)
                      : r.addEventListener("change", zn));
              return (
                a &&
                  t(s, function (e) {
                    return s.add(null, e);
                  }),
                this
              );
            }),
            (t.revert = function (e) {
              this.kill(e || {});
            }),
            (t.kill = function (e) {
              this.contexts.forEach(function (t) {
                return t.kill(e, !0);
              });
            }),
            e
          );
        })(),
        Gn = {
          registerPlugin: function () {
            for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)
              t[n] = arguments[n];
            t.forEach(function (e) {
              return Ot(e);
            });
          },
          timeline: function (e) {
            return new ln(e);
          },
          getTweensOf: function (e, t) {
            return C.getTweensOf(e, t);
          },
          getProperty: function (e, t, n, r) {
            Z(e) && (e = St(e)[0]);
            var i = De(e || {}).get,
              a = n ? He : Ve;
            return (
              "native" === n && (n = ""),
              e
                ? t
                  ? a(((Me[t] && Me[t].get) || i)(e, t, n, r))
                  : function (t, n, r) {
                      return a(((Me[t] && Me[t].get) || i)(e, t, n, r));
                    }
                : e
            );
          },
          quickSetter: function (e, t, n) {
            if ((e = St(e)).length > 1) {
              var r = e.map(function (e) {
                  return Xn.quickSetter(e, t, n);
                }),
                i = r.length;
              return function (e) {
                for (var t = i; t--; ) r[t](e);
              };
            }
            e = e[0] || {};
            var a = Me[t],
              s = De(e),
              o = (s.harness && (s.harness.aliases || {})[t]) || t,
              l = a
                ? function (t) {
                    var r = new a();
                    (L._pt = 0),
                      r.init(e, n ? t + n : t, L, 0, [e]),
                      r.render(1, r),
                      L._pt && Cn(1, L);
                  }
                : s.set(e, o);
            return a
              ? l
              : function (t) {
                  return l(e, o, n ? t + n : t, s, 1);
                };
          },
          quickTo: function (e, t, n) {
            var r,
              i = Xn.to(
                e,
                We((((r = {})[t] = "+=0.1"), (r.paused = !0), r), n || {})
              ),
              a = function (e, n, r) {
                return i.resetTo(t, e, n, r);
              };
            return (a.tween = i), a;
          },
          isTweening: function (e) {
            return C.getTweensOf(e, !0).length > 0;
          },
          defaults: function (e) {
            return e && e.ease && (e.ease = en(e.ease, V.ease)), je(V, e || {});
          },
          config: function (e) {
            return je(z, e || {});
          },
          registerEffect: function (e) {
            var t = e.name,
              n = e.effect,
              r = e.plugins,
              i = e.defaults,
              a = e.extendTimeline;
            (r || "").split(",").forEach(function (e) {
              return (
                e &&
                !Me[e] &&
                !fe[e] &&
                ve(t + " effect requires " + e + " plugin.")
              );
            }),
              (Ae[t] = function (e, t, r) {
                return n(St(e), Ge(t || {}, i), r);
              }),
              a &&
                (ln.prototype[t] = function (e, n, r) {
                  return this.add(Ae[t](e, ee(n) ? n : (r = n) && {}, this), r);
                });
          },
          registerEase: function (e, t) {
            Yt[e] = en(t);
          },
          parseEase: function (e, t) {
            return arguments.length ? en(e, t) : Yt;
          },
          getById: function (e) {
            return C.getById(e);
          },
          exportRoot: function (e, t) {
            void 0 === e && (e = {});
            var n,
              r,
              i = new ln(e);
            for (
              i.smoothChildTiming = te(e.smoothChildTiming),
                C.remove(i),
                i._dp = 0,
                i._time = i._tTime = C._time,
                n = C._first;
              n;
  
            )
              (r = n._next),
                (!t &&
                  !n._dur &&
                  n instanceof _n &&
                  n.vars.onComplete === n._targets[0]) ||
                  ot(i, n, n._start - n._delay),
                (n = r);
            return ot(C, i, 0), i;
          },
          context: function (e, t) {
            return e ? new Vn(e, t) : A;
          },
          matchMedia: function (e) {
            return new Hn(e);
          },
          matchMediaRefresh: function () {
            return (
              Ln.forEach(function (e) {
                var t,
                  n,
                  r = e.conditions;
                for (n in r) r[n] && ((r[n] = !1), (t = 1));
                t && e.revert();
              }) || zn()
            );
          },
          addEventListener: function (e, t) {
            var n = Fn[e] || (Fn[e] = []);
            ~n.indexOf(t) || n.push(t);
          },
          removeEventListener: function (e, t) {
            var n = Fn[e],
              r = n && n.indexOf(t);
            r >= 0 && n.splice(r, 1);
          },
          utils: {
            wrap: function e(t, n, r) {
              var i = n - t;
              return ae(t)
                ? Pt(t, e(0, t.length), n)
                : vt(r, function (e) {
                    return ((i + ((e - t) % i)) % i) + t;
                  });
            },
            wrapYoyo: function e(t, n, r) {
              var i = n - t,
                a = 2 * i;
              return ae(t)
                ? Pt(t, e(0, t.length - 1), n)
                : vt(r, function (e) {
                    return (
                      t + ((e = (a + ((e - t) % a)) % a || 0) > i ? a - e : e)
                    );
                  });
            },
            distribute: Tt,
            random: Ct,
            snap: At,
            normalize: function (e, t, n) {
              return Rt(e, t, 0, 1, n);
            },
            getUnit: _t,
            clamp: function (e, t, n) {
              return vt(n, function (n) {
                return yt(e, t, n);
              });
            },
            splitColor: zt,
            toArray: St,
            selector: Et,
            mapRange: Rt,
            pipe: function () {
              for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)
                t[n] = arguments[n];
              return function (e) {
                return t.reduce(function (e, t) {
                  return t(e);
                }, e);
              };
            },
            unitize: function (e, t) {
              return function (n) {
                return e(parseFloat(n)) + (t || _t(n));
              };
            },
            interpolate: function e(t, n, r, i) {
              var a = isNaN(t + n)
                ? 0
                : function (e) {
                    return (1 - e) * t + e * n;
                  };
              if (!a) {
                var s,
                  o,
                  l,
                  h,
                  u,
                  c = Z(t),
                  d = {};
                if ((!0 === r && (i = 1) && (r = null), c))
                  (t = { p: t }), (n = { p: n });
                else if (ae(t) && !ae(n)) {
                  for (l = [], h = t.length, u = h - 2, o = 1; o < h; o++)
                    l.push(e(t[o - 1], t[o]));
                  h--,
                    (a = function (e) {
                      e *= h;
                      var t = Math.min(u, ~~e);
                      return l[t](e - t);
                    }),
                    (r = n);
                } else i || (t = We(ae(t) ? [] : {}, t));
                if (!l) {
                  for (s in n) dn.call(d, t, s, "get", n[s]);
                  a = function (e) {
                    return Cn(e, d) || (c ? t.p : t);
                  };
                }
              }
              return vt(r, a);
            },
            shuffle: wt
          },
          install: me,
          effects: Ae,
          ticker: Xt,
          updateRoot: ln.updateRoot,
          plugins: Me,
          globalTimeline: C,
          core: {
            PropTween: In,
            globals: ye,
            Tween: _n,
            Timeline: ln,
            Animation: on,
            getCache: De,
            _removeLinkedListItem: Ke,
            reverting: function () {
              return M;
            },
            context: function (e) {
              return e && A && (A.data.push(e), (e._ctx = A)), A;
            },
            suppressOverwrites: function (e) {
              return (T = e);
            }
          }
        };
      Le("to,from,fromTo,delayedCall,set,killTweensOf", function (e) {
        return (Gn[e] = _n[e]);
      }),
        Xt.add(ln.updateRoot),
        (L = Gn.to({}, { duration: 0 }));
      var Wn = function (e, t) {
          for (var n = e._pt; n && n.p !== t && n.op !== t && n.fp !== t; )
            n = n._next;
          return n;
        },
        jn = function (e, t) {
          return {
            name: e,
            rawVars: 1,
            init: function (e, n, r) {
              r._onInit = function (e) {
                var r, i;
                if (
                  (Z(n) &&
                    ((r = {}),
                    Le(n, function (e) {
                      return (r[e] = 1);
                    }),
                    (n = r)),
                  t)
                ) {
                  for (i in ((r = {}), n)) r[i] = t(n[i]);
                  n = r;
                }
                !(function (e, t) {
                  var n,
                    r,
                    i,
                    a = e._targets;
                  for (n in t)
                    for (r = a.length; r--; )
                      (i = e._ptLookup[r][n]) &&
                        (i = i.d) &&
                        (i._pt && (i = Wn(i, n)),
                        i && i.modifier && i.modifier(t[n], e, a[r], n));
                })(e, n);
              };
            }
          };
        },
        Xn =
          Gn.registerPlugin(
            {
              name: "attr",
              init: function (e, t, n, r, i) {
                var a, s, o;
                for (a in ((this.tween = n), t))
                  (o = e.getAttribute(a) || ""),
                    ((s = this.add(
                      e,
                      "setAttribute",
                      (o || 0) + "",
                      t[a],
                      r,
                      i,
                      0,
                      0,
                      a
                    )).op = a),
                    (s.b = o),
                    this._props.push(a);
              },
              render: function (e, t) {
                for (var n = t._pt; n; )
                  M ? n.set(n.t, n.p, n.b, n) : n.r(e, n.d), (n = n._next);
              }
            },
            {
              name: "endArray",
              init: function (e, t) {
                for (var n = t.length; n--; )
                  this.add(e, n, e[n] || 0, t[n], 0, 0, 0, 0, 0, 1);
              }
            },
            jn("roundProps", Mt),
            jn("modifiers"),
            jn("snap", At)
          ) || Gn;
      function qn(e) {
        return (
          (qn =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          qn(e)
        );
      }
      (_n.version = ln.version = Xn.version = "3.12.4"),
        (D = 1),
        ne() && qt(),
        Yt.Power0,
        Yt.Power1,
        Yt.Power2,
        Yt.Power3,
        Yt.Power4,
        Yt.Linear,
        Yt.Quad,
        Yt.Cubic,
        Yt.Quart,
        Yt.Quint,
        Yt.Strong,
        Yt.Elastic,
        Yt.Back,
        Yt.SteppedEase,
        Yt.Bounce,
        Yt.Sine,
        Yt.Expo,
        Yt.Circ;
      var Yn,
        Kn,
        Zn,
        Jn,
        $n,
        Qn,
        er,
        tr,
        nr = {},
        rr = 180 / Math.PI,
        ir = Math.PI / 180,
        ar = Math.atan2,
        sr = /([A-Z])/g,
        or = /(left|right|width|margin|padding|x)/i,
        lr = /[\s,\(]\S/,
        hr = {
          autoAlpha: "opacity,visibility",
          scale: "scaleX,scaleY",
          alpha: "opacity"
        },
        ur = function (e, t) {
          return t.set(
            t.t,
            t.p,
            Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u,
            t
          );
        },
        cr = function (e, t) {
          return t.set(
            t.t,
            t.p,
            1 === e ? t.e : Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u,
            t
          );
        },
        dr = function (e, t) {
          return t.set(
            t.t,
            t.p,
            e ? Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u : t.b,
            t
          );
        },
        fr = function (e, t) {
          var n = t.s + t.c * e;
          t.set(t.t, t.p, ~~(n + (n < 0 ? -0.5 : 0.5)) + t.u, t);
        },
        pr = function (e, t) {
          return t.set(t.t, t.p, e ? t.e : t.b, t);
        },
        mr = function (e, t) {
          return t.set(t.t, t.p, 1 !== e ? t.b : t.e, t);
        },
        gr = function (e, t, n) {
          return (e.style[t] = n);
        },
        vr = function (e, t, n) {
          return e.style.setProperty(t, n);
        },
        yr = function (e, t, n) {
          return (e._gsap[t] = n);
        },
        _r = function (e, t, n) {
          return (e._gsap.scaleX = e._gsap.scaleY = n);
        },
        br = function (e, t, n, r, i) {
          var a = e._gsap;
          (a.scaleX = a.scaleY = n), a.renderTransform(i, a);
        },
        xr = function (e, t, n, r, i) {
          var a = e._gsap;
          (a[t] = n), a.renderTransform(i, a);
        },
        Sr = "transform",
        Er = Sr + "Origin",
        wr = function e(t, n) {
          var r = this,
            i = this.target,
            a = i.style,
            s = i._gsap;
          if (t in nr && a) {
            if (((this.tfm = this.tfm || {}), "transform" === t))
              return hr.transform.split(",").forEach(function (t) {
                return e.call(r, t, n);
              });
            if (
              (~(t = hr[t] || t).indexOf(",")
                ? t.split(",").forEach(function (e) {
                    return (r.tfm[e] = Hr(i, e));
                  })
                : (this.tfm[t] = s.x ? s[t] : Hr(i, t)),
              t === Er && (this.tfm.zOrigin = s.zOrigin),
              this.props.indexOf(Sr) >= 0)
            )
              return;
            s.svg &&
              ((this.svgo = i.getAttribute("data-svg-origin")),
              this.props.push(Er, n, "")),
              (t = Sr);
          }
          (a || n) && this.props.push(t, n, a[t]);
        },
        Tr = function (e) {
          e.translate &&
            (e.removeProperty("translate"),
            e.removeProperty("scale"),
            e.removeProperty("rotate"));
        },
        Mr = function () {
          var e,
            t,
            n = this.props,
            r = this.target,
            i = r.style,
            a = r._gsap;
          for (e = 0; e < n.length; e += 3)
            n[e + 1]
              ? (r[n[e]] = n[e + 2])
              : n[e + 2]
              ? (i[n[e]] = n[e + 2])
              : i.removeProperty(
                  "--" === n[e].substr(0, 2)
                    ? n[e]
                    : n[e].replace(sr, "-$1").toLowerCase()
                );
          if (this.tfm) {
            for (t in this.tfm) a[t] = this.tfm[t];
            a.svg &&
              (a.renderTransform(),
              r.setAttribute("data-svg-origin", this.svgo || "")),
              ((e = er()) && e.isStart) ||
                i[Sr] ||
                (Tr(i),
                a.zOrigin &&
                  i[Er] &&
                  ((i[Er] += " " + a.zOrigin + "px"),
                  (a.zOrigin = 0),
                  a.renderTransform()),
                (a.uncache = 1));
          }
        },
        Ar = function (e, t) {
          var n = { target: e, props: [], revert: Mr, save: wr };
          return (
            e._gsap || Xn.core.getCache(e),
            t &&
              t.split(",").forEach(function (e) {
                return n.save(e);
              }),
            n
          );
        },
        Cr = function (e, t) {
          var n = Kn.createElementNS
            ? Kn.createElementNS(
                (t || "http://www.w3.org/1999/xhtml").replace(/^https/, "http"),
                e
              )
            : Kn.createElement(e);
          return n && n.style ? n : Kn.createElement(e);
        },
        Pr = function e(t, n, r) {
          var i = getComputedStyle(t);
          return (
            i[n] ||
            i.getPropertyValue(n.replace(sr, "-$1").toLowerCase()) ||
            i.getPropertyValue(n) ||
            (!r && e(t, Rr(n) || n, 1)) ||
            ""
          );
        },
        kr = "O,Moz,ms,Ms,Webkit".split(","),
        Rr = function (e, t, n) {
          var r = (t || $n).style,
            i = 5;
          if (e in r && !n) return e;
          for (
            e = e.charAt(0).toUpperCase() + e.substr(1);
            i-- && !(kr[i] + e in r);
  
          );
          return i < 0 ? null : (3 === i ? "ms" : i >= 0 ? kr[i] : "") + e;
        },
        Dr = function () {
          "undefined" != typeof window &&
            window.document &&
            ((Yn = window),
            (Kn = Yn.document),
            (Zn = Kn.documentElement),
            ($n = Cr("div") || { style: {} }),
            Cr("div"),
            (Sr = Rr(Sr)),
            (Er = Sr + "Origin"),
            ($n.style.cssText =
              "border-width:0;line-height:0;position:absolute;padding:0"),
            (tr = !!Rr("perspective")),
            (er = Xn.core.reverting),
            (Jn = 1));
        },
        Ir = function e(t) {
          var n,
            r = Cr(
              "svg",
              (this.ownerSVGElement &&
                this.ownerSVGElement.getAttribute("xmlns")) ||
                "http://www.w3.org/2000/svg"
            ),
            i = this.parentNode,
            a = this.nextSibling,
            s = this.style.cssText;
          if (
            (Zn.appendChild(r),
            r.appendChild(this),
            (this.style.display = "block"),
            t)
          )
            try {
              (n = this.getBBox()),
                (this._gsapBBox = this.getBBox),
                (this.getBBox = e);
            } catch (e) {}
          else this._gsapBBox && (n = this._gsapBBox());
          return (
            i && (a ? i.insertBefore(this, a) : i.appendChild(this)),
            Zn.removeChild(r),
            (this.style.cssText = s),
            n
          );
        },
        Lr = function (e, t) {
          for (var n = t.length; n--; )
            if (e.hasAttribute(t[n])) return e.getAttribute(t[n]);
        },
        Fr = function (e) {
          var t;
          try {
            t = e.getBBox();
          } catch (n) {
            t = Ir.call(e, !0);
          }
          return (
            (t && (t.width || t.height)) ||
              e.getBBox === Ir ||
              (t = Ir.call(e, !0)),
            !t || t.width || t.x || t.y
              ? t
              : {
                  x: +Lr(e, ["x", "cx", "x1"]) || 0,
                  y: +Lr(e, ["y", "cy", "y1"]) || 0,
                  width: 0,
                  height: 0
                }
          );
        },
        Or = function (e) {
          return !(!e.getCTM || (e.parentNode && !e.ownerSVGElement) || !Fr(e));
        },
        Nr = function (e, t) {
          if (t) {
            var n,
              r = e.style;
            t in nr && t !== Er && (t = Sr),
              r.removeProperty
                ? (("ms" !== (n = t.substr(0, 2)) &&
                    "webkit" !== t.substr(0, 6)) ||
                    (t = "-" + t),
                  r.removeProperty(
                    "--" === n ? t : t.replace(sr, "-$1").toLowerCase()
                  ))
                : r.removeAttribute(t);
          }
        },
        Br = function (e, t, n, r, i, a) {
          var s = new In(e._pt, t, n, 0, 1, a ? mr : pr);
          return (e._pt = s), (s.b = r), (s.e = i), e._props.push(n), s;
        },
        Ur = { deg: 1, rad: 1, turn: 1 },
        zr = { grid: 1, flex: 1 },
        Vr = function e(t, n, r, i) {
          var a,
            s,
            o,
            l,
            h = parseFloat(r) || 0,
            u = (r + "").trim().substr((h + "").length) || "px",
            c = $n.style,
            d = or.test(n),
            f = "svg" === t.tagName.toLowerCase(),
            p = (f ? "client" : "offset") + (d ? "Width" : "Height"),
            m = 100,
            g = "px" === i,
            v = "%" === i;
          if (i === u || !h || Ur[i] || Ur[u]) return h;
          if (
            ("px" !== u && !g && (h = e(t, n, r, "px")),
            (l = t.getCTM && Or(t)),
            (v || "%" === u) && (nr[n] || ~n.indexOf("adius")))
          )
            return (
              (a = l ? t.getBBox()[d ? "width" : "height"] : t[p]),
              Fe(v ? (h / a) * m : (h / 100) * a)
            );
          if (
            ((c[d ? "width" : "height"] = m + (g ? u : i)),
            (s =
              ~n.indexOf("adius") || ("em" === i && t.appendChild && !f)
                ? t
                : t.parentNode),
            l && (s = (t.ownerSVGElement || {}).parentNode),
            (s && s !== Kn && s.appendChild) || (s = Kn.body),
            (o = s._gsap) &&
              v &&
              o.width &&
              d &&
              o.time === Xt.time &&
              !o.uncache)
          )
            return Fe((h / o.width) * m);
          if (!v || ("height" !== n && "width" !== n))
            (v || "%" === u) &&
              !zr[Pr(s, "display")] &&
              (c.position = Pr(t, "position")),
              s === t && (c.position = "static"),
              s.appendChild($n),
              (a = $n[p]),
              s.removeChild($n),
              (c.position = "absolute");
          else {
            var y = t.style[n];
            (t.style[n] = m + i), (a = t[p]), y ? (t.style[n] = y) : Nr(t, n);
          }
          return (
            d && v && (((o = De(s)).time = Xt.time), (o.width = s[p])),
            Fe(g ? (a * h) / m : a && h ? (m / a) * h : 0)
          );
        },
        Hr = function (e, t, n, r) {
          var i;
          return (
            Jn || Dr(),
            t in hr &&
              "transform" !== t &&
              ~(t = hr[t]).indexOf(",") &&
              (t = t.split(",")[0]),
            nr[t] && "transform" !== t
              ? ((i = Qr(e, r)),
                (i =
                  "transformOrigin" !== t
                    ? i[t]
                    : i.svg
                    ? i.origin
                    : ei(Pr(e, Er)) + " " + i.zOrigin + "px"))
              : (!(i = e.style[t]) ||
                  "auto" === i ||
                  r ||
                  ~(i + "").indexOf("calc(")) &&
                (i =
                  (Xr[t] && Xr[t](e, t, n)) ||
                  Pr(e, t) ||
                  Ie(e, t) ||
                  ("opacity" === t ? 1 : 0)),
            n && !~(i + "").trim().indexOf(" ") ? Vr(e, t, i, n) + n : i
          );
        },
        Gr = function (e, t, n, r) {
          if (!n || "none" === n) {
            var i = Rr(t, e, 1),
              a = i && Pr(e, i, 1);
            a && a !== n
              ? ((t = i), (n = a))
              : "borderColor" === t && (n = Pr(e, "borderTopColor"));
          }
          var s,
            o,
            l,
            h,
            u,
            c,
            d,
            f,
            p,
            m,
            g,
            v = new In(this._pt, e.style, t, 0, 1, An),
            y = 0,
            _ = 0;
          if (
            ((v.b = n),
            (v.e = r),
            (n += ""),
            "auto" == (r += "") &&
              ((c = e.style[t]),
              (e.style[t] = r),
              (r = Pr(e, t) || r),
              c ? (e.style[t] = c) : Nr(e, t)),
            jt((s = [n, r])),
            (r = s[1]),
            (l = (n = s[0]).match(le) || []),
            (r.match(le) || []).length)
          ) {
            for (; (o = le.exec(r)); )
              (d = o[0]),
                (p = r.substring(y, o.index)),
                u
                  ? (u = (u + 1) % 5)
                  : ("rgba(" !== p.substr(-5) && "hsla(" !== p.substr(-5)) ||
                    (u = 1),
                d !== (c = l[_++] || "") &&
                  ((h = parseFloat(c) || 0),
                  (g = c.substr((h + "").length)),
                  "=" === d.charAt(1) && (d = Ne(h, d) + g),
                  (f = parseFloat(d)),
                  (m = d.substr((f + "").length)),
                  (y = le.lastIndex - m.length),
                  m ||
                    ((m = m || z.units[t] || g),
                    y === r.length && ((r += m), (v.e += m))),
                  g !== m && (h = Vr(e, t, c, m) || 0),
                  (v._pt = {
                    _next: v._pt,
                    p: p || 1 === _ ? p : ",",
                    s: h,
                    c: f - h,
                    m: (u && u < 4) || "zIndex" === t ? Math.round : 0
                  }));
            v.c = y < r.length ? r.substring(y, r.length) : "";
          } else v.r = "display" === t && "none" === r ? mr : pr;
          return ue.test(r) && (v.e = 0), (this._pt = v), v;
        },
        Wr = {
          top: "0%",
          bottom: "100%",
          left: "0%",
          right: "100%",
          center: "50%"
        },
        jr = function (e, t) {
          if (t.tween && t.tween._time === t.tween._dur) {
            var n,
              r,
              i,
              a = t.t,
              s = a.style,
              o = t.u,
              l = a._gsap;
            if ("all" === o || !0 === o) (s.cssText = ""), (r = 1);
            else
              for (i = (o = o.split(",")).length; --i > -1; )
                (n = o[i]),
                  nr[n] && ((r = 1), (n = "transformOrigin" === n ? Er : Sr)),
                  Nr(a, n);
            r &&
              (Nr(a, Sr),
              l &&
                (l.svg && a.removeAttribute("transform"),
                Qr(a, 1),
                (l.uncache = 1),
                Tr(s)));
          }
        },
        Xr = {
          clearProps: function (e, t, n, r, i) {
            if ("isFromStart" !== i.data) {
              var a = (e._pt = new In(e._pt, t, n, 0, 0, jr));
              return (a.u = r), (a.pr = -10), (a.tween = i), e._props.push(n), 1;
            }
          }
        },
        qr = [1, 0, 0, 1, 0, 0],
        Yr = {},
        Kr = function (e) {
          return "matrix(1, 0, 0, 1, 0, 0)" === e || "none" === e || !e;
        },
        Zr = function (e) {
          var t = Pr(e, Sr);
          return Kr(t) ? qr : t.substr(7).match(oe).map(Fe);
        },
        Jr = function (e, t) {
          var n,
            r,
            i,
            a,
            s = e._gsap || De(e),
            o = e.style,
            l = Zr(e);
          return s.svg && e.getAttribute("transform")
            ? "1,0,0,1,0,0" ===
              (l = [
                (i = e.transform.baseVal.consolidate().matrix).a,
                i.b,
                i.c,
                i.d,
                i.e,
                i.f
              ]).join(",")
              ? qr
              : l
            : (l !== qr ||
                e.offsetParent ||
                e === Zn ||
                s.svg ||
                ((i = o.display),
                (o.display = "block"),
                ((n = e.parentNode) && e.offsetParent) ||
                  ((a = 1), (r = e.nextElementSibling), Zn.appendChild(e)),
                (l = Zr(e)),
                i ? (o.display = i) : Nr(e, "display"),
                a &&
                  (r
                    ? n.insertBefore(e, r)
                    : n
                    ? n.appendChild(e)
                    : Zn.removeChild(e))),
              t && l.length > 6 ? [l[0], l[1], l[4], l[5], l[12], l[13]] : l);
        },
        $r = function (e, t, n, r, i, a) {
          var s,
            o,
            l,
            h = e._gsap,
            u = i || Jr(e, !0),
            c = h.xOrigin || 0,
            d = h.yOrigin || 0,
            f = h.xOffset || 0,
            p = h.yOffset || 0,
            m = u[0],
            g = u[1],
            v = u[2],
            y = u[3],
            _ = u[4],
            b = u[5],
            x = t.split(" "),
            S = parseFloat(x[0]) || 0,
            E = parseFloat(x[1]) || 0;
          n
            ? u !== qr &&
              (o = m * y - g * v) &&
              ((l = S * (-g / o) + E * (m / o) - (m * b - g * _) / o),
              (S = S * (y / o) + E * (-v / o) + (v * b - y * _) / o),
              (E = l))
            : ((S =
                (s = Fr(e)).x + (~x[0].indexOf("%") ? (S / 100) * s.width : S)),
              (E =
                s.y + (~(x[1] || x[0]).indexOf("%") ? (E / 100) * s.height : E))),
            r || (!1 !== r && h.smooth)
              ? ((_ = S - c),
                (b = E - d),
                (h.xOffset = f + (_ * m + b * v) - _),
                (h.yOffset = p + (_ * g + b * y) - b))
              : (h.xOffset = h.yOffset = 0),
            (h.xOrigin = S),
            (h.yOrigin = E),
            (h.smooth = !!r),
            (h.origin = t),
            (h.originIsAbsolute = !!n),
            (e.style[Er] = "0px 0px"),
            a &&
              (Br(a, h, "xOrigin", c, S),
              Br(a, h, "yOrigin", d, E),
              Br(a, h, "xOffset", f, h.xOffset),
              Br(a, h, "yOffset", p, h.yOffset)),
            e.setAttribute("data-svg-origin", S + " " + E);
        },
        Qr = function (e, t) {
          var n = e._gsap || new sn(e);
          if ("x" in n && !t && !n.uncache) return n;
          var r,
            i,
            a,
            s,
            o,
            l,
            h,
            u,
            c,
            d,
            f,
            p,
            m,
            g,
            v,
            y,
            _,
            b,
            x,
            S,
            E,
            w,
            T,
            M,
            A,
            C,
            P,
            k,
            R,
            D,
            I,
            L,
            F = e.style,
            O = n.scaleX < 0,
            N = "px",
            B = "deg",
            U = getComputedStyle(e),
            V = Pr(e, Er) || "0";
          return (
            (r = i = a = l = h = u = c = d = f = 0),
            (s = o = 1),
            (n.svg = !(!e.getCTM || !Or(e))),
            U.translate &&
              (("none" === U.translate &&
                "none" === U.scale &&
                "none" === U.rotate) ||
                (F[Sr] =
                  ("none" !== U.translate
                    ? "translate3d(" +
                      (U.translate + " 0 0").split(" ").slice(0, 3).join(", ") +
                      ") "
                    : "") +
                  ("none" !== U.rotate ? "rotate(" + U.rotate + ") " : "") +
                  ("none" !== U.scale
                    ? "scale(" + U.scale.split(" ").join(",") + ") "
                    : "") +
                  ("none" !== U[Sr] ? U[Sr] : "")),
              (F.scale = F.rotate = F.translate = "none")),
            (g = Jr(e, n.svg)),
            n.svg &&
              (n.uncache
                ? ((A = e.getBBox()),
                  (V = n.xOrigin - A.x + "px " + (n.yOrigin - A.y) + "px"),
                  (M = ""))
                : (M = !t && e.getAttribute("data-svg-origin")),
              $r(e, M || V, !!M || n.originIsAbsolute, !1 !== n.smooth, g)),
            (p = n.xOrigin || 0),
            (m = n.yOrigin || 0),
            g !== qr &&
              ((b = g[0]),
              (x = g[1]),
              (S = g[2]),
              (E = g[3]),
              (r = w = g[4]),
              (i = T = g[5]),
              6 === g.length
                ? ((s = Math.sqrt(b * b + x * x)),
                  (o = Math.sqrt(E * E + S * S)),
                  (l = b || x ? ar(x, b) * rr : 0),
                  (c = S || E ? ar(S, E) * rr + l : 0) &&
                    (o *= Math.abs(Math.cos(c * ir))),
                  n.svg &&
                    ((r -= p - (p * b + m * S)), (i -= m - (p * x + m * E))))
                : ((L = g[6]),
                  (D = g[7]),
                  (P = g[8]),
                  (k = g[9]),
                  (R = g[10]),
                  (I = g[11]),
                  (r = g[12]),
                  (i = g[13]),
                  (a = g[14]),
                  (h = (v = ar(L, R)) * rr),
                  v &&
                    ((M = w * (y = Math.cos(-v)) + P * (_ = Math.sin(-v))),
                    (A = T * y + k * _),
                    (C = L * y + R * _),
                    (P = w * -_ + P * y),
                    (k = T * -_ + k * y),
                    (R = L * -_ + R * y),
                    (I = D * -_ + I * y),
                    (w = M),
                    (T = A),
                    (L = C)),
                  (u = (v = ar(-S, R)) * rr),
                  v &&
                    ((y = Math.cos(-v)),
                    (I = E * (_ = Math.sin(-v)) + I * y),
                    (b = M = b * y - P * _),
                    (x = A = x * y - k * _),
                    (S = C = S * y - R * _)),
                  (l = (v = ar(x, b)) * rr),
                  v &&
                    ((M = b * (y = Math.cos(v)) + x * (_ = Math.sin(v))),
                    (A = w * y + T * _),
                    (x = x * y - b * _),
                    (T = T * y - w * _),
                    (b = M),
                    (w = A)),
                  h &&
                    Math.abs(h) + Math.abs(l) > 359.9 &&
                    ((h = l = 0), (u = 180 - u)),
                  (s = Fe(Math.sqrt(b * b + x * x + S * S))),
                  (o = Fe(Math.sqrt(T * T + L * L))),
                  (v = ar(w, T)),
                  (c = Math.abs(v) > 2e-4 ? v * rr : 0),
                  (f = I ? 1 / (I < 0 ? -I : I) : 0)),
              n.svg &&
                ((M = e.getAttribute("transform")),
                (n.forceCSS = e.setAttribute("transform", "") || !Kr(Pr(e, Sr))),
                M && e.setAttribute("transform", M))),
            Math.abs(c) > 90 &&
              Math.abs(c) < 270 &&
              (O
                ? ((s *= -1),
                  (c += l <= 0 ? 180 : -180),
                  (l += l <= 0 ? 180 : -180))
                : ((o *= -1), (c += c <= 0 ? 180 : -180))),
            (t = t || n.uncache),
            (n.x =
              r -
              ((n.xPercent =
                r &&
                ((!t && n.xPercent) ||
                  (Math.round(e.offsetWidth / 2) === Math.round(-r) ? -50 : 0)))
                ? (e.offsetWidth * n.xPercent) / 100
                : 0) +
              N),
            (n.y =
              i -
              ((n.yPercent =
                i &&
                ((!t && n.yPercent) ||
                  (Math.round(e.offsetHeight / 2) === Math.round(-i) ? -50 : 0)))
                ? (e.offsetHeight * n.yPercent) / 100
                : 0) +
              N),
            (n.z = a + N),
            (n.scaleX = Fe(s)),
            (n.scaleY = Fe(o)),
            (n.rotation = Fe(l) + B),
            (n.rotationX = Fe(h) + B),
            (n.rotationY = Fe(u) + B),
            (n.skewX = c + B),
            (n.skewY = d + B),
            (n.transformPerspective = f + N),
            (n.zOrigin = parseFloat(V.split(" ")[2]) || (!t && n.zOrigin) || 0) &&
              (F[Er] = ei(V)),
            (n.xOffset = n.yOffset = 0),
            (n.force3D = z.force3D),
            (n.renderTransform = n.svg ? oi : tr ? si : ni),
            (n.uncache = 0),
            n
          );
        },
        ei = function (e) {
          return (e = e.split(" "))[0] + " " + e[1];
        },
        ti = function (e, t, n) {
          var r = _t(t);
          return Fe(parseFloat(t) + parseFloat(Vr(e, "x", n + "px", r))) + r;
        },
        ni = function (e, t) {
          (t.z = "0px"),
            (t.rotationY = t.rotationX = "0deg"),
            (t.force3D = 0),
            si(e, t);
        },
        ri = "0deg",
        ii = "0px",
        ai = ") ",
        si = function (e, t) {
          var n = t || this,
            r = n.xPercent,
            i = n.yPercent,
            a = n.x,
            s = n.y,
            o = n.z,
            l = n.rotation,
            h = n.rotationY,
            u = n.rotationX,
            c = n.skewX,
            d = n.skewY,
            f = n.scaleX,
            p = n.scaleY,
            m = n.transformPerspective,
            g = n.force3D,
            v = n.target,
            y = n.zOrigin,
            _ = "",
            b = ("auto" === g && e && 1 !== e) || !0 === g;
          if (y && (u !== ri || h !== ri)) {
            var x,
              S = parseFloat(h) * ir,
              E = Math.sin(S),
              w = Math.cos(S);
            (S = parseFloat(u) * ir),
              (x = Math.cos(S)),
              (a = ti(v, a, E * x * -y)),
              (s = ti(v, s, -Math.sin(S) * -y)),
              (o = ti(v, o, w * x * -y + y));
          }
          m !== ii && (_ += "perspective(" + m + ai),
            (r || i) && (_ += "translate(" + r + "%, " + i + "%) "),
            (b || a !== ii || s !== ii || o !== ii) &&
              (_ +=
                o !== ii || b
                  ? "translate3d(" + a + ", " + s + ", " + o + ") "
                  : "translate(" + a + ", " + s + ai),
            l !== ri && (_ += "rotate(" + l + ai),
            h !== ri && (_ += "rotateY(" + h + ai),
            u !== ri && (_ += "rotateX(" + u + ai),
            (c === ri && d === ri) || (_ += "skew(" + c + ", " + d + ai),
            (1 === f && 1 === p) || (_ += "scale(" + f + ", " + p + ai),
            (v.style[Sr] = _ || "translate(0, 0)");
        },
        oi = function (e, t) {
          var n,
            r,
            i,
            a,
            s,
            o = t || this,
            l = o.xPercent,
            h = o.yPercent,
            u = o.x,
            c = o.y,
            d = o.rotation,
            f = o.skewX,
            p = o.skewY,
            m = o.scaleX,
            g = o.scaleY,
            v = o.target,
            y = o.xOrigin,
            _ = o.yOrigin,
            b = o.xOffset,
            x = o.yOffset,
            S = o.forceCSS,
            E = parseFloat(u),
            w = parseFloat(c);
          (d = parseFloat(d)),
            (f = parseFloat(f)),
            (p = parseFloat(p)) && ((f += p = parseFloat(p)), (d += p)),
            d || f
              ? ((d *= ir),
                (f *= ir),
                (n = Math.cos(d) * m),
                (r = Math.sin(d) * m),
                (i = Math.sin(d - f) * -g),
                (a = Math.cos(d - f) * g),
                f &&
                  ((p *= ir),
                  (s = Math.tan(f - p)),
                  (i *= s = Math.sqrt(1 + s * s)),
                  (a *= s),
                  p &&
                    ((s = Math.tan(p)),
                    (n *= s = Math.sqrt(1 + s * s)),
                    (r *= s))),
                (n = Fe(n)),
                (r = Fe(r)),
                (i = Fe(i)),
                (a = Fe(a)))
              : ((n = m), (a = g), (r = i = 0)),
            ((E && !~(u + "").indexOf("px")) ||
              (w && !~(c + "").indexOf("px"))) &&
              ((E = Vr(v, "x", u, "px")), (w = Vr(v, "y", c, "px"))),
            (y || _ || b || x) &&
              ((E = Fe(E + y - (y * n + _ * i) + b)),
              (w = Fe(w + _ - (y * r + _ * a) + x))),
            (l || h) &&
              ((s = v.getBBox()),
              (E = Fe(E + (l / 100) * s.width)),
              (w = Fe(w + (h / 100) * s.height))),
            (s =
              "matrix(" +
              n +
              "," +
              r +
              "," +
              i +
              "," +
              a +
              "," +
              E +
              "," +
              w +
              ")"),
            v.setAttribute("transform", s),
            S && (v.style[Sr] = s);
        },
        li = function (e, t, n, r, i) {
          var a,
            s,
            o = 360,
            l = Z(i),
            h = parseFloat(i) * (l && ~i.indexOf("rad") ? rr : 1) - r,
            u = r + h + "deg";
          return (
            l &&
              ("short" === (a = i.split("_")[1]) &&
                (h %= o) != h % 180 &&
                (h += h < 0 ? o : -360),
              "cw" === a && h < 0
                ? (h = ((h + 36e9) % o) - ~~(h / o) * o)
                : "ccw" === a && h > 0 && (h = ((h - 36e9) % o) - ~~(h / o) * o)),
            (e._pt = s = new In(e._pt, t, n, r, h, cr)),
            (s.e = u),
            (s.u = "deg"),
            e._props.push(n),
            s
          );
        },
        hi = function (e, t) {
          for (var n in t) e[n] = t[n];
          return e;
        },
        ui = function (e, t, n) {
          var r,
            i,
            a,
            s,
            o,
            l,
            h,
            u = hi({}, n._gsap),
            c = n.style;
          for (i in (u.svg
            ? ((a = n.getAttribute("transform")),
              n.setAttribute("transform", ""),
              (c[Sr] = t),
              (r = Qr(n, 1)),
              Nr(n, Sr),
              n.setAttribute("transform", a))
            : ((a = getComputedStyle(n)[Sr]),
              (c[Sr] = t),
              (r = Qr(n, 1)),
              (c[Sr] = a)),
          nr))
            (a = u[i]) !== (s = r[i]) &&
              "perspective,force3D,transformOrigin,svgOrigin".indexOf(i) < 0 &&
              ((o = _t(a) !== (h = _t(s)) ? Vr(n, i, a, h) : parseFloat(a)),
              (l = parseFloat(s)),
              (e._pt = new In(e._pt, r, i, o, l - o, ur)),
              (e._pt.u = h || 0),
              e._props.push(i));
          hi(r, u);
        };
      Le("padding,margin,Width,Radius", function (e, t) {
        var n = "Top",
          r = "Right",
          i = "Bottom",
          a = "Left",
          s = (t < 3 ? [n, r, i, a] : [n + a, n + r, i + r, i + a]).map(function (
            n
          ) {
            return t < 2 ? e + n : "border" + n + e;
          });
        Xr[t > 1 ? "border" + e : e] = function (e, t, n, r, i) {
          var a, o;
          if (arguments.length < 4)
            return (
              (a = s.map(function (t) {
                return Hr(e, t, n);
              })),
              5 === (o = a.join(" ")).split(a[0]).length ? a[0] : o
            );
          (a = (r + "").split(" ")),
            (o = {}),
            s.forEach(function (e, t) {
              return (o[e] = a[t] = a[t] || a[((t - 1) / 2) | 0]);
            }),
            e.init(t, o, i);
        };
      });
      var ci,
        di,
        fi = {
          name: "css",
          register: Dr,
          targetTest: function (e) {
            return e.style && e.nodeType;
          },
          init: function (e, t, n, r, i) {
            var a,
              s,
              o,
              l,
              h,
              u,
              c,
              d,
              f,
              p,
              m,
              g,
              v,
              y,
              _,
              b,
              x,
              S,
              E,
              w,
              T = this._props,
              M = e.style,
              A = n.vars.startAt;
            for (c in (Jn || Dr(),
            (this.styles = this.styles || Ar(e)),
            (b = this.styles.props),
            (this.tween = n),
            t))
              if (
                "autoRound" !== c &&
                ((s = t[c]), !Me[c] || !fn(c, t, n, r, e, i))
              )
                if (
                  ((h = qn(s)),
                  (u = Xr[c]),
                  "function" === h && (h = qn((s = s.call(n, r, e, i)))),
                  "string" === h && ~s.indexOf("random(") && (s = kt(s)),
                  u)
                )
                  u(this, e, c, s, n) && (_ = 1);
                else if ("--" === c.substr(0, 2))
                  (a = (getComputedStyle(e).getPropertyValue(c) + "").trim()),
                    (s += ""),
                    (Gt.lastIndex = 0),
                    Gt.test(a) || ((d = _t(a)), (f = _t(s))),
                    f ? d !== f && (a = Vr(e, c, a, f) + f) : d && (s += d),
                    this.add(M, "setProperty", a, s, r, i, 0, 0, c),
                    T.push(c),
                    b.push(c, 0, M[c]);
                else if ("undefined" !== h) {
                  if (
                    (A && c in A
                      ? ((a =
                          "function" == typeof A[c]
                            ? A[c].call(n, r, e, i)
                            : A[c]),
                        Z(a) && ~a.indexOf("random(") && (a = kt(a)),
                        _t(a + "") ||
                          "auto" === a ||
                          (a += z.units[c] || _t(Hr(e, c)) || ""),
                        "=" === (a + "").charAt(1) && (a = Hr(e, c)))
                      : (a = Hr(e, c)),
                    (l = parseFloat(a)),
                    (p =
                      "string" === h && "=" === s.charAt(1) && s.substr(0, 2)) &&
                      (s = s.substr(2)),
                    (o = parseFloat(s)),
                    c in hr &&
                      ("autoAlpha" === c &&
                        (1 === l &&
                          "hidden" === Hr(e, "visibility") &&
                          o &&
                          (l = 0),
                        b.push("visibility", 0, M.visibility),
                        Br(
                          this,
                          M,
                          "visibility",
                          l ? "inherit" : "hidden",
                          o ? "inherit" : "hidden",
                          !o
                        )),
                      "scale" !== c &&
                        "transform" !== c &&
                        ~(c = hr[c]).indexOf(",") &&
                        (c = c.split(",")[0])),
                    (m = c in nr))
                  ) {
                    if (
                      (this.styles.save(c),
                      g ||
                        (((v = e._gsap).renderTransform && !t.parseTransform) ||
                          Qr(e, t.parseTransform),
                        (y = !1 !== t.smoothOrigin && v.smooth),
                        ((g = this._pt =
                          new In(
                            this._pt,
                            M,
                            Sr,
                            0,
                            1,
                            v.renderTransform,
                            v,
                            0,
                            -1
                          )).dep = 1)),
                      "scale" === c)
                    )
                      (this._pt = new In(
                        this._pt,
                        v,
                        "scaleY",
                        v.scaleY,
                        (p ? Ne(v.scaleY, p + o) : o) - v.scaleY || 0,
                        ur
                      )),
                        (this._pt.u = 0),
                        T.push("scaleY", c),
                        (c += "X");
                    else {
                      if ("transformOrigin" === c) {
                        b.push(Er, 0, M[Er]),
                          (S = void 0),
                          (E = void 0),
                          (w = void 0),
                          (E = (S = (x = s).split(" "))[0]),
                          (w = S[1] || "50%"),
                          ("top" !== E &&
                            "bottom" !== E &&
                            "left" !== w &&
                            "right" !== w) ||
                            ((x = E), (E = w), (w = x)),
                          (S[0] = Wr[E] || E),
                          (S[1] = Wr[w] || w),
                          (s = S.join(" ")),
                          v.svg
                            ? $r(e, s, 0, y, 0, this)
                            : ((f = parseFloat(s.split(" ")[2]) || 0) !==
                                v.zOrigin && Br(this, v, "zOrigin", v.zOrigin, f),
                              Br(this, M, c, ei(a), ei(s)));
                        continue;
                      }
                      if ("svgOrigin" === c) {
                        $r(e, s, 1, y, 0, this);
                        continue;
                      }
                      if (c in Yr) {
                        li(this, v, c, l, p ? Ne(l, p + s) : s);
                        continue;
                      }
                      if ("smoothOrigin" === c) {
                        Br(this, v, "smooth", v.smooth, s);
                        continue;
                      }
                      if ("force3D" === c) {
                        v[c] = s;
                        continue;
                      }
                      if ("transform" === c) {
                        ui(this, s, e);
                        continue;
                      }
                    }
                  } else c in M || (c = Rr(c) || c);
                  if (
                    m ||
                    ((o || 0 === o) && (l || 0 === l) && !lr.test(s) && c in M)
                  )
                    o || (o = 0),
                      (d = (a + "").substr((l + "").length)) !==
                        (f = _t(s) || (c in z.units ? z.units[c] : d)) &&
                        (l = Vr(e, c, a, f)),
                      (this._pt = new In(
                        this._pt,
                        m ? v : M,
                        c,
                        l,
                        (p ? Ne(l, p + o) : o) - l,
                        m || ("px" !== f && "zIndex" !== c) || !1 === t.autoRound
                          ? ur
                          : fr
                      )),
                      (this._pt.u = f || 0),
                      d !== f &&
                        "%" !== f &&
                        ((this._pt.b = a), (this._pt.r = dr));
                  else if (c in M) Gr.call(this, e, c, a, p ? p + s : s);
                  else if (c in e) this.add(e, c, a || e[c], p ? p + s : s, r, i);
                  else if ("parseTransform" !== c) {
                    ge(c, s);
                    continue;
                  }
                  m || (c in M ? b.push(c, 0, M[c]) : b.push(c, 1, a || e[c])),
                    T.push(c);
                }
            _ && Dn(this);
          },
          render: function (e, t) {
            if (t.tween._time || !er())
              for (var n = t._pt; n; ) n.r(e, n.d), (n = n._next);
            else t.styles.revert();
          },
          get: Hr,
          aliases: hr,
          getSetter: function (e, t, n) {
            var r = hr[t];
            return (
              r && r.indexOf(",") < 0 && (t = r),
              t in nr && t !== Er && (e._gsap.x || Hr(e, "x"))
                ? n && Qn === n
                  ? "scale" === t
                    ? _r
                    : yr
                  : (Qn = n || {}) && ("scale" === t ? br : xr)
                : e.style && !Q(e.style[t])
                ? gr
                : ~t.indexOf("-")
                ? vr
                : wn(e, t)
            );
          },
          core: { _removeProperty: Nr, _getMatrix: Jr }
        };
      (Xn.utils.checkPrefix = Rr),
        (Xn.core.getStyleSaver = Ar),
        (di = Le(
          "x,y,z,scale,scaleX,scaleY,xPercent,yPercent" +
            "," +
            (ci = "rotation,rotationX,rotationY,skewX,skewY") +
            ",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",
          function (e) {
            nr[e] = 1;
          }
        )),
        Le(ci, function (e) {
          (z.units[e] = "deg"), (Yr[e] = 1);
        }),
        (hr[di[13]] = "x,y,z,scale,scaleX,scaleY,xPercent,yPercent," + ci),
        Le(
          "0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",
          function (e) {
            var t = e.split(":");
            hr[t[1]] = di[t[0]];
          }
        ),
        Le(
          "x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",
          function (e) {
            z.units[e] = "px";
          }
        ),
        Xn.registerPlugin(fi);
      var pi = Xn.registerPlugin(fi) || Xn;
      pi.core.Tween;
      class mi {
        animatePageToTopPage(e) {
          const { oldPage: t, newPage: n } = e;
          return new Promise((e) => {
            const r = pi.timeline({
              delay: 0,
              onComplete: () => {
                (window.scrollY = 0), e();
              }
            });
            r.set(t.element, { opacity: 1 }),
              r.set(n.element, { opacity: 0 }),
              r.to(t.element, { opacity: 0, duration: 0.5, ease: "none" }),
              r.to(n.element, { opacity: 1, duration: 0.5 });
          });
        }
        animatePageToSubPage(e) {
          const { oldPage: t, newPage: n } = e;
          return new Promise((e) => {
            window.scrollTo({ top: 0, behavior: "auto" });
            const r = pi.timeline({
              delay: 2,
              onComplete: () => {
                e();
              }
            });
            r.set(t.element, { opacity: 1 }),
              r.set(n.element, { opacity: 0 }),
              r.to(t.element, { opacity: 0, duration: 0.5, ease: "none" }),
              r.add("show"),
              r.to(n.element, { opacity: 1, duration: 0.5 }, "show"),
              r.from(
                n.element.querySelectorAll(
                  '[data-seamless-page-loader-anim="slide-in"]'
                ),
                { y: 70, duration: 0.5, stagger: { each: 0.1 } },
                "show"
              );
          });
        }
      }
      function gi(e) {
        var t = "function" == typeof Map ? new Map() : void 0;
        return (
          (gi = function (e) {
            if (
              null === e ||
              !(function (e) {
                try {
                  return (
                    -1 !== Function.toString.call(e).indexOf("[native code]")
                  );
                } catch (t) {
                  return "function" == typeof e;
                }
              })(e)
            )
              return e;
            if ("function" != typeof e)
              throw new TypeError(
                "Super expression must either be null or a function"
              );
            if (void 0 !== t) {
              if (t.has(e)) return t.get(e);
              t.set(e, n);
            }
            function n() {
              return vi(e, arguments, Ci(this).constructor);
            }
            return (
              (n.prototype = Object.create(e.prototype, {
                constructor: {
                  value: n,
                  enumerable: !1,
                  writable: !0,
                  configurable: !0
                }
              })),
              Ri(n, e)
            );
          }),
          gi(e)
        );
      }
      function vi(e, t, n) {
        if (Ai()) return Reflect.construct.apply(null, arguments);
        var r = [null];
        r.push.apply(r, t);
        var i = new (e.bind.apply(e, r))();
        return n && Ri(i, n.prototype), i;
      }
      function yi(e, t, n, r, i, a, s) {
        try {
          var o = e[a](s),
            l = o.value;
        } catch (e) {
          return void n(e);
        }
        o.done ? t(l) : Promise.resolve(l).then(r, i);
      }
      function _i(e, t) {
        var n =
          ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
        if (!n) {
          if (
            Array.isArray(e) ||
            (n = wi(e)) ||
            (t && e && "number" == typeof e.length)
          ) {
            n && (e = n);
            var r = 0,
              i = function () {};
            return {
              s: i,
              n: function () {
                return r >= e.length ? { done: !0 } : { done: !1, value: e[r++] };
              },
              e: function (e) {
                throw e;
              },
              f: i
            };
          }
          throw new TypeError(
            "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        }
        var a,
          s = !0,
          o = !1;
        return {
          s: function () {
            n = n.call(e);
          },
          n: function () {
            var e = n.next();
            return (s = e.done), e;
          },
          e: function (e) {
            (o = !0), (a = e);
          },
          f: function () {
            try {
              s || null == n.return || n.return();
            } finally {
              if (o) throw a;
            }
          }
        };
      }
      function bi(e, t) {
        return (
          (function (e) {
            if (Array.isArray(e)) return e;
          })(e) ||
          (function (e, t) {
            var n =
              null == e
                ? null
                : ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                  e["@@iterator"];
            if (null != n) {
              var r,
                i,
                a,
                s,
                o = [],
                l = !0,
                h = !1;
              try {
                if (((a = (n = n.call(e)).next), 0 === t)) {
                  if (Object(n) !== n) return;
                  l = !1;
                } else
                  for (
                    ;
                    !(l = (r = a.call(n)).done) &&
                    (o.push(r.value), o.length !== t);
                    l = !0
                  );
              } catch (e) {
                (h = !0), (i = e);
              } finally {
                try {
                  if (
                    !l &&
                    null != n.return &&
                    ((s = n.return()), Object(s) !== s)
                  )
                    return;
                } finally {
                  if (h) throw i;
                }
              }
              return o;
            }
          })(e, t) ||
          wi(e, t) ||
          (function () {
            throw new TypeError(
              "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
            );
          })()
        );
      }
      function xi() {
        return (
          (xi =
            "undefined" != typeof Reflect && Reflect.get
              ? Reflect.get.bind()
              : function (e, t, n) {
                  var r = Si(e, t);
                  if (r) {
                    var i = Object.getOwnPropertyDescriptor(r, t);
                    return i.get
                      ? i.get.call(arguments.length < 3 ? e : n)
                      : i.value;
                  }
                }),
          xi.apply(this, arguments)
        );
      }
      function Si(e, t) {
        for (
          ;
          !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Ci(e));
  
        );
        return e;
      }
      function Ei(e) {
        return (
          (function (e) {
            if (Array.isArray(e)) return Ti(e);
          })(e) ||
          (function (e) {
            if (
              ("undefined" != typeof Symbol && null != e[Symbol.iterator]) ||
              null != e["@@iterator"]
            )
              return Array.from(e);
          })(e) ||
          wi(e) ||
          (function () {
            throw new TypeError(
              "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
            );
          })()
        );
      }
      function wi(e, t) {
        if (e) {
          if ("string" == typeof e) return Ti(e, t);
          var n = Object.prototype.toString.call(e).slice(8, -1);
          return (
            "Object" === n && e.constructor && (n = e.constructor.name),
            "Map" === n || "Set" === n
              ? Array.from(e)
              : "Arguments" === n ||
                /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
              ? Ti(e, t)
              : void 0
          );
        }
      }
      function Ti(e, t) {
        (null == t || t > e.length) && (t = e.length);
        for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
        return r;
      }
      function Mi(e, t, n) {
        return (
          (t = Ci(t)),
          (function (e, t) {
            if (t && ("object" === Li(t) || "function" == typeof t)) return t;
            if (void 0 !== t)
              throw new TypeError(
                "Derived constructors may only return object or undefined"
              );
            return Pi(e);
          })(
            e,
            Ai()
              ? Reflect.construct(t, n || [], Ci(e).constructor)
              : t.apply(e, n)
          )
        );
      }
      function Ai() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (Ai = function () {
          return !!e;
        })();
      }
      function Ci(e) {
        return (
          (Ci = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          Ci(e)
        );
      }
      function Pi(e) {
        if (void 0 === e)
          throw new ReferenceError(
            "this hasn't been initialised - super() hasn't been called"
          );
        return e;
      }
      function ki(e, t) {
        if ("function" != typeof t && null !== t)
          throw new TypeError(
            "Super expression must either be null or a function"
          );
        (e.prototype = Object.create(t && t.prototype, {
          constructor: { value: e, writable: !0, configurable: !0 }
        })),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          t && Ri(e, t);
      }
      function Ri(e, t) {
        return (
          (Ri = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          Ri(e, t)
        );
      }
      function Di(e, t, n) {
        return (
          (t = Bi(t)) in e
            ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
              })
            : (e[t] = n),
          e
        );
      }
      function Ii() {
        Ii = function () {
          return t;
        };
        var e,
          t = {},
          n = Object.prototype,
          r = n.hasOwnProperty,
          i =
            Object.defineProperty ||
            function (e, t, n) {
              e[t] = n.value;
            },
          a = "function" == typeof Symbol ? Symbol : {},
          s = a.iterator || "@@iterator",
          o = a.asyncIterator || "@@asyncIterator",
          l = a.toStringTag || "@@toStringTag";
        function h(e, t, n) {
          return (
            Object.defineProperty(e, t, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0
            }),
            e[t]
          );
        }
        try {
          h({}, "");
        } catch (e) {
          h = function (e, t, n) {
            return (e[t] = n);
          };
        }
        function u(e, t, n, r) {
          var a = t && t.prototype instanceof g ? t : g,
            s = Object.create(a.prototype),
            o = new P(r || []);
          return i(s, "_invoke", { value: T(e, n, o) }), s;
        }
        function c(e, t, n) {
          try {
            return { type: "normal", arg: e.call(t, n) };
          } catch (e) {
            return { type: "throw", arg: e };
          }
        }
        t.wrap = u;
        var d = "suspendedStart",
          f = "executing",
          p = "completed",
          m = {};
        function g() {}
        function v() {}
        function y() {}
        var _ = {};
        h(_, s, function () {
          return this;
        });
        var b = Object.getPrototypeOf,
          x = b && b(b(k([])));
        x && x !== n && r.call(x, s) && (_ = x);
        var S = (y.prototype = g.prototype = Object.create(_));
        function E(e) {
          ["next", "throw", "return"].forEach(function (t) {
            h(e, t, function (e) {
              return this._invoke(t, e);
            });
          });
        }
        function w(e, t) {
          function n(i, a, s, o) {
            var l = c(e[i], e, a);
            if ("throw" !== l.type) {
              var h = l.arg,
                u = h.value;
              return u && "object" == Li(u) && r.call(u, "__await")
                ? t.resolve(u.__await).then(
                    function (e) {
                      n("next", e, s, o);
                    },
                    function (e) {
                      n("throw", e, s, o);
                    }
                  )
                : t.resolve(u).then(
                    function (e) {
                      (h.value = e), s(h);
                    },
                    function (e) {
                      return n("throw", e, s, o);
                    }
                  );
            }
            o(l.arg);
          }
          var a;
          i(this, "_invoke", {
            value: function (e, r) {
              function i() {
                return new t(function (t, i) {
                  n(e, r, t, i);
                });
              }
              return (a = a ? a.then(i, i) : i());
            }
          });
        }
        function T(t, n, r) {
          var i = d;
          return function (a, s) {
            if (i === f) throw new Error("Generator is already running");
            if (i === p) {
              if ("throw" === a) throw s;
              return { value: e, done: !0 };
            }
            for (r.method = a, r.arg = s; ; ) {
              var o = r.delegate;
              if (o) {
                var l = M(o, r);
                if (l) {
                  if (l === m) continue;
                  return l;
                }
              }
              if ("next" === r.method) r.sent = r._sent = r.arg;
              else if ("throw" === r.method) {
                if (i === d) throw ((i = p), r.arg);
                r.dispatchException(r.arg);
              } else "return" === r.method && r.abrupt("return", r.arg);
              i = f;
              var h = c(t, n, r);
              if ("normal" === h.type) {
                if (((i = r.done ? p : "suspendedYield"), h.arg === m)) continue;
                return { value: h.arg, done: r.done };
              }
              "throw" === h.type &&
                ((i = p), (r.method = "throw"), (r.arg = h.arg));
            }
          };
        }
        function M(t, n) {
          var r = n.method,
            i = t.iterator[r];
          if (i === e)
            return (
              (n.delegate = null),
              ("throw" === r &&
                t.iterator.return &&
                ((n.method = "return"),
                (n.arg = e),
                M(t, n),
                "throw" === n.method)) ||
                ("return" !== r &&
                  ((n.method = "throw"),
                  (n.arg = new TypeError(
                    "The iterator does not provide a '" + r + "' method"
                  )))),
              m
            );
          var a = c(i, t.iterator, n.arg);
          if ("throw" === a.type)
            return (n.method = "throw"), (n.arg = a.arg), (n.delegate = null), m;
          var s = a.arg;
          return s
            ? s.done
              ? ((n[t.resultName] = s.value),
                (n.next = t.nextLoc),
                "return" !== n.method && ((n.method = "next"), (n.arg = e)),
                (n.delegate = null),
                m)
              : s
            : ((n.method = "throw"),
              (n.arg = new TypeError("iterator result is not an object")),
              (n.delegate = null),
              m);
        }
        function A(e) {
          var t = { tryLoc: e[0] };
          1 in e && (t.catchLoc = e[1]),
            2 in e && ((t.finallyLoc = e[2]), (t.afterLoc = e[3])),
            this.tryEntries.push(t);
        }
        function C(e) {
          var t = e.completion || {};
          (t.type = "normal"), delete t.arg, (e.completion = t);
        }
        function P(e) {
          (this.tryEntries = [{ tryLoc: "root" }]),
            e.forEach(A, this),
            this.reset(!0);
        }
        function k(t) {
          if (t || "" === t) {
            var n = t[s];
            if (n) return n.call(t);
            if ("function" == typeof t.next) return t;
            if (!isNaN(t.length)) {
              var i = -1,
                a = function n() {
                  for (; ++i < t.length; )
                    if (r.call(t, i)) return (n.value = t[i]), (n.done = !1), n;
                  return (n.value = e), (n.done = !0), n;
                };
              return (a.next = a);
            }
          }
          throw new TypeError(Li(t) + " is not iterable");
        }
        return (
          (v.prototype = y),
          i(S, "constructor", { value: y, configurable: !0 }),
          i(y, "constructor", { value: v, configurable: !0 }),
          (v.displayName = h(y, l, "GeneratorFunction")),
          (t.isGeneratorFunction = function (e) {
            var t = "function" == typeof e && e.constructor;
            return (
              !!t &&
              (t === v || "GeneratorFunction" === (t.displayName || t.name))
            );
          }),
          (t.mark = function (e) {
            return (
              Object.setPrototypeOf
                ? Object.setPrototypeOf(e, y)
                : ((e.__proto__ = y), h(e, l, "GeneratorFunction")),
              (e.prototype = Object.create(S)),
              e
            );
          }),
          (t.awrap = function (e) {
            return { __await: e };
          }),
          E(w.prototype),
          h(w.prototype, o, function () {
            return this;
          }),
          (t.AsyncIterator = w),
          (t.async = function (e, n, r, i, a) {
            void 0 === a && (a = Promise);
            var s = new w(u(e, n, r, i), a);
            return t.isGeneratorFunction(n)
              ? s
              : s.next().then(function (e) {
                  return e.done ? e.value : s.next();
                });
          }),
          E(S),
          h(S, l, "Generator"),
          h(S, s, function () {
            return this;
          }),
          h(S, "toString", function () {
            return "[object Generator]";
          }),
          (t.keys = function (e) {
            var t = Object(e),
              n = [];
            for (var r in t) n.push(r);
            return (
              n.reverse(),
              function e() {
                for (; n.length; ) {
                  var r = n.pop();
                  if (r in t) return (e.value = r), (e.done = !1), e;
                }
                return (e.done = !0), e;
              }
            );
          }),
          (t.values = k),
          (P.prototype = {
            constructor: P,
            reset: function (t) {
              if (
                ((this.prev = 0),
                (this.next = 0),
                (this.sent = this._sent = e),
                (this.done = !1),
                (this.delegate = null),
                (this.method = "next"),
                (this.arg = e),
                this.tryEntries.forEach(C),
                !t)
              )
                for (var n in this)
                  "t" === n.charAt(0) &&
                    r.call(this, n) &&
                    !isNaN(+n.slice(1)) &&
                    (this[n] = e);
            },
            stop: function () {
              this.done = !0;
              var e = this.tryEntries[0].completion;
              if ("throw" === e.type) throw e.arg;
              return this.rval;
            },
            dispatchException: function (t) {
              if (this.done) throw t;
              var n = this;
              function i(r, i) {
                return (
                  (o.type = "throw"),
                  (o.arg = t),
                  (n.next = r),
                  i && ((n.method = "next"), (n.arg = e)),
                  !!i
                );
              }
              for (var a = this.tryEntries.length - 1; a >= 0; --a) {
                var s = this.tryEntries[a],
                  o = s.completion;
                if ("root" === s.tryLoc) return i("end");
                if (s.tryLoc <= this.prev) {
                  var l = r.call(s, "catchLoc"),
                    h = r.call(s, "finallyLoc");
                  if (l && h) {
                    if (this.prev < s.catchLoc) return i(s.catchLoc, !0);
                    if (this.prev < s.finallyLoc) return i(s.finallyLoc);
                  } else if (l) {
                    if (this.prev < s.catchLoc) return i(s.catchLoc, !0);
                  } else {
                    if (!h)
                      throw new Error("try statement without catch or finally");
                    if (this.prev < s.finallyLoc) return i(s.finallyLoc);
                  }
                }
              }
            },
            abrupt: function (e, t) {
              for (var n = this.tryEntries.length - 1; n >= 0; --n) {
                var i = this.tryEntries[n];
                if (
                  i.tryLoc <= this.prev &&
                  r.call(i, "finallyLoc") &&
                  this.prev < i.finallyLoc
                ) {
                  var a = i;
                  break;
                }
              }
              a &&
                ("break" === e || "continue" === e) &&
                a.tryLoc <= t &&
                t <= a.finallyLoc &&
                (a = null);
              var s = a ? a.completion : {};
              return (
                (s.type = e),
                (s.arg = t),
                a
                  ? ((this.method = "next"), (this.next = a.finallyLoc), m)
                  : this.complete(s)
              );
            },
            complete: function (e, t) {
              if ("throw" === e.type) throw e.arg;
              return (
                "break" === e.type || "continue" === e.type
                  ? (this.next = e.arg)
                  : "return" === e.type
                  ? ((this.rval = this.arg = e.arg),
                    (this.method = "return"),
                    (this.next = "end"))
                  : "normal" === e.type && t && (this.next = t),
                m
              );
            },
            finish: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.finallyLoc === e)
                  return this.complete(n.completion, n.afterLoc), C(n), m;
              }
            },
            catch: function (e) {
              for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                var n = this.tryEntries[t];
                if (n.tryLoc === e) {
                  var r = n.completion;
                  if ("throw" === r.type) {
                    var i = r.arg;
                    C(n);
                  }
                  return i;
                }
              }
              throw new Error("illegal catch attempt");
            },
            delegateYield: function (t, n, r) {
              return (
                (this.delegate = { iterator: k(t), resultName: n, nextLoc: r }),
                "next" === this.method && (this.arg = e),
                m
              );
            }
          }),
          t
        );
      }
      function Li(e) {
        return (
          (Li =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          Li(e)
        );
      }
      function Fi(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function Oi(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(e, Bi(r.key), r);
        }
      }
      function Ni(e, t, n) {
        return (
          t && Oi(e.prototype, t),
          n && Oi(e, n),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          e
        );
      }
      function Bi(e) {
        var t = (function (e, t) {
          if ("object" != Li(e) || !e) return e;
          var n = e[Symbol.toPrimitive];
          if (void 0 !== n) {
            var r = n.call(e, t);
            if ("object" != Li(r)) return r;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e, "string");
        return "symbol" == Li(t) ? t : String(t);
      }
      var Ui = "160",
        zi = 100,
        Vi = "attached",
        Hi = 301,
        Gi = 302,
        Wi = 306,
        ji = 1e3,
        Xi = 1001,
        qi = 1002,
        Yi = 1003,
        Ki = 1004,
        Zi = 1005,
        Ji = 1006,
        $i = 1008,
        Qi = 1009,
        ea = 1012,
        ta = 1013,
        na = 1014,
        ra = 1015,
        ia = 1016,
        aa = 1017,
        sa = 1018,
        oa = 1020,
        la = 1023,
        ha = 1026,
        ua = 1027,
        ca = 1029,
        da = 1031,
        fa = 1033,
        pa = 33776,
        ma = 33777,
        ga = 33778,
        va = 33779,
        ya = 35840,
        _a = 35841,
        ba = 35842,
        xa = 35843,
        Sa = 36196,
        Ea = 37492,
        wa = 37496,
        Ta = 37808,
        Ma = 37809,
        Aa = 37810,
        Ca = 37811,
        Pa = 37812,
        ka = 37813,
        Ra = 37814,
        Da = 37815,
        Ia = 37816,
        La = 37817,
        Fa = 37818,
        Oa = 37819,
        Na = 37820,
        Ba = 37821,
        Ua = 36492,
        za = 36494,
        Va = 36495,
        Ha = 36284,
        Ga = 36285,
        Wa = 36286,
        ja = 2300,
        Xa = 2301,
        qa = 2302,
        Ya = 2400,
        Ka = 2401,
        Za = 2402,
        Ja = 2500,
        $a = 3001,
        Qa = "",
        es = "srgb",
        ts = "srgb-linear",
        ns = "display-p3",
        rs = "display-p3-linear",
        is = "linear",
        as = "srgb",
        ss = "rec709",
        os = "p3",
        ls = 7680,
        hs = 35044,
        us = "300 es",
        cs = 1035,
        ds = 2e3,
        fs = 2001,
        ps = (function () {
          function e() {
            Fi(this, e);
          }
          return (
            Ni(e, [
              {
                key: "addEventListener",
                value: function (e, t) {
                  void 0 === this._listeners && (this._listeners = {});
                  var n = this._listeners;
                  void 0 === n[e] && (n[e] = []),
                    -1 === n[e].indexOf(t) && n[e].push(t);
                }
              },
              {
                key: "hasEventListener",
                value: function (e, t) {
                  if (void 0 === this._listeners) return !1;
                  var n = this._listeners;
                  return void 0 !== n[e] && -1 !== n[e].indexOf(t);
                }
              },
              {
                key: "removeEventListener",
                value: function (e, t) {
                  if (void 0 !== this._listeners) {
                    var n = this._listeners[e];
                    if (void 0 !== n) {
                      var r = n.indexOf(t);
                      -1 !== r && n.splice(r, 1);
                    }
                  }
                }
              },
              {
                key: "dispatchEvent",
                value: function (e) {
                  if (void 0 !== this._listeners) {
                    var t = this._listeners[e.type];
                    if (void 0 !== t) {
                      e.target = this;
                      for (var n = t.slice(0), r = 0, i = n.length; r < i; r++)
                        n[r].call(this, e);
                      e.target = null;
                    }
                  }
                }
              }
            ]),
            e
          );
        })(),
        ms = [
          "00",
          "01",
          "02",
          "03",
          "04",
          "05",
          "06",
          "07",
          "08",
          "09",
          "0a",
          "0b",
          "0c",
          "0d",
          "0e",
          "0f",
          "10",
          "11",
          "12",
          "13",
          "14",
          "15",
          "16",
          "17",
          "18",
          "19",
          "1a",
          "1b",
          "1c",
          "1d",
          "1e",
          "1f",
          "20",
          "21",
          "22",
          "23",
          "24",
          "25",
          "26",
          "27",
          "28",
          "29",
          "2a",
          "2b",
          "2c",
          "2d",
          "2e",
          "2f",
          "30",
          "31",
          "32",
          "33",
          "34",
          "35",
          "36",
          "37",
          "38",
          "39",
          "3a",
          "3b",
          "3c",
          "3d",
          "3e",
          "3f",
          "40",
          "41",
          "42",
          "43",
          "44",
          "45",
          "46",
          "47",
          "48",
          "49",
          "4a",
          "4b",
          "4c",
          "4d",
          "4e",
          "4f",
          "50",
          "51",
          "52",
          "53",
          "54",
          "55",
          "56",
          "57",
          "58",
          "59",
          "5a",
          "5b",
          "5c",
          "5d",
          "5e",
          "5f",
          "60",
          "61",
          "62",
          "63",
          "64",
          "65",
          "66",
          "67",
          "68",
          "69",
          "6a",
          "6b",
          "6c",
          "6d",
          "6e",
          "6f",
          "70",
          "71",
          "72",
          "73",
          "74",
          "75",
          "76",
          "77",
          "78",
          "79",
          "7a",
          "7b",
          "7c",
          "7d",
          "7e",
          "7f",
          "80",
          "81",
          "82",
          "83",
          "84",
          "85",
          "86",
          "87",
          "88",
          "89",
          "8a",
          "8b",
          "8c",
          "8d",
          "8e",
          "8f",
          "90",
          "91",
          "92",
          "93",
          "94",
          "95",
          "96",
          "97",
          "98",
          "99",
          "9a",
          "9b",
          "9c",
          "9d",
          "9e",
          "9f",
          "a0",
          "a1",
          "a2",
          "a3",
          "a4",
          "a5",
          "a6",
          "a7",
          "a8",
          "a9",
          "aa",
          "ab",
          "ac",
          "ad",
          "ae",
          "af",
          "b0",
          "b1",
          "b2",
          "b3",
          "b4",
          "b5",
          "b6",
          "b7",
          "b8",
          "b9",
          "ba",
          "bb",
          "bc",
          "bd",
          "be",
          "bf",
          "c0",
          "c1",
          "c2",
          "c3",
          "c4",
          "c5",
          "c6",
          "c7",
          "c8",
          "c9",
          "ca",
          "cb",
          "cc",
          "cd",
          "ce",
          "cf",
          "d0",
          "d1",
          "d2",
          "d3",
          "d4",
          "d5",
          "d6",
          "d7",
          "d8",
          "d9",
          "da",
          "db",
          "dc",
          "dd",
          "de",
          "df",
          "e0",
          "e1",
          "e2",
          "e3",
          "e4",
          "e5",
          "e6",
          "e7",
          "e8",
          "e9",
          "ea",
          "eb",
          "ec",
          "ed",
          "ee",
          "ef",
          "f0",
          "f1",
          "f2",
          "f3",
          "f4",
          "f5",
          "f6",
          "f7",
          "f8",
          "f9",
          "fa",
          "fb",
          "fc",
          "fd",
          "fe",
          "ff"
        ],
        gs = Math.PI / 180,
        vs = 180 / Math.PI;
      function ys() {
        var e = (4294967295 * Math.random()) | 0,
          t = (4294967295 * Math.random()) | 0,
          n = (4294967295 * Math.random()) | 0,
          r = (4294967295 * Math.random()) | 0;
        return (
          ms[255 & e] +
          ms[(e >> 8) & 255] +
          ms[(e >> 16) & 255] +
          ms[(e >> 24) & 255] +
          "-" +
          ms[255 & t] +
          ms[(t >> 8) & 255] +
          "-" +
          ms[((t >> 16) & 15) | 64] +
          ms[(t >> 24) & 255] +
          "-" +
          ms[(63 & n) | 128] +
          ms[(n >> 8) & 255] +
          "-" +
          ms[(n >> 16) & 255] +
          ms[(n >> 24) & 255] +
          ms[255 & r] +
          ms[(r >> 8) & 255] +
          ms[(r >> 16) & 255] +
          ms[(r >> 24) & 255]
        ).toLowerCase();
      }
      function _s(e, t, n) {
        return Math.max(t, Math.min(n, e));
      }
      function bs(e, t) {
        return ((e % t) + t) % t;
      }
      function xs(e, t, n) {
        return (1 - n) * e + n * t;
      }
      function Ss(e) {
        return 0 == (e & (e - 1)) && 0 !== e;
      }
      function Es(e) {
        return Math.pow(2, Math.floor(Math.log(e) / Math.LN2));
      }
      function ws(e, t) {
        switch (t.constructor) {
          case Float32Array:
            return e;
          case Uint32Array:
            return e / 4294967295;
          case Uint16Array:
            return e / 65535;
          case Uint8Array:
            return e / 255;
          case Int32Array:
            return Math.max(e / 2147483647, -1);
          case Int16Array:
            return Math.max(e / 32767, -1);
          case Int8Array:
            return Math.max(e / 127, -1);
          default:
            throw new Error("Invalid component type.");
        }
      }
      function Ts(e, t) {
        switch (t.constructor) {
          case Float32Array:
            return e;
          case Uint32Array:
            return Math.round(4294967295 * e);
          case Uint16Array:
            return Math.round(65535 * e);
          case Uint8Array:
            return Math.round(255 * e);
          case Int32Array:
            return Math.round(2147483647 * e);
          case Int16Array:
            return Math.round(32767 * e);
          case Int8Array:
            return Math.round(127 * e);
          default:
            throw new Error("Invalid component type.");
        }
      }
      var Ms = gs,
        As = function (e) {
          return e * vs;
        },
        Cs = (function (e) {
          function t() {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0,
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0;
            Fi(this, t), (t.prototype.isVector2 = !0), (this.x = e), (this.y = n);
          }
          return (
            Ni(t, [
              {
                key: "width",
                get: function () {
                  return this.x;
                },
                set: function (e) {
                  this.x = e;
                }
              },
              {
                key: "height",
                get: function () {
                  return this.y;
                },
                set: function (e) {
                  this.y = e;
                }
              },
              {
                key: "set",
                value: function (e, t) {
                  return (this.x = e), (this.y = t), this;
                }
              },
              {
                key: "setScalar",
                value: function (e) {
                  return (this.x = e), (this.y = e), this;
                }
              },
              {
                key: "setX",
                value: function (e) {
                  return (this.x = e), this;
                }
              },
              {
                key: "setY",
                value: function (e) {
                  return (this.y = e), this;
                }
              },
              {
                key: "setComponent",
                value: function (e, t) {
                  switch (e) {
                    case 0:
                      this.x = t;
                      break;
                    case 1:
                      this.y = t;
                      break;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                  return this;
                }
              },
              {
                key: "getComponent",
                value: function (e) {
                  switch (e) {
                    case 0:
                      return this.x;
                    case 1:
                      return this.y;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.x, this.y);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (this.x = e.x), (this.y = e.y), this;
                }
              },
              {
                key: "add",
                value: function (e) {
                  return (this.x += e.x), (this.y += e.y), this;
                }
              },
              {
                key: "addScalar",
                value: function (e) {
                  return (this.x += e), (this.y += e), this;
                }
              },
              {
                key: "addVectors",
                value: function (e, t) {
                  return (this.x = e.x + t.x), (this.y = e.y + t.y), this;
                }
              },
              {
                key: "addScaledVector",
                value: function (e, t) {
                  return (this.x += e.x * t), (this.y += e.y * t), this;
                }
              },
              {
                key: "sub",
                value: function (e) {
                  return (this.x -= e.x), (this.y -= e.y), this;
                }
              },
              {
                key: "subScalar",
                value: function (e) {
                  return (this.x -= e), (this.y -= e), this;
                }
              },
              {
                key: "subVectors",
                value: function (e, t) {
                  return (this.x = e.x - t.x), (this.y = e.y - t.y), this;
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return (this.x *= e.x), (this.y *= e.y), this;
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  return (this.x *= e), (this.y *= e), this;
                }
              },
              {
                key: "divide",
                value: function (e) {
                  return (this.x /= e.x), (this.y /= e.y), this;
                }
              },
              {
                key: "divideScalar",
                value: function (e) {
                  return this.multiplyScalar(1 / e);
                }
              },
              {
                key: "applyMatrix3",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    r = e.elements;
                  return (
                    (this.x = r[0] * t + r[3] * n + r[6]),
                    (this.y = r[1] * t + r[4] * n + r[7]),
                    this
                  );
                }
              },
              {
                key: "min",
                value: function (e) {
                  return (
                    (this.x = Math.min(this.x, e.x)),
                    (this.y = Math.min(this.y, e.y)),
                    this
                  );
                }
              },
              {
                key: "max",
                value: function (e) {
                  return (
                    (this.x = Math.max(this.x, e.x)),
                    (this.y = Math.max(this.y, e.y)),
                    this
                  );
                }
              },
              {
                key: "clamp",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                    (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                    this
                  );
                }
              },
              {
                key: "clampScalar",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e, Math.min(t, this.x))),
                    (this.y = Math.max(e, Math.min(t, this.y))),
                    this
                  );
                }
              },
              {
                key: "clampLength",
                value: function (e, t) {
                  var n = this.length();
                  return this.divideScalar(n || 1).multiplyScalar(
                    Math.max(e, Math.min(t, n))
                  );
                }
              },
              {
                key: "floor",
                value: function () {
                  return (
                    (this.x = Math.floor(this.x)),
                    (this.y = Math.floor(this.y)),
                    this
                  );
                }
              },
              {
                key: "ceil",
                value: function () {
                  return (
                    (this.x = Math.ceil(this.x)),
                    (this.y = Math.ceil(this.y)),
                    this
                  );
                }
              },
              {
                key: "round",
                value: function () {
                  return (
                    (this.x = Math.round(this.x)),
                    (this.y = Math.round(this.y)),
                    this
                  );
                }
              },
              {
                key: "roundToZero",
                value: function () {
                  return (
                    (this.x = Math.trunc(this.x)),
                    (this.y = Math.trunc(this.y)),
                    this
                  );
                }
              },
              {
                key: "negate",
                value: function () {
                  return (this.x = -this.x), (this.y = -this.y), this;
                }
              },
              {
                key: "dot",
                value: function (e) {
                  return this.x * e.x + this.y * e.y;
                }
              },
              {
                key: "cross",
                value: function (e) {
                  return this.x * e.y - this.y * e.x;
                }
              },
              {
                key: "lengthSq",
                value: function () {
                  return this.x * this.x + this.y * this.y;
                }
              },
              {
                key: "length",
                value: function () {
                  return Math.sqrt(this.x * this.x + this.y * this.y);
                }
              },
              {
                key: "manhattanLength",
                value: function () {
                  return Math.abs(this.x) + Math.abs(this.y);
                }
              },
              {
                key: "normalize",
                value: function () {
                  return this.divideScalar(this.length() || 1);
                }
              },
              {
                key: "angle",
                value: function () {
                  return Math.atan2(-this.y, -this.x) + Math.PI;
                }
              },
              {
                key: "angleTo",
                value: function (e) {
                  var t = Math.sqrt(this.lengthSq() * e.lengthSq());
                  if (0 === t) return Math.PI / 2;
                  var n = this.dot(e) / t;
                  return Math.acos(_s(n, -1, 1));
                }
              },
              {
                key: "distanceTo",
                value: function (e) {
                  return Math.sqrt(this.distanceToSquared(e));
                }
              },
              {
                key: "distanceToSquared",
                value: function (e) {
                  var t = this.x - e.x,
                    n = this.y - e.y;
                  return t * t + n * n;
                }
              },
              {
                key: "manhattanDistanceTo",
                value: function (e) {
                  return Math.abs(this.x - e.x) + Math.abs(this.y - e.y);
                }
              },
              {
                key: "setLength",
                value: function (e) {
                  return this.normalize().multiplyScalar(e);
                }
              },
              {
                key: "lerp",
                value: function (e, t) {
                  return (
                    (this.x += (e.x - this.x) * t),
                    (this.y += (e.y - this.y) * t),
                    this
                  );
                }
              },
              {
                key: "lerpVectors",
                value: function (e, t, n) {
                  return (
                    (this.x = e.x + (t.x - e.x) * n),
                    (this.y = e.y + (t.y - e.y) * n),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.x === this.x && e.y === this.y;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (this.x = e[t]), (this.y = e[t + 1]), this;
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (e[t] = this.x), (e[t + 1] = this.y), e;
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (this.x = e.getX(t)), (this.y = e.getY(t)), this;
                }
              },
              {
                key: "rotateAround",
                value: function (e, t) {
                  var n = Math.cos(t),
                    r = Math.sin(t),
                    i = this.x - e.x,
                    a = this.y - e.y;
                  return (
                    (this.x = i * n - a * r + e.x),
                    (this.y = i * r + a * n + e.y),
                    this
                  );
                }
              },
              {
                key: "random",
                value: function () {
                  return (this.x = Math.random()), (this.y = Math.random()), this;
                }
              },
              {
                key: Symbol.iterator,
                value: Ii().mark(function e() {
                  return Ii().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this.x;
                          case 2:
                            return (e.next = 4), this.y;
                          case 4:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]),
            t
          );
        })(),
        Ps = (function () {
          function e(t, n, r, i, a, s, o, l, h) {
            Fi(this, e),
              (e.prototype.isMatrix3 = !0),
              (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
              void 0 !== t && this.set(t, n, r, i, a, s, o, l, h);
          }
          return (
            Ni(e, [
              {
                key: "set",
                value: function (e, t, n, r, i, a, s, o, l) {
                  var h = this.elements;
                  return (
                    (h[0] = e),
                    (h[1] = r),
                    (h[2] = s),
                    (h[3] = t),
                    (h[4] = i),
                    (h[5] = o),
                    (h[6] = n),
                    (h[7] = a),
                    (h[8] = l),
                    this
                  );
                }
              },
              {
                key: "identity",
                value: function () {
                  return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  var t = this.elements,
                    n = e.elements;
                  return (
                    (t[0] = n[0]),
                    (t[1] = n[1]),
                    (t[2] = n[2]),
                    (t[3] = n[3]),
                    (t[4] = n[4]),
                    (t[5] = n[5]),
                    (t[6] = n[6]),
                    (t[7] = n[7]),
                    (t[8] = n[8]),
                    this
                  );
                }
              },
              {
                key: "extractBasis",
                value: function (e, t, n) {
                  return (
                    e.setFromMatrix3Column(this, 0),
                    t.setFromMatrix3Column(this, 1),
                    n.setFromMatrix3Column(this, 2),
                    this
                  );
                }
              },
              {
                key: "setFromMatrix4",
                value: function (e) {
                  var t = e.elements;
                  return (
                    this.set(
                      t[0],
                      t[4],
                      t[8],
                      t[1],
                      t[5],
                      t[9],
                      t[2],
                      t[6],
                      t[10]
                    ),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return this.multiplyMatrices(this, e);
                }
              },
              {
                key: "premultiply",
                value: function (e) {
                  return this.multiplyMatrices(e, this);
                }
              },
              {
                key: "multiplyMatrices",
                value: function (e, t) {
                  var n = e.elements,
                    r = t.elements,
                    i = this.elements,
                    a = n[0],
                    s = n[3],
                    o = n[6],
                    l = n[1],
                    h = n[4],
                    u = n[7],
                    c = n[2],
                    d = n[5],
                    f = n[8],
                    p = r[0],
                    m = r[3],
                    g = r[6],
                    v = r[1],
                    y = r[4],
                    _ = r[7],
                    b = r[2],
                    x = r[5],
                    S = r[8];
                  return (
                    (i[0] = a * p + s * v + o * b),
                    (i[3] = a * m + s * y + o * x),
                    (i[6] = a * g + s * _ + o * S),
                    (i[1] = l * p + h * v + u * b),
                    (i[4] = l * m + h * y + u * x),
                    (i[7] = l * g + h * _ + u * S),
                    (i[2] = c * p + d * v + f * b),
                    (i[5] = c * m + d * y + f * x),
                    (i[8] = c * g + d * _ + f * S),
                    this
                  );
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  var t = this.elements;
                  return (
                    (t[0] *= e),
                    (t[3] *= e),
                    (t[6] *= e),
                    (t[1] *= e),
                    (t[4] *= e),
                    (t[7] *= e),
                    (t[2] *= e),
                    (t[5] *= e),
                    (t[8] *= e),
                    this
                  );
                }
              },
              {
                key: "determinant",
                value: function () {
                  var e = this.elements,
                    t = e[0],
                    n = e[1],
                    r = e[2],
                    i = e[3],
                    a = e[4],
                    s = e[5],
                    o = e[6],
                    l = e[7],
                    h = e[8];
                  return (
                    t * a * h -
                    t * s * l -
                    n * i * h +
                    n * s * o +
                    r * i * l -
                    r * a * o
                  );
                }
              },
              {
                key: "invert",
                value: function () {
                  var e = this.elements,
                    t = e[0],
                    n = e[1],
                    r = e[2],
                    i = e[3],
                    a = e[4],
                    s = e[5],
                    o = e[6],
                    l = e[7],
                    h = e[8],
                    u = h * a - s * l,
                    c = s * o - h * i,
                    d = l * i - a * o,
                    f = t * u + n * c + r * d;
                  if (0 === f) return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
                  var p = 1 / f;
                  return (
                    (e[0] = u * p),
                    (e[1] = (r * l - h * n) * p),
                    (e[2] = (s * n - r * a) * p),
                    (e[3] = c * p),
                    (e[4] = (h * t - r * o) * p),
                    (e[5] = (r * i - s * t) * p),
                    (e[6] = d * p),
                    (e[7] = (n * o - l * t) * p),
                    (e[8] = (a * t - n * i) * p),
                    this
                  );
                }
              },
              {
                key: "transpose",
                value: function () {
                  var e,
                    t = this.elements;
                  return (
                    (e = t[1]),
                    (t[1] = t[3]),
                    (t[3] = e),
                    (e = t[2]),
                    (t[2] = t[6]),
                    (t[6] = e),
                    (e = t[5]),
                    (t[5] = t[7]),
                    (t[7] = e),
                    this
                  );
                }
              },
              {
                key: "getNormalMatrix",
                value: function (e) {
                  return this.setFromMatrix4(e).invert().transpose();
                }
              },
              {
                key: "transposeIntoArray",
                value: function (e) {
                  var t = this.elements;
                  return (
                    (e[0] = t[0]),
                    (e[1] = t[3]),
                    (e[2] = t[6]),
                    (e[3] = t[1]),
                    (e[4] = t[4]),
                    (e[5] = t[7]),
                    (e[6] = t[2]),
                    (e[7] = t[5]),
                    (e[8] = t[8]),
                    this
                  );
                }
              },
              {
                key: "setUvTransform",
                value: function (e, t, n, r, i, a, s) {
                  var o = Math.cos(i),
                    l = Math.sin(i);
                  return (
                    this.set(
                      n * o,
                      n * l,
                      -n * (o * a + l * s) + a + e,
                      -r * l,
                      r * o,
                      -r * (-l * a + o * s) + s + t,
                      0,
                      0,
                      1
                    ),
                    this
                  );
                }
              },
              {
                key: "scale",
                value: function (e, t) {
                  return this.premultiply(ks.makeScale(e, t)), this;
                }
              },
              {
                key: "rotate",
                value: function (e) {
                  return this.premultiply(ks.makeRotation(-e)), this;
                }
              },
              {
                key: "translate",
                value: function (e, t) {
                  return this.premultiply(ks.makeTranslation(e, t)), this;
                }
              },
              {
                key: "makeTranslation",
                value: function (e, t) {
                  return (
                    e.isVector2
                      ? this.set(1, 0, e.x, 0, 1, e.y, 0, 0, 1)
                      : this.set(1, 0, e, 0, 1, t, 0, 0, 1),
                    this
                  );
                }
              },
              {
                key: "makeRotation",
                value: function (e) {
                  var t = Math.cos(e),
                    n = Math.sin(e);
                  return this.set(t, -n, 0, n, t, 0, 0, 0, 1), this;
                }
              },
              {
                key: "makeScale",
                value: function (e, t) {
                  return this.set(e, 0, 0, 0, t, 0, 0, 0, 1), this;
                }
              },
              {
                key: "equals",
                value: function (e) {
                  for (var t = this.elements, n = e.elements, r = 0; r < 9; r++)
                    if (t[r] !== n[r]) return !1;
                  return !0;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  for (
                    var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 0,
                      n = 0;
                    n < 9;
                    n++
                  )
                    this.elements[n] = e[n + t];
                  return this;
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n = this.elements;
                  return (
                    (e[t] = n[0]),
                    (e[t + 1] = n[1]),
                    (e[t + 2] = n[2]),
                    (e[t + 3] = n[3]),
                    (e[t + 4] = n[4]),
                    (e[t + 5] = n[5]),
                    (e[t + 6] = n[6]),
                    (e[t + 7] = n[7]),
                    (e[t + 8] = n[8]),
                    e
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().fromArray(this.elements);
                }
              }
            ]),
            e
          );
        })(),
        ks = new Ps();
      function Rs(e) {
        for (var t = e.length - 1; t >= 0; --t) if (e[t] >= 65535) return !0;
        return !1;
      }
      function Ds(e) {
        return document.createElementNS("http://www.w3.org/1999/xhtml", e);
      }
      function Is() {
        var e = Ds("canvas");
        return (e.style.display = "block"), e;
      }
      Int8Array,
        Uint8Array,
        Uint8ClampedArray,
        Int16Array,
        Uint16Array,
        Int32Array,
        Uint32Array,
        Float32Array,
        Float64Array;
      var Ls = {};
      function Fs(e) {
        e in Ls || ((Ls[e] = !0), console.warn(e));
      }
      var Os,
        Ns = new Ps().set(
          0.8224621,
          0.177538,
          0,
          0.0331941,
          0.9668058,
          0,
          0.0170827,
          0.0723974,
          0.9105199
        ),
        Bs = new Ps().set(
          1.2249401,
          -0.2249404,
          0,
          -0.0420569,
          1.0420571,
          0,
          -0.0196376,
          -0.0786361,
          1.0982735
        ),
        Us = Di(
          Di(
            Di(
              Di({}, ts, {
                transfer: is,
                primaries: ss,
                toReference: function (e) {
                  return e;
                },
                fromReference: function (e) {
                  return e;
                }
              }),
              es,
              {
                transfer: as,
                primaries: ss,
                toReference: function (e) {
                  return e.convertSRGBToLinear();
                },
                fromReference: function (e) {
                  return e.convertLinearToSRGB();
                }
              }
            ),
            rs,
            {
              transfer: is,
              primaries: os,
              toReference: function (e) {
                return e.applyMatrix3(Bs);
              },
              fromReference: function (e) {
                return e.applyMatrix3(Ns);
              }
            }
          ),
          ns,
          {
            transfer: as,
            primaries: os,
            toReference: function (e) {
              return e.convertSRGBToLinear().applyMatrix3(Bs);
            },
            fromReference: function (e) {
              return e.applyMatrix3(Ns).convertLinearToSRGB();
            }
          }
        ),
        zs = new Set([ts, rs]),
        Vs = {
          enabled: !0,
          _workingColorSpace: ts,
          get workingColorSpace() {
            return this._workingColorSpace;
          },
          set workingColorSpace(e) {
            if (!zs.has(e))
              throw new Error(
                'Unsupported working color space, "'.concat(e, '".')
              );
            this._workingColorSpace = e;
          },
          convert: function (e, t, n) {
            if (!1 === this.enabled || t === n || !t || !n) return e;
            var r = Us[t].toReference;
            return (0, Us[n].fromReference)(r(e));
          },
          fromWorkingColorSpace: function (e, t) {
            return this.convert(e, this._workingColorSpace, t);
          },
          toWorkingColorSpace: function (e, t) {
            return this.convert(e, t, this._workingColorSpace);
          },
          getPrimaries: function (e) {
            return Us[e].primaries;
          },
          getTransfer: function (e) {
            return e === Qa ? is : Us[e].transfer;
          }
        };
      function Hs(e) {
        return e < 0.04045
          ? 0.0773993808 * e
          : Math.pow(0.9478672986 * e + 0.0521327014, 2.4);
      }
      function Gs(e) {
        return e < 0.0031308 ? 12.92 * e : 1.055 * Math.pow(e, 0.41666) - 0.055;
      }
      var Ws = (function () {
          function e() {
            Fi(this, e);
          }
          return (
            Ni(e, null, [
              {
                key: "getDataURL",
                value: function (e) {
                  if (/^data:/i.test(e.src)) return e.src;
                  if ("undefined" == typeof HTMLCanvasElement) return e.src;
                  var t;
                  if (e instanceof HTMLCanvasElement) t = e;
                  else {
                    void 0 === Os && (Os = Ds("canvas")),
                      (Os.width = e.width),
                      (Os.height = e.height);
                    var n = Os.getContext("2d");
                    e instanceof ImageData
                      ? n.putImageData(e, 0, 0)
                      : n.drawImage(e, 0, 0, e.width, e.height),
                      (t = Os);
                  }
                  return t.width > 2048 || t.height > 2048
                    ? (console.warn(
                        "THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",
                        e
                      ),
                      t.toDataURL("image/jpeg", 0.6))
                    : t.toDataURL("image/png");
                }
              },
              {
                key: "sRGBToLinear",
                value: function (e) {
                  if (
                    ("undefined" != typeof HTMLImageElement &&
                      e instanceof HTMLImageElement) ||
                    ("undefined" != typeof HTMLCanvasElement &&
                      e instanceof HTMLCanvasElement) ||
                    ("undefined" != typeof ImageBitmap &&
                      e instanceof ImageBitmap)
                  ) {
                    var t = Ds("canvas");
                    (t.width = e.width), (t.height = e.height);
                    var n = t.getContext("2d");
                    n.drawImage(e, 0, 0, e.width, e.height);
                    for (
                      var r = n.getImageData(0, 0, e.width, e.height),
                        i = r.data,
                        a = 0;
                      a < i.length;
                      a++
                    )
                      i[a] = 255 * Hs(i[a] / 255);
                    return n.putImageData(r, 0, 0), t;
                  }
                  if (e.data) {
                    for (var s = e.data.slice(0), o = 0; o < s.length; o++)
                      s instanceof Uint8Array || s instanceof Uint8ClampedArray
                        ? (s[o] = Math.floor(255 * Hs(s[o] / 255)))
                        : (s[o] = Hs(s[o]));
                    return { data: s, width: e.width, height: e.height };
                  }
                  return (
                    console.warn(
                      "THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."
                    ),
                    e
                  );
                }
              }
            ]),
            e
          );
        })(),
        js = 0,
        Xs = (function () {
          function e() {
            var t =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : null;
            Fi(this, e),
              (this.isSource = !0),
              Object.defineProperty(this, "id", { value: js++ }),
              (this.uuid = ys()),
              (this.data = t),
              (this.version = 0);
          }
          return (
            Ni(e, [
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && this.version++;
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var t = void 0 === e || "string" == typeof e;
                  if (!t && void 0 !== e.images[this.uuid])
                    return e.images[this.uuid];
                  var n = { uuid: this.uuid, url: "" },
                    r = this.data;
                  if (null !== r) {
                    var i;
                    if (Array.isArray(r)) {
                      i = [];
                      for (var a = 0, s = r.length; a < s; a++)
                        r[a].isDataTexture
                          ? i.push(qs(r[a].image))
                          : i.push(qs(r[a]));
                    } else i = qs(r);
                    n.url = i;
                  }
                  return t || (e.images[this.uuid] = n), n;
                }
              }
            ]),
            e
          );
        })();
      function qs(e) {
        return ("undefined" != typeof HTMLImageElement &&
          e instanceof HTMLImageElement) ||
          ("undefined" != typeof HTMLCanvasElement &&
            e instanceof HTMLCanvasElement) ||
          ("undefined" != typeof ImageBitmap && e instanceof ImageBitmap)
          ? Ws.getDataURL(e)
          : e.data
          ? {
              data: Array.from(e.data),
              width: e.width,
              height: e.height,
              type: e.data.constructor.name
            }
          : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
      }
      var Ys = 0,
        Ks = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : t.DEFAULT_IMAGE,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : t.DEFAULT_MAPPING,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : Xi,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : Xi,
              s =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : Ji,
              o =
                arguments.length > 5 && void 0 !== arguments[5]
                  ? arguments[5]
                  : $i,
              l =
                arguments.length > 6 && void 0 !== arguments[6]
                  ? arguments[6]
                  : la,
              h =
                arguments.length > 7 && void 0 !== arguments[7]
                  ? arguments[7]
                  : Qi,
              u =
                arguments.length > 8 && void 0 !== arguments[8]
                  ? arguments[8]
                  : t.DEFAULT_ANISOTROPY,
              c =
                arguments.length > 9 && void 0 !== arguments[9]
                  ? arguments[9]
                  : Qa;
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isTexture = !0),
              Object.defineProperty(Pi(e), "id", { value: Ys++ }),
              (e.uuid = ys()),
              (e.name = ""),
              (e.source = new Xs(n)),
              (e.mipmaps = []),
              (e.mapping = r),
              (e.channel = 0),
              (e.wrapS = i),
              (e.wrapT = a),
              (e.magFilter = s),
              (e.minFilter = o),
              (e.anisotropy = u),
              (e.format = l),
              (e.internalFormat = null),
              (e.type = h),
              (e.offset = new Cs(0, 0)),
              (e.repeat = new Cs(1, 1)),
              (e.center = new Cs(0, 0)),
              (e.rotation = 0),
              (e.matrixAutoUpdate = !0),
              (e.matrix = new Ps()),
              (e.generateMipmaps = !0),
              (e.premultiplyAlpha = !1),
              (e.flipY = !0),
              (e.unpackAlignment = 4),
              "string" == typeof c
                ? (e.colorSpace = c)
                : (Fs(
                    "THREE.Texture: Property .encoding has been replaced by .colorSpace."
                  ),
                  (e.colorSpace = c === $a ? es : Qa)),
              (e.userData = {}),
              (e.version = 0),
              (e.onUpdate = null),
              (e.isRenderTargetTexture = !1),
              (e.needsPMREMUpdate = !1),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "image",
                get: function () {
                  return this.source.data;
                },
                set: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : null;
                  this.source.data = e;
                }
              },
              {
                key: "updateMatrix",
                value: function () {
                  this.matrix.setUvTransform(
                    this.offset.x,
                    this.offset.y,
                    this.repeat.x,
                    this.repeat.y,
                    this.rotation,
                    this.center.x,
                    this.center.y
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.name = e.name),
                    (this.source = e.source),
                    (this.mipmaps = e.mipmaps.slice(0)),
                    (this.mapping = e.mapping),
                    (this.channel = e.channel),
                    (this.wrapS = e.wrapS),
                    (this.wrapT = e.wrapT),
                    (this.magFilter = e.magFilter),
                    (this.minFilter = e.minFilter),
                    (this.anisotropy = e.anisotropy),
                    (this.format = e.format),
                    (this.internalFormat = e.internalFormat),
                    (this.type = e.type),
                    this.offset.copy(e.offset),
                    this.repeat.copy(e.repeat),
                    this.center.copy(e.center),
                    (this.rotation = e.rotation),
                    (this.matrixAutoUpdate = e.matrixAutoUpdate),
                    this.matrix.copy(e.matrix),
                    (this.generateMipmaps = e.generateMipmaps),
                    (this.premultiplyAlpha = e.premultiplyAlpha),
                    (this.flipY = e.flipY),
                    (this.unpackAlignment = e.unpackAlignment),
                    (this.colorSpace = e.colorSpace),
                    (this.userData = JSON.parse(JSON.stringify(e.userData))),
                    (this.needsUpdate = !0),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var t = void 0 === e || "string" == typeof e;
                  if (!t && void 0 !== e.textures[this.uuid])
                    return e.textures[this.uuid];
                  var n = {
                    metadata: {
                      version: 4.6,
                      type: "Texture",
                      generator: "Texture.toJSON"
                    },
                    uuid: this.uuid,
                    name: this.name,
                    image: this.source.toJSON(e).uuid,
                    mapping: this.mapping,
                    channel: this.channel,
                    repeat: [this.repeat.x, this.repeat.y],
                    offset: [this.offset.x, this.offset.y],
                    center: [this.center.x, this.center.y],
                    rotation: this.rotation,
                    wrap: [this.wrapS, this.wrapT],
                    format: this.format,
                    internalFormat: this.internalFormat,
                    type: this.type,
                    colorSpace: this.colorSpace,
                    minFilter: this.minFilter,
                    magFilter: this.magFilter,
                    anisotropy: this.anisotropy,
                    flipY: this.flipY,
                    generateMipmaps: this.generateMipmaps,
                    premultiplyAlpha: this.premultiplyAlpha,
                    unpackAlignment: this.unpackAlignment
                  };
                  return (
                    Object.keys(this.userData).length > 0 &&
                      (n.userData = this.userData),
                    t || (e.textures[this.uuid] = n),
                    n
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              },
              {
                key: "transformUv",
                value: function (e) {
                  if (300 !== this.mapping) return e;
                  if ((e.applyMatrix3(this.matrix), e.x < 0 || e.x > 1))
                    switch (this.wrapS) {
                      case ji:
                        e.x = e.x - Math.floor(e.x);
                        break;
                      case Xi:
                        e.x = e.x < 0 ? 0 : 1;
                        break;
                      case qi:
                        1 === Math.abs(Math.floor(e.x) % 2)
                          ? (e.x = Math.ceil(e.x) - e.x)
                          : (e.x = e.x - Math.floor(e.x));
                    }
                  if (e.y < 0 || e.y > 1)
                    switch (this.wrapT) {
                      case ji:
                        e.y = e.y - Math.floor(e.y);
                        break;
                      case Xi:
                        e.y = e.y < 0 ? 0 : 1;
                        break;
                      case qi:
                        1 === Math.abs(Math.floor(e.y) % 2)
                          ? (e.y = Math.ceil(e.y) - e.y)
                          : (e.y = e.y - Math.floor(e.y));
                    }
                  return this.flipY && (e.y = 1 - e.y), e;
                }
              },
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && (this.version++, (this.source.needsUpdate = !0));
                }
              },
              {
                key: "encoding",
                get: function () {
                  return (
                    Fs(
                      "THREE.Texture: Property .encoding has been replaced by .colorSpace."
                    ),
                    this.colorSpace === es ? $a : 3e3
                  );
                },
                set: function (e) {
                  Fs(
                    "THREE.Texture: Property .encoding has been replaced by .colorSpace."
                  ),
                    (this.colorSpace = e === $a ? es : Qa);
                }
              }
            ]),
            t
          );
        })(ps);
      (Ks.DEFAULT_IMAGE = null),
        (Ks.DEFAULT_MAPPING = 300),
        (Ks.DEFAULT_ANISOTROPY = 1);
      var Zs = (function (e) {
          function t() {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0,
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0,
              i =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            Fi(this, t),
              (t.prototype.isVector4 = !0),
              (this.x = e),
              (this.y = n),
              (this.z = r),
              (this.w = i);
          }
          return (
            Ni(t, [
              {
                key: "width",
                get: function () {
                  return this.z;
                },
                set: function (e) {
                  this.z = e;
                }
              },
              {
                key: "height",
                get: function () {
                  return this.w;
                },
                set: function (e) {
                  this.w = e;
                }
              },
              {
                key: "set",
                value: function (e, t, n, r) {
                  return (
                    (this.x = e), (this.y = t), (this.z = n), (this.w = r), this
                  );
                }
              },
              {
                key: "setScalar",
                value: function (e) {
                  return (
                    (this.x = e), (this.y = e), (this.z = e), (this.w = e), this
                  );
                }
              },
              {
                key: "setX",
                value: function (e) {
                  return (this.x = e), this;
                }
              },
              {
                key: "setY",
                value: function (e) {
                  return (this.y = e), this;
                }
              },
              {
                key: "setZ",
                value: function (e) {
                  return (this.z = e), this;
                }
              },
              {
                key: "setW",
                value: function (e) {
                  return (this.w = e), this;
                }
              },
              {
                key: "setComponent",
                value: function (e, t) {
                  switch (e) {
                    case 0:
                      this.x = t;
                      break;
                    case 1:
                      this.y = t;
                      break;
                    case 2:
                      this.z = t;
                      break;
                    case 3:
                      this.w = t;
                      break;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                  return this;
                }
              },
              {
                key: "getComponent",
                value: function (e) {
                  switch (e) {
                    case 0:
                      return this.x;
                    case 1:
                      return this.y;
                    case 2:
                      return this.z;
                    case 3:
                      return this.w;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.x, this.y, this.z, this.w);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.x = e.x),
                    (this.y = e.y),
                    (this.z = e.z),
                    (this.w = void 0 !== e.w ? e.w : 1),
                    this
                  );
                }
              },
              {
                key: "add",
                value: function (e) {
                  return (
                    (this.x += e.x),
                    (this.y += e.y),
                    (this.z += e.z),
                    (this.w += e.w),
                    this
                  );
                }
              },
              {
                key: "addScalar",
                value: function (e) {
                  return (
                    (this.x += e),
                    (this.y += e),
                    (this.z += e),
                    (this.w += e),
                    this
                  );
                }
              },
              {
                key: "addVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x + t.x),
                    (this.y = e.y + t.y),
                    (this.z = e.z + t.z),
                    (this.w = e.w + t.w),
                    this
                  );
                }
              },
              {
                key: "addScaledVector",
                value: function (e, t) {
                  return (
                    (this.x += e.x * t),
                    (this.y += e.y * t),
                    (this.z += e.z * t),
                    (this.w += e.w * t),
                    this
                  );
                }
              },
              {
                key: "sub",
                value: function (e) {
                  return (
                    (this.x -= e.x),
                    (this.y -= e.y),
                    (this.z -= e.z),
                    (this.w -= e.w),
                    this
                  );
                }
              },
              {
                key: "subScalar",
                value: function (e) {
                  return (
                    (this.x -= e),
                    (this.y -= e),
                    (this.z -= e),
                    (this.w -= e),
                    this
                  );
                }
              },
              {
                key: "subVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x - t.x),
                    (this.y = e.y - t.y),
                    (this.z = e.z - t.z),
                    (this.w = e.w - t.w),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return (
                    (this.x *= e.x),
                    (this.y *= e.y),
                    (this.z *= e.z),
                    (this.w *= e.w),
                    this
                  );
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  return (
                    (this.x *= e),
                    (this.y *= e),
                    (this.z *= e),
                    (this.w *= e),
                    this
                  );
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    r = this.z,
                    i = this.w,
                    a = e.elements;
                  return (
                    (this.x = a[0] * t + a[4] * n + a[8] * r + a[12] * i),
                    (this.y = a[1] * t + a[5] * n + a[9] * r + a[13] * i),
                    (this.z = a[2] * t + a[6] * n + a[10] * r + a[14] * i),
                    (this.w = a[3] * t + a[7] * n + a[11] * r + a[15] * i),
                    this
                  );
                }
              },
              {
                key: "divideScalar",
                value: function (e) {
                  return this.multiplyScalar(1 / e);
                }
              },
              {
                key: "setAxisAngleFromQuaternion",
                value: function (e) {
                  this.w = 2 * Math.acos(e.w);
                  var t = Math.sqrt(1 - e.w * e.w);
                  return (
                    t < 1e-4
                      ? ((this.x = 1), (this.y = 0), (this.z = 0))
                      : ((this.x = e.x / t),
                        (this.y = e.y / t),
                        (this.z = e.z / t)),
                    this
                  );
                }
              },
              {
                key: "setAxisAngleFromRotationMatrix",
                value: function (e) {
                  var t,
                    n,
                    r,
                    i,
                    a = 0.01,
                    s = 0.1,
                    o = e.elements,
                    l = o[0],
                    h = o[4],
                    u = o[8],
                    c = o[1],
                    d = o[5],
                    f = o[9],
                    p = o[2],
                    m = o[6],
                    g = o[10];
                  if (
                    Math.abs(h - c) < a &&
                    Math.abs(u - p) < a &&
                    Math.abs(f - m) < a
                  ) {
                    if (
                      Math.abs(h + c) < s &&
                      Math.abs(u + p) < s &&
                      Math.abs(f + m) < s &&
                      Math.abs(l + d + g - 3) < s
                    )
                      return this.set(1, 0, 0, 0), this;
                    t = Math.PI;
                    var v = (l + 1) / 2,
                      y = (d + 1) / 2,
                      _ = (g + 1) / 2,
                      b = (h + c) / 4,
                      x = (u + p) / 4,
                      S = (f + m) / 4;
                    return (
                      v > y && v > _
                        ? v < a
                          ? ((n = 0), (r = 0.707106781), (i = 0.707106781))
                          : ((r = b / (n = Math.sqrt(v))), (i = x / n))
                        : y > _
                        ? y < a
                          ? ((n = 0.707106781), (r = 0), (i = 0.707106781))
                          : ((n = b / (r = Math.sqrt(y))), (i = S / r))
                        : _ < a
                        ? ((n = 0.707106781), (r = 0.707106781), (i = 0))
                        : ((n = x / (i = Math.sqrt(_))), (r = S / i)),
                      this.set(n, r, i, t),
                      this
                    );
                  }
                  var E = Math.sqrt(
                    (m - f) * (m - f) + (u - p) * (u - p) + (c - h) * (c - h)
                  );
                  return (
                    Math.abs(E) < 0.001 && (E = 1),
                    (this.x = (m - f) / E),
                    (this.y = (u - p) / E),
                    (this.z = (c - h) / E),
                    (this.w = Math.acos((l + d + g - 1) / 2)),
                    this
                  );
                }
              },
              {
                key: "min",
                value: function (e) {
                  return (
                    (this.x = Math.min(this.x, e.x)),
                    (this.y = Math.min(this.y, e.y)),
                    (this.z = Math.min(this.z, e.z)),
                    (this.w = Math.min(this.w, e.w)),
                    this
                  );
                }
              },
              {
                key: "max",
                value: function (e) {
                  return (
                    (this.x = Math.max(this.x, e.x)),
                    (this.y = Math.max(this.y, e.y)),
                    (this.z = Math.max(this.z, e.z)),
                    (this.w = Math.max(this.w, e.w)),
                    this
                  );
                }
              },
              {
                key: "clamp",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                    (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                    (this.z = Math.max(e.z, Math.min(t.z, this.z))),
                    (this.w = Math.max(e.w, Math.min(t.w, this.w))),
                    this
                  );
                }
              },
              {
                key: "clampScalar",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e, Math.min(t, this.x))),
                    (this.y = Math.max(e, Math.min(t, this.y))),
                    (this.z = Math.max(e, Math.min(t, this.z))),
                    (this.w = Math.max(e, Math.min(t, this.w))),
                    this
                  );
                }
              },
              {
                key: "clampLength",
                value: function (e, t) {
                  var n = this.length();
                  return this.divideScalar(n || 1).multiplyScalar(
                    Math.max(e, Math.min(t, n))
                  );
                }
              },
              {
                key: "floor",
                value: function () {
                  return (
                    (this.x = Math.floor(this.x)),
                    (this.y = Math.floor(this.y)),
                    (this.z = Math.floor(this.z)),
                    (this.w = Math.floor(this.w)),
                    this
                  );
                }
              },
              {
                key: "ceil",
                value: function () {
                  return (
                    (this.x = Math.ceil(this.x)),
                    (this.y = Math.ceil(this.y)),
                    (this.z = Math.ceil(this.z)),
                    (this.w = Math.ceil(this.w)),
                    this
                  );
                }
              },
              {
                key: "round",
                value: function () {
                  return (
                    (this.x = Math.round(this.x)),
                    (this.y = Math.round(this.y)),
                    (this.z = Math.round(this.z)),
                    (this.w = Math.round(this.w)),
                    this
                  );
                }
              },
              {
                key: "roundToZero",
                value: function () {
                  return (
                    (this.x = Math.trunc(this.x)),
                    (this.y = Math.trunc(this.y)),
                    (this.z = Math.trunc(this.z)),
                    (this.w = Math.trunc(this.w)),
                    this
                  );
                }
              },
              {
                key: "negate",
                value: function () {
                  return (
                    (this.x = -this.x),
                    (this.y = -this.y),
                    (this.z = -this.z),
                    (this.w = -this.w),
                    this
                  );
                }
              },
              {
                key: "dot",
                value: function (e) {
                  return (
                    this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
                  );
                }
              },
              {
                key: "lengthSq",
                value: function () {
                  return (
                    this.x * this.x +
                    this.y * this.y +
                    this.z * this.z +
                    this.w * this.w
                  );
                }
              },
              {
                key: "length",
                value: function () {
                  return Math.sqrt(
                    this.x * this.x +
                      this.y * this.y +
                      this.z * this.z +
                      this.w * this.w
                  );
                }
              },
              {
                key: "manhattanLength",
                value: function () {
                  return (
                    Math.abs(this.x) +
                    Math.abs(this.y) +
                    Math.abs(this.z) +
                    Math.abs(this.w)
                  );
                }
              },
              {
                key: "normalize",
                value: function () {
                  return this.divideScalar(this.length() || 1);
                }
              },
              {
                key: "setLength",
                value: function (e) {
                  return this.normalize().multiplyScalar(e);
                }
              },
              {
                key: "lerp",
                value: function (e, t) {
                  return (
                    (this.x += (e.x - this.x) * t),
                    (this.y += (e.y - this.y) * t),
                    (this.z += (e.z - this.z) * t),
                    (this.w += (e.w - this.w) * t),
                    this
                  );
                }
              },
              {
                key: "lerpVectors",
                value: function (e, t, n) {
                  return (
                    (this.x = e.x + (t.x - e.x) * n),
                    (this.y = e.y + (t.y - e.y) * n),
                    (this.z = e.z + (t.z - e.z) * n),
                    (this.w = e.w + (t.w - e.w) * n),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e.x === this.x &&
                    e.y === this.y &&
                    e.z === this.z &&
                    e.w === this.w
                  );
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (
                    (this.x = e[t]),
                    (this.y = e[t + 1]),
                    (this.z = e[t + 2]),
                    (this.w = e[t + 3]),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this.x),
                    (e[t + 1] = this.y),
                    (e[t + 2] = this.z),
                    (e[t + 3] = this.w),
                    e
                  );
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (
                    (this.x = e.getX(t)),
                    (this.y = e.getY(t)),
                    (this.z = e.getZ(t)),
                    (this.w = e.getW(t)),
                    this
                  );
                }
              },
              {
                key: "random",
                value: function () {
                  return (
                    (this.x = Math.random()),
                    (this.y = Math.random()),
                    (this.z = Math.random()),
                    (this.w = Math.random()),
                    this
                  );
                }
              },
              {
                key: Symbol.iterator,
                value: Ii().mark(function e() {
                  return Ii().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this.x;
                          case 2:
                            return (e.next = 4), this.y;
                          case 4:
                            return (e.next = 6), this.z;
                          case 6:
                            return (e.next = 8), this.w;
                          case 8:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]),
            t
          );
        })(),
        Js = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : {};
            return (
              Fi(this, t),
              ((e = Mi(this, t, [n, r, i])).isWebGLRenderTarget = !0),
              e
            );
          }
          return ki(t, e), Ni(t);
        })(
          (function (e) {
            function t() {
              var e,
                n =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : 1,
                r =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 1,
                i =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : {};
              Fi(this, t),
                ((e = Mi(this, t)).isRenderTarget = !0),
                (e.width = n),
                (e.height = r),
                (e.depth = 1),
                (e.scissor = new Zs(0, 0, n, r)),
                (e.scissorTest = !1),
                (e.viewport = new Zs(0, 0, n, r));
              var a = { width: n, height: r, depth: 1 };
              return (
                void 0 !== i.encoding &&
                  (Fs(
                    "THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."
                  ),
                  (i.colorSpace = i.encoding === $a ? es : Qa)),
                (i = Object.assign(
                  {
                    generateMipmaps: !1,
                    internalFormat: null,
                    minFilter: Ji,
                    depthBuffer: !0,
                    stencilBuffer: !1,
                    depthTexture: null,
                    samples: 0
                  },
                  i
                )),
                (e.texture = new Ks(
                  a,
                  i.mapping,
                  i.wrapS,
                  i.wrapT,
                  i.magFilter,
                  i.minFilter,
                  i.format,
                  i.type,
                  i.anisotropy,
                  i.colorSpace
                )),
                (e.texture.isRenderTargetTexture = !0),
                (e.texture.flipY = !1),
                (e.texture.generateMipmaps = i.generateMipmaps),
                (e.texture.internalFormat = i.internalFormat),
                (e.depthBuffer = i.depthBuffer),
                (e.stencilBuffer = i.stencilBuffer),
                (e.depthTexture = i.depthTexture),
                (e.samples = i.samples),
                e
              );
            }
            return (
              ki(t, e),
              Ni(t, [
                {
                  key: "setSize",
                  value: function (e, t) {
                    var n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1;
                    (this.width === e && this.height === t && this.depth === n) ||
                      ((this.width = e),
                      (this.height = t),
                      (this.depth = n),
                      (this.texture.image.width = e),
                      (this.texture.image.height = t),
                      (this.texture.image.depth = n),
                      this.dispose()),
                      this.viewport.set(0, 0, e, t),
                      this.scissor.set(0, 0, e, t);
                  }
                },
                {
                  key: "clone",
                  value: function () {
                    return new this.constructor().copy(this);
                  }
                },
                {
                  key: "copy",
                  value: function (e) {
                    (this.width = e.width),
                      (this.height = e.height),
                      (this.depth = e.depth),
                      this.scissor.copy(e.scissor),
                      (this.scissorTest = e.scissorTest),
                      this.viewport.copy(e.viewport),
                      (this.texture = e.texture.clone()),
                      (this.texture.isRenderTargetTexture = !0);
                    var t = Object.assign({}, e.texture.image);
                    return (
                      (this.texture.source = new Xs(t)),
                      (this.depthBuffer = e.depthBuffer),
                      (this.stencilBuffer = e.stencilBuffer),
                      null !== e.depthTexture &&
                        (this.depthTexture = e.depthTexture.clone()),
                      (this.samples = e.samples),
                      this
                    );
                  }
                },
                {
                  key: "dispose",
                  value: function () {
                    this.dispatchEvent({ type: "dispose" });
                  }
                }
              ]),
              t
            );
          })(ps)
        ),
        $s = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : null,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            return (
              Fi(this, t),
              ((e = Mi(this, t, [null])).isDataArrayTexture = !0),
              (e.image = { data: n, width: r, height: i, depth: a }),
              (e.magFilter = Yi),
              (e.minFilter = Yi),
              (e.wrapR = Xi),
              (e.generateMipmaps = !1),
              (e.flipY = !1),
              (e.unpackAlignment = 1),
              e
            );
          }
          return ki(t, e), Ni(t);
        })(Ks),
        Qs = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : null,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            return (
              Fi(this, t),
              ((e = Mi(this, t, [null])).isData3DTexture = !0),
              (e.image = { data: n, width: r, height: i, depth: a }),
              (e.magFilter = Yi),
              (e.minFilter = Yi),
              (e.wrapR = Xi),
              (e.generateMipmaps = !1),
              (e.flipY = !1),
              (e.unpackAlignment = 1),
              e
            );
          }
          return ki(t, e), Ni(t);
        })(Ks),
        eo = (function (e) {
          function t() {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0,
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0,
              i =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            Fi(this, t),
              (this.isQuaternion = !0),
              (this._x = e),
              (this._y = n),
              (this._z = r),
              (this._w = i);
          }
          return (
            Ni(
              t,
              [
                {
                  key: "x",
                  get: function () {
                    return this._x;
                  },
                  set: function (e) {
                    (this._x = e), this._onChangeCallback();
                  }
                },
                {
                  key: "y",
                  get: function () {
                    return this._y;
                  },
                  set: function (e) {
                    (this._y = e), this._onChangeCallback();
                  }
                },
                {
                  key: "z",
                  get: function () {
                    return this._z;
                  },
                  set: function (e) {
                    (this._z = e), this._onChangeCallback();
                  }
                },
                {
                  key: "w",
                  get: function () {
                    return this._w;
                  },
                  set: function (e) {
                    (this._w = e), this._onChangeCallback();
                  }
                },
                {
                  key: "set",
                  value: function (e, t, n, r) {
                    return (
                      (this._x = e),
                      (this._y = t),
                      (this._z = n),
                      (this._w = r),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "clone",
                  value: function () {
                    return new this.constructor(
                      this._x,
                      this._y,
                      this._z,
                      this._w
                    );
                  }
                },
                {
                  key: "copy",
                  value: function (e) {
                    return (
                      (this._x = e.x),
                      (this._y = e.y),
                      (this._z = e.z),
                      (this._w = e.w),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "setFromEuler",
                  value: function (e) {
                    var t =
                        !(arguments.length > 1 && void 0 !== arguments[1]) ||
                        arguments[1],
                      n = e._x,
                      r = e._y,
                      i = e._z,
                      a = e._order,
                      s = Math.cos,
                      o = Math.sin,
                      l = s(n / 2),
                      h = s(r / 2),
                      u = s(i / 2),
                      c = o(n / 2),
                      d = o(r / 2),
                      f = o(i / 2);
                    switch (a) {
                      case "XYZ":
                        (this._x = c * h * u + l * d * f),
                          (this._y = l * d * u - c * h * f),
                          (this._z = l * h * f + c * d * u),
                          (this._w = l * h * u - c * d * f);
                        break;
                      case "YXZ":
                        (this._x = c * h * u + l * d * f),
                          (this._y = l * d * u - c * h * f),
                          (this._z = l * h * f - c * d * u),
                          (this._w = l * h * u + c * d * f);
                        break;
                      case "ZXY":
                        (this._x = c * h * u - l * d * f),
                          (this._y = l * d * u + c * h * f),
                          (this._z = l * h * f + c * d * u),
                          (this._w = l * h * u - c * d * f);
                        break;
                      case "ZYX":
                        (this._x = c * h * u - l * d * f),
                          (this._y = l * d * u + c * h * f),
                          (this._z = l * h * f - c * d * u),
                          (this._w = l * h * u + c * d * f);
                        break;
                      case "YZX":
                        (this._x = c * h * u + l * d * f),
                          (this._y = l * d * u + c * h * f),
                          (this._z = l * h * f - c * d * u),
                          (this._w = l * h * u - c * d * f);
                        break;
                      case "XZY":
                        (this._x = c * h * u - l * d * f),
                          (this._y = l * d * u - c * h * f),
                          (this._z = l * h * f + c * d * u),
                          (this._w = l * h * u + c * d * f);
                        break;
                      default:
                        console.warn(
                          "THREE.Quaternion: .setFromEuler() encountered an unknown order: " +
                            a
                        );
                    }
                    return !0 === t && this._onChangeCallback(), this;
                  }
                },
                {
                  key: "setFromAxisAngle",
                  value: function (e, t) {
                    var n = t / 2,
                      r = Math.sin(n);
                    return (
                      (this._x = e.x * r),
                      (this._y = e.y * r),
                      (this._z = e.z * r),
                      (this._w = Math.cos(n)),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "setFromRotationMatrix",
                  value: function (e) {
                    var t = e.elements,
                      n = t[0],
                      r = t[4],
                      i = t[8],
                      a = t[1],
                      s = t[5],
                      o = t[9],
                      l = t[2],
                      h = t[6],
                      u = t[10],
                      c = n + s + u;
                    if (c > 0) {
                      var d = 0.5 / Math.sqrt(c + 1);
                      (this._w = 0.25 / d),
                        (this._x = (h - o) * d),
                        (this._y = (i - l) * d),
                        (this._z = (a - r) * d);
                    } else if (n > s && n > u) {
                      var f = 2 * Math.sqrt(1 + n - s - u);
                      (this._w = (h - o) / f),
                        (this._x = 0.25 * f),
                        (this._y = (r + a) / f),
                        (this._z = (i + l) / f);
                    } else if (s > u) {
                      var p = 2 * Math.sqrt(1 + s - n - u);
                      (this._w = (i - l) / p),
                        (this._x = (r + a) / p),
                        (this._y = 0.25 * p),
                        (this._z = (o + h) / p);
                    } else {
                      var m = 2 * Math.sqrt(1 + u - n - s);
                      (this._w = (a - r) / m),
                        (this._x = (i + l) / m),
                        (this._y = (o + h) / m),
                        (this._z = 0.25 * m);
                    }
                    return this._onChangeCallback(), this;
                  }
                },
                {
                  key: "setFromUnitVectors",
                  value: function (e, t) {
                    var n = e.dot(t) + 1;
                    return (
                      n < Number.EPSILON
                        ? ((n = 0),
                          Math.abs(e.x) > Math.abs(e.z)
                            ? ((this._x = -e.y),
                              (this._y = e.x),
                              (this._z = 0),
                              (this._w = n))
                            : ((this._x = 0),
                              (this._y = -e.z),
                              (this._z = e.y),
                              (this._w = n)))
                        : ((this._x = e.y * t.z - e.z * t.y),
                          (this._y = e.z * t.x - e.x * t.z),
                          (this._z = e.x * t.y - e.y * t.x),
                          (this._w = n)),
                      this.normalize()
                    );
                  }
                },
                {
                  key: "angleTo",
                  value: function (e) {
                    return 2 * Math.acos(Math.abs(_s(this.dot(e), -1, 1)));
                  }
                },
                {
                  key: "rotateTowards",
                  value: function (e, t) {
                    var n = this.angleTo(e);
                    if (0 === n) return this;
                    var r = Math.min(1, t / n);
                    return this.slerp(e, r), this;
                  }
                },
                {
                  key: "identity",
                  value: function () {
                    return this.set(0, 0, 0, 1);
                  }
                },
                {
                  key: "invert",
                  value: function () {
                    return this.conjugate();
                  }
                },
                {
                  key: "conjugate",
                  value: function () {
                    return (
                      (this._x *= -1),
                      (this._y *= -1),
                      (this._z *= -1),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "dot",
                  value: function (e) {
                    return (
                      this._x * e._x +
                      this._y * e._y +
                      this._z * e._z +
                      this._w * e._w
                    );
                  }
                },
                {
                  key: "lengthSq",
                  value: function () {
                    return (
                      this._x * this._x +
                      this._y * this._y +
                      this._z * this._z +
                      this._w * this._w
                    );
                  }
                },
                {
                  key: "length",
                  value: function () {
                    return Math.sqrt(
                      this._x * this._x +
                        this._y * this._y +
                        this._z * this._z +
                        this._w * this._w
                    );
                  }
                },
                {
                  key: "normalize",
                  value: function () {
                    var e = this.length();
                    return (
                      0 === e
                        ? ((this._x = 0),
                          (this._y = 0),
                          (this._z = 0),
                          (this._w = 1))
                        : ((e = 1 / e),
                          (this._x = this._x * e),
                          (this._y = this._y * e),
                          (this._z = this._z * e),
                          (this._w = this._w * e)),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "multiply",
                  value: function (e) {
                    return this.multiplyQuaternions(this, e);
                  }
                },
                {
                  key: "premultiply",
                  value: function (e) {
                    return this.multiplyQuaternions(e, this);
                  }
                },
                {
                  key: "multiplyQuaternions",
                  value: function (e, t) {
                    var n = e._x,
                      r = e._y,
                      i = e._z,
                      a = e._w,
                      s = t._x,
                      o = t._y,
                      l = t._z,
                      h = t._w;
                    return (
                      (this._x = n * h + a * s + r * l - i * o),
                      (this._y = r * h + a * o + i * s - n * l),
                      (this._z = i * h + a * l + n * o - r * s),
                      (this._w = a * h - n * s - r * o - i * l),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "slerp",
                  value: function (e, t) {
                    if (0 === t) return this;
                    if (1 === t) return this.copy(e);
                    var n = this._x,
                      r = this._y,
                      i = this._z,
                      a = this._w,
                      s = a * e._w + n * e._x + r * e._y + i * e._z;
                    if (
                      (s < 0
                        ? ((this._w = -e._w),
                          (this._x = -e._x),
                          (this._y = -e._y),
                          (this._z = -e._z),
                          (s = -s))
                        : this.copy(e),
                      s >= 1)
                    )
                      return (
                        (this._w = a),
                        (this._x = n),
                        (this._y = r),
                        (this._z = i),
                        this
                      );
                    var o = 1 - s * s;
                    if (o <= Number.EPSILON) {
                      var l = 1 - t;
                      return (
                        (this._w = l * a + t * this._w),
                        (this._x = l * n + t * this._x),
                        (this._y = l * r + t * this._y),
                        (this._z = l * i + t * this._z),
                        this.normalize(),
                        this
                      );
                    }
                    var h = Math.sqrt(o),
                      u = Math.atan2(h, s),
                      c = Math.sin((1 - t) * u) / h,
                      d = Math.sin(t * u) / h;
                    return (
                      (this._w = a * c + this._w * d),
                      (this._x = n * c + this._x * d),
                      (this._y = r * c + this._y * d),
                      (this._z = i * c + this._z * d),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "slerpQuaternions",
                  value: function (e, t, n) {
                    return this.copy(e).slerp(t, n);
                  }
                },
                {
                  key: "random",
                  value: function () {
                    var e = Math.random(),
                      t = Math.sqrt(1 - e),
                      n = Math.sqrt(e),
                      r = 2 * Math.PI * Math.random(),
                      i = 2 * Math.PI * Math.random();
                    return this.set(
                      t * Math.cos(r),
                      n * Math.sin(i),
                      n * Math.cos(i),
                      t * Math.sin(r)
                    );
                  }
                },
                {
                  key: "equals",
                  value: function (e) {
                    return (
                      e._x === this._x &&
                      e._y === this._y &&
                      e._z === this._z &&
                      e._w === this._w
                    );
                  }
                },
                {
                  key: "fromArray",
                  value: function (e) {
                    var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                    return (
                      (this._x = e[t]),
                      (this._y = e[t + 1]),
                      (this._z = e[t + 2]),
                      (this._w = e[t + 3]),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "toArray",
                  value: function () {
                    var e =
                        arguments.length > 0 && void 0 !== arguments[0]
                          ? arguments[0]
                          : [],
                      t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 0;
                    return (
                      (e[t] = this._x),
                      (e[t + 1] = this._y),
                      (e[t + 2] = this._z),
                      (e[t + 3] = this._w),
                      e
                    );
                  }
                },
                {
                  key: "fromBufferAttribute",
                  value: function (e, t) {
                    return (
                      (this._x = e.getX(t)),
                      (this._y = e.getY(t)),
                      (this._z = e.getZ(t)),
                      (this._w = e.getW(t)),
                      this._onChangeCallback(),
                      this
                    );
                  }
                },
                {
                  key: "toJSON",
                  value: function () {
                    return this.toArray();
                  }
                },
                {
                  key: "_onChange",
                  value: function (e) {
                    return (this._onChangeCallback = e), this;
                  }
                },
                { key: "_onChangeCallback", value: function () {} },
                {
                  key: Symbol.iterator,
                  value: Ii().mark(function e() {
                    return Ii().wrap(
                      function (e) {
                        for (;;)
                          switch ((e.prev = e.next)) {
                            case 0:
                              return (e.next = 2), this._x;
                            case 2:
                              return (e.next = 4), this._y;
                            case 4:
                              return (e.next = 6), this._z;
                            case 6:
                              return (e.next = 8), this._w;
                            case 8:
                            case "end":
                              return e.stop();
                          }
                      },
                      e,
                      this
                    );
                  })
                }
              ],
              [
                {
                  key: "slerpFlat",
                  value: function (e, t, n, r, i, a, s) {
                    var o = n[r + 0],
                      l = n[r + 1],
                      h = n[r + 2],
                      u = n[r + 3],
                      c = i[a + 0],
                      d = i[a + 1],
                      f = i[a + 2],
                      p = i[a + 3];
                    if (0 === s)
                      return (
                        (e[t + 0] = o),
                        (e[t + 1] = l),
                        (e[t + 2] = h),
                        void (e[t + 3] = u)
                      );
                    if (1 === s)
                      return (
                        (e[t + 0] = c),
                        (e[t + 1] = d),
                        (e[t + 2] = f),
                        void (e[t + 3] = p)
                      );
                    if (u !== p || o !== c || l !== d || h !== f) {
                      var m = 1 - s,
                        g = o * c + l * d + h * f + u * p,
                        v = g >= 0 ? 1 : -1,
                        y = 1 - g * g;
                      if (y > Number.EPSILON) {
                        var _ = Math.sqrt(y),
                          b = Math.atan2(_, g * v);
                        (m = Math.sin(m * b) / _), (s = Math.sin(s * b) / _);
                      }
                      var x = s * v;
                      if (
                        ((o = o * m + c * x),
                        (l = l * m + d * x),
                        (h = h * m + f * x),
                        (u = u * m + p * x),
                        m === 1 - s)
                      ) {
                        var S = 1 / Math.sqrt(o * o + l * l + h * h + u * u);
                        (o *= S), (l *= S), (h *= S), (u *= S);
                      }
                    }
                    (e[t] = o), (e[t + 1] = l), (e[t + 2] = h), (e[t + 3] = u);
                  }
                },
                {
                  key: "multiplyQuaternionsFlat",
                  value: function (e, t, n, r, i, a) {
                    var s = n[r],
                      o = n[r + 1],
                      l = n[r + 2],
                      h = n[r + 3],
                      u = i[a],
                      c = i[a + 1],
                      d = i[a + 2],
                      f = i[a + 3];
                    return (
                      (e[t] = s * f + h * u + o * d - l * c),
                      (e[t + 1] = o * f + h * c + l * u - s * d),
                      (e[t + 2] = l * f + h * d + s * c - o * u),
                      (e[t + 3] = h * f - s * u - o * c - l * d),
                      e
                    );
                  }
                }
              ]
            ),
            t
          );
        })(),
        to = (function (e) {
          function t() {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0,
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0;
            Fi(this, t),
              (t.prototype.isVector3 = !0),
              (this.x = e),
              (this.y = n),
              (this.z = r);
          }
          return (
            Ni(t, [
              {
                key: "set",
                value: function (e, t, n) {
                  return (
                    void 0 === n && (n = this.z),
                    (this.x = e),
                    (this.y = t),
                    (this.z = n),
                    this
                  );
                }
              },
              {
                key: "setScalar",
                value: function (e) {
                  return (this.x = e), (this.y = e), (this.z = e), this;
                }
              },
              {
                key: "setX",
                value: function (e) {
                  return (this.x = e), this;
                }
              },
              {
                key: "setY",
                value: function (e) {
                  return (this.y = e), this;
                }
              },
              {
                key: "setZ",
                value: function (e) {
                  return (this.z = e), this;
                }
              },
              {
                key: "setComponent",
                value: function (e, t) {
                  switch (e) {
                    case 0:
                      this.x = t;
                      break;
                    case 1:
                      this.y = t;
                      break;
                    case 2:
                      this.z = t;
                      break;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                  return this;
                }
              },
              {
                key: "getComponent",
                value: function (e) {
                  switch (e) {
                    case 0:
                      return this.x;
                    case 1:
                      return this.y;
                    case 2:
                      return this.z;
                    default:
                      throw new Error("index is out of range: " + e);
                  }
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.x, this.y, this.z);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (this.x = e.x), (this.y = e.y), (this.z = e.z), this;
                }
              },
              {
                key: "add",
                value: function (e) {
                  return (this.x += e.x), (this.y += e.y), (this.z += e.z), this;
                }
              },
              {
                key: "addScalar",
                value: function (e) {
                  return (this.x += e), (this.y += e), (this.z += e), this;
                }
              },
              {
                key: "addVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x + t.x),
                    (this.y = e.y + t.y),
                    (this.z = e.z + t.z),
                    this
                  );
                }
              },
              {
                key: "addScaledVector",
                value: function (e, t) {
                  return (
                    (this.x += e.x * t),
                    (this.y += e.y * t),
                    (this.z += e.z * t),
                    this
                  );
                }
              },
              {
                key: "sub",
                value: function (e) {
                  return (this.x -= e.x), (this.y -= e.y), (this.z -= e.z), this;
                }
              },
              {
                key: "subScalar",
                value: function (e) {
                  return (this.x -= e), (this.y -= e), (this.z -= e), this;
                }
              },
              {
                key: "subVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x - t.x),
                    (this.y = e.y - t.y),
                    (this.z = e.z - t.z),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return (this.x *= e.x), (this.y *= e.y), (this.z *= e.z), this;
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  return (this.x *= e), (this.y *= e), (this.z *= e), this;
                }
              },
              {
                key: "multiplyVectors",
                value: function (e, t) {
                  return (
                    (this.x = e.x * t.x),
                    (this.y = e.y * t.y),
                    (this.z = e.z * t.z),
                    this
                  );
                }
              },
              {
                key: "applyEuler",
                value: function (e) {
                  return this.applyQuaternion(ro.setFromEuler(e));
                }
              },
              {
                key: "applyAxisAngle",
                value: function (e, t) {
                  return this.applyQuaternion(ro.setFromAxisAngle(e, t));
                }
              },
              {
                key: "applyMatrix3",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    r = this.z,
                    i = e.elements;
                  return (
                    (this.x = i[0] * t + i[3] * n + i[6] * r),
                    (this.y = i[1] * t + i[4] * n + i[7] * r),
                    (this.z = i[2] * t + i[5] * n + i[8] * r),
                    this
                  );
                }
              },
              {
                key: "applyNormalMatrix",
                value: function (e) {
                  return this.applyMatrix3(e).normalize();
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    r = this.z,
                    i = e.elements,
                    a = 1 / (i[3] * t + i[7] * n + i[11] * r + i[15]);
                  return (
                    (this.x = (i[0] * t + i[4] * n + i[8] * r + i[12]) * a),
                    (this.y = (i[1] * t + i[5] * n + i[9] * r + i[13]) * a),
                    (this.z = (i[2] * t + i[6] * n + i[10] * r + i[14]) * a),
                    this
                  );
                }
              },
              {
                key: "applyQuaternion",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    r = this.z,
                    i = e.x,
                    a = e.y,
                    s = e.z,
                    o = e.w,
                    l = 2 * (a * r - s * n),
                    h = 2 * (s * t - i * r),
                    u = 2 * (i * n - a * t);
                  return (
                    (this.x = t + o * l + a * u - s * h),
                    (this.y = n + o * h + s * l - i * u),
                    (this.z = r + o * u + i * h - a * l),
                    this
                  );
                }
              },
              {
                key: "project",
                value: function (e) {
                  return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(
                    e.projectionMatrix
                  );
                }
              },
              {
                key: "unproject",
                value: function (e) {
                  return this.applyMatrix4(
                    e.projectionMatrixInverse
                  ).applyMatrix4(e.matrixWorld);
                }
              },
              {
                key: "transformDirection",
                value: function (e) {
                  var t = this.x,
                    n = this.y,
                    r = this.z,
                    i = e.elements;
                  return (
                    (this.x = i[0] * t + i[4] * n + i[8] * r),
                    (this.y = i[1] * t + i[5] * n + i[9] * r),
                    (this.z = i[2] * t + i[6] * n + i[10] * r),
                    this.normalize()
                  );
                }
              },
              {
                key: "divide",
                value: function (e) {
                  return (this.x /= e.x), (this.y /= e.y), (this.z /= e.z), this;
                }
              },
              {
                key: "divideScalar",
                value: function (e) {
                  return this.multiplyScalar(1 / e);
                }
              },
              {
                key: "min",
                value: function (e) {
                  return (
                    (this.x = Math.min(this.x, e.x)),
                    (this.y = Math.min(this.y, e.y)),
                    (this.z = Math.min(this.z, e.z)),
                    this
                  );
                }
              },
              {
                key: "max",
                value: function (e) {
                  return (
                    (this.x = Math.max(this.x, e.x)),
                    (this.y = Math.max(this.y, e.y)),
                    (this.z = Math.max(this.z, e.z)),
                    this
                  );
                }
              },
              {
                key: "clamp",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e.x, Math.min(t.x, this.x))),
                    (this.y = Math.max(e.y, Math.min(t.y, this.y))),
                    (this.z = Math.max(e.z, Math.min(t.z, this.z))),
                    this
                  );
                }
              },
              {
                key: "clampScalar",
                value: function (e, t) {
                  return (
                    (this.x = Math.max(e, Math.min(t, this.x))),
                    (this.y = Math.max(e, Math.min(t, this.y))),
                    (this.z = Math.max(e, Math.min(t, this.z))),
                    this
                  );
                }
              },
              {
                key: "clampLength",
                value: function (e, t) {
                  var n = this.length();
                  return this.divideScalar(n || 1).multiplyScalar(
                    Math.max(e, Math.min(t, n))
                  );
                }
              },
              {
                key: "floor",
                value: function () {
                  return (
                    (this.x = Math.floor(this.x)),
                    (this.y = Math.floor(this.y)),
                    (this.z = Math.floor(this.z)),
                    this
                  );
                }
              },
              {
                key: "ceil",
                value: function () {
                  return (
                    (this.x = Math.ceil(this.x)),
                    (this.y = Math.ceil(this.y)),
                    (this.z = Math.ceil(this.z)),
                    this
                  );
                }
              },
              {
                key: "round",
                value: function () {
                  return (
                    (this.x = Math.round(this.x)),
                    (this.y = Math.round(this.y)),
                    (this.z = Math.round(this.z)),
                    this
                  );
                }
              },
              {
                key: "roundToZero",
                value: function () {
                  return (
                    (this.x = Math.trunc(this.x)),
                    (this.y = Math.trunc(this.y)),
                    (this.z = Math.trunc(this.z)),
                    this
                  );
                }
              },
              {
                key: "negate",
                value: function () {
                  return (
                    (this.x = -this.x),
                    (this.y = -this.y),
                    (this.z = -this.z),
                    this
                  );
                }
              },
              {
                key: "dot",
                value: function (e) {
                  return this.x * e.x + this.y * e.y + this.z * e.z;
                }
              },
              {
                key: "lengthSq",
                value: function () {
                  return this.x * this.x + this.y * this.y + this.z * this.z;
                }
              },
              {
                key: "length",
                value: function () {
                  return Math.sqrt(
                    this.x * this.x + this.y * this.y + this.z * this.z
                  );
                }
              },
              {
                key: "manhattanLength",
                value: function () {
                  return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
                }
              },
              {
                key: "normalize",
                value: function () {
                  return this.divideScalar(this.length() || 1);
                }
              },
              {
                key: "setLength",
                value: function (e) {
                  return this.normalize().multiplyScalar(e);
                }
              },
              {
                key: "lerp",
                value: function (e, t) {
                  return (
                    (this.x += (e.x - this.x) * t),
                    (this.y += (e.y - this.y) * t),
                    (this.z += (e.z - this.z) * t),
                    this
                  );
                }
              },
              {
                key: "lerpVectors",
                value: function (e, t, n) {
                  return (
                    (this.x = e.x + (t.x - e.x) * n),
                    (this.y = e.y + (t.y - e.y) * n),
                    (this.z = e.z + (t.z - e.z) * n),
                    this
                  );
                }
              },
              {
                key: "cross",
                value: function (e) {
                  return this.crossVectors(this, e);
                }
              },
              {
                key: "crossVectors",
                value: function (e, t) {
                  var n = e.x,
                    r = e.y,
                    i = e.z,
                    a = t.x,
                    s = t.y,
                    o = t.z;
                  return (
                    (this.x = r * o - i * s),
                    (this.y = i * a - n * o),
                    (this.z = n * s - r * a),
                    this
                  );
                }
              },
              {
                key: "projectOnVector",
                value: function (e) {
                  var t = e.lengthSq();
                  if (0 === t) return this.set(0, 0, 0);
                  var n = e.dot(this) / t;
                  return this.copy(e).multiplyScalar(n);
                }
              },
              {
                key: "projectOnPlane",
                value: function (e) {
                  return no.copy(this).projectOnVector(e), this.sub(no);
                }
              },
              {
                key: "reflect",
                value: function (e) {
                  return this.sub(no.copy(e).multiplyScalar(2 * this.dot(e)));
                }
              },
              {
                key: "angleTo",
                value: function (e) {
                  var t = Math.sqrt(this.lengthSq() * e.lengthSq());
                  if (0 === t) return Math.PI / 2;
                  var n = this.dot(e) / t;
                  return Math.acos(_s(n, -1, 1));
                }
              },
              {
                key: "distanceTo",
                value: function (e) {
                  return Math.sqrt(this.distanceToSquared(e));
                }
              },
              {
                key: "distanceToSquared",
                value: function (e) {
                  var t = this.x - e.x,
                    n = this.y - e.y,
                    r = this.z - e.z;
                  return t * t + n * n + r * r;
                }
              },
              {
                key: "manhattanDistanceTo",
                value: function (e) {
                  return (
                    Math.abs(this.x - e.x) +
                    Math.abs(this.y - e.y) +
                    Math.abs(this.z - e.z)
                  );
                }
              },
              {
                key: "setFromSpherical",
                value: function (e) {
                  return this.setFromSphericalCoords(e.radius, e.phi, e.theta);
                }
              },
              {
                key: "setFromSphericalCoords",
                value: function (e, t, n) {
                  var r = Math.sin(t) * e;
                  return (
                    (this.x = r * Math.sin(n)),
                    (this.y = Math.cos(t) * e),
                    (this.z = r * Math.cos(n)),
                    this
                  );
                }
              },
              {
                key: "setFromCylindrical",
                value: function (e) {
                  return this.setFromCylindricalCoords(e.radius, e.theta, e.y);
                }
              },
              {
                key: "setFromCylindricalCoords",
                value: function (e, t, n) {
                  return (
                    (this.x = e * Math.sin(t)),
                    (this.y = n),
                    (this.z = e * Math.cos(t)),
                    this
                  );
                }
              },
              {
                key: "setFromMatrixPosition",
                value: function (e) {
                  var t = e.elements;
                  return (
                    (this.x = t[12]), (this.y = t[13]), (this.z = t[14]), this
                  );
                }
              },
              {
                key: "setFromMatrixScale",
                value: function (e) {
                  var t = this.setFromMatrixColumn(e, 0).length(),
                    n = this.setFromMatrixColumn(e, 1).length(),
                    r = this.setFromMatrixColumn(e, 2).length();
                  return (this.x = t), (this.y = n), (this.z = r), this;
                }
              },
              {
                key: "setFromMatrixColumn",
                value: function (e, t) {
                  return this.fromArray(e.elements, 4 * t);
                }
              },
              {
                key: "setFromMatrix3Column",
                value: function (e, t) {
                  return this.fromArray(e.elements, 3 * t);
                }
              },
              {
                key: "setFromEuler",
                value: function (e) {
                  return (this.x = e._x), (this.y = e._y), (this.z = e._z), this;
                }
              },
              {
                key: "setFromColor",
                value: function (e) {
                  return (this.x = e.r), (this.y = e.g), (this.z = e.b), this;
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.x === this.x && e.y === this.y && e.z === this.z;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (
                    (this.x = e[t]),
                    (this.y = e[t + 1]),
                    (this.z = e[t + 2]),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this.x), (e[t + 1] = this.y), (e[t + 2] = this.z), e
                  );
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (
                    (this.x = e.getX(t)),
                    (this.y = e.getY(t)),
                    (this.z = e.getZ(t)),
                    this
                  );
                }
              },
              {
                key: "random",
                value: function () {
                  return (
                    (this.x = Math.random()),
                    (this.y = Math.random()),
                    (this.z = Math.random()),
                    this
                  );
                }
              },
              {
                key: "randomDirection",
                value: function () {
                  var e = 2 * (Math.random() - 0.5),
                    t = Math.random() * Math.PI * 2,
                    n = Math.sqrt(1 - Math.pow(e, 2));
                  return (
                    (this.x = n * Math.cos(t)),
                    (this.y = n * Math.sin(t)),
                    (this.z = e),
                    this
                  );
                }
              },
              {
                key: Symbol.iterator,
                value: Ii().mark(function e() {
                  return Ii().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this.x;
                          case 2:
                            return (e.next = 4), this.y;
                          case 4:
                            return (e.next = 6), this.z;
                          case 6:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]),
            t
          );
        })(),
        no = new to(),
        ro = new eo(),
        io = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new to(1 / 0, 1 / 0, 1 / 0),
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new to(-1 / 0, -1 / 0, -1 / 0);
            Fi(this, e), (this.isBox3 = !0), (this.min = t), (this.max = n);
          }
          return (
            Ni(e, [
              {
                key: "set",
                value: function (e, t) {
                  return this.min.copy(e), this.max.copy(t), this;
                }
              },
              {
                key: "setFromArray",
                value: function (e) {
                  this.makeEmpty();
                  for (var t = 0, n = e.length; t < n; t += 3)
                    this.expandByPoint(so.fromArray(e, t));
                  return this;
                }
              },
              {
                key: "setFromBufferAttribute",
                value: function (e) {
                  this.makeEmpty();
                  for (var t = 0, n = e.count; t < n; t++)
                    this.expandByPoint(so.fromBufferAttribute(e, t));
                  return this;
                }
              },
              {
                key: "setFromPoints",
                value: function (e) {
                  this.makeEmpty();
                  for (var t = 0, n = e.length; t < n; t++)
                    this.expandByPoint(e[t]);
                  return this;
                }
              },
              {
                key: "setFromCenterAndSize",
                value: function (e, t) {
                  var n = so.copy(t).multiplyScalar(0.5);
                  return this.min.copy(e).sub(n), this.max.copy(e).add(n), this;
                }
              },
              {
                key: "setFromObject",
                value: function (e) {
                  var t =
                    arguments.length > 1 &&
                    void 0 !== arguments[1] &&
                    arguments[1];
                  return this.makeEmpty(), this.expandByObject(e, t);
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return this.min.copy(e.min), this.max.copy(e.max), this;
                }
              },
              {
                key: "makeEmpty",
                value: function () {
                  return (
                    (this.min.x = this.min.y = this.min.z = 1 / 0),
                    (this.max.x = this.max.y = this.max.z = -1 / 0),
                    this
                  );
                }
              },
              {
                key: "isEmpty",
                value: function () {
                  return (
                    this.max.x < this.min.x ||
                    this.max.y < this.min.y ||
                    this.max.z < this.min.z
                  );
                }
              },
              {
                key: "getCenter",
                value: function (e) {
                  return this.isEmpty()
                    ? e.set(0, 0, 0)
                    : e.addVectors(this.min, this.max).multiplyScalar(0.5);
                }
              },
              {
                key: "getSize",
                value: function (e) {
                  return this.isEmpty()
                    ? e.set(0, 0, 0)
                    : e.subVectors(this.max, this.min);
                }
              },
              {
                key: "expandByPoint",
                value: function (e) {
                  return this.min.min(e), this.max.max(e), this;
                }
              },
              {
                key: "expandByVector",
                value: function (e) {
                  return this.min.sub(e), this.max.add(e), this;
                }
              },
              {
                key: "expandByScalar",
                value: function (e) {
                  return this.min.addScalar(-e), this.max.addScalar(e), this;
                }
              },
              {
                key: "expandByObject",
                value: function (e) {
                  var t =
                    arguments.length > 1 &&
                    void 0 !== arguments[1] &&
                    arguments[1];
                  e.updateWorldMatrix(!1, !1);
                  var n = e.geometry;
                  if (void 0 !== n) {
                    var r = n.getAttribute("position");
                    if (!0 === t && void 0 !== r && !0 !== e.isInstancedMesh)
                      for (var i = 0, a = r.count; i < a; i++)
                        !0 === e.isMesh
                          ? e.getVertexPosition(i, so)
                          : so.fromBufferAttribute(r, i),
                          so.applyMatrix4(e.matrixWorld),
                          this.expandByPoint(so);
                    else
                      void 0 !== e.boundingBox
                        ? (null === e.boundingBox && e.computeBoundingBox(),
                          oo.copy(e.boundingBox))
                        : (null === n.boundingBox && n.computeBoundingBox(),
                          oo.copy(n.boundingBox)),
                        oo.applyMatrix4(e.matrixWorld),
                        this.union(oo);
                  }
                  for (var s = e.children, o = 0, l = s.length; o < l; o++)
                    this.expandByObject(s[o], t);
                  return this;
                }
              },
              {
                key: "containsPoint",
                value: function (e) {
                  return !(
                    e.x < this.min.x ||
                    e.x > this.max.x ||
                    e.y < this.min.y ||
                    e.y > this.max.y ||
                    e.z < this.min.z ||
                    e.z > this.max.z
                  );
                }
              },
              {
                key: "containsBox",
                value: function (e) {
                  return (
                    this.min.x <= e.min.x &&
                    e.max.x <= this.max.x &&
                    this.min.y <= e.min.y &&
                    e.max.y <= this.max.y &&
                    this.min.z <= e.min.z &&
                    e.max.z <= this.max.z
                  );
                }
              },
              {
                key: "getParameter",
                value: function (e, t) {
                  return t.set(
                    (e.x - this.min.x) / (this.max.x - this.min.x),
                    (e.y - this.min.y) / (this.max.y - this.min.y),
                    (e.z - this.min.z) / (this.max.z - this.min.z)
                  );
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return !(
                    e.max.x < this.min.x ||
                    e.min.x > this.max.x ||
                    e.max.y < this.min.y ||
                    e.min.y > this.max.y ||
                    e.max.z < this.min.z ||
                    e.min.z > this.max.z
                  );
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  return (
                    this.clampPoint(e.center, so),
                    so.distanceToSquared(e.center) <= e.radius * e.radius
                  );
                }
              },
              {
                key: "intersectsPlane",
                value: function (e) {
                  var t, n;
                  return (
                    e.normal.x > 0
                      ? ((t = e.normal.x * this.min.x),
                        (n = e.normal.x * this.max.x))
                      : ((t = e.normal.x * this.max.x),
                        (n = e.normal.x * this.min.x)),
                    e.normal.y > 0
                      ? ((t += e.normal.y * this.min.y),
                        (n += e.normal.y * this.max.y))
                      : ((t += e.normal.y * this.max.y),
                        (n += e.normal.y * this.min.y)),
                    e.normal.z > 0
                      ? ((t += e.normal.z * this.min.z),
                        (n += e.normal.z * this.max.z))
                      : ((t += e.normal.z * this.max.z),
                        (n += e.normal.z * this.min.z)),
                    t <= -e.constant && n >= -e.constant
                  );
                }
              },
              {
                key: "intersectsTriangle",
                value: function (e) {
                  if (this.isEmpty()) return !1;
                  this.getCenter(mo),
                    go.subVectors(this.max, mo),
                    lo.subVectors(e.a, mo),
                    ho.subVectors(e.b, mo),
                    uo.subVectors(e.c, mo),
                    co.subVectors(ho, lo),
                    fo.subVectors(uo, ho),
                    po.subVectors(lo, uo);
                  var t = [
                    0,
                    -co.z,
                    co.y,
                    0,
                    -fo.z,
                    fo.y,
                    0,
                    -po.z,
                    po.y,
                    co.z,
                    0,
                    -co.x,
                    fo.z,
                    0,
                    -fo.x,
                    po.z,
                    0,
                    -po.x,
                    -co.y,
                    co.x,
                    0,
                    -fo.y,
                    fo.x,
                    0,
                    -po.y,
                    po.x,
                    0
                  ];
                  return (
                    !!_o(t, lo, ho, uo, go) &&
                    !!_o((t = [1, 0, 0, 0, 1, 0, 0, 0, 1]), lo, ho, uo, go) &&
                    (vo.crossVectors(co, fo),
                    _o((t = [vo.x, vo.y, vo.z]), lo, ho, uo, go))
                  );
                }
              },
              {
                key: "clampPoint",
                value: function (e, t) {
                  return t.copy(e).clamp(this.min, this.max);
                }
              },
              {
                key: "distanceToPoint",
                value: function (e) {
                  return this.clampPoint(e, so).distanceTo(e);
                }
              },
              {
                key: "getBoundingSphere",
                value: function (e) {
                  return (
                    this.isEmpty()
                      ? e.makeEmpty()
                      : (this.getCenter(e.center),
                        (e.radius = 0.5 * this.getSize(so).length())),
                    e
                  );
                }
              },
              {
                key: "intersect",
                value: function (e) {
                  return (
                    this.min.max(e.min),
                    this.max.min(e.max),
                    this.isEmpty() && this.makeEmpty(),
                    this
                  );
                }
              },
              {
                key: "union",
                value: function (e) {
                  return this.min.min(e.min), this.max.max(e.max), this;
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  return (
                    this.isEmpty() ||
                      (ao[0]
                        .set(this.min.x, this.min.y, this.min.z)
                        .applyMatrix4(e),
                      ao[1]
                        .set(this.min.x, this.min.y, this.max.z)
                        .applyMatrix4(e),
                      ao[2]
                        .set(this.min.x, this.max.y, this.min.z)
                        .applyMatrix4(e),
                      ao[3]
                        .set(this.min.x, this.max.y, this.max.z)
                        .applyMatrix4(e),
                      ao[4]
                        .set(this.max.x, this.min.y, this.min.z)
                        .applyMatrix4(e),
                      ao[5]
                        .set(this.max.x, this.min.y, this.max.z)
                        .applyMatrix4(e),
                      ao[6]
                        .set(this.max.x, this.max.y, this.min.z)
                        .applyMatrix4(e),
                      ao[7]
                        .set(this.max.x, this.max.y, this.max.z)
                        .applyMatrix4(e),
                      this.setFromPoints(ao)),
                    this
                  );
                }
              },
              {
                key: "translate",
                value: function (e) {
                  return this.min.add(e), this.max.add(e), this;
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.min.equals(this.min) && e.max.equals(this.max);
                }
              }
            ]),
            e
          );
        })(),
        ao = [
          new to(),
          new to(),
          new to(),
          new to(),
          new to(),
          new to(),
          new to(),
          new to()
        ],
        so = new to(),
        oo = new io(),
        lo = new to(),
        ho = new to(),
        uo = new to(),
        co = new to(),
        fo = new to(),
        po = new to(),
        mo = new to(),
        go = new to(),
        vo = new to(),
        yo = new to();
      function _o(e, t, n, r, i) {
        for (var a = 0, s = e.length - 3; a <= s; a += 3) {
          yo.fromArray(e, a);
          var o =
              i.x * Math.abs(yo.x) + i.y * Math.abs(yo.y) + i.z * Math.abs(yo.z),
            l = t.dot(yo),
            h = n.dot(yo),
            u = r.dot(yo);
          if (Math.max(-Math.max(l, h, u), Math.min(l, h, u)) > o) return !1;
        }
        return !0;
      }
      var bo = new io(),
        xo = new to(),
        So = new to(),
        Eo = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new to(),
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : -1;
            Fi(this, e),
              (this.isSphere = !0),
              (this.center = t),
              (this.radius = n);
          }
          return (
            Ni(e, [
              {
                key: "set",
                value: function (e, t) {
                  return this.center.copy(e), (this.radius = t), this;
                }
              },
              {
                key: "setFromPoints",
                value: function (e, t) {
                  var n = this.center;
                  void 0 !== t ? n.copy(t) : bo.setFromPoints(e).getCenter(n);
                  for (var r = 0, i = 0, a = e.length; i < a; i++)
                    r = Math.max(r, n.distanceToSquared(e[i]));
                  return (this.radius = Math.sqrt(r)), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    this.center.copy(e.center), (this.radius = e.radius), this
                  );
                }
              },
              {
                key: "isEmpty",
                value: function () {
                  return this.radius < 0;
                }
              },
              {
                key: "makeEmpty",
                value: function () {
                  return this.center.set(0, 0, 0), (this.radius = -1), this;
                }
              },
              {
                key: "containsPoint",
                value: function (e) {
                  return (
                    e.distanceToSquared(this.center) <= this.radius * this.radius
                  );
                }
              },
              {
                key: "distanceToPoint",
                value: function (e) {
                  return e.distanceTo(this.center) - this.radius;
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  var t = this.radius + e.radius;
                  return e.center.distanceToSquared(this.center) <= t * t;
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return e.intersectsSphere(this);
                }
              },
              {
                key: "intersectsPlane",
                value: function (e) {
                  return Math.abs(e.distanceToPoint(this.center)) <= this.radius;
                }
              },
              {
                key: "clampPoint",
                value: function (e, t) {
                  var n = this.center.distanceToSquared(e);
                  return (
                    t.copy(e),
                    n > this.radius * this.radius &&
                      (t.sub(this.center).normalize(),
                      t.multiplyScalar(this.radius).add(this.center)),
                    t
                  );
                }
              },
              {
                key: "getBoundingBox",
                value: function (e) {
                  return this.isEmpty()
                    ? (e.makeEmpty(), e)
                    : (e.set(this.center, this.center),
                      e.expandByScalar(this.radius),
                      e);
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  return (
                    this.center.applyMatrix4(e),
                    (this.radius = this.radius * e.getMaxScaleOnAxis()),
                    this
                  );
                }
              },
              {
                key: "translate",
                value: function (e) {
                  return this.center.add(e), this;
                }
              },
              {
                key: "expandByPoint",
                value: function (e) {
                  if (this.isEmpty())
                    return this.center.copy(e), (this.radius = 0), this;
                  xo.subVectors(e, this.center);
                  var t = xo.lengthSq();
                  if (t > this.radius * this.radius) {
                    var n = Math.sqrt(t),
                      r = 0.5 * (n - this.radius);
                    this.center.addScaledVector(xo, r / n), (this.radius += r);
                  }
                  return this;
                }
              },
              {
                key: "union",
                value: function (e) {
                  return e.isEmpty()
                    ? this
                    : this.isEmpty()
                    ? (this.copy(e), this)
                    : (!0 === this.center.equals(e.center)
                        ? (this.radius = Math.max(this.radius, e.radius))
                        : (So.subVectors(e.center, this.center).setLength(
                            e.radius
                          ),
                          this.expandByPoint(xo.copy(e.center).add(So)),
                          this.expandByPoint(xo.copy(e.center).sub(So))),
                      this);
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.center.equals(this.center) && e.radius === this.radius;
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]),
            e
          );
        })(),
        wo = new to(),
        To = new to(),
        Mo = new to(),
        Ao = new to(),
        Co = new to(),
        Po = new to(),
        ko = new to(),
        Ro = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new to(),
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new to(0, 0, -1);
            Fi(this, e), (this.origin = t), (this.direction = n);
          }
          return (
            Ni(e, [
              {
                key: "set",
                value: function (e, t) {
                  return this.origin.copy(e), this.direction.copy(t), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    this.origin.copy(e.origin),
                    this.direction.copy(e.direction),
                    this
                  );
                }
              },
              {
                key: "at",
                value: function (e, t) {
                  return t.copy(this.origin).addScaledVector(this.direction, e);
                }
              },
              {
                key: "lookAt",
                value: function (e) {
                  return (
                    this.direction.copy(e).sub(this.origin).normalize(), this
                  );
                }
              },
              {
                key: "recast",
                value: function (e) {
                  return this.origin.copy(this.at(e, wo)), this;
                }
              },
              {
                key: "closestPointToPoint",
                value: function (e, t) {
                  t.subVectors(e, this.origin);
                  var n = t.dot(this.direction);
                  return n < 0
                    ? t.copy(this.origin)
                    : t.copy(this.origin).addScaledVector(this.direction, n);
                }
              },
              {
                key: "distanceToPoint",
                value: function (e) {
                  return Math.sqrt(this.distanceSqToPoint(e));
                }
              },
              {
                key: "distanceSqToPoint",
                value: function (e) {
                  var t = wo.subVectors(e, this.origin).dot(this.direction);
                  return t < 0
                    ? this.origin.distanceToSquared(e)
                    : (wo.copy(this.origin).addScaledVector(this.direction, t),
                      wo.distanceToSquared(e));
                }
              },
              {
                key: "distanceSqToSegment",
                value: function (e, t, n, r) {
                  To.copy(e).add(t).multiplyScalar(0.5),
                    Mo.copy(t).sub(e).normalize(),
                    Ao.copy(this.origin).sub(To);
                  var i,
                    a,
                    s,
                    o,
                    l = 0.5 * e.distanceTo(t),
                    h = -this.direction.dot(Mo),
                    u = Ao.dot(this.direction),
                    c = -Ao.dot(Mo),
                    d = Ao.lengthSq(),
                    f = Math.abs(1 - h * h);
                  if (f > 0) {
                    if (((a = h * u - c), (o = l * f), (i = h * c - u) >= 0)) {
                      if (a >= -o) {
                        if (a <= o) {
                          var p = 1 / f;
                          s =
                            (i *= p) * (i + h * (a *= p) + 2 * u) +
                            a * (h * i + a + 2 * c) +
                            d;
                        } else
                          (a = l),
                            (s =
                              -(i = Math.max(0, -(h * a + u))) * i +
                              a * (a + 2 * c) +
                              d);
                      } else
                        (a = -l),
                          (s =
                            -(i = Math.max(0, -(h * a + u))) * i +
                            a * (a + 2 * c) +
                            d);
                    } else
                      a <= -o
                        ? (s =
                            -(i = Math.max(0, -(-h * l + u))) * i +
                            (a = i > 0 ? -l : Math.min(Math.max(-l, -c), l)) *
                              (a + 2 * c) +
                            d)
                        : a <= o
                        ? ((i = 0),
                          (s =
                            (a = Math.min(Math.max(-l, -c), l)) * (a + 2 * c) +
                            d))
                        : (s =
                            -(i = Math.max(0, -(h * l + u))) * i +
                            (a = i > 0 ? l : Math.min(Math.max(-l, -c), l)) *
                              (a + 2 * c) +
                            d);
                  } else
                    (a = h > 0 ? -l : l),
                      (s =
                        -(i = Math.max(0, -(h * a + u))) * i +
                        a * (a + 2 * c) +
                        d);
                  return (
                    n && n.copy(this.origin).addScaledVector(this.direction, i),
                    r && r.copy(To).addScaledVector(Mo, a),
                    s
                  );
                }
              },
              {
                key: "intersectSphere",
                value: function (e, t) {
                  wo.subVectors(e.center, this.origin);
                  var n = wo.dot(this.direction),
                    r = wo.dot(wo) - n * n,
                    i = e.radius * e.radius;
                  if (r > i) return null;
                  var a = Math.sqrt(i - r),
                    s = n - a,
                    o = n + a;
                  return o < 0 ? null : s < 0 ? this.at(o, t) : this.at(s, t);
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  return this.distanceSqToPoint(e.center) <= e.radius * e.radius;
                }
              },
              {
                key: "distanceToPlane",
                value: function (e) {
                  var t = e.normal.dot(this.direction);
                  if (0 === t)
                    return 0 === e.distanceToPoint(this.origin) ? 0 : null;
                  var n = -(this.origin.dot(e.normal) + e.constant) / t;
                  return n >= 0 ? n : null;
                }
              },
              {
                key: "intersectPlane",
                value: function (e, t) {
                  var n = this.distanceToPlane(e);
                  return null === n ? null : this.at(n, t);
                }
              },
              {
                key: "intersectsPlane",
                value: function (e) {
                  var t = e.distanceToPoint(this.origin);
                  return 0 === t || e.normal.dot(this.direction) * t < 0;
                }
              },
              {
                key: "intersectBox",
                value: function (e, t) {
                  var n,
                    r,
                    i,
                    a,
                    s,
                    o,
                    l = 1 / this.direction.x,
                    h = 1 / this.direction.y,
                    u = 1 / this.direction.z,
                    c = this.origin;
                  return (
                    l >= 0
                      ? ((n = (e.min.x - c.x) * l), (r = (e.max.x - c.x) * l))
                      : ((n = (e.max.x - c.x) * l), (r = (e.min.x - c.x) * l)),
                    h >= 0
                      ? ((i = (e.min.y - c.y) * h), (a = (e.max.y - c.y) * h))
                      : ((i = (e.max.y - c.y) * h), (a = (e.min.y - c.y) * h)),
                    n > a || i > r
                      ? null
                      : ((i > n || isNaN(n)) && (n = i),
                        (a < r || isNaN(r)) && (r = a),
                        u >= 0
                          ? ((s = (e.min.z - c.z) * u), (o = (e.max.z - c.z) * u))
                          : ((s = (e.max.z - c.z) * u),
                            (o = (e.min.z - c.z) * u)),
                        n > o || s > r
                          ? null
                          : ((s > n || n != n) && (n = s),
                            (o < r || r != r) && (r = o),
                            r < 0 ? null : this.at(n >= 0 ? n : r, t)))
                  );
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return null !== this.intersectBox(e, wo);
                }
              },
              {
                key: "intersectTriangle",
                value: function (e, t, n, r, i) {
                  Co.subVectors(t, e),
                    Po.subVectors(n, e),
                    ko.crossVectors(Co, Po);
                  var a,
                    s = this.direction.dot(ko);
                  if (s > 0) {
                    if (r) return null;
                    a = 1;
                  } else {
                    if (!(s < 0)) return null;
                    (a = -1), (s = -s);
                  }
                  Ao.subVectors(this.origin, e);
                  var o = a * this.direction.dot(Po.crossVectors(Ao, Po));
                  if (o < 0) return null;
                  var l = a * this.direction.dot(Co.cross(Ao));
                  if (l < 0) return null;
                  if (o + l > s) return null;
                  var h = -a * Ao.dot(ko);
                  return h < 0 ? null : this.at(h / s, i);
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  return (
                    this.origin.applyMatrix4(e),
                    this.direction.transformDirection(e),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e.origin.equals(this.origin) &&
                    e.direction.equals(this.direction)
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]),
            e
          );
        })(),
        Do = (function () {
          function e(t, n, r, i, a, s, o, l, h, u, c, d, f, p, m, g) {
            Fi(this, e),
              (e.prototype.isMatrix4 = !0),
              (this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
              void 0 !== t &&
                this.set(t, n, r, i, a, s, o, l, h, u, c, d, f, p, m, g);
          }
          return (
            Ni(e, [
              {
                key: "set",
                value: function (e, t, n, r, i, a, s, o, l, h, u, c, d, f, p, m) {
                  var g = this.elements;
                  return (
                    (g[0] = e),
                    (g[4] = t),
                    (g[8] = n),
                    (g[12] = r),
                    (g[1] = i),
                    (g[5] = a),
                    (g[9] = s),
                    (g[13] = o),
                    (g[2] = l),
                    (g[6] = h),
                    (g[10] = u),
                    (g[14] = c),
                    (g[3] = d),
                    (g[7] = f),
                    (g[11] = p),
                    (g[15] = m),
                    this
                  );
                }
              },
              {
                key: "identity",
                value: function () {
                  return (
                    this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new e().fromArray(this.elements);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  var t = this.elements,
                    n = e.elements;
                  return (
                    (t[0] = n[0]),
                    (t[1] = n[1]),
                    (t[2] = n[2]),
                    (t[3] = n[3]),
                    (t[4] = n[4]),
                    (t[5] = n[5]),
                    (t[6] = n[6]),
                    (t[7] = n[7]),
                    (t[8] = n[8]),
                    (t[9] = n[9]),
                    (t[10] = n[10]),
                    (t[11] = n[11]),
                    (t[12] = n[12]),
                    (t[13] = n[13]),
                    (t[14] = n[14]),
                    (t[15] = n[15]),
                    this
                  );
                }
              },
              {
                key: "copyPosition",
                value: function (e) {
                  var t = this.elements,
                    n = e.elements;
                  return (t[12] = n[12]), (t[13] = n[13]), (t[14] = n[14]), this;
                }
              },
              {
                key: "setFromMatrix3",
                value: function (e) {
                  var t = e.elements;
                  return (
                    this.set(
                      t[0],
                      t[3],
                      t[6],
                      0,
                      t[1],
                      t[4],
                      t[7],
                      0,
                      t[2],
                      t[5],
                      t[8],
                      0,
                      0,
                      0,
                      0,
                      1
                    ),
                    this
                  );
                }
              },
              {
                key: "extractBasis",
                value: function (e, t, n) {
                  return (
                    e.setFromMatrixColumn(this, 0),
                    t.setFromMatrixColumn(this, 1),
                    n.setFromMatrixColumn(this, 2),
                    this
                  );
                }
              },
              {
                key: "makeBasis",
                value: function (e, t, n) {
                  return (
                    this.set(
                      e.x,
                      t.x,
                      n.x,
                      0,
                      e.y,
                      t.y,
                      n.y,
                      0,
                      e.z,
                      t.z,
                      n.z,
                      0,
                      0,
                      0,
                      0,
                      1
                    ),
                    this
                  );
                }
              },
              {
                key: "extractRotation",
                value: function (e) {
                  var t = this.elements,
                    n = e.elements,
                    r = 1 / Io.setFromMatrixColumn(e, 0).length(),
                    i = 1 / Io.setFromMatrixColumn(e, 1).length(),
                    a = 1 / Io.setFromMatrixColumn(e, 2).length();
                  return (
                    (t[0] = n[0] * r),
                    (t[1] = n[1] * r),
                    (t[2] = n[2] * r),
                    (t[3] = 0),
                    (t[4] = n[4] * i),
                    (t[5] = n[5] * i),
                    (t[6] = n[6] * i),
                    (t[7] = 0),
                    (t[8] = n[8] * a),
                    (t[9] = n[9] * a),
                    (t[10] = n[10] * a),
                    (t[11] = 0),
                    (t[12] = 0),
                    (t[13] = 0),
                    (t[14] = 0),
                    (t[15] = 1),
                    this
                  );
                }
              },
              {
                key: "makeRotationFromEuler",
                value: function (e) {
                  var t = this.elements,
                    n = e.x,
                    r = e.y,
                    i = e.z,
                    a = Math.cos(n),
                    s = Math.sin(n),
                    o = Math.cos(r),
                    l = Math.sin(r),
                    h = Math.cos(i),
                    u = Math.sin(i);
                  if ("XYZ" === e.order) {
                    var c = a * h,
                      d = a * u,
                      f = s * h,
                      p = s * u;
                    (t[0] = o * h),
                      (t[4] = -o * u),
                      (t[8] = l),
                      (t[1] = d + f * l),
                      (t[5] = c - p * l),
                      (t[9] = -s * o),
                      (t[2] = p - c * l),
                      (t[6] = f + d * l),
                      (t[10] = a * o);
                  } else if ("YXZ" === e.order) {
                    var m = o * h,
                      g = o * u,
                      v = l * h,
                      y = l * u;
                    (t[0] = m + y * s),
                      (t[4] = v * s - g),
                      (t[8] = a * l),
                      (t[1] = a * u),
                      (t[5] = a * h),
                      (t[9] = -s),
                      (t[2] = g * s - v),
                      (t[6] = y + m * s),
                      (t[10] = a * o);
                  } else if ("ZXY" === e.order) {
                    var _ = o * h,
                      b = o * u,
                      x = l * h,
                      S = l * u;
                    (t[0] = _ - S * s),
                      (t[4] = -a * u),
                      (t[8] = x + b * s),
                      (t[1] = b + x * s),
                      (t[5] = a * h),
                      (t[9] = S - _ * s),
                      (t[2] = -a * l),
                      (t[6] = s),
                      (t[10] = a * o);
                  } else if ("ZYX" === e.order) {
                    var E = a * h,
                      w = a * u,
                      T = s * h,
                      M = s * u;
                    (t[0] = o * h),
                      (t[4] = T * l - w),
                      (t[8] = E * l + M),
                      (t[1] = o * u),
                      (t[5] = M * l + E),
                      (t[9] = w * l - T),
                      (t[2] = -l),
                      (t[6] = s * o),
                      (t[10] = a * o);
                  } else if ("YZX" === e.order) {
                    var A = a * o,
                      C = a * l,
                      P = s * o,
                      k = s * l;
                    (t[0] = o * h),
                      (t[4] = k - A * u),
                      (t[8] = P * u + C),
                      (t[1] = u),
                      (t[5] = a * h),
                      (t[9] = -s * h),
                      (t[2] = -l * h),
                      (t[6] = C * u + P),
                      (t[10] = A - k * u);
                  } else if ("XZY" === e.order) {
                    var R = a * o,
                      D = a * l,
                      I = s * o,
                      L = s * l;
                    (t[0] = o * h),
                      (t[4] = -u),
                      (t[8] = l * h),
                      (t[1] = R * u + L),
                      (t[5] = a * h),
                      (t[9] = D * u - I),
                      (t[2] = I * u - D),
                      (t[6] = s * h),
                      (t[10] = L * u + R);
                  }
                  return (
                    (t[3] = 0),
                    (t[7] = 0),
                    (t[11] = 0),
                    (t[12] = 0),
                    (t[13] = 0),
                    (t[14] = 0),
                    (t[15] = 1),
                    this
                  );
                }
              },
              {
                key: "makeRotationFromQuaternion",
                value: function (e) {
                  return this.compose(Fo, e, Oo);
                }
              },
              {
                key: "lookAt",
                value: function (e, t, n) {
                  var r = this.elements;
                  return (
                    Uo.subVectors(e, t),
                    0 === Uo.lengthSq() && (Uo.z = 1),
                    Uo.normalize(),
                    No.crossVectors(n, Uo),
                    0 === No.lengthSq() &&
                      (1 === Math.abs(n.z) ? (Uo.x += 1e-4) : (Uo.z += 1e-4),
                      Uo.normalize(),
                      No.crossVectors(n, Uo)),
                    No.normalize(),
                    Bo.crossVectors(Uo, No),
                    (r[0] = No.x),
                    (r[4] = Bo.x),
                    (r[8] = Uo.x),
                    (r[1] = No.y),
                    (r[5] = Bo.y),
                    (r[9] = Uo.y),
                    (r[2] = No.z),
                    (r[6] = Bo.z),
                    (r[10] = Uo.z),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return this.multiplyMatrices(this, e);
                }
              },
              {
                key: "premultiply",
                value: function (e) {
                  return this.multiplyMatrices(e, this);
                }
              },
              {
                key: "multiplyMatrices",
                value: function (e, t) {
                  var n = e.elements,
                    r = t.elements,
                    i = this.elements,
                    a = n[0],
                    s = n[4],
                    o = n[8],
                    l = n[12],
                    h = n[1],
                    u = n[5],
                    c = n[9],
                    d = n[13],
                    f = n[2],
                    p = n[6],
                    m = n[10],
                    g = n[14],
                    v = n[3],
                    y = n[7],
                    _ = n[11],
                    b = n[15],
                    x = r[0],
                    S = r[4],
                    E = r[8],
                    w = r[12],
                    T = r[1],
                    M = r[5],
                    A = r[9],
                    C = r[13],
                    P = r[2],
                    k = r[6],
                    R = r[10],
                    D = r[14],
                    I = r[3],
                    L = r[7],
                    F = r[11],
                    O = r[15];
                  return (
                    (i[0] = a * x + s * T + o * P + l * I),
                    (i[4] = a * S + s * M + o * k + l * L),
                    (i[8] = a * E + s * A + o * R + l * F),
                    (i[12] = a * w + s * C + o * D + l * O),
                    (i[1] = h * x + u * T + c * P + d * I),
                    (i[5] = h * S + u * M + c * k + d * L),
                    (i[9] = h * E + u * A + c * R + d * F),
                    (i[13] = h * w + u * C + c * D + d * O),
                    (i[2] = f * x + p * T + m * P + g * I),
                    (i[6] = f * S + p * M + m * k + g * L),
                    (i[10] = f * E + p * A + m * R + g * F),
                    (i[14] = f * w + p * C + m * D + g * O),
                    (i[3] = v * x + y * T + _ * P + b * I),
                    (i[7] = v * S + y * M + _ * k + b * L),
                    (i[11] = v * E + y * A + _ * R + b * F),
                    (i[15] = v * w + y * C + _ * D + b * O),
                    this
                  );
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  var t = this.elements;
                  return (
                    (t[0] *= e),
                    (t[4] *= e),
                    (t[8] *= e),
                    (t[12] *= e),
                    (t[1] *= e),
                    (t[5] *= e),
                    (t[9] *= e),
                    (t[13] *= e),
                    (t[2] *= e),
                    (t[6] *= e),
                    (t[10] *= e),
                    (t[14] *= e),
                    (t[3] *= e),
                    (t[7] *= e),
                    (t[11] *= e),
                    (t[15] *= e),
                    this
                  );
                }
              },
              {
                key: "determinant",
                value: function () {
                  var e = this.elements,
                    t = e[0],
                    n = e[4],
                    r = e[8],
                    i = e[12],
                    a = e[1],
                    s = e[5],
                    o = e[9],
                    l = e[13],
                    h = e[2],
                    u = e[6],
                    c = e[10],
                    d = e[14];
                  return (
                    e[3] *
                      (+i * o * u -
                        r * l * u -
                        i * s * c +
                        n * l * c +
                        r * s * d -
                        n * o * d) +
                    e[7] *
                      (+t * o * d -
                        t * l * c +
                        i * a * c -
                        r * a * d +
                        r * l * h -
                        i * o * h) +
                    e[11] *
                      (+t * l * u -
                        t * s * d -
                        i * a * u +
                        n * a * d +
                        i * s * h -
                        n * l * h) +
                    e[15] *
                      (-r * s * h -
                        t * o * u +
                        t * s * c +
                        r * a * u -
                        n * a * c +
                        n * o * h)
                  );
                }
              },
              {
                key: "transpose",
                value: function () {
                  var e,
                    t = this.elements;
                  return (
                    (e = t[1]),
                    (t[1] = t[4]),
                    (t[4] = e),
                    (e = t[2]),
                    (t[2] = t[8]),
                    (t[8] = e),
                    (e = t[6]),
                    (t[6] = t[9]),
                    (t[9] = e),
                    (e = t[3]),
                    (t[3] = t[12]),
                    (t[12] = e),
                    (e = t[7]),
                    (t[7] = t[13]),
                    (t[13] = e),
                    (e = t[11]),
                    (t[11] = t[14]),
                    (t[14] = e),
                    this
                  );
                }
              },
              {
                key: "setPosition",
                value: function (e, t, n) {
                  var r = this.elements;
                  return (
                    e.isVector3
                      ? ((r[12] = e.x), (r[13] = e.y), (r[14] = e.z))
                      : ((r[12] = e), (r[13] = t), (r[14] = n)),
                    this
                  );
                }
              },
              {
                key: "invert",
                value: function () {
                  var e = this.elements,
                    t = e[0],
                    n = e[1],
                    r = e[2],
                    i = e[3],
                    a = e[4],
                    s = e[5],
                    o = e[6],
                    l = e[7],
                    h = e[8],
                    u = e[9],
                    c = e[10],
                    d = e[11],
                    f = e[12],
                    p = e[13],
                    m = e[14],
                    g = e[15],
                    v =
                      u * m * l -
                      p * c * l +
                      p * o * d -
                      s * m * d -
                      u * o * g +
                      s * c * g,
                    y =
                      f * c * l -
                      h * m * l -
                      f * o * d +
                      a * m * d +
                      h * o * g -
                      a * c * g,
                    _ =
                      h * p * l -
                      f * u * l +
                      f * s * d -
                      a * p * d -
                      h * s * g +
                      a * u * g,
                    b =
                      f * u * o -
                      h * p * o -
                      f * s * c +
                      a * p * c +
                      h * s * m -
                      a * u * m,
                    x = t * v + n * y + r * _ + i * b;
                  if (0 === x)
                    return this.set(
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0,
                      0
                    );
                  var S = 1 / x;
                  return (
                    (e[0] = v * S),
                    (e[1] =
                      (p * c * i -
                        u * m * i -
                        p * r * d +
                        n * m * d +
                        u * r * g -
                        n * c * g) *
                      S),
                    (e[2] =
                      (s * m * i -
                        p * o * i +
                        p * r * l -
                        n * m * l -
                        s * r * g +
                        n * o * g) *
                      S),
                    (e[3] =
                      (u * o * i -
                        s * c * i -
                        u * r * l +
                        n * c * l +
                        s * r * d -
                        n * o * d) *
                      S),
                    (e[4] = y * S),
                    (e[5] =
                      (h * m * i -
                        f * c * i +
                        f * r * d -
                        t * m * d -
                        h * r * g +
                        t * c * g) *
                      S),
                    (e[6] =
                      (f * o * i -
                        a * m * i -
                        f * r * l +
                        t * m * l +
                        a * r * g -
                        t * o * g) *
                      S),
                    (e[7] =
                      (a * c * i -
                        h * o * i +
                        h * r * l -
                        t * c * l -
                        a * r * d +
                        t * o * d) *
                      S),
                    (e[8] = _ * S),
                    (e[9] =
                      (f * u * i -
                        h * p * i -
                        f * n * d +
                        t * p * d +
                        h * n * g -
                        t * u * g) *
                      S),
                    (e[10] =
                      (a * p * i -
                        f * s * i +
                        f * n * l -
                        t * p * l -
                        a * n * g +
                        t * s * g) *
                      S),
                    (e[11] =
                      (h * s * i -
                        a * u * i -
                        h * n * l +
                        t * u * l +
                        a * n * d -
                        t * s * d) *
                      S),
                    (e[12] = b * S),
                    (e[13] =
                      (h * p * r -
                        f * u * r +
                        f * n * c -
                        t * p * c -
                        h * n * m +
                        t * u * m) *
                      S),
                    (e[14] =
                      (f * s * r -
                        a * p * r -
                        f * n * o +
                        t * p * o +
                        a * n * m -
                        t * s * m) *
                      S),
                    (e[15] =
                      (a * u * r -
                        h * s * r +
                        h * n * o -
                        t * u * o -
                        a * n * c +
                        t * s * c) *
                      S),
                    this
                  );
                }
              },
              {
                key: "scale",
                value: function (e) {
                  var t = this.elements,
                    n = e.x,
                    r = e.y,
                    i = e.z;
                  return (
                    (t[0] *= n),
                    (t[4] *= r),
                    (t[8] *= i),
                    (t[1] *= n),
                    (t[5] *= r),
                    (t[9] *= i),
                    (t[2] *= n),
                    (t[6] *= r),
                    (t[10] *= i),
                    (t[3] *= n),
                    (t[7] *= r),
                    (t[11] *= i),
                    this
                  );
                }
              },
              {
                key: "getMaxScaleOnAxis",
                value: function () {
                  var e = this.elements,
                    t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
                    n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
                    r = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
                  return Math.sqrt(Math.max(t, n, r));
                }
              },
              {
                key: "makeTranslation",
                value: function (e, t, n) {
                  return (
                    e.isVector3
                      ? this.set(
                          1,
                          0,
                          0,
                          e.x,
                          0,
                          1,
                          0,
                          e.y,
                          0,
                          0,
                          1,
                          e.z,
                          0,
                          0,
                          0,
                          1
                        )
                      : this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1),
                    this
                  );
                }
              },
              {
                key: "makeRotationX",
                value: function (e) {
                  var t = Math.cos(e),
                    n = Math.sin(e);
                  return (
                    this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1),
                    this
                  );
                }
              },
              {
                key: "makeRotationY",
                value: function (e) {
                  var t = Math.cos(e),
                    n = Math.sin(e);
                  return (
                    this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1),
                    this
                  );
                }
              },
              {
                key: "makeRotationZ",
                value: function (e) {
                  var t = Math.cos(e),
                    n = Math.sin(e);
                  return (
                    this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                    this
                  );
                }
              },
              {
                key: "makeRotationAxis",
                value: function (e, t) {
                  var n = Math.cos(t),
                    r = Math.sin(t),
                    i = 1 - n,
                    a = e.x,
                    s = e.y,
                    o = e.z,
                    l = i * a,
                    h = i * s;
                  return (
                    this.set(
                      l * a + n,
                      l * s - r * o,
                      l * o + r * s,
                      0,
                      l * s + r * o,
                      h * s + n,
                      h * o - r * a,
                      0,
                      l * o - r * s,
                      h * o + r * a,
                      i * o * o + n,
                      0,
                      0,
                      0,
                      0,
                      1
                    ),
                    this
                  );
                }
              },
              {
                key: "makeScale",
                value: function (e, t, n) {
                  return (
                    this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
                  );
                }
              },
              {
                key: "makeShear",
                value: function (e, t, n, r, i, a) {
                  return (
                    this.set(1, n, i, 0, e, 1, a, 0, t, r, 1, 0, 0, 0, 0, 1), this
                  );
                }
              },
              {
                key: "compose",
                value: function (e, t, n) {
                  var r = this.elements,
                    i = t._x,
                    a = t._y,
                    s = t._z,
                    o = t._w,
                    l = i + i,
                    h = a + a,
                    u = s + s,
                    c = i * l,
                    d = i * h,
                    f = i * u,
                    p = a * h,
                    m = a * u,
                    g = s * u,
                    v = o * l,
                    y = o * h,
                    _ = o * u,
                    b = n.x,
                    x = n.y,
                    S = n.z;
                  return (
                    (r[0] = (1 - (p + g)) * b),
                    (r[1] = (d + _) * b),
                    (r[2] = (f - y) * b),
                    (r[3] = 0),
                    (r[4] = (d - _) * x),
                    (r[5] = (1 - (c + g)) * x),
                    (r[6] = (m + v) * x),
                    (r[7] = 0),
                    (r[8] = (f + y) * S),
                    (r[9] = (m - v) * S),
                    (r[10] = (1 - (c + p)) * S),
                    (r[11] = 0),
                    (r[12] = e.x),
                    (r[13] = e.y),
                    (r[14] = e.z),
                    (r[15] = 1),
                    this
                  );
                }
              },
              {
                key: "decompose",
                value: function (e, t, n) {
                  var r = this.elements,
                    i = Io.set(r[0], r[1], r[2]).length(),
                    a = Io.set(r[4], r[5], r[6]).length(),
                    s = Io.set(r[8], r[9], r[10]).length();
                  this.determinant() < 0 && (i = -i),
                    (e.x = r[12]),
                    (e.y = r[13]),
                    (e.z = r[14]),
                    Lo.copy(this);
                  var o = 1 / i,
                    l = 1 / a,
                    h = 1 / s;
                  return (
                    (Lo.elements[0] *= o),
                    (Lo.elements[1] *= o),
                    (Lo.elements[2] *= o),
                    (Lo.elements[4] *= l),
                    (Lo.elements[5] *= l),
                    (Lo.elements[6] *= l),
                    (Lo.elements[8] *= h),
                    (Lo.elements[9] *= h),
                    (Lo.elements[10] *= h),
                    t.setFromRotationMatrix(Lo),
                    (n.x = i),
                    (n.y = a),
                    (n.z = s),
                    this
                  );
                }
              },
              {
                key: "makePerspective",
                value: function (e, t, n, r, i, a) {
                  var s,
                    o,
                    l =
                      arguments.length > 6 && void 0 !== arguments[6]
                        ? arguments[6]
                        : ds,
                    h = this.elements,
                    u = (2 * i) / (t - e),
                    c = (2 * i) / (n - r),
                    d = (t + e) / (t - e),
                    f = (n + r) / (n - r);
                  if (l === ds)
                    (s = -(a + i) / (a - i)), (o = (-2 * a * i) / (a - i));
                  else {
                    if (l !== fs)
                      throw new Error(
                        "THREE.Matrix4.makePerspective(): Invalid coordinate system: " +
                          l
                      );
                    (s = -a / (a - i)), (o = (-a * i) / (a - i));
                  }
                  return (
                    (h[0] = u),
                    (h[4] = 0),
                    (h[8] = d),
                    (h[12] = 0),
                    (h[1] = 0),
                    (h[5] = c),
                    (h[9] = f),
                    (h[13] = 0),
                    (h[2] = 0),
                    (h[6] = 0),
                    (h[10] = s),
                    (h[14] = o),
                    (h[3] = 0),
                    (h[7] = 0),
                    (h[11] = -1),
                    (h[15] = 0),
                    this
                  );
                }
              },
              {
                key: "makeOrthographic",
                value: function (e, t, n, r, i, a) {
                  var s,
                    o,
                    l =
                      arguments.length > 6 && void 0 !== arguments[6]
                        ? arguments[6]
                        : ds,
                    h = this.elements,
                    u = 1 / (t - e),
                    c = 1 / (n - r),
                    d = 1 / (a - i),
                    f = (t + e) * u,
                    p = (n + r) * c;
                  if (l === ds) (s = (a + i) * d), (o = -2 * d);
                  else {
                    if (l !== fs)
                      throw new Error(
                        "THREE.Matrix4.makeOrthographic(): Invalid coordinate system: " +
                          l
                      );
                    (s = i * d), (o = -1 * d);
                  }
                  return (
                    (h[0] = 2 * u),
                    (h[4] = 0),
                    (h[8] = 0),
                    (h[12] = -f),
                    (h[1] = 0),
                    (h[5] = 2 * c),
                    (h[9] = 0),
                    (h[13] = -p),
                    (h[2] = 0),
                    (h[6] = 0),
                    (h[10] = o),
                    (h[14] = -s),
                    (h[3] = 0),
                    (h[7] = 0),
                    (h[11] = 0),
                    (h[15] = 1),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  for (var t = this.elements, n = e.elements, r = 0; r < 16; r++)
                    if (t[r] !== n[r]) return !1;
                  return !0;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  for (
                    var t =
                        arguments.length > 1 && void 0 !== arguments[1]
                          ? arguments[1]
                          : 0,
                      n = 0;
                    n < 16;
                    n++
                  )
                    this.elements[n] = e[n + t];
                  return this;
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n = this.elements;
                  return (
                    (e[t] = n[0]),
                    (e[t + 1] = n[1]),
                    (e[t + 2] = n[2]),
                    (e[t + 3] = n[3]),
                    (e[t + 4] = n[4]),
                    (e[t + 5] = n[5]),
                    (e[t + 6] = n[6]),
                    (e[t + 7] = n[7]),
                    (e[t + 8] = n[8]),
                    (e[t + 9] = n[9]),
                    (e[t + 10] = n[10]),
                    (e[t + 11] = n[11]),
                    (e[t + 12] = n[12]),
                    (e[t + 13] = n[13]),
                    (e[t + 14] = n[14]),
                    (e[t + 15] = n[15]),
                    e
                  );
                }
              }
            ]),
            e
          );
        })(),
        Io = new to(),
        Lo = new Do(),
        Fo = new to(0, 0, 0),
        Oo = new to(1, 1, 1),
        No = new to(),
        Bo = new to(),
        Uo = new to(),
        zo = new Do(),
        Vo = new eo(),
        Ho = (function (e) {
          function t() {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0,
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0,
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0,
              i =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : t.DEFAULT_ORDER;
            Fi(this, t),
              (this.isEuler = !0),
              (this._x = e),
              (this._y = n),
              (this._z = r),
              (this._order = i);
          }
          return (
            Ni(t, [
              {
                key: "x",
                get: function () {
                  return this._x;
                },
                set: function (e) {
                  (this._x = e), this._onChangeCallback();
                }
              },
              {
                key: "y",
                get: function () {
                  return this._y;
                },
                set: function (e) {
                  (this._y = e), this._onChangeCallback();
                }
              },
              {
                key: "z",
                get: function () {
                  return this._z;
                },
                set: function (e) {
                  (this._z = e), this._onChangeCallback();
                }
              },
              {
                key: "order",
                get: function () {
                  return this._order;
                },
                set: function (e) {
                  (this._order = e), this._onChangeCallback();
                }
              },
              {
                key: "set",
                value: function (e, t, n) {
                  var r =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : this._order;
                  return (
                    (this._x = e),
                    (this._y = t),
                    (this._z = n),
                    (this._order = r),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(
                    this._x,
                    this._y,
                    this._z,
                    this._order
                  );
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this._x = e._x),
                    (this._y = e._y),
                    (this._z = e._z),
                    (this._order = e._order),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "setFromRotationMatrix",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : this._order,
                    n =
                      !(arguments.length > 2 && void 0 !== arguments[2]) ||
                      arguments[2],
                    r = e.elements,
                    i = r[0],
                    a = r[4],
                    s = r[8],
                    o = r[1],
                    l = r[5],
                    h = r[9],
                    u = r[2],
                    c = r[6],
                    d = r[10];
                  switch (t) {
                    case "XYZ":
                      (this._y = Math.asin(_s(s, -1, 1))),
                        Math.abs(s) < 0.9999999
                          ? ((this._x = Math.atan2(-h, d)),
                            (this._z = Math.atan2(-a, i)))
                          : ((this._x = Math.atan2(c, l)), (this._z = 0));
                      break;
                    case "YXZ":
                      (this._x = Math.asin(-_s(h, -1, 1))),
                        Math.abs(h) < 0.9999999
                          ? ((this._y = Math.atan2(s, d)),
                            (this._z = Math.atan2(o, l)))
                          : ((this._y = Math.atan2(-u, i)), (this._z = 0));
                      break;
                    case "ZXY":
                      (this._x = Math.asin(_s(c, -1, 1))),
                        Math.abs(c) < 0.9999999
                          ? ((this._y = Math.atan2(-u, d)),
                            (this._z = Math.atan2(-a, l)))
                          : ((this._y = 0), (this._z = Math.atan2(o, i)));
                      break;
                    case "ZYX":
                      (this._y = Math.asin(-_s(u, -1, 1))),
                        Math.abs(u) < 0.9999999
                          ? ((this._x = Math.atan2(c, d)),
                            (this._z = Math.atan2(o, i)))
                          : ((this._x = 0), (this._z = Math.atan2(-a, l)));
                      break;
                    case "YZX":
                      (this._z = Math.asin(_s(o, -1, 1))),
                        Math.abs(o) < 0.9999999
                          ? ((this._x = Math.atan2(-h, l)),
                            (this._y = Math.atan2(-u, i)))
                          : ((this._x = 0), (this._y = Math.atan2(s, d)));
                      break;
                    case "XZY":
                      (this._z = Math.asin(-_s(a, -1, 1))),
                        Math.abs(a) < 0.9999999
                          ? ((this._x = Math.atan2(c, l)),
                            (this._y = Math.atan2(s, i)))
                          : ((this._x = Math.atan2(-h, d)), (this._y = 0));
                      break;
                    default:
                      console.warn(
                        "THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " +
                          t
                      );
                  }
                  return (
                    (this._order = t), !0 === n && this._onChangeCallback(), this
                  );
                }
              },
              {
                key: "setFromQuaternion",
                value: function (e, t, n) {
                  return (
                    zo.makeRotationFromQuaternion(e),
                    this.setFromRotationMatrix(zo, t, n)
                  );
                }
              },
              {
                key: "setFromVector3",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : this._order;
                  return this.set(e.x, e.y, e.z, t);
                }
              },
              {
                key: "reorder",
                value: function (e) {
                  return Vo.setFromEuler(this), this.setFromQuaternion(Vo, e);
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e._x === this._x &&
                    e._y === this._y &&
                    e._z === this._z &&
                    e._order === this._order
                  );
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  return (
                    (this._x = e[0]),
                    (this._y = e[1]),
                    (this._z = e[2]),
                    void 0 !== e[3] && (this._order = e[3]),
                    this._onChangeCallback(),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this._x),
                    (e[t + 1] = this._y),
                    (e[t + 2] = this._z),
                    (e[t + 3] = this._order),
                    e
                  );
                }
              },
              {
                key: "_onChange",
                value: function (e) {
                  return (this._onChangeCallback = e), this;
                }
              },
              { key: "_onChangeCallback", value: function () {} },
              {
                key: Symbol.iterator,
                value: Ii().mark(function e() {
                  return Ii().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this._x;
                          case 2:
                            return (e.next = 4), this._y;
                          case 4:
                            return (e.next = 6), this._z;
                          case 6:
                            return (e.next = 8), this._order;
                          case 8:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]),
            t
          );
        })();
      Ho.DEFAULT_ORDER = "XYZ";
      var Go = (function () {
          function e() {
            Fi(this, e), (this.mask = 1);
          }
          return (
            Ni(e, [
              {
                key: "set",
                value: function (e) {
                  this.mask = ((1 << e) | 0) >>> 0;
                }
              },
              {
                key: "enable",
                value: function (e) {
                  this.mask |= (1 << e) | 0;
                }
              },
              {
                key: "enableAll",
                value: function () {
                  this.mask = -1;
                }
              },
              {
                key: "toggle",
                value: function (e) {
                  this.mask ^= (1 << e) | 0;
                }
              },
              {
                key: "disable",
                value: function (e) {
                  this.mask &= ~((1 << e) | 0);
                }
              },
              {
                key: "disableAll",
                value: function () {
                  this.mask = 0;
                }
              },
              {
                key: "test",
                value: function (e) {
                  return 0 != (this.mask & e.mask);
                }
              },
              {
                key: "isEnabled",
                value: function (e) {
                  return 0 != (this.mask & ((1 << e) | 0));
                }
              }
            ]),
            e
          );
        })(),
        Wo = 0,
        jo = new to(),
        Xo = new eo(),
        qo = new Do(),
        Yo = new to(),
        Ko = new to(),
        Zo = new to(),
        Jo = new eo(),
        $o = new to(1, 0, 0),
        Qo = new to(0, 1, 0),
        el = new to(0, 0, 1),
        tl = { type: "added" },
        nl = { type: "removed" },
        rl = (function (e) {
          function t() {
            var e;
            Fi(this, t),
              ((e = Mi(this, t)).isObject3D = !0),
              Object.defineProperty(Pi(e), "id", { value: Wo++ }),
              (e.uuid = ys()),
              (e.name = ""),
              (e.type = "Object3D"),
              (e.parent = null),
              (e.children = []),
              (e.up = t.DEFAULT_UP.clone());
            var n = new to(),
              r = new Ho(),
              i = new eo(),
              a = new to(1, 1, 1);
            return (
              r._onChange(function () {
                i.setFromEuler(r, !1);
              }),
              i._onChange(function () {
                r.setFromQuaternion(i, void 0, !1);
              }),
              Object.defineProperties(Pi(e), {
                position: { configurable: !0, enumerable: !0, value: n },
                rotation: { configurable: !0, enumerable: !0, value: r },
                quaternion: { configurable: !0, enumerable: !0, value: i },
                scale: { configurable: !0, enumerable: !0, value: a },
                modelViewMatrix: { value: new Do() },
                normalMatrix: { value: new Ps() }
              }),
              (e.matrix = new Do()),
              (e.matrixWorld = new Do()),
              (e.matrixAutoUpdate = t.DEFAULT_MATRIX_AUTO_UPDATE),
              (e.matrixWorldAutoUpdate = t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE),
              (e.matrixWorldNeedsUpdate = !1),
              (e.layers = new Go()),
              (e.visible = !0),
              (e.castShadow = !1),
              (e.receiveShadow = !1),
              (e.frustumCulled = !0),
              (e.renderOrder = 0),
              (e.animations = []),
              (e.userData = {}),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              { key: "onBeforeShadow", value: function () {} },
              { key: "onAfterShadow", value: function () {} },
              { key: "onBeforeRender", value: function () {} },
              { key: "onAfterRender", value: function () {} },
              {
                key: "applyMatrix4",
                value: function (e) {
                  this.matrixAutoUpdate && this.updateMatrix(),
                    this.matrix.premultiply(e),
                    this.matrix.decompose(
                      this.position,
                      this.quaternion,
                      this.scale
                    );
                }
              },
              {
                key: "applyQuaternion",
                value: function (e) {
                  return this.quaternion.premultiply(e), this;
                }
              },
              {
                key: "setRotationFromAxisAngle",
                value: function (e, t) {
                  this.quaternion.setFromAxisAngle(e, t);
                }
              },
              {
                key: "setRotationFromEuler",
                value: function (e) {
                  this.quaternion.setFromEuler(e, !0);
                }
              },
              {
                key: "setRotationFromMatrix",
                value: function (e) {
                  this.quaternion.setFromRotationMatrix(e);
                }
              },
              {
                key: "setRotationFromQuaternion",
                value: function (e) {
                  this.quaternion.copy(e);
                }
              },
              {
                key: "rotateOnAxis",
                value: function (e, t) {
                  return (
                    Xo.setFromAxisAngle(e, t), this.quaternion.multiply(Xo), this
                  );
                }
              },
              {
                key: "rotateOnWorldAxis",
                value: function (e, t) {
                  return (
                    Xo.setFromAxisAngle(e, t),
                    this.quaternion.premultiply(Xo),
                    this
                  );
                }
              },
              {
                key: "rotateX",
                value: function (e) {
                  return this.rotateOnAxis($o, e);
                }
              },
              {
                key: "rotateY",
                value: function (e) {
                  return this.rotateOnAxis(Qo, e);
                }
              },
              {
                key: "rotateZ",
                value: function (e) {
                  return this.rotateOnAxis(el, e);
                }
              },
              {
                key: "translateOnAxis",
                value: function (e, t) {
                  return (
                    jo.copy(e).applyQuaternion(this.quaternion),
                    this.position.add(jo.multiplyScalar(t)),
                    this
                  );
                }
              },
              {
                key: "translateX",
                value: function (e) {
                  return this.translateOnAxis($o, e);
                }
              },
              {
                key: "translateY",
                value: function (e) {
                  return this.translateOnAxis(Qo, e);
                }
              },
              {
                key: "translateZ",
                value: function (e) {
                  return this.translateOnAxis(el, e);
                }
              },
              {
                key: "localToWorld",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    e.applyMatrix4(this.matrixWorld)
                  );
                }
              },
              {
                key: "worldToLocal",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    e.applyMatrix4(qo.copy(this.matrixWorld).invert())
                  );
                }
              },
              {
                key: "lookAt",
                value: function (e, t, n) {
                  e.isVector3 ? Yo.copy(e) : Yo.set(e, t, n);
                  var r = this.parent;
                  this.updateWorldMatrix(!0, !1),
                    Ko.setFromMatrixPosition(this.matrixWorld),
                    this.isCamera || this.isLight
                      ? qo.lookAt(Ko, Yo, this.up)
                      : qo.lookAt(Yo, Ko, this.up),
                    this.quaternion.setFromRotationMatrix(qo),
                    r &&
                      (qo.extractRotation(r.matrixWorld),
                      Xo.setFromRotationMatrix(qo),
                      this.quaternion.premultiply(Xo.invert()));
                }
              },
              {
                key: "add",
                value: function (e) {
                  if (arguments.length > 1) {
                    for (var t = 0; t < arguments.length; t++)
                      this.add(arguments[t]);
                    return this;
                  }
                  return e === this
                    ? (console.error(
                        "THREE.Object3D.add: object can't be added as a child of itself.",
                        e
                      ),
                      this)
                    : (e && e.isObject3D
                        ? (null !== e.parent && e.parent.remove(e),
                          (e.parent = this),
                          this.children.push(e),
                          e.dispatchEvent(tl))
                        : console.error(
                            "THREE.Object3D.add: object not an instance of THREE.Object3D.",
                            e
                          ),
                      this);
                }
              },
              {
                key: "remove",
                value: function (e) {
                  if (arguments.length > 1) {
                    for (var t = 0; t < arguments.length; t++)
                      this.remove(arguments[t]);
                    return this;
                  }
                  var n = this.children.indexOf(e);
                  return (
                    -1 !== n &&
                      ((e.parent = null),
                      this.children.splice(n, 1),
                      e.dispatchEvent(nl)),
                    this
                  );
                }
              },
              {
                key: "removeFromParent",
                value: function () {
                  var e = this.parent;
                  return null !== e && e.remove(this), this;
                }
              },
              {
                key: "clear",
                value: function () {
                  return this.remove.apply(this, Ei(this.children));
                }
              },
              {
                key: "attach",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    qo.copy(this.matrixWorld).invert(),
                    null !== e.parent &&
                      (e.parent.updateWorldMatrix(!0, !1),
                      qo.multiply(e.parent.matrixWorld)),
                    e.applyMatrix4(qo),
                    this.add(e),
                    e.updateWorldMatrix(!1, !0),
                    this
                  );
                }
              },
              {
                key: "getObjectById",
                value: function (e) {
                  return this.getObjectByProperty("id", e);
                }
              },
              {
                key: "getObjectByName",
                value: function (e) {
                  return this.getObjectByProperty("name", e);
                }
              },
              {
                key: "getObjectByProperty",
                value: function (e, t) {
                  if (this[e] === t) return this;
                  for (var n = 0, r = this.children.length; n < r; n++) {
                    var i = this.children[n].getObjectByProperty(e, t);
                    if (void 0 !== i) return i;
                  }
                }
              },
              {
                key: "getObjectsByProperty",
                value: function (e, t) {
                  var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : [];
                  this[e] === t && n.push(this);
                  for (var r = this.children, i = 0, a = r.length; i < a; i++)
                    r[i].getObjectsByProperty(e, t, n);
                  return n;
                }
              },
              {
                key: "getWorldPosition",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    e.setFromMatrixPosition(this.matrixWorld)
                  );
                }
              },
              {
                key: "getWorldQuaternion",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    this.matrixWorld.decompose(Ko, e, Zo),
                    e
                  );
                }
              },
              {
                key: "getWorldScale",
                value: function (e) {
                  return (
                    this.updateWorldMatrix(!0, !1),
                    this.matrixWorld.decompose(Ko, Jo, e),
                    e
                  );
                }
              },
              {
                key: "getWorldDirection",
                value: function (e) {
                  this.updateWorldMatrix(!0, !1);
                  var t = this.matrixWorld.elements;
                  return e.set(t[8], t[9], t[10]).normalize();
                }
              },
              { key: "raycast", value: function () {} },
              {
                key: "traverse",
                value: function (e) {
                  e(this);
                  for (var t = this.children, n = 0, r = t.length; n < r; n++)
                    t[n].traverse(e);
                }
              },
              {
                key: "traverseVisible",
                value: function (e) {
                  if (!1 !== this.visible) {
                    e(this);
                    for (var t = this.children, n = 0, r = t.length; n < r; n++)
                      t[n].traverseVisible(e);
                  }
                }
              },
              {
                key: "traverseAncestors",
                value: function (e) {
                  var t = this.parent;
                  null !== t && (e(t), t.traverseAncestors(e));
                }
              },
              {
                key: "updateMatrix",
                value: function () {
                  this.matrix.compose(this.position, this.quaternion, this.scale),
                    (this.matrixWorldNeedsUpdate = !0);
                }
              },
              {
                key: "updateMatrixWorld",
                value: function (e) {
                  this.matrixAutoUpdate && this.updateMatrix(),
                    (this.matrixWorldNeedsUpdate || e) &&
                      (null === this.parent
                        ? this.matrixWorld.copy(this.matrix)
                        : this.matrixWorld.multiplyMatrices(
                            this.parent.matrixWorld,
                            this.matrix
                          ),
                      (this.matrixWorldNeedsUpdate = !1),
                      (e = !0));
                  for (var t = this.children, n = 0, r = t.length; n < r; n++) {
                    var i = t[n];
                    (!0 !== i.matrixWorldAutoUpdate && !0 !== e) ||
                      i.updateMatrixWorld(e);
                  }
                }
              },
              {
                key: "updateWorldMatrix",
                value: function (e, t) {
                  var n = this.parent;
                  if (
                    (!0 === e &&
                      null !== n &&
                      !0 === n.matrixWorldAutoUpdate &&
                      n.updateWorldMatrix(!0, !1),
                    this.matrixAutoUpdate && this.updateMatrix(),
                    null === this.parent
                      ? this.matrixWorld.copy(this.matrix)
                      : this.matrixWorld.multiplyMatrices(
                          this.parent.matrixWorld,
                          this.matrix
                        ),
                    !0 === t)
                  )
                    for (var r = this.children, i = 0, a = r.length; i < a; i++) {
                      var s = r[i];
                      !0 === s.matrixWorldAutoUpdate &&
                        s.updateWorldMatrix(!1, !0);
                    }
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var t = void 0 === e || "string" == typeof e,
                    n = {};
                  t &&
                    ((e = {
                      geometries: {},
                      materials: {},
                      textures: {},
                      images: {},
                      shapes: {},
                      skeletons: {},
                      animations: {},
                      nodes: {}
                    }),
                    (n.metadata = {
                      version: 4.6,
                      type: "Object",
                      generator: "Object3D.toJSON"
                    }));
                  var r = {};
                  function i(t, n) {
                    return (
                      void 0 === t[n.uuid] && (t[n.uuid] = n.toJSON(e)), n.uuid
                    );
                  }
                  if (
                    ((r.uuid = this.uuid),
                    (r.type = this.type),
                    "" !== this.name && (r.name = this.name),
                    !0 === this.castShadow && (r.castShadow = !0),
                    !0 === this.receiveShadow && (r.receiveShadow = !0),
                    !1 === this.visible && (r.visible = !1),
                    !1 === this.frustumCulled && (r.frustumCulled = !1),
                    0 !== this.renderOrder && (r.renderOrder = this.renderOrder),
                    Object.keys(this.userData).length > 0 &&
                      (r.userData = this.userData),
                    (r.layers = this.layers.mask),
                    (r.matrix = this.matrix.toArray()),
                    (r.up = this.up.toArray()),
                    !1 === this.matrixAutoUpdate && (r.matrixAutoUpdate = !1),
                    this.isInstancedMesh &&
                      ((r.type = "InstancedMesh"),
                      (r.count = this.count),
                      (r.instanceMatrix = this.instanceMatrix.toJSON()),
                      null !== this.instanceColor &&
                        (r.instanceColor = this.instanceColor.toJSON())),
                    this.isBatchedMesh &&
                      ((r.type = "BatchedMesh"),
                      (r.perObjectFrustumCulled = this.perObjectFrustumCulled),
                      (r.sortObjects = this.sortObjects),
                      (r.drawRanges = this._drawRanges),
                      (r.reservedRanges = this._reservedRanges),
                      (r.visibility = this._visibility),
                      (r.active = this._active),
                      (r.bounds = this._bounds.map(function (e) {
                        return {
                          boxInitialized: e.boxInitialized,
                          boxMin: e.box.min.toArray(),
                          boxMax: e.box.max.toArray(),
                          sphereInitialized: e.sphereInitialized,
                          sphereRadius: e.sphere.radius,
                          sphereCenter: e.sphere.center.toArray()
                        };
                      })),
                      (r.maxGeometryCount = this._maxGeometryCount),
                      (r.maxVertexCount = this._maxVertexCount),
                      (r.maxIndexCount = this._maxIndexCount),
                      (r.geometryInitialized = this._geometryInitialized),
                      (r.geometryCount = this._geometryCount),
                      (r.matricesTexture = this._matricesTexture.toJSON(e)),
                      null !== this.boundingSphere &&
                        (r.boundingSphere = {
                          center: r.boundingSphere.center.toArray(),
                          radius: r.boundingSphere.radius
                        }),
                      null !== this.boundingBox &&
                        (r.boundingBox = {
                          min: r.boundingBox.min.toArray(),
                          max: r.boundingBox.max.toArray()
                        })),
                    this.isScene)
                  )
                    this.background &&
                      (this.background.isColor
                        ? (r.background = this.background.toJSON())
                        : this.background.isTexture &&
                          (r.background = this.background.toJSON(e).uuid)),
                      this.environment &&
                        this.environment.isTexture &&
                        !0 !== this.environment.isRenderTargetTexture &&
                        (r.environment = this.environment.toJSON(e).uuid);
                  else if (this.isMesh || this.isLine || this.isPoints) {
                    r.geometry = i(e.geometries, this.geometry);
                    var a = this.geometry.parameters;
                    if (void 0 !== a && void 0 !== a.shapes) {
                      var s = a.shapes;
                      if (Array.isArray(s))
                        for (var o = 0, l = s.length; o < l; o++) {
                          var h = s[o];
                          i(e.shapes, h);
                        }
                      else i(e.shapes, s);
                    }
                  }
                  if (
                    (this.isSkinnedMesh &&
                      ((r.bindMode = this.bindMode),
                      (r.bindMatrix = this.bindMatrix.toArray()),
                      void 0 !== this.skeleton &&
                        (i(e.skeletons, this.skeleton),
                        (r.skeleton = this.skeleton.uuid))),
                    void 0 !== this.material)
                  )
                    if (Array.isArray(this.material)) {
                      for (
                        var u = [], c = 0, d = this.material.length;
                        c < d;
                        c++
                      )
                        u.push(i(e.materials, this.material[c]));
                      r.material = u;
                    } else r.material = i(e.materials, this.material);
                  if (this.children.length > 0) {
                    r.children = [];
                    for (var f = 0; f < this.children.length; f++)
                      r.children.push(this.children[f].toJSON(e).object);
                  }
                  if (this.animations.length > 0) {
                    r.animations = [];
                    for (var p = 0; p < this.animations.length; p++) {
                      var m = this.animations[p];
                      r.animations.push(i(e.animations, m));
                    }
                  }
                  if (t) {
                    var g = w(e.geometries),
                      v = w(e.materials),
                      y = w(e.textures),
                      _ = w(e.images),
                      b = w(e.shapes),
                      x = w(e.skeletons),
                      S = w(e.animations),
                      E = w(e.nodes);
                    g.length > 0 && (n.geometries = g),
                      v.length > 0 && (n.materials = v),
                      y.length > 0 && (n.textures = y),
                      _.length > 0 && (n.images = _),
                      b.length > 0 && (n.shapes = b),
                      x.length > 0 && (n.skeletons = x),
                      S.length > 0 && (n.animations = S),
                      E.length > 0 && (n.nodes = E);
                  }
                  return (n.object = r), n;
                  function w(e) {
                    var t = [];
                    for (var n in e) {
                      var r = e[n];
                      delete r.metadata, t.push(r);
                    }
                    return t;
                  }
                }
              },
              {
                key: "clone",
                value: function (e) {
                  return new this.constructor().copy(this, e);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  var t =
                    !(arguments.length > 1 && void 0 !== arguments[1]) ||
                    arguments[1];
                  if (
                    ((this.name = e.name),
                    this.up.copy(e.up),
                    this.position.copy(e.position),
                    (this.rotation.order = e.rotation.order),
                    this.quaternion.copy(e.quaternion),
                    this.scale.copy(e.scale),
                    this.matrix.copy(e.matrix),
                    this.matrixWorld.copy(e.matrixWorld),
                    (this.matrixAutoUpdate = e.matrixAutoUpdate),
                    (this.matrixWorldAutoUpdate = e.matrixWorldAutoUpdate),
                    (this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate),
                    (this.layers.mask = e.layers.mask),
                    (this.visible = e.visible),
                    (this.castShadow = e.castShadow),
                    (this.receiveShadow = e.receiveShadow),
                    (this.frustumCulled = e.frustumCulled),
                    (this.renderOrder = e.renderOrder),
                    (this.animations = e.animations.slice()),
                    (this.userData = JSON.parse(JSON.stringify(e.userData))),
                    !0 === t)
                  )
                    for (var n = 0; n < e.children.length; n++) {
                      var r = e.children[n];
                      this.add(r.clone());
                    }
                  return this;
                }
              }
            ]),
            t
          );
        })(ps);
      (rl.DEFAULT_UP = new to(0, 1, 0)),
        (rl.DEFAULT_MATRIX_AUTO_UPDATE = !0),
        (rl.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = !0);
      var il = new to(),
        al = new to(),
        sl = new to(),
        ol = new to(),
        ll = new to(),
        hl = new to(),
        ul = new to(),
        cl = new to(),
        dl = new to(),
        fl = new to(),
        pl = !1,
        ml = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new to(),
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new to(),
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : new to();
            Fi(this, e), (this.a = t), (this.b = n), (this.c = r);
          }
          return (
            Ni(
              e,
              [
                {
                  key: "set",
                  value: function (e, t, n) {
                    return this.a.copy(e), this.b.copy(t), this.c.copy(n), this;
                  }
                },
                {
                  key: "setFromPointsAndIndices",
                  value: function (e, t, n, r) {
                    return (
                      this.a.copy(e[t]),
                      this.b.copy(e[n]),
                      this.c.copy(e[r]),
                      this
                    );
                  }
                },
                {
                  key: "setFromAttributeAndIndices",
                  value: function (e, t, n, r) {
                    return (
                      this.a.fromBufferAttribute(e, t),
                      this.b.fromBufferAttribute(e, n),
                      this.c.fromBufferAttribute(e, r),
                      this
                    );
                  }
                },
                {
                  key: "clone",
                  value: function () {
                    return new this.constructor().copy(this);
                  }
                },
                {
                  key: "copy",
                  value: function (e) {
                    return (
                      this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this
                    );
                  }
                },
                {
                  key: "getArea",
                  value: function () {
                    return (
                      il.subVectors(this.c, this.b),
                      al.subVectors(this.a, this.b),
                      0.5 * il.cross(al).length()
                    );
                  }
                },
                {
                  key: "getMidpoint",
                  value: function (e) {
                    return e
                      .addVectors(this.a, this.b)
                      .add(this.c)
                      .multiplyScalar(1 / 3);
                  }
                },
                {
                  key: "getNormal",
                  value: function (t) {
                    return e.getNormal(this.a, this.b, this.c, t);
                  }
                },
                {
                  key: "getPlane",
                  value: function (e) {
                    return e.setFromCoplanarPoints(this.a, this.b, this.c);
                  }
                },
                {
                  key: "getBarycoord",
                  value: function (t, n) {
                    return e.getBarycoord(t, this.a, this.b, this.c, n);
                  }
                },
                {
                  key: "getUV",
                  value: function (t, n, r, i, a) {
                    return (
                      !1 === pl &&
                        (console.warn(
                          "THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."
                        ),
                        (pl = !0)),
                      e.getInterpolation(t, this.a, this.b, this.c, n, r, i, a)
                    );
                  }
                },
                {
                  key: "getInterpolation",
                  value: function (t, n, r, i, a) {
                    return e.getInterpolation(
                      t,
                      this.a,
                      this.b,
                      this.c,
                      n,
                      r,
                      i,
                      a
                    );
                  }
                },
                {
                  key: "containsPoint",
                  value: function (t) {
                    return e.containsPoint(t, this.a, this.b, this.c);
                  }
                },
                {
                  key: "isFrontFacing",
                  value: function (t) {
                    return e.isFrontFacing(this.a, this.b, this.c, t);
                  }
                },
                {
                  key: "intersectsBox",
                  value: function (e) {
                    return e.intersectsTriangle(this);
                  }
                },
                {
                  key: "closestPointToPoint",
                  value: function (e, t) {
                    var n,
                      r,
                      i = this.a,
                      a = this.b,
                      s = this.c;
                    ll.subVectors(a, i), hl.subVectors(s, i), cl.subVectors(e, i);
                    var o = ll.dot(cl),
                      l = hl.dot(cl);
                    if (o <= 0 && l <= 0) return t.copy(i);
                    dl.subVectors(e, a);
                    var h = ll.dot(dl),
                      u = hl.dot(dl);
                    if (h >= 0 && u <= h) return t.copy(a);
                    var c = o * u - h * l;
                    if (c <= 0 && o >= 0 && h <= 0)
                      return (n = o / (o - h)), t.copy(i).addScaledVector(ll, n);
                    fl.subVectors(e, s);
                    var d = ll.dot(fl),
                      f = hl.dot(fl);
                    if (f >= 0 && d <= f) return t.copy(s);
                    var p = d * l - o * f;
                    if (p <= 0 && l >= 0 && f <= 0)
                      return (r = l / (l - f)), t.copy(i).addScaledVector(hl, r);
                    var m = h * f - d * u;
                    if (m <= 0 && u - h >= 0 && d - f >= 0)
                      return (
                        ul.subVectors(s, a),
                        (r = (u - h) / (u - h + (d - f))),
                        t.copy(a).addScaledVector(ul, r)
                      );
                    var g = 1 / (m + p + c);
                    return (
                      (n = p * g),
                      (r = c * g),
                      t.copy(i).addScaledVector(ll, n).addScaledVector(hl, r)
                    );
                  }
                },
                {
                  key: "equals",
                  value: function (e) {
                    return (
                      e.a.equals(this.a) &&
                      e.b.equals(this.b) &&
                      e.c.equals(this.c)
                    );
                  }
                }
              ],
              [
                {
                  key: "getNormal",
                  value: function (e, t, n, r) {
                    r.subVectors(n, t), il.subVectors(e, t), r.cross(il);
                    var i = r.lengthSq();
                    return i > 0
                      ? r.multiplyScalar(1 / Math.sqrt(i))
                      : r.set(0, 0, 0);
                  }
                },
                {
                  key: "getBarycoord",
                  value: function (e, t, n, r, i) {
                    il.subVectors(r, t), al.subVectors(n, t), sl.subVectors(e, t);
                    var a = il.dot(il),
                      s = il.dot(al),
                      o = il.dot(sl),
                      l = al.dot(al),
                      h = al.dot(sl),
                      u = a * l - s * s;
                    if (0 === u) return i.set(0, 0, 0), null;
                    var c = 1 / u,
                      d = (l * o - s * h) * c,
                      f = (a * h - s * o) * c;
                    return i.set(1 - d - f, f, d);
                  }
                },
                {
                  key: "containsPoint",
                  value: function (e, t, n, r) {
                    return (
                      null !== this.getBarycoord(e, t, n, r, ol) &&
                      ol.x >= 0 &&
                      ol.y >= 0 &&
                      ol.x + ol.y <= 1
                    );
                  }
                },
                {
                  key: "getUV",
                  value: function (e, t, n, r, i, a, s, o) {
                    return (
                      !1 === pl &&
                        (console.warn(
                          "THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."
                        ),
                        (pl = !0)),
                      this.getInterpolation(e, t, n, r, i, a, s, o)
                    );
                  }
                },
                {
                  key: "getInterpolation",
                  value: function (e, t, n, r, i, a, s, o) {
                    return null === this.getBarycoord(e, t, n, r, ol)
                      ? ((o.x = 0),
                        (o.y = 0),
                        "z" in o && (o.z = 0),
                        "w" in o && (o.w = 0),
                        null)
                      : (o.setScalar(0),
                        o.addScaledVector(i, ol.x),
                        o.addScaledVector(a, ol.y),
                        o.addScaledVector(s, ol.z),
                        o);
                  }
                },
                {
                  key: "isFrontFacing",
                  value: function (e, t, n, r) {
                    return (
                      il.subVectors(n, t),
                      al.subVectors(e, t),
                      il.cross(al).dot(r) < 0
                    );
                  }
                }
              ]
            ),
            e
          );
        })(),
        gl = {
          aliceblue: 15792383,
          antiquewhite: 16444375,
          aqua: 65535,
          aquamarine: 8388564,
          azure: 15794175,
          beige: 16119260,
          bisque: 16770244,
          black: 0,
          blanchedalmond: 16772045,
          blue: 255,
          blueviolet: 9055202,
          brown: 10824234,
          burlywood: 14596231,
          cadetblue: 6266528,
          chartreuse: 8388352,
          chocolate: 13789470,
          coral: 16744272,
          cornflowerblue: 6591981,
          cornsilk: 16775388,
          crimson: 14423100,
          cyan: 65535,
          darkblue: 139,
          darkcyan: 35723,
          darkgoldenrod: 12092939,
          darkgray: 11119017,
          darkgreen: 25600,
          darkgrey: 11119017,
          darkkhaki: 12433259,
          darkmagenta: 9109643,
          darkolivegreen: 5597999,
          darkorange: 16747520,
          darkorchid: 10040012,
          darkred: 9109504,
          darksalmon: 15308410,
          darkseagreen: 9419919,
          darkslateblue: 4734347,
          darkslategray: 3100495,
          darkslategrey: 3100495,
          darkturquoise: 52945,
          darkviolet: 9699539,
          deeppink: 16716947,
          deepskyblue: 49151,
          dimgray: 6908265,
          dimgrey: 6908265,
          dodgerblue: 2003199,
          firebrick: 11674146,
          floralwhite: 16775920,
          forestgreen: 2263842,
          fuchsia: 16711935,
          gainsboro: 14474460,
          ghostwhite: 16316671,
          gold: 16766720,
          goldenrod: 14329120,
          gray: 8421504,
          green: 32768,
          greenyellow: 11403055,
          grey: 8421504,
          honeydew: 15794160,
          hotpink: 16738740,
          indianred: 13458524,
          indigo: 4915330,
          ivory: 16777200,
          khaki: 15787660,
          lavender: 15132410,
          lavenderblush: 16773365,
          lawngreen: 8190976,
          lemonchiffon: 16775885,
          lightblue: 11393254,
          lightcoral: 15761536,
          lightcyan: 14745599,
          lightgoldenrodyellow: 16448210,
          lightgray: 13882323,
          lightgreen: 9498256,
          lightgrey: 13882323,
          lightpink: 16758465,
          lightsalmon: 16752762,
          lightseagreen: 2142890,
          lightskyblue: 8900346,
          lightslategray: 7833753,
          lightslategrey: 7833753,
          lightsteelblue: 11584734,
          lightyellow: 16777184,
          lime: 65280,
          limegreen: 3329330,
          linen: 16445670,
          magenta: 16711935,
          maroon: 8388608,
          mediumaquamarine: 6737322,
          mediumblue: 205,
          mediumorchid: 12211667,
          mediumpurple: 9662683,
          mediumseagreen: 3978097,
          mediumslateblue: 8087790,
          mediumspringgreen: 64154,
          mediumturquoise: 4772300,
          mediumvioletred: 13047173,
          midnightblue: 1644912,
          mintcream: 16121850,
          mistyrose: 16770273,
          moccasin: 16770229,
          navajowhite: 16768685,
          navy: 128,
          oldlace: 16643558,
          olive: 8421376,
          olivedrab: 7048739,
          orange: 16753920,
          orangered: 16729344,
          orchid: 14315734,
          palegoldenrod: 15657130,
          palegreen: 10025880,
          paleturquoise: 11529966,
          palevioletred: 14381203,
          papayawhip: 16773077,
          peachpuff: 16767673,
          peru: 13468991,
          pink: 16761035,
          plum: 14524637,
          powderblue: 11591910,
          purple: 8388736,
          rebeccapurple: 6697881,
          red: 16711680,
          rosybrown: 12357519,
          royalblue: 4286945,
          saddlebrown: 9127187,
          salmon: 16416882,
          sandybrown: 16032864,
          seagreen: 3050327,
          seashell: 16774638,
          sienna: 10506797,
          silver: 12632256,
          skyblue: 8900331,
          slateblue: 6970061,
          slategray: 7372944,
          slategrey: 7372944,
          snow: 16775930,
          springgreen: 65407,
          steelblue: 4620980,
          tan: 13808780,
          teal: 32896,
          thistle: 14204888,
          tomato: 16737095,
          turquoise: 4251856,
          violet: 15631086,
          wheat: 16113331,
          white: 16777215,
          whitesmoke: 16119285,
          yellow: 16776960,
          yellowgreen: 10145074
        },
        vl = { h: 0, s: 0, l: 0 },
        yl = { h: 0, s: 0, l: 0 };
      function _l(e, t, n) {
        return (
          n < 0 && (n += 1),
          n > 1 && (n -= 1),
          n < 1 / 6
            ? e + 6 * (t - e) * n
            : n < 0.5
            ? t
            : n < 2 / 3
            ? e + 6 * (t - e) * (2 / 3 - n)
            : e
        );
      }
      var bl = (function (e) {
          function t(e, n, r) {
            return (
              Fi(this, t),
              (this.isColor = !0),
              (this.r = 1),
              (this.g = 1),
              (this.b = 1),
              this.set(e, n, r)
            );
          }
          return (
            Ni(t, [
              {
                key: "set",
                value: function (e, t, n) {
                  if (void 0 === t && void 0 === n) {
                    var r = e;
                    r && r.isColor
                      ? this.copy(r)
                      : "number" == typeof r
                      ? this.setHex(r)
                      : "string" == typeof r && this.setStyle(r);
                  } else this.setRGB(e, t, n);
                  return this;
                }
              },
              {
                key: "setScalar",
                value: function (e) {
                  return (this.r = e), (this.g = e), (this.b = e), this;
                }
              },
              {
                key: "setHex",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : es;
                  return (
                    (e = Math.floor(e)),
                    (this.r = ((e >> 16) & 255) / 255),
                    (this.g = ((e >> 8) & 255) / 255),
                    (this.b = (255 & e) / 255),
                    Vs.toWorkingColorSpace(this, t),
                    this
                  );
                }
              },
              {
                key: "setRGB",
                value: function (e, t, n) {
                  var r =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : Vs.workingColorSpace;
                  return (
                    (this.r = e),
                    (this.g = t),
                    (this.b = n),
                    Vs.toWorkingColorSpace(this, r),
                    this
                  );
                }
              },
              {
                key: "setHSL",
                value: function (e, t, n) {
                  var r =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : Vs.workingColorSpace;
                  if (
                    ((e = bs(e, 1)),
                    (t = _s(t, 0, 1)),
                    (n = _s(n, 0, 1)),
                    0 === t)
                  )
                    this.r = this.g = this.b = n;
                  else {
                    var i = n <= 0.5 ? n * (1 + t) : n + t - n * t,
                      a = 2 * n - i;
                    (this.r = _l(a, i, e + 1 / 3)),
                      (this.g = _l(a, i, e)),
                      (this.b = _l(a, i, e - 1 / 3));
                  }
                  return Vs.toWorkingColorSpace(this, r), this;
                }
              },
              {
                key: "setStyle",
                value: function (e) {
                  var t,
                    n =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : es;
                  function r(t) {
                    void 0 !== t &&
                      parseFloat(t) < 1 &&
                      console.warn(
                        "THREE.Color: Alpha component of " +
                          e +
                          " will be ignored."
                      );
                  }
                  if ((t = /^(\w+)\(([^\)]*)\)/.exec(e))) {
                    var i,
                      a = t[1],
                      s = t[2];
                    switch (a) {
                      case "rgb":
                      case "rgba":
                        if (
                          (i =
                            /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                              s
                            ))
                        )
                          return (
                            r(i[4]),
                            this.setRGB(
                              Math.min(255, parseInt(i[1], 10)) / 255,
                              Math.min(255, parseInt(i[2], 10)) / 255,
                              Math.min(255, parseInt(i[3], 10)) / 255,
                              n
                            )
                          );
                        if (
                          (i =
                            /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                              s
                            ))
                        )
                          return (
                            r(i[4]),
                            this.setRGB(
                              Math.min(100, parseInt(i[1], 10)) / 100,
                              Math.min(100, parseInt(i[2], 10)) / 100,
                              Math.min(100, parseInt(i[3], 10)) / 100,
                              n
                            )
                          );
                        break;
                      case "hsl":
                      case "hsla":
                        if (
                          (i =
                            /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(
                              s
                            ))
                        )
                          return (
                            r(i[4]),
                            this.setHSL(
                              parseFloat(i[1]) / 360,
                              parseFloat(i[2]) / 100,
                              parseFloat(i[3]) / 100,
                              n
                            )
                          );
                        break;
                      default:
                        console.warn("THREE.Color: Unknown color model " + e);
                    }
                  } else if ((t = /^\#([A-Fa-f\d]+)$/.exec(e))) {
                    var o = t[1],
                      l = o.length;
                    if (3 === l)
                      return this.setRGB(
                        parseInt(o.charAt(0), 16) / 15,
                        parseInt(o.charAt(1), 16) / 15,
                        parseInt(o.charAt(2), 16) / 15,
                        n
                      );
                    if (6 === l) return this.setHex(parseInt(o, 16), n);
                    console.warn("THREE.Color: Invalid hex color " + e);
                  } else if (e && e.length > 0) return this.setColorName(e, n);
                  return this;
                }
              },
              {
                key: "setColorName",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : es,
                    n = gl[e.toLowerCase()];
                  return (
                    void 0 !== n
                      ? this.setHex(n, t)
                      : console.warn("THREE.Color: Unknown color " + e),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.r, this.g, this.b);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (this.r = e.r), (this.g = e.g), (this.b = e.b), this;
                }
              },
              {
                key: "copySRGBToLinear",
                value: function (e) {
                  return (
                    (this.r = Hs(e.r)),
                    (this.g = Hs(e.g)),
                    (this.b = Hs(e.b)),
                    this
                  );
                }
              },
              {
                key: "copyLinearToSRGB",
                value: function (e) {
                  return (
                    (this.r = Gs(e.r)),
                    (this.g = Gs(e.g)),
                    (this.b = Gs(e.b)),
                    this
                  );
                }
              },
              {
                key: "convertSRGBToLinear",
                value: function () {
                  return this.copySRGBToLinear(this), this;
                }
              },
              {
                key: "convertLinearToSRGB",
                value: function () {
                  return this.copyLinearToSRGB(this), this;
                }
              },
              {
                key: "getHex",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : es;
                  return (
                    Vs.fromWorkingColorSpace(xl.copy(this), e),
                    65536 * Math.round(_s(255 * xl.r, 0, 255)) +
                      256 * Math.round(_s(255 * xl.g, 0, 255)) +
                      Math.round(_s(255 * xl.b, 0, 255))
                  );
                }
              },
              {
                key: "getHexString",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : es;
                  return ("000000" + this.getHex(e).toString(16)).slice(-6);
                }
              },
              {
                key: "getHSL",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : Vs.workingColorSpace;
                  Vs.fromWorkingColorSpace(xl.copy(this), t);
                  var n,
                    r,
                    i = xl.r,
                    a = xl.g,
                    s = xl.b,
                    o = Math.max(i, a, s),
                    l = Math.min(i, a, s),
                    h = (l + o) / 2;
                  if (l === o) (n = 0), (r = 0);
                  else {
                    var u = o - l;
                    switch (((r = h <= 0.5 ? u / (o + l) : u / (2 - o - l)), o)) {
                      case i:
                        n = (a - s) / u + (a < s ? 6 : 0);
                        break;
                      case a:
                        n = (s - i) / u + 2;
                        break;
                      case s:
                        n = (i - a) / u + 4;
                    }
                    n /= 6;
                  }
                  return (e.h = n), (e.s = r), (e.l = h), e;
                }
              },
              {
                key: "getRGB",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : Vs.workingColorSpace;
                  return (
                    Vs.fromWorkingColorSpace(xl.copy(this), t),
                    (e.r = xl.r),
                    (e.g = xl.g),
                    (e.b = xl.b),
                    e
                  );
                }
              },
              {
                key: "getStyle",
                value: function () {
                  var e =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : es;
                  Vs.fromWorkingColorSpace(xl.copy(this), e);
                  var t = xl.r,
                    n = xl.g,
                    r = xl.b;
                  return e !== es
                    ? "color("
                        .concat(e, " ")
                        .concat(t.toFixed(3), " ")
                        .concat(n.toFixed(3), " ")
                        .concat(r.toFixed(3), ")")
                    : "rgb("
                        .concat(Math.round(255 * t), ",")
                        .concat(Math.round(255 * n), ",")
                        .concat(Math.round(255 * r), ")");
                }
              },
              {
                key: "offsetHSL",
                value: function (e, t, n) {
                  return (
                    this.getHSL(vl), this.setHSL(vl.h + e, vl.s + t, vl.l + n)
                  );
                }
              },
              {
                key: "add",
                value: function (e) {
                  return (this.r += e.r), (this.g += e.g), (this.b += e.b), this;
                }
              },
              {
                key: "addColors",
                value: function (e, t) {
                  return (
                    (this.r = e.r + t.r),
                    (this.g = e.g + t.g),
                    (this.b = e.b + t.b),
                    this
                  );
                }
              },
              {
                key: "addScalar",
                value: function (e) {
                  return (this.r += e), (this.g += e), (this.b += e), this;
                }
              },
              {
                key: "sub",
                value: function (e) {
                  return (
                    (this.r = Math.max(0, this.r - e.r)),
                    (this.g = Math.max(0, this.g - e.g)),
                    (this.b = Math.max(0, this.b - e.b)),
                    this
                  );
                }
              },
              {
                key: "multiply",
                value: function (e) {
                  return (this.r *= e.r), (this.g *= e.g), (this.b *= e.b), this;
                }
              },
              {
                key: "multiplyScalar",
                value: function (e) {
                  return (this.r *= e), (this.g *= e), (this.b *= e), this;
                }
              },
              {
                key: "lerp",
                value: function (e, t) {
                  return (
                    (this.r += (e.r - this.r) * t),
                    (this.g += (e.g - this.g) * t),
                    (this.b += (e.b - this.b) * t),
                    this
                  );
                }
              },
              {
                key: "lerpColors",
                value: function (e, t, n) {
                  return (
                    (this.r = e.r + (t.r - e.r) * n),
                    (this.g = e.g + (t.g - e.g) * n),
                    (this.b = e.b + (t.b - e.b) * n),
                    this
                  );
                }
              },
              {
                key: "lerpHSL",
                value: function (e, t) {
                  this.getHSL(vl), e.getHSL(yl);
                  var n = xs(vl.h, yl.h, t),
                    r = xs(vl.s, yl.s, t),
                    i = xs(vl.l, yl.l, t);
                  return this.setHSL(n, r, i), this;
                }
              },
              {
                key: "setFromVector3",
                value: function (e) {
                  return (this.r = e.x), (this.g = e.y), (this.b = e.z), this;
                }
              },
              {
                key: "applyMatrix3",
                value: function (e) {
                  var t = this.r,
                    n = this.g,
                    r = this.b,
                    i = e.elements;
                  return (
                    (this.r = i[0] * t + i[3] * n + i[6] * r),
                    (this.g = i[1] * t + i[4] * n + i[7] * r),
                    (this.b = i[2] * t + i[5] * n + i[8] * r),
                    this
                  );
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return e.r === this.r && e.g === this.g && e.b === this.b;
                }
              },
              {
                key: "fromArray",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return (
                    (this.r = e[t]),
                    (this.g = e[t + 1]),
                    (this.b = e[t + 2]),
                    this
                  );
                }
              },
              {
                key: "toArray",
                value: function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : [],
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0;
                  return (
                    (e[t] = this.r), (e[t + 1] = this.g), (e[t + 2] = this.b), e
                  );
                }
              },
              {
                key: "fromBufferAttribute",
                value: function (e, t) {
                  return (
                    (this.r = e.getX(t)),
                    (this.g = e.getY(t)),
                    (this.b = e.getZ(t)),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function () {
                  return this.getHex();
                }
              },
              {
                key: Symbol.iterator,
                value: Ii().mark(function e() {
                  return Ii().wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (e.next = 2), this.r;
                          case 2:
                            return (e.next = 4), this.g;
                          case 4:
                            return (e.next = 6), this.b;
                          case 6:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    this
                  );
                })
              }
            ]),
            t
          );
        })(),
        xl = new bl();
      bl.NAMES = gl;
      var Sl = 0,
        El = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isMaterial = !0),
              Object.defineProperty(Pi(e), "id", { value: Sl++ }),
              (e.uuid = ys()),
              (e.name = ""),
              (e.type = "Material"),
              (e.blending = 1),
              (e.side = 0),
              (e.vertexColors = !1),
              (e.opacity = 1),
              (e.transparent = !1),
              (e.alphaHash = !1),
              (e.blendSrc = 204),
              (e.blendDst = 205),
              (e.blendEquation = zi),
              (e.blendSrcAlpha = null),
              (e.blendDstAlpha = null),
              (e.blendEquationAlpha = null),
              (e.blendColor = new bl(0, 0, 0)),
              (e.blendAlpha = 0),
              (e.depthFunc = 3),
              (e.depthTest = !0),
              (e.depthWrite = !0),
              (e.stencilWriteMask = 255),
              (e.stencilFunc = 519),
              (e.stencilRef = 0),
              (e.stencilFuncMask = 255),
              (e.stencilFail = ls),
              (e.stencilZFail = ls),
              (e.stencilZPass = ls),
              (e.stencilWrite = !1),
              (e.clippingPlanes = null),
              (e.clipIntersection = !1),
              (e.clipShadows = !1),
              (e.shadowSide = null),
              (e.colorWrite = !0),
              (e.precision = null),
              (e.polygonOffset = !1),
              (e.polygonOffsetFactor = 0),
              (e.polygonOffsetUnits = 0),
              (e.dithering = !1),
              (e.alphaToCoverage = !1),
              (e.premultipliedAlpha = !1),
              (e.forceSinglePass = !1),
              (e.visible = !0),
              (e.toneMapped = !0),
              (e.userData = {}),
              (e.version = 0),
              (e._alphaTest = 0),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "alphaTest",
                get: function () {
                  return this._alphaTest;
                },
                set: function (e) {
                  this._alphaTest > 0 != e > 0 && this.version++,
                    (this._alphaTest = e);
                }
              },
              { key: "onBuild", value: function () {} },
              { key: "onBeforeRender", value: function () {} },
              { key: "onBeforeCompile", value: function () {} },
              {
                key: "customProgramCacheKey",
                value: function () {
                  return this.onBeforeCompile.toString();
                }
              },
              {
                key: "setValues",
                value: function (e) {
                  if (void 0 !== e)
                    for (var t in e) {
                      var n = e[t];
                      if (void 0 !== n) {
                        var r = this[t];
                        void 0 !== r
                          ? r && r.isColor
                            ? r.set(n)
                            : r && r.isVector3 && n && n.isVector3
                            ? r.copy(n)
                            : (this[t] = n)
                          : console.warn(
                              "THREE.Material: '"
                                .concat(t, "' is not a property of THREE.")
                                .concat(this.type, ".")
                            );
                      } else
                        console.warn(
                          "THREE.Material: parameter '".concat(
                            t,
                            "' has value of undefined."
                          )
                        );
                    }
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var t = void 0 === e || "string" == typeof e;
                  t && (e = { textures: {}, images: {} });
                  var n = {
                    metadata: {
                      version: 4.6,
                      type: "Material",
                      generator: "Material.toJSON"
                    }
                  };
                  function r(e) {
                    var t = [];
                    for (var n in e) {
                      var r = e[n];
                      delete r.metadata, t.push(r);
                    }
                    return t;
                  }
                  if (
                    ((n.uuid = this.uuid),
                    (n.type = this.type),
                    "" !== this.name && (n.name = this.name),
                    this.color &&
                      this.color.isColor &&
                      (n.color = this.color.getHex()),
                    void 0 !== this.roughness && (n.roughness = this.roughness),
                    void 0 !== this.metalness && (n.metalness = this.metalness),
                    void 0 !== this.sheen && (n.sheen = this.sheen),
                    this.sheenColor &&
                      this.sheenColor.isColor &&
                      (n.sheenColor = this.sheenColor.getHex()),
                    void 0 !== this.sheenRoughness &&
                      (n.sheenRoughness = this.sheenRoughness),
                    this.emissive &&
                      this.emissive.isColor &&
                      (n.emissive = this.emissive.getHex()),
                    this.emissiveIntensity &&
                      1 !== this.emissiveIntensity &&
                      (n.emissiveIntensity = this.emissiveIntensity),
                    this.specular &&
                      this.specular.isColor &&
                      (n.specular = this.specular.getHex()),
                    void 0 !== this.specularIntensity &&
                      (n.specularIntensity = this.specularIntensity),
                    this.specularColor &&
                      this.specularColor.isColor &&
                      (n.specularColor = this.specularColor.getHex()),
                    void 0 !== this.shininess && (n.shininess = this.shininess),
                    void 0 !== this.clearcoat && (n.clearcoat = this.clearcoat),
                    void 0 !== this.clearcoatRoughness &&
                      (n.clearcoatRoughness = this.clearcoatRoughness),
                    this.clearcoatMap &&
                      this.clearcoatMap.isTexture &&
                      (n.clearcoatMap = this.clearcoatMap.toJSON(e).uuid),
                    this.clearcoatRoughnessMap &&
                      this.clearcoatRoughnessMap.isTexture &&
                      (n.clearcoatRoughnessMap =
                        this.clearcoatRoughnessMap.toJSON(e).uuid),
                    this.clearcoatNormalMap &&
                      this.clearcoatNormalMap.isTexture &&
                      ((n.clearcoatNormalMap =
                        this.clearcoatNormalMap.toJSON(e).uuid),
                      (n.clearcoatNormalScale =
                        this.clearcoatNormalScale.toArray())),
                    void 0 !== this.iridescence &&
                      (n.iridescence = this.iridescence),
                    void 0 !== this.iridescenceIOR &&
                      (n.iridescenceIOR = this.iridescenceIOR),
                    void 0 !== this.iridescenceThicknessRange &&
                      (n.iridescenceThicknessRange =
                        this.iridescenceThicknessRange),
                    this.iridescenceMap &&
                      this.iridescenceMap.isTexture &&
                      (n.iridescenceMap = this.iridescenceMap.toJSON(e).uuid),
                    this.iridescenceThicknessMap &&
                      this.iridescenceThicknessMap.isTexture &&
                      (n.iridescenceThicknessMap =
                        this.iridescenceThicknessMap.toJSON(e).uuid),
                    void 0 !== this.anisotropy &&
                      (n.anisotropy = this.anisotropy),
                    void 0 !== this.anisotropyRotation &&
                      (n.anisotropyRotation = this.anisotropyRotation),
                    this.anisotropyMap &&
                      this.anisotropyMap.isTexture &&
                      (n.anisotropyMap = this.anisotropyMap.toJSON(e).uuid),
                    this.map &&
                      this.map.isTexture &&
                      (n.map = this.map.toJSON(e).uuid),
                    this.matcap &&
                      this.matcap.isTexture &&
                      (n.matcap = this.matcap.toJSON(e).uuid),
                    this.alphaMap &&
                      this.alphaMap.isTexture &&
                      (n.alphaMap = this.alphaMap.toJSON(e).uuid),
                    this.lightMap &&
                      this.lightMap.isTexture &&
                      ((n.lightMap = this.lightMap.toJSON(e).uuid),
                      (n.lightMapIntensity = this.lightMapIntensity)),
                    this.aoMap &&
                      this.aoMap.isTexture &&
                      ((n.aoMap = this.aoMap.toJSON(e).uuid),
                      (n.aoMapIntensity = this.aoMapIntensity)),
                    this.bumpMap &&
                      this.bumpMap.isTexture &&
                      ((n.bumpMap = this.bumpMap.toJSON(e).uuid),
                      (n.bumpScale = this.bumpScale)),
                    this.normalMap &&
                      this.normalMap.isTexture &&
                      ((n.normalMap = this.normalMap.toJSON(e).uuid),
                      (n.normalMapType = this.normalMapType),
                      (n.normalScale = this.normalScale.toArray())),
                    this.displacementMap &&
                      this.displacementMap.isTexture &&
                      ((n.displacementMap = this.displacementMap.toJSON(e).uuid),
                      (n.displacementScale = this.displacementScale),
                      (n.displacementBias = this.displacementBias)),
                    this.roughnessMap &&
                      this.roughnessMap.isTexture &&
                      (n.roughnessMap = this.roughnessMap.toJSON(e).uuid),
                    this.metalnessMap &&
                      this.metalnessMap.isTexture &&
                      (n.metalnessMap = this.metalnessMap.toJSON(e).uuid),
                    this.emissiveMap &&
                      this.emissiveMap.isTexture &&
                      (n.emissiveMap = this.emissiveMap.toJSON(e).uuid),
                    this.specularMap &&
                      this.specularMap.isTexture &&
                      (n.specularMap = this.specularMap.toJSON(e).uuid),
                    this.specularIntensityMap &&
                      this.specularIntensityMap.isTexture &&
                      (n.specularIntensityMap =
                        this.specularIntensityMap.toJSON(e).uuid),
                    this.specularColorMap &&
                      this.specularColorMap.isTexture &&
                      (n.specularColorMap = this.specularColorMap.toJSON(e).uuid),
                    this.envMap &&
                      this.envMap.isTexture &&
                      ((n.envMap = this.envMap.toJSON(e).uuid),
                      void 0 !== this.combine && (n.combine = this.combine)),
                    void 0 !== this.envMapIntensity &&
                      (n.envMapIntensity = this.envMapIntensity),
                    void 0 !== this.reflectivity &&
                      (n.reflectivity = this.reflectivity),
                    void 0 !== this.refractionRatio &&
                      (n.refractionRatio = this.refractionRatio),
                    this.gradientMap &&
                      this.gradientMap.isTexture &&
                      (n.gradientMap = this.gradientMap.toJSON(e).uuid),
                    void 0 !== this.transmission &&
                      (n.transmission = this.transmission),
                    this.transmissionMap &&
                      this.transmissionMap.isTexture &&
                      (n.transmissionMap = this.transmissionMap.toJSON(e).uuid),
                    void 0 !== this.thickness && (n.thickness = this.thickness),
                    this.thicknessMap &&
                      this.thicknessMap.isTexture &&
                      (n.thicknessMap = this.thicknessMap.toJSON(e).uuid),
                    void 0 !== this.attenuationDistance &&
                      this.attenuationDistance !== 1 / 0 &&
                      (n.attenuationDistance = this.attenuationDistance),
                    void 0 !== this.attenuationColor &&
                      (n.attenuationColor = this.attenuationColor.getHex()),
                    void 0 !== this.size && (n.size = this.size),
                    null !== this.shadowSide && (n.shadowSide = this.shadowSide),
                    void 0 !== this.sizeAttenuation &&
                      (n.sizeAttenuation = this.sizeAttenuation),
                    1 !== this.blending && (n.blending = this.blending),
                    0 !== this.side && (n.side = this.side),
                    !0 === this.vertexColors && (n.vertexColors = !0),
                    this.opacity < 1 && (n.opacity = this.opacity),
                    !0 === this.transparent && (n.transparent = !0),
                    204 !== this.blendSrc && (n.blendSrc = this.blendSrc),
                    205 !== this.blendDst && (n.blendDst = this.blendDst),
                    this.blendEquation !== zi &&
                      (n.blendEquation = this.blendEquation),
                    null !== this.blendSrcAlpha &&
                      (n.blendSrcAlpha = this.blendSrcAlpha),
                    null !== this.blendDstAlpha &&
                      (n.blendDstAlpha = this.blendDstAlpha),
                    null !== this.blendEquationAlpha &&
                      (n.blendEquationAlpha = this.blendEquationAlpha),
                    this.blendColor &&
                      this.blendColor.isColor &&
                      (n.blendColor = this.blendColor.getHex()),
                    0 !== this.blendAlpha && (n.blendAlpha = this.blendAlpha),
                    3 !== this.depthFunc && (n.depthFunc = this.depthFunc),
                    !1 === this.depthTest && (n.depthTest = this.depthTest),
                    !1 === this.depthWrite && (n.depthWrite = this.depthWrite),
                    !1 === this.colorWrite && (n.colorWrite = this.colorWrite),
                    255 !== this.stencilWriteMask &&
                      (n.stencilWriteMask = this.stencilWriteMask),
                    519 !== this.stencilFunc &&
                      (n.stencilFunc = this.stencilFunc),
                    0 !== this.stencilRef && (n.stencilRef = this.stencilRef),
                    255 !== this.stencilFuncMask &&
                      (n.stencilFuncMask = this.stencilFuncMask),
                    this.stencilFail !== ls && (n.stencilFail = this.stencilFail),
                    this.stencilZFail !== ls &&
                      (n.stencilZFail = this.stencilZFail),
                    this.stencilZPass !== ls &&
                      (n.stencilZPass = this.stencilZPass),
                    !0 === this.stencilWrite &&
                      (n.stencilWrite = this.stencilWrite),
                    void 0 !== this.rotation &&
                      0 !== this.rotation &&
                      (n.rotation = this.rotation),
                    !0 === this.polygonOffset && (n.polygonOffset = !0),
                    0 !== this.polygonOffsetFactor &&
                      (n.polygonOffsetFactor = this.polygonOffsetFactor),
                    0 !== this.polygonOffsetUnits &&
                      (n.polygonOffsetUnits = this.polygonOffsetUnits),
                    void 0 !== this.linewidth &&
                      1 !== this.linewidth &&
                      (n.linewidth = this.linewidth),
                    void 0 !== this.dashSize && (n.dashSize = this.dashSize),
                    void 0 !== this.gapSize && (n.gapSize = this.gapSize),
                    void 0 !== this.scale && (n.scale = this.scale),
                    !0 === this.dithering && (n.dithering = !0),
                    this.alphaTest > 0 && (n.alphaTest = this.alphaTest),
                    !0 === this.alphaHash && (n.alphaHash = !0),
                    !0 === this.alphaToCoverage && (n.alphaToCoverage = !0),
                    !0 === this.premultipliedAlpha && (n.premultipliedAlpha = !0),
                    !0 === this.forceSinglePass && (n.forceSinglePass = !0),
                    !0 === this.wireframe && (n.wireframe = !0),
                    this.wireframeLinewidth > 1 &&
                      (n.wireframeLinewidth = this.wireframeLinewidth),
                    "round" !== this.wireframeLinecap &&
                      (n.wireframeLinecap = this.wireframeLinecap),
                    "round" !== this.wireframeLinejoin &&
                      (n.wireframeLinejoin = this.wireframeLinejoin),
                    !0 === this.flatShading && (n.flatShading = !0),
                    !1 === this.visible && (n.visible = !1),
                    !1 === this.toneMapped && (n.toneMapped = !1),
                    !1 === this.fog && (n.fog = !1),
                    Object.keys(this.userData).length > 0 &&
                      (n.userData = this.userData),
                    t)
                  ) {
                    var i = r(e.textures),
                      a = r(e.images);
                    i.length > 0 && (n.textures = i),
                      a.length > 0 && (n.images = a);
                  }
                  return n;
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  (this.name = e.name),
                    (this.blending = e.blending),
                    (this.side = e.side),
                    (this.vertexColors = e.vertexColors),
                    (this.opacity = e.opacity),
                    (this.transparent = e.transparent),
                    (this.blendSrc = e.blendSrc),
                    (this.blendDst = e.blendDst),
                    (this.blendEquation = e.blendEquation),
                    (this.blendSrcAlpha = e.blendSrcAlpha),
                    (this.blendDstAlpha = e.blendDstAlpha),
                    (this.blendEquationAlpha = e.blendEquationAlpha),
                    this.blendColor.copy(e.blendColor),
                    (this.blendAlpha = e.blendAlpha),
                    (this.depthFunc = e.depthFunc),
                    (this.depthTest = e.depthTest),
                    (this.depthWrite = e.depthWrite),
                    (this.stencilWriteMask = e.stencilWriteMask),
                    (this.stencilFunc = e.stencilFunc),
                    (this.stencilRef = e.stencilRef),
                    (this.stencilFuncMask = e.stencilFuncMask),
                    (this.stencilFail = e.stencilFail),
                    (this.stencilZFail = e.stencilZFail),
                    (this.stencilZPass = e.stencilZPass),
                    (this.stencilWrite = e.stencilWrite);
                  var t = e.clippingPlanes,
                    n = null;
                  if (null !== t) {
                    var r = t.length;
                    n = new Array(r);
                    for (var i = 0; i !== r; ++i) n[i] = t[i].clone();
                  }
                  return (
                    (this.clippingPlanes = n),
                    (this.clipIntersection = e.clipIntersection),
                    (this.clipShadows = e.clipShadows),
                    (this.shadowSide = e.shadowSide),
                    (this.colorWrite = e.colorWrite),
                    (this.precision = e.precision),
                    (this.polygonOffset = e.polygonOffset),
                    (this.polygonOffsetFactor = e.polygonOffsetFactor),
                    (this.polygonOffsetUnits = e.polygonOffsetUnits),
                    (this.dithering = e.dithering),
                    (this.alphaTest = e.alphaTest),
                    (this.alphaHash = e.alphaHash),
                    (this.alphaToCoverage = e.alphaToCoverage),
                    (this.premultipliedAlpha = e.premultipliedAlpha),
                    (this.forceSinglePass = e.forceSinglePass),
                    (this.visible = e.visible),
                    (this.toneMapped = e.toneMapped),
                    (this.userData = JSON.parse(JSON.stringify(e.userData))),
                    this
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              },
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && this.version++;
                }
              }
            ]),
            t
          );
        })(ps),
        wl = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isMeshBasicMaterial = !0),
              (n.type = "MeshBasicMaterial"),
              (n.color = new bl(16777215)),
              (n.map = null),
              (n.lightMap = null),
              (n.lightMapIntensity = 1),
              (n.aoMap = null),
              (n.aoMapIntensity = 1),
              (n.specularMap = null),
              (n.alphaMap = null),
              (n.envMap = null),
              (n.combine = 0),
              (n.reflectivity = 1),
              (n.refractionRatio = 0.98),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              (n.wireframeLinecap = "round"),
              (n.wireframeLinejoin = "round"),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    this.color.copy(e.color),
                    (this.map = e.map),
                    (this.lightMap = e.lightMap),
                    (this.lightMapIntensity = e.lightMapIntensity),
                    (this.aoMap = e.aoMap),
                    (this.aoMapIntensity = e.aoMapIntensity),
                    (this.specularMap = e.specularMap),
                    (this.alphaMap = e.alphaMap),
                    (this.envMap = e.envMap),
                    (this.combine = e.combine),
                    (this.reflectivity = e.reflectivity),
                    (this.refractionRatio = e.refractionRatio),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    (this.wireframeLinecap = e.wireframeLinecap),
                    (this.wireframeLinejoin = e.wireframeLinejoin),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(El),
        Tl = new to(),
        Ml = new Cs(),
        Al = (function () {
          function e(t, n) {
            var r =
              arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
            if ((Fi(this, e), Array.isArray(t)))
              throw new TypeError(
                "THREE.BufferAttribute: array should be a Typed Array."
              );
            (this.isBufferAttribute = !0),
              (this.name = ""),
              (this.array = t),
              (this.itemSize = n),
              (this.count = void 0 !== t ? t.length / n : 0),
              (this.normalized = r),
              (this.usage = hs),
              (this._updateRange = { offset: 0, count: -1 }),
              (this.updateRanges = []),
              (this.gpuType = ra),
              (this.version = 0);
          }
          return (
            Ni(e, [
              { key: "onUploadCallback", value: function () {} },
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && this.version++;
                }
              },
              {
                key: "updateRange",
                get: function () {
                  return (
                    console.warn(
                      "THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."
                    ),
                    this._updateRange
                  );
                }
              },
              {
                key: "setUsage",
                value: function (e) {
                  return (this.usage = e), this;
                }
              },
              {
                key: "addUpdateRange",
                value: function (e, t) {
                  this.updateRanges.push({ start: e, count: t });
                }
              },
              {
                key: "clearUpdateRanges",
                value: function () {
                  this.updateRanges.length = 0;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.name = e.name),
                    (this.array = new e.array.constructor(e.array)),
                    (this.itemSize = e.itemSize),
                    (this.count = e.count),
                    (this.normalized = e.normalized),
                    (this.usage = e.usage),
                    (this.gpuType = e.gpuType),
                    this
                  );
                }
              },
              {
                key: "copyAt",
                value: function (e, t, n) {
                  (e *= this.itemSize), (n *= t.itemSize);
                  for (var r = 0, i = this.itemSize; r < i; r++)
                    this.array[e + r] = t.array[n + r];
                  return this;
                }
              },
              {
                key: "copyArray",
                value: function (e) {
                  return this.array.set(e), this;
                }
              },
              {
                key: "applyMatrix3",
                value: function (e) {
                  if (2 === this.itemSize)
                    for (var t = 0, n = this.count; t < n; t++)
                      Ml.fromBufferAttribute(this, t),
                        Ml.applyMatrix3(e),
                        this.setXY(t, Ml.x, Ml.y);
                  else if (3 === this.itemSize)
                    for (var r = 0, i = this.count; r < i; r++)
                      Tl.fromBufferAttribute(this, r),
                        Tl.applyMatrix3(e),
                        this.setXYZ(r, Tl.x, Tl.y, Tl.z);
                  return this;
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  for (var t = 0, n = this.count; t < n; t++)
                    Tl.fromBufferAttribute(this, t),
                      Tl.applyMatrix4(e),
                      this.setXYZ(t, Tl.x, Tl.y, Tl.z);
                  return this;
                }
              },
              {
                key: "applyNormalMatrix",
                value: function (e) {
                  for (var t = 0, n = this.count; t < n; t++)
                    Tl.fromBufferAttribute(this, t),
                      Tl.applyNormalMatrix(e),
                      this.setXYZ(t, Tl.x, Tl.y, Tl.z);
                  return this;
                }
              },
              {
                key: "transformDirection",
                value: function (e) {
                  for (var t = 0, n = this.count; t < n; t++)
                    Tl.fromBufferAttribute(this, t),
                      Tl.transformDirection(e),
                      this.setXYZ(t, Tl.x, Tl.y, Tl.z);
                  return this;
                }
              },
              {
                key: "set",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return this.array.set(e, t), this;
                }
              },
              {
                key: "getComponent",
                value: function (e, t) {
                  var n = this.array[e * this.itemSize + t];
                  return this.normalized && (n = ws(n, this.array)), n;
                }
              },
              {
                key: "setComponent",
                value: function (e, t, n) {
                  return (
                    this.normalized && (n = Ts(n, this.array)),
                    (this.array[e * this.itemSize + t] = n),
                    this
                  );
                }
              },
              {
                key: "getX",
                value: function (e) {
                  var t = this.array[e * this.itemSize];
                  return this.normalized && (t = ws(t, this.array)), t;
                }
              },
              {
                key: "setX",
                value: function (e, t) {
                  return (
                    this.normalized && (t = Ts(t, this.array)),
                    (this.array[e * this.itemSize] = t),
                    this
                  );
                }
              },
              {
                key: "getY",
                value: function (e) {
                  var t = this.array[e * this.itemSize + 1];
                  return this.normalized && (t = ws(t, this.array)), t;
                }
              },
              {
                key: "setY",
                value: function (e, t) {
                  return (
                    this.normalized && (t = Ts(t, this.array)),
                    (this.array[e * this.itemSize + 1] = t),
                    this
                  );
                }
              },
              {
                key: "getZ",
                value: function (e) {
                  var t = this.array[e * this.itemSize + 2];
                  return this.normalized && (t = ws(t, this.array)), t;
                }
              },
              {
                key: "setZ",
                value: function (e, t) {
                  return (
                    this.normalized && (t = Ts(t, this.array)),
                    (this.array[e * this.itemSize + 2] = t),
                    this
                  );
                }
              },
              {
                key: "getW",
                value: function (e) {
                  var t = this.array[e * this.itemSize + 3];
                  return this.normalized && (t = ws(t, this.array)), t;
                }
              },
              {
                key: "setW",
                value: function (e, t) {
                  return (
                    this.normalized && (t = Ts(t, this.array)),
                    (this.array[e * this.itemSize + 3] = t),
                    this
                  );
                }
              },
              {
                key: "setXY",
                value: function (e, t, n) {
                  return (
                    (e *= this.itemSize),
                    this.normalized &&
                      ((t = Ts(t, this.array)), (n = Ts(n, this.array))),
                    (this.array[e + 0] = t),
                    (this.array[e + 1] = n),
                    this
                  );
                }
              },
              {
                key: "setXYZ",
                value: function (e, t, n, r) {
                  return (
                    (e *= this.itemSize),
                    this.normalized &&
                      ((t = Ts(t, this.array)),
                      (n = Ts(n, this.array)),
                      (r = Ts(r, this.array))),
                    (this.array[e + 0] = t),
                    (this.array[e + 1] = n),
                    (this.array[e + 2] = r),
                    this
                  );
                }
              },
              {
                key: "setXYZW",
                value: function (e, t, n, r, i) {
                  return (
                    (e *= this.itemSize),
                    this.normalized &&
                      ((t = Ts(t, this.array)),
                      (n = Ts(n, this.array)),
                      (r = Ts(r, this.array)),
                      (i = Ts(i, this.array))),
                    (this.array[e + 0] = t),
                    (this.array[e + 1] = n),
                    (this.array[e + 2] = r),
                    (this.array[e + 3] = i),
                    this
                  );
                }
              },
              {
                key: "onUpload",
                value: function (e) {
                  return (this.onUploadCallback = e), this;
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor(this.array, this.itemSize).copy(
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = {
                    itemSize: this.itemSize,
                    type: this.array.constructor.name,
                    array: Array.from(this.array),
                    normalized: this.normalized
                  };
                  return (
                    "" !== this.name && (e.name = this.name),
                    this.usage !== hs && (e.usage = this.usage),
                    e
                  );
                }
              }
            ]),
            e
          );
        })(),
        Cl = (function (e) {
          function t(e, n, r) {
            return Fi(this, t), Mi(this, t, [new Uint16Array(e), n, r]);
          }
          return ki(t, e), Ni(t);
        })(Al),
        Pl = (function (e) {
          function t(e, n, r) {
            return Fi(this, t), Mi(this, t, [new Uint32Array(e), n, r]);
          }
          return ki(t, e), Ni(t);
        })(Al),
        kl = (function (e) {
          function t(e, n, r) {
            return Fi(this, t), Mi(this, t, [new Float32Array(e), n, r]);
          }
          return ki(t, e), Ni(t);
        })(Al),
        Rl = 0,
        Dl = new Do(),
        Il = new rl(),
        Ll = new to(),
        Fl = new io(),
        Ol = new io(),
        Nl = new to(),
        Bl = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isBufferGeometry = !0),
              Object.defineProperty(Pi(e), "id", { value: Rl++ }),
              (e.uuid = ys()),
              (e.name = ""),
              (e.type = "BufferGeometry"),
              (e.index = null),
              (e.attributes = {}),
              (e.morphAttributes = {}),
              (e.morphTargetsRelative = !1),
              (e.groups = []),
              (e.boundingBox = null),
              (e.boundingSphere = null),
              (e.drawRange = { start: 0, count: 1 / 0 }),
              (e.userData = {}),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "getIndex",
                value: function () {
                  return this.index;
                }
              },
              {
                key: "setIndex",
                value: function (e) {
                  return (
                    Array.isArray(e)
                      ? (this.index = new (Rs(e) ? Pl : Cl)(e, 1))
                      : (this.index = e),
                    this
                  );
                }
              },
              {
                key: "getAttribute",
                value: function (e) {
                  return this.attributes[e];
                }
              },
              {
                key: "setAttribute",
                value: function (e, t) {
                  return (this.attributes[e] = t), this;
                }
              },
              {
                key: "deleteAttribute",
                value: function (e) {
                  return delete this.attributes[e], this;
                }
              },
              {
                key: "hasAttribute",
                value: function (e) {
                  return void 0 !== this.attributes[e];
                }
              },
              {
                key: "addGroup",
                value: function (e, t) {
                  var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0;
                  this.groups.push({ start: e, count: t, materialIndex: n });
                }
              },
              {
                key: "clearGroups",
                value: function () {
                  this.groups = [];
                }
              },
              {
                key: "setDrawRange",
                value: function (e, t) {
                  (this.drawRange.start = e), (this.drawRange.count = t);
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  var t = this.attributes.position;
                  void 0 !== t && (t.applyMatrix4(e), (t.needsUpdate = !0));
                  var n = this.attributes.normal;
                  if (void 0 !== n) {
                    var r = new Ps().getNormalMatrix(e);
                    n.applyNormalMatrix(r), (n.needsUpdate = !0);
                  }
                  var i = this.attributes.tangent;
                  return (
                    void 0 !== i &&
                      (i.transformDirection(e), (i.needsUpdate = !0)),
                    null !== this.boundingBox && this.computeBoundingBox(),
                    null !== this.boundingSphere && this.computeBoundingSphere(),
                    this
                  );
                }
              },
              {
                key: "applyQuaternion",
                value: function (e) {
                  return (
                    Dl.makeRotationFromQuaternion(e), this.applyMatrix4(Dl), this
                  );
                }
              },
              {
                key: "rotateX",
                value: function (e) {
                  return Dl.makeRotationX(e), this.applyMatrix4(Dl), this;
                }
              },
              {
                key: "rotateY",
                value: function (e) {
                  return Dl.makeRotationY(e), this.applyMatrix4(Dl), this;
                }
              },
              {
                key: "rotateZ",
                value: function (e) {
                  return Dl.makeRotationZ(e), this.applyMatrix4(Dl), this;
                }
              },
              {
                key: "translate",
                value: function (e, t, n) {
                  return Dl.makeTranslation(e, t, n), this.applyMatrix4(Dl), this;
                }
              },
              {
                key: "scale",
                value: function (e, t, n) {
                  return Dl.makeScale(e, t, n), this.applyMatrix4(Dl), this;
                }
              },
              {
                key: "lookAt",
                value: function (e) {
                  return (
                    Il.lookAt(e),
                    Il.updateMatrix(),
                    this.applyMatrix4(Il.matrix),
                    this
                  );
                }
              },
              {
                key: "center",
                value: function () {
                  return (
                    this.computeBoundingBox(),
                    this.boundingBox.getCenter(Ll).negate(),
                    this.translate(Ll.x, Ll.y, Ll.z),
                    this
                  );
                }
              },
              {
                key: "setFromPoints",
                value: function (e) {
                  for (var t = [], n = 0, r = e.length; n < r; n++) {
                    var i = e[n];
                    t.push(i.x, i.y, i.z || 0);
                  }
                  return this.setAttribute("position", new kl(t, 3)), this;
                }
              },
              {
                key: "computeBoundingBox",
                value: function () {
                  null === this.boundingBox && (this.boundingBox = new io());
                  var e = this.attributes.position,
                    t = this.morphAttributes.position;
                  if (e && e.isGLBufferAttribute)
                    return (
                      console.error(
                        'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
                        this
                      ),
                      void this.boundingBox.set(
                        new to(-1 / 0, -1 / 0, -1 / 0),
                        new to(1 / 0, 1 / 0, 1 / 0)
                      )
                    );
                  if (void 0 !== e) {
                    if ((this.boundingBox.setFromBufferAttribute(e), t))
                      for (var n = 0, r = t.length; n < r; n++) {
                        var i = t[n];
                        Fl.setFromBufferAttribute(i),
                          this.morphTargetsRelative
                            ? (Nl.addVectors(this.boundingBox.min, Fl.min),
                              this.boundingBox.expandByPoint(Nl),
                              Nl.addVectors(this.boundingBox.max, Fl.max),
                              this.boundingBox.expandByPoint(Nl))
                            : (this.boundingBox.expandByPoint(Fl.min),
                              this.boundingBox.expandByPoint(Fl.max));
                      }
                  } else this.boundingBox.makeEmpty();
                  (isNaN(this.boundingBox.min.x) ||
                    isNaN(this.boundingBox.min.y) ||
                    isNaN(this.boundingBox.min.z)) &&
                    console.error(
                      'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
                      this
                    );
                }
              },
              {
                key: "computeBoundingSphere",
                value: function () {
                  null === this.boundingSphere &&
                    (this.boundingSphere = new Eo());
                  var e = this.attributes.position,
                    t = this.morphAttributes.position;
                  if (e && e.isGLBufferAttribute)
                    return (
                      console.error(
                        'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
                        this
                      ),
                      void this.boundingSphere.set(new to(), 1 / 0)
                    );
                  if (e) {
                    var n = this.boundingSphere.center;
                    if ((Fl.setFromBufferAttribute(e), t))
                      for (var r = 0, i = t.length; r < i; r++) {
                        var a = t[r];
                        Ol.setFromBufferAttribute(a),
                          this.morphTargetsRelative
                            ? (Nl.addVectors(Fl.min, Ol.min),
                              Fl.expandByPoint(Nl),
                              Nl.addVectors(Fl.max, Ol.max),
                              Fl.expandByPoint(Nl))
                            : (Fl.expandByPoint(Ol.min),
                              Fl.expandByPoint(Ol.max));
                      }
                    Fl.getCenter(n);
                    for (var s = 0, o = 0, l = e.count; o < l; o++)
                      Nl.fromBufferAttribute(e, o),
                        (s = Math.max(s, n.distanceToSquared(Nl)));
                    if (t)
                      for (var h = 0, u = t.length; h < u; h++)
                        for (
                          var c = t[h],
                            d = this.morphTargetsRelative,
                            f = 0,
                            p = c.count;
                          f < p;
                          f++
                        )
                          Nl.fromBufferAttribute(c, f),
                            d && (Ll.fromBufferAttribute(e, f), Nl.add(Ll)),
                            (s = Math.max(s, n.distanceToSquared(Nl)));
                    (this.boundingSphere.radius = Math.sqrt(s)),
                      isNaN(this.boundingSphere.radius) &&
                        console.error(
                          'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                          this
                        );
                  }
                }
              },
              {
                key: "computeTangents",
                value: function () {
                  var e = this.index,
                    t = this.attributes;
                  if (
                    null !== e &&
                    void 0 !== t.position &&
                    void 0 !== t.normal &&
                    void 0 !== t.uv
                  ) {
                    var n = e.array,
                      r = t.position.array,
                      i = t.normal.array,
                      a = t.uv.array,
                      s = r.length / 3;
                    !1 === this.hasAttribute("tangent") &&
                      this.setAttribute(
                        "tangent",
                        new Al(new Float32Array(4 * s), 4)
                      );
                    for (
                      var o = this.getAttribute("tangent").array,
                        l = [],
                        h = [],
                        u = 0;
                      u < s;
                      u++
                    )
                      (l[u] = new to()), (h[u] = new to());
                    var c = new to(),
                      d = new to(),
                      f = new to(),
                      p = new Cs(),
                      m = new Cs(),
                      g = new Cs(),
                      v = new to(),
                      y = new to(),
                      _ = this.groups;
                    0 === _.length && (_ = [{ start: 0, count: n.length }]);
                    for (var b = 0, x = _.length; b < x; ++b)
                      for (
                        var S = _[b], E = S.start, w = E, T = E + S.count;
                        w < T;
                        w += 3
                      )
                        O(n[w + 0], n[w + 1], n[w + 2]);
                    for (
                      var M = new to(),
                        A = new to(),
                        C = new to(),
                        P = new to(),
                        k = 0,
                        R = _.length;
                      k < R;
                      ++k
                    )
                      for (
                        var D = _[k], I = D.start, L = I, F = I + D.count;
                        L < F;
                        L += 3
                      )
                        N(n[L + 0]), N(n[L + 1]), N(n[L + 2]);
                  } else
                    console.error(
                      "THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)"
                    );
                  function O(e, t, n) {
                    c.fromArray(r, 3 * e),
                      d.fromArray(r, 3 * t),
                      f.fromArray(r, 3 * n),
                      p.fromArray(a, 2 * e),
                      m.fromArray(a, 2 * t),
                      g.fromArray(a, 2 * n),
                      d.sub(c),
                      f.sub(c),
                      m.sub(p),
                      g.sub(p);
                    var i = 1 / (m.x * g.y - g.x * m.y);
                    isFinite(i) &&
                      (v
                        .copy(d)
                        .multiplyScalar(g.y)
                        .addScaledVector(f, -m.y)
                        .multiplyScalar(i),
                      y
                        .copy(f)
                        .multiplyScalar(m.x)
                        .addScaledVector(d, -g.x)
                        .multiplyScalar(i),
                      l[e].add(v),
                      l[t].add(v),
                      l[n].add(v),
                      h[e].add(y),
                      h[t].add(y),
                      h[n].add(y));
                  }
                  function N(e) {
                    C.fromArray(i, 3 * e), P.copy(C);
                    var t = l[e];
                    M.copy(t),
                      M.sub(C.multiplyScalar(C.dot(t))).normalize(),
                      A.crossVectors(P, t);
                    var n = A.dot(h[e]) < 0 ? -1 : 1;
                    (o[4 * e] = M.x),
                      (o[4 * e + 1] = M.y),
                      (o[4 * e + 2] = M.z),
                      (o[4 * e + 3] = n);
                  }
                }
              },
              {
                key: "computeVertexNormals",
                value: function () {
                  var e = this.index,
                    t = this.getAttribute("position");
                  if (void 0 !== t) {
                    var n = this.getAttribute("normal");
                    if (void 0 === n)
                      (n = new Al(new Float32Array(3 * t.count), 3)),
                        this.setAttribute("normal", n);
                    else
                      for (var r = 0, i = n.count; r < i; r++)
                        n.setXYZ(r, 0, 0, 0);
                    var a = new to(),
                      s = new to(),
                      o = new to(),
                      l = new to(),
                      h = new to(),
                      u = new to(),
                      c = new to(),
                      d = new to();
                    if (e)
                      for (var f = 0, p = e.count; f < p; f += 3) {
                        var m = e.getX(f + 0),
                          g = e.getX(f + 1),
                          v = e.getX(f + 2);
                        a.fromBufferAttribute(t, m),
                          s.fromBufferAttribute(t, g),
                          o.fromBufferAttribute(t, v),
                          c.subVectors(o, s),
                          d.subVectors(a, s),
                          c.cross(d),
                          l.fromBufferAttribute(n, m),
                          h.fromBufferAttribute(n, g),
                          u.fromBufferAttribute(n, v),
                          l.add(c),
                          h.add(c),
                          u.add(c),
                          n.setXYZ(m, l.x, l.y, l.z),
                          n.setXYZ(g, h.x, h.y, h.z),
                          n.setXYZ(v, u.x, u.y, u.z);
                      }
                    else
                      for (var y = 0, _ = t.count; y < _; y += 3)
                        a.fromBufferAttribute(t, y + 0),
                          s.fromBufferAttribute(t, y + 1),
                          o.fromBufferAttribute(t, y + 2),
                          c.subVectors(o, s),
                          d.subVectors(a, s),
                          c.cross(d),
                          n.setXYZ(y + 0, c.x, c.y, c.z),
                          n.setXYZ(y + 1, c.x, c.y, c.z),
                          n.setXYZ(y + 2, c.x, c.y, c.z);
                    this.normalizeNormals(), (n.needsUpdate = !0);
                  }
                }
              },
              {
                key: "normalizeNormals",
                value: function () {
                  for (
                    var e = this.attributes.normal, t = 0, n = e.count;
                    t < n;
                    t++
                  )
                    Nl.fromBufferAttribute(e, t),
                      Nl.normalize(),
                      e.setXYZ(t, Nl.x, Nl.y, Nl.z);
                }
              },
              {
                key: "toNonIndexed",
                value: function () {
                  function e(e, t) {
                    for (
                      var n = e.array,
                        r = e.itemSize,
                        i = e.normalized,
                        a = new n.constructor(t.length * r),
                        s = 0,
                        o = 0,
                        l = 0,
                        h = t.length;
                      l < h;
                      l++
                    ) {
                      s = e.isInterleavedBufferAttribute
                        ? t[l] * e.data.stride + e.offset
                        : t[l] * r;
                      for (var u = 0; u < r; u++) a[o++] = n[s++];
                    }
                    return new Al(a, r, i);
                  }
                  if (null === this.index)
                    return (
                      console.warn(
                        "THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."
                      ),
                      this
                    );
                  var n = new t(),
                    r = this.index.array,
                    i = this.attributes;
                  for (var a in i) {
                    var s = e(i[a], r);
                    n.setAttribute(a, s);
                  }
                  var o = this.morphAttributes;
                  for (var l in o) {
                    for (var h = [], u = o[l], c = 0, d = u.length; c < d; c++) {
                      var f = e(u[c], r);
                      h.push(f);
                    }
                    n.morphAttributes[l] = h;
                  }
                  n.morphTargetsRelative = this.morphTargetsRelative;
                  for (var p = this.groups, m = 0, g = p.length; m < g; m++) {
                    var v = p[m];
                    n.addGroup(v.start, v.count, v.materialIndex);
                  }
                  return n;
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = {
                    metadata: {
                      version: 4.6,
                      type: "BufferGeometry",
                      generator: "BufferGeometry.toJSON"
                    }
                  };
                  if (
                    ((e.uuid = this.uuid),
                    (e.type = this.type),
                    "" !== this.name && (e.name = this.name),
                    Object.keys(this.userData).length > 0 &&
                      (e.userData = this.userData),
                    void 0 !== this.parameters)
                  ) {
                    var t = this.parameters;
                    for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
                    return e;
                  }
                  e.data = { attributes: {} };
                  var r = this.index;
                  null !== r &&
                    (e.data.index = {
                      type: r.array.constructor.name,
                      array: Array.prototype.slice.call(r.array)
                    });
                  var i = this.attributes;
                  for (var a in i) {
                    var s = i[a];
                    e.data.attributes[a] = s.toJSON(e.data);
                  }
                  var o = {},
                    l = !1;
                  for (var h in this.morphAttributes) {
                    for (
                      var u = this.morphAttributes[h],
                        c = [],
                        d = 0,
                        f = u.length;
                      d < f;
                      d++
                    ) {
                      var p = u[d];
                      c.push(p.toJSON(e.data));
                    }
                    c.length > 0 && ((o[h] = c), (l = !0));
                  }
                  l &&
                    ((e.data.morphAttributes = o),
                    (e.data.morphTargetsRelative = this.morphTargetsRelative));
                  var m = this.groups;
                  m.length > 0 && (e.data.groups = JSON.parse(JSON.stringify(m)));
                  var g = this.boundingSphere;
                  return (
                    null !== g &&
                      (e.data.boundingSphere = {
                        center: g.center.toArray(),
                        radius: g.radius
                      }),
                    e
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  (this.index = null),
                    (this.attributes = {}),
                    (this.morphAttributes = {}),
                    (this.groups = []),
                    (this.boundingBox = null),
                    (this.boundingSphere = null);
                  var t = {};
                  this.name = e.name;
                  var n = e.index;
                  null !== n && this.setIndex(n.clone(t));
                  var r = e.attributes;
                  for (var i in r) {
                    var a = r[i];
                    this.setAttribute(i, a.clone(t));
                  }
                  var s = e.morphAttributes;
                  for (var o in s) {
                    for (var l = [], h = s[o], u = 0, c = h.length; u < c; u++)
                      l.push(h[u].clone(t));
                    this.morphAttributes[o] = l;
                  }
                  this.morphTargetsRelative = e.morphTargetsRelative;
                  for (var d = e.groups, f = 0, p = d.length; f < p; f++) {
                    var m = d[f];
                    this.addGroup(m.start, m.count, m.materialIndex);
                  }
                  var g = e.boundingBox;
                  null !== g && (this.boundingBox = g.clone());
                  var v = e.boundingSphere;
                  return (
                    null !== v && (this.boundingSphere = v.clone()),
                    (this.drawRange.start = e.drawRange.start),
                    (this.drawRange.count = e.drawRange.count),
                    (this.userData = e.userData),
                    this
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              }
            ]),
            t
          );
        })(ps),
        Ul = new Do(),
        zl = new Ro(),
        Vl = new Eo(),
        Hl = new to(),
        Gl = new to(),
        Wl = new to(),
        jl = new to(),
        Xl = new to(),
        ql = new to(),
        Yl = new Cs(),
        Kl = new Cs(),
        Zl = new Cs(),
        Jl = new to(),
        $l = new to(),
        Ql = new to(),
        eh = new to(),
        th = new to(),
        nh = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new Bl(),
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new wl();
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isMesh = !0),
              (e.type = "Mesh"),
              (e.geometry = n),
              (e.material = r),
              e.updateMorphTargets(),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    void 0 !== e.morphTargetInfluences &&
                      (this.morphTargetInfluences =
                        e.morphTargetInfluences.slice()),
                    void 0 !== e.morphTargetDictionary &&
                      (this.morphTargetDictionary = Object.assign(
                        {},
                        e.morphTargetDictionary
                      )),
                    (this.material = Array.isArray(e.material)
                      ? e.material.slice()
                      : e.material),
                    (this.geometry = e.geometry),
                    this
                  );
                }
              },
              {
                key: "updateMorphTargets",
                value: function () {
                  var e = this.geometry.morphAttributes,
                    t = Object.keys(e);
                  if (t.length > 0) {
                    var n = e[t[0]];
                    if (void 0 !== n) {
                      (this.morphTargetInfluences = []),
                        (this.morphTargetDictionary = {});
                      for (var r = 0, i = n.length; r < i; r++) {
                        var a = n[r].name || String(r);
                        this.morphTargetInfluences.push(0),
                          (this.morphTargetDictionary[a] = r);
                      }
                    }
                  }
                }
              },
              {
                key: "getVertexPosition",
                value: function (e, t) {
                  var n = this.geometry,
                    r = n.attributes.position,
                    i = n.morphAttributes.position,
                    a = n.morphTargetsRelative;
                  t.fromBufferAttribute(r, e);
                  var s = this.morphTargetInfluences;
                  if (i && s) {
                    ql.set(0, 0, 0);
                    for (var o = 0, l = i.length; o < l; o++) {
                      var h = s[o],
                        u = i[o];
                      0 !== h &&
                        (Xl.fromBufferAttribute(u, e),
                        a
                          ? ql.addScaledVector(Xl, h)
                          : ql.addScaledVector(Xl.sub(t), h));
                    }
                    t.add(ql);
                  }
                  return t;
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.geometry,
                    r = this.material,
                    i = this.matrixWorld;
                  if (void 0 !== r) {
                    if (
                      (null === n.boundingSphere && n.computeBoundingSphere(),
                      Vl.copy(n.boundingSphere),
                      Vl.applyMatrix4(i),
                      zl.copy(e.ray).recast(e.near),
                      !1 === Vl.containsPoint(zl.origin))
                    ) {
                      if (null === zl.intersectSphere(Vl, Hl)) return;
                      if (
                        zl.origin.distanceToSquared(Hl) >
                        Math.pow(e.far - e.near, 2)
                      )
                        return;
                    }
                    Ul.copy(i).invert(),
                      zl.copy(e.ray).applyMatrix4(Ul),
                      (null !== n.boundingBox &&
                        !1 === zl.intersectsBox(n.boundingBox)) ||
                        this._computeIntersections(e, t, zl);
                  }
                }
              },
              {
                key: "_computeIntersections",
                value: function (e, t, n) {
                  var r,
                    i = this.geometry,
                    a = this.material,
                    s = i.index,
                    o = i.attributes.position,
                    l = i.attributes.uv,
                    h = i.attributes.uv1,
                    u = i.attributes.normal,
                    c = i.groups,
                    d = i.drawRange;
                  if (null !== s) {
                    if (Array.isArray(a))
                      for (var f = 0, p = c.length; f < p; f++)
                        for (
                          var m = c[f],
                            g = a[m.materialIndex],
                            v = Math.max(m.start, d.start),
                            y = Math.min(
                              s.count,
                              Math.min(m.start + m.count, d.start + d.count)
                            );
                          v < y;
                          v += 3
                        )
                          (r = rh(
                            this,
                            g,
                            e,
                            n,
                            l,
                            h,
                            u,
                            s.getX(v),
                            s.getX(v + 1),
                            s.getX(v + 2)
                          )) &&
                            ((r.faceIndex = Math.floor(v / 3)),
                            (r.face.materialIndex = m.materialIndex),
                            t.push(r));
                    else
                      for (
                        var _ = Math.max(0, d.start),
                          b = Math.min(s.count, d.start + d.count);
                        _ < b;
                        _ += 3
                      )
                        (r = rh(
                          this,
                          a,
                          e,
                          n,
                          l,
                          h,
                          u,
                          s.getX(_),
                          s.getX(_ + 1),
                          s.getX(_ + 2)
                        )) && ((r.faceIndex = Math.floor(_ / 3)), t.push(r));
                  } else if (void 0 !== o)
                    if (Array.isArray(a))
                      for (var x = 0, S = c.length; x < S; x++)
                        for (
                          var E = c[x],
                            w = a[E.materialIndex],
                            T = Math.max(E.start, d.start),
                            M = Math.min(
                              o.count,
                              Math.min(E.start + E.count, d.start + d.count)
                            );
                          T < M;
                          T += 3
                        )
                          (r = rh(this, w, e, n, l, h, u, T, T + 1, T + 2)) &&
                            ((r.faceIndex = Math.floor(T / 3)),
                            (r.face.materialIndex = E.materialIndex),
                            t.push(r));
                    else
                      for (
                        var A = Math.max(0, d.start),
                          C = Math.min(o.count, d.start + d.count);
                        A < C;
                        A += 3
                      )
                        (r = rh(this, a, e, n, l, h, u, A, A + 1, A + 2)) &&
                          ((r.faceIndex = Math.floor(A / 3)), t.push(r));
                }
              }
            ]),
            t
          );
        })(rl);
      function rh(e, t, n, r, i, a, s, o, l, h) {
        e.getVertexPosition(o, Gl),
          e.getVertexPosition(l, Wl),
          e.getVertexPosition(h, jl);
        var u = (function (e, t, n, r, i, a, s, o) {
          if (
            null ===
            (1 === t.side
              ? r.intersectTriangle(s, a, i, !0, o)
              : r.intersectTriangle(i, a, s, 0 === t.side, o))
          )
            return null;
          th.copy(o), th.applyMatrix4(e.matrixWorld);
          var l = n.ray.origin.distanceTo(th);
          return l < n.near || l > n.far
            ? null
            : { distance: l, point: th.clone(), object: e };
        })(e, t, n, r, Gl, Wl, jl, eh);
        if (u) {
          i &&
            (Yl.fromBufferAttribute(i, o),
            Kl.fromBufferAttribute(i, l),
            Zl.fromBufferAttribute(i, h),
            (u.uv = ml.getInterpolation(eh, Gl, Wl, jl, Yl, Kl, Zl, new Cs()))),
            a &&
              (Yl.fromBufferAttribute(a, o),
              Kl.fromBufferAttribute(a, l),
              Zl.fromBufferAttribute(a, h),
              (u.uv1 = ml.getInterpolation(eh, Gl, Wl, jl, Yl, Kl, Zl, new Cs())),
              (u.uv2 = u.uv1)),
            s &&
              (Jl.fromBufferAttribute(s, o),
              $l.fromBufferAttribute(s, l),
              Ql.fromBufferAttribute(s, h),
              (u.normal = ml.getInterpolation(
                eh,
                Gl,
                Wl,
                jl,
                Jl,
                $l,
                Ql,
                new to()
              )),
              u.normal.dot(r.direction) > 0 && u.normal.multiplyScalar(-1));
          var c = { a: o, b: l, c: h, normal: new to(), materialIndex: 0 };
          ml.getNormal(Gl, Wl, jl, c.normal), (u.face = c);
        }
        return u;
      }
      var ih = (function (e) {
        function t() {
          var e,
            n =
              arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
            r =
              arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1,
            i =
              arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1,
            a =
              arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1,
            s =
              arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 1,
            o =
              arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 1;
          Fi(this, t),
            ((e = Mi(this, t)).type = "BoxGeometry"),
            (e.parameters = {
              width: n,
              height: r,
              depth: i,
              widthSegments: a,
              heightSegments: s,
              depthSegments: o
            });
          var l = Pi(e);
          (a = Math.floor(a)), (s = Math.floor(s)), (o = Math.floor(o));
          var h = [],
            u = [],
            c = [],
            d = [],
            f = 0,
            p = 0;
          function m(e, t, n, r, i, a, s, o, m, g, v) {
            for (
              var y = a / m,
                _ = s / g,
                b = a / 2,
                x = s / 2,
                S = o / 2,
                E = m + 1,
                w = g + 1,
                T = 0,
                M = 0,
                A = new to(),
                C = 0;
              C < w;
              C++
            )
              for (var P = C * _ - x, k = 0; k < E; k++) {
                var R = k * y - b;
                (A[e] = R * r),
                  (A[t] = P * i),
                  (A[n] = S),
                  u.push(A.x, A.y, A.z),
                  (A[e] = 0),
                  (A[t] = 0),
                  (A[n] = o > 0 ? 1 : -1),
                  c.push(A.x, A.y, A.z),
                  d.push(k / m),
                  d.push(1 - C / g),
                  (T += 1);
              }
            for (var D = 0; D < g; D++)
              for (var I = 0; I < m; I++) {
                var L = f + I + E * D,
                  F = f + I + E * (D + 1),
                  O = f + (I + 1) + E * (D + 1),
                  N = f + (I + 1) + E * D;
                h.push(L, F, N), h.push(F, O, N), (M += 6);
              }
            l.addGroup(p, M, v), (p += M), (f += T);
          }
          return (
            m("z", "y", "x", -1, -1, i, r, n, o, s, 0),
            m("z", "y", "x", 1, -1, i, r, -n, o, s, 1),
            m("x", "z", "y", 1, 1, n, i, r, a, o, 2),
            m("x", "z", "y", 1, -1, n, i, -r, a, o, 3),
            m("x", "y", "z", 1, -1, n, r, i, a, s, 4),
            m("x", "y", "z", -1, -1, n, r, -i, a, s, 5),
            e.setIndex(h),
            e.setAttribute("position", new kl(u, 3)),
            e.setAttribute("normal", new kl(c, 3)),
            e.setAttribute("uv", new kl(d, 2)),
            e
          );
        }
        return (
          ki(t, e),
          Ni(
            t,
            [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.parameters = Object.assign({}, e.parameters)),
                    this
                  );
                }
              }
            ],
            [
              {
                key: "fromJSON",
                value: function (e) {
                  return new t(
                    e.width,
                    e.height,
                    e.depth,
                    e.widthSegments,
                    e.heightSegments,
                    e.depthSegments
                  );
                }
              }
            ]
          ),
          t
        );
      })(Bl);
      function ah(e) {
        var t = {};
        for (var n in e)
          for (var r in ((t[n] = {}), e[n])) {
            var i = e[n][r];
            i &&
            (i.isColor ||
              i.isMatrix3 ||
              i.isMatrix4 ||
              i.isVector2 ||
              i.isVector3 ||
              i.isVector4 ||
              i.isTexture ||
              i.isQuaternion)
              ? i.isRenderTargetTexture
                ? (console.warn(
                    "UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."
                  ),
                  (t[n][r] = null))
                : (t[n][r] = i.clone())
              : Array.isArray(i)
              ? (t[n][r] = i.slice())
              : (t[n][r] = i);
          }
        return t;
      }
      function sh(e) {
        for (var t = {}, n = 0; n < e.length; n++) {
          var r = ah(e[n]);
          for (var i in r) t[i] = r[i];
        }
        return t;
      }
      function oh(e) {
        return null === e.getRenderTarget()
          ? e.outputColorSpace
          : Vs.workingColorSpace;
      }
      var lh = { clone: ah, merge: sh },
        hh = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isShaderMaterial = !0),
              (n.type = "ShaderMaterial"),
              (n.defines = {}),
              (n.uniforms = {}),
              (n.uniformsGroups = []),
              (n.vertexShader =
                "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"),
              (n.fragmentShader =
                "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}"),
              (n.linewidth = 1),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              (n.fog = !1),
              (n.lights = !1),
              (n.clipping = !1),
              (n.forceSinglePass = !0),
              (n.extensions = {
                derivatives: !1,
                fragDepth: !1,
                drawBuffers: !1,
                shaderTextureLOD: !1,
                clipCullDistance: !1
              }),
              (n.defaultAttributeValues = {
                color: [1, 1, 1],
                uv: [0, 0],
                uv1: [0, 0]
              }),
              (n.index0AttributeName = void 0),
              (n.uniformsNeedUpdate = !1),
              (n.glslVersion = null),
              void 0 !== e && n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.fragmentShader = e.fragmentShader),
                    (this.vertexShader = e.vertexShader),
                    (this.uniforms = ah(e.uniforms)),
                    (this.uniformsGroups = (function (e) {
                      for (var t = [], n = 0; n < e.length; n++)
                        t.push(e[n].clone());
                      return t;
                    })(e.uniformsGroups)),
                    (this.defines = Object.assign({}, e.defines)),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    (this.fog = e.fog),
                    (this.lights = e.lights),
                    (this.clipping = e.clipping),
                    (this.extensions = Object.assign({}, e.extensions)),
                    (this.glslVersion = e.glslVersion),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = xi(Ci(t.prototype), "toJSON", this).call(this, e);
                  for (var r in ((n.glslVersion = this.glslVersion),
                  (n.uniforms = {}),
                  this.uniforms)) {
                    var i = this.uniforms[r].value;
                    i && i.isTexture
                      ? (n.uniforms[r] = { type: "t", value: i.toJSON(e).uuid })
                      : i && i.isColor
                      ? (n.uniforms[r] = { type: "c", value: i.getHex() })
                      : i && i.isVector2
                      ? (n.uniforms[r] = { type: "v2", value: i.toArray() })
                      : i && i.isVector3
                      ? (n.uniforms[r] = { type: "v3", value: i.toArray() })
                      : i && i.isVector4
                      ? (n.uniforms[r] = { type: "v4", value: i.toArray() })
                      : i && i.isMatrix3
                      ? (n.uniforms[r] = { type: "m3", value: i.toArray() })
                      : i && i.isMatrix4
                      ? (n.uniforms[r] = { type: "m4", value: i.toArray() })
                      : (n.uniforms[r] = { value: i });
                  }
                  Object.keys(this.defines).length > 0 &&
                    (n.defines = this.defines),
                    (n.vertexShader = this.vertexShader),
                    (n.fragmentShader = this.fragmentShader),
                    (n.lights = this.lights),
                    (n.clipping = this.clipping);
                  var a = {};
                  for (var s in this.extensions)
                    !0 === this.extensions[s] && (a[s] = !0);
                  return Object.keys(a).length > 0 && (n.extensions = a), n;
                }
              }
            ]),
            t
          );
        })(El),
        uh = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isCamera = !0),
              (e.type = "Camera"),
              (e.matrixWorldInverse = new Do()),
              (e.projectionMatrix = new Do()),
              (e.projectionMatrixInverse = new Do()),
              (e.coordinateSystem = ds),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    this.matrixWorldInverse.copy(e.matrixWorldInverse),
                    this.projectionMatrix.copy(e.projectionMatrix),
                    this.projectionMatrixInverse.copy(e.projectionMatrixInverse),
                    (this.coordinateSystem = e.coordinateSystem),
                    this
                  );
                }
              },
              {
                key: "getWorldDirection",
                value: function (e) {
                  return xi(Ci(t.prototype), "getWorldDirection", this)
                    .call(this, e)
                    .negate();
                }
              },
              {
                key: "updateMatrixWorld",
                value: function (e) {
                  xi(Ci(t.prototype), "updateMatrixWorld", this).call(this, e),
                    this.matrixWorldInverse.copy(this.matrixWorld).invert();
                }
              },
              {
                key: "updateWorldMatrix",
                value: function (e, n) {
                  xi(Ci(t.prototype), "updateWorldMatrix", this).call(this, e, n),
                    this.matrixWorldInverse.copy(this.matrixWorld).invert();
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]),
            t
          );
        })(rl),
        ch = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 50,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0.1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 2e3;
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isPerspectiveCamera = !0),
              (e.type = "PerspectiveCamera"),
              (e.fov = n),
              (e.zoom = 1),
              (e.near = i),
              (e.far = a),
              (e.focus = 10),
              (e.aspect = r),
              (e.view = null),
              (e.filmGauge = 35),
              (e.filmOffset = 0),
              e.updateProjectionMatrix(),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    (this.fov = e.fov),
                    (this.zoom = e.zoom),
                    (this.near = e.near),
                    (this.far = e.far),
                    (this.focus = e.focus),
                    (this.aspect = e.aspect),
                    (this.view =
                      null === e.view ? null : Object.assign({}, e.view)),
                    (this.filmGauge = e.filmGauge),
                    (this.filmOffset = e.filmOffset),
                    this
                  );
                }
              },
              {
                key: "setFocalLength",
                value: function (e) {
                  var t = (0.5 * this.getFilmHeight()) / e;
                  (this.fov = 2 * vs * Math.atan(t)),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "getFocalLength",
                value: function () {
                  var e = Math.tan(0.5 * gs * this.fov);
                  return (0.5 * this.getFilmHeight()) / e;
                }
              },
              {
                key: "getEffectiveFOV",
                value: function () {
                  return (
                    2 * vs * Math.atan(Math.tan(0.5 * gs * this.fov) / this.zoom)
                  );
                }
              },
              {
                key: "getFilmWidth",
                value: function () {
                  return this.filmGauge * Math.min(this.aspect, 1);
                }
              },
              {
                key: "getFilmHeight",
                value: function () {
                  return this.filmGauge / Math.max(this.aspect, 1);
                }
              },
              {
                key: "setViewOffset",
                value: function (e, t, n, r, i, a) {
                  (this.aspect = e / t),
                    null === this.view &&
                      (this.view = {
                        enabled: !0,
                        fullWidth: 1,
                        fullHeight: 1,
                        offsetX: 0,
                        offsetY: 0,
                        width: 1,
                        height: 1
                      }),
                    (this.view.enabled = !0),
                    (this.view.fullWidth = e),
                    (this.view.fullHeight = t),
                    (this.view.offsetX = n),
                    (this.view.offsetY = r),
                    (this.view.width = i),
                    (this.view.height = a),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "clearViewOffset",
                value: function () {
                  null !== this.view && (this.view.enabled = !1),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "updateProjectionMatrix",
                value: function () {
                  var e = this.near,
                    t = (e * Math.tan(0.5 * gs * this.fov)) / this.zoom,
                    n = 2 * t,
                    r = this.aspect * n,
                    i = -0.5 * r,
                    a = this.view;
                  if (null !== this.view && this.view.enabled) {
                    var s = a.fullWidth,
                      o = a.fullHeight;
                    (i += (a.offsetX * r) / s),
                      (t -= (a.offsetY * n) / o),
                      (r *= a.width / s),
                      (n *= a.height / o);
                  }
                  var l = this.filmOffset;
                  0 !== l && (i += (e * l) / this.getFilmWidth()),
                    this.projectionMatrix.makePerspective(
                      i,
                      i + r,
                      t,
                      t - n,
                      e,
                      this.far,
                      this.coordinateSystem
                    ),
                    this.projectionMatrixInverse
                      .copy(this.projectionMatrix)
                      .invert();
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = xi(Ci(t.prototype), "toJSON", this).call(this, e);
                  return (
                    (n.object.fov = this.fov),
                    (n.object.zoom = this.zoom),
                    (n.object.near = this.near),
                    (n.object.far = this.far),
                    (n.object.focus = this.focus),
                    (n.object.aspect = this.aspect),
                    null !== this.view &&
                      (n.object.view = Object.assign({}, this.view)),
                    (n.object.filmGauge = this.filmGauge),
                    (n.object.filmOffset = this.filmOffset),
                    n
                  );
                }
              }
            ]),
            t
          );
        })(uh),
        dh = -90,
        fh = (function (e) {
          function t(e, n, r) {
            var i;
            Fi(this, t),
              ((i = Mi(this, t)).type = "CubeCamera"),
              (i.renderTarget = r),
              (i.coordinateSystem = null),
              (i.activeMipmapLevel = 0);
            var a = new ch(dh, 1, e, n);
            (a.layers = i.layers), i.add(a);
            var s = new ch(dh, 1, e, n);
            (s.layers = i.layers), i.add(s);
            var o = new ch(dh, 1, e, n);
            (o.layers = i.layers), i.add(o);
            var l = new ch(dh, 1, e, n);
            (l.layers = i.layers), i.add(l);
            var h = new ch(dh, 1, e, n);
            (h.layers = i.layers), i.add(h);
            var u = new ch(dh, 1, e, n);
            return (u.layers = i.layers), i.add(u), i;
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "updateCoordinateSystem",
                value: function () {
                  var e,
                    t = this.coordinateSystem,
                    n = this.children.concat(),
                    r = bi(n, 6),
                    i = r[0],
                    a = r[1],
                    s = r[2],
                    o = r[3],
                    l = r[4],
                    h = r[5],
                    u = _i(n);
                  try {
                    for (u.s(); !(e = u.n()).done; ) {
                      var c = e.value;
                      this.remove(c);
                    }
                  } catch (e) {
                    u.e(e);
                  } finally {
                    u.f();
                  }
                  if (t === ds)
                    i.up.set(0, 1, 0),
                      i.lookAt(1, 0, 0),
                      a.up.set(0, 1, 0),
                      a.lookAt(-1, 0, 0),
                      s.up.set(0, 0, -1),
                      s.lookAt(0, 1, 0),
                      o.up.set(0, 0, 1),
                      o.lookAt(0, -1, 0),
                      l.up.set(0, 1, 0),
                      l.lookAt(0, 0, 1),
                      h.up.set(0, 1, 0),
                      h.lookAt(0, 0, -1);
                  else {
                    if (t !== fs)
                      throw new Error(
                        "THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: " +
                          t
                      );
                    i.up.set(0, -1, 0),
                      i.lookAt(-1, 0, 0),
                      a.up.set(0, -1, 0),
                      a.lookAt(1, 0, 0),
                      s.up.set(0, 0, 1),
                      s.lookAt(0, 1, 0),
                      o.up.set(0, 0, -1),
                      o.lookAt(0, -1, 0),
                      l.up.set(0, -1, 0),
                      l.lookAt(0, 0, 1),
                      h.up.set(0, -1, 0),
                      h.lookAt(0, 0, -1);
                  }
                  var d,
                    f = _i(n);
                  try {
                    for (f.s(); !(d = f.n()).done; ) {
                      var p = d.value;
                      this.add(p), p.updateMatrixWorld();
                    }
                  } catch (e) {
                    f.e(e);
                  } finally {
                    f.f();
                  }
                }
              },
              {
                key: "update",
                value: function (e, t) {
                  null === this.parent && this.updateMatrixWorld();
                  var n = this.renderTarget,
                    r = this.activeMipmapLevel;
                  this.coordinateSystem !== e.coordinateSystem &&
                    ((this.coordinateSystem = e.coordinateSystem),
                    this.updateCoordinateSystem());
                  var i = bi(this.children, 6),
                    a = i[0],
                    s = i[1],
                    o = i[2],
                    l = i[3],
                    h = i[4],
                    u = i[5],
                    c = e.getRenderTarget(),
                    d = e.getActiveCubeFace(),
                    f = e.getActiveMipmapLevel(),
                    p = e.xr.enabled;
                  e.xr.enabled = !1;
                  var m = n.texture.generateMipmaps;
                  (n.texture.generateMipmaps = !1),
                    e.setRenderTarget(n, 0, r),
                    e.render(t, a),
                    e.setRenderTarget(n, 1, r),
                    e.render(t, s),
                    e.setRenderTarget(n, 2, r),
                    e.render(t, o),
                    e.setRenderTarget(n, 3, r),
                    e.render(t, l),
                    e.setRenderTarget(n, 4, r),
                    e.render(t, h),
                    (n.texture.generateMipmaps = m),
                    e.setRenderTarget(n, 5, r),
                    e.render(t, u),
                    e.setRenderTarget(c, d, f),
                    (e.xr.enabled = p),
                    (n.texture.needsPMREMUpdate = !0);
                }
              }
            ]),
            t
          );
        })(rl),
        ph = (function (e) {
          function t(e, n, r, i, a, s, o, l, h, u) {
            var c;
            return (
              Fi(this, t),
              ((c = Mi(this, t, [
                (e = void 0 !== e ? e : []),
                (n = void 0 !== n ? n : Hi),
                r,
                i,
                a,
                s,
                o,
                l,
                h,
                u
              ])).isCubeTexture = !0),
              (c.flipY = !1),
              c
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "images",
                get: function () {
                  return this.image;
                },
                set: function (e) {
                  this.image = e;
                }
              }
            ]),
            t
          );
        })(Ks),
        mh = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : {};
            Fi(this, t),
              ((e = Mi(this, t, [n, n, r])).isWebGLCubeRenderTarget = !0);
            var i = { width: n, height: n, depth: 1 },
              a = [i, i, i, i, i, i];
            return (
              void 0 !== r.encoding &&
                (Fs(
                  "THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."
                ),
                (r.colorSpace = r.encoding === $a ? es : Qa)),
              (e.texture = new ph(
                a,
                r.mapping,
                r.wrapS,
                r.wrapT,
                r.magFilter,
                r.minFilter,
                r.format,
                r.type,
                r.anisotropy,
                r.colorSpace
              )),
              (e.texture.isRenderTargetTexture = !0),
              (e.texture.generateMipmaps =
                void 0 !== r.generateMipmaps && r.generateMipmaps),
              (e.texture.minFilter = void 0 !== r.minFilter ? r.minFilter : Ji),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "fromEquirectangularTexture",
                value: function (e, t) {
                  (this.texture.type = t.type),
                    (this.texture.colorSpace = t.colorSpace),
                    (this.texture.generateMipmaps = t.generateMipmaps),
                    (this.texture.minFilter = t.minFilter),
                    (this.texture.magFilter = t.magFilter);
                  var n = new ih(5, 5, 5),
                    r = new hh({
                      name: "CubemapFromEquirect",
                      uniforms: ah({ tEquirect: { value: null } }),
                      vertexShader:
                        "\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",
                      fragmentShader:
                        "\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",
                      side: 1,
                      blending: 0
                    });
                  r.uniforms.tEquirect.value = t;
                  var i = new nh(n, r),
                    a = t.minFilter;
                  return (
                    t.minFilter === $i && (t.minFilter = Ji),
                    new fh(1, 10, this).update(e, i),
                    (t.minFilter = a),
                    i.geometry.dispose(),
                    i.material.dispose(),
                    this
                  );
                }
              },
              {
                key: "clear",
                value: function (e, t, n, r) {
                  for (var i = e.getRenderTarget(), a = 0; a < 6; a++)
                    e.setRenderTarget(this, a), e.clear(t, n, r);
                  e.setRenderTarget(i);
                }
              }
            ]),
            t
          );
        })(Js),
        gh = new to(),
        vh = new to(),
        yh = new Ps(),
        _h = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new to(1, 0, 0),
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0;
            Fi(this, e),
              (this.isPlane = !0),
              (this.normal = t),
              (this.constant = n);
          }
          return (
            Ni(e, [
              {
                key: "set",
                value: function (e, t) {
                  return this.normal.copy(e), (this.constant = t), this;
                }
              },
              {
                key: "setComponents",
                value: function (e, t, n, r) {
                  return this.normal.set(e, t, n), (this.constant = r), this;
                }
              },
              {
                key: "setFromNormalAndCoplanarPoint",
                value: function (e, t) {
                  return (
                    this.normal.copy(e),
                    (this.constant = -t.dot(this.normal)),
                    this
                  );
                }
              },
              {
                key: "setFromCoplanarPoints",
                value: function (e, t, n) {
                  var r = gh
                    .subVectors(n, t)
                    .cross(vh.subVectors(e, t))
                    .normalize();
                  return this.setFromNormalAndCoplanarPoint(r, e), this;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    this.normal.copy(e.normal), (this.constant = e.constant), this
                  );
                }
              },
              {
                key: "normalize",
                value: function () {
                  var e = 1 / this.normal.length();
                  return (
                    this.normal.multiplyScalar(e), (this.constant *= e), this
                  );
                }
              },
              {
                key: "negate",
                value: function () {
                  return (this.constant *= -1), this.normal.negate(), this;
                }
              },
              {
                key: "distanceToPoint",
                value: function (e) {
                  return this.normal.dot(e) + this.constant;
                }
              },
              {
                key: "distanceToSphere",
                value: function (e) {
                  return this.distanceToPoint(e.center) - e.radius;
                }
              },
              {
                key: "projectPoint",
                value: function (e, t) {
                  return t
                    .copy(e)
                    .addScaledVector(this.normal, -this.distanceToPoint(e));
                }
              },
              {
                key: "intersectLine",
                value: function (e, t) {
                  var n = e.delta(gh),
                    r = this.normal.dot(n);
                  if (0 === r)
                    return 0 === this.distanceToPoint(e.start)
                      ? t.copy(e.start)
                      : null;
                  var i = -(e.start.dot(this.normal) + this.constant) / r;
                  return i < 0 || i > 1
                    ? null
                    : t.copy(e.start).addScaledVector(n, i);
                }
              },
              {
                key: "intersectsLine",
                value: function (e) {
                  var t = this.distanceToPoint(e.start),
                    n = this.distanceToPoint(e.end);
                  return (t < 0 && n > 0) || (n < 0 && t > 0);
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  return e.intersectsPlane(this);
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  return e.intersectsPlane(this);
                }
              },
              {
                key: "coplanarPoint",
                value: function (e) {
                  return e.copy(this.normal).multiplyScalar(-this.constant);
                }
              },
              {
                key: "applyMatrix4",
                value: function (e, t) {
                  var n = t || yh.getNormalMatrix(e),
                    r = this.coplanarPoint(gh).applyMatrix4(e),
                    i = this.normal.applyMatrix3(n).normalize();
                  return (this.constant = -r.dot(i)), this;
                }
              },
              {
                key: "translate",
                value: function (e) {
                  return (this.constant -= e.dot(this.normal)), this;
                }
              },
              {
                key: "equals",
                value: function (e) {
                  return (
                    e.normal.equals(this.normal) && e.constant === this.constant
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]),
            e
          );
        })(),
        bh = new Eo(),
        xh = new to(),
        Sh = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new _h(),
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new _h(),
              r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : new _h(),
              i =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : new _h(),
              a =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : new _h(),
              s =
                arguments.length > 5 && void 0 !== arguments[5]
                  ? arguments[5]
                  : new _h();
            Fi(this, e), (this.planes = [t, n, r, i, a, s]);
          }
          return (
            Ni(e, [
              {
                key: "set",
                value: function (e, t, n, r, i, a) {
                  var s = this.planes;
                  return (
                    s[0].copy(e),
                    s[1].copy(t),
                    s[2].copy(n),
                    s[3].copy(r),
                    s[4].copy(i),
                    s[5].copy(a),
                    this
                  );
                }
              },
              {
                key: "copy",
                value: function (e) {
                  for (var t = this.planes, n = 0; n < 6; n++)
                    t[n].copy(e.planes[n]);
                  return this;
                }
              },
              {
                key: "setFromProjectionMatrix",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : ds,
                    n = this.planes,
                    r = e.elements,
                    i = r[0],
                    a = r[1],
                    s = r[2],
                    o = r[3],
                    l = r[4],
                    h = r[5],
                    u = r[6],
                    c = r[7],
                    d = r[8],
                    f = r[9],
                    p = r[10],
                    m = r[11],
                    g = r[12],
                    v = r[13],
                    y = r[14],
                    _ = r[15];
                  if (
                    (n[0].setComponents(o - i, c - l, m - d, _ - g).normalize(),
                    n[1].setComponents(o + i, c + l, m + d, _ + g).normalize(),
                    n[2].setComponents(o + a, c + h, m + f, _ + v).normalize(),
                    n[3].setComponents(o - a, c - h, m - f, _ - v).normalize(),
                    n[4].setComponents(o - s, c - u, m - p, _ - y).normalize(),
                    t === ds)
                  )
                    n[5].setComponents(o + s, c + u, m + p, _ + y).normalize();
                  else {
                    if (t !== fs)
                      throw new Error(
                        "THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: " +
                          t
                      );
                    n[5].setComponents(s, u, p, y).normalize();
                  }
                  return this;
                }
              },
              {
                key: "intersectsObject",
                value: function (e) {
                  if (void 0 !== e.boundingSphere)
                    null === e.boundingSphere && e.computeBoundingSphere(),
                      bh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);
                  else {
                    var t = e.geometry;
                    null === t.boundingSphere && t.computeBoundingSphere(),
                      bh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld);
                  }
                  return this.intersectsSphere(bh);
                }
              },
              {
                key: "intersectsSprite",
                value: function (e) {
                  return (
                    bh.center.set(0, 0, 0),
                    (bh.radius = 0.7071067811865476),
                    bh.applyMatrix4(e.matrixWorld),
                    this.intersectsSphere(bh)
                  );
                }
              },
              {
                key: "intersectsSphere",
                value: function (e) {
                  for (
                    var t = this.planes, n = e.center, r = -e.radius, i = 0;
                    i < 6;
                    i++
                  )
                    if (t[i].distanceToPoint(n) < r) return !1;
                  return !0;
                }
              },
              {
                key: "intersectsBox",
                value: function (e) {
                  for (var t = this.planes, n = 0; n < 6; n++) {
                    var r = t[n];
                    if (
                      ((xh.x = r.normal.x > 0 ? e.max.x : e.min.x),
                      (xh.y = r.normal.y > 0 ? e.max.y : e.min.y),
                      (xh.z = r.normal.z > 0 ? e.max.z : e.min.z),
                      r.distanceToPoint(xh) < 0)
                    )
                      return !1;
                  }
                  return !0;
                }
              },
              {
                key: "containsPoint",
                value: function (e) {
                  for (var t = this.planes, n = 0; n < 6; n++)
                    if (t[n].distanceToPoint(e) < 0) return !1;
                  return !0;
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              }
            ]),
            e
          );
        })();
      function Eh() {
        var e = null,
          t = !1,
          n = null,
          r = null;
        function i(t, a) {
          n(t, a), (r = e.requestAnimationFrame(i));
        }
        return {
          start: function () {
            !0 !== t &&
              null !== n &&
              ((r = e.requestAnimationFrame(i)), (t = !0));
          },
          stop: function () {
            e.cancelAnimationFrame(r), (t = !1);
          },
          setAnimationLoop: function (e) {
            n = e;
          },
          setContext: function (t) {
            e = t;
          }
        };
      }
      function wh(e, t) {
        var n = t.isWebGL2,
          r = new WeakMap();
        return {
          get: function (e) {
            return e.isInterleavedBufferAttribute && (e = e.data), r.get(e);
          },
          remove: function (t) {
            t.isInterleavedBufferAttribute && (t = t.data);
            var n = r.get(t);
            n && (e.deleteBuffer(n.buffer), r.delete(t));
          },
          update: function (t, i) {
            if (t.isGLBufferAttribute) {
              var a = r.get(t);
              (!a || a.version < t.version) &&
                r.set(t, {
                  buffer: t.buffer,
                  type: t.type,
                  bytesPerElement: t.elementSize,
                  version: t.version
                });
            } else {
              t.isInterleavedBufferAttribute && (t = t.data);
              var s = r.get(t);
              if (void 0 === s)
                r.set(
                  t,
                  (function (t, r) {
                    var i,
                      a = t.array,
                      s = t.usage,
                      o = a.byteLength,
                      l = e.createBuffer();
                    if (
                      (e.bindBuffer(r, l),
                      e.bufferData(r, a, s),
                      t.onUploadCallback(),
                      a instanceof Float32Array)
                    )
                      i = e.FLOAT;
                    else if (a instanceof Uint16Array) {
                      if (t.isFloat16BufferAttribute) {
                        if (!n)
                          throw new Error(
                            "THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."
                          );
                        i = e.HALF_FLOAT;
                      } else i = e.UNSIGNED_SHORT;
                    } else if (a instanceof Int16Array) i = e.SHORT;
                    else if (a instanceof Uint32Array) i = e.UNSIGNED_INT;
                    else if (a instanceof Int32Array) i = e.INT;
                    else if (a instanceof Int8Array) i = e.BYTE;
                    else if (a instanceof Uint8Array) i = e.UNSIGNED_BYTE;
                    else {
                      if (!(a instanceof Uint8ClampedArray))
                        throw new Error(
                          "THREE.WebGLAttributes: Unsupported buffer data format: " +
                            a
                        );
                      i = e.UNSIGNED_BYTE;
                    }
                    return {
                      buffer: l,
                      type: i,
                      bytesPerElement: a.BYTES_PER_ELEMENT,
                      version: t.version,
                      size: o
                    };
                  })(t, i)
                );
              else if (s.version < t.version) {
                if (s.size !== t.array.byteLength)
                  throw new Error(
                    "THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported."
                  );
                !(function (t, r, i) {
                  var a = r.array,
                    s = r._updateRange,
                    o = r.updateRanges;
                  if (
                    (e.bindBuffer(i, t),
                    -1 === s.count && 0 === o.length && e.bufferSubData(i, 0, a),
                    0 !== o.length)
                  ) {
                    for (var l = 0, h = o.length; l < h; l++) {
                      var u = o[l];
                      n
                        ? e.bufferSubData(
                            i,
                            u.start * a.BYTES_PER_ELEMENT,
                            a,
                            u.start,
                            u.count
                          )
                        : e.bufferSubData(
                            i,
                            u.start * a.BYTES_PER_ELEMENT,
                            a.subarray(u.start, u.start + u.count)
                          );
                    }
                    r.clearUpdateRanges();
                  }
                  -1 !== s.count &&
                    (n
                      ? e.bufferSubData(
                          i,
                          s.offset * a.BYTES_PER_ELEMENT,
                          a,
                          s.offset,
                          s.count
                        )
                      : e.bufferSubData(
                          i,
                          s.offset * a.BYTES_PER_ELEMENT,
                          a.subarray(s.offset, s.offset + s.count)
                        ),
                    (s.count = -1)),
                    r.onUploadCallback();
                })(s.buffer, t, i),
                  (s.version = t.version);
              }
            }
          }
        };
      }
      var Th = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            Fi(this, t),
              ((e = Mi(this, t)).type = "PlaneGeometry"),
              (e.parameters = {
                width: n,
                height: r,
                widthSegments: i,
                heightSegments: a
              });
            for (
              var s = n / 2,
                o = r / 2,
                l = Math.floor(i),
                h = Math.floor(a),
                u = l + 1,
                c = h + 1,
                d = n / l,
                f = r / h,
                p = [],
                m = [],
                g = [],
                v = [],
                y = 0;
              y < c;
              y++
            )
              for (var _ = y * f - o, b = 0; b < u; b++) {
                var x = b * d - s;
                m.push(x, -_, 0),
                  g.push(0, 0, 1),
                  v.push(b / l),
                  v.push(1 - y / h);
              }
            for (var S = 0; S < h; S++)
              for (var E = 0; E < l; E++) {
                var w = E + u * S,
                  T = E + u * (S + 1),
                  M = E + 1 + u * (S + 1),
                  A = E + 1 + u * S;
                p.push(w, T, A), p.push(T, M, A);
              }
            return (
              e.setIndex(p),
              e.setAttribute("position", new kl(m, 3)),
              e.setAttribute("normal", new kl(g, 3)),
              e.setAttribute("uv", new kl(v, 2)),
              e
            );
          }
          return (
            ki(t, e),
            Ni(
              t,
              [
                {
                  key: "copy",
                  value: function (e) {
                    return (
                      xi(Ci(t.prototype), "copy", this).call(this, e),
                      (this.parameters = Object.assign({}, e.parameters)),
                      this
                    );
                  }
                }
              ],
              [
                {
                  key: "fromJSON",
                  value: function (e) {
                    return new t(
                      e.width,
                      e.height,
                      e.widthSegments,
                      e.heightSegments
                    );
                  }
                }
              ]
            ),
            t
          );
        })(Bl),
        Mh = {
          alphahash_fragment:
            "#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",
          alphahash_pars_fragment:
            "#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",
          alphamap_fragment:
            "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",
          alphamap_pars_fragment:
            "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
          alphatest_fragment:
            "#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",
          alphatest_pars_fragment:
            "#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",
          aomap_fragment:
            "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",
          aomap_pars_fragment:
            "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
          batching_pars_vertex:
            "#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",
          batching_vertex:
            "#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",
          begin_vertex:
            "vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",
          beginnormal_vertex:
            "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",
          bsdfs:
            "float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",
          iridescence_fragment:
            "#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",
          bumpmap_pars_fragment:
            "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
          clipping_planes_fragment:
            "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
          clipping_planes_pars_fragment:
            "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",
          clipping_planes_pars_vertex:
            "#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",
          clipping_planes_vertex:
            "#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",
          color_fragment:
            "#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",
          color_pars_fragment:
            "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",
          color_pars_vertex:
            "#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
          color_vertex:
            "#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",
          common:
            "#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",
          cube_uv_reflection_fragment:
            "#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
          defaultnormal_vertex:
            "vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
          displacementmap_pars_vertex:
            "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",
          displacementmap_vertex:
            "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",
          emissivemap_fragment:
            "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
          emissivemap_pars_fragment:
            "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",
          colorspace_fragment:
            "gl_FragColor = linearToOutputTexel( gl_FragColor );",
          colorspace_pars_fragment:
            "\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",
          envmap_fragment:
            "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
          envmap_common_pars_fragment:
            "#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",
          envmap_pars_fragment:
            "#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
          envmap_pars_vertex:
            "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",
          envmap_physical_pars_fragment:
            "#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",
          envmap_vertex:
            "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
          fog_vertex: "#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",
          fog_pars_vertex: "#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",
          fog_fragment:
            "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",
          fog_pars_fragment:
            "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
          gradientmap_pars_fragment:
            "#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",
          lightmap_fragment:
            "#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",
          lightmap_pars_fragment:
            "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",
          lights_lambert_fragment:
            "LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",
          lights_lambert_pars_fragment:
            "varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",
          lights_pars_begin:
            "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",
          lights_toon_fragment:
            "ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",
          lights_toon_pars_fragment:
            "varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",
          lights_phong_fragment:
            "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",
          lights_phong_pars_fragment:
            "varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",
          lights_physical_fragment:
            "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",
          lights_physical_pars_fragment:
            "struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
          lights_fragment_begin:
            "\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
          lights_fragment_maps:
            "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",
          lights_fragment_end:
            "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",
          logdepthbuf_fragment:
            "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
          logdepthbuf_pars_fragment:
            "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
          logdepthbuf_pars_vertex:
            "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",
          logdepthbuf_vertex:
            "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
          map_fragment:
            "#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",
          map_pars_fragment: "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
          map_particle_fragment:
            "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
          map_particle_pars_fragment:
            "#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
          metalnessmap_fragment:
            "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",
          metalnessmap_pars_fragment:
            "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
          morphcolor_vertex:
            "#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",
          morphnormal_vertex:
            "#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",
          morphtarget_pars_vertex:
            "#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",
          morphtarget_vertex:
            "#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",
          normal_fragment_begin:
            "float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",
          normal_fragment_maps:
            "#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",
          normal_pars_fragment:
            "#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",
          normal_pars_vertex:
            "#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",
          normal_vertex:
            "#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",
          normalmap_pars_fragment:
            "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",
          clearcoat_normal_fragment_begin:
            "#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",
          clearcoat_normal_fragment_maps:
            "#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",
          clearcoat_pars_fragment:
            "#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",
          iridescence_pars_fragment:
            "#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",
          opaque_fragment:
            "#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",
          packing:
            "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",
          premultiplied_alpha_fragment:
            "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",
          project_vertex:
            "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",
          dithering_fragment:
            "#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",
          dithering_pars_fragment:
            "#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
          roughnessmap_fragment:
            "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",
          roughnessmap_pars_fragment:
            "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",
          shadowmap_pars_fragment:
            "#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
          shadowmap_pars_vertex:
            "#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
          shadowmap_vertex:
            "#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",
          shadowmask_pars_fragment:
            "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
          skinbase_vertex:
            "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
          skinning_pars_vertex:
            "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",
          skinning_vertex:
            "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",
          skinnormal_vertex:
            "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
          specularmap_fragment:
            "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",
          specularmap_pars_fragment:
            "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",
          tonemapping_fragment:
            "#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",
          tonemapping_pars_fragment:
            "#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
          transmission_fragment:
            "#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",
          transmission_pars_fragment:
            "#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",
          uv_pars_fragment:
            "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",
          uv_pars_vertex:
            "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",
          uv_vertex:
            "#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",
          worldpos_vertex:
            "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
          background_vert:
            "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",
          background_frag:
            "uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",
          backgroundCube_vert:
            "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
          backgroundCube_frag:
            "#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",
          cube_vert:
            "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
          cube_frag:
            "uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",
          depth_vert:
            "#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
          depth_frag:
            "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
          distanceRGBA_vert:
            "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
          distanceRGBA_frag:
            "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
          equirect_vert:
            "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
          equirect_frag:
            "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",
          linedashed_vert:
            "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
          linedashed_frag:
            "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
          meshbasic_vert:
            "#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
          meshbasic_frag:
            "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshlambert_vert:
            "#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
          meshlambert_frag:
            "#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshmatcap_vert:
            "#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
          meshmatcap_frag:
            "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshnormal_vert:
            "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
          meshnormal_frag:
            "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",
          meshphong_vert:
            "#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
          meshphong_frag:
            "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshphysical_vert:
            "#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",
          meshphysical_frag:
            "#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          meshtoon_vert:
            "#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
          meshtoon_frag:
            "#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
          points_vert:
            "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
          points_frag:
            "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
          shadow_vert:
            "#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
          shadow_frag:
            "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",
          sprite_vert:
            "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
          sprite_frag:
            "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"
        },
        Ah = {
          common: {
            diffuse: { value: new bl(16777215) },
            opacity: { value: 1 },
            map: { value: null },
            mapTransform: { value: new Ps() },
            alphaMap: { value: null },
            alphaMapTransform: { value: new Ps() },
            alphaTest: { value: 0 }
          },
          specularmap: {
            specularMap: { value: null },
            specularMapTransform: { value: new Ps() }
          },
          envmap: {
            envMap: { value: null },
            flipEnvMap: { value: -1 },
            reflectivity: { value: 1 },
            ior: { value: 1.5 },
            refractionRatio: { value: 0.98 }
          },
          aomap: {
            aoMap: { value: null },
            aoMapIntensity: { value: 1 },
            aoMapTransform: { value: new Ps() }
          },
          lightmap: {
            lightMap: { value: null },
            lightMapIntensity: { value: 1 },
            lightMapTransform: { value: new Ps() }
          },
          bumpmap: {
            bumpMap: { value: null },
            bumpMapTransform: { value: new Ps() },
            bumpScale: { value: 1 }
          },
          normalmap: {
            normalMap: { value: null },
            normalMapTransform: { value: new Ps() },
            normalScale: { value: new Cs(1, 1) }
          },
          displacementmap: {
            displacementMap: { value: null },
            displacementMapTransform: { value: new Ps() },
            displacementScale: { value: 1 },
            displacementBias: { value: 0 }
          },
          emissivemap: {
            emissiveMap: { value: null },
            emissiveMapTransform: { value: new Ps() }
          },
          metalnessmap: {
            metalnessMap: { value: null },
            metalnessMapTransform: { value: new Ps() }
          },
          roughnessmap: {
            roughnessMap: { value: null },
            roughnessMapTransform: { value: new Ps() }
          },
          gradientmap: { gradientMap: { value: null } },
          fog: {
            fogDensity: { value: 25e-5 },
            fogNear: { value: 1 },
            fogFar: { value: 2e3 },
            fogColor: { value: new bl(16777215) }
          },
          lights: {
            ambientLightColor: { value: [] },
            lightProbe: { value: [] },
            directionalLights: {
              value: [],
              properties: { direction: {}, color: {} }
            },
            directionalLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {}
              }
            },
            directionalShadowMap: { value: [] },
            directionalShadowMatrix: { value: [] },
            spotLights: {
              value: [],
              properties: {
                color: {},
                position: {},
                direction: {},
                distance: {},
                coneCos: {},
                penumbraCos: {},
                decay: {}
              }
            },
            spotLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {}
              }
            },
            spotLightMap: { value: [] },
            spotShadowMap: { value: [] },
            spotLightMatrix: { value: [] },
            pointLights: {
              value: [],
              properties: { color: {}, position: {}, decay: {}, distance: {} }
            },
            pointLightShadows: {
              value: [],
              properties: {
                shadowBias: {},
                shadowNormalBias: {},
                shadowRadius: {},
                shadowMapSize: {},
                shadowCameraNear: {},
                shadowCameraFar: {}
              }
            },
            pointShadowMap: { value: [] },
            pointShadowMatrix: { value: [] },
            hemisphereLights: {
              value: [],
              properties: { direction: {}, skyColor: {}, groundColor: {} }
            },
            rectAreaLights: {
              value: [],
              properties: { color: {}, position: {}, width: {}, height: {} }
            },
            ltc_1: { value: null },
            ltc_2: { value: null }
          },
          points: {
            diffuse: { value: new bl(16777215) },
            opacity: { value: 1 },
            size: { value: 1 },
            scale: { value: 1 },
            map: { value: null },
            alphaMap: { value: null },
            alphaMapTransform: { value: new Ps() },
            alphaTest: { value: 0 },
            uvTransform: { value: new Ps() }
          },
          sprite: {
            diffuse: { value: new bl(16777215) },
            opacity: { value: 1 },
            center: { value: new Cs(0.5, 0.5) },
            rotation: { value: 0 },
            map: { value: null },
            mapTransform: { value: new Ps() },
            alphaMap: { value: null },
            alphaMapTransform: { value: new Ps() },
            alphaTest: { value: 0 }
          }
        },
        Ch = {
          basic: {
            uniforms: sh([
              Ah.common,
              Ah.specularmap,
              Ah.envmap,
              Ah.aomap,
              Ah.lightmap,
              Ah.fog
            ]),
            vertexShader: Mh.meshbasic_vert,
            fragmentShader: Mh.meshbasic_frag
          },
          lambert: {
            uniforms: sh([
              Ah.common,
              Ah.specularmap,
              Ah.envmap,
              Ah.aomap,
              Ah.lightmap,
              Ah.emissivemap,
              Ah.bumpmap,
              Ah.normalmap,
              Ah.displacementmap,
              Ah.fog,
              Ah.lights,
              { emissive: { value: new bl(0) } }
            ]),
            vertexShader: Mh.meshlambert_vert,
            fragmentShader: Mh.meshlambert_frag
          },
          phong: {
            uniforms: sh([
              Ah.common,
              Ah.specularmap,
              Ah.envmap,
              Ah.aomap,
              Ah.lightmap,
              Ah.emissivemap,
              Ah.bumpmap,
              Ah.normalmap,
              Ah.displacementmap,
              Ah.fog,
              Ah.lights,
              {
                emissive: { value: new bl(0) },
                specular: { value: new bl(1118481) },
                shininess: { value: 30 }
              }
            ]),
            vertexShader: Mh.meshphong_vert,
            fragmentShader: Mh.meshphong_frag
          },
          standard: {
            uniforms: sh([
              Ah.common,
              Ah.envmap,
              Ah.aomap,
              Ah.lightmap,
              Ah.emissivemap,
              Ah.bumpmap,
              Ah.normalmap,
              Ah.displacementmap,
              Ah.roughnessmap,
              Ah.metalnessmap,
              Ah.fog,
              Ah.lights,
              {
                emissive: { value: new bl(0) },
                roughness: { value: 1 },
                metalness: { value: 0 },
                envMapIntensity: { value: 1 }
              }
            ]),
            vertexShader: Mh.meshphysical_vert,
            fragmentShader: Mh.meshphysical_frag
          },
          toon: {
            uniforms: sh([
              Ah.common,
              Ah.aomap,
              Ah.lightmap,
              Ah.emissivemap,
              Ah.bumpmap,
              Ah.normalmap,
              Ah.displacementmap,
              Ah.gradientmap,
              Ah.fog,
              Ah.lights,
              { emissive: { value: new bl(0) } }
            ]),
            vertexShader: Mh.meshtoon_vert,
            fragmentShader: Mh.meshtoon_frag
          },
          matcap: {
            uniforms: sh([
              Ah.common,
              Ah.bumpmap,
              Ah.normalmap,
              Ah.displacementmap,
              Ah.fog,
              { matcap: { value: null } }
            ]),
            vertexShader: Mh.meshmatcap_vert,
            fragmentShader: Mh.meshmatcap_frag
          },
          points: {
            uniforms: sh([Ah.points, Ah.fog]),
            vertexShader: Mh.points_vert,
            fragmentShader: Mh.points_frag
          },
          dashed: {
            uniforms: sh([
              Ah.common,
              Ah.fog,
              {
                scale: { value: 1 },
                dashSize: { value: 1 },
                totalSize: { value: 2 }
              }
            ]),
            vertexShader: Mh.linedashed_vert,
            fragmentShader: Mh.linedashed_frag
          },
          depth: {
            uniforms: sh([Ah.common, Ah.displacementmap]),
            vertexShader: Mh.depth_vert,
            fragmentShader: Mh.depth_frag
          },
          normal: {
            uniforms: sh([
              Ah.common,
              Ah.bumpmap,
              Ah.normalmap,
              Ah.displacementmap,
              { opacity: { value: 1 } }
            ]),
            vertexShader: Mh.meshnormal_vert,
            fragmentShader: Mh.meshnormal_frag
          },
          sprite: {
            uniforms: sh([Ah.sprite, Ah.fog]),
            vertexShader: Mh.sprite_vert,
            fragmentShader: Mh.sprite_frag
          },
          background: {
            uniforms: {
              uvTransform: { value: new Ps() },
              t2D: { value: null },
              backgroundIntensity: { value: 1 }
            },
            vertexShader: Mh.background_vert,
            fragmentShader: Mh.background_frag
          },
          backgroundCube: {
            uniforms: {
              envMap: { value: null },
              flipEnvMap: { value: -1 },
              backgroundBlurriness: { value: 0 },
              backgroundIntensity: { value: 1 }
            },
            vertexShader: Mh.backgroundCube_vert,
            fragmentShader: Mh.backgroundCube_frag
          },
          cube: {
            uniforms: {
              tCube: { value: null },
              tFlip: { value: -1 },
              opacity: { value: 1 }
            },
            vertexShader: Mh.cube_vert,
            fragmentShader: Mh.cube_frag
          },
          equirect: {
            uniforms: { tEquirect: { value: null } },
            vertexShader: Mh.equirect_vert,
            fragmentShader: Mh.equirect_frag
          },
          distanceRGBA: {
            uniforms: sh([
              Ah.common,
              Ah.displacementmap,
              {
                referencePosition: { value: new to() },
                nearDistance: { value: 1 },
                farDistance: { value: 1e3 }
              }
            ]),
            vertexShader: Mh.distanceRGBA_vert,
            fragmentShader: Mh.distanceRGBA_frag
          },
          shadow: {
            uniforms: sh([
              Ah.lights,
              Ah.fog,
              { color: { value: new bl(0) }, opacity: { value: 1 } }
            ]),
            vertexShader: Mh.shadow_vert,
            fragmentShader: Mh.shadow_frag
          }
        };
      Ch.physical = {
        uniforms: sh([
          Ch.standard.uniforms,
          {
            clearcoat: { value: 0 },
            clearcoatMap: { value: null },
            clearcoatMapTransform: { value: new Ps() },
            clearcoatNormalMap: { value: null },
            clearcoatNormalMapTransform: { value: new Ps() },
            clearcoatNormalScale: { value: new Cs(1, 1) },
            clearcoatRoughness: { value: 0 },
            clearcoatRoughnessMap: { value: null },
            clearcoatRoughnessMapTransform: { value: new Ps() },
            iridescence: { value: 0 },
            iridescenceMap: { value: null },
            iridescenceMapTransform: { value: new Ps() },
            iridescenceIOR: { value: 1.3 },
            iridescenceThicknessMinimum: { value: 100 },
            iridescenceThicknessMaximum: { value: 400 },
            iridescenceThicknessMap: { value: null },
            iridescenceThicknessMapTransform: { value: new Ps() },
            sheen: { value: 0 },
            sheenColor: { value: new bl(0) },
            sheenColorMap: { value: null },
            sheenColorMapTransform: { value: new Ps() },
            sheenRoughness: { value: 1 },
            sheenRoughnessMap: { value: null },
            sheenRoughnessMapTransform: { value: new Ps() },
            transmission: { value: 0 },
            transmissionMap: { value: null },
            transmissionMapTransform: { value: new Ps() },
            transmissionSamplerSize: { value: new Cs() },
            transmissionSamplerMap: { value: null },
            thickness: { value: 0 },
            thicknessMap: { value: null },
            thicknessMapTransform: { value: new Ps() },
            attenuationDistance: { value: 0 },
            attenuationColor: { value: new bl(0) },
            specularColor: { value: new bl(1, 1, 1) },
            specularColorMap: { value: null },
            specularColorMapTransform: { value: new Ps() },
            specularIntensity: { value: 1 },
            specularIntensityMap: { value: null },
            specularIntensityMapTransform: { value: new Ps() },
            anisotropyVector: { value: new Cs() },
            anisotropyMap: { value: null },
            anisotropyMapTransform: { value: new Ps() }
          }
        ]),
        vertexShader: Mh.meshphysical_vert,
        fragmentShader: Mh.meshphysical_frag
      };
      var Ph = { r: 0, b: 0, g: 0 };
      function kh(e, t, n, r, i, a, s) {
        var o,
          l,
          h = new bl(0),
          u = !0 === a ? 0 : 1,
          c = null,
          d = 0,
          f = null;
        function p(t, n) {
          t.getRGB(Ph, oh(e)), r.buffers.color.setClear(Ph.r, Ph.g, Ph.b, n, s);
        }
        return {
          getClearColor: function () {
            return h;
          },
          setClearColor: function (e) {
            var t =
              arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;
            h.set(e), p(h, (u = t));
          },
          getClearAlpha: function () {
            return u;
          },
          setClearAlpha: function (e) {
            p(h, (u = e));
          },
          render: function (a, m) {
            var g = !1,
              v = !0 === m.isScene ? m.background : null;
            v && v.isTexture && (v = (m.backgroundBlurriness > 0 ? n : t).get(v)),
              null === v ? p(h, u) : v && v.isColor && (p(v, 1), (g = !0));
            var y = e.xr.getEnvironmentBlendMode();
            "additive" === y
              ? r.buffers.color.setClear(0, 0, 0, 1, s)
              : "alpha-blend" === y && r.buffers.color.setClear(0, 0, 0, 0, s),
              (e.autoClear || g) &&
                e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil),
              v && (v.isCubeTexture || v.mapping === Wi)
                ? (void 0 === l &&
                    ((l = new nh(
                      new ih(1, 1, 1),
                      new hh({
                        name: "BackgroundCubeMaterial",
                        uniforms: ah(Ch.backgroundCube.uniforms),
                        vertexShader: Ch.backgroundCube.vertexShader,
                        fragmentShader: Ch.backgroundCube.fragmentShader,
                        side: 1,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1
                      })
                    )).geometry.deleteAttribute("normal"),
                    l.geometry.deleteAttribute("uv"),
                    (l.onBeforeRender = function (e, t, n) {
                      this.matrixWorld.copyPosition(n.matrixWorld);
                    }),
                    Object.defineProperty(l.material, "envMap", {
                      get: function () {
                        return this.uniforms.envMap.value;
                      }
                    }),
                    i.update(l)),
                  (l.material.uniforms.envMap.value = v),
                  (l.material.uniforms.flipEnvMap.value =
                    v.isCubeTexture && !1 === v.isRenderTargetTexture ? -1 : 1),
                  (l.material.uniforms.backgroundBlurriness.value =
                    m.backgroundBlurriness),
                  (l.material.uniforms.backgroundIntensity.value =
                    m.backgroundIntensity),
                  (l.material.toneMapped = Vs.getTransfer(v.colorSpace) !== as),
                  (c === v && d === v.version && f === e.toneMapping) ||
                    ((l.material.needsUpdate = !0),
                    (c = v),
                    (d = v.version),
                    (f = e.toneMapping)),
                  l.layers.enableAll(),
                  a.unshift(l, l.geometry, l.material, 0, 0, null))
                : v &&
                  v.isTexture &&
                  (void 0 === o &&
                    ((o = new nh(
                      new Th(2, 2),
                      new hh({
                        name: "BackgroundMaterial",
                        uniforms: ah(Ch.background.uniforms),
                        vertexShader: Ch.background.vertexShader,
                        fragmentShader: Ch.background.fragmentShader,
                        side: 0,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1
                      })
                    )).geometry.deleteAttribute("normal"),
                    Object.defineProperty(o.material, "map", {
                      get: function () {
                        return this.uniforms.t2D.value;
                      }
                    }),
                    i.update(o)),
                  (o.material.uniforms.t2D.value = v),
                  (o.material.uniforms.backgroundIntensity.value =
                    m.backgroundIntensity),
                  (o.material.toneMapped = Vs.getTransfer(v.colorSpace) !== as),
                  !0 === v.matrixAutoUpdate && v.updateMatrix(),
                  o.material.uniforms.uvTransform.value.copy(v.matrix),
                  (c === v && d === v.version && f === e.toneMapping) ||
                    ((o.material.needsUpdate = !0),
                    (c = v),
                    (d = v.version),
                    (f = e.toneMapping)),
                  o.layers.enableAll(),
                  a.unshift(o, o.geometry, o.material, 0, 0, null));
          }
        };
      }
      function Rh(e, t, n, r) {
        var i = e.getParameter(e.MAX_VERTEX_ATTRIBS),
          a = r.isWebGL2 ? null : t.get("OES_vertex_array_object"),
          s = r.isWebGL2 || null !== a,
          o = {},
          l = f(null),
          h = l,
          u = !1;
        function c(t) {
          return r.isWebGL2 ? e.bindVertexArray(t) : a.bindVertexArrayOES(t);
        }
        function d(t) {
          return r.isWebGL2 ? e.deleteVertexArray(t) : a.deleteVertexArrayOES(t);
        }
        function f(e) {
          for (var t = [], n = [], r = [], a = 0; a < i; a++)
            (t[a] = 0), (n[a] = 0), (r[a] = 0);
          return {
            geometry: null,
            program: null,
            wireframe: !1,
            newAttributes: t,
            enabledAttributes: n,
            attributeDivisors: r,
            object: e,
            attributes: {},
            index: null
          };
        }
        function p() {
          for (var e = h.newAttributes, t = 0, n = e.length; t < n; t++) e[t] = 0;
        }
        function m(e) {
          g(e, 0);
        }
        function g(n, i) {
          var a = h.newAttributes,
            s = h.enabledAttributes,
            o = h.attributeDivisors;
          (a[n] = 1),
            0 === s[n] && (e.enableVertexAttribArray(n), (s[n] = 1)),
            o[n] !== i &&
              ((r.isWebGL2 ? e : t.get("ANGLE_instanced_arrays"))[
                r.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"
              ](n, i),
              (o[n] = i));
        }
        function v() {
          for (
            var t = h.newAttributes, n = h.enabledAttributes, r = 0, i = n.length;
            r < i;
            r++
          )
            n[r] !== t[r] && (e.disableVertexAttribArray(r), (n[r] = 0));
        }
        function y(t, n, r, i, a, s, o) {
          !0 === o
            ? e.vertexAttribIPointer(t, n, r, a, s)
            : e.vertexAttribPointer(t, n, r, i, a, s);
        }
        function _() {
          b(), (u = !0), h !== l && c((h = l).object);
        }
        function b() {
          (l.geometry = null), (l.program = null), (l.wireframe = !1);
        }
        return {
          setup: function (i, l, d, _, b) {
            var x = !1;
            if (s) {
              var S = (function (t, n, i) {
                var s = !0 === i.wireframe,
                  l = o[t.id];
                void 0 === l && ((l = {}), (o[t.id] = l));
                var h = l[n.id];
                void 0 === h && ((h = {}), (l[n.id] = h));
                var u = h[s];
                return (
                  void 0 === u &&
                    ((u = f(
                      r.isWebGL2
                        ? e.createVertexArray()
                        : a.createVertexArrayOES()
                    )),
                    (h[s] = u)),
                  u
                );
              })(_, d, l);
              h !== S && c((h = S).object),
                (x = (function (e, t, n, r) {
                  var i = h.attributes,
                    a = t.attributes,
                    s = 0,
                    o = n.getAttributes();
                  for (var l in o)
                    if (o[l].location >= 0) {
                      var u = i[l],
                        c = a[l];
                      if (
                        (void 0 === c &&
                          ("instanceMatrix" === l &&
                            e.instanceMatrix &&
                            (c = e.instanceMatrix),
                          "instanceColor" === l &&
                            e.instanceColor &&
                            (c = e.instanceColor)),
                        void 0 === u)
                      )
                        return !0;
                      if (u.attribute !== c) return !0;
                      if (c && u.data !== c.data) return !0;
                      s++;
                    }
                  return h.attributesNum !== s || h.index !== r;
                })(i, _, d, b)),
                x &&
                  (function (e, t, n, r) {
                    var i = {},
                      a = t.attributes,
                      s = 0,
                      o = n.getAttributes();
                    for (var l in o)
                      if (o[l].location >= 0) {
                        var u = a[l];
                        void 0 === u &&
                          ("instanceMatrix" === l &&
                            e.instanceMatrix &&
                            (u = e.instanceMatrix),
                          "instanceColor" === l &&
                            e.instanceColor &&
                            (u = e.instanceColor));
                        var c = {};
                        (c.attribute = u),
                          u && u.data && (c.data = u.data),
                          (i[l] = c),
                          s++;
                      }
                    (h.attributes = i), (h.attributesNum = s), (h.index = r);
                  })(i, _, d, b);
            } else {
              var E = !0 === l.wireframe;
              (h.geometry === _.id && h.program === d.id && h.wireframe === E) ||
                ((h.geometry = _.id),
                (h.program = d.id),
                (h.wireframe = E),
                (x = !0));
            }
            null !== b && n.update(b, e.ELEMENT_ARRAY_BUFFER),
              (x || u) &&
                ((u = !1),
                (function (i, a, s, o) {
                  if (
                    !1 !== r.isWebGL2 ||
                    (!i.isInstancedMesh && !o.isInstancedBufferGeometry) ||
                    null !== t.get("ANGLE_instanced_arrays")
                  ) {
                    p();
                    var l = o.attributes,
                      h = s.getAttributes(),
                      u = a.defaultAttributeValues;
                    for (var c in h) {
                      var d = h[c];
                      if (d.location >= 0) {
                        var f = l[c];
                        if (
                          (void 0 === f &&
                            ("instanceMatrix" === c &&
                              i.instanceMatrix &&
                              (f = i.instanceMatrix),
                            "instanceColor" === c &&
                              i.instanceColor &&
                              (f = i.instanceColor)),
                          void 0 !== f)
                        ) {
                          var _ = f.normalized,
                            b = f.itemSize,
                            x = n.get(f);
                          if (void 0 === x) continue;
                          var S = x.buffer,
                            E = x.type,
                            w = x.bytesPerElement,
                            T =
                              !0 === r.isWebGL2 &&
                              (E === e.INT ||
                                E === e.UNSIGNED_INT ||
                                f.gpuType === ta);
                          if (f.isInterleavedBufferAttribute) {
                            var M = f.data,
                              A = M.stride,
                              C = f.offset;
                            if (M.isInstancedInterleavedBuffer) {
                              for (var P = 0; P < d.locationSize; P++)
                                g(d.location + P, M.meshPerAttribute);
                              !0 !== i.isInstancedMesh &&
                                void 0 === o._maxInstanceCount &&
                                (o._maxInstanceCount =
                                  M.meshPerAttribute * M.count);
                            } else
                              for (var k = 0; k < d.locationSize; k++)
                                m(d.location + k);
                            e.bindBuffer(e.ARRAY_BUFFER, S);
                            for (var R = 0; R < d.locationSize; R++)
                              y(
                                d.location + R,
                                b / d.locationSize,
                                E,
                                _,
                                A * w,
                                (C + (b / d.locationSize) * R) * w,
                                T
                              );
                          } else {
                            if (f.isInstancedBufferAttribute) {
                              for (var D = 0; D < d.locationSize; D++)
                                g(d.location + D, f.meshPerAttribute);
                              !0 !== i.isInstancedMesh &&
                                void 0 === o._maxInstanceCount &&
                                (o._maxInstanceCount =
                                  f.meshPerAttribute * f.count);
                            } else
                              for (var I = 0; I < d.locationSize; I++)
                                m(d.location + I);
                            e.bindBuffer(e.ARRAY_BUFFER, S);
                            for (var L = 0; L < d.locationSize; L++)
                              y(
                                d.location + L,
                                b / d.locationSize,
                                E,
                                _,
                                b * w,
                                (b / d.locationSize) * L * w,
                                T
                              );
                          }
                        } else if (void 0 !== u) {
                          var F = u[c];
                          if (void 0 !== F)
                            switch (F.length) {
                              case 2:
                                e.vertexAttrib2fv(d.location, F);
                                break;
                              case 3:
                                e.vertexAttrib3fv(d.location, F);
                                break;
                              case 4:
                                e.vertexAttrib4fv(d.location, F);
                                break;
                              default:
                                e.vertexAttrib1fv(d.location, F);
                            }
                        }
                      }
                    }
                    v();
                  }
                })(i, l, d, _),
                null !== b &&
                  e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, n.get(b).buffer));
          },
          reset: _,
          resetDefaultState: b,
          dispose: function () {
            for (var e in (_(), o)) {
              var t = o[e];
              for (var n in t) {
                var r = t[n];
                for (var i in r) d(r[i].object), delete r[i];
                delete t[n];
              }
              delete o[e];
            }
          },
          releaseStatesOfGeometry: function (e) {
            if (void 0 !== o[e.id]) {
              var t = o[e.id];
              for (var n in t) {
                var r = t[n];
                for (var i in r) d(r[i].object), delete r[i];
                delete t[n];
              }
              delete o[e.id];
            }
          },
          releaseStatesOfProgram: function (e) {
            for (var t in o) {
              var n = o[t];
              if (void 0 !== n[e.id]) {
                var r = n[e.id];
                for (var i in r) d(r[i].object), delete r[i];
                delete n[e.id];
              }
            }
          },
          initAttributes: p,
          enableAttribute: m,
          disableUnusedAttributes: v
        };
      }
      function Dh(e, t, n, r) {
        var i,
          a = r.isWebGL2;
        (this.setMode = function (e) {
          i = e;
        }),
          (this.render = function (t, r) {
            e.drawArrays(i, t, r), n.update(r, i, 1);
          }),
          (this.renderInstances = function (r, s, o) {
            if (0 !== o) {
              var l, h;
              if (a) (l = e), (h = "drawArraysInstanced");
              else if (
                ((h = "drawArraysInstancedANGLE"),
                null === (l = t.get("ANGLE_instanced_arrays")))
              )
                return void console.error(
                  "THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
                );
              l[h](i, r, s, o), n.update(s, i, o);
            }
          }),
          (this.renderMultiDraw = function (e, r, a) {
            if (0 !== a) {
              var s = t.get("WEBGL_multi_draw");
              if (null === s) for (var o = 0; o < a; o++) this.render(e[o], r[o]);
              else {
                s.multiDrawArraysWEBGL(i, e, 0, r, 0, a);
                for (var l = 0, h = 0; h < a; h++) l += r[h];
                n.update(l, i, 1);
              }
            }
          });
      }
      function Ih(e, t, n) {
        var r;
        function i(t) {
          if ("highp" === t) {
            if (
              e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT)
                .precision > 0 &&
              e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT)
                .precision > 0
            )
              return "highp";
            t = "mediump";
          }
          return "mediump" === t &&
            e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT)
              .precision > 0 &&
            e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT)
              .precision > 0
            ? "mediump"
            : "lowp";
        }
        var a =
            "undefined" != typeof WebGL2RenderingContext &&
            "WebGL2RenderingContext" === e.constructor.name,
          s = void 0 !== n.precision ? n.precision : "highp",
          o = i(s);
        o !== s &&
          (console.warn(
            "THREE.WebGLRenderer:",
            s,
            "not supported, using",
            o,
            "instead."
          ),
          (s = o));
        var l = a || t.has("WEBGL_draw_buffers"),
          h = !0 === n.logarithmicDepthBuffer,
          u = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),
          c = e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
          d = e.getParameter(e.MAX_TEXTURE_SIZE),
          f = e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),
          p = e.getParameter(e.MAX_VERTEX_ATTRIBS),
          m = e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),
          g = e.getParameter(e.MAX_VARYING_VECTORS),
          v = e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),
          y = c > 0,
          _ = a || t.has("OES_texture_float");
        return {
          isWebGL2: a,
          drawBuffers: l,
          getMaxAnisotropy: function () {
            if (void 0 !== r) return r;
            if (!0 === t.has("EXT_texture_filter_anisotropic")) {
              var n = t.get("EXT_texture_filter_anisotropic");
              r = e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
            } else r = 0;
            return r;
          },
          getMaxPrecision: i,
          precision: s,
          logarithmicDepthBuffer: h,
          maxTextures: u,
          maxVertexTextures: c,
          maxTextureSize: d,
          maxCubemapSize: f,
          maxAttributes: p,
          maxVertexUniforms: m,
          maxVaryings: g,
          maxFragmentUniforms: v,
          vertexTextures: y,
          floatFragmentTextures: _,
          floatVertexTextures: y && _,
          maxSamples: a ? e.getParameter(e.MAX_SAMPLES) : 0
        };
      }
      function Lh(e) {
        var t = this,
          n = null,
          r = 0,
          i = !1,
          a = !1,
          s = new _h(),
          o = new Ps(),
          l = { value: null, needsUpdate: !1 };
        function h(e, n, r, i) {
          var a = null !== e ? e.length : 0,
            h = null;
          if (0 !== a) {
            if (((h = l.value), !0 !== i || null === h)) {
              var u = r + 4 * a,
                c = n.matrixWorldInverse;
              o.getNormalMatrix(c),
                (null === h || h.length < u) && (h = new Float32Array(u));
              for (var d = 0, f = r; d !== a; ++d, f += 4)
                s.copy(e[d]).applyMatrix4(c, o),
                  s.normal.toArray(h, f),
                  (h[f + 3] = s.constant);
            }
            (l.value = h), (l.needsUpdate = !0);
          }
          return (t.numPlanes = a), (t.numIntersection = 0), h;
        }
        (this.uniform = l),
          (this.numPlanes = 0),
          (this.numIntersection = 0),
          (this.init = function (e, t) {
            var n = 0 !== e.length || t || 0 !== r || i;
            return (i = t), (r = e.length), n;
          }),
          (this.beginShadows = function () {
            (a = !0), h(null);
          }),
          (this.endShadows = function () {
            a = !1;
          }),
          (this.setGlobalState = function (e, t) {
            n = h(e, t, 0);
          }),
          (this.setState = function (s, o, u) {
            var c = s.clippingPlanes,
              d = s.clipIntersection,
              f = s.clipShadows,
              p = e.get(s);
            if (!i || null === c || 0 === c.length || (a && !f))
              a
                ? h(null)
                : (l.value !== n && ((l.value = n), (l.needsUpdate = r > 0)),
                  (t.numPlanes = r),
                  (t.numIntersection = 0));
            else {
              var m = a ? 0 : r,
                g = 4 * m,
                v = p.clippingState || null;
              (l.value = v), (v = h(c, o, g, u));
              for (var y = 0; y !== g; ++y) v[y] = n[y];
              (p.clippingState = v),
                (this.numIntersection = d ? this.numPlanes : 0),
                (this.numPlanes += m);
            }
          });
      }
      function Fh(e) {
        var t = new WeakMap();
        function n(e, t) {
          return 303 === t ? (e.mapping = Hi) : 304 === t && (e.mapping = Gi), e;
        }
        function r(e) {
          var n = e.target;
          n.removeEventListener("dispose", r);
          var i = t.get(n);
          void 0 !== i && (t.delete(n), i.dispose());
        }
        return {
          get: function (i) {
            if (i && i.isTexture) {
              var a = i.mapping;
              if (303 === a || 304 === a) {
                if (t.has(i)) return n(t.get(i).texture, i.mapping);
                var s = i.image;
                if (s && s.height > 0) {
                  var o = new mh(s.height / 2);
                  return (
                    o.fromEquirectangularTexture(e, i),
                    t.set(i, o),
                    i.addEventListener("dispose", r),
                    n(o.texture, i.mapping)
                  );
                }
                return null;
              }
            }
            return i;
          },
          dispose: function () {
            t = new WeakMap();
          }
        };
      }
      var Oh = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : -1,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : -1,
              s =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : 0.1,
              o =
                arguments.length > 5 && void 0 !== arguments[5]
                  ? arguments[5]
                  : 2e3;
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isOrthographicCamera = !0),
              (e.type = "OrthographicCamera"),
              (e.zoom = 1),
              (e.view = null),
              (e.left = n),
              (e.right = r),
              (e.top = i),
              (e.bottom = a),
              (e.near = s),
              (e.far = o),
              e.updateProjectionMatrix(),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    (this.left = e.left),
                    (this.right = e.right),
                    (this.top = e.top),
                    (this.bottom = e.bottom),
                    (this.near = e.near),
                    (this.far = e.far),
                    (this.zoom = e.zoom),
                    (this.view =
                      null === e.view ? null : Object.assign({}, e.view)),
                    this
                  );
                }
              },
              {
                key: "setViewOffset",
                value: function (e, t, n, r, i, a) {
                  null === this.view &&
                    (this.view = {
                      enabled: !0,
                      fullWidth: 1,
                      fullHeight: 1,
                      offsetX: 0,
                      offsetY: 0,
                      width: 1,
                      height: 1
                    }),
                    (this.view.enabled = !0),
                    (this.view.fullWidth = e),
                    (this.view.fullHeight = t),
                    (this.view.offsetX = n),
                    (this.view.offsetY = r),
                    (this.view.width = i),
                    (this.view.height = a),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "clearViewOffset",
                value: function () {
                  null !== this.view && (this.view.enabled = !1),
                    this.updateProjectionMatrix();
                }
              },
              {
                key: "updateProjectionMatrix",
                value: function () {
                  var e = (this.right - this.left) / (2 * this.zoom),
                    t = (this.top - this.bottom) / (2 * this.zoom),
                    n = (this.right + this.left) / 2,
                    r = (this.top + this.bottom) / 2,
                    i = n - e,
                    a = n + e,
                    s = r + t,
                    o = r - t;
                  if (null !== this.view && this.view.enabled) {
                    var l =
                        (this.right - this.left) /
                        this.view.fullWidth /
                        this.zoom,
                      h =
                        (this.top - this.bottom) /
                        this.view.fullHeight /
                        this.zoom;
                    (a = (i += l * this.view.offsetX) + l * this.view.width),
                      (o = (s -= h * this.view.offsetY) - h * this.view.height);
                  }
                  this.projectionMatrix.makeOrthographic(
                    i,
                    a,
                    s,
                    o,
                    this.near,
                    this.far,
                    this.coordinateSystem
                  ),
                    this.projectionMatrixInverse
                      .copy(this.projectionMatrix)
                      .invert();
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = xi(Ci(t.prototype), "toJSON", this).call(this, e);
                  return (
                    (n.object.zoom = this.zoom),
                    (n.object.left = this.left),
                    (n.object.right = this.right),
                    (n.object.top = this.top),
                    (n.object.bottom = this.bottom),
                    (n.object.near = this.near),
                    (n.object.far = this.far),
                    null !== this.view &&
                      (n.object.view = Object.assign({}, this.view)),
                    n
                  );
                }
              }
            ]),
            t
          );
        })(uh),
        Nh = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582],
        Bh = 20,
        Uh = new Oh(),
        zh = new bl(),
        Vh = null,
        Hh = 0,
        Gh = 0,
        Wh = (1 + Math.sqrt(5)) / 2,
        jh = 1 / Wh,
        Xh = [
          new to(1, 1, 1),
          new to(-1, 1, 1),
          new to(1, 1, -1),
          new to(-1, 1, -1),
          new to(0, Wh, jh),
          new to(0, Wh, -jh),
          new to(jh, 0, Wh),
          new to(-jh, 0, Wh),
          new to(Wh, jh, 0),
          new to(-Wh, jh, 0)
        ],
        qh = (function () {
          function e(t) {
            Fi(this, e),
              (this._renderer = t),
              (this._pingPongRenderTarget = null),
              (this._lodMax = 0),
              (this._cubeSize = 0),
              (this._lodPlanes = []),
              (this._sizeLods = []),
              (this._sigmas = []),
              (this._blurMaterial = null),
              (this._cubemapMaterial = null),
              (this._equirectMaterial = null),
              this._compileMaterial(this._blurMaterial);
          }
          return (
            Ni(e, [
              {
                key: "fromScene",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0.1,
                    r =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 100;
                  (Vh = this._renderer.getRenderTarget()),
                    (Hh = this._renderer.getActiveCubeFace()),
                    (Gh = this._renderer.getActiveMipmapLevel()),
                    this._setSize(256);
                  var i = this._allocateTargets();
                  return (
                    (i.depthBuffer = !0),
                    this._sceneToCubeUV(e, n, r, i),
                    t > 0 && this._blur(i, 0, 0, t),
                    this._applyPMREM(i),
                    this._cleanup(i),
                    i
                  );
                }
              },
              {
                key: "fromEquirectangular",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : null;
                  return this._fromTexture(e, t);
                }
              },
              {
                key: "fromCubemap",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : null;
                  return this._fromTexture(e, t);
                }
              },
              {
                key: "compileCubemapShader",
                value: function () {
                  null === this._cubemapMaterial &&
                    ((this._cubemapMaterial = Jh()),
                    this._compileMaterial(this._cubemapMaterial));
                }
              },
              {
                key: "compileEquirectangularShader",
                value: function () {
                  null === this._equirectMaterial &&
                    ((this._equirectMaterial = Zh()),
                    this._compileMaterial(this._equirectMaterial));
                }
              },
              {
                key: "dispose",
                value: function () {
                  this._dispose(),
                    null !== this._cubemapMaterial &&
                      this._cubemapMaterial.dispose(),
                    null !== this._equirectMaterial &&
                      this._equirectMaterial.dispose();
                }
              },
              {
                key: "_setSize",
                value: function (e) {
                  (this._lodMax = Math.floor(Math.log2(e))),
                    (this._cubeSize = Math.pow(2, this._lodMax));
                }
              },
              {
                key: "_dispose",
                value: function () {
                  null !== this._blurMaterial && this._blurMaterial.dispose(),
                    null !== this._pingPongRenderTarget &&
                      this._pingPongRenderTarget.dispose();
                  for (var e = 0; e < this._lodPlanes.length; e++)
                    this._lodPlanes[e].dispose();
                }
              },
              {
                key: "_cleanup",
                value: function (e) {
                  this._renderer.setRenderTarget(Vh, Hh, Gh),
                    (e.scissorTest = !1),
                    Kh(e, 0, 0, e.width, e.height);
                }
              },
              {
                key: "_fromTexture",
                value: function (e, t) {
                  e.mapping === Hi || e.mapping === Gi
                    ? this._setSize(
                        0 === e.image.length
                          ? 16
                          : e.image[0].width || e.image[0].image.width
                      )
                    : this._setSize(e.image.width / 4),
                    (Vh = this._renderer.getRenderTarget()),
                    (Hh = this._renderer.getActiveCubeFace()),
                    (Gh = this._renderer.getActiveMipmapLevel());
                  var n = t || this._allocateTargets();
                  return (
                    this._textureToCubeUV(e, n),
                    this._applyPMREM(n),
                    this._cleanup(n),
                    n
                  );
                }
              },
              {
                key: "_allocateTargets",
                value: function () {
                  var e = 3 * Math.max(this._cubeSize, 112),
                    t = 4 * this._cubeSize,
                    n = {
                      magFilter: Ji,
                      minFilter: Ji,
                      generateMipmaps: !1,
                      type: ia,
                      format: la,
                      colorSpace: ts,
                      depthBuffer: !1
                    },
                    r = Yh(e, t, n);
                  if (
                    null === this._pingPongRenderTarget ||
                    this._pingPongRenderTarget.width !== e ||
                    this._pingPongRenderTarget.height !== t
                  ) {
                    null !== this._pingPongRenderTarget && this._dispose(),
                      (this._pingPongRenderTarget = Yh(e, t, n));
                    var i = this._lodMax,
                      a = (function (e) {
                        for (
                          var t = [],
                            n = [],
                            r = [],
                            i = e,
                            a = e - 4 + 1 + Nh.length,
                            s = 0;
                          s < a;
                          s++
                        ) {
                          var o = Math.pow(2, i);
                          n.push(o);
                          var l = 1 / o;
                          s > e - 4
                            ? (l = Nh[s - e + 4 - 1])
                            : 0 === s && (l = 0),
                            r.push(l);
                          for (
                            var h = 1 / (o - 2),
                              u = -h,
                              c = 1 + h,
                              d = [u, u, c, u, c, c, u, u, c, c, u, c],
                              f = new Float32Array(108),
                              p = new Float32Array(72),
                              m = new Float32Array(36),
                              g = 0;
                            g < 6;
                            g++
                          ) {
                            var v = ((g % 3) * 2) / 3 - 1,
                              y = g > 2 ? 0 : -1,
                              _ = [
                                v,
                                y,
                                0,
                                v + 2 / 3,
                                y,
                                0,
                                v + 2 / 3,
                                y + 1,
                                0,
                                v,
                                y,
                                0,
                                v + 2 / 3,
                                y + 1,
                                0,
                                v,
                                y + 1,
                                0
                              ];
                            f.set(_, 18 * g), p.set(d, 12 * g);
                            var b = [g, g, g, g, g, g];
                            m.set(b, 6 * g);
                          }
                          var x = new Bl();
                          x.setAttribute("position", new Al(f, 3)),
                            x.setAttribute("uv", new Al(p, 2)),
                            x.setAttribute("faceIndex", new Al(m, 1)),
                            t.push(x),
                            i > 4 && i--;
                        }
                        return { lodPlanes: t, sizeLods: n, sigmas: r };
                      })(i);
                    (this._sizeLods = a.sizeLods),
                      (this._lodPlanes = a.lodPlanes),
                      (this._sigmas = a.sigmas),
                      (this._blurMaterial = (function (e, t, n) {
                        var r = new Float32Array(Bh),
                          i = new to(0, 1, 0);
                        return new hh({
                          name: "SphericalGaussianBlur",
                          defines: {
                            n: Bh,
                            CUBEUV_TEXEL_WIDTH: 1 / t,
                            CUBEUV_TEXEL_HEIGHT: 1 / n,
                            CUBEUV_MAX_MIP: "".concat(e, ".0")
                          },
                          uniforms: {
                            envMap: { value: null },
                            samples: { value: 1 },
                            weights: { value: r },
                            latitudinal: { value: !1 },
                            dTheta: { value: 0 },
                            mipInt: { value: 0 },
                            poleAxis: { value: i }
                          },
                          vertexShader:
                            "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
                          fragmentShader:
                            "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",
                          blending: 0,
                          depthTest: !1,
                          depthWrite: !1
                        });
                      })(i, e, t));
                  }
                  return r;
                }
              },
              {
                key: "_compileMaterial",
                value: function (e) {
                  var t = new nh(this._lodPlanes[0], e);
                  this._renderer.compile(t, Uh);
                }
              },
              {
                key: "_sceneToCubeUV",
                value: function (e, t, n, r) {
                  var i = new ch(90, 1, t, n),
                    a = [1, -1, 1, 1, 1, 1],
                    s = [1, 1, 1, -1, -1, -1],
                    o = this._renderer,
                    l = o.autoClear,
                    h = o.toneMapping;
                  o.getClearColor(zh), (o.toneMapping = 0), (o.autoClear = !1);
                  var u = new wl({
                      name: "PMREM.Background",
                      side: 1,
                      depthWrite: !1,
                      depthTest: !1
                    }),
                    c = new nh(new ih(), u),
                    d = !1,
                    f = e.background;
                  f
                    ? f.isColor &&
                      (u.color.copy(f), (e.background = null), (d = !0))
                    : (u.color.copy(zh), (d = !0));
                  for (var p = 0; p < 6; p++) {
                    var m = p % 3;
                    0 === m
                      ? (i.up.set(0, a[p], 0), i.lookAt(s[p], 0, 0))
                      : 1 === m
                      ? (i.up.set(0, 0, a[p]), i.lookAt(0, s[p], 0))
                      : (i.up.set(0, a[p], 0), i.lookAt(0, 0, s[p]));
                    var g = this._cubeSize;
                    Kh(r, m * g, p > 2 ? g : 0, g, g),
                      o.setRenderTarget(r),
                      d && o.render(c, i),
                      o.render(e, i);
                  }
                  c.geometry.dispose(),
                    c.material.dispose(),
                    (o.toneMapping = h),
                    (o.autoClear = l),
                    (e.background = f);
                }
              },
              {
                key: "_textureToCubeUV",
                value: function (e, t) {
                  var n = this._renderer,
                    r = e.mapping === Hi || e.mapping === Gi;
                  r
                    ? (null === this._cubemapMaterial &&
                        (this._cubemapMaterial = Jh()),
                      (this._cubemapMaterial.uniforms.flipEnvMap.value =
                        !1 === e.isRenderTargetTexture ? -1 : 1))
                    : null === this._equirectMaterial &&
                      (this._equirectMaterial = Zh());
                  var i = r ? this._cubemapMaterial : this._equirectMaterial,
                    a = new nh(this._lodPlanes[0], i);
                  i.uniforms.envMap.value = e;
                  var s = this._cubeSize;
                  Kh(t, 0, 0, 3 * s, 2 * s),
                    n.setRenderTarget(t),
                    n.render(a, Uh);
                }
              },
              {
                key: "_applyPMREM",
                value: function (e) {
                  var t = this._renderer,
                    n = t.autoClear;
                  t.autoClear = !1;
                  for (var r = 1; r < this._lodPlanes.length; r++) {
                    var i = Math.sqrt(
                        this._sigmas[r] * this._sigmas[r] -
                          this._sigmas[r - 1] * this._sigmas[r - 1]
                      ),
                      a = Xh[(r - 1) % Xh.length];
                    this._blur(e, r - 1, r, i, a);
                  }
                  t.autoClear = n;
                }
              },
              {
                key: "_blur",
                value: function (e, t, n, r, i) {
                  var a = this._pingPongRenderTarget;
                  this._halfBlur(e, a, t, n, r, "latitudinal", i),
                    this._halfBlur(a, e, n, n, r, "longitudinal", i);
                }
              },
              {
                key: "_halfBlur",
                value: function (e, t, n, r, i, a, s) {
                  var o = this._renderer,
                    l = this._blurMaterial;
                  "latitudinal" !== a &&
                    "longitudinal" !== a &&
                    console.error(
                      "blur direction must be either latitudinal or longitudinal!"
                    );
                  var h = new nh(this._lodPlanes[r], l),
                    u = l.uniforms,
                    c = this._sizeLods[n] - 1,
                    d = isFinite(i) ? Math.PI / (2 * c) : (2 * Math.PI) / 39,
                    f = i / d,
                    p = isFinite(i) ? 1 + Math.floor(3 * f) : Bh;
                  p > Bh &&
                    console.warn(
                      "sigmaRadians, "
                        .concat(
                          i,
                          ", is too large and will clip, as it requested "
                        )
                        .concat(p, " samples when the maximum is set to ")
                        .concat(Bh)
                    );
                  for (var m = [], g = 0, v = 0; v < Bh; ++v) {
                    var y = v / f,
                      _ = Math.exp((-y * y) / 2);
                    m.push(_), 0 === v ? (g += _) : v < p && (g += 2 * _);
                  }
                  for (var b = 0; b < m.length; b++) m[b] = m[b] / g;
                  (u.envMap.value = e.texture),
                    (u.samples.value = p),
                    (u.weights.value = m),
                    (u.latitudinal.value = "latitudinal" === a),
                    s && (u.poleAxis.value = s);
                  var x = this._lodMax;
                  (u.dTheta.value = d), (u.mipInt.value = x - n);
                  var S = this._sizeLods[r];
                  Kh(
                    t,
                    3 * S * (r > x - 4 ? r - x + 4 : 0),
                    4 * (this._cubeSize - S),
                    3 * S,
                    2 * S
                  ),
                    o.setRenderTarget(t),
                    o.render(h, Uh);
                }
              }
            ]),
            e
          );
        })();
      function Yh(e, t, n) {
        var r = new Js(e, t, n);
        return (
          (r.texture.mapping = Wi),
          (r.texture.name = "PMREM.cubeUv"),
          (r.scissorTest = !0),
          r
        );
      }
      function Kh(e, t, n, r, i) {
        e.viewport.set(t, n, r, i), e.scissor.set(t, n, r, i);
      }
      function Zh() {
        return new hh({
          name: "EquirectangularToCubeUV",
          uniforms: { envMap: { value: null } },
          vertexShader:
            "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
          fragmentShader:
            "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",
          blending: 0,
          depthTest: !1,
          depthWrite: !1
        });
      }
      function Jh() {
        return new hh({
          name: "CubemapToCubeUV",
          uniforms: { envMap: { value: null }, flipEnvMap: { value: -1 } },
          vertexShader:
            "\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",
          fragmentShader:
            "\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",
          blending: 0,
          depthTest: !1,
          depthWrite: !1
        });
      }
      function $h(e) {
        var t = new WeakMap(),
          n = null;
        function r(e) {
          var n = e.target;
          n.removeEventListener("dispose", r);
          var i = t.get(n);
          void 0 !== i && (t.delete(n), i.dispose());
        }
        return {
          get: function (i) {
            if (i && i.isTexture) {
              var a = i.mapping,
                s = 303 === a || 304 === a,
                o = a === Hi || a === Gi;
              if (s || o) {
                if (i.isRenderTargetTexture && !0 === i.needsPMREMUpdate) {
                  i.needsPMREMUpdate = !1;
                  var l = t.get(i);
                  return (
                    null === n && (n = new qh(e)),
                    (l = s ? n.fromEquirectangular(i, l) : n.fromCubemap(i, l)),
                    t.set(i, l),
                    l.texture
                  );
                }
                if (t.has(i)) return t.get(i).texture;
                var h = i.image;
                if (
                  (s && h && h.height > 0) ||
                  (o &&
                    h &&
                    (function (e) {
                      for (var t = 0, n = 0; n < 6; n++) void 0 !== e[n] && t++;
                      return 6 === t;
                    })(h))
                ) {
                  null === n && (n = new qh(e));
                  var u = s ? n.fromEquirectangular(i) : n.fromCubemap(i);
                  return t.set(i, u), i.addEventListener("dispose", r), u.texture;
                }
                return null;
              }
            }
            return i;
          },
          dispose: function () {
            (t = new WeakMap()), null !== n && (n.dispose(), (n = null));
          }
        };
      }
      function Qh(e) {
        var t = {};
        function n(n) {
          if (void 0 !== t[n]) return t[n];
          var r;
          switch (n) {
            case "WEBGL_depth_texture":
              r =
                e.getExtension("WEBGL_depth_texture") ||
                e.getExtension("MOZ_WEBGL_depth_texture") ||
                e.getExtension("WEBKIT_WEBGL_depth_texture");
              break;
            case "EXT_texture_filter_anisotropic":
              r =
                e.getExtension("EXT_texture_filter_anisotropic") ||
                e.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
                e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
              break;
            case "WEBGL_compressed_texture_s3tc":
              r =
                e.getExtension("WEBGL_compressed_texture_s3tc") ||
                e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") ||
                e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
              break;
            case "WEBGL_compressed_texture_pvrtc":
              r =
                e.getExtension("WEBGL_compressed_texture_pvrtc") ||
                e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
              break;
            default:
              r = e.getExtension(n);
          }
          return (t[n] = r), r;
        }
        return {
          has: function (e) {
            return null !== n(e);
          },
          init: function (e) {
            e.isWebGL2
              ? (n("EXT_color_buffer_float"), n("WEBGL_clip_cull_distance"))
              : (n("WEBGL_depth_texture"),
                n("OES_texture_float"),
                n("OES_texture_half_float"),
                n("OES_texture_half_float_linear"),
                n("OES_standard_derivatives"),
                n("OES_element_index_uint"),
                n("OES_vertex_array_object"),
                n("ANGLE_instanced_arrays")),
              n("OES_texture_float_linear"),
              n("EXT_color_buffer_half_float"),
              n("WEBGL_multisampled_render_to_texture");
          },
          get: function (e) {
            var t = n(e);
            return (
              null === t &&
                console.warn(
                  "THREE.WebGLRenderer: " + e + " extension not supported."
                ),
              t
            );
          }
        };
      }
      function eu(e, t, n, r) {
        var i = {},
          a = new WeakMap();
        function s(e) {
          var o = e.target;
          for (var l in (null !== o.index && t.remove(o.index), o.attributes))
            t.remove(o.attributes[l]);
          for (var h in o.morphAttributes)
            for (var u = o.morphAttributes[h], c = 0, d = u.length; c < d; c++)
              t.remove(u[c]);
          o.removeEventListener("dispose", s), delete i[o.id];
          var f = a.get(o);
          f && (t.remove(f), a.delete(o)),
            r.releaseStatesOfGeometry(o),
            !0 === o.isInstancedBufferGeometry && delete o._maxInstanceCount,
            n.memory.geometries--;
        }
        function o(e) {
          var n = [],
            r = e.index,
            i = e.attributes.position,
            s = 0;
          if (null !== r) {
            var o = r.array;
            s = r.version;
            for (var l = 0, h = o.length; l < h; l += 3) {
              var u = o[l + 0],
                c = o[l + 1],
                d = o[l + 2];
              n.push(u, c, c, d, d, u);
            }
          } else {
            if (void 0 === i) return;
            var f = i.array;
            s = i.version;
            for (var p = 0, m = f.length / 3 - 1; p < m; p += 3) {
              var g = p + 0,
                v = p + 1,
                y = p + 2;
              n.push(g, v, v, y, y, g);
            }
          }
          var _ = new (Rs(n) ? Pl : Cl)(n, 1);
          _.version = s;
          var b = a.get(e);
          b && t.remove(b), a.set(e, _);
        }
        return {
          get: function (e, t) {
            return (
              !0 === i[t.id] ||
                (t.addEventListener("dispose", s),
                (i[t.id] = !0),
                n.memory.geometries++),
              t
            );
          },
          update: function (n) {
            var r = n.attributes;
            for (var i in r) t.update(r[i], e.ARRAY_BUFFER);
            var a = n.morphAttributes;
            for (var s in a)
              for (var o = a[s], l = 0, h = o.length; l < h; l++)
                t.update(o[l], e.ARRAY_BUFFER);
          },
          getWireframeAttribute: function (e) {
            var t = a.get(e);
            if (t) {
              var n = e.index;
              null !== n && t.version < n.version && o(e);
            } else o(e);
            return a.get(e);
          }
        };
      }
      function tu(e, t, n, r) {
        var i,
          a,
          s,
          o = r.isWebGL2;
        (this.setMode = function (e) {
          i = e;
        }),
          (this.setIndex = function (e) {
            (a = e.type), (s = e.bytesPerElement);
          }),
          (this.render = function (t, r) {
            e.drawElements(i, r, a, t * s), n.update(r, i, 1);
          }),
          (this.renderInstances = function (r, l, h) {
            if (0 !== h) {
              var u, c;
              if (o) (u = e), (c = "drawElementsInstanced");
              else if (
                ((c = "drawElementsInstancedANGLE"),
                null === (u = t.get("ANGLE_instanced_arrays")))
              )
                return void console.error(
                  "THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
                );
              u[c](i, l, a, r * s, h), n.update(l, i, h);
            }
          }),
          (this.renderMultiDraw = function (e, r, o) {
            if (0 !== o) {
              var l = t.get("WEBGL_multi_draw");
              if (null === l)
                for (var h = 0; h < o; h++) this.render(e[h] / s, r[h]);
              else {
                l.multiDrawElementsWEBGL(i, r, 0, a, e, 0, o);
                for (var u = 0, c = 0; c < o; c++) u += r[c];
                n.update(u, i, 1);
              }
            }
          });
      }
      function nu(e) {
        var t = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 };
        return {
          memory: { geometries: 0, textures: 0 },
          render: t,
          programs: null,
          autoReset: !0,
          reset: function () {
            (t.calls = 0), (t.triangles = 0), (t.points = 0), (t.lines = 0);
          },
          update: function (n, r, i) {
            switch ((t.calls++, r)) {
              case e.TRIANGLES:
                t.triangles += i * (n / 3);
                break;
              case e.LINES:
                t.lines += i * (n / 2);
                break;
              case e.LINE_STRIP:
                t.lines += i * (n - 1);
                break;
              case e.LINE_LOOP:
                t.lines += i * n;
                break;
              case e.POINTS:
                t.points += i * n;
                break;
              default:
                console.error("THREE.WebGLInfo: Unknown draw mode:", r);
            }
          }
        };
      }
      function ru(e, t) {
        return e[0] - t[0];
      }
      function iu(e, t) {
        return Math.abs(t[1]) - Math.abs(e[1]);
      }
      function au(e, t, n) {
        for (
          var r = {},
            i = new Float32Array(8),
            a = new WeakMap(),
            s = new Zs(),
            o = [],
            l = 0;
          l < 8;
          l++
        )
          o[l] = [l, 0];
        return {
          update: function (l, h, u) {
            var c = l.morphTargetInfluences;
            if (!0 === t.isWebGL2) {
              var d =
                  h.morphAttributes.position ||
                  h.morphAttributes.normal ||
                  h.morphAttributes.color,
                f = void 0 !== d ? d.length : 0,
                p = a.get(h);
              if (void 0 === p || p.count !== f) {
                void 0 !== p && p.texture.dispose();
                var m = void 0 !== h.morphAttributes.position,
                  g = void 0 !== h.morphAttributes.normal,
                  v = void 0 !== h.morphAttributes.color,
                  y = h.morphAttributes.position || [],
                  _ = h.morphAttributes.normal || [],
                  b = h.morphAttributes.color || [],
                  x = 0;
                !0 === m && (x = 1), !0 === g && (x = 2), !0 === v && (x = 3);
                var S = h.attributes.position.count * x,
                  E = 1;
                S > t.maxTextureSize &&
                  ((E = Math.ceil(S / t.maxTextureSize)), (S = t.maxTextureSize));
                var w = new Float32Array(S * E * 4 * f),
                  T = new $s(w, S, E, f);
                (T.type = ra), (T.needsUpdate = !0);
                for (var M = 4 * x, A = 0; A < f; A++)
                  for (
                    var C = y[A], P = _[A], k = b[A], R = S * E * 4 * A, D = 0;
                    D < C.count;
                    D++
                  ) {
                    var I = D * M;
                    !0 === m &&
                      (s.fromBufferAttribute(C, D),
                      (w[R + I + 0] = s.x),
                      (w[R + I + 1] = s.y),
                      (w[R + I + 2] = s.z),
                      (w[R + I + 3] = 0)),
                      !0 === g &&
                        (s.fromBufferAttribute(P, D),
                        (w[R + I + 4] = s.x),
                        (w[R + I + 5] = s.y),
                        (w[R + I + 6] = s.z),
                        (w[R + I + 7] = 0)),
                      !0 === v &&
                        (s.fromBufferAttribute(k, D),
                        (w[R + I + 8] = s.x),
                        (w[R + I + 9] = s.y),
                        (w[R + I + 10] = s.z),
                        (w[R + I + 11] = 4 === k.itemSize ? s.w : 1));
                  }
                (p = { count: f, texture: T, size: new Cs(S, E) }),
                  a.set(h, p),
                  h.addEventListener("dispose", function e() {
                    T.dispose(), a.delete(h), h.removeEventListener("dispose", e);
                  });
              }
              for (var L = 0, F = 0; F < c.length; F++) L += c[F];
              var O = h.morphTargetsRelative ? 1 : 1 - L;
              u.getUniforms().setValue(e, "morphTargetBaseInfluence", O),
                u.getUniforms().setValue(e, "morphTargetInfluences", c),
                u.getUniforms().setValue(e, "morphTargetsTexture", p.texture, n),
                u.getUniforms().setValue(e, "morphTargetsTextureSize", p.size);
            } else {
              var N = void 0 === c ? 0 : c.length,
                B = r[h.id];
              if (void 0 === B || B.length !== N) {
                B = [];
                for (var U = 0; U < N; U++) B[U] = [U, 0];
                r[h.id] = B;
              }
              for (var z = 0; z < N; z++) {
                var V = B[z];
                (V[0] = z), (V[1] = c[z]);
              }
              B.sort(iu);
              for (var H = 0; H < 8; H++)
                H < N && B[H][1]
                  ? ((o[H][0] = B[H][0]), (o[H][1] = B[H][1]))
                  : ((o[H][0] = Number.MAX_SAFE_INTEGER), (o[H][1] = 0));
              o.sort(ru);
              for (
                var G = h.morphAttributes.position,
                  W = h.morphAttributes.normal,
                  j = 0,
                  X = 0;
                X < 8;
                X++
              ) {
                var q = o[X],
                  Y = q[0],
                  K = q[1];
                Y !== Number.MAX_SAFE_INTEGER && K
                  ? (G &&
                      h.getAttribute("morphTarget" + X) !== G[Y] &&
                      h.setAttribute("morphTarget" + X, G[Y]),
                    W &&
                      h.getAttribute("morphNormal" + X) !== W[Y] &&
                      h.setAttribute("morphNormal" + X, W[Y]),
                    (i[X] = K),
                    (j += K))
                  : (G &&
                      !0 === h.hasAttribute("morphTarget" + X) &&
                      h.deleteAttribute("morphTarget" + X),
                    W &&
                      !0 === h.hasAttribute("morphNormal" + X) &&
                      h.deleteAttribute("morphNormal" + X),
                    (i[X] = 0));
              }
              var Z = h.morphTargetsRelative ? 1 : 1 - j;
              u.getUniforms().setValue(e, "morphTargetBaseInfluence", Z),
                u.getUniforms().setValue(e, "morphTargetInfluences", i);
            }
          }
        };
      }
      function su(e, t, n, r) {
        var i = new WeakMap();
        function a(e) {
          var t = e.target;
          t.removeEventListener("dispose", a),
            n.remove(t.instanceMatrix),
            null !== t.instanceColor && n.remove(t.instanceColor);
        }
        return {
          update: function (s) {
            var o = r.render.frame,
              l = s.geometry,
              h = t.get(s, l);
            if (
              (i.get(h) !== o && (t.update(h), i.set(h, o)),
              s.isInstancedMesh &&
                (!1 === s.hasEventListener("dispose", a) &&
                  s.addEventListener("dispose", a),
                i.get(s) !== o &&
                  (n.update(s.instanceMatrix, e.ARRAY_BUFFER),
                  null !== s.instanceColor &&
                    n.update(s.instanceColor, e.ARRAY_BUFFER),
                  i.set(s, o))),
              s.isSkinnedMesh)
            ) {
              var u = s.skeleton;
              i.get(u) !== o && (u.update(), i.set(u, o));
            }
            return h;
          },
          dispose: function () {
            i = new WeakMap();
          }
        };
      }
      var ou = (function (e) {
          function t(e, n, r, i, a, s, o, l, h, u) {
            var c;
            if ((Fi(this, t), (u = void 0 !== u ? u : ha) !== ha && u !== ua))
              throw new Error(
                "DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"
              );
            return (
              void 0 === r && u === ha && (r = na),
              void 0 === r && u === ua && (r = oa),
              ((c = Mi(this, t, [null, i, a, s, o, l, u, r, h])).isDepthTexture =
                !0),
              (c.image = { width: e, height: n }),
              (c.magFilter = void 0 !== o ? o : Yi),
              (c.minFilter = void 0 !== l ? l : Yi),
              (c.flipY = !1),
              (c.generateMipmaps = !1),
              (c.compareFunction = null),
              c
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.compareFunction = e.compareFunction),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = xi(Ci(t.prototype), "toJSON", this).call(this, e);
                  return (
                    null !== this.compareFunction &&
                      (n.compareFunction = this.compareFunction),
                    n
                  );
                }
              }
            ]),
            t
          );
        })(Ks),
        lu = new Ks(),
        hu = new ou(1, 1);
      hu.compareFunction = 515;
      var uu = new $s(),
        cu = new Qs(),
        du = new ph(),
        fu = [],
        pu = [],
        mu = new Float32Array(16),
        gu = new Float32Array(9),
        vu = new Float32Array(4);
      function yu(e, t, n) {
        var r = e[0];
        if (r <= 0 || r > 0) return e;
        var i = t * n,
          a = fu[i];
        if ((void 0 === a && ((a = new Float32Array(i)), (fu[i] = a)), 0 !== t)) {
          r.toArray(a, 0);
          for (var s = 1, o = 0; s !== t; ++s) (o += n), e[s].toArray(a, o);
        }
        return a;
      }
      function _u(e, t) {
        if (e.length !== t.length) return !1;
        for (var n = 0, r = e.length; n < r; n++) if (e[n] !== t[n]) return !1;
        return !0;
      }
      function bu(e, t) {
        for (var n = 0, r = t.length; n < r; n++) e[n] = t[n];
      }
      function xu(e, t) {
        var n = pu[t];
        void 0 === n && ((n = new Int32Array(t)), (pu[t] = n));
        for (var r = 0; r !== t; ++r) n[r] = e.allocateTextureUnit();
        return n;
      }
      function Su(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1f(this.addr, t), (n[0] = t));
      }
      function Eu(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y) ||
            (e.uniform2f(this.addr, t.x, t.y), (n[0] = t.x), (n[1] = t.y));
        else {
          if (_u(n, t)) return;
          e.uniform2fv(this.addr, t), bu(n, t);
        }
      }
      function wu(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y && n[2] === t.z) ||
            (e.uniform3f(this.addr, t.x, t.y, t.z),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z));
        else if (void 0 !== t.r)
          (n[0] === t.r && n[1] === t.g && n[2] === t.b) ||
            (e.uniform3f(this.addr, t.r, t.g, t.b),
            (n[0] = t.r),
            (n[1] = t.g),
            (n[2] = t.b));
        else {
          if (_u(n, t)) return;
          e.uniform3fv(this.addr, t), bu(n, t);
        }
      }
      function Tu(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y && n[2] === t.z && n[3] === t.w) ||
            (e.uniform4f(this.addr, t.x, t.y, t.z, t.w),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z),
            (n[3] = t.w));
        else {
          if (_u(n, t)) return;
          e.uniform4fv(this.addr, t), bu(n, t);
        }
      }
      function Mu(e, t) {
        var n = this.cache,
          r = t.elements;
        if (void 0 === r) {
          if (_u(n, t)) return;
          e.uniformMatrix2fv(this.addr, !1, t), bu(n, t);
        } else {
          if (_u(n, r)) return;
          vu.set(r), e.uniformMatrix2fv(this.addr, !1, vu), bu(n, r);
        }
      }
      function Au(e, t) {
        var n = this.cache,
          r = t.elements;
        if (void 0 === r) {
          if (_u(n, t)) return;
          e.uniformMatrix3fv(this.addr, !1, t), bu(n, t);
        } else {
          if (_u(n, r)) return;
          gu.set(r), e.uniformMatrix3fv(this.addr, !1, gu), bu(n, r);
        }
      }
      function Cu(e, t) {
        var n = this.cache,
          r = t.elements;
        if (void 0 === r) {
          if (_u(n, t)) return;
          e.uniformMatrix4fv(this.addr, !1, t), bu(n, t);
        } else {
          if (_u(n, r)) return;
          mu.set(r), e.uniformMatrix4fv(this.addr, !1, mu), bu(n, r);
        }
      }
      function Pu(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1i(this.addr, t), (n[0] = t));
      }
      function ku(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y) ||
            (e.uniform2i(this.addr, t.x, t.y), (n[0] = t.x), (n[1] = t.y));
        else {
          if (_u(n, t)) return;
          e.uniform2iv(this.addr, t), bu(n, t);
        }
      }
      function Ru(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y && n[2] === t.z) ||
            (e.uniform3i(this.addr, t.x, t.y, t.z),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z));
        else {
          if (_u(n, t)) return;
          e.uniform3iv(this.addr, t), bu(n, t);
        }
      }
      function Du(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y && n[2] === t.z && n[3] === t.w) ||
            (e.uniform4i(this.addr, t.x, t.y, t.z, t.w),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z),
            (n[3] = t.w));
        else {
          if (_u(n, t)) return;
          e.uniform4iv(this.addr, t), bu(n, t);
        }
      }
      function Iu(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1ui(this.addr, t), (n[0] = t));
      }
      function Lu(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y) ||
            (e.uniform2ui(this.addr, t.x, t.y), (n[0] = t.x), (n[1] = t.y));
        else {
          if (_u(n, t)) return;
          e.uniform2uiv(this.addr, t), bu(n, t);
        }
      }
      function Fu(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y && n[2] === t.z) ||
            (e.uniform3ui(this.addr, t.x, t.y, t.z),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z));
        else {
          if (_u(n, t)) return;
          e.uniform3uiv(this.addr, t), bu(n, t);
        }
      }
      function Ou(e, t) {
        var n = this.cache;
        if (void 0 !== t.x)
          (n[0] === t.x && n[1] === t.y && n[2] === t.z && n[3] === t.w) ||
            (e.uniform4ui(this.addr, t.x, t.y, t.z, t.w),
            (n[0] = t.x),
            (n[1] = t.y),
            (n[2] = t.z),
            (n[3] = t.w));
        else {
          if (_u(n, t)) return;
          e.uniform4uiv(this.addr, t), bu(n, t);
        }
      }
      function Nu(e, t, n) {
        var r = this.cache,
          i = n.allocateTextureUnit();
        r[0] !== i && (e.uniform1i(this.addr, i), (r[0] = i));
        var a = this.type === e.SAMPLER_2D_SHADOW ? hu : lu;
        n.setTexture2D(t || a, i);
      }
      function Bu(e, t, n) {
        var r = this.cache,
          i = n.allocateTextureUnit();
        r[0] !== i && (e.uniform1i(this.addr, i), (r[0] = i)),
          n.setTexture3D(t || cu, i);
      }
      function Uu(e, t, n) {
        var r = this.cache,
          i = n.allocateTextureUnit();
        r[0] !== i && (e.uniform1i(this.addr, i), (r[0] = i)),
          n.setTextureCube(t || du, i);
      }
      function zu(e, t, n) {
        var r = this.cache,
          i = n.allocateTextureUnit();
        r[0] !== i && (e.uniform1i(this.addr, i), (r[0] = i)),
          n.setTexture2DArray(t || uu, i);
      }
      function Vu(e, t) {
        e.uniform1fv(this.addr, t);
      }
      function Hu(e, t) {
        var n = yu(t, this.size, 2);
        e.uniform2fv(this.addr, n);
      }
      function Gu(e, t) {
        var n = yu(t, this.size, 3);
        e.uniform3fv(this.addr, n);
      }
      function Wu(e, t) {
        var n = yu(t, this.size, 4);
        e.uniform4fv(this.addr, n);
      }
      function ju(e, t) {
        var n = yu(t, this.size, 4);
        e.uniformMatrix2fv(this.addr, !1, n);
      }
      function Xu(e, t) {
        var n = yu(t, this.size, 9);
        e.uniformMatrix3fv(this.addr, !1, n);
      }
      function qu(e, t) {
        var n = yu(t, this.size, 16);
        e.uniformMatrix4fv(this.addr, !1, n);
      }
      function Yu(e, t) {
        e.uniform1iv(this.addr, t);
      }
      function Ku(e, t) {
        e.uniform2iv(this.addr, t);
      }
      function Zu(e, t) {
        e.uniform3iv(this.addr, t);
      }
      function Ju(e, t) {
        e.uniform4iv(this.addr, t);
      }
      function $u(e, t) {
        e.uniform1uiv(this.addr, t);
      }
      function Qu(e, t) {
        e.uniform2uiv(this.addr, t);
      }
      function ec(e, t) {
        e.uniform3uiv(this.addr, t);
      }
      function tc(e, t) {
        e.uniform4uiv(this.addr, t);
      }
      function nc(e, t, n) {
        var r = this.cache,
          i = t.length,
          a = xu(n, i);
        _u(r, a) || (e.uniform1iv(this.addr, a), bu(r, a));
        for (var s = 0; s !== i; ++s) n.setTexture2D(t[s] || lu, a[s]);
      }
      function rc(e, t, n) {
        var r = this.cache,
          i = t.length,
          a = xu(n, i);
        _u(r, a) || (e.uniform1iv(this.addr, a), bu(r, a));
        for (var s = 0; s !== i; ++s) n.setTexture3D(t[s] || cu, a[s]);
      }
      function ic(e, t, n) {
        var r = this.cache,
          i = t.length,
          a = xu(n, i);
        _u(r, a) || (e.uniform1iv(this.addr, a), bu(r, a));
        for (var s = 0; s !== i; ++s) n.setTextureCube(t[s] || du, a[s]);
      }
      function ac(e, t, n) {
        var r = this.cache,
          i = t.length,
          a = xu(n, i);
        _u(r, a) || (e.uniform1iv(this.addr, a), bu(r, a));
        for (var s = 0; s !== i; ++s) n.setTexture2DArray(t[s] || uu, a[s]);
      }
      var sc = Ni(function e(t, n, r) {
          Fi(this, e),
            (this.id = t),
            (this.addr = r),
            (this.cache = []),
            (this.type = n.type),
            (this.setValue = (function (e) {
              switch (e) {
                case 5126:
                  return Su;
                case 35664:
                  return Eu;
                case 35665:
                  return wu;
                case 35666:
                  return Tu;
                case 35674:
                  return Mu;
                case 35675:
                  return Au;
                case 35676:
                  return Cu;
                case 5124:
                case 35670:
                  return Pu;
                case 35667:
                case 35671:
                  return ku;
                case 35668:
                case 35672:
                  return Ru;
                case 35669:
                case 35673:
                  return Du;
                case 5125:
                  return Iu;
                case 36294:
                  return Lu;
                case 36295:
                  return Fu;
                case 36296:
                  return Ou;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return Nu;
                case 35679:
                case 36299:
                case 36307:
                  return Bu;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return Uu;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return zu;
              }
            })(n.type));
        }),
        oc = Ni(function e(t, n, r) {
          Fi(this, e),
            (this.id = t),
            (this.addr = r),
            (this.cache = []),
            (this.type = n.type),
            (this.size = n.size),
            (this.setValue = (function (e) {
              switch (e) {
                case 5126:
                  return Vu;
                case 35664:
                  return Hu;
                case 35665:
                  return Gu;
                case 35666:
                  return Wu;
                case 35674:
                  return ju;
                case 35675:
                  return Xu;
                case 35676:
                  return qu;
                case 5124:
                case 35670:
                  return Yu;
                case 35667:
                case 35671:
                  return Ku;
                case 35668:
                case 35672:
                  return Zu;
                case 35669:
                case 35673:
                  return Ju;
                case 5125:
                  return $u;
                case 36294:
                  return Qu;
                case 36295:
                  return ec;
                case 36296:
                  return tc;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                  return nc;
                case 35679:
                case 36299:
                case 36307:
                  return rc;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                  return ic;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                  return ac;
              }
            })(n.type));
        }),
        lc = (function () {
          function e(t) {
            Fi(this, e), (this.id = t), (this.seq = []), (this.map = {});
          }
          return (
            Ni(e, [
              {
                key: "setValue",
                value: function (e, t, n) {
                  for (var r = this.seq, i = 0, a = r.length; i !== a; ++i) {
                    var s = r[i];
                    s.setValue(e, t[s.id], n);
                  }
                }
              }
            ]),
            e
          );
        })(),
        hc = /(\w+)(\])?(\[|\.)?/g;
      function uc(e, t) {
        e.seq.push(t), (e.map[t.id] = t);
      }
      function cc(e, t, n) {
        var r = e.name,
          i = r.length;
        for (hc.lastIndex = 0; ; ) {
          var a = hc.exec(r),
            s = hc.lastIndex,
            o = a[1],
            l = "]" === a[2],
            h = a[3];
          if ((l && (o |= 0), void 0 === h || ("[" === h && s + 2 === i))) {
            uc(n, void 0 === h ? new sc(o, e, t) : new oc(o, e, t));
            break;
          }
          var u = n.map[o];
          void 0 === u && uc(n, (u = new lc(o))), (n = u);
        }
      }
      var dc = (function () {
        function e(t, n) {
          Fi(this, e), (this.seq = []), (this.map = {});
          for (
            var r = t.getProgramParameter(n, t.ACTIVE_UNIFORMS), i = 0;
            i < r;
            ++i
          ) {
            var a = t.getActiveUniform(n, i);
            cc(a, t.getUniformLocation(n, a.name), this);
          }
        }
        return (
          Ni(
            e,
            [
              {
                key: "setValue",
                value: function (e, t, n, r) {
                  var i = this.map[t];
                  void 0 !== i && i.setValue(e, n, r);
                }
              },
              {
                key: "setOptional",
                value: function (e, t, n) {
                  var r = t[n];
                  void 0 !== r && this.setValue(e, n, r);
                }
              }
            ],
            [
              {
                key: "upload",
                value: function (e, t, n, r) {
                  for (var i = 0, a = t.length; i !== a; ++i) {
                    var s = t[i],
                      o = n[s.id];
                    !1 !== o.needsUpdate && s.setValue(e, o.value, r);
                  }
                }
              },
              {
                key: "seqWithValue",
                value: function (e, t) {
                  for (var n = [], r = 0, i = e.length; r !== i; ++r) {
                    var a = e[r];
                    a.id in t && n.push(a);
                  }
                  return n;
                }
              }
            ]
          ),
          e
        );
      })();
      function fc(e, t, n) {
        var r = e.createShader(t);
        return e.shaderSource(r, n), e.compileShader(r), r;
      }
      var pc = 0;
      function mc(e, t, n) {
        var r = e.getShaderParameter(t, e.COMPILE_STATUS),
          i = e.getShaderInfoLog(t).trim();
        if (r && "" === i) return "";
        var a = /ERROR: 0:(\d+)/.exec(i);
        if (a) {
          var s = parseInt(a[1]);
          return (
            n.toUpperCase() +
            "\n\n" +
            i +
            "\n\n" +
            (function (e, t) {
              for (
                var n = e.split("\n"),
                  r = [],
                  i = Math.max(t - 6, 0),
                  a = Math.min(t + 6, n.length),
                  s = i;
                s < a;
                s++
              ) {
                var o = s + 1;
                r.push(
                  ""
                    .concat(o === t ? ">" : " ", " ")
                    .concat(o, ": ")
                    .concat(n[s])
                );
              }
              return r.join("\n");
            })(e.getShaderSource(t), s)
          );
        }
        return i;
      }
      function gc(e, t) {
        var n;
        switch (t) {
          case 1:
            n = "Linear";
            break;
          case 2:
            n = "Reinhard";
            break;
          case 3:
            n = "OptimizedCineon";
            break;
          case 4:
            n = "ACESFilmic";
            break;
          case 6:
            n = "AgX";
            break;
          case 5:
            n = "Custom";
            break;
          default:
            console.warn("THREE.WebGLProgram: Unsupported toneMapping:", t),
              (n = "Linear");
        }
        return (
          "vec3 " + e + "( vec3 color ) { return " + n + "ToneMapping( color ); }"
        );
      }
      function vc(e) {
        return "" !== e;
      }
      function yc(e, t) {
        var n =
          t.numSpotLightShadows +
          t.numSpotLightMaps -
          t.numSpotLightShadowsWithMaps;
        return e
          .replace(/NUM_DIR_LIGHTS/g, t.numDirLights)
          .replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights)
          .replace(/NUM_SPOT_LIGHT_MAPS/g, t.numSpotLightMaps)
          .replace(/NUM_SPOT_LIGHT_COORDS/g, n)
          .replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights)
          .replace(/NUM_POINT_LIGHTS/g, t.numPointLights)
          .replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights)
          .replace(/NUM_DIR_LIGHT_SHADOWS/g, t.numDirLightShadows)
          .replace(
            /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,
            t.numSpotLightShadowsWithMaps
          )
          .replace(/NUM_SPOT_LIGHT_SHADOWS/g, t.numSpotLightShadows)
          .replace(/NUM_POINT_LIGHT_SHADOWS/g, t.numPointLightShadows);
      }
      function _c(e, t) {
        return e
          .replace(/NUM_CLIPPING_PLANES/g, t.numClippingPlanes)
          .replace(
            /UNION_CLIPPING_PLANES/g,
            t.numClippingPlanes - t.numClipIntersection
          );
      }
      var bc = /^[ \t]*#include +<([\w\d./]+)>/gm;
      function xc(e) {
        return e.replace(bc, Ec);
      }
      var Sc = new Map([
        ["encodings_fragment", "colorspace_fragment"],
        ["encodings_pars_fragment", "colorspace_pars_fragment"],
        ["output_fragment", "opaque_fragment"]
      ]);
      function Ec(e, t) {
        var n = Mh[t];
        if (void 0 === n) {
          var r = Sc.get(t);
          if (void 0 === r)
            throw new Error("Can not resolve #include <" + t + ">");
          (n = Mh[r]),
            console.warn(
              'THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',
              t,
              r
            );
        }
        return xc(n);
      }
      var wc =
        /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
      function Tc(e) {
        return e.replace(wc, Mc);
      }
      function Mc(e, t, n, r) {
        for (var i = "", a = parseInt(t); a < parseInt(n); a++)
          i += r
            .replace(/\[\s*i\s*\]/g, "[ " + a + " ]")
            .replace(/UNROLLED_LOOP_INDEX/g, a);
        return i;
      }
      function Ac(e) {
        var t =
          "precision " +
          e.precision +
          " float;\nprecision " +
          e.precision +
          " int;";
        return (
          "highp" === e.precision
            ? (t += "\n#define HIGH_PRECISION")
            : "mediump" === e.precision
            ? (t += "\n#define MEDIUM_PRECISION")
            : "lowp" === e.precision && (t += "\n#define LOW_PRECISION"),
          t
        );
      }
      function Cc(e, t, n, r) {
        var i,
          a,
          s,
          o,
          l,
          h = e.getContext(),
          u = n.defines,
          c = n.vertexShader,
          d = n.fragmentShader,
          f = (function (e) {
            var t = "SHADOWMAP_TYPE_BASIC";
            return (
              1 === e.shadowMapType
                ? (t = "SHADOWMAP_TYPE_PCF")
                : 2 === e.shadowMapType
                ? (t = "SHADOWMAP_TYPE_PCF_SOFT")
                : 3 === e.shadowMapType && (t = "SHADOWMAP_TYPE_VSM"),
              t
            );
          })(n),
          p = (function (e) {
            var t = "ENVMAP_TYPE_CUBE";
            if (e.envMap)
              switch (e.envMapMode) {
                case Hi:
                case Gi:
                  t = "ENVMAP_TYPE_CUBE";
                  break;
                case Wi:
                  t = "ENVMAP_TYPE_CUBE_UV";
              }
            return t;
          })(n),
          m = (function (e) {
            var t = "ENVMAP_MODE_REFLECTION";
            return (
              e.envMap && e.envMapMode === Gi && (t = "ENVMAP_MODE_REFRACTION"), t
            );
          })(n),
          g = (function (e) {
            var t = "ENVMAP_BLENDING_NONE";
            if (e.envMap)
              switch (e.combine) {
                case 0:
                  t = "ENVMAP_BLENDING_MULTIPLY";
                  break;
                case 1:
                  t = "ENVMAP_BLENDING_MIX";
                  break;
                case 2:
                  t = "ENVMAP_BLENDING_ADD";
              }
            return t;
          })(n),
          v = (function (e) {
            var t = e.envMapCubeUVHeight;
            if (null === t) return null;
            var n = Math.log2(t) - 2,
              r = 1 / t;
            return {
              texelWidth: 1 / (3 * Math.max(Math.pow(2, n), 112)),
              texelHeight: r,
              maxMip: n
            };
          })(n),
          y = n.isWebGL2
            ? ""
            : (function (e) {
                return [
                  e.extensionDerivatives ||
                  e.envMapCubeUVHeight ||
                  e.bumpMap ||
                  e.normalMapTangentSpace ||
                  e.clearcoatNormalMap ||
                  e.flatShading ||
                  "physical" === e.shaderID
                    ? "#extension GL_OES_standard_derivatives : enable"
                    : "",
                  (e.extensionFragDepth || e.logarithmicDepthBuffer) &&
                  e.rendererExtensionFragDepth
                    ? "#extension GL_EXT_frag_depth : enable"
                    : "",
                  e.extensionDrawBuffers && e.rendererExtensionDrawBuffers
                    ? "#extension GL_EXT_draw_buffers : require"
                    : "",
                  (e.extensionShaderTextureLOD || e.envMap || e.transmission) &&
                  e.rendererExtensionShaderTextureLod
                    ? "#extension GL_EXT_shader_texture_lod : enable"
                    : ""
                ]
                  .filter(vc)
                  .join("\n");
              })(n),
          _ = (function (e) {
            return [
              e.extensionClipCullDistance
                ? "#extension GL_ANGLE_clip_cull_distance : require"
                : ""
            ]
              .filter(vc)
              .join("\n");
          })(n),
          b = (function (e) {
            var t = [];
            for (var n in e) {
              var r = e[n];
              !1 !== r && t.push("#define " + n + " " + r);
            }
            return t.join("\n");
          })(u),
          x = h.createProgram(),
          S = n.glslVersion ? "#version " + n.glslVersion + "\n" : "";
        n.isRawShaderMaterial
          ? ((i = [
              "#define SHADER_TYPE " + n.shaderType,
              "#define SHADER_NAME " + n.shaderName,
              b
            ]
              .filter(vc)
              .join("\n")).length > 0 && (i += "\n"),
            (a = [
              y,
              "#define SHADER_TYPE " + n.shaderType,
              "#define SHADER_NAME " + n.shaderName,
              b
            ]
              .filter(vc)
              .join("\n")).length > 0 && (a += "\n"))
          : ((i = [
              Ac(n),
              "#define SHADER_TYPE " + n.shaderType,
              "#define SHADER_NAME " + n.shaderName,
              b,
              n.extensionClipCullDistance ? "#define USE_CLIP_DISTANCE" : "",
              n.batching ? "#define USE_BATCHING" : "",
              n.instancing ? "#define USE_INSTANCING" : "",
              n.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
              n.useFog && n.fog ? "#define USE_FOG" : "",
              n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
              n.map ? "#define USE_MAP" : "",
              n.envMap ? "#define USE_ENVMAP" : "",
              n.envMap ? "#define " + m : "",
              n.lightMap ? "#define USE_LIGHTMAP" : "",
              n.aoMap ? "#define USE_AOMAP" : "",
              n.bumpMap ? "#define USE_BUMPMAP" : "",
              n.normalMap ? "#define USE_NORMALMAP" : "",
              n.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
              n.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
              n.displacementMap ? "#define USE_DISPLACEMENTMAP" : "",
              n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
              n.anisotropy ? "#define USE_ANISOTROPY" : "",
              n.anisotropyMap ? "#define USE_ANISOTROPYMAP" : "",
              n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
              n.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
              n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
              n.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
              n.iridescenceThicknessMap
                ? "#define USE_IRIDESCENCE_THICKNESSMAP"
                : "",
              n.specularMap ? "#define USE_SPECULARMAP" : "",
              n.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
              n.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
              n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
              n.metalnessMap ? "#define USE_METALNESSMAP" : "",
              n.alphaMap ? "#define USE_ALPHAMAP" : "",
              n.alphaHash ? "#define USE_ALPHAHASH" : "",
              n.transmission ? "#define USE_TRANSMISSION" : "",
              n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
              n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
              n.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
              n.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
              n.mapUv ? "#define MAP_UV " + n.mapUv : "",
              n.alphaMapUv ? "#define ALPHAMAP_UV " + n.alphaMapUv : "",
              n.lightMapUv ? "#define LIGHTMAP_UV " + n.lightMapUv : "",
              n.aoMapUv ? "#define AOMAP_UV " + n.aoMapUv : "",
              n.emissiveMapUv ? "#define EMISSIVEMAP_UV " + n.emissiveMapUv : "",
              n.bumpMapUv ? "#define BUMPMAP_UV " + n.bumpMapUv : "",
              n.normalMapUv ? "#define NORMALMAP_UV " + n.normalMapUv : "",
              n.displacementMapUv
                ? "#define DISPLACEMENTMAP_UV " + n.displacementMapUv
                : "",
              n.metalnessMapUv
                ? "#define METALNESSMAP_UV " + n.metalnessMapUv
                : "",
              n.roughnessMapUv
                ? "#define ROUGHNESSMAP_UV " + n.roughnessMapUv
                : "",
              n.anisotropyMapUv
                ? "#define ANISOTROPYMAP_UV " + n.anisotropyMapUv
                : "",
              n.clearcoatMapUv
                ? "#define CLEARCOATMAP_UV " + n.clearcoatMapUv
                : "",
              n.clearcoatNormalMapUv
                ? "#define CLEARCOAT_NORMALMAP_UV " + n.clearcoatNormalMapUv
                : "",
              n.clearcoatRoughnessMapUv
                ? "#define CLEARCOAT_ROUGHNESSMAP_UV " + n.clearcoatRoughnessMapUv
                : "",
              n.iridescenceMapUv
                ? "#define IRIDESCENCEMAP_UV " + n.iridescenceMapUv
                : "",
              n.iridescenceThicknessMapUv
                ? "#define IRIDESCENCE_THICKNESSMAP_UV " +
                  n.iridescenceThicknessMapUv
                : "",
              n.sheenColorMapUv
                ? "#define SHEEN_COLORMAP_UV " + n.sheenColorMapUv
                : "",
              n.sheenRoughnessMapUv
                ? "#define SHEEN_ROUGHNESSMAP_UV " + n.sheenRoughnessMapUv
                : "",
              n.specularMapUv ? "#define SPECULARMAP_UV " + n.specularMapUv : "",
              n.specularColorMapUv
                ? "#define SPECULAR_COLORMAP_UV " + n.specularColorMapUv
                : "",
              n.specularIntensityMapUv
                ? "#define SPECULAR_INTENSITYMAP_UV " + n.specularIntensityMapUv
                : "",
              n.transmissionMapUv
                ? "#define TRANSMISSIONMAP_UV " + n.transmissionMapUv
                : "",
              n.thicknessMapUv
                ? "#define THICKNESSMAP_UV " + n.thicknessMapUv
                : "",
              n.vertexTangents && !1 === n.flatShading
                ? "#define USE_TANGENT"
                : "",
              n.vertexColors ? "#define USE_COLOR" : "",
              n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
              n.vertexUv1s ? "#define USE_UV1" : "",
              n.vertexUv2s ? "#define USE_UV2" : "",
              n.vertexUv3s ? "#define USE_UV3" : "",
              n.pointsUvs ? "#define USE_POINTS_UV" : "",
              n.flatShading ? "#define FLAT_SHADED" : "",
              n.skinning ? "#define USE_SKINNING" : "",
              n.morphTargets ? "#define USE_MORPHTARGETS" : "",
              n.morphNormals && !1 === n.flatShading
                ? "#define USE_MORPHNORMALS"
                : "",
              n.morphColors && n.isWebGL2 ? "#define USE_MORPHCOLORS" : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_TEXTURE"
                : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_TEXTURE_STRIDE " + n.morphTextureStride
                : "",
              n.morphTargetsCount > 0 && n.isWebGL2
                ? "#define MORPHTARGETS_COUNT " + n.morphTargetsCount
                : "",
              n.doubleSided ? "#define DOUBLE_SIDED" : "",
              n.flipSided ? "#define FLIP_SIDED" : "",
              n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
              n.shadowMapEnabled ? "#define " + f : "",
              n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
              n.numLightProbes > 0 ? "#define USE_LIGHT_PROBES" : "",
              n.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
              n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
              n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                ? "#define USE_LOGDEPTHBUF_EXT"
                : "",
              "uniform mat4 modelMatrix;",
              "uniform mat4 modelViewMatrix;",
              "uniform mat4 projectionMatrix;",
              "uniform mat4 viewMatrix;",
              "uniform mat3 normalMatrix;",
              "uniform vec3 cameraPosition;",
              "uniform bool isOrthographic;",
              "#ifdef USE_INSTANCING",
              "\tattribute mat4 instanceMatrix;",
              "#endif",
              "#ifdef USE_INSTANCING_COLOR",
              "\tattribute vec3 instanceColor;",
              "#endif",
              "attribute vec3 position;",
              "attribute vec3 normal;",
              "attribute vec2 uv;",
              "#ifdef USE_UV1",
              "\tattribute vec2 uv1;",
              "#endif",
              "#ifdef USE_UV2",
              "\tattribute vec2 uv2;",
              "#endif",
              "#ifdef USE_UV3",
              "\tattribute vec2 uv3;",
              "#endif",
              "#ifdef USE_TANGENT",
              "\tattribute vec4 tangent;",
              "#endif",
              "#if defined( USE_COLOR_ALPHA )",
              "\tattribute vec4 color;",
              "#elif defined( USE_COLOR )",
              "\tattribute vec3 color;",
              "#endif",
              "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )",
              "\tattribute vec3 morphTarget0;",
              "\tattribute vec3 morphTarget1;",
              "\tattribute vec3 morphTarget2;",
              "\tattribute vec3 morphTarget3;",
              "\t#ifdef USE_MORPHNORMALS",
              "\t\tattribute vec3 morphNormal0;",
              "\t\tattribute vec3 morphNormal1;",
              "\t\tattribute vec3 morphNormal2;",
              "\t\tattribute vec3 morphNormal3;",
              "\t#else",
              "\t\tattribute vec3 morphTarget4;",
              "\t\tattribute vec3 morphTarget5;",
              "\t\tattribute vec3 morphTarget6;",
              "\t\tattribute vec3 morphTarget7;",
              "\t#endif",
              "#endif",
              "#ifdef USE_SKINNING",
              "\tattribute vec4 skinIndex;",
              "\tattribute vec4 skinWeight;",
              "#endif",
              "\n"
            ]
              .filter(vc)
              .join("\n")),
            (a = [
              y,
              Ac(n),
              "#define SHADER_TYPE " + n.shaderType,
              "#define SHADER_NAME " + n.shaderName,
              b,
              n.useFog && n.fog ? "#define USE_FOG" : "",
              n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "",
              n.map ? "#define USE_MAP" : "",
              n.matcap ? "#define USE_MATCAP" : "",
              n.envMap ? "#define USE_ENVMAP" : "",
              n.envMap ? "#define " + p : "",
              n.envMap ? "#define " + m : "",
              n.envMap ? "#define " + g : "",
              v ? "#define CUBEUV_TEXEL_WIDTH " + v.texelWidth : "",
              v ? "#define CUBEUV_TEXEL_HEIGHT " + v.texelHeight : "",
              v ? "#define CUBEUV_MAX_MIP " + v.maxMip + ".0" : "",
              n.lightMap ? "#define USE_LIGHTMAP" : "",
              n.aoMap ? "#define USE_AOMAP" : "",
              n.bumpMap ? "#define USE_BUMPMAP" : "",
              n.normalMap ? "#define USE_NORMALMAP" : "",
              n.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
              n.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
              n.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
              n.anisotropy ? "#define USE_ANISOTROPY" : "",
              n.anisotropyMap ? "#define USE_ANISOTROPYMAP" : "",
              n.clearcoat ? "#define USE_CLEARCOAT" : "",
              n.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
              n.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
              n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
              n.iridescence ? "#define USE_IRIDESCENCE" : "",
              n.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
              n.iridescenceThicknessMap
                ? "#define USE_IRIDESCENCE_THICKNESSMAP"
                : "",
              n.specularMap ? "#define USE_SPECULARMAP" : "",
              n.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
              n.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
              n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
              n.metalnessMap ? "#define USE_METALNESSMAP" : "",
              n.alphaMap ? "#define USE_ALPHAMAP" : "",
              n.alphaTest ? "#define USE_ALPHATEST" : "",
              n.alphaHash ? "#define USE_ALPHAHASH" : "",
              n.sheen ? "#define USE_SHEEN" : "",
              n.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
              n.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
              n.transmission ? "#define USE_TRANSMISSION" : "",
              n.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
              n.thicknessMap ? "#define USE_THICKNESSMAP" : "",
              n.vertexTangents && !1 === n.flatShading
                ? "#define USE_TANGENT"
                : "",
              n.vertexColors || n.instancingColor ? "#define USE_COLOR" : "",
              n.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
              n.vertexUv1s ? "#define USE_UV1" : "",
              n.vertexUv2s ? "#define USE_UV2" : "",
              n.vertexUv3s ? "#define USE_UV3" : "",
              n.pointsUvs ? "#define USE_POINTS_UV" : "",
              n.gradientMap ? "#define USE_GRADIENTMAP" : "",
              n.flatShading ? "#define FLAT_SHADED" : "",
              n.doubleSided ? "#define DOUBLE_SIDED" : "",
              n.flipSided ? "#define FLIP_SIDED" : "",
              n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
              n.shadowMapEnabled ? "#define " + f : "",
              n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
              n.numLightProbes > 0 ? "#define USE_LIGHT_PROBES" : "",
              n.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
              n.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "",
              n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
              n.logarithmicDepthBuffer && n.rendererExtensionFragDepth
                ? "#define USE_LOGDEPTHBUF_EXT"
                : "",
              "uniform mat4 viewMatrix;",
              "uniform vec3 cameraPosition;",
              "uniform bool isOrthographic;",
              0 !== n.toneMapping ? "#define TONE_MAPPING" : "",
              0 !== n.toneMapping ? Mh.tonemapping_pars_fragment : "",
              0 !== n.toneMapping ? gc("toneMapping", n.toneMapping) : "",
              n.dithering ? "#define DITHERING" : "",
              n.opaque ? "#define OPAQUE" : "",
              Mh.colorspace_pars_fragment,
              ((s = "linearToOutputTexel"),
              (o = n.outputColorSpace),
              (l = (function (e) {
                var t,
                  n = Vs.getPrimaries(Vs.workingColorSpace),
                  r = Vs.getPrimaries(e);
                switch (
                  (n === r
                    ? (t = "")
                    : n === os && r === ss
                    ? (t = "LinearDisplayP3ToLinearSRGB")
                    : n === ss && r === os && (t = "LinearSRGBToLinearDisplayP3"),
                  e)
                ) {
                  case ts:
                  case rs:
                    return [t, "LinearTransferOETF"];
                  case es:
                  case ns:
                    return [t, "sRGBTransferOETF"];
                  default:
                    return (
                      console.warn(
                        "THREE.WebGLProgram: Unsupported color space:",
                        e
                      ),
                      [t, "LinearTransferOETF"]
                    );
                }
              })(o)),
              "vec4 "
                .concat(s, "( vec4 value ) { return ")
                .concat(l[0], "( ")
                .concat(l[1], "( value ) ); }")),
              n.useDepthPacking ? "#define DEPTH_PACKING " + n.depthPacking : "",
              "\n"
            ]
              .filter(vc)
              .join("\n"))),
          (c = _c((c = yc((c = xc(c)), n)), n)),
          (d = _c((d = yc((d = xc(d)), n)), n)),
          (c = Tc(c)),
          (d = Tc(d)),
          n.isWebGL2 &&
            !0 !== n.isRawShaderMaterial &&
            ((S = "#version 300 es\n"),
            (i =
              [
                _,
                "precision mediump sampler2DArray;",
                "#define attribute in",
                "#define varying out",
                "#define texture2D texture"
              ].join("\n") +
              "\n" +
              i),
            (a =
              [
                "precision mediump sampler2DArray;",
                "#define varying in",
                n.glslVersion === us
                  ? ""
                  : "layout(location = 0) out highp vec4 pc_fragColor;",
                n.glslVersion === us ? "" : "#define gl_FragColor pc_fragColor",
                "#define gl_FragDepthEXT gl_FragDepth",
                "#define texture2D texture",
                "#define textureCube texture",
                "#define texture2DProj textureProj",
                "#define texture2DLodEXT textureLod",
                "#define texture2DProjLodEXT textureProjLod",
                "#define textureCubeLodEXT textureLod",
                "#define texture2DGradEXT textureGrad",
                "#define texture2DProjGradEXT textureProjGrad",
                "#define textureCubeGradEXT textureGrad"
              ].join("\n") +
              "\n" +
              a));
        var E,
          w,
          T = S + i + c,
          M = S + a + d,
          A = fc(h, h.VERTEX_SHADER, T),
          C = fc(h, h.FRAGMENT_SHADER, M);
        function P(t) {
          if (e.debug.checkShaderErrors) {
            var n = h.getProgramInfoLog(x).trim(),
              r = h.getShaderInfoLog(A).trim(),
              s = h.getShaderInfoLog(C).trim(),
              o = !0,
              l = !0;
            if (!1 === h.getProgramParameter(x, h.LINK_STATUS)) {
              if (((o = !1), "function" == typeof e.debug.onShaderError))
                e.debug.onShaderError(h, x, A, C);
              else {
                var u = mc(h, A, "vertex"),
                  c = mc(h, C, "fragment");
                console.error(
                  "THREE.WebGLProgram: Shader Error " +
                    h.getError() +
                    " - VALIDATE_STATUS " +
                    h.getProgramParameter(x, h.VALIDATE_STATUS) +
                    "\n\nProgram Info Log: " +
                    n +
                    "\n" +
                    u +
                    "\n" +
                    c
                );
              }
            } else
              "" !== n
                ? console.warn("THREE.WebGLProgram: Program Info Log:", n)
                : ("" !== r && "" !== s) || (l = !1);
            l &&
              (t.diagnostics = {
                runnable: o,
                programLog: n,
                vertexShader: { log: r, prefix: i },
                fragmentShader: { log: s, prefix: a }
              });
          }
          h.deleteShader(A),
            h.deleteShader(C),
            (E = new dc(h, x)),
            (w = (function (e, t) {
              for (
                var n = {},
                  r = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES),
                  i = 0;
                i < r;
                i++
              ) {
                var a = e.getActiveAttrib(t, i),
                  s = a.name,
                  o = 1;
                a.type === e.FLOAT_MAT2 && (o = 2),
                  a.type === e.FLOAT_MAT3 && (o = 3),
                  a.type === e.FLOAT_MAT4 && (o = 4),
                  (n[s] = {
                    type: a.type,
                    location: e.getAttribLocation(t, s),
                    locationSize: o
                  });
              }
              return n;
            })(h, x));
        }
        h.attachShader(x, A),
          h.attachShader(x, C),
          void 0 !== n.index0AttributeName
            ? h.bindAttribLocation(x, 0, n.index0AttributeName)
            : !0 === n.morphTargets && h.bindAttribLocation(x, 0, "position"),
          h.linkProgram(x),
          (this.getUniforms = function () {
            return void 0 === E && P(this), E;
          }),
          (this.getAttributes = function () {
            return void 0 === w && P(this), w;
          });
        var k = !1 === n.rendererExtensionParallelShaderCompile;
        return (
          (this.isReady = function () {
            return !1 === k && (k = h.getProgramParameter(x, 37297)), k;
          }),
          (this.destroy = function () {
            r.releaseStatesOfProgram(this),
              h.deleteProgram(x),
              (this.program = void 0);
          }),
          (this.type = n.shaderType),
          (this.name = n.shaderName),
          (this.id = pc++),
          (this.cacheKey = t),
          (this.usedTimes = 1),
          (this.program = x),
          (this.vertexShader = A),
          (this.fragmentShader = C),
          this
        );
      }
      var Pc = 0,
        kc = (function () {
          function e() {
            Fi(this, e),
              (this.shaderCache = new Map()),
              (this.materialCache = new Map());
          }
          return (
            Ni(e, [
              {
                key: "update",
                value: function (e) {
                  var t = e.vertexShader,
                    n = e.fragmentShader,
                    r = this._getShaderStage(t),
                    i = this._getShaderStage(n),
                    a = this._getShaderCacheForMaterial(e);
                  return (
                    !1 === a.has(r) && (a.add(r), r.usedTimes++),
                    !1 === a.has(i) && (a.add(i), i.usedTimes++),
                    this
                  );
                }
              },
              {
                key: "remove",
                value: function (e) {
                  var t,
                    n = _i(this.materialCache.get(e));
                  try {
                    for (n.s(); !(t = n.n()).done; ) {
                      var r = t.value;
                      r.usedTimes--,
                        0 === r.usedTimes && this.shaderCache.delete(r.code);
                    }
                  } catch (e) {
                    n.e(e);
                  } finally {
                    n.f();
                  }
                  return this.materialCache.delete(e), this;
                }
              },
              {
                key: "getVertexShaderID",
                value: function (e) {
                  return this._getShaderStage(e.vertexShader).id;
                }
              },
              {
                key: "getFragmentShaderID",
                value: function (e) {
                  return this._getShaderStage(e.fragmentShader).id;
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.shaderCache.clear(), this.materialCache.clear();
                }
              },
              {
                key: "_getShaderCacheForMaterial",
                value: function (e) {
                  var t = this.materialCache,
                    n = t.get(e);
                  return void 0 === n && ((n = new Set()), t.set(e, n)), n;
                }
              },
              {
                key: "_getShaderStage",
                value: function (e) {
                  var t = this.shaderCache,
                    n = t.get(e);
                  return void 0 === n && ((n = new Rc(e)), t.set(e, n)), n;
                }
              }
            ]),
            e
          );
        })(),
        Rc = Ni(function e(t) {
          Fi(this, e), (this.id = Pc++), (this.code = t), (this.usedTimes = 0);
        });
      function Dc(e, t, n, r, i, a, s) {
        var o = new Go(),
          l = new kc(),
          h = [],
          u = i.isWebGL2,
          c = i.logarithmicDepthBuffer,
          d = i.vertexTextures,
          f = i.precision,
          p = {
            MeshDepthMaterial: "depth",
            MeshDistanceMaterial: "distanceRGBA",
            MeshNormalMaterial: "normal",
            MeshBasicMaterial: "basic",
            MeshLambertMaterial: "lambert",
            MeshPhongMaterial: "phong",
            MeshToonMaterial: "toon",
            MeshStandardMaterial: "physical",
            MeshPhysicalMaterial: "physical",
            MeshMatcapMaterial: "matcap",
            LineBasicMaterial: "basic",
            LineDashedMaterial: "dashed",
            PointsMaterial: "points",
            ShadowMaterial: "shadow",
            SpriteMaterial: "sprite"
          };
        function m(e) {
          return 0 === e ? "uv" : "uv".concat(e);
        }
        return {
          getParameters: function (a, o, h, g, v) {
            var y = g.fog,
              _ = v.geometry,
              b = a.isMeshStandardMaterial ? g.environment : null,
              x = (a.isMeshStandardMaterial ? n : t).get(a.envMap || b),
              S = x && x.mapping === Wi ? x.image.height : null,
              E = p[a.type];
            null !== a.precision &&
              (f = i.getMaxPrecision(a.precision)) !== a.precision &&
              console.warn(
                "THREE.WebGLProgram.getParameters:",
                a.precision,
                "not supported, using",
                f,
                "instead."
              );
            var w,
              T,
              M,
              A,
              C =
                _.morphAttributes.position ||
                _.morphAttributes.normal ||
                _.morphAttributes.color,
              P = void 0 !== C ? C.length : 0,
              k = 0;
            if (
              (void 0 !== _.morphAttributes.position && (k = 1),
              void 0 !== _.morphAttributes.normal && (k = 2),
              void 0 !== _.morphAttributes.color && (k = 3),
              E)
            ) {
              var R = Ch[E];
              (w = R.vertexShader), (T = R.fragmentShader);
            } else
              (w = a.vertexShader),
                (T = a.fragmentShader),
                l.update(a),
                (M = l.getVertexShaderID(a)),
                (A = l.getFragmentShaderID(a));
            var D = e.getRenderTarget(),
              I = !0 === v.isInstancedMesh,
              L = !0 === v.isBatchedMesh,
              F = !!a.map,
              O = !!a.matcap,
              N = !!x,
              B = !!a.aoMap,
              U = !!a.lightMap,
              z = !!a.bumpMap,
              V = !!a.normalMap,
              H = !!a.displacementMap,
              G = !!a.emissiveMap,
              W = !!a.metalnessMap,
              j = !!a.roughnessMap,
              X = a.anisotropy > 0,
              q = a.clearcoat > 0,
              Y = a.iridescence > 0,
              K = a.sheen > 0,
              Z = a.transmission > 0,
              J = X && !!a.anisotropyMap,
              $ = q && !!a.clearcoatMap,
              Q = q && !!a.clearcoatNormalMap,
              ee = q && !!a.clearcoatRoughnessMap,
              te = Y && !!a.iridescenceMap,
              ne = Y && !!a.iridescenceThicknessMap,
              re = K && !!a.sheenColorMap,
              ie = K && !!a.sheenRoughnessMap,
              ae = !!a.specularMap,
              se = !!a.specularColorMap,
              oe = !!a.specularIntensityMap,
              le = Z && !!a.transmissionMap,
              he = Z && !!a.thicknessMap,
              ue = !!a.gradientMap,
              ce = !!a.alphaMap,
              de = a.alphaTest > 0,
              fe = !!a.alphaHash,
              pe = !!a.extensions,
              me = !!_.attributes.uv1,
              ge = !!_.attributes.uv2,
              ve = !!_.attributes.uv3,
              ye = 0;
            return (
              a.toneMapped &&
                ((null !== D && !0 !== D.isXRRenderTarget) ||
                  (ye = e.toneMapping)),
              {
                isWebGL2: u,
                shaderID: E,
                shaderType: a.type,
                shaderName: a.name,
                vertexShader: w,
                fragmentShader: T,
                defines: a.defines,
                customVertexShaderID: M,
                customFragmentShaderID: A,
                isRawShaderMaterial: !0 === a.isRawShaderMaterial,
                glslVersion: a.glslVersion,
                precision: f,
                batching: L,
                instancing: I,
                instancingColor: I && null !== v.instanceColor,
                supportsVertexTextures: d,
                outputColorSpace:
                  null === D
                    ? e.outputColorSpace
                    : !0 === D.isXRRenderTarget
                    ? D.texture.colorSpace
                    : ts,
                map: F,
                matcap: O,
                envMap: N,
                envMapMode: N && x.mapping,
                envMapCubeUVHeight: S,
                aoMap: B,
                lightMap: U,
                bumpMap: z,
                normalMap: V,
                displacementMap: d && H,
                emissiveMap: G,
                normalMapObjectSpace: V && 1 === a.normalMapType,
                normalMapTangentSpace: V && 0 === a.normalMapType,
                metalnessMap: W,
                roughnessMap: j,
                anisotropy: X,
                anisotropyMap: J,
                clearcoat: q,
                clearcoatMap: $,
                clearcoatNormalMap: Q,
                clearcoatRoughnessMap: ee,
                iridescence: Y,
                iridescenceMap: te,
                iridescenceThicknessMap: ne,
                sheen: K,
                sheenColorMap: re,
                sheenRoughnessMap: ie,
                specularMap: ae,
                specularColorMap: se,
                specularIntensityMap: oe,
                transmission: Z,
                transmissionMap: le,
                thicknessMap: he,
                gradientMap: ue,
                opaque: !1 === a.transparent && 1 === a.blending,
                alphaMap: ce,
                alphaTest: de,
                alphaHash: fe,
                combine: a.combine,
                mapUv: F && m(a.map.channel),
                aoMapUv: B && m(a.aoMap.channel),
                lightMapUv: U && m(a.lightMap.channel),
                bumpMapUv: z && m(a.bumpMap.channel),
                normalMapUv: V && m(a.normalMap.channel),
                displacementMapUv: H && m(a.displacementMap.channel),
                emissiveMapUv: G && m(a.emissiveMap.channel),
                metalnessMapUv: W && m(a.metalnessMap.channel),
                roughnessMapUv: j && m(a.roughnessMap.channel),
                anisotropyMapUv: J && m(a.anisotropyMap.channel),
                clearcoatMapUv: $ && m(a.clearcoatMap.channel),
                clearcoatNormalMapUv: Q && m(a.clearcoatNormalMap.channel),
                clearcoatRoughnessMapUv: ee && m(a.clearcoatRoughnessMap.channel),
                iridescenceMapUv: te && m(a.iridescenceMap.channel),
                iridescenceThicknessMapUv:
                  ne && m(a.iridescenceThicknessMap.channel),
                sheenColorMapUv: re && m(a.sheenColorMap.channel),
                sheenRoughnessMapUv: ie && m(a.sheenRoughnessMap.channel),
                specularMapUv: ae && m(a.specularMap.channel),
                specularColorMapUv: se && m(a.specularColorMap.channel),
                specularIntensityMapUv: oe && m(a.specularIntensityMap.channel),
                transmissionMapUv: le && m(a.transmissionMap.channel),
                thicknessMapUv: he && m(a.thicknessMap.channel),
                alphaMapUv: ce && m(a.alphaMap.channel),
                vertexTangents: !!_.attributes.tangent && (V || X),
                vertexColors: a.vertexColors,
                vertexAlphas:
                  !0 === a.vertexColors &&
                  !!_.attributes.color &&
                  4 === _.attributes.color.itemSize,
                vertexUv1s: me,
                vertexUv2s: ge,
                vertexUv3s: ve,
                pointsUvs: !0 === v.isPoints && !!_.attributes.uv && (F || ce),
                fog: !!y,
                useFog: !0 === a.fog,
                fogExp2: y && y.isFogExp2,
                flatShading: !0 === a.flatShading,
                sizeAttenuation: !0 === a.sizeAttenuation,
                logarithmicDepthBuffer: c,
                skinning: !0 === v.isSkinnedMesh,
                morphTargets: void 0 !== _.morphAttributes.position,
                morphNormals: void 0 !== _.morphAttributes.normal,
                morphColors: void 0 !== _.morphAttributes.color,
                morphTargetsCount: P,
                morphTextureStride: k,
                numDirLights: o.directional.length,
                numPointLights: o.point.length,
                numSpotLights: o.spot.length,
                numSpotLightMaps: o.spotLightMap.length,
                numRectAreaLights: o.rectArea.length,
                numHemiLights: o.hemi.length,
                numDirLightShadows: o.directionalShadowMap.length,
                numPointLightShadows: o.pointShadowMap.length,
                numSpotLightShadows: o.spotShadowMap.length,
                numSpotLightShadowsWithMaps: o.numSpotLightShadowsWithMaps,
                numLightProbes: o.numLightProbes,
                numClippingPlanes: s.numPlanes,
                numClipIntersection: s.numIntersection,
                dithering: a.dithering,
                shadowMapEnabled: e.shadowMap.enabled && h.length > 0,
                shadowMapType: e.shadowMap.type,
                toneMapping: ye,
                useLegacyLights: e._useLegacyLights,
                decodeVideoTexture:
                  F &&
                  !0 === a.map.isVideoTexture &&
                  Vs.getTransfer(a.map.colorSpace) === as,
                premultipliedAlpha: a.premultipliedAlpha,
                doubleSided: 2 === a.side,
                flipSided: 1 === a.side,
                useDepthPacking: a.depthPacking >= 0,
                depthPacking: a.depthPacking || 0,
                index0AttributeName: a.index0AttributeName,
                extensionDerivatives: pe && !0 === a.extensions.derivatives,
                extensionFragDepth: pe && !0 === a.extensions.fragDepth,
                extensionDrawBuffers: pe && !0 === a.extensions.drawBuffers,
                extensionShaderTextureLOD:
                  pe && !0 === a.extensions.shaderTextureLOD,
                extensionClipCullDistance:
                  pe &&
                  a.extensions.clipCullDistance &&
                  r.has("WEBGL_clip_cull_distance"),
                rendererExtensionFragDepth: u || r.has("EXT_frag_depth"),
                rendererExtensionDrawBuffers: u || r.has("WEBGL_draw_buffers"),
                rendererExtensionShaderTextureLod:
                  u || r.has("EXT_shader_texture_lod"),
                rendererExtensionParallelShaderCompile: r.has(
                  "KHR_parallel_shader_compile"
                ),
                customProgramCacheKey: a.customProgramCacheKey()
              }
            );
          },
          getProgramCacheKey: function (t) {
            var n = [];
            if (
              (t.shaderID
                ? n.push(t.shaderID)
                : (n.push(t.customVertexShaderID),
                  n.push(t.customFragmentShaderID)),
              void 0 !== t.defines)
            )
              for (var r in t.defines) n.push(r), n.push(t.defines[r]);
            return (
              !1 === t.isRawShaderMaterial &&
                ((function (e, t) {
                  e.push(t.precision),
                    e.push(t.outputColorSpace),
                    e.push(t.envMapMode),
                    e.push(t.envMapCubeUVHeight),
                    e.push(t.mapUv),
                    e.push(t.alphaMapUv),
                    e.push(t.lightMapUv),
                    e.push(t.aoMapUv),
                    e.push(t.bumpMapUv),
                    e.push(t.normalMapUv),
                    e.push(t.displacementMapUv),
                    e.push(t.emissiveMapUv),
                    e.push(t.metalnessMapUv),
                    e.push(t.roughnessMapUv),
                    e.push(t.anisotropyMapUv),
                    e.push(t.clearcoatMapUv),
                    e.push(t.clearcoatNormalMapUv),
                    e.push(t.clearcoatRoughnessMapUv),
                    e.push(t.iridescenceMapUv),
                    e.push(t.iridescenceThicknessMapUv),
                    e.push(t.sheenColorMapUv),
                    e.push(t.sheenRoughnessMapUv),
                    e.push(t.specularMapUv),
                    e.push(t.specularColorMapUv),
                    e.push(t.specularIntensityMapUv),
                    e.push(t.transmissionMapUv),
                    e.push(t.thicknessMapUv),
                    e.push(t.combine),
                    e.push(t.fogExp2),
                    e.push(t.sizeAttenuation),
                    e.push(t.morphTargetsCount),
                    e.push(t.morphAttributeCount),
                    e.push(t.numDirLights),
                    e.push(t.numPointLights),
                    e.push(t.numSpotLights),
                    e.push(t.numSpotLightMaps),
                    e.push(t.numHemiLights),
                    e.push(t.numRectAreaLights),
                    e.push(t.numDirLightShadows),
                    e.push(t.numPointLightShadows),
                    e.push(t.numSpotLightShadows),
                    e.push(t.numSpotLightShadowsWithMaps),
                    e.push(t.numLightProbes),
                    e.push(t.shadowMapType),
                    e.push(t.toneMapping),
                    e.push(t.numClippingPlanes),
                    e.push(t.numClipIntersection),
                    e.push(t.depthPacking);
                })(n, t),
                (function (e, t) {
                  o.disableAll(),
                    t.isWebGL2 && o.enable(0),
                    t.supportsVertexTextures && o.enable(1),
                    t.instancing && o.enable(2),
                    t.instancingColor && o.enable(3),
                    t.matcap && o.enable(4),
                    t.envMap && o.enable(5),
                    t.normalMapObjectSpace && o.enable(6),
                    t.normalMapTangentSpace && o.enable(7),
                    t.clearcoat && o.enable(8),
                    t.iridescence && o.enable(9),
                    t.alphaTest && o.enable(10),
                    t.vertexColors && o.enable(11),
                    t.vertexAlphas && o.enable(12),
                    t.vertexUv1s && o.enable(13),
                    t.vertexUv2s && o.enable(14),
                    t.vertexUv3s && o.enable(15),
                    t.vertexTangents && o.enable(16),
                    t.anisotropy && o.enable(17),
                    t.alphaHash && o.enable(18),
                    t.batching && o.enable(19),
                    e.push(o.mask),
                    o.disableAll(),
                    t.fog && o.enable(0),
                    t.useFog && o.enable(1),
                    t.flatShading && o.enable(2),
                    t.logarithmicDepthBuffer && o.enable(3),
                    t.skinning && o.enable(4),
                    t.morphTargets && o.enable(5),
                    t.morphNormals && o.enable(6),
                    t.morphColors && o.enable(7),
                    t.premultipliedAlpha && o.enable(8),
                    t.shadowMapEnabled && o.enable(9),
                    t.useLegacyLights && o.enable(10),
                    t.doubleSided && o.enable(11),
                    t.flipSided && o.enable(12),
                    t.useDepthPacking && o.enable(13),
                    t.dithering && o.enable(14),
                    t.transmission && o.enable(15),
                    t.sheen && o.enable(16),
                    t.opaque && o.enable(17),
                    t.pointsUvs && o.enable(18),
                    t.decodeVideoTexture && o.enable(19),
                    e.push(o.mask);
                })(n, t),
                n.push(e.outputColorSpace)),
              n.push(t.customProgramCacheKey),
              n.join()
            );
          },
          getUniforms: function (e) {
            var t,
              n = p[e.type];
            if (n) {
              var r = Ch[n];
              t = lh.clone(r.uniforms);
            } else t = e.uniforms;
            return t;
          },
          acquireProgram: function (t, n) {
            for (var r, i = 0, s = h.length; i < s; i++) {
              var o = h[i];
              if (o.cacheKey === n) {
                ++(r = o).usedTimes;
                break;
              }
            }
            return void 0 === r && ((r = new Cc(e, n, t, a)), h.push(r)), r;
          },
          releaseProgram: function (e) {
            if (0 == --e.usedTimes) {
              var t = h.indexOf(e);
              (h[t] = h[h.length - 1]), h.pop(), e.destroy();
            }
          },
          releaseShaderCache: function (e) {
            l.remove(e);
          },
          programs: h,
          dispose: function () {
            l.dispose();
          }
        };
      }
      function Ic() {
        var e = new WeakMap();
        return {
          get: function (t) {
            var n = e.get(t);
            return void 0 === n && ((n = {}), e.set(t, n)), n;
          },
          remove: function (t) {
            e.delete(t);
          },
          update: function (t, n, r) {
            e.get(t)[n] = r;
          },
          dispose: function () {
            e = new WeakMap();
          }
        };
      }
      function Lc(e, t) {
        return e.groupOrder !== t.groupOrder
          ? e.groupOrder - t.groupOrder
          : e.renderOrder !== t.renderOrder
          ? e.renderOrder - t.renderOrder
          : e.material.id !== t.material.id
          ? e.material.id - t.material.id
          : e.z !== t.z
          ? e.z - t.z
          : e.id - t.id;
      }
      function Fc(e, t) {
        return e.groupOrder !== t.groupOrder
          ? e.groupOrder - t.groupOrder
          : e.renderOrder !== t.renderOrder
          ? e.renderOrder - t.renderOrder
          : e.z !== t.z
          ? t.z - e.z
          : e.id - t.id;
      }
      function Oc() {
        var e = [],
          t = 0,
          n = [],
          r = [],
          i = [];
        function a(n, r, i, a, s, o) {
          var l = e[t];
          return (
            void 0 === l
              ? ((l = {
                  id: n.id,
                  object: n,
                  geometry: r,
                  material: i,
                  groupOrder: a,
                  renderOrder: n.renderOrder,
                  z: s,
                  group: o
                }),
                (e[t] = l))
              : ((l.id = n.id),
                (l.object = n),
                (l.geometry = r),
                (l.material = i),
                (l.groupOrder = a),
                (l.renderOrder = n.renderOrder),
                (l.z = s),
                (l.group = o)),
            t++,
            l
          );
        }
        return {
          opaque: n,
          transmissive: r,
          transparent: i,
          init: function () {
            (t = 0), (n.length = 0), (r.length = 0), (i.length = 0);
          },
          push: function (e, t, s, o, l, h) {
            var u = a(e, t, s, o, l, h);
            s.transmission > 0
              ? r.push(u)
              : !0 === s.transparent
              ? i.push(u)
              : n.push(u);
          },
          unshift: function (e, t, s, o, l, h) {
            var u = a(e, t, s, o, l, h);
            s.transmission > 0
              ? r.unshift(u)
              : !0 === s.transparent
              ? i.unshift(u)
              : n.unshift(u);
          },
          finish: function () {
            for (var n = t, r = e.length; n < r; n++) {
              var i = e[n];
              if (null === i.id) break;
              (i.id = null),
                (i.object = null),
                (i.geometry = null),
                (i.material = null),
                (i.group = null);
            }
          },
          sort: function (e, t) {
            n.length > 1 && n.sort(e || Lc),
              r.length > 1 && r.sort(t || Fc),
              i.length > 1 && i.sort(t || Fc);
          }
        };
      }
      function Nc() {
        var e = new WeakMap();
        return {
          get: function (t, n) {
            var r,
              i = e.get(t);
            return (
              void 0 === i
                ? ((r = new Oc()), e.set(t, [r]))
                : n >= i.length
                ? ((r = new Oc()), i.push(r))
                : (r = i[n]),
              r
            );
          },
          dispose: function () {
            e = new WeakMap();
          }
        };
      }
      function Bc() {
        var e = {};
        return {
          get: function (t) {
            if (void 0 !== e[t.id]) return e[t.id];
            var n;
            switch (t.type) {
              case "DirectionalLight":
                n = { direction: new to(), color: new bl() };
                break;
              case "SpotLight":
                n = {
                  position: new to(),
                  direction: new to(),
                  color: new bl(),
                  distance: 0,
                  coneCos: 0,
                  penumbraCos: 0,
                  decay: 0
                };
                break;
              case "PointLight":
                n = {
                  position: new to(),
                  color: new bl(),
                  distance: 0,
                  decay: 0
                };
                break;
              case "HemisphereLight":
                n = {
                  direction: new to(),
                  skyColor: new bl(),
                  groundColor: new bl()
                };
                break;
              case "RectAreaLight":
                n = {
                  color: new bl(),
                  position: new to(),
                  halfWidth: new to(),
                  halfHeight: new to()
                };
            }
            return (e[t.id] = n), n;
          }
        };
      }
      var Uc = 0;
      function zc(e, t) {
        return (
          (t.castShadow ? 2 : 0) -
          (e.castShadow ? 2 : 0) +
          (t.map ? 1 : 0) -
          (e.map ? 1 : 0)
        );
      }
      function Vc(e, t) {
        for (
          var n,
            r = new Bc(),
            i =
              ((n = {}),
              {
                get: function (e) {
                  if (void 0 !== n[e.id]) return n[e.id];
                  var t;
                  switch (e.type) {
                    case "DirectionalLight":
                    case "SpotLight":
                      t = {
                        shadowBias: 0,
                        shadowNormalBias: 0,
                        shadowRadius: 1,
                        shadowMapSize: new Cs()
                      };
                      break;
                    case "PointLight":
                      t = {
                        shadowBias: 0,
                        shadowNormalBias: 0,
                        shadowRadius: 1,
                        shadowMapSize: new Cs(),
                        shadowCameraNear: 1,
                        shadowCameraFar: 1e3
                      };
                  }
                  return (n[e.id] = t), t;
                }
              }),
            a = {
              version: 0,
              hash: {
                directionalLength: -1,
                pointLength: -1,
                spotLength: -1,
                rectAreaLength: -1,
                hemiLength: -1,
                numDirectionalShadows: -1,
                numPointShadows: -1,
                numSpotShadows: -1,
                numSpotMaps: -1,
                numLightProbes: -1
              },
              ambient: [0, 0, 0],
              probe: [],
              directional: [],
              directionalShadow: [],
              directionalShadowMap: [],
              directionalShadowMatrix: [],
              spot: [],
              spotLightMap: [],
              spotShadow: [],
              spotShadowMap: [],
              spotLightMatrix: [],
              rectArea: [],
              rectAreaLTC1: null,
              rectAreaLTC2: null,
              point: [],
              pointShadow: [],
              pointShadowMap: [],
              pointShadowMatrix: [],
              hemi: [],
              numSpotLightShadowsWithMaps: 0,
              numLightProbes: 0
            },
            s = 0;
          s < 9;
          s++
        )
          a.probe.push(new to());
        var o = new to(),
          l = new Do(),
          h = new Do();
        return {
          setup: function (n, s) {
            for (var o = 0, l = 0, h = 0, u = 0; u < 9; u++)
              a.probe[u].set(0, 0, 0);
            var c = 0,
              d = 0,
              f = 0,
              p = 0,
              m = 0,
              g = 0,
              v = 0,
              y = 0,
              _ = 0,
              b = 0,
              x = 0;
            n.sort(zc);
            for (
              var S = !0 === s ? Math.PI : 1, E = 0, w = n.length;
              E < w;
              E++
            ) {
              var T = n[E],
                M = T.color,
                A = T.intensity,
                C = T.distance,
                P = T.shadow && T.shadow.map ? T.shadow.map.texture : null;
              if (T.isAmbientLight)
                (o += M.r * A * S), (l += M.g * A * S), (h += M.b * A * S);
              else if (T.isLightProbe) {
                for (var k = 0; k < 9; k++)
                  a.probe[k].addScaledVector(T.sh.coefficients[k], A);
                x++;
              } else if (T.isDirectionalLight) {
                var R = r.get(T);
                if (
                  (R.color.copy(T.color).multiplyScalar(T.intensity * S),
                  T.castShadow)
                ) {
                  var D = T.shadow,
                    I = i.get(T);
                  (I.shadowBias = D.bias),
                    (I.shadowNormalBias = D.normalBias),
                    (I.shadowRadius = D.radius),
                    (I.shadowMapSize = D.mapSize),
                    (a.directionalShadow[c] = I),
                    (a.directionalShadowMap[c] = P),
                    (a.directionalShadowMatrix[c] = T.shadow.matrix),
                    g++;
                }
                (a.directional[c] = R), c++;
              } else if (T.isSpotLight) {
                var L = r.get(T);
                L.position.setFromMatrixPosition(T.matrixWorld),
                  L.color.copy(M).multiplyScalar(A * S),
                  (L.distance = C),
                  (L.coneCos = Math.cos(T.angle)),
                  (L.penumbraCos = Math.cos(T.angle * (1 - T.penumbra))),
                  (L.decay = T.decay),
                  (a.spot[f] = L);
                var F = T.shadow;
                if (
                  (T.map &&
                    ((a.spotLightMap[_] = T.map),
                    _++,
                    F.updateMatrices(T),
                    T.castShadow && b++),
                  (a.spotLightMatrix[f] = F.matrix),
                  T.castShadow)
                ) {
                  var O = i.get(T);
                  (O.shadowBias = F.bias),
                    (O.shadowNormalBias = F.normalBias),
                    (O.shadowRadius = F.radius),
                    (O.shadowMapSize = F.mapSize),
                    (a.spotShadow[f] = O),
                    (a.spotShadowMap[f] = P),
                    y++;
                }
                f++;
              } else if (T.isRectAreaLight) {
                var N = r.get(T);
                N.color.copy(M).multiplyScalar(A),
                  N.halfWidth.set(0.5 * T.width, 0, 0),
                  N.halfHeight.set(0, 0.5 * T.height, 0),
                  (a.rectArea[p] = N),
                  p++;
              } else if (T.isPointLight) {
                var B = r.get(T);
                if (
                  (B.color.copy(T.color).multiplyScalar(T.intensity * S),
                  (B.distance = T.distance),
                  (B.decay = T.decay),
                  T.castShadow)
                ) {
                  var U = T.shadow,
                    z = i.get(T);
                  (z.shadowBias = U.bias),
                    (z.shadowNormalBias = U.normalBias),
                    (z.shadowRadius = U.radius),
                    (z.shadowMapSize = U.mapSize),
                    (z.shadowCameraNear = U.camera.near),
                    (z.shadowCameraFar = U.camera.far),
                    (a.pointShadow[d] = z),
                    (a.pointShadowMap[d] = P),
                    (a.pointShadowMatrix[d] = T.shadow.matrix),
                    v++;
                }
                (a.point[d] = B), d++;
              } else if (T.isHemisphereLight) {
                var V = r.get(T);
                V.skyColor.copy(T.color).multiplyScalar(A * S),
                  V.groundColor.copy(T.groundColor).multiplyScalar(A * S),
                  (a.hemi[m] = V),
                  m++;
              }
            }
            p > 0 &&
              (t.isWebGL2
                ? !0 === e.has("OES_texture_float_linear")
                  ? ((a.rectAreaLTC1 = Ah.LTC_FLOAT_1),
                    (a.rectAreaLTC2 = Ah.LTC_FLOAT_2))
                  : ((a.rectAreaLTC1 = Ah.LTC_HALF_1),
                    (a.rectAreaLTC2 = Ah.LTC_HALF_2))
                : !0 === e.has("OES_texture_float_linear")
                ? ((a.rectAreaLTC1 = Ah.LTC_FLOAT_1),
                  (a.rectAreaLTC2 = Ah.LTC_FLOAT_2))
                : !0 === e.has("OES_texture_half_float_linear")
                ? ((a.rectAreaLTC1 = Ah.LTC_HALF_1),
                  (a.rectAreaLTC2 = Ah.LTC_HALF_2))
                : console.error(
                    "THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions."
                  )),
              (a.ambient[0] = o),
              (a.ambient[1] = l),
              (a.ambient[2] = h);
            var H = a.hash;
            (H.directionalLength === c &&
              H.pointLength === d &&
              H.spotLength === f &&
              H.rectAreaLength === p &&
              H.hemiLength === m &&
              H.numDirectionalShadows === g &&
              H.numPointShadows === v &&
              H.numSpotShadows === y &&
              H.numSpotMaps === _ &&
              H.numLightProbes === x) ||
              ((a.directional.length = c),
              (a.spot.length = f),
              (a.rectArea.length = p),
              (a.point.length = d),
              (a.hemi.length = m),
              (a.directionalShadow.length = g),
              (a.directionalShadowMap.length = g),
              (a.pointShadow.length = v),
              (a.pointShadowMap.length = v),
              (a.spotShadow.length = y),
              (a.spotShadowMap.length = y),
              (a.directionalShadowMatrix.length = g),
              (a.pointShadowMatrix.length = v),
              (a.spotLightMatrix.length = y + _ - b),
              (a.spotLightMap.length = _),
              (a.numSpotLightShadowsWithMaps = b),
              (a.numLightProbes = x),
              (H.directionalLength = c),
              (H.pointLength = d),
              (H.spotLength = f),
              (H.rectAreaLength = p),
              (H.hemiLength = m),
              (H.numDirectionalShadows = g),
              (H.numPointShadows = v),
              (H.numSpotShadows = y),
              (H.numSpotMaps = _),
              (H.numLightProbes = x),
              (a.version = Uc++));
          },
          setupView: function (e, t) {
            for (
              var n = 0,
                r = 0,
                i = 0,
                s = 0,
                u = 0,
                c = t.matrixWorldInverse,
                d = 0,
                f = e.length;
              d < f;
              d++
            ) {
              var p = e[d];
              if (p.isDirectionalLight) {
                var m = a.directional[n];
                m.direction.setFromMatrixPosition(p.matrixWorld),
                  o.setFromMatrixPosition(p.target.matrixWorld),
                  m.direction.sub(o),
                  m.direction.transformDirection(c),
                  n++;
              } else if (p.isSpotLight) {
                var g = a.spot[i];
                g.position.setFromMatrixPosition(p.matrixWorld),
                  g.position.applyMatrix4(c),
                  g.direction.setFromMatrixPosition(p.matrixWorld),
                  o.setFromMatrixPosition(p.target.matrixWorld),
                  g.direction.sub(o),
                  g.direction.transformDirection(c),
                  i++;
              } else if (p.isRectAreaLight) {
                var v = a.rectArea[s];
                v.position.setFromMatrixPosition(p.matrixWorld),
                  v.position.applyMatrix4(c),
                  h.identity(),
                  l.copy(p.matrixWorld),
                  l.premultiply(c),
                  h.extractRotation(l),
                  v.halfWidth.set(0.5 * p.width, 0, 0),
                  v.halfHeight.set(0, 0.5 * p.height, 0),
                  v.halfWidth.applyMatrix4(h),
                  v.halfHeight.applyMatrix4(h),
                  s++;
              } else if (p.isPointLight) {
                var y = a.point[r];
                y.position.setFromMatrixPosition(p.matrixWorld),
                  y.position.applyMatrix4(c),
                  r++;
              } else if (p.isHemisphereLight) {
                var _ = a.hemi[u];
                _.direction.setFromMatrixPosition(p.matrixWorld),
                  _.direction.transformDirection(c),
                  u++;
              }
            }
          },
          state: a
        };
      }
      function Hc(e, t) {
        var n = new Vc(e, t),
          r = [],
          i = [];
        return {
          init: function () {
            (r.length = 0), (i.length = 0);
          },
          state: { lightsArray: r, shadowsArray: i, lights: n },
          setupLights: function (e) {
            n.setup(r, e);
          },
          setupLightsView: function (e) {
            n.setupView(r, e);
          },
          pushLight: function (e) {
            r.push(e);
          },
          pushShadow: function (e) {
            i.push(e);
          }
        };
      }
      function Gc(e, t) {
        var n = new WeakMap();
        return {
          get: function (r) {
            var i,
              a =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0,
              s = n.get(r);
            return (
              void 0 === s
                ? ((i = new Hc(e, t)), n.set(r, [i]))
                : a >= s.length
                ? ((i = new Hc(e, t)), s.push(i))
                : (i = s[a]),
              i
            );
          },
          dispose: function () {
            n = new WeakMap();
          }
        };
      }
      var Wc = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isMeshDepthMaterial = !0),
              (n.type = "MeshDepthMaterial"),
              (n.depthPacking = 3200),
              (n.map = null),
              (n.alphaMap = null),
              (n.displacementMap = null),
              (n.displacementScale = 1),
              (n.displacementBias = 0),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.depthPacking = e.depthPacking),
                    (this.map = e.map),
                    (this.alphaMap = e.alphaMap),
                    (this.displacementMap = e.displacementMap),
                    (this.displacementScale = e.displacementScale),
                    (this.displacementBias = e.displacementBias),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(El),
        jc = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isMeshDistanceMaterial = !0),
              (n.type = "MeshDistanceMaterial"),
              (n.map = null),
              (n.alphaMap = null),
              (n.displacementMap = null),
              (n.displacementScale = 1),
              (n.displacementBias = 0),
              n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.map = e.map),
                    (this.alphaMap = e.alphaMap),
                    (this.displacementMap = e.displacementMap),
                    (this.displacementScale = e.displacementScale),
                    (this.displacementBias = e.displacementBias),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(El);
      function Xc(e, t, n) {
        var r = new Sh(),
          i = new Cs(),
          a = new Cs(),
          s = new Zs(),
          o = new Wc({ depthPacking: 3201 }),
          l = new jc(),
          h = {},
          u = n.maxTextureSize,
          c = Di(Di(Di({}, 0, 1), 1, 0), 2, 2),
          d = new hh({
            defines: { VSM_SAMPLES: 8 },
            uniforms: {
              shadow_pass: { value: null },
              resolution: { value: new Cs() },
              radius: { value: 4 }
            },
            vertexShader:
              "void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",
            fragmentShader:
              "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"
          }),
          f = d.clone();
        f.defines.HORIZONTAL_PASS = 1;
        var p = new Bl();
        p.setAttribute(
          "position",
          new Al(new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]), 3)
        );
        var m = new nh(p, d),
          g = this;
        (this.enabled = !1),
          (this.autoUpdate = !0),
          (this.needsUpdate = !1),
          (this.type = 1);
        var v = this.type;
        function y(n, r) {
          var a = t.update(m);
          d.defines.VSM_SAMPLES !== n.blurSamples &&
            ((d.defines.VSM_SAMPLES = n.blurSamples),
            (f.defines.VSM_SAMPLES = n.blurSamples),
            (d.needsUpdate = !0),
            (f.needsUpdate = !0)),
            null === n.mapPass && (n.mapPass = new Js(i.x, i.y)),
            (d.uniforms.shadow_pass.value = n.map.texture),
            (d.uniforms.resolution.value = n.mapSize),
            (d.uniforms.radius.value = n.radius),
            e.setRenderTarget(n.mapPass),
            e.clear(),
            e.renderBufferDirect(r, null, a, d, m, null),
            (f.uniforms.shadow_pass.value = n.mapPass.texture),
            (f.uniforms.resolution.value = n.mapSize),
            (f.uniforms.radius.value = n.radius),
            e.setRenderTarget(n.map),
            e.clear(),
            e.renderBufferDirect(r, null, a, f, m, null);
        }
        function _(t, n, r, i) {
          var a = null,
            s =
              !0 === r.isPointLight
                ? t.customDistanceMaterial
                : t.customDepthMaterial;
          if (void 0 !== s) a = s;
          else if (
            ((a = !0 === r.isPointLight ? l : o),
            (e.localClippingEnabled &&
              !0 === n.clipShadows &&
              Array.isArray(n.clippingPlanes) &&
              0 !== n.clippingPlanes.length) ||
              (n.displacementMap && 0 !== n.displacementScale) ||
              (n.alphaMap && n.alphaTest > 0) ||
              (n.map && n.alphaTest > 0))
          ) {
            var u = a.uuid,
              d = n.uuid,
              f = h[u];
            void 0 === f && ((f = {}), (h[u] = f));
            var p = f[d];
            void 0 === p &&
              ((p = a.clone()), (f[d] = p), n.addEventListener("dispose", x)),
              (a = p);
          }
          return (
            (a.visible = n.visible),
            (a.wireframe = n.wireframe),
            (a.side =
              3 === i
                ? null !== n.shadowSide
                  ? n.shadowSide
                  : n.side
                : null !== n.shadowSide
                ? n.shadowSide
                : c[n.side]),
            (a.alphaMap = n.alphaMap),
            (a.alphaTest = n.alphaTest),
            (a.map = n.map),
            (a.clipShadows = n.clipShadows),
            (a.clippingPlanes = n.clippingPlanes),
            (a.clipIntersection = n.clipIntersection),
            (a.displacementMap = n.displacementMap),
            (a.displacementScale = n.displacementScale),
            (a.displacementBias = n.displacementBias),
            (a.wireframeLinewidth = n.wireframeLinewidth),
            (a.linewidth = n.linewidth),
            !0 === r.isPointLight &&
              !0 === a.isMeshDistanceMaterial &&
              (e.properties.get(a).light = r),
            a
          );
        }
        function b(n, i, a, s, o) {
          if (!1 !== n.visible) {
            if (
              n.layers.test(i.layers) &&
              (n.isMesh || n.isLine || n.isPoints) &&
              (n.castShadow || (n.receiveShadow && 3 === o)) &&
              (!n.frustumCulled || r.intersectsObject(n))
            ) {
              n.modelViewMatrix.multiplyMatrices(
                a.matrixWorldInverse,
                n.matrixWorld
              );
              var l = t.update(n),
                h = n.material;
              if (Array.isArray(h))
                for (var u = l.groups, c = 0, d = u.length; c < d; c++) {
                  var f = u[c],
                    p = h[f.materialIndex];
                  if (p && p.visible) {
                    var m = _(n, p, s, o);
                    n.onBeforeShadow(e, n, i, a, l, m, f),
                      e.renderBufferDirect(a, null, l, m, n, f),
                      n.onAfterShadow(e, n, i, a, l, m, f);
                  }
                }
              else if (h.visible) {
                var g = _(n, h, s, o);
                n.onBeforeShadow(e, n, i, a, l, g, null),
                  e.renderBufferDirect(a, null, l, g, n, null),
                  n.onAfterShadow(e, n, i, a, l, g, null);
              }
            }
            for (var v = n.children, y = 0, x = v.length; y < x; y++)
              b(v[y], i, a, s, o);
          }
        }
        function x(e) {
          var t = e.target;
          for (var n in (t.removeEventListener("dispose", x), h)) {
            var r = h[n],
              i = e.target.uuid;
            i in r && (r[i].dispose(), delete r[i]);
          }
        }
        this.render = function (t, n, o) {
          if (
            !1 !== g.enabled &&
            (!1 !== g.autoUpdate || !1 !== g.needsUpdate) &&
            0 !== t.length
          ) {
            var l = e.getRenderTarget(),
              h = e.getActiveCubeFace(),
              c = e.getActiveMipmapLevel(),
              d = e.state;
            d.setBlending(0),
              d.buffers.color.setClear(1, 1, 1, 1),
              d.buffers.depth.setTest(!0),
              d.setScissorTest(!1);
            for (
              var f = 3 !== v && 3 === this.type,
                p = 3 === v && 3 !== this.type,
                m = 0,
                _ = t.length;
              m < _;
              m++
            ) {
              var x = t[m],
                S = x.shadow;
              if (void 0 !== S) {
                if (!1 !== S.autoUpdate || !1 !== S.needsUpdate) {
                  i.copy(S.mapSize);
                  var E = S.getFrameExtents();
                  if (
                    (i.multiply(E),
                    a.copy(S.mapSize),
                    (i.x > u || i.y > u) &&
                      (i.x > u &&
                        ((a.x = Math.floor(u / E.x)),
                        (i.x = a.x * E.x),
                        (S.mapSize.x = a.x)),
                      i.y > u &&
                        ((a.y = Math.floor(u / E.y)),
                        (i.y = a.y * E.y),
                        (S.mapSize.y = a.y))),
                    null === S.map || !0 === f || !0 === p)
                  ) {
                    var w =
                      3 !== this.type ? { minFilter: Yi, magFilter: Yi } : {};
                    null !== S.map && S.map.dispose(),
                      (S.map = new Js(i.x, i.y, w)),
                      (S.map.texture.name = x.name + ".shadowMap"),
                      S.camera.updateProjectionMatrix();
                  }
                  e.setRenderTarget(S.map), e.clear();
                  for (var T = S.getViewportCount(), M = 0; M < T; M++) {
                    var A = S.getViewport(M);
                    s.set(a.x * A.x, a.y * A.y, a.x * A.z, a.y * A.w),
                      d.viewport(s),
                      S.updateMatrices(x, M),
                      (r = S.getFrustum()),
                      b(n, o, S.camera, x, this.type);
                  }
                  !0 !== S.isPointLightShadow && 3 === this.type && y(S, o),
                    (S.needsUpdate = !1);
                }
              } else console.warn("THREE.WebGLShadowMap:", x, "has no shadow.");
            }
            (v = this.type), (g.needsUpdate = !1), e.setRenderTarget(l, h, c);
          }
        };
      }
      function qc(e, t, n) {
        var r,
          i = n.isWebGL2,
          a = new (function () {
            var t = !1,
              n = new Zs(),
              r = null,
              i = new Zs(0, 0, 0, 0);
            return {
              setMask: function (n) {
                r === n || t || (e.colorMask(n, n, n, n), (r = n));
              },
              setLocked: function (e) {
                t = e;
              },
              setClear: function (t, r, a, s, o) {
                !0 === o && ((t *= s), (r *= s), (a *= s)),
                  n.set(t, r, a, s),
                  !1 === i.equals(n) && (e.clearColor(t, r, a, s), i.copy(n));
              },
              reset: function () {
                (t = !1), (r = null), i.set(-1, 0, 0, 0);
              }
            };
          })(),
          s = new (function () {
            var t = !1,
              n = null,
              r = null,
              i = null;
            return {
              setTest: function (t) {
                t ? G(e.DEPTH_TEST) : W(e.DEPTH_TEST);
              },
              setMask: function (r) {
                n === r || t || (e.depthMask(r), (n = r));
              },
              setFunc: function (t) {
                if (r !== t) {
                  switch (t) {
                    case 0:
                      e.depthFunc(e.NEVER);
                      break;
                    case 1:
                      e.depthFunc(e.ALWAYS);
                      break;
                    case 2:
                      e.depthFunc(e.LESS);
                      break;
                    case 3:
                    default:
                      e.depthFunc(e.LEQUAL);
                      break;
                    case 4:
                      e.depthFunc(e.EQUAL);
                      break;
                    case 5:
                      e.depthFunc(e.GEQUAL);
                      break;
                    case 6:
                      e.depthFunc(e.GREATER);
                      break;
                    case 7:
                      e.depthFunc(e.NOTEQUAL);
                  }
                  r = t;
                }
              },
              setLocked: function (e) {
                t = e;
              },
              setClear: function (t) {
                i !== t && (e.clearDepth(t), (i = t));
              },
              reset: function () {
                (t = !1), (n = null), (r = null), (i = null);
              }
            };
          })(),
          o = new (function () {
            var t = !1,
              n = null,
              r = null,
              i = null,
              a = null,
              s = null,
              o = null,
              l = null,
              h = null;
            return {
              setTest: function (n) {
                t || (n ? G(e.STENCIL_TEST) : W(e.STENCIL_TEST));
              },
              setMask: function (r) {
                n === r || t || (e.stencilMask(r), (n = r));
              },
              setFunc: function (t, n, s) {
                (r === t && i === n && a === s) ||
                  (e.stencilFunc(t, n, s), (r = t), (i = n), (a = s));
              },
              setOp: function (t, n, r) {
                (s === t && o === n && l === r) ||
                  (e.stencilOp(t, n, r), (s = t), (o = n), (l = r));
              },
              setLocked: function (e) {
                t = e;
              },
              setClear: function (t) {
                h !== t && (e.clearStencil(t), (h = t));
              },
              reset: function () {
                (t = !1),
                  (n = null),
                  (r = null),
                  (i = null),
                  (a = null),
                  (s = null),
                  (o = null),
                  (l = null),
                  (h = null);
              }
            };
          })(),
          l = new WeakMap(),
          h = new WeakMap(),
          u = {},
          c = {},
          d = new WeakMap(),
          f = [],
          p = null,
          m = !1,
          g = null,
          v = null,
          y = null,
          _ = null,
          b = null,
          x = null,
          S = null,
          E = new bl(0, 0, 0),
          w = 0,
          T = !1,
          M = null,
          A = null,
          C = null,
          P = null,
          k = null,
          R = e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
          D = !1,
          I = 0,
          L = e.getParameter(e.VERSION);
        -1 !== L.indexOf("WebGL")
          ? ((I = parseFloat(/^WebGL (\d)/.exec(L)[1])), (D = I >= 1))
          : -1 !== L.indexOf("OpenGL ES") &&
            ((I = parseFloat(/^OpenGL ES (\d)/.exec(L)[1])), (D = I >= 2));
        var F = null,
          O = {},
          N = e.getParameter(e.SCISSOR_BOX),
          B = e.getParameter(e.VIEWPORT),
          U = new Zs().fromArray(N),
          z = new Zs().fromArray(B);
        function V(t, n, r, a) {
          var s = new Uint8Array(4),
            o = e.createTexture();
          e.bindTexture(t, o),
            e.texParameteri(t, e.TEXTURE_MIN_FILTER, e.NEAREST),
            e.texParameteri(t, e.TEXTURE_MAG_FILTER, e.NEAREST);
          for (var l = 0; l < r; l++)
            !i || (t !== e.TEXTURE_3D && t !== e.TEXTURE_2D_ARRAY)
              ? e.texImage2D(
                  n + l,
                  0,
                  e.RGBA,
                  1,
                  1,
                  0,
                  e.RGBA,
                  e.UNSIGNED_BYTE,
                  s
                )
              : e.texImage3D(
                  n,
                  0,
                  e.RGBA,
                  1,
                  1,
                  a,
                  0,
                  e.RGBA,
                  e.UNSIGNED_BYTE,
                  s
                );
          return o;
        }
        var H = {};
        function G(t) {
          !0 !== u[t] && (e.enable(t), (u[t] = !0));
        }
        function W(t) {
          !1 !== u[t] && (e.disable(t), (u[t] = !1));
        }
        (H[e.TEXTURE_2D] = V(e.TEXTURE_2D, e.TEXTURE_2D, 1)),
          (H[e.TEXTURE_CUBE_MAP] = V(
            e.TEXTURE_CUBE_MAP,
            e.TEXTURE_CUBE_MAP_POSITIVE_X,
            6
          )),
          i &&
            ((H[e.TEXTURE_2D_ARRAY] = V(
              e.TEXTURE_2D_ARRAY,
              e.TEXTURE_2D_ARRAY,
              1,
              1
            )),
            (H[e.TEXTURE_3D] = V(e.TEXTURE_3D, e.TEXTURE_3D, 1, 1))),
          a.setClear(0, 0, 0, 1),
          s.setClear(1),
          o.setClear(0),
          G(e.DEPTH_TEST),
          s.setFunc(3),
          K(!1),
          Z(1),
          G(e.CULL_FACE),
          Y(0);
        var j = Di(
          Di(Di({}, zi, e.FUNC_ADD), 101, e.FUNC_SUBTRACT),
          102,
          e.FUNC_REVERSE_SUBTRACT
        );
        if (i) (j[103] = e.MIN), (j[104] = e.MAX);
        else {
          var X = t.get("EXT_blend_minmax");
          null !== X && ((j[103] = X.MIN_EXT), (j[104] = X.MAX_EXT));
        }
        var q =
          (Di(
            Di(
              Di(
                Di(
                  Di(
                    Di(
                      Di(
                        Di(
                          Di(Di((r = {}), 200, e.ZERO), 201, e.ONE),
                          202,
                          e.SRC_COLOR
                        ),
                        204,
                        e.SRC_ALPHA
                      ),
                      210,
                      e.SRC_ALPHA_SATURATE
                    ),
                    208,
                    e.DST_COLOR
                  ),
                  206,
                  e.DST_ALPHA
                ),
                203,
                e.ONE_MINUS_SRC_COLOR
              ),
              205,
              e.ONE_MINUS_SRC_ALPHA
            ),
            209,
            e.ONE_MINUS_DST_COLOR
          ),
          Di(
            Di(
              Di(
                Di(Di(r, 207, e.ONE_MINUS_DST_ALPHA), 211, e.CONSTANT_COLOR),
                212,
                e.ONE_MINUS_CONSTANT_COLOR
              ),
              213,
              e.CONSTANT_ALPHA
            ),
            214,
            e.ONE_MINUS_CONSTANT_ALPHA
          ));
        function Y(t, n, r, i, a, s, o, l, h, u) {
          if (0 !== t) {
            if ((!1 === m && (G(e.BLEND), (m = !0)), 5 === t))
              (a = a || n),
                (s = s || r),
                (o = o || i),
                (n === v && a === b) ||
                  (e.blendEquationSeparate(j[n], j[a]), (v = n), (b = a)),
                (r === y && i === _ && s === x && o === S) ||
                  (e.blendFuncSeparate(q[r], q[i], q[s], q[o]),
                  (y = r),
                  (_ = i),
                  (x = s),
                  (S = o)),
                (!1 !== l.equals(E) && h === w) ||
                  (e.blendColor(l.r, l.g, l.b, h), E.copy(l), (w = h)),
                (g = t),
                (T = !1);
            else if (t !== g || u !== T) {
              if (
                ((v === zi && b === zi) ||
                  (e.blendEquation(e.FUNC_ADD), (v = zi), (b = zi)),
                u)
              )
                switch (t) {
                  case 1:
                    e.blendFuncSeparate(
                      e.ONE,
                      e.ONE_MINUS_SRC_ALPHA,
                      e.ONE,
                      e.ONE_MINUS_SRC_ALPHA
                    );
                    break;
                  case 2:
                    e.blendFunc(e.ONE, e.ONE);
                    break;
                  case 3:
                    e.blendFuncSeparate(
                      e.ZERO,
                      e.ONE_MINUS_SRC_COLOR,
                      e.ZERO,
                      e.ONE
                    );
                    break;
                  case 4:
                    e.blendFuncSeparate(e.ZERO, e.SRC_COLOR, e.ZERO, e.SRC_ALPHA);
                    break;
                  default:
                    console.error("THREE.WebGLState: Invalid blending: ", t);
                }
              else
                switch (t) {
                  case 1:
                    e.blendFuncSeparate(
                      e.SRC_ALPHA,
                      e.ONE_MINUS_SRC_ALPHA,
                      e.ONE,
                      e.ONE_MINUS_SRC_ALPHA
                    );
                    break;
                  case 2:
                    e.blendFunc(e.SRC_ALPHA, e.ONE);
                    break;
                  case 3:
                    e.blendFuncSeparate(
                      e.ZERO,
                      e.ONE_MINUS_SRC_COLOR,
                      e.ZERO,
                      e.ONE
                    );
                    break;
                  case 4:
                    e.blendFunc(e.ZERO, e.SRC_COLOR);
                    break;
                  default:
                    console.error("THREE.WebGLState: Invalid blending: ", t);
                }
              (y = null),
                (_ = null),
                (x = null),
                (S = null),
                E.set(0, 0, 0),
                (w = 0),
                (g = t),
                (T = u);
            }
          } else !0 === m && (W(e.BLEND), (m = !1));
        }
        function K(t) {
          M !== t && (t ? e.frontFace(e.CW) : e.frontFace(e.CCW), (M = t));
        }
        function Z(t) {
          0 !== t
            ? (G(e.CULL_FACE),
              t !== A &&
                (1 === t
                  ? e.cullFace(e.BACK)
                  : 2 === t
                  ? e.cullFace(e.FRONT)
                  : e.cullFace(e.FRONT_AND_BACK)))
            : W(e.CULL_FACE),
            (A = t);
        }
        function J(t, n, r) {
          t
            ? (G(e.POLYGON_OFFSET_FILL),
              (P === n && k === r) || (e.polygonOffset(n, r), (P = n), (k = r)))
            : W(e.POLYGON_OFFSET_FILL);
        }
        return {
          buffers: { color: a, depth: s, stencil: o },
          enable: G,
          disable: W,
          bindFramebuffer: function (t, n) {
            return (
              c[t] !== n &&
              (e.bindFramebuffer(t, n),
              (c[t] = n),
              i &&
                (t === e.DRAW_FRAMEBUFFER && (c[e.FRAMEBUFFER] = n),
                t === e.FRAMEBUFFER && (c[e.DRAW_FRAMEBUFFER] = n)),
              !0)
            );
          },
          drawBuffers: function (r, i) {
            var a = f,
              s = !1;
            if (r) {
              if (
                (void 0 === (a = d.get(i)) && ((a = []), d.set(i, a)),
                r.isWebGLMultipleRenderTargets)
              ) {
                var o = r.texture;
                if (a.length !== o.length || a[0] !== e.COLOR_ATTACHMENT0) {
                  for (var l = 0, h = o.length; l < h; l++)
                    a[l] = e.COLOR_ATTACHMENT0 + l;
                  (a.length = o.length), (s = !0);
                }
              } else
                a[0] !== e.COLOR_ATTACHMENT0 &&
                  ((a[0] = e.COLOR_ATTACHMENT0), (s = !0));
            } else a[0] !== e.BACK && ((a[0] = e.BACK), (s = !0));
            s &&
              (n.isWebGL2
                ? e.drawBuffers(a)
                : t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a));
          },
          useProgram: function (t) {
            return p !== t && (e.useProgram(t), (p = t), !0);
          },
          setBlending: Y,
          setMaterial: function (t, n) {
            2 === t.side ? W(e.CULL_FACE) : G(e.CULL_FACE);
            var r = 1 === t.side;
            n && (r = !r),
              K(r),
              1 === t.blending && !1 === t.transparent
                ? Y(0)
                : Y(
                    t.blending,
                    t.blendEquation,
                    t.blendSrc,
                    t.blendDst,
                    t.blendEquationAlpha,
                    t.blendSrcAlpha,
                    t.blendDstAlpha,
                    t.blendColor,
                    t.blendAlpha,
                    t.premultipliedAlpha
                  ),
              s.setFunc(t.depthFunc),
              s.setTest(t.depthTest),
              s.setMask(t.depthWrite),
              a.setMask(t.colorWrite);
            var i = t.stencilWrite;
            o.setTest(i),
              i &&
                (o.setMask(t.stencilWriteMask),
                o.setFunc(t.stencilFunc, t.stencilRef, t.stencilFuncMask),
                o.setOp(t.stencilFail, t.stencilZFail, t.stencilZPass)),
              J(t.polygonOffset, t.polygonOffsetFactor, t.polygonOffsetUnits),
              !0 === t.alphaToCoverage
                ? G(e.SAMPLE_ALPHA_TO_COVERAGE)
                : W(e.SAMPLE_ALPHA_TO_COVERAGE);
          },
          setFlipSided: K,
          setCullFace: Z,
          setLineWidth: function (t) {
            t !== C && (D && e.lineWidth(t), (C = t));
          },
          setPolygonOffset: J,
          setScissorTest: function (t) {
            t ? G(e.SCISSOR_TEST) : W(e.SCISSOR_TEST);
          },
          activeTexture: function (t) {
            void 0 === t && (t = e.TEXTURE0 + R - 1),
              F !== t && (e.activeTexture(t), (F = t));
          },
          bindTexture: function (t, n, r) {
            void 0 === r && (r = null === F ? e.TEXTURE0 + R - 1 : F);
            var i = O[r];
            void 0 === i && ((i = { type: void 0, texture: void 0 }), (O[r] = i)),
              (i.type === t && i.texture === n) ||
                (F !== r && (e.activeTexture(r), (F = r)),
                e.bindTexture(t, n || H[t]),
                (i.type = t),
                (i.texture = n));
          },
          unbindTexture: function () {
            var t = O[F];
            void 0 !== t &&
              void 0 !== t.type &&
              (e.bindTexture(t.type, null),
              (t.type = void 0),
              (t.texture = void 0));
          },
          compressedTexImage2D: function () {
            try {
              e.compressedTexImage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          compressedTexImage3D: function () {
            try {
              e.compressedTexImage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texImage2D: function () {
            try {
              e.texImage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texImage3D: function () {
            try {
              e.texImage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          updateUBOMapping: function (t, n) {
            var r = h.get(n);
            void 0 === r && ((r = new WeakMap()), h.set(n, r));
            var i = r.get(t);
            void 0 === i &&
              ((i = e.getUniformBlockIndex(n, t.name)), r.set(t, i));
          },
          uniformBlockBinding: function (t, n) {
            var r = h.get(n).get(t);
            l.get(n) !== r &&
              (e.uniformBlockBinding(n, r, t.__bindingPointIndex), l.set(n, r));
          },
          texStorage2D: function () {
            try {
              e.texStorage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texStorage3D: function () {
            try {
              e.texStorage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texSubImage2D: function () {
            try {
              e.texSubImage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          texSubImage3D: function () {
            try {
              e.texSubImage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          compressedTexSubImage2D: function () {
            try {
              e.compressedTexSubImage2D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          compressedTexSubImage3D: function () {
            try {
              e.compressedTexSubImage3D.apply(e, arguments);
            } catch (e) {
              console.error("THREE.WebGLState:", e);
            }
          },
          scissor: function (t) {
            !1 === U.equals(t) && (e.scissor(t.x, t.y, t.z, t.w), U.copy(t));
          },
          viewport: function (t) {
            !1 === z.equals(t) && (e.viewport(t.x, t.y, t.z, t.w), z.copy(t));
          },
          reset: function () {
            e.disable(e.BLEND),
              e.disable(e.CULL_FACE),
              e.disable(e.DEPTH_TEST),
              e.disable(e.POLYGON_OFFSET_FILL),
              e.disable(e.SCISSOR_TEST),
              e.disable(e.STENCIL_TEST),
              e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),
              e.blendEquation(e.FUNC_ADD),
              e.blendFunc(e.ONE, e.ZERO),
              e.blendFuncSeparate(e.ONE, e.ZERO, e.ONE, e.ZERO),
              e.blendColor(0, 0, 0, 0),
              e.colorMask(!0, !0, !0, !0),
              e.clearColor(0, 0, 0, 0),
              e.depthMask(!0),
              e.depthFunc(e.LESS),
              e.clearDepth(1),
              e.stencilMask(4294967295),
              e.stencilFunc(e.ALWAYS, 0, 4294967295),
              e.stencilOp(e.KEEP, e.KEEP, e.KEEP),
              e.clearStencil(0),
              e.cullFace(e.BACK),
              e.frontFace(e.CCW),
              e.polygonOffset(0, 0),
              e.activeTexture(e.TEXTURE0),
              e.bindFramebuffer(e.FRAMEBUFFER, null),
              !0 === i &&
                (e.bindFramebuffer(e.DRAW_FRAMEBUFFER, null),
                e.bindFramebuffer(e.READ_FRAMEBUFFER, null)),
              e.useProgram(null),
              e.lineWidth(1),
              e.scissor(0, 0, e.canvas.width, e.canvas.height),
              e.viewport(0, 0, e.canvas.width, e.canvas.height),
              (u = {}),
              (F = null),
              (O = {}),
              (c = {}),
              (d = new WeakMap()),
              (f = []),
              (p = null),
              (m = !1),
              (g = null),
              (v = null),
              (y = null),
              (_ = null),
              (b = null),
              (x = null),
              (S = null),
              (E = new bl(0, 0, 0)),
              (w = 0),
              (T = !1),
              (M = null),
              (A = null),
              (C = null),
              (P = null),
              (k = null),
              U.set(0, 0, e.canvas.width, e.canvas.height),
              z.set(0, 0, e.canvas.width, e.canvas.height),
              a.reset(),
              s.reset(),
              o.reset();
          }
        };
      }
      function Yc(e, t, n, r, i, a, s) {
        var o,
          l = i.isWebGL2,
          h = t.has("WEBGL_multisampled_render_to_texture")
            ? t.get("WEBGL_multisampled_render_to_texture")
            : null,
          u =
            "undefined" != typeof navigator &&
            /OculusBrowser/g.test(navigator.userAgent),
          c = new WeakMap(),
          d = new WeakMap(),
          f = !1;
        try {
          f =
            "undefined" != typeof OffscreenCanvas &&
            null !== new OffscreenCanvas(1, 1).getContext("2d");
        } catch (e) {}
        function p(e, t) {
          return f ? new OffscreenCanvas(e, t) : Ds("canvas");
        }
        function m(e, t, n, r) {
          var i = 1;
          if (
            ((e.width > r || e.height > r) &&
              (i = r / Math.max(e.width, e.height)),
            i < 1 || !0 === t)
          ) {
            if (
              ("undefined" != typeof HTMLImageElement &&
                e instanceof HTMLImageElement) ||
              ("undefined" != typeof HTMLCanvasElement &&
                e instanceof HTMLCanvasElement) ||
              ("undefined" != typeof ImageBitmap && e instanceof ImageBitmap)
            ) {
              var a = t ? Es : Math.floor,
                s = a(i * e.width),
                l = a(i * e.height);
              void 0 === o && (o = p(s, l));
              var h = n ? p(s, l) : o;
              return (
                (h.width = s),
                (h.height = l),
                h.getContext("2d").drawImage(e, 0, 0, s, l),
                console.warn(
                  "THREE.WebGLRenderer: Texture has been resized from (" +
                    e.width +
                    "x" +
                    e.height +
                    ") to (" +
                    s +
                    "x" +
                    l +
                    ")."
                ),
                h
              );
            }
            return (
              "data" in e &&
                console.warn(
                  "THREE.WebGLRenderer: Image in DataTexture is too big (" +
                    e.width +
                    "x" +
                    e.height +
                    ")."
                ),
              e
            );
          }
          return e;
        }
        function g(e) {
          return Ss(e.width) && Ss(e.height);
        }
        function v(e, t) {
          return (
            e.generateMipmaps && t && e.minFilter !== Yi && e.minFilter !== Ji
          );
        }
        function y(t) {
          e.generateMipmap(t);
        }
        function _(n, r, i, a) {
          var s = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
          if (!1 === l) return r;
          if (null !== n) {
            if (void 0 !== e[n]) return e[n];
            console.warn(
              "THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" +
                n +
                "'"
            );
          }
          var o = r;
          if (
            (r === e.RED &&
              (i === e.FLOAT && (o = e.R32F),
              i === e.HALF_FLOAT && (o = e.R16F),
              i === e.UNSIGNED_BYTE && (o = e.R8)),
            r === e.RED_INTEGER &&
              (i === e.UNSIGNED_BYTE && (o = e.R8UI),
              i === e.UNSIGNED_SHORT && (o = e.R16UI),
              i === e.UNSIGNED_INT && (o = e.R32UI),
              i === e.BYTE && (o = e.R8I),
              i === e.SHORT && (o = e.R16I),
              i === e.INT && (o = e.R32I)),
            r === e.RG &&
              (i === e.FLOAT && (o = e.RG32F),
              i === e.HALF_FLOAT && (o = e.RG16F),
              i === e.UNSIGNED_BYTE && (o = e.RG8)),
            r === e.RGBA)
          ) {
            var h = s ? is : Vs.getTransfer(a);
            i === e.FLOAT && (o = e.RGBA32F),
              i === e.HALF_FLOAT && (o = e.RGBA16F),
              i === e.UNSIGNED_BYTE && (o = h === as ? e.SRGB8_ALPHA8 : e.RGBA8),
              i === e.UNSIGNED_SHORT_4_4_4_4 && (o = e.RGBA4),
              i === e.UNSIGNED_SHORT_5_5_5_1 && (o = e.RGB5_A1);
          }
          return (
            (o !== e.R16F &&
              o !== e.R32F &&
              o !== e.RG16F &&
              o !== e.RG32F &&
              o !== e.RGBA16F &&
              o !== e.RGBA32F) ||
              t.get("EXT_color_buffer_float"),
            o
          );
        }
        function b(e, t, n) {
          return !0 === v(e, n) ||
            (e.isFramebufferTexture && e.minFilter !== Yi && e.minFilter !== Ji)
            ? Math.log2(Math.max(t.width, t.height)) + 1
            : void 0 !== e.mipmaps && e.mipmaps.length > 0
            ? e.mipmaps.length
            : e.isCompressedTexture && Array.isArray(e.image)
            ? t.mipmaps.length
            : 1;
        }
        function x(t) {
          return t === Yi || t === Ki || t === Zi ? e.NEAREST : e.LINEAR;
        }
        function S(e) {
          var t = e.target;
          t.removeEventListener("dispose", S),
            (function (e) {
              var t = r.get(e);
              if (void 0 !== t.__webglInit) {
                var n = e.source,
                  i = d.get(n);
                if (i) {
                  var a = i[t.__cacheKey];
                  a.usedTimes--,
                    0 === a.usedTimes && w(e),
                    0 === Object.keys(i).length && d.delete(n);
                }
                r.remove(e);
              }
            })(t),
            t.isVideoTexture && c.delete(t);
        }
        function E(t) {
          var n = t.target;
          n.removeEventListener("dispose", E),
            (function (t) {
              var n = t.texture,
                i = r.get(t),
                a = r.get(n);
              if (
                (void 0 !== a.__webglTexture &&
                  (e.deleteTexture(a.__webglTexture), s.memory.textures--),
                t.depthTexture && t.depthTexture.dispose(),
                t.isWebGLCubeRenderTarget)
              )
                for (var o = 0; o < 6; o++) {
                  if (Array.isArray(i.__webglFramebuffer[o]))
                    for (var l = 0; l < i.__webglFramebuffer[o].length; l++)
                      e.deleteFramebuffer(i.__webglFramebuffer[o][l]);
                  else e.deleteFramebuffer(i.__webglFramebuffer[o]);
                  i.__webglDepthbuffer &&
                    e.deleteRenderbuffer(i.__webglDepthbuffer[o]);
                }
              else {
                if (Array.isArray(i.__webglFramebuffer))
                  for (var h = 0; h < i.__webglFramebuffer.length; h++)
                    e.deleteFramebuffer(i.__webglFramebuffer[h]);
                else e.deleteFramebuffer(i.__webglFramebuffer);
                if (
                  (i.__webglDepthbuffer &&
                    e.deleteRenderbuffer(i.__webglDepthbuffer),
                  i.__webglMultisampledFramebuffer &&
                    e.deleteFramebuffer(i.__webglMultisampledFramebuffer),
                  i.__webglColorRenderbuffer)
                )
                  for (var u = 0; u < i.__webglColorRenderbuffer.length; u++)
                    i.__webglColorRenderbuffer[u] &&
                      e.deleteRenderbuffer(i.__webglColorRenderbuffer[u]);
                i.__webglDepthRenderbuffer &&
                  e.deleteRenderbuffer(i.__webglDepthRenderbuffer);
              }
              if (t.isWebGLMultipleRenderTargets)
                for (var c = 0, d = n.length; c < d; c++) {
                  var f = r.get(n[c]);
                  f.__webglTexture &&
                    (e.deleteTexture(f.__webglTexture), s.memory.textures--),
                    r.remove(n[c]);
                }
              r.remove(n), r.remove(t);
            })(n);
        }
        function w(t) {
          var n = r.get(t);
          e.deleteTexture(n.__webglTexture);
          var i = t.source;
          delete d.get(i)[n.__cacheKey], s.memory.textures--;
        }
        var T = 0;
        function M(t, i) {
          var a = r.get(t);
          if (
            (t.isVideoTexture &&
              (function (e) {
                var t = s.render.frame;
                c.get(e) !== t && (c.set(e, t), e.update());
              })(t),
            !1 === t.isRenderTargetTexture &&
              t.version > 0 &&
              a.__version !== t.version)
          ) {
            var o = t.image;
            if (null === o)
              console.warn(
                "THREE.WebGLRenderer: Texture marked for update but no image data found."
              );
            else {
              if (!1 !== o.complete) return void D(a, t, i);
              console.warn(
                "THREE.WebGLRenderer: Texture marked for update but image is incomplete"
              );
            }
          }
          n.bindTexture(e.TEXTURE_2D, a.__webglTexture, e.TEXTURE0 + i);
        }
        var A = Di(
            Di(Di({}, ji, e.REPEAT), Xi, e.CLAMP_TO_EDGE),
            qi,
            e.MIRRORED_REPEAT
          ),
          C = Di(
            Di(
              Di(
                Di(
                  Di(Di({}, Yi, e.NEAREST), Ki, e.NEAREST_MIPMAP_NEAREST),
                  Zi,
                  e.NEAREST_MIPMAP_LINEAR
                ),
                Ji,
                e.LINEAR
              ),
              1007,
              e.LINEAR_MIPMAP_NEAREST
            ),
            $i,
            e.LINEAR_MIPMAP_LINEAR
          ),
          P = Di(
            Di(
              Di(
                Di(
                  Di(
                    Di(Di(Di({}, 512, e.NEVER), 519, e.ALWAYS), 513, e.LESS),
                    515,
                    e.LEQUAL
                  ),
                  514,
                  e.EQUAL
                ),
                518,
                e.GEQUAL
              ),
              516,
              e.GREATER
            ),
            517,
            e.NOTEQUAL
          );
        function k(n, a, s) {
          if (
            (s
              ? (e.texParameteri(n, e.TEXTURE_WRAP_S, A[a.wrapS]),
                e.texParameteri(n, e.TEXTURE_WRAP_T, A[a.wrapT]),
                (n !== e.TEXTURE_3D && n !== e.TEXTURE_2D_ARRAY) ||
                  e.texParameteri(n, e.TEXTURE_WRAP_R, A[a.wrapR]),
                e.texParameteri(n, e.TEXTURE_MAG_FILTER, C[a.magFilter]),
                e.texParameteri(n, e.TEXTURE_MIN_FILTER, C[a.minFilter]))
              : (e.texParameteri(n, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
                e.texParameteri(n, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
                (n !== e.TEXTURE_3D && n !== e.TEXTURE_2D_ARRAY) ||
                  e.texParameteri(n, e.TEXTURE_WRAP_R, e.CLAMP_TO_EDGE),
                (a.wrapS === Xi && a.wrapT === Xi) ||
                  console.warn(
                    "THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."
                  ),
                e.texParameteri(n, e.TEXTURE_MAG_FILTER, x(a.magFilter)),
                e.texParameteri(n, e.TEXTURE_MIN_FILTER, x(a.minFilter)),
                a.minFilter !== Yi &&
                  a.minFilter !== Ji &&
                  console.warn(
                    "THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."
                  )),
            a.compareFunction &&
              (e.texParameteri(
                n,
                e.TEXTURE_COMPARE_MODE,
                e.COMPARE_REF_TO_TEXTURE
              ),
              e.texParameteri(n, e.TEXTURE_COMPARE_FUNC, P[a.compareFunction])),
            !0 === t.has("EXT_texture_filter_anisotropic"))
          ) {
            var o = t.get("EXT_texture_filter_anisotropic");
            if (a.magFilter === Yi) return;
            if (a.minFilter !== Zi && a.minFilter !== $i) return;
            if (a.type === ra && !1 === t.has("OES_texture_float_linear")) return;
            if (
              !1 === l &&
              a.type === ia &&
              !1 === t.has("OES_texture_half_float_linear")
            )
              return;
            (a.anisotropy > 1 || r.get(a).__currentAnisotropy) &&
              (e.texParameterf(
                n,
                o.TEXTURE_MAX_ANISOTROPY_EXT,
                Math.min(a.anisotropy, i.getMaxAnisotropy())
              ),
              (r.get(a).__currentAnisotropy = a.anisotropy));
          }
        }
        function R(t, n) {
          var r = !1;
          void 0 === t.__webglInit &&
            ((t.__webglInit = !0), n.addEventListener("dispose", S));
          var i = n.source,
            a = d.get(i);
          void 0 === a && ((a = {}), d.set(i, a));
          var o = (function (e) {
            var t = [];
            return (
              t.push(e.wrapS),
              t.push(e.wrapT),
              t.push(e.wrapR || 0),
              t.push(e.magFilter),
              t.push(e.minFilter),
              t.push(e.anisotropy),
              t.push(e.internalFormat),
              t.push(e.format),
              t.push(e.type),
              t.push(e.generateMipmaps),
              t.push(e.premultiplyAlpha),
              t.push(e.flipY),
              t.push(e.unpackAlignment),
              t.push(e.colorSpace),
              t.join()
            );
          })(n);
          if (o !== t.__cacheKey) {
            void 0 === a[o] &&
              ((a[o] = { texture: e.createTexture(), usedTimes: 0 }),
              s.memory.textures++,
              (r = !0)),
              a[o].usedTimes++;
            var l = a[t.__cacheKey];
            void 0 !== l &&
              (a[t.__cacheKey].usedTimes--, 0 === l.usedTimes && w(n)),
              (t.__cacheKey = o),
              (t.__webglTexture = a[o].texture);
          }
          return r;
        }
        function D(t, s, o) {
          var h = e.TEXTURE_2D;
          (s.isDataArrayTexture || s.isCompressedArrayTexture) &&
            (h = e.TEXTURE_2D_ARRAY),
            s.isData3DTexture && (h = e.TEXTURE_3D);
          var u = R(t, s),
            c = s.source;
          n.bindTexture(h, t.__webglTexture, e.TEXTURE0 + o);
          var d = r.get(c);
          if (c.version !== d.__version || !0 === u) {
            n.activeTexture(e.TEXTURE0 + o);
            var f = Vs.getPrimaries(Vs.workingColorSpace),
              p = s.colorSpace === Qa ? null : Vs.getPrimaries(s.colorSpace),
              x =
                s.colorSpace === Qa || f === p ? e.NONE : e.BROWSER_DEFAULT_WEBGL;
            e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, s.flipY),
              e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, s.premultiplyAlpha),
              e.pixelStorei(e.UNPACK_ALIGNMENT, s.unpackAlignment),
              e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL, x);
            var S,
              E =
                (function (e) {
                  return (
                    !l &&
                    (e.wrapS !== Xi ||
                      e.wrapT !== Xi ||
                      (e.minFilter !== Yi && e.minFilter !== Ji))
                  );
                })(s) && !1 === g(s.image),
              w = m(s.image, E, !1, i.maxTextureSize),
              T = g((w = B(s, w))) || l,
              M = a.convert(s.format, s.colorSpace),
              A = a.convert(s.type),
              C = _(s.internalFormat, M, A, s.colorSpace, s.isVideoTexture);
            k(h, s, T);
            var P = s.mipmaps,
              D = l && !0 !== s.isVideoTexture && C !== Sa,
              I = void 0 === d.__version || !0 === u,
              L = b(s, w, T);
            if (s.isDepthTexture)
              (C = e.DEPTH_COMPONENT),
                l
                  ? (C =
                      s.type === ra
                        ? e.DEPTH_COMPONENT32F
                        : s.type === na
                        ? e.DEPTH_COMPONENT24
                        : s.type === oa
                        ? e.DEPTH24_STENCIL8
                        : e.DEPTH_COMPONENT16)
                  : s.type === ra &&
                    console.error(
                      "WebGLRenderer: Floating point depth texture requires WebGL2."
                    ),
                s.format === ha &&
                  C === e.DEPTH_COMPONENT &&
                  s.type !== ea &&
                  s.type !== na &&
                  (console.warn(
                    "THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."
                  ),
                  (s.type = na),
                  (A = a.convert(s.type))),
                s.format === ua &&
                  C === e.DEPTH_COMPONENT &&
                  ((C = e.DEPTH_STENCIL),
                  s.type !== oa &&
                    (console.warn(
                      "THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."
                    ),
                    (s.type = oa),
                    (A = a.convert(s.type)))),
                I &&
                  (D
                    ? n.texStorage2D(e.TEXTURE_2D, 1, C, w.width, w.height)
                    : n.texImage2D(
                        e.TEXTURE_2D,
                        0,
                        C,
                        w.width,
                        w.height,
                        0,
                        M,
                        A,
                        null
                      ));
            else if (s.isDataTexture) {
              if (P.length > 0 && T) {
                D &&
                  I &&
                  n.texStorage2D(e.TEXTURE_2D, L, C, P[0].width, P[0].height);
                for (var F = 0, O = P.length; F < O; F++)
                  (S = P[F]),
                    D
                      ? n.texSubImage2D(
                          e.TEXTURE_2D,
                          F,
                          0,
                          0,
                          S.width,
                          S.height,
                          M,
                          A,
                          S.data
                        )
                      : n.texImage2D(
                          e.TEXTURE_2D,
                          F,
                          C,
                          S.width,
                          S.height,
                          0,
                          M,
                          A,
                          S.data
                        );
                s.generateMipmaps = !1;
              } else
                D
                  ? (I && n.texStorage2D(e.TEXTURE_2D, L, C, w.width, w.height),
                    n.texSubImage2D(
                      e.TEXTURE_2D,
                      0,
                      0,
                      0,
                      w.width,
                      w.height,
                      M,
                      A,
                      w.data
                    ))
                  : n.texImage2D(
                      e.TEXTURE_2D,
                      0,
                      C,
                      w.width,
                      w.height,
                      0,
                      M,
                      A,
                      w.data
                    );
            } else if (s.isCompressedTexture) {
              if (s.isCompressedArrayTexture) {
                D &&
                  I &&
                  n.texStorage3D(
                    e.TEXTURE_2D_ARRAY,
                    L,
                    C,
                    P[0].width,
                    P[0].height,
                    w.depth
                  );
                for (var N = 0, U = P.length; N < U; N++)
                  (S = P[N]),
                    s.format !== la
                      ? null !== M
                        ? D
                          ? n.compressedTexSubImage3D(
                              e.TEXTURE_2D_ARRAY,
                              N,
                              0,
                              0,
                              0,
                              S.width,
                              S.height,
                              w.depth,
                              M,
                              S.data,
                              0,
                              0
                            )
                          : n.compressedTexImage3D(
                              e.TEXTURE_2D_ARRAY,
                              N,
                              C,
                              S.width,
                              S.height,
                              w.depth,
                              0,
                              S.data,
                              0,
                              0
                            )
                        : console.warn(
                            "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"
                          )
                      : D
                      ? n.texSubImage3D(
                          e.TEXTURE_2D_ARRAY,
                          N,
                          0,
                          0,
                          0,
                          S.width,
                          S.height,
                          w.depth,
                          M,
                          A,
                          S.data
                        )
                      : n.texImage3D(
                          e.TEXTURE_2D_ARRAY,
                          N,
                          C,
                          S.width,
                          S.height,
                          w.depth,
                          0,
                          M,
                          A,
                          S.data
                        );
              } else {
                D &&
                  I &&
                  n.texStorage2D(e.TEXTURE_2D, L, C, P[0].width, P[0].height);
                for (var z = 0, V = P.length; z < V; z++)
                  (S = P[z]),
                    s.format !== la
                      ? null !== M
                        ? D
                          ? n.compressedTexSubImage2D(
                              e.TEXTURE_2D,
                              z,
                              0,
                              0,
                              S.width,
                              S.height,
                              M,
                              S.data
                            )
                          : n.compressedTexImage2D(
                              e.TEXTURE_2D,
                              z,
                              C,
                              S.width,
                              S.height,
                              0,
                              S.data
                            )
                        : console.warn(
                            "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"
                          )
                      : D
                      ? n.texSubImage2D(
                          e.TEXTURE_2D,
                          z,
                          0,
                          0,
                          S.width,
                          S.height,
                          M,
                          A,
                          S.data
                        )
                      : n.texImage2D(
                          e.TEXTURE_2D,
                          z,
                          C,
                          S.width,
                          S.height,
                          0,
                          M,
                          A,
                          S.data
                        );
              }
            } else if (s.isDataArrayTexture)
              D
                ? (I &&
                    n.texStorage3D(
                      e.TEXTURE_2D_ARRAY,
                      L,
                      C,
                      w.width,
                      w.height,
                      w.depth
                    ),
                  n.texSubImage3D(
                    e.TEXTURE_2D_ARRAY,
                    0,
                    0,
                    0,
                    0,
                    w.width,
                    w.height,
                    w.depth,
                    M,
                    A,
                    w.data
                  ))
                : n.texImage3D(
                    e.TEXTURE_2D_ARRAY,
                    0,
                    C,
                    w.width,
                    w.height,
                    w.depth,
                    0,
                    M,
                    A,
                    w.data
                  );
            else if (s.isData3DTexture)
              D
                ? (I &&
                    n.texStorage3D(
                      e.TEXTURE_3D,
                      L,
                      C,
                      w.width,
                      w.height,
                      w.depth
                    ),
                  n.texSubImage3D(
                    e.TEXTURE_3D,
                    0,
                    0,
                    0,
                    0,
                    w.width,
                    w.height,
                    w.depth,
                    M,
                    A,
                    w.data
                  ))
                : n.texImage3D(
                    e.TEXTURE_3D,
                    0,
                    C,
                    w.width,
                    w.height,
                    w.depth,
                    0,
                    M,
                    A,
                    w.data
                  );
            else if (s.isFramebufferTexture) {
              if (I)
                if (D) n.texStorage2D(e.TEXTURE_2D, L, C, w.width, w.height);
                else
                  for (var H = w.width, G = w.height, W = 0; W < L; W++)
                    n.texImage2D(e.TEXTURE_2D, W, C, H, G, 0, M, A, null),
                      (H >>= 1),
                      (G >>= 1);
            } else if (P.length > 0 && T) {
              D &&
                I &&
                n.texStorage2D(e.TEXTURE_2D, L, C, P[0].width, P[0].height);
              for (var j = 0, X = P.length; j < X; j++)
                (S = P[j]),
                  D
                    ? n.texSubImage2D(e.TEXTURE_2D, j, 0, 0, M, A, S)
                    : n.texImage2D(e.TEXTURE_2D, j, C, M, A, S);
              s.generateMipmaps = !1;
            } else
              D
                ? (I && n.texStorage2D(e.TEXTURE_2D, L, C, w.width, w.height),
                  n.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, M, A, w))
                : n.texImage2D(e.TEXTURE_2D, 0, C, M, A, w);
            v(s, T) && y(h),
              (d.__version = c.version),
              s.onUpdate && s.onUpdate(s);
          }
          t.__version = s.version;
        }
        function I(t, i, s, o, l, u) {
          var c = a.convert(s.format, s.colorSpace),
            d = a.convert(s.type),
            f = _(s.internalFormat, c, d, s.colorSpace);
          if (!r.get(i).__hasExternalTextures) {
            var p = Math.max(1, i.width >> u),
              m = Math.max(1, i.height >> u);
            l === e.TEXTURE_3D || l === e.TEXTURE_2D_ARRAY
              ? n.texImage3D(l, u, f, p, m, i.depth, 0, c, d, null)
              : n.texImage2D(l, u, f, p, m, 0, c, d, null);
          }
          n.bindFramebuffer(e.FRAMEBUFFER, t),
            N(i)
              ? h.framebufferTexture2DMultisampleEXT(
                  e.FRAMEBUFFER,
                  o,
                  l,
                  r.get(s).__webglTexture,
                  0,
                  O(i)
                )
              : (l === e.TEXTURE_2D ||
                  (l >= e.TEXTURE_CUBE_MAP_POSITIVE_X &&
                    l <= e.TEXTURE_CUBE_MAP_NEGATIVE_Z)) &&
                e.framebufferTexture2D(
                  e.FRAMEBUFFER,
                  o,
                  l,
                  r.get(s).__webglTexture,
                  u
                ),
            n.bindFramebuffer(e.FRAMEBUFFER, null);
        }
        function L(t, n, r) {
          if (
            (e.bindRenderbuffer(e.RENDERBUFFER, t),
            n.depthBuffer && !n.stencilBuffer)
          ) {
            var i = !0 === l ? e.DEPTH_COMPONENT24 : e.DEPTH_COMPONENT16;
            if (r || N(n)) {
              var s = n.depthTexture;
              s &&
                s.isDepthTexture &&
                (s.type === ra
                  ? (i = e.DEPTH_COMPONENT32F)
                  : s.type === na && (i = e.DEPTH_COMPONENT24));
              var o = O(n);
              N(n)
                ? h.renderbufferStorageMultisampleEXT(
                    e.RENDERBUFFER,
                    o,
                    i,
                    n.width,
                    n.height
                  )
                : e.renderbufferStorageMultisample(
                    e.RENDERBUFFER,
                    o,
                    i,
                    n.width,
                    n.height
                  );
            } else e.renderbufferStorage(e.RENDERBUFFER, i, n.width, n.height);
            e.framebufferRenderbuffer(
              e.FRAMEBUFFER,
              e.DEPTH_ATTACHMENT,
              e.RENDERBUFFER,
              t
            );
          } else if (n.depthBuffer && n.stencilBuffer) {
            var u = O(n);
            r && !1 === N(n)
              ? e.renderbufferStorageMultisample(
                  e.RENDERBUFFER,
                  u,
                  e.DEPTH24_STENCIL8,
                  n.width,
                  n.height
                )
              : N(n)
              ? h.renderbufferStorageMultisampleEXT(
                  e.RENDERBUFFER,
                  u,
                  e.DEPTH24_STENCIL8,
                  n.width,
                  n.height
                )
              : e.renderbufferStorage(
                  e.RENDERBUFFER,
                  e.DEPTH_STENCIL,
                  n.width,
                  n.height
                ),
              e.framebufferRenderbuffer(
                e.FRAMEBUFFER,
                e.DEPTH_STENCIL_ATTACHMENT,
                e.RENDERBUFFER,
                t
              );
          } else
            for (
              var c =
                  !0 === n.isWebGLMultipleRenderTargets ? n.texture : [n.texture],
                d = 0;
              d < c.length;
              d++
            ) {
              var f = c[d],
                p = a.convert(f.format, f.colorSpace),
                m = a.convert(f.type),
                g = _(f.internalFormat, p, m, f.colorSpace),
                v = O(n);
              r && !1 === N(n)
                ? e.renderbufferStorageMultisample(
                    e.RENDERBUFFER,
                    v,
                    g,
                    n.width,
                    n.height
                  )
                : N(n)
                ? h.renderbufferStorageMultisampleEXT(
                    e.RENDERBUFFER,
                    v,
                    g,
                    n.width,
                    n.height
                  )
                : e.renderbufferStorage(e.RENDERBUFFER, g, n.width, n.height);
            }
          e.bindRenderbuffer(e.RENDERBUFFER, null);
        }
        function F(t) {
          var i = r.get(t),
            a = !0 === t.isWebGLCubeRenderTarget;
          if (t.depthTexture && !i.__autoAllocateDepthBuffer) {
            if (a)
              throw new Error(
                "target.depthTexture not supported in Cube render targets"
              );
            !(function (t, i) {
              if (i && i.isWebGLCubeRenderTarget)
                throw new Error(
                  "Depth Texture with cube render targets is not supported"
                );
              if (
                (n.bindFramebuffer(e.FRAMEBUFFER, t),
                !i.depthTexture || !i.depthTexture.isDepthTexture)
              )
                throw new Error(
                  "renderTarget.depthTexture must be an instance of THREE.DepthTexture"
                );
              (r.get(i.depthTexture).__webglTexture &&
                i.depthTexture.image.width === i.width &&
                i.depthTexture.image.height === i.height) ||
                ((i.depthTexture.image.width = i.width),
                (i.depthTexture.image.height = i.height),
                (i.depthTexture.needsUpdate = !0)),
                M(i.depthTexture, 0);
              var a = r.get(i.depthTexture).__webglTexture,
                s = O(i);
              if (i.depthTexture.format === ha)
                N(i)
                  ? h.framebufferTexture2DMultisampleEXT(
                      e.FRAMEBUFFER,
                      e.DEPTH_ATTACHMENT,
                      e.TEXTURE_2D,
                      a,
                      0,
                      s
                    )
                  : e.framebufferTexture2D(
                      e.FRAMEBUFFER,
                      e.DEPTH_ATTACHMENT,
                      e.TEXTURE_2D,
                      a,
                      0
                    );
              else {
                if (i.depthTexture.format !== ua)
                  throw new Error("Unknown depthTexture format");
                N(i)
                  ? h.framebufferTexture2DMultisampleEXT(
                      e.FRAMEBUFFER,
                      e.DEPTH_STENCIL_ATTACHMENT,
                      e.TEXTURE_2D,
                      a,
                      0,
                      s
                    )
                  : e.framebufferTexture2D(
                      e.FRAMEBUFFER,
                      e.DEPTH_STENCIL_ATTACHMENT,
                      e.TEXTURE_2D,
                      a,
                      0
                    );
              }
            })(i.__webglFramebuffer, t);
          } else if (a) {
            i.__webglDepthbuffer = [];
            for (var s = 0; s < 6; s++)
              n.bindFramebuffer(e.FRAMEBUFFER, i.__webglFramebuffer[s]),
                (i.__webglDepthbuffer[s] = e.createRenderbuffer()),
                L(i.__webglDepthbuffer[s], t, !1);
          } else
            n.bindFramebuffer(e.FRAMEBUFFER, i.__webglFramebuffer),
              (i.__webglDepthbuffer = e.createRenderbuffer()),
              L(i.__webglDepthbuffer, t, !1);
          n.bindFramebuffer(e.FRAMEBUFFER, null);
        }
        function O(e) {
          return Math.min(i.maxSamples, e.samples);
        }
        function N(e) {
          var n = r.get(e);
          return (
            l &&
            e.samples > 0 &&
            !0 === t.has("WEBGL_multisampled_render_to_texture") &&
            !1 !== n.__useRenderToTexture
          );
        }
        function B(e, n) {
          var r = e.colorSpace,
            i = e.format,
            a = e.type;
          return (
            !0 === e.isCompressedTexture ||
              !0 === e.isVideoTexture ||
              e.format === cs ||
              (r !== ts &&
                r !== Qa &&
                (Vs.getTransfer(r) === as
                  ? !1 === l
                    ? !0 === t.has("EXT_sRGB") && i === la
                      ? ((e.format = cs),
                        (e.minFilter = Ji),
                        (e.generateMipmaps = !1))
                      : (n = Ws.sRGBToLinear(n))
                    : (i === la && a === Qi) ||
                      console.warn(
                        "THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."
                      )
                  : console.error(
                      "THREE.WebGLTextures: Unsupported texture color space:",
                      r
                    ))),
            n
          );
        }
        (this.allocateTextureUnit = function () {
          var e = T;
          return (
            e >= i.maxTextures &&
              console.warn(
                "THREE.WebGLTextures: Trying to use " +
                  e +
                  " texture units while this GPU supports only " +
                  i.maxTextures
              ),
            (T += 1),
            e
          );
        }),
          (this.resetTextureUnits = function () {
            T = 0;
          }),
          (this.setTexture2D = M),
          (this.setTexture2DArray = function (t, i) {
            var a = r.get(t);
            t.version > 0 && a.__version !== t.version
              ? D(a, t, i)
              : n.bindTexture(
                  e.TEXTURE_2D_ARRAY,
                  a.__webglTexture,
                  e.TEXTURE0 + i
                );
          }),
          (this.setTexture3D = function (t, i) {
            var a = r.get(t);
            t.version > 0 && a.__version !== t.version
              ? D(a, t, i)
              : n.bindTexture(e.TEXTURE_3D, a.__webglTexture, e.TEXTURE0 + i);
          }),
          (this.setTextureCube = function (t, s) {
            var o = r.get(t);
            t.version > 0 && o.__version !== t.version
              ? (function (t, s, o) {
                  if (6 === s.image.length) {
                    var h = R(t, s),
                      u = s.source;
                    n.bindTexture(
                      e.TEXTURE_CUBE_MAP,
                      t.__webglTexture,
                      e.TEXTURE0 + o
                    );
                    var c = r.get(u);
                    if (u.version !== c.__version || !0 === h) {
                      n.activeTexture(e.TEXTURE0 + o);
                      var d = Vs.getPrimaries(Vs.workingColorSpace),
                        f =
                          s.colorSpace === Qa
                            ? null
                            : Vs.getPrimaries(s.colorSpace),
                        p =
                          s.colorSpace === Qa || d === f
                            ? e.NONE
                            : e.BROWSER_DEFAULT_WEBGL;
                      e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, s.flipY),
                        e.pixelStorei(
                          e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                          s.premultiplyAlpha
                        ),
                        e.pixelStorei(e.UNPACK_ALIGNMENT, s.unpackAlignment),
                        e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL, p);
                      for (
                        var x =
                            s.isCompressedTexture ||
                            s.image[0].isCompressedTexture,
                          S = s.image[0] && s.image[0].isDataTexture,
                          E = [],
                          w = 0;
                        w < 6;
                        w++
                      )
                        (E[w] =
                          x || S
                            ? S
                              ? s.image[w].image
                              : s.image[w]
                            : m(s.image[w], !1, !0, i.maxCubemapSize)),
                          (E[w] = B(s, E[w]));
                      var T,
                        M = E[0],
                        A = g(M) || l,
                        C = a.convert(s.format, s.colorSpace),
                        P = a.convert(s.type),
                        D = _(s.internalFormat, C, P, s.colorSpace),
                        I = l && !0 !== s.isVideoTexture,
                        L = void 0 === c.__version || !0 === h,
                        F = b(s, M, A);
                      if ((k(e.TEXTURE_CUBE_MAP, s, A), x)) {
                        I &&
                          L &&
                          n.texStorage2D(
                            e.TEXTURE_CUBE_MAP,
                            F,
                            D,
                            M.width,
                            M.height
                          );
                        for (var O = 0; O < 6; O++) {
                          T = E[O].mipmaps;
                          for (var N = 0; N < T.length; N++) {
                            var U = T[N];
                            s.format !== la
                              ? null !== C
                                ? I
                                  ? n.compressedTexSubImage2D(
                                      e.TEXTURE_CUBE_MAP_POSITIVE_X + O,
                                      N,
                                      0,
                                      0,
                                      U.width,
                                      U.height,
                                      C,
                                      U.data
                                    )
                                  : n.compressedTexImage2D(
                                      e.TEXTURE_CUBE_MAP_POSITIVE_X + O,
                                      N,
                                      D,
                                      U.width,
                                      U.height,
                                      0,
                                      U.data
                                    )
                                : console.warn(
                                    "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"
                                  )
                              : I
                              ? n.texSubImage2D(
                                  e.TEXTURE_CUBE_MAP_POSITIVE_X + O,
                                  N,
                                  0,
                                  0,
                                  U.width,
                                  U.height,
                                  C,
                                  P,
                                  U.data
                                )
                              : n.texImage2D(
                                  e.TEXTURE_CUBE_MAP_POSITIVE_X + O,
                                  N,
                                  D,
                                  U.width,
                                  U.height,
                                  0,
                                  C,
                                  P,
                                  U.data
                                );
                          }
                        }
                      } else {
                        (T = s.mipmaps),
                          I &&
                            L &&
                            (T.length > 0 && F++,
                            n.texStorage2D(
                              e.TEXTURE_CUBE_MAP,
                              F,
                              D,
                              E[0].width,
                              E[0].height
                            ));
                        for (var z = 0; z < 6; z++)
                          if (S) {
                            I
                              ? n.texSubImage2D(
                                  e.TEXTURE_CUBE_MAP_POSITIVE_X + z,
                                  0,
                                  0,
                                  0,
                                  E[z].width,
                                  E[z].height,
                                  C,
                                  P,
                                  E[z].data
                                )
                              : n.texImage2D(
                                  e.TEXTURE_CUBE_MAP_POSITIVE_X + z,
                                  0,
                                  D,
                                  E[z].width,
                                  E[z].height,
                                  0,
                                  C,
                                  P,
                                  E[z].data
                                );
                            for (var V = 0; V < T.length; V++) {
                              var H = T[V].image[z].image;
                              I
                                ? n.texSubImage2D(
                                    e.TEXTURE_CUBE_MAP_POSITIVE_X + z,
                                    V + 1,
                                    0,
                                    0,
                                    H.width,
                                    H.height,
                                    C,
                                    P,
                                    H.data
                                  )
                                : n.texImage2D(
                                    e.TEXTURE_CUBE_MAP_POSITIVE_X + z,
                                    V + 1,
                                    D,
                                    H.width,
                                    H.height,
                                    0,
                                    C,
                                    P,
                                    H.data
                                  );
                            }
                          } else {
                            I
                              ? n.texSubImage2D(
                                  e.TEXTURE_CUBE_MAP_POSITIVE_X + z,
                                  0,
                                  0,
                                  0,
                                  C,
                                  P,
                                  E[z]
                                )
                              : n.texImage2D(
                                  e.TEXTURE_CUBE_MAP_POSITIVE_X + z,
                                  0,
                                  D,
                                  C,
                                  P,
                                  E[z]
                                );
                            for (var G = 0; G < T.length; G++) {
                              var W = T[G];
                              I
                                ? n.texSubImage2D(
                                    e.TEXTURE_CUBE_MAP_POSITIVE_X + z,
                                    G + 1,
                                    0,
                                    0,
                                    C,
                                    P,
                                    W.image[z]
                                  )
                                : n.texImage2D(
                                    e.TEXTURE_CUBE_MAP_POSITIVE_X + z,
                                    G + 1,
                                    D,
                                    C,
                                    P,
                                    W.image[z]
                                  );
                            }
                          }
                      }
                      v(s, A) && y(e.TEXTURE_CUBE_MAP),
                        (c.__version = u.version),
                        s.onUpdate && s.onUpdate(s);
                    }
                    t.__version = s.version;
                  }
                })(o, t, s)
              : n.bindTexture(
                  e.TEXTURE_CUBE_MAP,
                  o.__webglTexture,
                  e.TEXTURE0 + s
                );
          }),
          (this.rebindTextures = function (t, n, i) {
            var a = r.get(t);
            void 0 !== n &&
              I(
                a.__webglFramebuffer,
                t,
                t.texture,
                e.COLOR_ATTACHMENT0,
                e.TEXTURE_2D,
                0
              ),
              void 0 !== i && F(t);
          }),
          (this.setupRenderTarget = function (t) {
            var o = t.texture,
              h = r.get(t),
              u = r.get(o);
            t.addEventListener("dispose", E),
              !0 !== t.isWebGLMultipleRenderTargets &&
                (void 0 === u.__webglTexture &&
                  (u.__webglTexture = e.createTexture()),
                (u.__version = o.version),
                s.memory.textures++);
            var c = !0 === t.isWebGLCubeRenderTarget,
              d = !0 === t.isWebGLMultipleRenderTargets,
              f = g(t) || l;
            if (c) {
              h.__webglFramebuffer = [];
              for (var p = 0; p < 6; p++)
                if (l && o.mipmaps && o.mipmaps.length > 0) {
                  h.__webglFramebuffer[p] = [];
                  for (var m = 0; m < o.mipmaps.length; m++)
                    h.__webglFramebuffer[p][m] = e.createFramebuffer();
                } else h.__webglFramebuffer[p] = e.createFramebuffer();
            } else {
              if (l && o.mipmaps && o.mipmaps.length > 0) {
                h.__webglFramebuffer = [];
                for (var b = 0; b < o.mipmaps.length; b++)
                  h.__webglFramebuffer[b] = e.createFramebuffer();
              } else h.__webglFramebuffer = e.createFramebuffer();
              if (d)
                if (i.drawBuffers)
                  for (var x = t.texture, S = 0, w = x.length; S < w; S++) {
                    var T = r.get(x[S]);
                    void 0 === T.__webglTexture &&
                      ((T.__webglTexture = e.createTexture()),
                      s.memory.textures++);
                  }
                else
                  console.warn(
                    "THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension."
                  );
              if (l && t.samples > 0 && !1 === N(t)) {
                var M = d ? o : [o];
                (h.__webglMultisampledFramebuffer = e.createFramebuffer()),
                  (h.__webglColorRenderbuffer = []),
                  n.bindFramebuffer(
                    e.FRAMEBUFFER,
                    h.__webglMultisampledFramebuffer
                  );
                for (var A = 0; A < M.length; A++) {
                  var C = M[A];
                  (h.__webglColorRenderbuffer[A] = e.createRenderbuffer()),
                    e.bindRenderbuffer(
                      e.RENDERBUFFER,
                      h.__webglColorRenderbuffer[A]
                    );
                  var P = a.convert(C.format, C.colorSpace),
                    R = a.convert(C.type),
                    D = _(
                      C.internalFormat,
                      P,
                      R,
                      C.colorSpace,
                      !0 === t.isXRRenderTarget
                    ),
                    B = O(t);
                  e.renderbufferStorageMultisample(
                    e.RENDERBUFFER,
                    B,
                    D,
                    t.width,
                    t.height
                  ),
                    e.framebufferRenderbuffer(
                      e.FRAMEBUFFER,
                      e.COLOR_ATTACHMENT0 + A,
                      e.RENDERBUFFER,
                      h.__webglColorRenderbuffer[A]
                    );
                }
                e.bindRenderbuffer(e.RENDERBUFFER, null),
                  t.depthBuffer &&
                    ((h.__webglDepthRenderbuffer = e.createRenderbuffer()),
                    L(h.__webglDepthRenderbuffer, t, !0)),
                  n.bindFramebuffer(e.FRAMEBUFFER, null);
              }
            }
            if (c) {
              n.bindTexture(e.TEXTURE_CUBE_MAP, u.__webglTexture),
                k(e.TEXTURE_CUBE_MAP, o, f);
              for (var U = 0; U < 6; U++)
                if (l && o.mipmaps && o.mipmaps.length > 0)
                  for (var z = 0; z < o.mipmaps.length; z++)
                    I(
                      h.__webglFramebuffer[U][z],
                      t,
                      o,
                      e.COLOR_ATTACHMENT0,
                      e.TEXTURE_CUBE_MAP_POSITIVE_X + U,
                      z
                    );
                else
                  I(
                    h.__webglFramebuffer[U],
                    t,
                    o,
                    e.COLOR_ATTACHMENT0,
                    e.TEXTURE_CUBE_MAP_POSITIVE_X + U,
                    0
                  );
              v(o, f) && y(e.TEXTURE_CUBE_MAP), n.unbindTexture();
            } else if (d) {
              for (var V = t.texture, H = 0, G = V.length; H < G; H++) {
                var W = V[H],
                  j = r.get(W);
                n.bindTexture(e.TEXTURE_2D, j.__webglTexture),
                  k(e.TEXTURE_2D, W, f),
                  I(
                    h.__webglFramebuffer,
                    t,
                    W,
                    e.COLOR_ATTACHMENT0 + H,
                    e.TEXTURE_2D,
                    0
                  ),
                  v(W, f) && y(e.TEXTURE_2D);
              }
              n.unbindTexture();
            } else {
              var X = e.TEXTURE_2D;
              if (
                ((t.isWebGL3DRenderTarget || t.isWebGLArrayRenderTarget) &&
                  (l
                    ? (X = t.isWebGL3DRenderTarget
                        ? e.TEXTURE_3D
                        : e.TEXTURE_2D_ARRAY)
                    : console.error(
                        "THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2."
                      )),
                n.bindTexture(X, u.__webglTexture),
                k(X, o, f),
                l && o.mipmaps && o.mipmaps.length > 0)
              )
                for (var q = 0; q < o.mipmaps.length; q++)
                  I(h.__webglFramebuffer[q], t, o, e.COLOR_ATTACHMENT0, X, q);
              else I(h.__webglFramebuffer, t, o, e.COLOR_ATTACHMENT0, X, 0);
              v(o, f) && y(X), n.unbindTexture();
            }
            t.depthBuffer && F(t);
          }),
          (this.updateRenderTargetMipmap = function (t) {
            for (
              var i = g(t) || l,
                a =
                  !0 === t.isWebGLMultipleRenderTargets ? t.texture : [t.texture],
                s = 0,
                o = a.length;
              s < o;
              s++
            ) {
              var h = a[s];
              if (v(h, i)) {
                var u = t.isWebGLCubeRenderTarget
                    ? e.TEXTURE_CUBE_MAP
                    : e.TEXTURE_2D,
                  c = r.get(h).__webglTexture;
                n.bindTexture(u, c), y(u), n.unbindTexture();
              }
            }
          }),
          (this.updateMultisampleRenderTarget = function (t) {
            if (l && t.samples > 0 && !1 === N(t)) {
              var i = t.isWebGLMultipleRenderTargets ? t.texture : [t.texture],
                a = t.width,
                s = t.height,
                o = e.COLOR_BUFFER_BIT,
                h = [],
                c = t.stencilBuffer
                  ? e.DEPTH_STENCIL_ATTACHMENT
                  : e.DEPTH_ATTACHMENT,
                d = r.get(t),
                f = !0 === t.isWebGLMultipleRenderTargets;
              if (f)
                for (var p = 0; p < i.length; p++)
                  n.bindFramebuffer(
                    e.FRAMEBUFFER,
                    d.__webglMultisampledFramebuffer
                  ),
                    e.framebufferRenderbuffer(
                      e.FRAMEBUFFER,
                      e.COLOR_ATTACHMENT0 + p,
                      e.RENDERBUFFER,
                      null
                    ),
                    n.bindFramebuffer(e.FRAMEBUFFER, d.__webglFramebuffer),
                    e.framebufferTexture2D(
                      e.DRAW_FRAMEBUFFER,
                      e.COLOR_ATTACHMENT0 + p,
                      e.TEXTURE_2D,
                      null,
                      0
                    );
              n.bindFramebuffer(
                e.READ_FRAMEBUFFER,
                d.__webglMultisampledFramebuffer
              ),
                n.bindFramebuffer(e.DRAW_FRAMEBUFFER, d.__webglFramebuffer);
              for (var m = 0; m < i.length; m++) {
                h.push(e.COLOR_ATTACHMENT0 + m), t.depthBuffer && h.push(c);
                var g = void 0 !== d.__ignoreDepthValues && d.__ignoreDepthValues;
                if (
                  (!1 === g &&
                    (t.depthBuffer && (o |= e.DEPTH_BUFFER_BIT),
                    t.stencilBuffer && (o |= e.STENCIL_BUFFER_BIT)),
                  f &&
                    e.framebufferRenderbuffer(
                      e.READ_FRAMEBUFFER,
                      e.COLOR_ATTACHMENT0,
                      e.RENDERBUFFER,
                      d.__webglColorRenderbuffer[m]
                    ),
                  !0 === g &&
                    (e.invalidateFramebuffer(e.READ_FRAMEBUFFER, [c]),
                    e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER, [c])),
                  f)
                ) {
                  var v = r.get(i[m]).__webglTexture;
                  e.framebufferTexture2D(
                    e.DRAW_FRAMEBUFFER,
                    e.COLOR_ATTACHMENT0,
                    e.TEXTURE_2D,
                    v,
                    0
                  );
                }
                e.blitFramebuffer(0, 0, a, s, 0, 0, a, s, o, e.NEAREST),
                  u && e.invalidateFramebuffer(e.READ_FRAMEBUFFER, h);
              }
              if (
                (n.bindFramebuffer(e.READ_FRAMEBUFFER, null),
                n.bindFramebuffer(e.DRAW_FRAMEBUFFER, null),
                f)
              )
                for (var y = 0; y < i.length; y++) {
                  n.bindFramebuffer(
                    e.FRAMEBUFFER,
                    d.__webglMultisampledFramebuffer
                  ),
                    e.framebufferRenderbuffer(
                      e.FRAMEBUFFER,
                      e.COLOR_ATTACHMENT0 + y,
                      e.RENDERBUFFER,
                      d.__webglColorRenderbuffer[y]
                    );
                  var _ = r.get(i[y]).__webglTexture;
                  n.bindFramebuffer(e.FRAMEBUFFER, d.__webglFramebuffer),
                    e.framebufferTexture2D(
                      e.DRAW_FRAMEBUFFER,
                      e.COLOR_ATTACHMENT0 + y,
                      e.TEXTURE_2D,
                      _,
                      0
                    );
                }
              n.bindFramebuffer(
                e.DRAW_FRAMEBUFFER,
                d.__webglMultisampledFramebuffer
              );
            }
          }),
          (this.setupDepthRenderbuffer = F),
          (this.setupFrameBufferTexture = I),
          (this.useMultisampledRTT = N);
      }
      function Kc(e, t, n) {
        var r = n.isWebGL2;
        return {
          convert: function (n) {
            var i,
              a =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : Qa,
              s = Vs.getTransfer(a);
            if (n === Qi) return e.UNSIGNED_BYTE;
            if (n === aa) return e.UNSIGNED_SHORT_4_4_4_4;
            if (n === sa) return e.UNSIGNED_SHORT_5_5_5_1;
            if (1010 === n) return e.BYTE;
            if (1011 === n) return e.SHORT;
            if (n === ea) return e.UNSIGNED_SHORT;
            if (n === ta) return e.INT;
            if (n === na) return e.UNSIGNED_INT;
            if (n === ra) return e.FLOAT;
            if (n === ia)
              return r
                ? e.HALF_FLOAT
                : null !== (i = t.get("OES_texture_half_float"))
                ? i.HALF_FLOAT_OES
                : null;
            if (1021 === n) return e.ALPHA;
            if (n === la) return e.RGBA;
            if (1024 === n) return e.LUMINANCE;
            if (1025 === n) return e.LUMINANCE_ALPHA;
            if (n === ha) return e.DEPTH_COMPONENT;
            if (n === ua) return e.DEPTH_STENCIL;
            if (n === cs)
              return null !== (i = t.get("EXT_sRGB")) ? i.SRGB_ALPHA_EXT : null;
            if (1028 === n) return e.RED;
            if (n === ca) return e.RED_INTEGER;
            if (1030 === n) return e.RG;
            if (n === da) return e.RG_INTEGER;
            if (n === fa) return e.RGBA_INTEGER;
            if (n === pa || n === ma || n === ga || n === va)
              if (s === as) {
                if (null === (i = t.get("WEBGL_compressed_texture_s3tc_srgb")))
                  return null;
                if (n === pa) return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;
                if (n === ma) return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
                if (n === ga) return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
                if (n === va) return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
              } else {
                if (null === (i = t.get("WEBGL_compressed_texture_s3tc")))
                  return null;
                if (n === pa) return i.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (n === ma) return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (n === ga) return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (n === va) return i.COMPRESSED_RGBA_S3TC_DXT5_EXT;
              }
            if (n === ya || n === _a || n === ba || n === xa) {
              if (null === (i = t.get("WEBGL_compressed_texture_pvrtc")))
                return null;
              if (n === ya) return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
              if (n === _a) return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
              if (n === ba) return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
              if (n === xa) return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
            }
            if (n === Sa)
              return null !== (i = t.get("WEBGL_compressed_texture_etc1"))
                ? i.COMPRESSED_RGB_ETC1_WEBGL
                : null;
            if (n === Ea || n === wa) {
              if (null === (i = t.get("WEBGL_compressed_texture_etc")))
                return null;
              if (n === Ea)
                return s === as
                  ? i.COMPRESSED_SRGB8_ETC2
                  : i.COMPRESSED_RGB8_ETC2;
              if (n === wa)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC
                  : i.COMPRESSED_RGBA8_ETC2_EAC;
            }
            if (
              n === Ta ||
              n === Ma ||
              n === Aa ||
              n === Ca ||
              n === Pa ||
              n === ka ||
              n === Ra ||
              n === Da ||
              n === Ia ||
              n === La ||
              n === Fa ||
              n === Oa ||
              n === Na ||
              n === Ba
            ) {
              if (null === (i = t.get("WEBGL_compressed_texture_astc")))
                return null;
              if (n === Ta)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR
                  : i.COMPRESSED_RGBA_ASTC_4x4_KHR;
              if (n === Ma)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR
                  : i.COMPRESSED_RGBA_ASTC_5x4_KHR;
              if (n === Aa)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR
                  : i.COMPRESSED_RGBA_ASTC_5x5_KHR;
              if (n === Ca)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR
                  : i.COMPRESSED_RGBA_ASTC_6x5_KHR;
              if (n === Pa)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR
                  : i.COMPRESSED_RGBA_ASTC_6x6_KHR;
              if (n === ka)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR
                  : i.COMPRESSED_RGBA_ASTC_8x5_KHR;
              if (n === Ra)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR
                  : i.COMPRESSED_RGBA_ASTC_8x6_KHR;
              if (n === Da)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR
                  : i.COMPRESSED_RGBA_ASTC_8x8_KHR;
              if (n === Ia)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR
                  : i.COMPRESSED_RGBA_ASTC_10x5_KHR;
              if (n === La)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR
                  : i.COMPRESSED_RGBA_ASTC_10x6_KHR;
              if (n === Fa)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR
                  : i.COMPRESSED_RGBA_ASTC_10x8_KHR;
              if (n === Oa)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR
                  : i.COMPRESSED_RGBA_ASTC_10x10_KHR;
              if (n === Na)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR
                  : i.COMPRESSED_RGBA_ASTC_12x10_KHR;
              if (n === Ba)
                return s === as
                  ? i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR
                  : i.COMPRESSED_RGBA_ASTC_12x12_KHR;
            }
            if (n === Ua || n === za || n === Va) {
              if (null === (i = t.get("EXT_texture_compression_bptc")))
                return null;
              if (n === Ua)
                return s === as
                  ? i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT
                  : i.COMPRESSED_RGBA_BPTC_UNORM_EXT;
              if (n === za) return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;
              if (n === Va) return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT;
            }
            if (36283 === n || n === Ha || n === Ga || n === Wa) {
              if (null === (i = t.get("EXT_texture_compression_rgtc")))
                return null;
              if (n === Ua) return i.COMPRESSED_RED_RGTC1_EXT;
              if (n === Ha) return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;
              if (n === Ga) return i.COMPRESSED_RED_GREEN_RGTC2_EXT;
              if (n === Wa) return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
            }
            return n === oa
              ? r
                ? e.UNSIGNED_INT_24_8
                : null !== (i = t.get("WEBGL_depth_texture"))
                ? i.UNSIGNED_INT_24_8_WEBGL
                : null
              : void 0 !== e[n]
              ? e[n]
              : null;
          }
        };
      }
      var Zc = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : [];
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isArrayCamera = !0),
              (e.cameras = n),
              e
            );
          }
          return ki(t, e), Ni(t);
        })(ch),
        Jc = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t), ((e = Mi(this, t)).isGroup = !0), (e.type = "Group"), e
            );
          }
          return ki(t, e), Ni(t);
        })(rl),
        $c = { type: "move" },
        Qc = (function () {
          function e() {
            Fi(this, e),
              (this._targetRay = null),
              (this._grip = null),
              (this._hand = null);
          }
          return (
            Ni(e, [
              {
                key: "getHandSpace",
                value: function () {
                  return (
                    null === this._hand &&
                      ((this._hand = new Jc()),
                      (this._hand.matrixAutoUpdate = !1),
                      (this._hand.visible = !1),
                      (this._hand.joints = {}),
                      (this._hand.inputState = { pinching: !1 })),
                    this._hand
                  );
                }
              },
              {
                key: "getTargetRaySpace",
                value: function () {
                  return (
                    null === this._targetRay &&
                      ((this._targetRay = new Jc()),
                      (this._targetRay.matrixAutoUpdate = !1),
                      (this._targetRay.visible = !1),
                      (this._targetRay.hasLinearVelocity = !1),
                      (this._targetRay.linearVelocity = new to()),
                      (this._targetRay.hasAngularVelocity = !1),
                      (this._targetRay.angularVelocity = new to())),
                    this._targetRay
                  );
                }
              },
              {
                key: "getGripSpace",
                value: function () {
                  return (
                    null === this._grip &&
                      ((this._grip = new Jc()),
                      (this._grip.matrixAutoUpdate = !1),
                      (this._grip.visible = !1),
                      (this._grip.hasLinearVelocity = !1),
                      (this._grip.linearVelocity = new to()),
                      (this._grip.hasAngularVelocity = !1),
                      (this._grip.angularVelocity = new to())),
                    this._grip
                  );
                }
              },
              {
                key: "dispatchEvent",
                value: function (e) {
                  return (
                    null !== this._targetRay && this._targetRay.dispatchEvent(e),
                    null !== this._grip && this._grip.dispatchEvent(e),
                    null !== this._hand && this._hand.dispatchEvent(e),
                    this
                  );
                }
              },
              {
                key: "connect",
                value: function (e) {
                  if (e && e.hand) {
                    var t = this._hand;
                    if (t) {
                      var n,
                        r = _i(e.hand.values());
                      try {
                        for (r.s(); !(n = r.n()).done; ) {
                          var i = n.value;
                          this._getHandJoint(t, i);
                        }
                      } catch (e) {
                        r.e(e);
                      } finally {
                        r.f();
                      }
                    }
                  }
                  return this.dispatchEvent({ type: "connected", data: e }), this;
                }
              },
              {
                key: "disconnect",
                value: function (e) {
                  return (
                    this.dispatchEvent({ type: "disconnected", data: e }),
                    null !== this._targetRay && (this._targetRay.visible = !1),
                    null !== this._grip && (this._grip.visible = !1),
                    null !== this._hand && (this._hand.visible = !1),
                    this
                  );
                }
              },
              {
                key: "update",
                value: function (e, t, n) {
                  var r = null,
                    i = null,
                    a = null,
                    s = this._targetRay,
                    o = this._grip,
                    l = this._hand;
                  if (e && "visible-blurred" !== t.session.visibilityState) {
                    if (l && e.hand) {
                      a = !0;
                      var h,
                        u = _i(e.hand.values());
                      try {
                        for (u.s(); !(h = u.n()).done; ) {
                          var c = h.value,
                            d = t.getJointPose(c, n),
                            f = this._getHandJoint(l, c);
                          null !== d &&
                            (f.matrix.fromArray(d.transform.matrix),
                            f.matrix.decompose(f.position, f.rotation, f.scale),
                            (f.matrixWorldNeedsUpdate = !0),
                            (f.jointRadius = d.radius)),
                            (f.visible = null !== d);
                        }
                      } catch (e) {
                        u.e(e);
                      } finally {
                        u.f();
                      }
                      var p = l.joints["index-finger-tip"],
                        m = l.joints["thumb-tip"],
                        g = p.position.distanceTo(m.position);
                      l.inputState.pinching && g > 0.025
                        ? ((l.inputState.pinching = !1),
                          this.dispatchEvent({
                            type: "pinchend",
                            handedness: e.handedness,
                            target: this
                          }))
                        : !l.inputState.pinching &&
                          g <= 0.015 &&
                          ((l.inputState.pinching = !0),
                          this.dispatchEvent({
                            type: "pinchstart",
                            handedness: e.handedness,
                            target: this
                          }));
                    } else
                      null !== o &&
                        e.gripSpace &&
                        null !== (i = t.getPose(e.gripSpace, n)) &&
                        (o.matrix.fromArray(i.transform.matrix),
                        o.matrix.decompose(o.position, o.rotation, o.scale),
                        (o.matrixWorldNeedsUpdate = !0),
                        i.linearVelocity
                          ? ((o.hasLinearVelocity = !0),
                            o.linearVelocity.copy(i.linearVelocity))
                          : (o.hasLinearVelocity = !1),
                        i.angularVelocity
                          ? ((o.hasAngularVelocity = !0),
                            o.angularVelocity.copy(i.angularVelocity))
                          : (o.hasAngularVelocity = !1));
                    null !== s &&
                      (null === (r = t.getPose(e.targetRaySpace, n)) &&
                        null !== i &&
                        (r = i),
                      null !== r &&
                        (s.matrix.fromArray(r.transform.matrix),
                        s.matrix.decompose(s.position, s.rotation, s.scale),
                        (s.matrixWorldNeedsUpdate = !0),
                        r.linearVelocity
                          ? ((s.hasLinearVelocity = !0),
                            s.linearVelocity.copy(r.linearVelocity))
                          : (s.hasLinearVelocity = !1),
                        r.angularVelocity
                          ? ((s.hasAngularVelocity = !0),
                            s.angularVelocity.copy(r.angularVelocity))
                          : (s.hasAngularVelocity = !1),
                        this.dispatchEvent($c)));
                  }
                  return (
                    null !== s && (s.visible = null !== r),
                    null !== o && (o.visible = null !== i),
                    null !== l && (l.visible = null !== a),
                    this
                  );
                }
              },
              {
                key: "_getHandJoint",
                value: function (e, t) {
                  if (void 0 === e.joints[t.jointName]) {
                    var n = new Jc();
                    (n.matrixAutoUpdate = !1),
                      (n.visible = !1),
                      (e.joints[t.jointName] = n),
                      e.add(n);
                  }
                  return e.joints[t.jointName];
                }
              }
            ]),
            e
          );
        })(),
        ed = (function (e) {
          function t(e, n) {
            var r;
            Fi(this, t);
            var i = Pi((r = Mi(this, t))),
              a = null,
              s = 1,
              o = null,
              l = "local-floor",
              h = 1,
              u = null,
              c = null,
              d = null,
              f = null,
              p = null,
              m = null,
              g = n.getContextAttributes(),
              v = null,
              y = null,
              _ = [],
              b = [],
              x = new Cs(),
              S = null,
              E = new ch();
            E.layers.enable(1), (E.viewport = new Zs());
            var w = new ch();
            w.layers.enable(2), (w.viewport = new Zs());
            var T = [E, w],
              M = new Zc();
            M.layers.enable(1), M.layers.enable(2);
            var A = null,
              C = null;
            function P(e) {
              var t = b.indexOf(e.inputSource);
              if (-1 !== t) {
                var n = _[t];
                void 0 !== n &&
                  (n.update(e.inputSource, e.frame, u || o),
                  n.dispatchEvent({ type: e.type, data: e.inputSource }));
              }
            }
            function k() {
              a.removeEventListener("select", P),
                a.removeEventListener("selectstart", P),
                a.removeEventListener("selectend", P),
                a.removeEventListener("squeeze", P),
                a.removeEventListener("squeezestart", P),
                a.removeEventListener("squeezeend", P),
                a.removeEventListener("end", k),
                a.removeEventListener("inputsourceschange", R);
              for (var t = 0; t < _.length; t++) {
                var n = b[t];
                null !== n && ((b[t] = null), _[t].disconnect(n));
              }
              (A = null),
                (C = null),
                e.setRenderTarget(v),
                (p = null),
                (f = null),
                (d = null),
                (a = null),
                (y = null),
                O.stop(),
                (i.isPresenting = !1),
                e.setPixelRatio(S),
                e.setSize(x.width, x.height, !1),
                i.dispatchEvent({ type: "sessionend" });
            }
            function R(e) {
              for (var t = 0; t < e.removed.length; t++) {
                var n = e.removed[t],
                  r = b.indexOf(n);
                r >= 0 && ((b[r] = null), _[r].disconnect(n));
              }
              for (var i = 0; i < e.added.length; i++) {
                var a = e.added[i],
                  s = b.indexOf(a);
                if (-1 === s) {
                  for (var o = 0; o < _.length; o++) {
                    if (o >= b.length) {
                      b.push(a), (s = o);
                      break;
                    }
                    if (null === b[o]) {
                      (b[o] = a), (s = o);
                      break;
                    }
                  }
                  if (-1 === s) break;
                }
                var l = _[s];
                l && l.connect(a);
              }
            }
            (r.cameraAutoUpdate = !0),
              (r.enabled = !1),
              (r.isPresenting = !1),
              (r.getController = function (e) {
                var t = _[e];
                return (
                  void 0 === t && ((t = new Qc()), (_[e] = t)),
                  t.getTargetRaySpace()
                );
              }),
              (r.getControllerGrip = function (e) {
                var t = _[e];
                return (
                  void 0 === t && ((t = new Qc()), (_[e] = t)), t.getGripSpace()
                );
              }),
              (r.getHand = function (e) {
                var t = _[e];
                return (
                  void 0 === t && ((t = new Qc()), (_[e] = t)), t.getHandSpace()
                );
              }),
              (r.setFramebufferScaleFactor = function (e) {
                (s = e),
                  !0 === i.isPresenting &&
                    console.warn(
                      "THREE.WebXRManager: Cannot change framebuffer scale while presenting."
                    );
              }),
              (r.setReferenceSpaceType = function (e) {
                (l = e),
                  !0 === i.isPresenting &&
                    console.warn(
                      "THREE.WebXRManager: Cannot change reference space type while presenting."
                    );
              }),
              (r.getReferenceSpace = function () {
                return u || o;
              }),
              (r.setReferenceSpace = function (e) {
                u = e;
              }),
              (r.getBaseLayer = function () {
                return null !== f ? f : p;
              }),
              (r.getBinding = function () {
                return d;
              }),
              (r.getFrame = function () {
                return m;
              }),
              (r.getSession = function () {
                return a;
              }),
              (r.setSession = (function () {
                var t,
                  r =
                    ((t = Ii().mark(function t(r) {
                      var c, m, _, b, E;
                      return Ii().wrap(
                        function (t) {
                          for (;;)
                            switch ((t.prev = t.next)) {
                              case 0:
                                if (null === (a = r)) {
                                  t.next = 27;
                                  break;
                                }
                                if (
                                  ((v = e.getRenderTarget()),
                                  a.addEventListener("select", P),
                                  a.addEventListener("selectstart", P),
                                  a.addEventListener("selectend", P),
                                  a.addEventListener("squeeze", P),
                                  a.addEventListener("squeezestart", P),
                                  a.addEventListener("squeezeend", P),
                                  a.addEventListener("end", k),
                                  a.addEventListener("inputsourceschange", R),
                                  !0 === g.xrCompatible)
                                ) {
                                  t.next = 14;
                                  break;
                                }
                                return (t.next = 14), n.makeXRCompatible();
                              case 14:
                                return (
                                  (S = e.getPixelRatio()),
                                  e.getSize(x),
                                  void 0 === a.renderState.layers ||
                                  !1 === e.capabilities.isWebGL2
                                    ? ((c = {
                                        antialias:
                                          void 0 !== a.renderState.layers ||
                                          g.antialias,
                                        alpha: !0,
                                        depth: g.depth,
                                        stencil: g.stencil,
                                        framebufferScaleFactor: s
                                      }),
                                      (p = new XRWebGLLayer(a, n, c)),
                                      a.updateRenderState({ baseLayer: p }),
                                      e.setPixelRatio(1),
                                      e.setSize(
                                        p.framebufferWidth,
                                        p.framebufferHeight,
                                        !1
                                      ),
                                      (y = new Js(
                                        p.framebufferWidth,
                                        p.framebufferHeight,
                                        {
                                          format: la,
                                          type: Qi,
                                          colorSpace: e.outputColorSpace,
                                          stencilBuffer: g.stencil
                                        }
                                      )))
                                    : ((m = null),
                                      (_ = null),
                                      (b = null),
                                      g.depth &&
                                        ((b = g.stencil
                                          ? n.DEPTH24_STENCIL8
                                          : n.DEPTH_COMPONENT24),
                                        (m = g.stencil ? ua : ha),
                                        (_ = g.stencil ? oa : na)),
                                      (E = {
                                        colorFormat: n.RGBA8,
                                        depthFormat: b,
                                        scaleFactor: s
                                      }),
                                      (d = new XRWebGLBinding(a, n)),
                                      (f = d.createProjectionLayer(E)),
                                      a.updateRenderState({ layers: [f] }),
                                      e.setPixelRatio(1),
                                      e.setSize(
                                        f.textureWidth,
                                        f.textureHeight,
                                        !1
                                      ),
                                      (y = new Js(
                                        f.textureWidth,
                                        f.textureHeight,
                                        {
                                          format: la,
                                          type: Qi,
                                          depthTexture: new ou(
                                            f.textureWidth,
                                            f.textureHeight,
                                            _,
                                            void 0,
                                            void 0,
                                            void 0,
                                            void 0,
                                            void 0,
                                            void 0,
                                            m
                                          ),
                                          stencilBuffer: g.stencil,
                                          colorSpace: e.outputColorSpace,
                                          samples: g.antialias ? 4 : 0
                                        }
                                      )),
                                      (e.properties.get(y).__ignoreDepthValues =
                                        f.ignoreDepthValues)),
                                  (y.isXRRenderTarget = !0),
                                  this.setFoveation(h),
                                  (u = null),
                                  (t.next = 22),
                                  a.requestReferenceSpace(l)
                                );
                              case 22:
                                (o = t.sent),
                                  O.setContext(a),
                                  O.start(),
                                  (i.isPresenting = !0),
                                  i.dispatchEvent({ type: "sessionstart" });
                              case 27:
                              case "end":
                                return t.stop();
                            }
                        },
                        t,
                        this
                      );
                    })),
                    function () {
                      var e = this,
                        n = arguments;
                      return new Promise(function (r, i) {
                        var a = t.apply(e, n);
                        function s(e) {
                          yi(a, r, i, s, o, "next", e);
                        }
                        function o(e) {
                          yi(a, r, i, s, o, "throw", e);
                        }
                        s(void 0);
                      });
                    });
                return function (e) {
                  return r.apply(this, arguments);
                };
              })()),
              (r.getEnvironmentBlendMode = function () {
                if (null !== a) return a.environmentBlendMode;
              });
            var D = new to(),
              I = new to();
            function L(e, t) {
              null === t
                ? e.matrixWorld.copy(e.matrix)
                : e.matrixWorld.multiplyMatrices(t.matrixWorld, e.matrix),
                e.matrixWorldInverse.copy(e.matrixWorld).invert();
            }
            (r.updateCamera = function (e) {
              if (null !== a) {
                (M.near = w.near = E.near = e.near),
                  (M.far = w.far = E.far = e.far),
                  (A === M.near && C === M.far) ||
                    (a.updateRenderState({ depthNear: M.near, depthFar: M.far }),
                    (A = M.near),
                    (C = M.far));
                var t = e.parent,
                  n = M.cameras;
                L(M, t);
                for (var r = 0; r < n.length; r++) L(n[r], t);
                2 === n.length
                  ? (function (e, t, n) {
                      D.setFromMatrixPosition(t.matrixWorld),
                        I.setFromMatrixPosition(n.matrixWorld);
                      var r = D.distanceTo(I),
                        i = t.projectionMatrix.elements,
                        a = n.projectionMatrix.elements,
                        s = i[14] / (i[10] - 1),
                        o = i[14] / (i[10] + 1),
                        l = (i[9] + 1) / i[5],
                        h = (i[9] - 1) / i[5],
                        u = (i[8] - 1) / i[0],
                        c = (a[8] + 1) / a[0],
                        d = s * u,
                        f = s * c,
                        p = r / (-u + c),
                        m = p * -u;
                      t.matrixWorld.decompose(e.position, e.quaternion, e.scale),
                        e.translateX(m),
                        e.translateZ(p),
                        e.matrixWorld.compose(e.position, e.quaternion, e.scale),
                        e.matrixWorldInverse.copy(e.matrixWorld).invert();
                      var g = s + p,
                        v = o + p,
                        y = d - m,
                        _ = f + (r - m),
                        b = ((l * o) / v) * g,
                        x = ((h * o) / v) * g;
                      e.projectionMatrix.makePerspective(y, _, b, x, g, v),
                        e.projectionMatrixInverse
                          .copy(e.projectionMatrix)
                          .invert();
                    })(M, E, w)
                  : M.projectionMatrix.copy(E.projectionMatrix),
                  (function (e, t, n) {
                    null === n
                      ? e.matrix.copy(t.matrixWorld)
                      : (e.matrix.copy(n.matrixWorld),
                        e.matrix.invert(),
                        e.matrix.multiply(t.matrixWorld)),
                      e.matrix.decompose(e.position, e.quaternion, e.scale),
                      e.updateMatrixWorld(!0),
                      e.projectionMatrix.copy(t.projectionMatrix),
                      e.projectionMatrixInverse.copy(t.projectionMatrixInverse),
                      e.isPerspectiveCamera &&
                        ((e.fov =
                          2 * vs * Math.atan(1 / e.projectionMatrix.elements[5])),
                        (e.zoom = 1));
                  })(e, M, t);
              }
            }),
              (r.getCamera = function () {
                return M;
              }),
              (r.getFoveation = function () {
                if (null !== f || null !== p) return h;
              }),
              (r.setFoveation = function (e) {
                (h = e),
                  null !== f && (f.fixedFoveation = e),
                  null !== p &&
                    void 0 !== p.fixedFoveation &&
                    (p.fixedFoveation = e);
              });
            var F = null,
              O = new Eh();
            return (
              O.setAnimationLoop(function (t, n) {
                if (((c = n.getViewerPose(u || o)), (m = n), null !== c)) {
                  var r = c.views;
                  null !== p &&
                    (e.setRenderTargetFramebuffer(y, p.framebuffer),
                    e.setRenderTarget(y));
                  var a = !1;
                  r.length !== M.cameras.length &&
                    ((M.cameras.length = 0), (a = !0));
                  for (var s = 0; s < r.length; s++) {
                    var l = r[s],
                      h = null;
                    if (null !== p) h = p.getViewport(l);
                    else {
                      var g = d.getViewSubImage(f, l);
                      (h = g.viewport),
                        0 === s &&
                          (e.setRenderTargetTextures(
                            y,
                            g.colorTexture,
                            f.ignoreDepthValues ? void 0 : g.depthStencilTexture
                          ),
                          e.setRenderTarget(y));
                    }
                    var v = T[s];
                    void 0 === v &&
                      ((v = new ch()).layers.enable(s),
                      (v.viewport = new Zs()),
                      (T[s] = v)),
                      v.matrix.fromArray(l.transform.matrix),
                      v.matrix.decompose(v.position, v.quaternion, v.scale),
                      v.projectionMatrix.fromArray(l.projectionMatrix),
                      v.projectionMatrixInverse.copy(v.projectionMatrix).invert(),
                      v.viewport.set(h.x, h.y, h.width, h.height),
                      0 === s &&
                        (M.matrix.copy(v.matrix),
                        M.matrix.decompose(M.position, M.quaternion, M.scale)),
                      !0 === a && M.cameras.push(v);
                  }
                }
                for (var x = 0; x < _.length; x++) {
                  var S = b[x],
                    E = _[x];
                  null !== S && void 0 !== E && E.update(S, n, u || o);
                }
                F && F(t, n),
                  n.detectedPlanes &&
                    i.dispatchEvent({ type: "planesdetected", data: n }),
                  (m = null);
              }),
              (r.setAnimationLoop = function (e) {
                F = e;
              }),
              (r.dispose = function () {}),
              r
            );
          }
          return ki(t, e), Ni(t);
        })(ps);
      function td(e, t) {
        function n(e, t) {
          !0 === e.matrixAutoUpdate && e.updateMatrix(), t.value.copy(e.matrix);
        }
        function r(r, i) {
          (r.opacity.value = i.opacity),
            i.color && r.diffuse.value.copy(i.color),
            i.emissive &&
              r.emissive.value
                .copy(i.emissive)
                .multiplyScalar(i.emissiveIntensity),
            i.map && ((r.map.value = i.map), n(i.map, r.mapTransform)),
            i.alphaMap &&
              ((r.alphaMap.value = i.alphaMap),
              n(i.alphaMap, r.alphaMapTransform)),
            i.bumpMap &&
              ((r.bumpMap.value = i.bumpMap),
              n(i.bumpMap, r.bumpMapTransform),
              (r.bumpScale.value = i.bumpScale),
              1 === i.side && (r.bumpScale.value *= -1)),
            i.normalMap &&
              ((r.normalMap.value = i.normalMap),
              n(i.normalMap, r.normalMapTransform),
              r.normalScale.value.copy(i.normalScale),
              1 === i.side && r.normalScale.value.negate()),
            i.displacementMap &&
              ((r.displacementMap.value = i.displacementMap),
              n(i.displacementMap, r.displacementMapTransform),
              (r.displacementScale.value = i.displacementScale),
              (r.displacementBias.value = i.displacementBias)),
            i.emissiveMap &&
              ((r.emissiveMap.value = i.emissiveMap),
              n(i.emissiveMap, r.emissiveMapTransform)),
            i.specularMap &&
              ((r.specularMap.value = i.specularMap),
              n(i.specularMap, r.specularMapTransform)),
            i.alphaTest > 0 && (r.alphaTest.value = i.alphaTest);
          var a = t.get(i).envMap;
          if (
            (a &&
              ((r.envMap.value = a),
              (r.flipEnvMap.value =
                a.isCubeTexture && !1 === a.isRenderTargetTexture ? -1 : 1),
              (r.reflectivity.value = i.reflectivity),
              (r.ior.value = i.ior),
              (r.refractionRatio.value = i.refractionRatio)),
            i.lightMap)
          ) {
            r.lightMap.value = i.lightMap;
            var s = !0 === e._useLegacyLights ? Math.PI : 1;
            (r.lightMapIntensity.value = i.lightMapIntensity * s),
              n(i.lightMap, r.lightMapTransform);
          }
          i.aoMap &&
            ((r.aoMap.value = i.aoMap),
            (r.aoMapIntensity.value = i.aoMapIntensity),
            n(i.aoMap, r.aoMapTransform));
        }
        return {
          refreshFogUniforms: function (t, n) {
            n.color.getRGB(t.fogColor.value, oh(e)),
              n.isFog
                ? ((t.fogNear.value = n.near), (t.fogFar.value = n.far))
                : n.isFogExp2 && (t.fogDensity.value = n.density);
          },
          refreshMaterialUniforms: function (e, i, a, s, o) {
            i.isMeshBasicMaterial || i.isMeshLambertMaterial
              ? r(e, i)
              : i.isMeshToonMaterial
              ? (r(e, i),
                (function (e, t) {
                  t.gradientMap && (e.gradientMap.value = t.gradientMap);
                })(e, i))
              : i.isMeshPhongMaterial
              ? (r(e, i),
                (function (e, t) {
                  e.specular.value.copy(t.specular),
                    (e.shininess.value = Math.max(t.shininess, 1e-4));
                })(e, i))
              : i.isMeshStandardMaterial
              ? (r(e, i),
                (function (e, r) {
                  (e.metalness.value = r.metalness),
                    r.metalnessMap &&
                      ((e.metalnessMap.value = r.metalnessMap),
                      n(r.metalnessMap, e.metalnessMapTransform)),
                    (e.roughness.value = r.roughness),
                    r.roughnessMap &&
                      ((e.roughnessMap.value = r.roughnessMap),
                      n(r.roughnessMap, e.roughnessMapTransform)),
                    t.get(r).envMap &&
                      (e.envMapIntensity.value = r.envMapIntensity);
                })(e, i),
                i.isMeshPhysicalMaterial &&
                  (function (e, t, r) {
                    (e.ior.value = t.ior),
                      t.sheen > 0 &&
                        (e.sheenColor.value
                          .copy(t.sheenColor)
                          .multiplyScalar(t.sheen),
                        (e.sheenRoughness.value = t.sheenRoughness),
                        t.sheenColorMap &&
                          ((e.sheenColorMap.value = t.sheenColorMap),
                          n(t.sheenColorMap, e.sheenColorMapTransform)),
                        t.sheenRoughnessMap &&
                          ((e.sheenRoughnessMap.value = t.sheenRoughnessMap),
                          n(t.sheenRoughnessMap, e.sheenRoughnessMapTransform))),
                      t.clearcoat > 0 &&
                        ((e.clearcoat.value = t.clearcoat),
                        (e.clearcoatRoughness.value = t.clearcoatRoughness),
                        t.clearcoatMap &&
                          ((e.clearcoatMap.value = t.clearcoatMap),
                          n(t.clearcoatMap, e.clearcoatMapTransform)),
                        t.clearcoatRoughnessMap &&
                          ((e.clearcoatRoughnessMap.value =
                            t.clearcoatRoughnessMap),
                          n(
                            t.clearcoatRoughnessMap,
                            e.clearcoatRoughnessMapTransform
                          )),
                        t.clearcoatNormalMap &&
                          ((e.clearcoatNormalMap.value = t.clearcoatNormalMap),
                          n(t.clearcoatNormalMap, e.clearcoatNormalMapTransform),
                          e.clearcoatNormalScale.value.copy(
                            t.clearcoatNormalScale
                          ),
                          1 === t.side && e.clearcoatNormalScale.value.negate())),
                      t.iridescence > 0 &&
                        ((e.iridescence.value = t.iridescence),
                        (e.iridescenceIOR.value = t.iridescenceIOR),
                        (e.iridescenceThicknessMinimum.value =
                          t.iridescenceThicknessRange[0]),
                        (e.iridescenceThicknessMaximum.value =
                          t.iridescenceThicknessRange[1]),
                        t.iridescenceMap &&
                          ((e.iridescenceMap.value = t.iridescenceMap),
                          n(t.iridescenceMap, e.iridescenceMapTransform)),
                        t.iridescenceThicknessMap &&
                          ((e.iridescenceThicknessMap.value =
                            t.iridescenceThicknessMap),
                          n(
                            t.iridescenceThicknessMap,
                            e.iridescenceThicknessMapTransform
                          ))),
                      t.transmission > 0 &&
                        ((e.transmission.value = t.transmission),
                        (e.transmissionSamplerMap.value = r.texture),
                        e.transmissionSamplerSize.value.set(r.width, r.height),
                        t.transmissionMap &&
                          ((e.transmissionMap.value = t.transmissionMap),
                          n(t.transmissionMap, e.transmissionMapTransform)),
                        (e.thickness.value = t.thickness),
                        t.thicknessMap &&
                          ((e.thicknessMap.value = t.thicknessMap),
                          n(t.thicknessMap, e.thicknessMapTransform)),
                        (e.attenuationDistance.value = t.attenuationDistance),
                        e.attenuationColor.value.copy(t.attenuationColor)),
                      t.anisotropy > 0 &&
                        (e.anisotropyVector.value.set(
                          t.anisotropy * Math.cos(t.anisotropyRotation),
                          t.anisotropy * Math.sin(t.anisotropyRotation)
                        ),
                        t.anisotropyMap &&
                          ((e.anisotropyMap.value = t.anisotropyMap),
                          n(t.anisotropyMap, e.anisotropyMapTransform))),
                      (e.specularIntensity.value = t.specularIntensity),
                      e.specularColor.value.copy(t.specularColor),
                      t.specularColorMap &&
                        ((e.specularColorMap.value = t.specularColorMap),
                        n(t.specularColorMap, e.specularColorMapTransform)),
                      t.specularIntensityMap &&
                        ((e.specularIntensityMap.value = t.specularIntensityMap),
                        n(
                          t.specularIntensityMap,
                          e.specularIntensityMapTransform
                        ));
                  })(e, i, o))
              : i.isMeshMatcapMaterial
              ? (r(e, i),
                (function (e, t) {
                  t.matcap && (e.matcap.value = t.matcap);
                })(e, i))
              : i.isMeshDepthMaterial
              ? r(e, i)
              : i.isMeshDistanceMaterial
              ? (r(e, i),
                (function (e, n) {
                  var r = t.get(n).light;
                  e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),
                    (e.nearDistance.value = r.shadow.camera.near),
                    (e.farDistance.value = r.shadow.camera.far);
                })(e, i))
              : i.isMeshNormalMaterial
              ? r(e, i)
              : i.isLineBasicMaterial
              ? ((function (e, t) {
                  e.diffuse.value.copy(t.color),
                    (e.opacity.value = t.opacity),
                    t.map && ((e.map.value = t.map), n(t.map, e.mapTransform));
                })(e, i),
                i.isLineDashedMaterial &&
                  (function (e, t) {
                    (e.dashSize.value = t.dashSize),
                      (e.totalSize.value = t.dashSize + t.gapSize),
                      (e.scale.value = t.scale);
                  })(e, i))
              : i.isPointsMaterial
              ? (function (e, t, r, i) {
                  e.diffuse.value.copy(t.color),
                    (e.opacity.value = t.opacity),
                    (e.size.value = t.size * r),
                    (e.scale.value = 0.5 * i),
                    t.map && ((e.map.value = t.map), n(t.map, e.uvTransform)),
                    t.alphaMap &&
                      ((e.alphaMap.value = t.alphaMap),
                      n(t.alphaMap, e.alphaMapTransform)),
                    t.alphaTest > 0 && (e.alphaTest.value = t.alphaTest);
                })(e, i, a, s)
              : i.isSpriteMaterial
              ? (function (e, t) {
                  e.diffuse.value.copy(t.color),
                    (e.opacity.value = t.opacity),
                    (e.rotation.value = t.rotation),
                    t.map && ((e.map.value = t.map), n(t.map, e.mapTransform)),
                    t.alphaMap &&
                      ((e.alphaMap.value = t.alphaMap),
                      n(t.alphaMap, e.alphaMapTransform)),
                    t.alphaTest > 0 && (e.alphaTest.value = t.alphaTest);
                })(e, i)
              : i.isShadowMaterial
              ? (e.color.value.copy(i.color), (e.opacity.value = i.opacity))
              : i.isShaderMaterial && (i.uniformsNeedUpdate = !1);
          }
        };
      }
      function nd(e, t, n, r) {
        var i = {},
          a = {},
          s = [],
          o = n.isWebGL2 ? e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS) : 0;
        function l(e, t, n, r) {
          var i = e.value,
            a = t + "_" + n;
          if (void 0 === r[a])
            return (
              (r[a] =
                "number" == typeof i || "boolean" == typeof i ? i : i.clone()),
              !0
            );
          var s = r[a];
          if ("number" == typeof i || "boolean" == typeof i) {
            if (s !== i) return (r[a] = i), !0;
          } else if (!1 === s.equals(i)) return s.copy(i), !0;
          return !1;
        }
        function h(e) {
          var t = { boundary: 0, storage: 0 };
          return (
            "number" == typeof e || "boolean" == typeof e
              ? ((t.boundary = 4), (t.storage = 4))
              : e.isVector2
              ? ((t.boundary = 8), (t.storage = 8))
              : e.isVector3 || e.isColor
              ? ((t.boundary = 16), (t.storage = 12))
              : e.isVector4
              ? ((t.boundary = 16), (t.storage = 16))
              : e.isMatrix3
              ? ((t.boundary = 48), (t.storage = 48))
              : e.isMatrix4
              ? ((t.boundary = 64), (t.storage = 64))
              : e.isTexture
              ? console.warn(
                  "THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."
                )
              : console.warn(
                  "THREE.WebGLRenderer: Unsupported uniform value type.",
                  e
                ),
            t
          );
        }
        function u(t) {
          var n = t.target;
          n.removeEventListener("dispose", u);
          var r = s.indexOf(n.__bindingPointIndex);
          s.splice(r, 1), e.deleteBuffer(i[n.id]), delete i[n.id], delete a[n.id];
        }
        return {
          bind: function (e, t) {
            var n = t.program;
            r.uniformBlockBinding(e, n);
          },
          update: function (n, c) {
            var d = i[n.id];
            void 0 === d &&
              ((function (e) {
                for (var t = e.uniforms, n = 0, r = 0, i = t.length; r < i; r++)
                  for (
                    var a = Array.isArray(t[r]) ? t[r] : [t[r]],
                      s = 0,
                      o = a.length;
                    s < o;
                    s++
                  )
                    for (
                      var l = a[s],
                        u = Array.isArray(l.value) ? l.value : [l.value],
                        c = 0,
                        d = u.length;
                      c < d;
                      c++
                    ) {
                      var f = h(u[c]),
                        p = n % 16;
                      0 !== p && 16 - p < f.boundary && (n += 16 - p),
                        (l.__data = new Float32Array(
                          f.storage / Float32Array.BYTES_PER_ELEMENT
                        )),
                        (l.__offset = n),
                        (n += f.storage);
                    }
                var m = n % 16;
                m > 0 && (n += 16 - m), (e.__size = n), (e.__cache = {});
              })(n),
              (d = (function (t) {
                var n = (function () {
                  for (var e = 0; e < o; e++)
                    if (-1 === s.indexOf(e)) return s.push(e), e;
                  return (
                    console.error(
                      "THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."
                    ),
                    0
                  );
                })();
                t.__bindingPointIndex = n;
                var r = e.createBuffer(),
                  i = t.__size,
                  a = t.usage;
                return (
                  e.bindBuffer(e.UNIFORM_BUFFER, r),
                  e.bufferData(e.UNIFORM_BUFFER, i, a),
                  e.bindBuffer(e.UNIFORM_BUFFER, null),
                  e.bindBufferBase(e.UNIFORM_BUFFER, n, r),
                  r
                );
              })(n)),
              (i[n.id] = d),
              n.addEventListener("dispose", u));
            var f = c.program;
            r.updateUBOMapping(n, f);
            var p = t.render.frame;
            a[n.id] !== p &&
              ((function (t) {
                var n = i[t.id],
                  r = t.uniforms,
                  a = t.__cache;
                e.bindBuffer(e.UNIFORM_BUFFER, n);
                for (var s = 0, o = r.length; s < o; s++)
                  for (
                    var u = Array.isArray(r[s]) ? r[s] : [r[s]],
                      c = 0,
                      d = u.length;
                    c < d;
                    c++
                  ) {
                    var f = u[c];
                    if (!0 === l(f, s, c, a)) {
                      for (
                        var p = f.__offset,
                          m = Array.isArray(f.value) ? f.value : [f.value],
                          g = 0,
                          v = 0;
                        v < m.length;
                        v++
                      ) {
                        var y = m[v],
                          _ = h(y);
                        "number" == typeof y || "boolean" == typeof y
                          ? ((f.__data[0] = y),
                            e.bufferSubData(e.UNIFORM_BUFFER, p + g, f.__data))
                          : y.isMatrix3
                          ? ((f.__data[0] = y.elements[0]),
                            (f.__data[1] = y.elements[1]),
                            (f.__data[2] = y.elements[2]),
                            (f.__data[3] = 0),
                            (f.__data[4] = y.elements[3]),
                            (f.__data[5] = y.elements[4]),
                            (f.__data[6] = y.elements[5]),
                            (f.__data[7] = 0),
                            (f.__data[8] = y.elements[6]),
                            (f.__data[9] = y.elements[7]),
                            (f.__data[10] = y.elements[8]),
                            (f.__data[11] = 0))
                          : (y.toArray(f.__data, g),
                            (g += _.storage / Float32Array.BYTES_PER_ELEMENT));
                      }
                      e.bufferSubData(e.UNIFORM_BUFFER, p, f.__data);
                    }
                  }
                e.bindBuffer(e.UNIFORM_BUFFER, null);
              })(n),
              (a[n.id] = p));
          },
          dispose: function () {
            for (var t in i) e.deleteBuffer(i[t]);
            (s = []), (i = {}), (a = {});
          }
        };
      }
      var rd = (function () {
        function e() {
          var t =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          Fi(this, e);
          var n,
            r = t.canvas,
            i = void 0 === r ? Is() : r,
            a = t.context,
            s = void 0 === a ? null : a,
            o = t.depth,
            l = void 0 === o || o,
            h = t.stencil,
            u = void 0 === h || h,
            c = t.alpha,
            d = void 0 !== c && c,
            f = t.antialias,
            p = void 0 !== f && f,
            m = t.premultipliedAlpha,
            g = void 0 === m || m,
            v = t.preserveDrawingBuffer,
            y = void 0 !== v && v,
            _ = t.powerPreference,
            b = void 0 === _ ? "default" : _,
            x = t.failIfMajorPerformanceCaveat,
            S = void 0 !== x && x;
          (this.isWebGLRenderer = !0),
            (n = null !== s ? s.getContextAttributes().alpha : d);
          var E = new Uint32Array(4),
            w = new Int32Array(4),
            T = null,
            M = null,
            A = [],
            C = [];
          (this.domElement = i),
            (this.debug = { checkShaderErrors: !0, onShaderError: null }),
            (this.autoClear = !0),
            (this.autoClearColor = !0),
            (this.autoClearDepth = !0),
            (this.autoClearStencil = !0),
            (this.sortObjects = !0),
            (this.clippingPlanes = []),
            (this.localClippingEnabled = !1),
            (this._outputColorSpace = es),
            (this._useLegacyLights = !1),
            (this.toneMapping = 0),
            (this.toneMappingExposure = 1);
          var P = this,
            k = !1,
            R = 0,
            D = 0,
            I = null,
            L = -1,
            F = null,
            O = new Zs(),
            N = new Zs(),
            B = null,
            U = new bl(0),
            z = 0,
            V = i.width,
            H = i.height,
            G = 1,
            W = null,
            j = null,
            X = new Zs(0, 0, V, H),
            q = new Zs(0, 0, V, H),
            Y = !1,
            K = new Sh(),
            Z = !1,
            J = !1,
            $ = null,
            Q = new Do(),
            ee = new Cs(),
            te = new to(),
            ne = {
              background: null,
              fog: null,
              environment: null,
              overrideMaterial: null,
              isScene: !0
            };
          function re() {
            return null === I ? G : 1;
          }
          var ie,
            ae,
            se,
            oe,
            le,
            he,
            ue,
            ce,
            de,
            fe,
            pe,
            me,
            ge,
            ve,
            ye,
            _e,
            be,
            xe,
            Se,
            Ee,
            we,
            Te,
            Me,
            Ae,
            Ce = s;
          function Pe(e, t) {
            for (var n = 0; n < e.length; n++) {
              var r = e[n],
                a = i.getContext(r, t);
              if (null !== a) return a;
            }
            return null;
          }
          try {
            var ke = {
              alpha: !0,
              depth: l,
              stencil: u,
              antialias: p,
              premultipliedAlpha: g,
              preserveDrawingBuffer: y,
              powerPreference: b,
              failIfMajorPerformanceCaveat: S
            };
            if (
              ("setAttribute" in i &&
                i.setAttribute("data-engine", "three.js r".concat(Ui)),
              i.addEventListener("webglcontextlost", Le, !1),
              i.addEventListener("webglcontextrestored", Fe, !1),
              i.addEventListener("webglcontextcreationerror", Oe, !1),
              null === Ce)
            ) {
              var Re = ["webgl2", "webgl", "experimental-webgl"];
              if (
                (!0 === P.isWebGL1Renderer && Re.shift(),
                null === (Ce = Pe(Re, ke)))
              )
                throw Pe(Re)
                  ? new Error(
                      "Error creating WebGL context with your selected attributes."
                    )
                  : new Error("Error creating WebGL context.");
            }
            "undefined" != typeof WebGLRenderingContext &&
              Ce instanceof WebGLRenderingContext &&
              console.warn(
                "THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."
              ),
              void 0 === Ce.getShaderPrecisionFormat &&
                (Ce.getShaderPrecisionFormat = function () {
                  return { rangeMin: 1, rangeMax: 1, precision: 1 };
                });
          } catch (e) {
            throw (console.error("THREE.WebGLRenderer: " + e.message), e);
          }
          function De() {
            (ie = new Qh(Ce)),
              (ae = new Ih(Ce, ie, t)),
              ie.init(ae),
              (Te = new Kc(Ce, ie, ae)),
              (se = new qc(Ce, ie, ae)),
              (oe = new nu(Ce)),
              (le = new Ic()),
              (he = new Yc(Ce, ie, se, le, ae, Te, oe)),
              (ue = new Fh(P)),
              (ce = new $h(P)),
              (de = new wh(Ce, ae)),
              (Me = new Rh(Ce, ie, de, ae)),
              (fe = new eu(Ce, de, oe, Me)),
              (pe = new su(Ce, fe, de, oe)),
              (Se = new au(Ce, ae, he)),
              (_e = new Lh(le)),
              (me = new Dc(P, ue, ce, ie, ae, Me, _e)),
              (ge = new td(P, le)),
              (ve = new Nc()),
              (ye = new Gc(ie, ae)),
              (xe = new kh(P, ue, ce, se, pe, n, g)),
              (be = new Xc(P, pe, ae)),
              (Ae = new nd(Ce, oe, ae, se)),
              (Ee = new Dh(Ce, ie, oe, ae)),
              (we = new tu(Ce, ie, oe, ae)),
              (oe.programs = me.programs),
              (P.capabilities = ae),
              (P.extensions = ie),
              (P.properties = le),
              (P.renderLists = ve),
              (P.shadowMap = be),
              (P.state = se),
              (P.info = oe);
          }
          De();
          var Ie = new ed(P, Ce);
          function Le(e) {
            e.preventDefault(),
              console.log("THREE.WebGLRenderer: Context Lost."),
              (k = !0);
          }
          function Fe() {
            console.log("THREE.WebGLRenderer: Context Restored."), (k = !1);
            var e = oe.autoReset,
              t = be.enabled,
              n = be.autoUpdate,
              r = be.needsUpdate,
              i = be.type;
            De(),
              (oe.autoReset = e),
              (be.enabled = t),
              (be.autoUpdate = n),
              (be.needsUpdate = r),
              (be.type = i);
          }
          function Oe(e) {
            console.error(
              "THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",
              e.statusMessage
            );
          }
          function Ne(e) {
            var t = e.target;
            t.removeEventListener("dispose", Ne), Be(t);
          }
          function Be(e) {
            Ue(e), le.remove(e);
          }
          function Ue(e) {
            var t = le.get(e).programs;
            void 0 !== t &&
              (t.forEach(function (e) {
                me.releaseProgram(e);
              }),
              e.isShaderMaterial && me.releaseShaderCache(e));
          }
          function ze(e, t, n) {
            !0 === e.transparent && 2 === e.side && !1 === e.forceSinglePass
              ? ((e.side = 1),
                (e.needsUpdate = !0),
                Je(e, t, n),
                (e.side = 0),
                (e.needsUpdate = !0),
                Je(e, t, n),
                (e.side = 2))
              : Je(e, t, n);
          }
          (this.xr = Ie),
            (this.getContext = function () {
              return Ce;
            }),
            (this.getContextAttributes = function () {
              return Ce.getContextAttributes();
            }),
            (this.forceContextLoss = function () {
              var e = ie.get("WEBGL_lose_context");
              e && e.loseContext();
            }),
            (this.forceContextRestore = function () {
              var e = ie.get("WEBGL_lose_context");
              e && e.restoreContext();
            }),
            (this.getPixelRatio = function () {
              return G;
            }),
            (this.setPixelRatio = function (e) {
              void 0 !== e && ((G = e), this.setSize(V, H, !1));
            }),
            (this.getSize = function (e) {
              return e.set(V, H);
            }),
            (this.setSize = function (e, t) {
              var n =
                !(arguments.length > 2 && void 0 !== arguments[2]) ||
                arguments[2];
              Ie.isPresenting
                ? console.warn(
                    "THREE.WebGLRenderer: Can't change size while VR device is presenting."
                  )
                : ((V = e),
                  (H = t),
                  (i.width = Math.floor(e * G)),
                  (i.height = Math.floor(t * G)),
                  !0 === n &&
                    ((i.style.width = e + "px"), (i.style.height = t + "px")),
                  this.setViewport(0, 0, e, t));
            }),
            (this.getDrawingBufferSize = function (e) {
              return e.set(V * G, H * G).floor();
            }),
            (this.setDrawingBufferSize = function (e, t, n) {
              (V = e),
                (H = t),
                (G = n),
                (i.width = Math.floor(e * n)),
                (i.height = Math.floor(t * n)),
                this.setViewport(0, 0, e, t);
            }),
            (this.getCurrentViewport = function (e) {
              return e.copy(O);
            }),
            (this.getViewport = function (e) {
              return e.copy(X);
            }),
            (this.setViewport = function (e, t, n, r) {
              e.isVector4 ? X.set(e.x, e.y, e.z, e.w) : X.set(e, t, n, r),
                se.viewport(O.copy(X).multiplyScalar(G).floor());
            }),
            (this.getScissor = function (e) {
              return e.copy(q);
            }),
            (this.setScissor = function (e, t, n, r) {
              e.isVector4 ? q.set(e.x, e.y, e.z, e.w) : q.set(e, t, n, r),
                se.scissor(N.copy(q).multiplyScalar(G).floor());
            }),
            (this.getScissorTest = function () {
              return Y;
            }),
            (this.setScissorTest = function (e) {
              se.setScissorTest((Y = e));
            }),
            (this.setOpaqueSort = function (e) {
              W = e;
            }),
            (this.setTransparentSort = function (e) {
              j = e;
            }),
            (this.getClearColor = function (e) {
              return e.copy(xe.getClearColor());
            }),
            (this.setClearColor = function () {
              xe.setClearColor.apply(xe, arguments);
            }),
            (this.getClearAlpha = function () {
              return xe.getClearAlpha();
            }),
            (this.setClearAlpha = function () {
              xe.setClearAlpha.apply(xe, arguments);
            }),
            (this.clear = function () {
              var e =
                  !(arguments.length > 0 && void 0 !== arguments[0]) ||
                  arguments[0],
                t =
                  !(arguments.length > 1 && void 0 !== arguments[1]) ||
                  arguments[1],
                n =
                  !(arguments.length > 2 && void 0 !== arguments[2]) ||
                  arguments[2],
                r = 0;
              if (e) {
                var i = !1;
                if (null !== I) {
                  var a = I.texture.format;
                  i = a === fa || a === da || a === ca;
                }
                if (i) {
                  var s = I.texture.type,
                    o =
                      s === Qi ||
                      s === na ||
                      s === ea ||
                      s === oa ||
                      s === aa ||
                      s === sa,
                    l = xe.getClearColor(),
                    h = xe.getClearAlpha(),
                    u = l.r,
                    c = l.g,
                    d = l.b;
                  o
                    ? ((E[0] = u),
                      (E[1] = c),
                      (E[2] = d),
                      (E[3] = h),
                      Ce.clearBufferuiv(Ce.COLOR, 0, E))
                    : ((w[0] = u),
                      (w[1] = c),
                      (w[2] = d),
                      (w[3] = h),
                      Ce.clearBufferiv(Ce.COLOR, 0, w));
                } else r |= Ce.COLOR_BUFFER_BIT;
              }
              t && (r |= Ce.DEPTH_BUFFER_BIT),
                n &&
                  ((r |= Ce.STENCIL_BUFFER_BIT),
                  this.state.buffers.stencil.setMask(4294967295)),
                Ce.clear(r);
            }),
            (this.clearColor = function () {
              this.clear(!0, !1, !1);
            }),
            (this.clearDepth = function () {
              this.clear(!1, !0, !1);
            }),
            (this.clearStencil = function () {
              this.clear(!1, !1, !0);
            }),
            (this.dispose = function () {
              i.removeEventListener("webglcontextlost", Le, !1),
                i.removeEventListener("webglcontextrestored", Fe, !1),
                i.removeEventListener("webglcontextcreationerror", Oe, !1),
                ve.dispose(),
                ye.dispose(),
                le.dispose(),
                ue.dispose(),
                ce.dispose(),
                pe.dispose(),
                Me.dispose(),
                Ae.dispose(),
                me.dispose(),
                Ie.dispose(),
                Ie.removeEventListener("sessionstart", Ge),
                Ie.removeEventListener("sessionend", We),
                $ && ($.dispose(), ($ = null)),
                je.stop();
            }),
            (this.renderBufferDirect = function (e, t, n, r, i, a) {
              null === t && (t = ne);
              var s = i.isMesh && i.matrixWorld.determinant() < 0,
                o = et(e, t, n, r, i);
              se.setMaterial(r, s);
              var l = n.index,
                h = 1;
              if (!0 === r.wireframe) {
                if (void 0 === (l = fe.getWireframeAttribute(n))) return;
                h = 2;
              }
              var u = n.drawRange,
                c = n.attributes.position,
                d = u.start * h,
                f = (u.start + u.count) * h;
              null !== a &&
                ((d = Math.max(d, a.start * h)),
                (f = Math.min(f, (a.start + a.count) * h))),
                null !== l
                  ? ((d = Math.max(d, 0)), (f = Math.min(f, l.count)))
                  : null != c &&
                    ((d = Math.max(d, 0)), (f = Math.min(f, c.count)));
              var p = f - d;
              if (!(p < 0 || p === 1 / 0)) {
                var m;
                Me.setup(i, r, o, n, l);
                var g = Ee;
                if (
                  (null !== l && ((m = de.get(l)), (g = we).setIndex(m)),
                  i.isMesh)
                )
                  !0 === r.wireframe
                    ? (se.setLineWidth(r.wireframeLinewidth * re()),
                      g.setMode(Ce.LINES))
                    : g.setMode(Ce.TRIANGLES);
                else if (i.isLine) {
                  var v = r.linewidth;
                  void 0 === v && (v = 1),
                    se.setLineWidth(v * re()),
                    i.isLineSegments
                      ? g.setMode(Ce.LINES)
                      : i.isLineLoop
                      ? g.setMode(Ce.LINE_LOOP)
                      : g.setMode(Ce.LINE_STRIP);
                } else
                  i.isPoints
                    ? g.setMode(Ce.POINTS)
                    : i.isSprite && g.setMode(Ce.TRIANGLES);
                if (i.isBatchedMesh)
                  g.renderMultiDraw(
                    i._multiDrawStarts,
                    i._multiDrawCounts,
                    i._multiDrawCount
                  );
                else if (i.isInstancedMesh) g.renderInstances(d, p, i.count);
                else if (n.isInstancedBufferGeometry) {
                  var y =
                      void 0 !== n._maxInstanceCount
                        ? n._maxInstanceCount
                        : 1 / 0,
                    _ = Math.min(n.instanceCount, y);
                  g.renderInstances(d, p, _);
                } else g.render(d, p);
              }
            }),
            (this.compile = function (e, t) {
              var n =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : null;
              null === n && (n = e),
                (M = ye.get(n)).init(),
                C.push(M),
                n.traverseVisible(function (e) {
                  e.isLight &&
                    e.layers.test(t.layers) &&
                    (M.pushLight(e), e.castShadow && M.pushShadow(e));
                }),
                e !== n &&
                  e.traverseVisible(function (e) {
                    e.isLight &&
                      e.layers.test(t.layers) &&
                      (M.pushLight(e), e.castShadow && M.pushShadow(e));
                  }),
                M.setupLights(P._useLegacyLights);
              var r = new Set();
              return (
                e.traverse(function (e) {
                  var t = e.material;
                  if (t)
                    if (Array.isArray(t))
                      for (var i = 0; i < t.length; i++) {
                        var a = t[i];
                        ze(a, n, e), r.add(a);
                      }
                    else ze(t, n, e), r.add(t);
                }),
                C.pop(),
                (M = null),
                r
              );
            }),
            (this.compileAsync = function (e, t) {
              var n =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : null,
                r = this.compile(e, t, n);
              return new Promise(function (t) {
                function n() {
                  r.forEach(function (e) {
                    le.get(e).currentProgram.isReady() && r.delete(e);
                  }),
                    0 !== r.size ? setTimeout(n, 10) : t(e);
                }
                null !== ie.get("KHR_parallel_shader_compile")
                  ? n()
                  : setTimeout(n, 10);
              });
            });
          var Ve = null;
          function He(e) {
            Ve && Ve(e);
          }
          function Ge() {
            je.stop();
          }
          function We() {
            je.start();
          }
          var je = new Eh();
          function Xe(e, t, n, r) {
            if (!1 !== e.visible) {
              if (e.layers.test(t.layers))
                if (e.isGroup) n = e.renderOrder;
                else if (e.isLOD) !0 === e.autoUpdate && e.update(t);
                else if (e.isLight)
                  M.pushLight(e), e.castShadow && M.pushShadow(e);
                else if (e.isSprite) {
                  if (!e.frustumCulled || K.intersectsSprite(e)) {
                    r && te.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Q);
                    var i = pe.update(e),
                      a = e.material;
                    a.visible && T.push(e, i, a, n, te.z, null);
                  }
                } else if (
                  (e.isMesh || e.isLine || e.isPoints) &&
                  (!e.frustumCulled || K.intersectsObject(e))
                ) {
                  var s = pe.update(e),
                    o = e.material;
                  if (
                    (r &&
                      (void 0 !== e.boundingSphere
                        ? (null === e.boundingSphere && e.computeBoundingSphere(),
                          te.copy(e.boundingSphere.center))
                        : (null === s.boundingSphere && s.computeBoundingSphere(),
                          te.copy(s.boundingSphere.center)),
                      te.applyMatrix4(e.matrixWorld).applyMatrix4(Q)),
                    Array.isArray(o))
                  )
                    for (var l = s.groups, h = 0, u = l.length; h < u; h++) {
                      var c = l[h],
                        d = o[c.materialIndex];
                      d && d.visible && T.push(e, s, d, n, te.z, c);
                    }
                  else o.visible && T.push(e, s, o, n, te.z, null);
                }
              for (var f = e.children, p = 0, m = f.length; p < m; p++)
                Xe(f[p], t, n, r);
            }
          }
          function qe(e, t, n, r) {
            var i = e.opaque,
              a = e.transmissive,
              s = e.transparent;
            M.setupLightsView(n),
              !0 === Z && _e.setGlobalState(P.clippingPlanes, n),
              a.length > 0 && Ye(i, a, t, n),
              r && se.viewport(O.copy(r)),
              i.length > 0 && Ke(i, t, n),
              a.length > 0 && Ke(a, t, n),
              s.length > 0 && Ke(s, t, n),
              se.buffers.depth.setTest(!0),
              se.buffers.depth.setMask(!0),
              se.buffers.color.setMask(!0),
              se.setPolygonOffset(!1);
          }
          function Ye(e, t, n, r) {
            if (null === (!0 === n.isScene ? n.overrideMaterial : null)) {
              var i = ae.isWebGL2;
              null === $ &&
                ($ = new Js(1, 1, {
                  generateMipmaps: !0,
                  type: ie.has("EXT_color_buffer_half_float") ? ia : Qi,
                  minFilter: $i,
                  samples: i ? 4 : 0
                })),
                P.getDrawingBufferSize(ee),
                i ? $.setSize(ee.x, ee.y) : $.setSize(Es(ee.x), Es(ee.y));
              var a = P.getRenderTarget();
              P.setRenderTarget($),
                P.getClearColor(U),
                (z = P.getClearAlpha()) < 1 && P.setClearColor(16777215, 0.5),
                P.clear();
              var s = P.toneMapping;
              (P.toneMapping = 0),
                Ke(e, n, r),
                he.updateMultisampleRenderTarget($),
                he.updateRenderTargetMipmap($);
              for (var o = !1, l = 0, h = t.length; l < h; l++) {
                var u = t[l],
                  c = u.object,
                  d = u.geometry,
                  f = u.material,
                  p = u.group;
                if (2 === f.side && c.layers.test(r.layers)) {
                  var m = f.side;
                  (f.side = 1),
                    (f.needsUpdate = !0),
                    Ze(c, n, r, d, f, p),
                    (f.side = m),
                    (f.needsUpdate = !0),
                    (o = !0);
                }
              }
              !0 === o &&
                (he.updateMultisampleRenderTarget($),
                he.updateRenderTargetMipmap($)),
                P.setRenderTarget(a),
                P.setClearColor(U, z),
                (P.toneMapping = s);
            }
          }
          function Ke(e, t, n) {
            for (
              var r = !0 === t.isScene ? t.overrideMaterial : null,
                i = 0,
                a = e.length;
              i < a;
              i++
            ) {
              var s = e[i],
                o = s.object,
                l = s.geometry,
                h = null === r ? s.material : r,
                u = s.group;
              o.layers.test(n.layers) && Ze(o, t, n, l, h, u);
            }
          }
          function Ze(e, t, n, r, i, a) {
            e.onBeforeRender(P, t, n, r, i, a),
              e.modelViewMatrix.multiplyMatrices(
                n.matrixWorldInverse,
                e.matrixWorld
              ),
              e.normalMatrix.getNormalMatrix(e.modelViewMatrix),
              i.onBeforeRender(P, t, n, r, e, a),
              !0 === i.transparent && 2 === i.side && !1 === i.forceSinglePass
                ? ((i.side = 1),
                  (i.needsUpdate = !0),
                  P.renderBufferDirect(n, t, r, i, e, a),
                  (i.side = 0),
                  (i.needsUpdate = !0),
                  P.renderBufferDirect(n, t, r, i, e, a),
                  (i.side = 2))
                : P.renderBufferDirect(n, t, r, i, e, a),
              e.onAfterRender(P, t, n, r, i, a);
          }
          function Je(e, t, n) {
            !0 !== t.isScene && (t = ne);
            var r = le.get(e),
              i = M.state.lights,
              a = M.state.shadowsArray,
              s = i.state.version,
              o = me.getParameters(e, i.state, a, t, n),
              l = me.getProgramCacheKey(o),
              h = r.programs;
            (r.environment = e.isMeshStandardMaterial ? t.environment : null),
              (r.fog = t.fog),
              (r.envMap = (e.isMeshStandardMaterial ? ce : ue).get(
                e.envMap || r.environment
              )),
              void 0 === h &&
                (e.addEventListener("dispose", Ne),
                (h = new Map()),
                (r.programs = h));
            var u = h.get(l);
            if (void 0 !== u) {
              if (r.currentProgram === u && r.lightsStateVersion === s)
                return Qe(e, o), u;
            } else
              (o.uniforms = me.getUniforms(e)),
                e.onBuild(n, o, P),
                e.onBeforeCompile(o, P),
                (u = me.acquireProgram(o, l)),
                h.set(l, u),
                (r.uniforms = o.uniforms);
            var c = r.uniforms;
            return (
              ((e.isShaderMaterial || e.isRawShaderMaterial) &&
                !0 !== e.clipping) ||
                (c.clippingPlanes = _e.uniform),
              Qe(e, o),
              (r.needsLights = nt(e)),
              (r.lightsStateVersion = s),
              r.needsLights &&
                ((c.ambientLightColor.value = i.state.ambient),
                (c.lightProbe.value = i.state.probe),
                (c.directionalLights.value = i.state.directional),
                (c.directionalLightShadows.value = i.state.directionalShadow),
                (c.spotLights.value = i.state.spot),
                (c.spotLightShadows.value = i.state.spotShadow),
                (c.rectAreaLights.value = i.state.rectArea),
                (c.ltc_1.value = i.state.rectAreaLTC1),
                (c.ltc_2.value = i.state.rectAreaLTC2),
                (c.pointLights.value = i.state.point),
                (c.pointLightShadows.value = i.state.pointShadow),
                (c.hemisphereLights.value = i.state.hemi),
                (c.directionalShadowMap.value = i.state.directionalShadowMap),
                (c.directionalShadowMatrix.value =
                  i.state.directionalShadowMatrix),
                (c.spotShadowMap.value = i.state.spotShadowMap),
                (c.spotLightMatrix.value = i.state.spotLightMatrix),
                (c.spotLightMap.value = i.state.spotLightMap),
                (c.pointShadowMap.value = i.state.pointShadowMap),
                (c.pointShadowMatrix.value = i.state.pointShadowMatrix)),
              (r.currentProgram = u),
              (r.uniformsList = null),
              u
            );
          }
          function $e(e) {
            if (null === e.uniformsList) {
              var t = e.currentProgram.getUniforms();
              e.uniformsList = dc.seqWithValue(t.seq, e.uniforms);
            }
            return e.uniformsList;
          }
          function Qe(e, t) {
            var n = le.get(e);
            (n.outputColorSpace = t.outputColorSpace),
              (n.batching = t.batching),
              (n.instancing = t.instancing),
              (n.instancingColor = t.instancingColor),
              (n.skinning = t.skinning),
              (n.morphTargets = t.morphTargets),
              (n.morphNormals = t.morphNormals),
              (n.morphColors = t.morphColors),
              (n.morphTargetsCount = t.morphTargetsCount),
              (n.numClippingPlanes = t.numClippingPlanes),
              (n.numIntersection = t.numClipIntersection),
              (n.vertexAlphas = t.vertexAlphas),
              (n.vertexTangents = t.vertexTangents),
              (n.toneMapping = t.toneMapping);
          }
          function et(e, t, n, r, i) {
            !0 !== t.isScene && (t = ne), he.resetTextureUnits();
            var a = t.fog,
              s = r.isMeshStandardMaterial ? t.environment : null,
              o =
                null === I
                  ? P.outputColorSpace
                  : !0 === I.isXRRenderTarget
                  ? I.texture.colorSpace
                  : ts,
              l = (r.isMeshStandardMaterial ? ce : ue).get(r.envMap || s),
              h =
                !0 === r.vertexColors &&
                !!n.attributes.color &&
                4 === n.attributes.color.itemSize,
              u = !!n.attributes.tangent && (!!r.normalMap || r.anisotropy > 0),
              c = !!n.morphAttributes.position,
              d = !!n.morphAttributes.normal,
              f = !!n.morphAttributes.color,
              p = 0;
            r.toneMapped &&
              ((null !== I && !0 !== I.isXRRenderTarget) || (p = P.toneMapping));
            var m =
                n.morphAttributes.position ||
                n.morphAttributes.normal ||
                n.morphAttributes.color,
              g = void 0 !== m ? m.length : 0,
              v = le.get(r),
              y = M.state.lights;
            if (!0 === Z && (!0 === J || e !== F)) {
              var _ = e === F && r.id === L;
              _e.setState(r, e, _);
            }
            var b = !1;
            r.version === v.__version
              ? (v.needsLights && v.lightsStateVersion !== y.state.version) ||
                v.outputColorSpace !== o ||
                (i.isBatchedMesh && !1 === v.batching)
                ? (b = !0)
                : i.isBatchedMesh || !0 !== v.batching
                ? i.isInstancedMesh && !1 === v.instancing
                  ? (b = !0)
                  : i.isInstancedMesh || !0 !== v.instancing
                  ? i.isSkinnedMesh && !1 === v.skinning
                    ? (b = !0)
                    : i.isSkinnedMesh || !0 !== v.skinning
                    ? (i.isInstancedMesh &&
                        !0 === v.instancingColor &&
                        null === i.instanceColor) ||
                      (i.isInstancedMesh &&
                        !1 === v.instancingColor &&
                        null !== i.instanceColor) ||
                      v.envMap !== l ||
                      (!0 === r.fog && v.fog !== a)
                      ? (b = !0)
                      : void 0 === v.numClippingPlanes ||
                        (v.numClippingPlanes === _e.numPlanes &&
                          v.numIntersection === _e.numIntersection)
                      ? (v.vertexAlphas !== h ||
                          v.vertexTangents !== u ||
                          v.morphTargets !== c ||
                          v.morphNormals !== d ||
                          v.morphColors !== f ||
                          v.toneMapping !== p ||
                          (!0 === ae.isWebGL2 && v.morphTargetsCount !== g)) &&
                        (b = !0)
                      : (b = !0)
                    : (b = !0)
                  : (b = !0)
                : (b = !0)
              : ((b = !0), (v.__version = r.version));
            var x = v.currentProgram;
            !0 === b && (x = Je(r, t, i));
            var S = !1,
              E = !1,
              w = !1,
              T = x.getUniforms(),
              A = v.uniforms;
            if (
              (se.useProgram(x.program) && ((S = !0), (E = !0), (w = !0)),
              r.id !== L && ((L = r.id), (E = !0)),
              S || F !== e)
            ) {
              T.setValue(Ce, "projectionMatrix", e.projectionMatrix),
                T.setValue(Ce, "viewMatrix", e.matrixWorldInverse);
              var C = T.map.cameraPosition;
              void 0 !== C &&
                C.setValue(Ce, te.setFromMatrixPosition(e.matrixWorld)),
                ae.logarithmicDepthBuffer &&
                  T.setValue(
                    Ce,
                    "logDepthBufFC",
                    2 / (Math.log(e.far + 1) / Math.LN2)
                  ),
                (r.isMeshPhongMaterial ||
                  r.isMeshToonMaterial ||
                  r.isMeshLambertMaterial ||
                  r.isMeshBasicMaterial ||
                  r.isMeshStandardMaterial ||
                  r.isShaderMaterial) &&
                  T.setValue(Ce, "isOrthographic", !0 === e.isOrthographicCamera),
                F !== e && ((F = e), (E = !0), (w = !0));
            }
            if (i.isSkinnedMesh) {
              T.setOptional(Ce, i, "bindMatrix"),
                T.setOptional(Ce, i, "bindMatrixInverse");
              var k = i.skeleton;
              k &&
                (ae.floatVertexTextures
                  ? (null === k.boneTexture && k.computeBoneTexture(),
                    T.setValue(Ce, "boneTexture", k.boneTexture, he))
                  : console.warn(
                      "THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."
                    ));
            }
            i.isBatchedMesh &&
              (T.setOptional(Ce, i, "batchingTexture"),
              T.setValue(Ce, "batchingTexture", i._matricesTexture, he));
            var R = n.morphAttributes;
            if (
              ((void 0 !== R.position ||
                void 0 !== R.normal ||
                (void 0 !== R.color && !0 === ae.isWebGL2)) &&
                Se.update(i, n, x),
              (E || v.receiveShadow !== i.receiveShadow) &&
                ((v.receiveShadow = i.receiveShadow),
                T.setValue(Ce, "receiveShadow", i.receiveShadow)),
              r.isMeshGouraudMaterial &&
                null !== r.envMap &&
                ((A.envMap.value = l),
                (A.flipEnvMap.value =
                  l.isCubeTexture && !1 === l.isRenderTargetTexture ? -1 : 1)),
              E &&
                (T.setValue(Ce, "toneMappingExposure", P.toneMappingExposure),
                v.needsLights && tt(A, w),
                a && !0 === r.fog && ge.refreshFogUniforms(A, a),
                ge.refreshMaterialUniforms(A, r, G, H, $),
                dc.upload(Ce, $e(v), A, he)),
              r.isShaderMaterial &&
                !0 === r.uniformsNeedUpdate &&
                (dc.upload(Ce, $e(v), A, he), (r.uniformsNeedUpdate = !1)),
              r.isSpriteMaterial && T.setValue(Ce, "center", i.center),
              T.setValue(Ce, "modelViewMatrix", i.modelViewMatrix),
              T.setValue(Ce, "normalMatrix", i.normalMatrix),
              T.setValue(Ce, "modelMatrix", i.matrixWorld),
              r.isShaderMaterial || r.isRawShaderMaterial)
            )
              for (var D = r.uniformsGroups, O = 0, N = D.length; O < N; O++)
                if (ae.isWebGL2) {
                  var B = D[O];
                  Ae.update(B, x), Ae.bind(B, x);
                } else
                  console.warn(
                    "THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2."
                  );
            return x;
          }
          function tt(e, t) {
            (e.ambientLightColor.needsUpdate = t),
              (e.lightProbe.needsUpdate = t),
              (e.directionalLights.needsUpdate = t),
              (e.directionalLightShadows.needsUpdate = t),
              (e.pointLights.needsUpdate = t),
              (e.pointLightShadows.needsUpdate = t),
              (e.spotLights.needsUpdate = t),
              (e.spotLightShadows.needsUpdate = t),
              (e.rectAreaLights.needsUpdate = t),
              (e.hemisphereLights.needsUpdate = t);
          }
          function nt(e) {
            return (
              e.isMeshLambertMaterial ||
              e.isMeshToonMaterial ||
              e.isMeshPhongMaterial ||
              e.isMeshStandardMaterial ||
              e.isShadowMaterial ||
              (e.isShaderMaterial && !0 === e.lights)
            );
          }
          je.setAnimationLoop(He),
            "undefined" != typeof self && je.setContext(self),
            (this.setAnimationLoop = function (e) {
              (Ve = e),
                Ie.setAnimationLoop(e),
                null === e ? je.stop() : je.start();
            }),
            Ie.addEventListener("sessionstart", Ge),
            Ie.addEventListener("sessionend", We),
            (this.render = function (e, t) {
              if (void 0 === t || !0 === t.isCamera) {
                if (!0 !== k) {
                  !0 === e.matrixWorldAutoUpdate && e.updateMatrixWorld(),
                    null === t.parent &&
                      !0 === t.matrixWorldAutoUpdate &&
                      t.updateMatrixWorld(),
                    !0 === Ie.enabled &&
                      !0 === Ie.isPresenting &&
                      (!0 === Ie.cameraAutoUpdate && Ie.updateCamera(t),
                      (t = Ie.getCamera())),
                    !0 === e.isScene && e.onBeforeRender(P, e, t, I),
                    (M = ye.get(e, C.length)).init(),
                    C.push(M),
                    Q.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse),
                    K.setFromProjectionMatrix(Q),
                    (J = this.localClippingEnabled),
                    (Z = _e.init(this.clippingPlanes, J)),
                    (T = ve.get(e, A.length)).init(),
                    A.push(T),
                    Xe(e, t, 0, P.sortObjects),
                    T.finish(),
                    !0 === P.sortObjects && T.sort(W, j),
                    this.info.render.frame++,
                    !0 === Z && _e.beginShadows();
                  var n = M.state.shadowsArray;
                  if (
                    (be.render(n, e, t),
                    !0 === Z && _e.endShadows(),
                    !0 === this.info.autoReset && this.info.reset(),
                    xe.render(T, e),
                    M.setupLights(P._useLegacyLights),
                    t.isArrayCamera)
                  )
                    for (var r = t.cameras, i = 0, a = r.length; i < a; i++) {
                      var s = r[i];
                      qe(T, e, s, s.viewport);
                    }
                  else qe(T, e, t);
                  null !== I &&
                    (he.updateMultisampleRenderTarget(I),
                    he.updateRenderTargetMipmap(I)),
                    !0 === e.isScene && e.onAfterRender(P, e, t),
                    Me.resetDefaultState(),
                    (L = -1),
                    (F = null),
                    C.pop(),
                    (M = C.length > 0 ? C[C.length - 1] : null),
                    A.pop(),
                    (T = A.length > 0 ? A[A.length - 1] : null);
                }
              } else
                console.error(
                  "THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."
                );
            }),
            (this.getActiveCubeFace = function () {
              return R;
            }),
            (this.getActiveMipmapLevel = function () {
              return D;
            }),
            (this.getRenderTarget = function () {
              return I;
            }),
            (this.setRenderTargetTextures = function (e, t, n) {
              (le.get(e.texture).__webglTexture = t),
                (le.get(e.depthTexture).__webglTexture = n);
              var r = le.get(e);
              (r.__hasExternalTextures = !0),
                r.__hasExternalTextures &&
                  ((r.__autoAllocateDepthBuffer = void 0 === n),
                  r.__autoAllocateDepthBuffer ||
                    (!0 === ie.has("WEBGL_multisampled_render_to_texture") &&
                      (console.warn(
                        "THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"
                      ),
                      (r.__useRenderToTexture = !1))));
            }),
            (this.setRenderTargetFramebuffer = function (e, t) {
              var n = le.get(e);
              (n.__webglFramebuffer = t),
                (n.__useDefaultFramebuffer = void 0 === t);
            }),
            (this.setRenderTarget = function (e) {
              var t =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0,
                n =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 0;
              (I = e), (R = t), (D = n);
              var r = !0,
                i = null,
                a = !1,
                s = !1;
              if (e) {
                var o = le.get(e);
                void 0 !== o.__useDefaultFramebuffer
                  ? (se.bindFramebuffer(Ce.FRAMEBUFFER, null), (r = !1))
                  : void 0 === o.__webglFramebuffer
                  ? he.setupRenderTarget(e)
                  : o.__hasExternalTextures &&
                    he.rebindTextures(
                      e,
                      le.get(e.texture).__webglTexture,
                      le.get(e.depthTexture).__webglTexture
                    );
                var l = e.texture;
                (l.isData3DTexture ||
                  l.isDataArrayTexture ||
                  l.isCompressedArrayTexture) &&
                  (s = !0);
                var h = le.get(e).__webglFramebuffer;
                e.isWebGLCubeRenderTarget
                  ? ((i = Array.isArray(h[t]) ? h[t][n] : h[t]), (a = !0))
                  : (i =
                      ae.isWebGL2 &&
                      e.samples > 0 &&
                      !1 === he.useMultisampledRTT(e)
                        ? le.get(e).__webglMultisampledFramebuffer
                        : Array.isArray(h)
                        ? h[n]
                        : h),
                  O.copy(e.viewport),
                  N.copy(e.scissor),
                  (B = e.scissorTest);
              } else
                O.copy(X).multiplyScalar(G).floor(),
                  N.copy(q).multiplyScalar(G).floor(),
                  (B = Y);
              var u = se.bindFramebuffer(Ce.FRAMEBUFFER, i);
              if (
                (u && ae.drawBuffers && r && se.drawBuffers(e, i),
                se.viewport(O),
                se.scissor(N),
                se.setScissorTest(B),
                a)
              ) {
                var c = le.get(e.texture);
                Ce.framebufferTexture2D(
                  Ce.FRAMEBUFFER,
                  Ce.COLOR_ATTACHMENT0,
                  Ce.TEXTURE_CUBE_MAP_POSITIVE_X + t,
                  c.__webglTexture,
                  n
                );
              } else if (s) {
                var d = le.get(e.texture),
                  f = t || 0;
                Ce.framebufferTextureLayer(
                  Ce.FRAMEBUFFER,
                  Ce.COLOR_ATTACHMENT0,
                  d.__webglTexture,
                  n || 0,
                  f
                );
              }
              L = -1;
            }),
            (this.readRenderTargetPixels = function (e, t, n, r, i, a, s) {
              if (e && e.isWebGLRenderTarget) {
                var o = le.get(e).__webglFramebuffer;
                if (
                  (e.isWebGLCubeRenderTarget && void 0 !== s && (o = o[s]), o)
                ) {
                  se.bindFramebuffer(Ce.FRAMEBUFFER, o);
                  try {
                    var l = e.texture,
                      h = l.format,
                      u = l.type;
                    if (
                      h !== la &&
                      Te.convert(h) !==
                        Ce.getParameter(Ce.IMPLEMENTATION_COLOR_READ_FORMAT)
                    )
                      return void console.error(
                        "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."
                      );
                    var c =
                      u === ia &&
                      (ie.has("EXT_color_buffer_half_float") ||
                        (ae.isWebGL2 && ie.has("EXT_color_buffer_float")));
                    if (
                      !(
                        u === Qi ||
                        Te.convert(u) ===
                          Ce.getParameter(Ce.IMPLEMENTATION_COLOR_READ_TYPE) ||
                        (u === ra &&
                          (ae.isWebGL2 ||
                            ie.has("OES_texture_float") ||
                            ie.has("WEBGL_color_buffer_float"))) ||
                        c
                      )
                    )
                      return void console.error(
                        "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."
                      );
                    t >= 0 &&
                      t <= e.width - r &&
                      n >= 0 &&
                      n <= e.height - i &&
                      Ce.readPixels(t, n, r, i, Te.convert(h), Te.convert(u), a);
                  } finally {
                    var d = null !== I ? le.get(I).__webglFramebuffer : null;
                    se.bindFramebuffer(Ce.FRAMEBUFFER, d);
                  }
                }
              } else
                console.error(
                  "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget."
                );
            }),
            (this.copyFramebufferToTexture = function (e, t) {
              var n =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 0,
                r = Math.pow(2, -n),
                i = Math.floor(t.image.width * r),
                a = Math.floor(t.image.height * r);
              he.setTexture2D(t, 0),
                Ce.copyTexSubImage2D(Ce.TEXTURE_2D, n, 0, 0, e.x, e.y, i, a),
                se.unbindTexture();
            }),
            (this.copyTextureToTexture = function (e, t, n) {
              var r =
                  arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : 0,
                i = t.image.width,
                a = t.image.height,
                s = Te.convert(n.format),
                o = Te.convert(n.type);
              he.setTexture2D(n, 0),
                Ce.pixelStorei(Ce.UNPACK_FLIP_Y_WEBGL, n.flipY),
                Ce.pixelStorei(
                  Ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                  n.premultiplyAlpha
                ),
                Ce.pixelStorei(Ce.UNPACK_ALIGNMENT, n.unpackAlignment),
                t.isDataTexture
                  ? Ce.texSubImage2D(
                      Ce.TEXTURE_2D,
                      r,
                      e.x,
                      e.y,
                      i,
                      a,
                      s,
                      o,
                      t.image.data
                    )
                  : t.isCompressedTexture
                  ? Ce.compressedTexSubImage2D(
                      Ce.TEXTURE_2D,
                      r,
                      e.x,
                      e.y,
                      t.mipmaps[0].width,
                      t.mipmaps[0].height,
                      s,
                      t.mipmaps[0].data
                    )
                  : Ce.texSubImage2D(Ce.TEXTURE_2D, r, e.x, e.y, s, o, t.image),
                0 === r && n.generateMipmaps && Ce.generateMipmap(Ce.TEXTURE_2D),
                se.unbindTexture();
            }),
            (this.copyTextureToTexture3D = function (e, t, n, r) {
              var i =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : 0;
              if (P.isWebGL1Renderer)
                console.warn(
                  "THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2."
                );
              else {
                var a,
                  s = e.max.x - e.min.x + 1,
                  o = e.max.y - e.min.y + 1,
                  l = e.max.z - e.min.z + 1,
                  h = Te.convert(r.format),
                  u = Te.convert(r.type);
                if (r.isData3DTexture) he.setTexture3D(r, 0), (a = Ce.TEXTURE_3D);
                else {
                  if (!r.isDataArrayTexture && !r.isCompressedArrayTexture)
                    return void console.warn(
                      "THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray."
                    );
                  he.setTexture2DArray(r, 0), (a = Ce.TEXTURE_2D_ARRAY);
                }
                Ce.pixelStorei(Ce.UNPACK_FLIP_Y_WEBGL, r.flipY),
                  Ce.pixelStorei(
                    Ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                    r.premultiplyAlpha
                  ),
                  Ce.pixelStorei(Ce.UNPACK_ALIGNMENT, r.unpackAlignment);
                var c = Ce.getParameter(Ce.UNPACK_ROW_LENGTH),
                  d = Ce.getParameter(Ce.UNPACK_IMAGE_HEIGHT),
                  f = Ce.getParameter(Ce.UNPACK_SKIP_PIXELS),
                  p = Ce.getParameter(Ce.UNPACK_SKIP_ROWS),
                  m = Ce.getParameter(Ce.UNPACK_SKIP_IMAGES),
                  g = n.isCompressedTexture ? n.mipmaps[i] : n.image;
                Ce.pixelStorei(Ce.UNPACK_ROW_LENGTH, g.width),
                  Ce.pixelStorei(Ce.UNPACK_IMAGE_HEIGHT, g.height),
                  Ce.pixelStorei(Ce.UNPACK_SKIP_PIXELS, e.min.x),
                  Ce.pixelStorei(Ce.UNPACK_SKIP_ROWS, e.min.y),
                  Ce.pixelStorei(Ce.UNPACK_SKIP_IMAGES, e.min.z),
                  n.isDataTexture || n.isData3DTexture
                    ? Ce.texSubImage3D(a, i, t.x, t.y, t.z, s, o, l, h, u, g.data)
                    : n.isCompressedArrayTexture
                    ? (console.warn(
                        "THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."
                      ),
                      Ce.compressedTexSubImage3D(
                        a,
                        i,
                        t.x,
                        t.y,
                        t.z,
                        s,
                        o,
                        l,
                        h,
                        g.data
                      ))
                    : Ce.texSubImage3D(a, i, t.x, t.y, t.z, s, o, l, h, u, g),
                  Ce.pixelStorei(Ce.UNPACK_ROW_LENGTH, c),
                  Ce.pixelStorei(Ce.UNPACK_IMAGE_HEIGHT, d),
                  Ce.pixelStorei(Ce.UNPACK_SKIP_PIXELS, f),
                  Ce.pixelStorei(Ce.UNPACK_SKIP_ROWS, p),
                  Ce.pixelStorei(Ce.UNPACK_SKIP_IMAGES, m),
                  0 === i && r.generateMipmaps && Ce.generateMipmap(a),
                  se.unbindTexture();
              }
            }),
            (this.initTexture = function (e) {
              e.isCubeTexture
                ? he.setTextureCube(e, 0)
                : e.isData3DTexture
                ? he.setTexture3D(e, 0)
                : e.isDataArrayTexture || e.isCompressedArrayTexture
                ? he.setTexture2DArray(e, 0)
                : he.setTexture2D(e, 0),
                se.unbindTexture();
            }),
            (this.resetState = function () {
              (R = 0), (D = 0), (I = null), se.reset(), Me.reset();
            }),
            "undefined" != typeof __THREE_DEVTOOLS__ &&
              __THREE_DEVTOOLS__.dispatchEvent(
                new CustomEvent("observe", { detail: this })
              );
        }
        return (
          Ni(e, [
            {
              key: "coordinateSystem",
              get: function () {
                return ds;
              }
            },
            {
              key: "outputColorSpace",
              get: function () {
                return this._outputColorSpace;
              },
              set: function (e) {
                this._outputColorSpace = e;
                var t = this.getContext();
                (t.drawingBufferColorSpace = e === ns ? "display-p3" : "srgb"),
                  (t.unpackColorSpace =
                    Vs.workingColorSpace === rs ? "display-p3" : "srgb");
              }
            },
            {
              key: "outputEncoding",
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."
                  ),
                  this.outputColorSpace === es ? $a : 3e3
                );
              },
              set: function (e) {
                console.warn(
                  "THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."
                ),
                  (this.outputColorSpace = e === $a ? es : ts);
              }
            },
            {
              key: "useLegacyLights",
              get: function () {
                return (
                  console.warn(
                    "THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."
                  ),
                  this._useLegacyLights
                );
              },
              set: function (e) {
                console.warn(
                  "THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."
                ),
                  (this._useLegacyLights = e);
              }
            }
          ]),
          e
        );
      })();
      (function (e) {
        function t() {
          return Fi(this, t), Mi(this, t, arguments);
        }
        return ki(t, e), Ni(t);
      })(rd).prototype.isWebGL1Renderer = !0;
      var id = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isScene = !0),
              (e.type = "Scene"),
              (e.background = null),
              (e.environment = null),
              (e.fog = null),
              (e.backgroundBlurriness = 0),
              (e.backgroundIntensity = 1),
              (e.overrideMaterial = null),
              "undefined" != typeof __THREE_DEVTOOLS__ &&
                __THREE_DEVTOOLS__.dispatchEvent(
                  new CustomEvent("observe", { detail: Pi(e) })
                ),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    null !== e.background &&
                      (this.background = e.background.clone()),
                    null !== e.environment &&
                      (this.environment = e.environment.clone()),
                    null !== e.fog && (this.fog = e.fog.clone()),
                    (this.backgroundBlurriness = e.backgroundBlurriness),
                    (this.backgroundIntensity = e.backgroundIntensity),
                    null !== e.overrideMaterial &&
                      (this.overrideMaterial = e.overrideMaterial.clone()),
                    (this.matrixAutoUpdate = e.matrixAutoUpdate),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = xi(Ci(t.prototype), "toJSON", this).call(this, e);
                  return (
                    null !== this.fog && (n.object.fog = this.fog.toJSON()),
                    this.backgroundBlurriness > 0 &&
                      (n.object.backgroundBlurriness = this.backgroundBlurriness),
                    1 !== this.backgroundIntensity &&
                      (n.object.backgroundIntensity = this.backgroundIntensity),
                    n
                  );
                }
              }
            ]),
            t
          );
        })(rl),
        ad = (function () {
          function e(t, n) {
            Fi(this, e),
              (this.isInterleavedBuffer = !0),
              (this.array = t),
              (this.stride = n),
              (this.count = void 0 !== t ? t.length / n : 0),
              (this.usage = hs),
              (this._updateRange = { offset: 0, count: -1 }),
              (this.updateRanges = []),
              (this.version = 0),
              (this.uuid = ys());
          }
          return (
            Ni(e, [
              { key: "onUploadCallback", value: function () {} },
              {
                key: "needsUpdate",
                set: function (e) {
                  !0 === e && this.version++;
                }
              },
              {
                key: "updateRange",
                get: function () {
                  return (
                    console.warn(
                      "THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."
                    ),
                    this._updateRange
                  );
                }
              },
              {
                key: "setUsage",
                value: function (e) {
                  return (this.usage = e), this;
                }
              },
              {
                key: "addUpdateRange",
                value: function (e, t) {
                  this.updateRanges.push({ start: e, count: t });
                }
              },
              {
                key: "clearUpdateRanges",
                value: function () {
                  this.updateRanges.length = 0;
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.array = new e.array.constructor(e.array)),
                    (this.count = e.count),
                    (this.stride = e.stride),
                    (this.usage = e.usage),
                    this
                  );
                }
              },
              {
                key: "copyAt",
                value: function (e, t, n) {
                  (e *= this.stride), (n *= t.stride);
                  for (var r = 0, i = this.stride; r < i; r++)
                    this.array[e + r] = t.array[n + r];
                  return this;
                }
              },
              {
                key: "set",
                value: function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0;
                  return this.array.set(e, t), this;
                }
              },
              {
                key: "clone",
                value: function (e) {
                  void 0 === e.arrayBuffers && (e.arrayBuffers = {}),
                    void 0 === this.array.buffer._uuid &&
                      (this.array.buffer._uuid = ys()),
                    void 0 === e.arrayBuffers[this.array.buffer._uuid] &&
                      (e.arrayBuffers[this.array.buffer._uuid] =
                        this.array.slice(0).buffer);
                  var t = new this.array.constructor(
                      e.arrayBuffers[this.array.buffer._uuid]
                    ),
                    n = new this.constructor(t, this.stride);
                  return n.setUsage(this.usage), n;
                }
              },
              {
                key: "onUpload",
                value: function (e) {
                  return (this.onUploadCallback = e), this;
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  return (
                    void 0 === e.arrayBuffers && (e.arrayBuffers = {}),
                    void 0 === this.array.buffer._uuid &&
                      (this.array.buffer._uuid = ys()),
                    void 0 === e.arrayBuffers[this.array.buffer._uuid] &&
                      (e.arrayBuffers[this.array.buffer._uuid] = Array.from(
                        new Uint32Array(this.array.buffer)
                      )),
                    {
                      uuid: this.uuid,
                      buffer: this.array.buffer._uuid,
                      type: this.array.constructor.name,
                      stride: this.stride
                    }
                  );
                }
              }
            ]),
            e
          );
        })(),
        sd = new to(),
        od = (function () {
          function e(t, n, r) {
            var i =
              arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
            Fi(this, e),
              (this.isInterleavedBufferAttribute = !0),
              (this.name = ""),
              (this.data = t),
              (this.itemSize = n),
              (this.offset = r),
              (this.normalized = i);
          }
          return (
            Ni(e, [
              {
                key: "count",
                get: function () {
                  return this.data.count;
                }
              },
              {
                key: "array",
                get: function () {
                  return this.data.array;
                }
              },
              {
                key: "needsUpdate",
                set: function (e) {
                  this.data.needsUpdate = e;
                }
              },
              {
                key: "applyMatrix4",
                value: function (e) {
                  for (var t = 0, n = this.data.count; t < n; t++)
                    sd.fromBufferAttribute(this, t),
                      sd.applyMatrix4(e),
                      this.setXYZ(t, sd.x, sd.y, sd.z);
                  return this;
                }
              },
              {
                key: "applyNormalMatrix",
                value: function (e) {
                  for (var t = 0, n = this.count; t < n; t++)
                    sd.fromBufferAttribute(this, t),
                      sd.applyNormalMatrix(e),
                      this.setXYZ(t, sd.x, sd.y, sd.z);
                  return this;
                }
              },
              {
                key: "transformDirection",
                value: function (e) {
                  for (var t = 0, n = this.count; t < n; t++)
                    sd.fromBufferAttribute(this, t),
                      sd.transformDirection(e),
                      this.setXYZ(t, sd.x, sd.y, sd.z);
                  return this;
                }
              },
              {
                key: "setX",
                value: function (e, t) {
                  return (
                    this.normalized && (t = Ts(t, this.array)),
                    (this.data.array[e * this.data.stride + this.offset] = t),
                    this
                  );
                }
              },
              {
                key: "setY",
                value: function (e, t) {
                  return (
                    this.normalized && (t = Ts(t, this.array)),
                    (this.data.array[e * this.data.stride + this.offset + 1] = t),
                    this
                  );
                }
              },
              {
                key: "setZ",
                value: function (e, t) {
                  return (
                    this.normalized && (t = Ts(t, this.array)),
                    (this.data.array[e * this.data.stride + this.offset + 2] = t),
                    this
                  );
                }
              },
              {
                key: "setW",
                value: function (e, t) {
                  return (
                    this.normalized && (t = Ts(t, this.array)),
                    (this.data.array[e * this.data.stride + this.offset + 3] = t),
                    this
                  );
                }
              },
              {
                key: "getX",
                value: function (e) {
                  var t = this.data.array[e * this.data.stride + this.offset];
                  return this.normalized && (t = ws(t, this.array)), t;
                }
              },
              {
                key: "getY",
                value: function (e) {
                  var t = this.data.array[e * this.data.stride + this.offset + 1];
                  return this.normalized && (t = ws(t, this.array)), t;
                }
              },
              {
                key: "getZ",
                value: function (e) {
                  var t = this.data.array[e * this.data.stride + this.offset + 2];
                  return this.normalized && (t = ws(t, this.array)), t;
                }
              },
              {
                key: "getW",
                value: function (e) {
                  var t = this.data.array[e * this.data.stride + this.offset + 3];
                  return this.normalized && (t = ws(t, this.array)), t;
                }
              },
              {
                key: "setXY",
                value: function (e, t, n) {
                  return (
                    (e = e * this.data.stride + this.offset),
                    this.normalized &&
                      ((t = Ts(t, this.array)), (n = Ts(n, this.array))),
                    (this.data.array[e + 0] = t),
                    (this.data.array[e + 1] = n),
                    this
                  );
                }
              },
              {
                key: "setXYZ",
                value: function (e, t, n, r) {
                  return (
                    (e = e * this.data.stride + this.offset),
                    this.normalized &&
                      ((t = Ts(t, this.array)),
                      (n = Ts(n, this.array)),
                      (r = Ts(r, this.array))),
                    (this.data.array[e + 0] = t),
                    (this.data.array[e + 1] = n),
                    (this.data.array[e + 2] = r),
                    this
                  );
                }
              },
              {
                key: "setXYZW",
                value: function (e, t, n, r, i) {
                  return (
                    (e = e * this.data.stride + this.offset),
                    this.normalized &&
                      ((t = Ts(t, this.array)),
                      (n = Ts(n, this.array)),
                      (r = Ts(r, this.array)),
                      (i = Ts(i, this.array))),
                    (this.data.array[e + 0] = t),
                    (this.data.array[e + 1] = n),
                    (this.data.array[e + 2] = r),
                    (this.data.array[e + 3] = i),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function (t) {
                  if (void 0 === t) {
                    console.log(
                      "THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data."
                    );
                    for (var n = [], r = 0; r < this.count; r++)
                      for (
                        var i = r * this.data.stride + this.offset, a = 0;
                        a < this.itemSize;
                        a++
                      )
                        n.push(this.data.array[i + a]);
                    return new Al(
                      new this.array.constructor(n),
                      this.itemSize,
                      this.normalized
                    );
                  }
                  return (
                    void 0 === t.interleavedBuffers &&
                      (t.interleavedBuffers = {}),
                    void 0 === t.interleavedBuffers[this.data.uuid] &&
                      (t.interleavedBuffers[this.data.uuid] = this.data.clone(t)),
                    new e(
                      t.interleavedBuffers[this.data.uuid],
                      this.itemSize,
                      this.offset,
                      this.normalized
                    )
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  if (void 0 === e) {
                    console.log(
                      "THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data."
                    );
                    for (var t = [], n = 0; n < this.count; n++)
                      for (
                        var r = n * this.data.stride + this.offset, i = 0;
                        i < this.itemSize;
                        i++
                      )
                        t.push(this.data.array[r + i]);
                    return {
                      itemSize: this.itemSize,
                      type: this.array.constructor.name,
                      array: t,
                      normalized: this.normalized
                    };
                  }
                  return (
                    void 0 === e.interleavedBuffers &&
                      (e.interleavedBuffers = {}),
                    void 0 === e.interleavedBuffers[this.data.uuid] &&
                      (e.interleavedBuffers[this.data.uuid] =
                        this.data.toJSON(e)),
                    {
                      isInterleavedBufferAttribute: !0,
                      itemSize: this.itemSize,
                      data: this.data.uuid,
                      offset: this.offset,
                      normalized: this.normalized
                    }
                  );
                }
              }
            ]),
            e
          );
        })(),
        ld = new to(),
        hd = new Zs(),
        ud = new Zs(),
        cd = new to(),
        dd = new Do(),
        fd = new to(),
        pd = new Eo(),
        md = new Do(),
        gd = new Ro(),
        vd = (function (e) {
          function t(e, n) {
            var r;
            return (
              Fi(this, t),
              ((r = Mi(this, t, [e, n])).isSkinnedMesh = !0),
              (r.type = "SkinnedMesh"),
              (r.bindMode = Vi),
              (r.bindMatrix = new Do()),
              (r.bindMatrixInverse = new Do()),
              (r.boundingBox = null),
              (r.boundingSphere = null),
              r
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "computeBoundingBox",
                value: function () {
                  var e = this.geometry;
                  null === this.boundingBox && (this.boundingBox = new io()),
                    this.boundingBox.makeEmpty();
                  for (
                    var t = e.getAttribute("position"), n = 0;
                    n < t.count;
                    n++
                  )
                    this.getVertexPosition(n, fd),
                      this.boundingBox.expandByPoint(fd);
                }
              },
              {
                key: "computeBoundingSphere",
                value: function () {
                  var e = this.geometry;
                  null === this.boundingSphere &&
                    (this.boundingSphere = new Eo()),
                    this.boundingSphere.makeEmpty();
                  for (
                    var t = e.getAttribute("position"), n = 0;
                    n < t.count;
                    n++
                  )
                    this.getVertexPosition(n, fd),
                      this.boundingSphere.expandByPoint(fd);
                }
              },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    (this.bindMode = e.bindMode),
                    this.bindMatrix.copy(e.bindMatrix),
                    this.bindMatrixInverse.copy(e.bindMatrixInverse),
                    (this.skeleton = e.skeleton),
                    null !== e.boundingBox &&
                      (this.boundingBox = e.boundingBox.clone()),
                    null !== e.boundingSphere &&
                      (this.boundingSphere = e.boundingSphere.clone()),
                    this
                  );
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.material,
                    r = this.matrixWorld;
                  void 0 !== n &&
                    (null === this.boundingSphere && this.computeBoundingSphere(),
                    pd.copy(this.boundingSphere),
                    pd.applyMatrix4(r),
                    !1 !== e.ray.intersectsSphere(pd) &&
                      (md.copy(r).invert(),
                      gd.copy(e.ray).applyMatrix4(md),
                      (null !== this.boundingBox &&
                        !1 === gd.intersectsBox(this.boundingBox)) ||
                        this._computeIntersections(e, t, gd)));
                }
              },
              {
                key: "getVertexPosition",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "getVertexPosition", this).call(
                      this,
                      e,
                      n
                    ),
                    this.applyBoneTransform(e, n),
                    n
                  );
                }
              },
              {
                key: "bind",
                value: function (e, t) {
                  (this.skeleton = e),
                    void 0 === t &&
                      (this.updateMatrixWorld(!0),
                      this.skeleton.calculateInverses(),
                      (t = this.matrixWorld)),
                    this.bindMatrix.copy(t),
                    this.bindMatrixInverse.copy(t).invert();
                }
              },
              {
                key: "pose",
                value: function () {
                  this.skeleton.pose();
                }
              },
              {
                key: "normalizeSkinWeights",
                value: function () {
                  for (
                    var e = new Zs(),
                      t = this.geometry.attributes.skinWeight,
                      n = 0,
                      r = t.count;
                    n < r;
                    n++
                  ) {
                    e.fromBufferAttribute(t, n);
                    var i = 1 / e.manhattanLength();
                    i !== 1 / 0 ? e.multiplyScalar(i) : e.set(1, 0, 0, 0),
                      t.setXYZW(n, e.x, e.y, e.z, e.w);
                  }
                }
              },
              {
                key: "updateMatrixWorld",
                value: function (e) {
                  xi(Ci(t.prototype), "updateMatrixWorld", this).call(this, e),
                    this.bindMode === Vi
                      ? this.bindMatrixInverse.copy(this.matrixWorld).invert()
                      : "detached" === this.bindMode
                      ? this.bindMatrixInverse.copy(this.bindMatrix).invert()
                      : console.warn(
                          "THREE.SkinnedMesh: Unrecognized bindMode: " +
                            this.bindMode
                        );
                }
              },
              {
                key: "applyBoneTransform",
                value: function (e, t) {
                  var n = this.skeleton,
                    r = this.geometry;
                  hd.fromBufferAttribute(r.attributes.skinIndex, e),
                    ud.fromBufferAttribute(r.attributes.skinWeight, e),
                    ld.copy(t).applyMatrix4(this.bindMatrix),
                    t.set(0, 0, 0);
                  for (var i = 0; i < 4; i++) {
                    var a = ud.getComponent(i);
                    if (0 !== a) {
                      var s = hd.getComponent(i);
                      dd.multiplyMatrices(
                        n.bones[s].matrixWorld,
                        n.boneInverses[s]
                      ),
                        t.addScaledVector(cd.copy(ld).applyMatrix4(dd), a);
                    }
                  }
                  return t.applyMatrix4(this.bindMatrixInverse);
                }
              },
              {
                key: "boneTransform",
                value: function (e, t) {
                  return (
                    console.warn(
                      "THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."
                    ),
                    this.applyBoneTransform(e, t)
                  );
                }
              }
            ]),
            t
          );
        })(nh),
        yd = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t), ((e = Mi(this, t)).isBone = !0), (e.type = "Bone"), e
            );
          }
          return ki(t, e), Ni(t);
        })(rl),
        _d = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : null,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a = arguments.length > 3 ? arguments[3] : void 0,
              s = arguments.length > 4 ? arguments[4] : void 0,
              o = arguments.length > 5 ? arguments[5] : void 0,
              l = arguments.length > 6 ? arguments[6] : void 0,
              h = arguments.length > 7 ? arguments[7] : void 0,
              u =
                arguments.length > 8 && void 0 !== arguments[8]
                  ? arguments[8]
                  : Yi,
              c =
                arguments.length > 9 && void 0 !== arguments[9]
                  ? arguments[9]
                  : Yi,
              d = arguments.length > 10 ? arguments[10] : void 0,
              f = arguments.length > 11 ? arguments[11] : void 0;
            return (
              Fi(this, t),
              ((e = Mi(this, t, [
                null,
                o,
                l,
                h,
                u,
                c,
                a,
                s,
                d,
                f
              ])).isDataTexture = !0),
              (e.image = { data: n, width: r, height: i }),
              (e.generateMipmaps = !1),
              (e.flipY = !1),
              (e.unpackAlignment = 1),
              e
            );
          }
          return ki(t, e), Ni(t);
        })(Ks),
        bd = new Do(),
        xd = new Do(),
        Sd = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : [],
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : [];
            Fi(this, e),
              (this.uuid = ys()),
              (this.bones = t.slice(0)),
              (this.boneInverses = n),
              (this.boneMatrices = null),
              (this.boneTexture = null),
              this.init();
          }
          return (
            Ni(e, [
              {
                key: "init",
                value: function () {
                  var e = this.bones,
                    t = this.boneInverses;
                  if (
                    ((this.boneMatrices = new Float32Array(16 * e.length)),
                    0 === t.length)
                  )
                    this.calculateInverses();
                  else if (e.length !== t.length) {
                    console.warn(
                      "THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."
                    ),
                      (this.boneInverses = []);
                    for (var n = 0, r = this.bones.length; n < r; n++)
                      this.boneInverses.push(new Do());
                  }
                }
              },
              {
                key: "calculateInverses",
                value: function () {
                  this.boneInverses.length = 0;
                  for (var e = 0, t = this.bones.length; e < t; e++) {
                    var n = new Do();
                    this.bones[e] && n.copy(this.bones[e].matrixWorld).invert(),
                      this.boneInverses.push(n);
                  }
                }
              },
              {
                key: "pose",
                value: function () {
                  for (var e = 0, t = this.bones.length; e < t; e++) {
                    var n = this.bones[e];
                    n && n.matrixWorld.copy(this.boneInverses[e]).invert();
                  }
                  for (var r = 0, i = this.bones.length; r < i; r++) {
                    var a = this.bones[r];
                    a &&
                      (a.parent && a.parent.isBone
                        ? (a.matrix.copy(a.parent.matrixWorld).invert(),
                          a.matrix.multiply(a.matrixWorld))
                        : a.matrix.copy(a.matrixWorld),
                      a.matrix.decompose(a.position, a.quaternion, a.scale));
                  }
                }
              },
              {
                key: "update",
                value: function () {
                  for (
                    var e = this.bones,
                      t = this.boneInverses,
                      n = this.boneMatrices,
                      r = this.boneTexture,
                      i = 0,
                      a = e.length;
                    i < a;
                    i++
                  ) {
                    var s = e[i] ? e[i].matrixWorld : xd;
                    bd.multiplyMatrices(s, t[i]), bd.toArray(n, 16 * i);
                  }
                  null !== r && (r.needsUpdate = !0);
                }
              },
              {
                key: "clone",
                value: function () {
                  return new e(this.bones, this.boneInverses);
                }
              },
              {
                key: "computeBoneTexture",
                value: function () {
                  var e = Math.sqrt(4 * this.bones.length);
                  (e = 4 * Math.ceil(e / 4)), (e = Math.max(e, 4));
                  var t = new Float32Array(e * e * 4);
                  t.set(this.boneMatrices);
                  var n = new _d(t, e, e, la, ra);
                  return (
                    (n.needsUpdate = !0),
                    (this.boneMatrices = t),
                    (this.boneTexture = n),
                    this
                  );
                }
              },
              {
                key: "getBoneByName",
                value: function (e) {
                  for (var t = 0, n = this.bones.length; t < n; t++) {
                    var r = this.bones[t];
                    if (r.name === e) return r;
                  }
                }
              },
              {
                key: "dispose",
                value: function () {
                  null !== this.boneTexture &&
                    (this.boneTexture.dispose(), (this.boneTexture = null));
                }
              },
              {
                key: "fromJSON",
                value: function (e, t) {
                  this.uuid = e.uuid;
                  for (var n = 0, r = e.bones.length; n < r; n++) {
                    var i = e.bones[n],
                      a = t[i];
                    void 0 === a &&
                      (console.warn(
                        "THREE.Skeleton: No bone found with UUID:",
                        i
                      ),
                      (a = new yd())),
                      this.bones.push(a),
                      this.boneInverses.push(
                        new Do().fromArray(e.boneInverses[n])
                      );
                  }
                  return this.init(), this;
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = {
                    metadata: {
                      version: 4.6,
                      type: "Skeleton",
                      generator: "Skeleton.toJSON"
                    },
                    bones: [],
                    boneInverses: []
                  };
                  e.uuid = this.uuid;
                  for (
                    var t = this.bones,
                      n = this.boneInverses,
                      r = 0,
                      i = t.length;
                    r < i;
                    r++
                  ) {
                    var a = t[r];
                    e.bones.push(a.uuid);
                    var s = n[r];
                    e.boneInverses.push(s.toArray());
                  }
                  return e;
                }
              }
            ]),
            e
          );
        })(),
        Ed = (function (e) {
          function t(e, n, r) {
            var i,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 1;
            return (
              Fi(this, t),
              ((i = Mi(this, t, [e, n, r])).isInstancedBufferAttribute = !0),
              (i.meshPerAttribute = a),
              i
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.meshPerAttribute = e.meshPerAttribute),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = xi(Ci(t.prototype), "toJSON", this).call(this);
                  return (
                    (e.meshPerAttribute = this.meshPerAttribute),
                    (e.isInstancedBufferAttribute = !0),
                    e
                  );
                }
              }
            ]),
            t
          );
        })(Al),
        wd = new Do(),
        Td = new Do(),
        Md = [],
        Ad = new io(),
        Cd = new Do(),
        Pd = new nh(),
        kd = new Eo(),
        Rd = (function (e) {
          function t(e, n, r) {
            var i;
            Fi(this, t),
              ((i = Mi(this, t, [e, n])).isInstancedMesh = !0),
              (i.instanceMatrix = new Ed(new Float32Array(16 * r), 16)),
              (i.instanceColor = null),
              (i.count = r),
              (i.boundingBox = null),
              (i.boundingSphere = null);
            for (var a = 0; a < r; a++) i.setMatrixAt(a, Cd);
            return i;
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "computeBoundingBox",
                value: function () {
                  var e = this.geometry,
                    t = this.count;
                  null === this.boundingBox && (this.boundingBox = new io()),
                    null === e.boundingBox && e.computeBoundingBox(),
                    this.boundingBox.makeEmpty();
                  for (var n = 0; n < t; n++)
                    this.getMatrixAt(n, wd),
                      Ad.copy(e.boundingBox).applyMatrix4(wd),
                      this.boundingBox.union(Ad);
                }
              },
              {
                key: "computeBoundingSphere",
                value: function () {
                  var e = this.geometry,
                    t = this.count;
                  null === this.boundingSphere &&
                    (this.boundingSphere = new Eo()),
                    null === e.boundingSphere && e.computeBoundingSphere(),
                    this.boundingSphere.makeEmpty();
                  for (var n = 0; n < t; n++)
                    this.getMatrixAt(n, wd),
                      kd.copy(e.boundingSphere).applyMatrix4(wd),
                      this.boundingSphere.union(kd);
                }
              },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    this.instanceMatrix.copy(e.instanceMatrix),
                    null !== e.instanceColor &&
                      (this.instanceColor = e.instanceColor.clone()),
                    (this.count = e.count),
                    null !== e.boundingBox &&
                      (this.boundingBox = e.boundingBox.clone()),
                    null !== e.boundingSphere &&
                      (this.boundingSphere = e.boundingSphere.clone()),
                    this
                  );
                }
              },
              {
                key: "getColorAt",
                value: function (e, t) {
                  t.fromArray(this.instanceColor.array, 3 * e);
                }
              },
              {
                key: "getMatrixAt",
                value: function (e, t) {
                  t.fromArray(this.instanceMatrix.array, 16 * e);
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.matrixWorld,
                    r = this.count;
                  if (
                    ((Pd.geometry = this.geometry),
                    (Pd.material = this.material),
                    void 0 !== Pd.material &&
                      (null === this.boundingSphere &&
                        this.computeBoundingSphere(),
                      kd.copy(this.boundingSphere),
                      kd.applyMatrix4(n),
                      !1 !== e.ray.intersectsSphere(kd)))
                  )
                    for (var i = 0; i < r; i++) {
                      this.getMatrixAt(i, wd),
                        Td.multiplyMatrices(n, wd),
                        (Pd.matrixWorld = Td),
                        Pd.raycast(e, Md);
                      for (var a = 0, s = Md.length; a < s; a++) {
                        var o = Md[a];
                        (o.instanceId = i), (o.object = this), t.push(o);
                      }
                      Md.length = 0;
                    }
                }
              },
              {
                key: "setColorAt",
                value: function (e, t) {
                  null === this.instanceColor &&
                    (this.instanceColor = new Ed(
                      new Float32Array(3 * this.instanceMatrix.count),
                      3
                    )),
                    t.toArray(this.instanceColor.array, 3 * e);
                }
              },
              {
                key: "setMatrixAt",
                value: function (e, t) {
                  t.toArray(this.instanceMatrix.array, 16 * e);
                }
              },
              { key: "updateMorphTargets", value: function () {} },
              {
                key: "dispose",
                value: function () {
                  this.dispatchEvent({ type: "dispose" });
                }
              }
            ]),
            t
          );
        })(nh),
        Dd = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isLineBasicMaterial = !0),
              (n.type = "LineBasicMaterial"),
              (n.color = new bl(16777215)),
              (n.map = null),
              (n.linewidth = 1),
              (n.linecap = "round"),
              (n.linejoin = "round"),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    this.color.copy(e.color),
                    (this.map = e.map),
                    (this.linewidth = e.linewidth),
                    (this.linecap = e.linecap),
                    (this.linejoin = e.linejoin),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(El),
        Id = new to(),
        Ld = new to(),
        Fd = new Do(),
        Od = new Ro(),
        Nd = new Eo(),
        Bd = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new Bl(),
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new Dd();
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isLine = !0),
              (e.type = "Line"),
              (e.geometry = n),
              (e.material = r),
              e.updateMorphTargets(),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    (this.material = Array.isArray(e.material)
                      ? e.material.slice()
                      : e.material),
                    (this.geometry = e.geometry),
                    this
                  );
                }
              },
              {
                key: "computeLineDistances",
                value: function () {
                  var e = this.geometry;
                  if (null === e.index) {
                    for (
                      var t = e.attributes.position, n = [0], r = 1, i = t.count;
                      r < i;
                      r++
                    )
                      Id.fromBufferAttribute(t, r - 1),
                        Ld.fromBufferAttribute(t, r),
                        (n[r] = n[r - 1]),
                        (n[r] += Id.distanceTo(Ld));
                    e.setAttribute("lineDistance", new kl(n, 1));
                  } else
                    console.warn(
                      "THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
                    );
                  return this;
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.geometry,
                    r = this.matrixWorld,
                    i = e.params.Line.threshold,
                    a = n.drawRange;
                  if (
                    (null === n.boundingSphere && n.computeBoundingSphere(),
                    Nd.copy(n.boundingSphere),
                    Nd.applyMatrix4(r),
                    (Nd.radius += i),
                    !1 !== e.ray.intersectsSphere(Nd))
                  ) {
                    Fd.copy(r).invert(), Od.copy(e.ray).applyMatrix4(Fd);
                    var s =
                        i / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                      o = s * s,
                      l = new to(),
                      h = new to(),
                      u = new to(),
                      c = new to(),
                      d = this.isLineSegments ? 2 : 1,
                      f = n.index,
                      p = n.attributes.position;
                    if (null !== f)
                      for (
                        var m = Math.max(0, a.start),
                          g = Math.min(f.count, a.start + a.count) - 1;
                        m < g;
                        m += d
                      ) {
                        var v = f.getX(m),
                          y = f.getX(m + 1);
                        if (
                          (l.fromBufferAttribute(p, v),
                          h.fromBufferAttribute(p, y),
                          !(Od.distanceSqToSegment(l, h, c, u) > o))
                        ) {
                          c.applyMatrix4(this.matrixWorld);
                          var _ = e.ray.origin.distanceTo(c);
                          _ < e.near ||
                            _ > e.far ||
                            t.push({
                              distance: _,
                              point: u.clone().applyMatrix4(this.matrixWorld),
                              index: m,
                              face: null,
                              faceIndex: null,
                              object: this
                            });
                        }
                      }
                    else
                      for (
                        var b = Math.max(0, a.start),
                          x = Math.min(p.count, a.start + a.count) - 1;
                        b < x;
                        b += d
                      )
                        if (
                          (l.fromBufferAttribute(p, b),
                          h.fromBufferAttribute(p, b + 1),
                          !(Od.distanceSqToSegment(l, h, c, u) > o))
                        ) {
                          c.applyMatrix4(this.matrixWorld);
                          var S = e.ray.origin.distanceTo(c);
                          S < e.near ||
                            S > e.far ||
                            t.push({
                              distance: S,
                              point: u.clone().applyMatrix4(this.matrixWorld),
                              index: b,
                              face: null,
                              faceIndex: null,
                              object: this
                            });
                        }
                  }
                }
              },
              {
                key: "updateMorphTargets",
                value: function () {
                  var e = this.geometry.morphAttributes,
                    t = Object.keys(e);
                  if (t.length > 0) {
                    var n = e[t[0]];
                    if (void 0 !== n) {
                      (this.morphTargetInfluences = []),
                        (this.morphTargetDictionary = {});
                      for (var r = 0, i = n.length; r < i; r++) {
                        var a = n[r].name || String(r);
                        this.morphTargetInfluences.push(0),
                          (this.morphTargetDictionary[a] = r);
                      }
                    }
                  }
                }
              }
            ]),
            t
          );
        })(rl),
        Ud = new to(),
        zd = new to(),
        Vd = (function (e) {
          function t(e, n) {
            var r;
            return (
              Fi(this, t),
              ((r = Mi(this, t, [e, n])).isLineSegments = !0),
              (r.type = "LineSegments"),
              r
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "computeLineDistances",
                value: function () {
                  var e = this.geometry;
                  if (null === e.index) {
                    for (
                      var t = e.attributes.position, n = [], r = 0, i = t.count;
                      r < i;
                      r += 2
                    )
                      Ud.fromBufferAttribute(t, r),
                        zd.fromBufferAttribute(t, r + 1),
                        (n[r] = 0 === r ? 0 : n[r - 1]),
                        (n[r + 1] = n[r] + Ud.distanceTo(zd));
                    e.setAttribute("lineDistance", new kl(n, 1));
                  } else
                    console.warn(
                      "THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry."
                    );
                  return this;
                }
              }
            ]),
            t
          );
        })(Bd),
        Hd = (function (e) {
          function t(e, n) {
            var r;
            return (
              Fi(this, t),
              ((r = Mi(this, t, [e, n])).isLineLoop = !0),
              (r.type = "LineLoop"),
              r
            );
          }
          return ki(t, e), Ni(t);
        })(Bd),
        Gd = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isPointsMaterial = !0),
              (n.type = "PointsMaterial"),
              (n.color = new bl(16777215)),
              (n.map = null),
              (n.alphaMap = null),
              (n.size = 1),
              (n.sizeAttenuation = !0),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    this.color.copy(e.color),
                    (this.map = e.map),
                    (this.alphaMap = e.alphaMap),
                    (this.size = e.size),
                    (this.sizeAttenuation = e.sizeAttenuation),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(El),
        Wd = new Do(),
        jd = new Ro(),
        Xd = new Eo(),
        qd = new to(),
        Yd = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new Bl(),
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : new Gd();
            return (
              Fi(this, t),
              ((e = Mi(this, t)).isPoints = !0),
              (e.type = "Points"),
              (e.geometry = n),
              (e.material = r),
              e.updateMorphTargets(),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    (this.material = Array.isArray(e.material)
                      ? e.material.slice()
                      : e.material),
                    (this.geometry = e.geometry),
                    this
                  );
                }
              },
              {
                key: "raycast",
                value: function (e, t) {
                  var n = this.geometry,
                    r = this.matrixWorld,
                    i = e.params.Points.threshold,
                    a = n.drawRange;
                  if (
                    (null === n.boundingSphere && n.computeBoundingSphere(),
                    Xd.copy(n.boundingSphere),
                    Xd.applyMatrix4(r),
                    (Xd.radius += i),
                    !1 !== e.ray.intersectsSphere(Xd))
                  ) {
                    Wd.copy(r).invert(), jd.copy(e.ray).applyMatrix4(Wd);
                    var s =
                        i / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                      o = s * s,
                      l = n.index,
                      h = n.attributes.position;
                    if (null !== l)
                      for (
                        var u = Math.max(0, a.start),
                          c = Math.min(l.count, a.start + a.count);
                        u < c;
                        u++
                      ) {
                        var d = l.getX(u);
                        qd.fromBufferAttribute(h, d), Kd(qd, d, o, r, e, t, this);
                      }
                    else
                      for (
                        var f = Math.max(0, a.start),
                          p = Math.min(h.count, a.start + a.count);
                        f < p;
                        f++
                      )
                        qd.fromBufferAttribute(h, f), Kd(qd, f, o, r, e, t, this);
                  }
                }
              },
              {
                key: "updateMorphTargets",
                value: function () {
                  var e = this.geometry.morphAttributes,
                    t = Object.keys(e);
                  if (t.length > 0) {
                    var n = e[t[0]];
                    if (void 0 !== n) {
                      (this.morphTargetInfluences = []),
                        (this.morphTargetDictionary = {});
                      for (var r = 0, i = n.length; r < i; r++) {
                        var a = n[r].name || String(r);
                        this.morphTargetInfluences.push(0),
                          (this.morphTargetDictionary[a] = r);
                      }
                    }
                  }
                }
              }
            ]),
            t
          );
        })(rl);
      function Kd(e, t, n, r, i, a, s) {
        var o = jd.distanceSqToPoint(e);
        if (o < n) {
          var l = new to();
          jd.closestPointToPoint(e, l), l.applyMatrix4(r);
          var h = i.ray.origin.distanceTo(l);
          if (h < i.near || h > i.far) return;
          a.push({
            distance: h,
            distanceToRay: Math.sqrt(o),
            point: l,
            index: t,
            face: null,
            object: s
          });
        }
      }
      var Zd = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : [],
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : [],
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 1,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 0;
            Fi(this, t),
              ((e = Mi(this, t)).type = "PolyhedronGeometry"),
              (e.parameters = { vertices: n, indices: r, radius: i, detail: a });
            var s = [],
              o = [];
            function l(e) {
              for (
                var t = new to(), n = new to(), i = new to(), a = 0;
                a < r.length;
                a += 3
              )
                p(r[a + 0], t), p(r[a + 1], n), p(r[a + 2], i), h(t, n, i, e);
            }
            function h(e, t, n, r) {
              for (var i = r + 1, a = [], s = 0; s <= i; s++) {
                a[s] = [];
                for (
                  var o = e.clone().lerp(n, s / i),
                    l = t.clone().lerp(n, s / i),
                    h = i - s,
                    u = 0;
                  u <= h;
                  u++
                )
                  a[s][u] = 0 === u && s === i ? o : o.clone().lerp(l, u / h);
              }
              for (var c = 0; c < i; c++)
                for (var d = 0; d < 2 * (i - c) - 1; d++) {
                  var p = Math.floor(d / 2);
                  d % 2 == 0
                    ? (f(a[c][p + 1]), f(a[c + 1][p]), f(a[c][p]))
                    : (f(a[c][p + 1]), f(a[c + 1][p + 1]), f(a[c + 1][p]));
                }
            }
            function u(e) {
              for (var t = new to(), n = 0; n < s.length; n += 3)
                (t.x = s[n + 0]),
                  (t.y = s[n + 1]),
                  (t.z = s[n + 2]),
                  t.normalize().multiplyScalar(e),
                  (s[n + 0] = t.x),
                  (s[n + 1] = t.y),
                  (s[n + 2] = t.z);
            }
            function c() {
              for (var e = new to(), t = 0; t < s.length; t += 3) {
                (e.x = s[t + 0]), (e.y = s[t + 1]), (e.z = s[t + 2]);
                var n = v(e) / 2 / Math.PI + 0.5,
                  r = y(e) / Math.PI + 0.5;
                o.push(n, 1 - r);
              }
              m(), d();
            }
            function d() {
              for (var e = 0; e < o.length; e += 6) {
                var t = o[e + 0],
                  n = o[e + 2],
                  r = o[e + 4],
                  i = Math.max(t, n, r),
                  a = Math.min(t, n, r);
                i > 0.9 &&
                  a < 0.1 &&
                  (t < 0.2 && (o[e + 0] += 1),
                  n < 0.2 && (o[e + 2] += 1),
                  r < 0.2 && (o[e + 4] += 1));
              }
            }
            function f(e) {
              s.push(e.x, e.y, e.z);
            }
            function p(e, t) {
              var r = 3 * e;
              (t.x = n[r + 0]), (t.y = n[r + 1]), (t.z = n[r + 2]);
            }
            function m() {
              for (
                var e = new to(),
                  t = new to(),
                  n = new to(),
                  r = new to(),
                  i = new Cs(),
                  a = new Cs(),
                  l = new Cs(),
                  h = 0,
                  u = 0;
                h < s.length;
                h += 9, u += 6
              ) {
                e.set(s[h + 0], s[h + 1], s[h + 2]),
                  t.set(s[h + 3], s[h + 4], s[h + 5]),
                  n.set(s[h + 6], s[h + 7], s[h + 8]),
                  i.set(o[u + 0], o[u + 1]),
                  a.set(o[u + 2], o[u + 3]),
                  l.set(o[u + 4], o[u + 5]),
                  r.copy(e).add(t).add(n).divideScalar(3);
                var c = v(r);
                g(i, u + 0, e, c), g(a, u + 2, t, c), g(l, u + 4, n, c);
              }
            }
            function g(e, t, n, r) {
              r < 0 && 1 === e.x && (o[t] = e.x - 1),
                0 === n.x && 0 === n.z && (o[t] = r / 2 / Math.PI + 0.5);
            }
            function v(e) {
              return Math.atan2(e.z, -e.x);
            }
            function y(e) {
              return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z));
            }
            return (
              l(a),
              u(i),
              c(),
              e.setAttribute("position", new kl(s, 3)),
              e.setAttribute("normal", new kl(s.slice(), 3)),
              e.setAttribute("uv", new kl(o, 2)),
              0 === a ? e.computeVertexNormals() : e.normalizeNormals(),
              e
            );
          }
          return (
            ki(t, e),
            Ni(
              t,
              [
                {
                  key: "copy",
                  value: function (e) {
                    return (
                      xi(Ci(t.prototype), "copy", this).call(this, e),
                      (this.parameters = Object.assign({}, e.parameters)),
                      this
                    );
                  }
                }
              ],
              [
                {
                  key: "fromJSON",
                  value: function (e) {
                    return new t(e.vertices, e.indices, e.radius, e.details);
                  }
                }
              ]
            ),
            t
          );
        })(Bl),
        Jd = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 0;
            Fi(this, t);
            var i = [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1],
              a = [
                0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1,
                4, 2
              ];
            return (
              ((e = Mi(this, t, [i, a, n, r])).type = "OctahedronGeometry"),
              (e.parameters = { radius: n, detail: r }),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, null, [
              {
                key: "fromJSON",
                value: function (e) {
                  return new t(e.radius, e.detail);
                }
              }
            ]),
            t
          );
        })(Zd),
        $d = (function (e) {
          function t() {
            var e,
              n =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 32,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 16,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 0,
              s =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : 2 * Math.PI,
              o =
                arguments.length > 5 && void 0 !== arguments[5]
                  ? arguments[5]
                  : 0,
              l =
                arguments.length > 6 && void 0 !== arguments[6]
                  ? arguments[6]
                  : Math.PI;
            Fi(this, t),
              ((e = Mi(this, t)).type = "SphereGeometry"),
              (e.parameters = {
                radius: n,
                widthSegments: r,
                heightSegments: i,
                phiStart: a,
                phiLength: s,
                thetaStart: o,
                thetaLength: l
              }),
              (r = Math.max(3, Math.floor(r))),
              (i = Math.max(2, Math.floor(i)));
            for (
              var h = Math.min(o + l, Math.PI),
                u = 0,
                c = [],
                d = new to(),
                f = new to(),
                p = [],
                m = [],
                g = [],
                v = [],
                y = 0;
              y <= i;
              y++
            ) {
              var _ = [],
                b = y / i,
                x = 0;
              0 === y && 0 === o
                ? (x = 0.5 / r)
                : y === i && h === Math.PI && (x = -0.5 / r);
              for (var S = 0; S <= r; S++) {
                var E = S / r;
                (d.x = -n * Math.cos(a + E * s) * Math.sin(o + b * l)),
                  (d.y = n * Math.cos(o + b * l)),
                  (d.z = n * Math.sin(a + E * s) * Math.sin(o + b * l)),
                  m.push(d.x, d.y, d.z),
                  f.copy(d).normalize(),
                  g.push(f.x, f.y, f.z),
                  v.push(E + x, 1 - b),
                  _.push(u++);
              }
              c.push(_);
            }
            for (var w = 0; w < i; w++)
              for (var T = 0; T < r; T++) {
                var M = c[w][T + 1],
                  A = c[w][T],
                  C = c[w + 1][T],
                  P = c[w + 1][T + 1];
                (0 !== w || o > 0) && p.push(M, A, P),
                  (w !== i - 1 || h < Math.PI) && p.push(A, C, P);
              }
            return (
              e.setIndex(p),
              e.setAttribute("position", new kl(m, 3)),
              e.setAttribute("normal", new kl(g, 3)),
              e.setAttribute("uv", new kl(v, 2)),
              e
            );
          }
          return (
            ki(t, e),
            Ni(
              t,
              [
                {
                  key: "copy",
                  value: function (e) {
                    return (
                      xi(Ci(t.prototype), "copy", this).call(this, e),
                      (this.parameters = Object.assign({}, e.parameters)),
                      this
                    );
                  }
                }
              ],
              [
                {
                  key: "fromJSON",
                  value: function (e) {
                    return new t(
                      e.radius,
                      e.widthSegments,
                      e.heightSegments,
                      e.phiStart,
                      e.phiLength,
                      e.thetaStart,
                      e.thetaLength
                    );
                  }
                }
              ]
            ),
            t
          );
        })(Bl),
        Qd = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isMeshStandardMaterial = !0),
              (n.defines = { STANDARD: "" }),
              (n.type = "MeshStandardMaterial"),
              (n.color = new bl(16777215)),
              (n.roughness = 1),
              (n.metalness = 0),
              (n.map = null),
              (n.lightMap = null),
              (n.lightMapIntensity = 1),
              (n.aoMap = null),
              (n.aoMapIntensity = 1),
              (n.emissive = new bl(0)),
              (n.emissiveIntensity = 1),
              (n.emissiveMap = null),
              (n.bumpMap = null),
              (n.bumpScale = 1),
              (n.normalMap = null),
              (n.normalMapType = 0),
              (n.normalScale = new Cs(1, 1)),
              (n.displacementMap = null),
              (n.displacementScale = 1),
              (n.displacementBias = 0),
              (n.roughnessMap = null),
              (n.metalnessMap = null),
              (n.alphaMap = null),
              (n.envMap = null),
              (n.envMapIntensity = 1),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              (n.wireframeLinecap = "round"),
              (n.wireframeLinejoin = "round"),
              (n.flatShading = !1),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.defines = { STANDARD: "" }),
                    this.color.copy(e.color),
                    (this.roughness = e.roughness),
                    (this.metalness = e.metalness),
                    (this.map = e.map),
                    (this.lightMap = e.lightMap),
                    (this.lightMapIntensity = e.lightMapIntensity),
                    (this.aoMap = e.aoMap),
                    (this.aoMapIntensity = e.aoMapIntensity),
                    this.emissive.copy(e.emissive),
                    (this.emissiveMap = e.emissiveMap),
                    (this.emissiveIntensity = e.emissiveIntensity),
                    (this.bumpMap = e.bumpMap),
                    (this.bumpScale = e.bumpScale),
                    (this.normalMap = e.normalMap),
                    (this.normalMapType = e.normalMapType),
                    this.normalScale.copy(e.normalScale),
                    (this.displacementMap = e.displacementMap),
                    (this.displacementScale = e.displacementScale),
                    (this.displacementBias = e.displacementBias),
                    (this.roughnessMap = e.roughnessMap),
                    (this.metalnessMap = e.metalnessMap),
                    (this.alphaMap = e.alphaMap),
                    (this.envMap = e.envMap),
                    (this.envMapIntensity = e.envMapIntensity),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    (this.wireframeLinecap = e.wireframeLinecap),
                    (this.wireframeLinejoin = e.wireframeLinejoin),
                    (this.flatShading = e.flatShading),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(El),
        ef = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isMeshPhysicalMaterial = !0),
              (n.defines = { STANDARD: "", PHYSICAL: "" }),
              (n.type = "MeshPhysicalMaterial"),
              (n.anisotropyRotation = 0),
              (n.anisotropyMap = null),
              (n.clearcoatMap = null),
              (n.clearcoatRoughness = 0),
              (n.clearcoatRoughnessMap = null),
              (n.clearcoatNormalScale = new Cs(1, 1)),
              (n.clearcoatNormalMap = null),
              (n.ior = 1.5),
              Object.defineProperty(Pi(n), "reflectivity", {
                get: function () {
                  return _s((2.5 * (this.ior - 1)) / (this.ior + 1), 0, 1);
                },
                set: function (e) {
                  this.ior = (1 + 0.4 * e) / (1 - 0.4 * e);
                }
              }),
              (n.iridescenceMap = null),
              (n.iridescenceIOR = 1.3),
              (n.iridescenceThicknessRange = [100, 400]),
              (n.iridescenceThicknessMap = null),
              (n.sheenColor = new bl(0)),
              (n.sheenColorMap = null),
              (n.sheenRoughness = 1),
              (n.sheenRoughnessMap = null),
              (n.transmissionMap = null),
              (n.thickness = 0),
              (n.thicknessMap = null),
              (n.attenuationDistance = 1 / 0),
              (n.attenuationColor = new bl(1, 1, 1)),
              (n.specularIntensity = 1),
              (n.specularIntensityMap = null),
              (n.specularColor = new bl(1, 1, 1)),
              (n.specularColorMap = null),
              (n._anisotropy = 0),
              (n._clearcoat = 0),
              (n._iridescence = 0),
              (n._sheen = 0),
              (n._transmission = 0),
              n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "anisotropy",
                get: function () {
                  return this._anisotropy;
                },
                set: function (e) {
                  this._anisotropy > 0 != e > 0 && this.version++,
                    (this._anisotropy = e);
                }
              },
              {
                key: "clearcoat",
                get: function () {
                  return this._clearcoat;
                },
                set: function (e) {
                  this._clearcoat > 0 != e > 0 && this.version++,
                    (this._clearcoat = e);
                }
              },
              {
                key: "iridescence",
                get: function () {
                  return this._iridescence;
                },
                set: function (e) {
                  this._iridescence > 0 != e > 0 && this.version++,
                    (this._iridescence = e);
                }
              },
              {
                key: "sheen",
                get: function () {
                  return this._sheen;
                },
                set: function (e) {
                  this._sheen > 0 != e > 0 && this.version++, (this._sheen = e);
                }
              },
              {
                key: "transmission",
                get: function () {
                  return this._transmission;
                },
                set: function (e) {
                  this._transmission > 0 != e > 0 && this.version++,
                    (this._transmission = e);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.defines = { STANDARD: "", PHYSICAL: "" }),
                    (this.anisotropy = e.anisotropy),
                    (this.anisotropyRotation = e.anisotropyRotation),
                    (this.anisotropyMap = e.anisotropyMap),
                    (this.clearcoat = e.clearcoat),
                    (this.clearcoatMap = e.clearcoatMap),
                    (this.clearcoatRoughness = e.clearcoatRoughness),
                    (this.clearcoatRoughnessMap = e.clearcoatRoughnessMap),
                    (this.clearcoatNormalMap = e.clearcoatNormalMap),
                    this.clearcoatNormalScale.copy(e.clearcoatNormalScale),
                    (this.ior = e.ior),
                    (this.iridescence = e.iridescence),
                    (this.iridescenceMap = e.iridescenceMap),
                    (this.iridescenceIOR = e.iridescenceIOR),
                    (this.iridescenceThicknessRange = Ei(
                      e.iridescenceThicknessRange
                    )),
                    (this.iridescenceThicknessMap = e.iridescenceThicknessMap),
                    (this.sheen = e.sheen),
                    this.sheenColor.copy(e.sheenColor),
                    (this.sheenColorMap = e.sheenColorMap),
                    (this.sheenRoughness = e.sheenRoughness),
                    (this.sheenRoughnessMap = e.sheenRoughnessMap),
                    (this.transmission = e.transmission),
                    (this.transmissionMap = e.transmissionMap),
                    (this.thickness = e.thickness),
                    (this.thicknessMap = e.thicknessMap),
                    (this.attenuationDistance = e.attenuationDistance),
                    this.attenuationColor.copy(e.attenuationColor),
                    (this.specularIntensity = e.specularIntensity),
                    (this.specularIntensityMap = e.specularIntensityMap),
                    this.specularColor.copy(e.specularColor),
                    (this.specularColorMap = e.specularColorMap),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(Qd),
        tf = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isMeshLambertMaterial = !0),
              (n.type = "MeshLambertMaterial"),
              (n.color = new bl(16777215)),
              (n.map = null),
              (n.lightMap = null),
              (n.lightMapIntensity = 1),
              (n.aoMap = null),
              (n.aoMapIntensity = 1),
              (n.emissive = new bl(0)),
              (n.emissiveIntensity = 1),
              (n.emissiveMap = null),
              (n.bumpMap = null),
              (n.bumpScale = 1),
              (n.normalMap = null),
              (n.normalMapType = 0),
              (n.normalScale = new Cs(1, 1)),
              (n.displacementMap = null),
              (n.displacementScale = 1),
              (n.displacementBias = 0),
              (n.specularMap = null),
              (n.alphaMap = null),
              (n.envMap = null),
              (n.combine = 0),
              (n.reflectivity = 1),
              (n.refractionRatio = 0.98),
              (n.wireframe = !1),
              (n.wireframeLinewidth = 1),
              (n.wireframeLinecap = "round"),
              (n.wireframeLinejoin = "round"),
              (n.flatShading = !1),
              (n.fog = !0),
              n.setValues(e),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    this.color.copy(e.color),
                    (this.map = e.map),
                    (this.lightMap = e.lightMap),
                    (this.lightMapIntensity = e.lightMapIntensity),
                    (this.aoMap = e.aoMap),
                    (this.aoMapIntensity = e.aoMapIntensity),
                    this.emissive.copy(e.emissive),
                    (this.emissiveMap = e.emissiveMap),
                    (this.emissiveIntensity = e.emissiveIntensity),
                    (this.bumpMap = e.bumpMap),
                    (this.bumpScale = e.bumpScale),
                    (this.normalMap = e.normalMap),
                    (this.normalMapType = e.normalMapType),
                    this.normalScale.copy(e.normalScale),
                    (this.displacementMap = e.displacementMap),
                    (this.displacementScale = e.displacementScale),
                    (this.displacementBias = e.displacementBias),
                    (this.specularMap = e.specularMap),
                    (this.alphaMap = e.alphaMap),
                    (this.envMap = e.envMap),
                    (this.combine = e.combine),
                    (this.reflectivity = e.reflectivity),
                    (this.refractionRatio = e.refractionRatio),
                    (this.wireframe = e.wireframe),
                    (this.wireframeLinewidth = e.wireframeLinewidth),
                    (this.wireframeLinecap = e.wireframeLinecap),
                    (this.wireframeLinejoin = e.wireframeLinejoin),
                    (this.flatShading = e.flatShading),
                    (this.fog = e.fog),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(El);
      function nf(e, t, n) {
        return !e || (!n && e.constructor === t)
          ? e
          : "number" == typeof t.BYTES_PER_ELEMENT
          ? new t(e)
          : Array.prototype.slice.call(e);
      }
      function rf(e) {
        for (var t = e.length, n = new Array(t), r = 0; r !== t; ++r) n[r] = r;
        return (
          n.sort(function (t, n) {
            return e[t] - e[n];
          }),
          n
        );
      }
      function af(e, t, n) {
        for (
          var r = e.length, i = new e.constructor(r), a = 0, s = 0;
          s !== r;
          ++a
        )
          for (var o = n[a] * t, l = 0; l !== t; ++l) i[s++] = e[o + l];
        return i;
      }
      function sf(e, t, n, r) {
        for (var i = 1, a = e[0]; void 0 !== a && void 0 === a[r]; ) a = e[i++];
        if (void 0 !== a) {
          var s = a[r];
          if (void 0 !== s)
            if (Array.isArray(s))
              do {
                void 0 !== (s = a[r]) && (t.push(a.time), n.push.apply(n, s)),
                  (a = e[i++]);
              } while (void 0 !== a);
            else if (void 0 !== s.toArray)
              do {
                void 0 !== (s = a[r]) && (t.push(a.time), s.toArray(n, n.length)),
                  (a = e[i++]);
              } while (void 0 !== a);
            else
              do {
                void 0 !== (s = a[r]) && (t.push(a.time), n.push(s)),
                  (a = e[i++]);
              } while (void 0 !== a);
        }
      }
      var of = (function () {
          function e(t, n, r, i) {
            Fi(this, e),
              (this.parameterPositions = t),
              (this._cachedIndex = 0),
              (this.resultBuffer = void 0 !== i ? i : new n.constructor(r)),
              (this.sampleValues = n),
              (this.valueSize = r),
              (this.settings = null),
              (this.DefaultSettings_ = {});
          }
          return (
            Ni(e, [
              {
                key: "evaluate",
                value: function (e) {
                  var t = this.parameterPositions,
                    n = this._cachedIndex,
                    r = t[n],
                    i = t[n - 1];
                  e: {
                    t: {
                      var a;
                      n: {
                        r: if (!(e < r)) {
                          for (var s = n + 2; ; ) {
                            if (void 0 === r) {
                              if (e < i) break r;
                              return (
                                (n = t.length),
                                (this._cachedIndex = n),
                                this.copySampleValue_(n - 1)
                              );
                            }
                            if (n === s) break;
                            if (((i = r), e < (r = t[++n]))) break t;
                          }
                          a = t.length;
                          break n;
                        }
                        if (e >= i) break e;
                        var o = t[1];
                        e < o && ((n = 2), (i = o));
                        for (var l = n - 2; ; ) {
                          if (void 0 === i)
                            return (
                              (this._cachedIndex = 0), this.copySampleValue_(0)
                            );
                          if (n === l) break;
                          if (((r = i), e >= (i = t[--n - 1]))) break t;
                        }
                        (a = n), (n = 0);
                      }
                      for (; n < a; ) {
                        var h = (n + a) >>> 1;
                        e < t[h] ? (a = h) : (n = h + 1);
                      }
                      if (((r = t[n]), void 0 === (i = t[n - 1])))
                        return (this._cachedIndex = 0), this.copySampleValue_(0);
                      if (void 0 === r)
                        return (
                          (n = t.length),
                          (this._cachedIndex = n),
                          this.copySampleValue_(n - 1)
                        );
                    }
                    (this._cachedIndex = n), this.intervalChanged_(n, i, r);
                  }
                  return this.interpolate_(n, i, e, r);
                }
              },
              {
                key: "getSettings_",
                value: function () {
                  return this.settings || this.DefaultSettings_;
                }
              },
              {
                key: "copySampleValue_",
                value: function (e) {
                  for (
                    var t = this.resultBuffer,
                      n = this.sampleValues,
                      r = this.valueSize,
                      i = e * r,
                      a = 0;
                    a !== r;
                    ++a
                  )
                    t[a] = n[i + a];
                  return t;
                }
              },
              {
                key: "interpolate_",
                value: function () {
                  throw new Error("call to abstract method");
                }
              },
              { key: "intervalChanged_", value: function () {} }
            ]),
            e
          );
        })(),
        lf = (function (e) {
          function t(e, n, r, i) {
            var a;
            return (
              Fi(this, t),
              ((a = Mi(this, t, [e, n, r, i]))._weightPrev = -0),
              (a._offsetPrev = -0),
              (a._weightNext = -0),
              (a._offsetNext = -0),
              (a.DefaultSettings_ = { endingStart: Ya, endingEnd: Ya }),
              a
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "intervalChanged_",
                value: function (e, t, n) {
                  var r = this.parameterPositions,
                    i = e - 2,
                    a = e + 1,
                    s = r[i],
                    o = r[a];
                  if (void 0 === s)
                    switch (this.getSettings_().endingStart) {
                      case Ka:
                        (i = e), (s = 2 * t - n);
                        break;
                      case Za:
                        s = t + r[(i = r.length - 2)] - r[i + 1];
                        break;
                      default:
                        (i = e), (s = n);
                    }
                  if (void 0 === o)
                    switch (this.getSettings_().endingEnd) {
                      case Ka:
                        (a = e), (o = 2 * n - t);
                        break;
                      case Za:
                        (a = 1), (o = n + r[1] - r[0]);
                        break;
                      default:
                        (a = e - 1), (o = t);
                    }
                  var l = 0.5 * (n - t),
                    h = this.valueSize;
                  (this._weightPrev = l / (t - s)),
                    (this._weightNext = l / (o - n)),
                    (this._offsetPrev = i * h),
                    (this._offsetNext = a * h);
                }
              },
              {
                key: "interpolate_",
                value: function (e, t, n, r) {
                  for (
                    var i = this.resultBuffer,
                      a = this.sampleValues,
                      s = this.valueSize,
                      o = e * s,
                      l = o - s,
                      h = this._offsetPrev,
                      u = this._offsetNext,
                      c = this._weightPrev,
                      d = this._weightNext,
                      f = (n - t) / (r - t),
                      p = f * f,
                      m = p * f,
                      g = -c * m + 2 * c * p - c * f,
                      v = (1 + c) * m + (-1.5 - 2 * c) * p + (-0.5 + c) * f + 1,
                      y = (-1 - d) * m + (1.5 + d) * p + 0.5 * f,
                      _ = d * m - d * p,
                      b = 0;
                    b !== s;
                    ++b
                  )
                    i[b] =
                      g * a[h + b] + v * a[l + b] + y * a[o + b] + _ * a[u + b];
                  return i;
                }
              }
            ]),
            t
          );
        })(of),
        hf = (function (e) {
          function t(e, n, r, i) {
            return Fi(this, t), Mi(this, t, [e, n, r, i]);
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "interpolate_",
                value: function (e, t, n, r) {
                  for (
                    var i = this.resultBuffer,
                      a = this.sampleValues,
                      s = this.valueSize,
                      o = e * s,
                      l = o - s,
                      h = (n - t) / (r - t),
                      u = 1 - h,
                      c = 0;
                    c !== s;
                    ++c
                  )
                    i[c] = a[l + c] * u + a[o + c] * h;
                  return i;
                }
              }
            ]),
            t
          );
        })(of),
        uf = (function (e) {
          function t(e, n, r, i) {
            return Fi(this, t), Mi(this, t, [e, n, r, i]);
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "interpolate_",
                value: function (e) {
                  return this.copySampleValue_(e - 1);
                }
              }
            ]),
            t
          );
        })(of),
        cf = (function () {
          function e(t, n, r, i) {
            if ((Fi(this, e), void 0 === t))
              throw new Error("THREE.KeyframeTrack: track name is undefined");
            if (void 0 === n || 0 === n.length)
              throw new Error(
                "THREE.KeyframeTrack: no keyframes in track named " + t
              );
            (this.name = t),
              (this.times = nf(n, this.TimeBufferType)),
              (this.values = nf(r, this.ValueBufferType)),
              this.setInterpolation(i || this.DefaultInterpolation);
          }
          return (
            Ni(
              e,
              [
                {
                  key: "InterpolantFactoryMethodDiscrete",
                  value: function (e) {
                    return new uf(
                      this.times,
                      this.values,
                      this.getValueSize(),
                      e
                    );
                  }
                },
                {
                  key: "InterpolantFactoryMethodLinear",
                  value: function (e) {
                    return new hf(
                      this.times,
                      this.values,
                      this.getValueSize(),
                      e
                    );
                  }
                },
                {
                  key: "InterpolantFactoryMethodSmooth",
                  value: function (e) {
                    return new lf(
                      this.times,
                      this.values,
                      this.getValueSize(),
                      e
                    );
                  }
                },
                {
                  key: "setInterpolation",
                  value: function (e) {
                    var t;
                    switch (e) {
                      case ja:
                        t = this.InterpolantFactoryMethodDiscrete;
                        break;
                      case Xa:
                        t = this.InterpolantFactoryMethodLinear;
                        break;
                      case qa:
                        t = this.InterpolantFactoryMethodSmooth;
                    }
                    if (void 0 === t) {
                      var n =
                        "unsupported interpolation for " +
                        this.ValueTypeName +
                        " keyframe track named " +
                        this.name;
                      if (void 0 === this.createInterpolant) {
                        if (e === this.DefaultInterpolation) throw new Error(n);
                        this.setInterpolation(this.DefaultInterpolation);
                      }
                      return console.warn("THREE.KeyframeTrack:", n), this;
                    }
                    return (this.createInterpolant = t), this;
                  }
                },
                {
                  key: "getInterpolation",
                  value: function () {
                    switch (this.createInterpolant) {
                      case this.InterpolantFactoryMethodDiscrete:
                        return ja;
                      case this.InterpolantFactoryMethodLinear:
                        return Xa;
                      case this.InterpolantFactoryMethodSmooth:
                        return qa;
                    }
                  }
                },
                {
                  key: "getValueSize",
                  value: function () {
                    return this.values.length / this.times.length;
                  }
                },
                {
                  key: "shift",
                  value: function (e) {
                    if (0 !== e)
                      for (var t = this.times, n = 0, r = t.length; n !== r; ++n)
                        t[n] += e;
                    return this;
                  }
                },
                {
                  key: "scale",
                  value: function (e) {
                    if (1 !== e)
                      for (var t = this.times, n = 0, r = t.length; n !== r; ++n)
                        t[n] *= e;
                    return this;
                  }
                },
                {
                  key: "trim",
                  value: function (e, t) {
                    for (
                      var n = this.times, r = n.length, i = 0, a = r - 1;
                      i !== r && n[i] < e;
  
                    )
                      ++i;
                    for (; -1 !== a && n[a] > t; ) --a;
                    if ((++a, 0 !== i || a !== r)) {
                      i >= a && (i = (a = Math.max(a, 1)) - 1);
                      var s = this.getValueSize();
                      (this.times = n.slice(i, a)),
                        (this.values = this.values.slice(i * s, a * s));
                    }
                    return this;
                  }
                },
                {
                  key: "validate",
                  value: function () {
                    var e = !0,
                      t = this.getValueSize();
                    t - Math.floor(t) != 0 &&
                      (console.error(
                        "THREE.KeyframeTrack: Invalid value size in track.",
                        this
                      ),
                      (e = !1));
                    var n,
                      r = this.times,
                      i = this.values,
                      a = r.length;
                    0 === a &&
                      (console.error(
                        "THREE.KeyframeTrack: Track is empty.",
                        this
                      ),
                      (e = !1));
                    for (var s = null, o = 0; o !== a; o++) {
                      var l = r[o];
                      if ("number" == typeof l && isNaN(l)) {
                        console.error(
                          "THREE.KeyframeTrack: Time is not a valid number.",
                          this,
                          o,
                          l
                        ),
                          (e = !1);
                        break;
                      }
                      if (null !== s && s > l) {
                        console.error(
                          "THREE.KeyframeTrack: Out of order keys.",
                          this,
                          o,
                          l,
                          s
                        ),
                          (e = !1);
                        break;
                      }
                      s = l;
                    }
                    if (
                      void 0 !== i &&
                      ((n = i), ArrayBuffer.isView(n) && !(n instanceof DataView))
                    )
                      for (var h = 0, u = i.length; h !== u; ++h) {
                        var c = i[h];
                        if (isNaN(c)) {
                          console.error(
                            "THREE.KeyframeTrack: Value is not a valid number.",
                            this,
                            h,
                            c
                          ),
                            (e = !1);
                          break;
                        }
                      }
                    return e;
                  }
                },
                {
                  key: "optimize",
                  value: function () {
                    for (
                      var e = this.times.slice(),
                        t = this.values.slice(),
                        n = this.getValueSize(),
                        r = this.getInterpolation() === qa,
                        i = e.length - 1,
                        a = 1,
                        s = 1;
                      s < i;
                      ++s
                    ) {
                      var o = !1,
                        l = e[s];
                      if (l !== e[s + 1] && (1 !== s || l !== e[0]))
                        if (r) o = !0;
                        else
                          for (
                            var h = s * n, u = h - n, c = h + n, d = 0;
                            d !== n;
                            ++d
                          ) {
                            var f = t[h + d];
                            if (f !== t[u + d] || f !== t[c + d]) {
                              o = !0;
                              break;
                            }
                          }
                      if (o) {
                        if (s !== a) {
                          e[a] = e[s];
                          for (var p = s * n, m = a * n, g = 0; g !== n; ++g)
                            t[m + g] = t[p + g];
                        }
                        ++a;
                      }
                    }
                    if (i > 0) {
                      e[a] = e[i];
                      for (var v = i * n, y = a * n, _ = 0; _ !== n; ++_)
                        t[y + _] = t[v + _];
                      ++a;
                    }
                    return (
                      a !== e.length
                        ? ((this.times = e.slice(0, a)),
                          (this.values = t.slice(0, a * n)))
                        : ((this.times = e), (this.values = t)),
                      this
                    );
                  }
                },
                {
                  key: "clone",
                  value: function () {
                    var e = this.times.slice(),
                      t = this.values.slice(),
                      n = new (0, this.constructor)(this.name, e, t);
                    return (n.createInterpolant = this.createInterpolant), n;
                  }
                }
              ],
              [
                {
                  key: "toJSON",
                  value: function (e) {
                    var t,
                      n = e.constructor;
                    if (n.toJSON !== this.toJSON) t = n.toJSON(e);
                    else {
                      t = {
                        name: e.name,
                        times: nf(e.times, Array),
                        values: nf(e.values, Array)
                      };
                      var r = e.getInterpolation();
                      r !== e.DefaultInterpolation && (t.interpolation = r);
                    }
                    return (t.type = e.ValueTypeName), t;
                  }
                }
              ]
            ),
            e
          );
        })();
      (cf.prototype.TimeBufferType = Float32Array),
        (cf.prototype.ValueBufferType = Float32Array),
        (cf.prototype.DefaultInterpolation = Xa);
      var df = (function (e) {
        function t() {
          return Fi(this, t), Mi(this, t, arguments);
        }
        return ki(t, e), Ni(t);
      })(cf);
      (df.prototype.ValueTypeName = "bool"),
        (df.prototype.ValueBufferType = Array),
        (df.prototype.DefaultInterpolation = ja),
        (df.prototype.InterpolantFactoryMethodLinear = void 0),
        (df.prototype.InterpolantFactoryMethodSmooth = void 0);
      var ff = (function (e) {
        function t() {
          return Fi(this, t), Mi(this, t, arguments);
        }
        return ki(t, e), Ni(t);
      })(cf);
      ff.prototype.ValueTypeName = "color";
      var pf = (function (e) {
        function t() {
          return Fi(this, t), Mi(this, t, arguments);
        }
        return ki(t, e), Ni(t);
      })(cf);
      pf.prototype.ValueTypeName = "number";
      var mf = (function (e) {
          function t(e, n, r, i) {
            return Fi(this, t), Mi(this, t, [e, n, r, i]);
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "interpolate_",
                value: function (e, t, n, r) {
                  for (
                    var i = this.resultBuffer,
                      a = this.sampleValues,
                      s = this.valueSize,
                      o = (n - t) / (r - t),
                      l = e * s,
                      h = l + s;
                    l !== h;
                    l += 4
                  )
                    eo.slerpFlat(i, 0, a, l - s, a, l, o);
                  return i;
                }
              }
            ]),
            t
          );
        })(of),
        gf = (function (e) {
          function t() {
            return Fi(this, t), Mi(this, t, arguments);
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "InterpolantFactoryMethodLinear",
                value: function (e) {
                  return new mf(this.times, this.values, this.getValueSize(), e);
                }
              }
            ]),
            t
          );
        })(cf);
      (gf.prototype.ValueTypeName = "quaternion"),
        (gf.prototype.DefaultInterpolation = Xa),
        (gf.prototype.InterpolantFactoryMethodSmooth = void 0);
      var vf = (function (e) {
        function t() {
          return Fi(this, t), Mi(this, t, arguments);
        }
        return ki(t, e), Ni(t);
      })(cf);
      (vf.prototype.ValueTypeName = "string"),
        (vf.prototype.ValueBufferType = Array),
        (vf.prototype.DefaultInterpolation = ja),
        (vf.prototype.InterpolantFactoryMethodLinear = void 0),
        (vf.prototype.InterpolantFactoryMethodSmooth = void 0);
      var yf = (function (e) {
        function t() {
          return Fi(this, t), Mi(this, t, arguments);
        }
        return ki(t, e), Ni(t);
      })(cf);
      yf.prototype.ValueTypeName = "vector";
      var _f = (function () {
        function e(t) {
          var n =
              arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : -1,
            r = arguments.length > 2 ? arguments[2] : void 0,
            i =
              arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : Ja;
          Fi(this, e),
            (this.name = t),
            (this.tracks = r),
            (this.duration = n),
            (this.blendMode = i),
            (this.uuid = ys()),
            this.duration < 0 && this.resetDuration();
        }
        return (
          Ni(
            e,
            [
              {
                key: "resetDuration",
                value: function () {
                  for (var e = 0, t = 0, n = this.tracks.length; t !== n; ++t) {
                    var r = this.tracks[t];
                    e = Math.max(e, r.times[r.times.length - 1]);
                  }
                  return (this.duration = e), this;
                }
              },
              {
                key: "trim",
                value: function () {
                  for (var e = 0; e < this.tracks.length; e++)
                    this.tracks[e].trim(0, this.duration);
                  return this;
                }
              },
              {
                key: "validate",
                value: function () {
                  for (var e = !0, t = 0; t < this.tracks.length; t++)
                    e = e && this.tracks[t].validate();
                  return e;
                }
              },
              {
                key: "optimize",
                value: function () {
                  for (var e = 0; e < this.tracks.length; e++)
                    this.tracks[e].optimize();
                  return this;
                }
              },
              {
                key: "clone",
                value: function () {
                  for (var e = [], t = 0; t < this.tracks.length; t++)
                    e.push(this.tracks[t].clone());
                  return new this.constructor(
                    this.name,
                    this.duration,
                    e,
                    this.blendMode
                  );
                }
              },
              {
                key: "toJSON",
                value: function () {
                  return this.constructor.toJSON(this);
                }
              }
            ],
            [
              {
                key: "parse",
                value: function (e) {
                  for (
                    var t = [],
                      n = e.tracks,
                      r = 1 / (e.fps || 1),
                      i = 0,
                      a = n.length;
                    i !== a;
                    ++i
                  )
                    t.push(bf(n[i]).scale(r));
                  var s = new this(e.name, e.duration, t, e.blendMode);
                  return (s.uuid = e.uuid), s;
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  for (
                    var t = [],
                      n = e.tracks,
                      r = {
                        name: e.name,
                        duration: e.duration,
                        tracks: t,
                        uuid: e.uuid,
                        blendMode: e.blendMode
                      },
                      i = 0,
                      a = n.length;
                    i !== a;
                    ++i
                  )
                    t.push(cf.toJSON(n[i]));
                  return r;
                }
              },
              {
                key: "CreateFromMorphTargetSequence",
                value: function (e, t, n, r) {
                  for (var i = t.length, a = [], s = 0; s < i; s++) {
                    var o = [],
                      l = [];
                    o.push((s + i - 1) % i, s, (s + 1) % i), l.push(0, 1, 0);
                    var h = rf(o);
                    (o = af(o, 1, h)),
                      (l = af(l, 1, h)),
                      r || 0 !== o[0] || (o.push(i), l.push(l[0])),
                      a.push(
                        new pf(
                          ".morphTargetInfluences[" + t[s].name + "]",
                          o,
                          l
                        ).scale(1 / n)
                      );
                  }
                  return new this(e, -1, a);
                }
              },
              {
                key: "findByName",
                value: function (e, t) {
                  var n = e;
                  if (!Array.isArray(e)) {
                    var r = e;
                    n = (r.geometry && r.geometry.animations) || r.animations;
                  }
                  for (var i = 0; i < n.length; i++)
                    if (n[i].name === t) return n[i];
                  return null;
                }
              },
              {
                key: "CreateClipsFromMorphTargetSequences",
                value: function (e, t, n) {
                  for (
                    var r = {}, i = /^([\w-]*?)([\d]+)$/, a = 0, s = e.length;
                    a < s;
                    a++
                  ) {
                    var o = e[a],
                      l = o.name.match(i);
                    if (l && l.length > 1) {
                      var h = l[1],
                        u = r[h];
                      u || (r[h] = u = []), u.push(o);
                    }
                  }
                  var c = [];
                  for (var d in r)
                    c.push(this.CreateFromMorphTargetSequence(d, r[d], t, n));
                  return c;
                }
              },
              {
                key: "parseAnimation",
                value: function (e, t) {
                  if (!e)
                    return (
                      console.error(
                        "THREE.AnimationClip: No animation in JSONLoader data."
                      ),
                      null
                    );
                  for (
                    var n = function (e, t, n, r, i) {
                        if (0 !== n.length) {
                          var a = [],
                            s = [];
                          sf(n, a, s, r),
                            0 !== a.length && i.push(new e(t, a, s));
                        }
                      },
                      r = [],
                      i = e.name || "default",
                      a = e.fps || 30,
                      s = e.blendMode,
                      o = e.length || -1,
                      l = e.hierarchy || [],
                      h = 0;
                    h < l.length;
                    h++
                  ) {
                    var u = l[h].keys;
                    if (u && 0 !== u.length)
                      if (u[0].morphTargets) {
                        var c = {},
                          d = void 0;
                        for (d = 0; d < u.length; d++)
                          if (u[d].morphTargets)
                            for (var f = 0; f < u[d].morphTargets.length; f++)
                              c[u[d].morphTargets[f]] = -1;
                        for (var p in c) {
                          for (
                            var m = [], g = [], v = 0;
                            v !== u[d].morphTargets.length;
                            ++v
                          ) {
                            var y = u[d];
                            m.push(y.time), g.push(y.morphTarget === p ? 1 : 0);
                          }
                          r.push(
                            new pf(".morphTargetInfluence[" + p + "]", m, g)
                          );
                        }
                        o = c.length * a;
                      } else {
                        var _ = ".bones[" + t[h].name + "]";
                        n(yf, _ + ".position", u, "pos", r),
                          n(gf, _ + ".quaternion", u, "rot", r),
                          n(yf, _ + ".scale", u, "scl", r);
                      }
                  }
                  return 0 === r.length ? null : new this(i, o, r, s);
                }
              }
            ]
          ),
          e
        );
      })();
      function bf(e) {
        if (void 0 === e.type)
          throw new Error(
            "THREE.KeyframeTrack: track type undefined, can not parse"
          );
        var t = (function (e) {
          switch (e.toLowerCase()) {
            case "scalar":
            case "double":
            case "float":
            case "number":
            case "integer":
              return pf;
            case "vector":
            case "vector2":
            case "vector3":
            case "vector4":
              return yf;
            case "color":
              return ff;
            case "quaternion":
              return gf;
            case "bool":
            case "boolean":
              return df;
            case "string":
              return vf;
          }
          throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + e);
        })(e.type);
        if (void 0 === e.times) {
          var n = [],
            r = [];
          sf(e.keys, n, r, "value"), (e.times = n), (e.values = r);
        }
        return void 0 !== t.parse
          ? t.parse(e)
          : new t(e.name, e.times, e.values, e.interpolation);
      }
      var xf = {
          enabled: !1,
          files: {},
          add: function (e, t) {
            !1 !== this.enabled && (this.files[e] = t);
          },
          get: function (e) {
            if (!1 !== this.enabled) return this.files[e];
          },
          remove: function (e) {
            delete this.files[e];
          },
          clear: function () {
            this.files = {};
          }
        },
        Sf = new (Ni(function e(t, n, r) {
          Fi(this, e);
          var i = this,
            a = !1,
            s = 0,
            o = 0,
            l = void 0,
            h = [];
          (this.onStart = void 0),
            (this.onLoad = t),
            (this.onProgress = n),
            (this.onError = r),
            (this.itemStart = function (e) {
              o++,
                !1 === a && void 0 !== i.onStart && i.onStart(e, s, o),
                (a = !0);
            }),
            (this.itemEnd = function (e) {
              s++,
                void 0 !== i.onProgress && i.onProgress(e, s, o),
                s === o && ((a = !1), void 0 !== i.onLoad && i.onLoad());
            }),
            (this.itemError = function (e) {
              void 0 !== i.onError && i.onError(e);
            }),
            (this.resolveURL = function (e) {
              return l ? l(e) : e;
            }),
            (this.setURLModifier = function (e) {
              return (l = e), this;
            }),
            (this.addHandler = function (e, t) {
              return h.push(e, t), this;
            }),
            (this.removeHandler = function (e) {
              var t = h.indexOf(e);
              return -1 !== t && h.splice(t, 2), this;
            }),
            (this.getHandler = function (e) {
              for (var t = 0, n = h.length; t < n; t += 2) {
                var r = h[t],
                  i = h[t + 1];
                if ((r.global && (r.lastIndex = 0), r.test(e))) return i;
              }
              return null;
            });
        }))(),
        Ef = (function () {
          function e(t) {
            Fi(this, e),
              (this.manager = void 0 !== t ? t : Sf),
              (this.crossOrigin = "anonymous"),
              (this.withCredentials = !1),
              (this.path = ""),
              (this.resourcePath = ""),
              (this.requestHeader = {});
          }
          return (
            Ni(e, [
              { key: "load", value: function () {} },
              {
                key: "loadAsync",
                value: function (e, t) {
                  var n = this;
                  return new Promise(function (r, i) {
                    n.load(e, r, t, i);
                  });
                }
              },
              { key: "parse", value: function () {} },
              {
                key: "setCrossOrigin",
                value: function (e) {
                  return (this.crossOrigin = e), this;
                }
              },
              {
                key: "setWithCredentials",
                value: function (e) {
                  return (this.withCredentials = e), this;
                }
              },
              {
                key: "setPath",
                value: function (e) {
                  return (this.path = e), this;
                }
              },
              {
                key: "setResourcePath",
                value: function (e) {
                  return (this.resourcePath = e), this;
                }
              },
              {
                key: "setRequestHeader",
                value: function (e) {
                  return (this.requestHeader = e), this;
                }
              }
            ]),
            e
          );
        })();
      Ef.DEFAULT_MATERIAL_NAME = "__DEFAULT";
      var wf = {},
        Tf = (function (e) {
          function t(e, n) {
            var r;
            return Fi(this, t), ((r = Mi(this, t, [e])).response = n), r;
          }
          return ki(t, e), Ni(t);
        })(gi(Error)),
        Mf = (function (e) {
          function t(e) {
            return Fi(this, t), Mi(this, t, [e]);
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "load",
                value: function (e, t, n, r) {
                  var i = this;
                  void 0 === e && (e = ""),
                    void 0 !== this.path && (e = this.path + e),
                    (e = this.manager.resolveURL(e));
                  var a = xf.get(e);
                  if (void 0 !== a)
                    return (
                      this.manager.itemStart(e),
                      setTimeout(function () {
                        t && t(a), i.manager.itemEnd(e);
                      }, 0),
                      a
                    );
                  if (void 0 === wf[e]) {
                    (wf[e] = []),
                      wf[e].push({ onLoad: t, onProgress: n, onError: r });
                    var s = new Request(e, {
                        headers: new Headers(this.requestHeader),
                        credentials: this.withCredentials
                          ? "include"
                          : "same-origin"
                      }),
                      o = this.mimeType,
                      l = this.responseType;
                    fetch(s)
                      .then(function (t) {
                        if (200 === t.status || 0 === t.status) {
                          if (
                            (0 === t.status &&
                              console.warn(
                                "THREE.FileLoader: HTTP Status 0 received."
                              ),
                            "undefined" == typeof ReadableStream ||
                              void 0 === t.body ||
                              void 0 === t.body.getReader)
                          )
                            return t;
                          var n = wf[e],
                            r = t.body.getReader(),
                            i =
                              t.headers.get("Content-Length") ||
                              t.headers.get("X-File-Size"),
                            a = i ? parseInt(i) : 0,
                            s = 0 !== a,
                            o = 0,
                            l = new ReadableStream({
                              start: function (e) {
                                !(function t() {
                                  r.read().then(function (r) {
                                    var i = r.done,
                                      l = r.value;
                                    if (i) e.close();
                                    else {
                                      o += l.byteLength;
                                      for (
                                        var h = new ProgressEvent("progress", {
                                            lengthComputable: s,
                                            loaded: o,
                                            total: a
                                          }),
                                          u = 0,
                                          c = n.length;
                                        u < c;
                                        u++
                                      ) {
                                        var d = n[u];
                                        d.onProgress && d.onProgress(h);
                                      }
                                      e.enqueue(l), t();
                                    }
                                  });
                                })();
                              }
                            });
                          return new Response(l);
                        }
                        throw new Tf(
                          'fetch for "'
                            .concat(t.url, '" responded with ')
                            .concat(t.status, ": ")
                            .concat(t.statusText),
                          t
                        );
                      })
                      .then(function (e) {
                        switch (l) {
                          case "arraybuffer":
                            return e.arrayBuffer();
                          case "blob":
                            return e.blob();
                          case "document":
                            return e.text().then(function (e) {
                              return new DOMParser().parseFromString(e, o);
                            });
                          case "json":
                            return e.json();
                          default:
                            if (void 0 === o) return e.text();
                            var t = /charset="?([^;"\s]*)"?/i.exec(o),
                              n = t && t[1] ? t[1].toLowerCase() : void 0,
                              r = new TextDecoder(n);
                            return e.arrayBuffer().then(function (e) {
                              return r.decode(e);
                            });
                        }
                      })
                      .then(function (t) {
                        xf.add(e, t);
                        var n = wf[e];
                        delete wf[e];
                        for (var r = 0, i = n.length; r < i; r++) {
                          var a = n[r];
                          a.onLoad && a.onLoad(t);
                        }
                      })
                      .catch(function (t) {
                        var n = wf[e];
                        if (void 0 === n) throw (i.manager.itemError(e), t);
                        delete wf[e];
                        for (var r = 0, a = n.length; r < a; r++) {
                          var s = n[r];
                          s.onError && s.onError(t);
                        }
                        i.manager.itemError(e);
                      })
                      .finally(function () {
                        i.manager.itemEnd(e);
                      }),
                      this.manager.itemStart(e);
                  } else wf[e].push({ onLoad: t, onProgress: n, onError: r });
                }
              },
              {
                key: "setResponseType",
                value: function (e) {
                  return (this.responseType = e), this;
                }
              },
              {
                key: "setMimeType",
                value: function (e) {
                  return (this.mimeType = e), this;
                }
              }
            ]),
            t
          );
        })(Ef),
        Af = (function (e) {
          function t(e) {
            return Fi(this, t), Mi(this, t, [e]);
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "load",
                value: function (e, t, n, r) {
                  void 0 !== this.path && (e = this.path + e),
                    (e = this.manager.resolveURL(e));
                  var i = this,
                    a = xf.get(e);
                  if (void 0 !== a)
                    return (
                      i.manager.itemStart(e),
                      setTimeout(function () {
                        t && t(a), i.manager.itemEnd(e);
                      }, 0),
                      a
                    );
                  var s = Ds("img");
                  function o() {
                    h(), xf.add(e, this), t && t(this), i.manager.itemEnd(e);
                  }
                  function l(t) {
                    h(), r && r(t), i.manager.itemError(e), i.manager.itemEnd(e);
                  }
                  function h() {
                    s.removeEventListener("load", o, !1),
                      s.removeEventListener("error", l, !1);
                  }
                  return (
                    s.addEventListener("load", o, !1),
                    s.addEventListener("error", l, !1),
                    "data:" !== e.slice(0, 5) &&
                      void 0 !== this.crossOrigin &&
                      (s.crossOrigin = this.crossOrigin),
                    i.manager.itemStart(e),
                    (s.src = e),
                    s
                  );
                }
              }
            ]),
            t
          );
        })(Ef),
        Cf = (function (e) {
          function t(e) {
            return Fi(this, t), Mi(this, t, [e]);
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "load",
                value: function (e, t, n, r) {
                  var i = new ph();
                  i.colorSpace = es;
                  var a = new Af(this.manager);
                  a.setCrossOrigin(this.crossOrigin), a.setPath(this.path);
                  var s = 0;
                  function o(n) {
                    a.load(
                      e[n],
                      function (e) {
                        (i.images[n] = e),
                          6 == ++s && ((i.needsUpdate = !0), t && t(i));
                      },
                      void 0,
                      r
                    );
                  }
                  for (var l = 0; l < e.length; ++l) o(l);
                  return i;
                }
              }
            ]),
            t
          );
        })(Ef),
        Pf = (function (e) {
          function t(e) {
            return Fi(this, t), Mi(this, t, [e]);
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "load",
                value: function (e, t, n, r) {
                  var i = new Ks(),
                    a = new Af(this.manager);
                  return (
                    a.setCrossOrigin(this.crossOrigin),
                    a.setPath(this.path),
                    a.load(
                      e,
                      function (e) {
                        (i.image = e), (i.needsUpdate = !0), void 0 !== t && t(i);
                      },
                      n,
                      r
                    ),
                    i
                  );
                }
              }
            ]),
            t
          );
        })(Ef),
        kf = (function (e) {
          function t(e) {
            var n,
              r =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : 1;
            return (
              Fi(this, t),
              ((n = Mi(this, t)).isLight = !0),
              (n.type = "Light"),
              (n.color = new bl(e)),
              (n.intensity = r),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              { key: "dispose", value: function () {} },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    this.color.copy(e.color),
                    (this.intensity = e.intensity),
                    this
                  );
                }
              },
              {
                key: "toJSON",
                value: function (e) {
                  var n = xi(Ci(t.prototype), "toJSON", this).call(this, e);
                  return (
                    (n.object.color = this.color.getHex()),
                    (n.object.intensity = this.intensity),
                    void 0 !== this.groundColor &&
                      (n.object.groundColor = this.groundColor.getHex()),
                    void 0 !== this.distance &&
                      (n.object.distance = this.distance),
                    void 0 !== this.angle && (n.object.angle = this.angle),
                    void 0 !== this.decay && (n.object.decay = this.decay),
                    void 0 !== this.penumbra &&
                      (n.object.penumbra = this.penumbra),
                    void 0 !== this.shadow &&
                      (n.object.shadow = this.shadow.toJSON()),
                    n
                  );
                }
              }
            ]),
            t
          );
        })(rl),
        Rf = new Do(),
        Df = new to(),
        If = new to(),
        Lf = (function () {
          function e(t) {
            Fi(this, e),
              (this.camera = t),
              (this.bias = 0),
              (this.normalBias = 0),
              (this.radius = 1),
              (this.blurSamples = 8),
              (this.mapSize = new Cs(512, 512)),
              (this.map = null),
              (this.mapPass = null),
              (this.matrix = new Do()),
              (this.autoUpdate = !0),
              (this.needsUpdate = !1),
              (this._frustum = new Sh()),
              (this._frameExtents = new Cs(1, 1)),
              (this._viewportCount = 1),
              (this._viewports = [new Zs(0, 0, 1, 1)]);
          }
          return (
            Ni(e, [
              {
                key: "getViewportCount",
                value: function () {
                  return this._viewportCount;
                }
              },
              {
                key: "getFrustum",
                value: function () {
                  return this._frustum;
                }
              },
              {
                key: "updateMatrices",
                value: function (e) {
                  var t = this.camera,
                    n = this.matrix;
                  Df.setFromMatrixPosition(e.matrixWorld),
                    t.position.copy(Df),
                    If.setFromMatrixPosition(e.target.matrixWorld),
                    t.lookAt(If),
                    t.updateMatrixWorld(),
                    Rf.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse),
                    this._frustum.setFromProjectionMatrix(Rf),
                    n.set(
                      0.5,
                      0,
                      0,
                      0.5,
                      0,
                      0.5,
                      0,
                      0.5,
                      0,
                      0,
                      0.5,
                      0.5,
                      0,
                      0,
                      0,
                      1
                    ),
                    n.multiply(Rf);
                }
              },
              {
                key: "getViewport",
                value: function (e) {
                  return this._viewports[e];
                }
              },
              {
                key: "getFrameExtents",
                value: function () {
                  return this._frameExtents;
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.map && this.map.dispose(),
                    this.mapPass && this.mapPass.dispose();
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    (this.camera = e.camera.clone()),
                    (this.bias = e.bias),
                    (this.radius = e.radius),
                    this.mapSize.copy(e.mapSize),
                    this
                  );
                }
              },
              {
                key: "clone",
                value: function () {
                  return new this.constructor().copy(this);
                }
              },
              {
                key: "toJSON",
                value: function () {
                  var e = {};
                  return (
                    0 !== this.bias && (e.bias = this.bias),
                    0 !== this.normalBias && (e.normalBias = this.normalBias),
                    1 !== this.radius && (e.radius = this.radius),
                    (512 === this.mapSize.x && 512 === this.mapSize.y) ||
                      (e.mapSize = this.mapSize.toArray()),
                    (e.camera = this.camera.toJSON(!1).object),
                    delete e.camera.matrix,
                    e
                  );
                }
              }
            ]),
            e
          );
        })(),
        Ff = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t),
              ((e = Mi(this, t, [new ch(50, 1, 0.5, 500)])).isSpotLightShadow =
                !0),
              (e.focus = 1),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "updateMatrices",
                value: function (e) {
                  var n = this.camera,
                    r = 2 * vs * e.angle * this.focus,
                    i = this.mapSize.width / this.mapSize.height,
                    a = e.distance || n.far;
                  (r === n.fov && i === n.aspect && a === n.far) ||
                    ((n.fov = r),
                    (n.aspect = i),
                    (n.far = a),
                    n.updateProjectionMatrix()),
                    xi(Ci(t.prototype), "updateMatrices", this).call(this, e);
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.focus = e.focus),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(Lf),
        Of = (function (e) {
          function t(e, n) {
            var r,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : Math.PI / 3,
              s =
                arguments.length > 4 && void 0 !== arguments[4]
                  ? arguments[4]
                  : 0,
              o =
                arguments.length > 5 && void 0 !== arguments[5]
                  ? arguments[5]
                  : 2;
            return (
              Fi(this, t),
              ((r = Mi(this, t, [e, n])).isSpotLight = !0),
              (r.type = "SpotLight"),
              r.position.copy(rl.DEFAULT_UP),
              r.updateMatrix(),
              (r.target = new rl()),
              (r.distance = i),
              (r.angle = a),
              (r.penumbra = s),
              (r.decay = o),
              (r.map = null),
              (r.shadow = new Ff()),
              r
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "power",
                get: function () {
                  return this.intensity * Math.PI;
                },
                set: function (e) {
                  this.intensity = e / Math.PI;
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.shadow.dispose();
                }
              },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    (this.distance = e.distance),
                    (this.angle = e.angle),
                    (this.penumbra = e.penumbra),
                    (this.decay = e.decay),
                    (this.target = e.target.clone()),
                    (this.shadow = e.shadow.clone()),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(kf),
        Nf = new Do(),
        Bf = new to(),
        Uf = new to(),
        zf = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t),
              ((e = Mi(this, t, [new ch(90, 1, 0.5, 500)])).isPointLightShadow =
                !0),
              (e._frameExtents = new Cs(4, 2)),
              (e._viewportCount = 6),
              (e._viewports = [
                new Zs(2, 1, 1, 1),
                new Zs(0, 1, 1, 1),
                new Zs(3, 1, 1, 1),
                new Zs(1, 1, 1, 1),
                new Zs(3, 0, 1, 1),
                new Zs(1, 0, 1, 1)
              ]),
              (e._cubeDirections = [
                new to(1, 0, 0),
                new to(-1, 0, 0),
                new to(0, 0, 1),
                new to(0, 0, -1),
                new to(0, 1, 0),
                new to(0, -1, 0)
              ]),
              (e._cubeUps = [
                new to(0, 1, 0),
                new to(0, 1, 0),
                new to(0, 1, 0),
                new to(0, 1, 0),
                new to(0, 0, 1),
                new to(0, 0, -1)
              ]),
              e
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "updateMatrices",
                value: function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n = this.camera,
                    r = this.matrix,
                    i = e.distance || n.far;
                  i !== n.far && ((n.far = i), n.updateProjectionMatrix()),
                    Bf.setFromMatrixPosition(e.matrixWorld),
                    n.position.copy(Bf),
                    Uf.copy(n.position),
                    Uf.add(this._cubeDirections[t]),
                    n.up.copy(this._cubeUps[t]),
                    n.lookAt(Uf),
                    n.updateMatrixWorld(),
                    r.makeTranslation(-Bf.x, -Bf.y, -Bf.z),
                    Nf.multiplyMatrices(n.projectionMatrix, n.matrixWorldInverse),
                    this._frustum.setFromProjectionMatrix(Nf);
                }
              }
            ]),
            t
          );
        })(Lf),
        Vf = (function (e) {
          function t(e, n) {
            var r,
              i =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : 0,
              a =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : 2;
            return (
              Fi(this, t),
              ((r = Mi(this, t, [e, n])).isPointLight = !0),
              (r.type = "PointLight"),
              (r.distance = i),
              (r.decay = a),
              (r.shadow = new zf()),
              r
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "power",
                get: function () {
                  return 4 * this.intensity * Math.PI;
                },
                set: function (e) {
                  this.intensity = e / (4 * Math.PI);
                }
              },
              {
                key: "dispose",
                value: function () {
                  this.shadow.dispose();
                }
              },
              {
                key: "copy",
                value: function (e, n) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e, n),
                    (this.distance = e.distance),
                    (this.decay = e.decay),
                    (this.shadow = e.shadow.clone()),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(kf),
        Hf = (function (e) {
          function t() {
            var e;
            return (
              Fi(this, t),
              ((e = Mi(this, t, [
                new Oh(-5, 5, 5, -5, 0.5, 500)
              ])).isDirectionalLightShadow = !0),
              e
            );
          }
          return ki(t, e), Ni(t);
        })(Lf),
        Gf = (function (e) {
          function t(e, n) {
            var r;
            return (
              Fi(this, t),
              ((r = Mi(this, t, [e, n])).isDirectionalLight = !0),
              (r.type = "DirectionalLight"),
              r.position.copy(rl.DEFAULT_UP),
              r.updateMatrix(),
              (r.target = new rl()),
              (r.shadow = new Hf()),
              r
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "dispose",
                value: function () {
                  this.shadow.dispose();
                }
              },
              {
                key: "copy",
                value: function (e) {
                  return (
                    xi(Ci(t.prototype), "copy", this).call(this, e),
                    (this.target = e.target.clone()),
                    (this.shadow = e.shadow.clone()),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(kf),
        Wf = (function (e) {
          function t(e, n) {
            var r;
            return (
              Fi(this, t),
              ((r = Mi(this, t, [e, n])).isAmbientLight = !0),
              (r.type = "AmbientLight"),
              r
            );
          }
          return ki(t, e), Ni(t);
        })(kf),
        jf = (function () {
          function e() {
            Fi(this, e);
          }
          return (
            Ni(e, null, [
              {
                key: "decodeText",
                value: function (e) {
                  if ("undefined" != typeof TextDecoder)
                    return new TextDecoder().decode(e);
                  for (var t = "", n = 0, r = e.length; n < r; n++)
                    t += String.fromCharCode(e[n]);
                  try {
                    return decodeURIComponent(escape(t));
                  } catch (e) {
                    return t;
                  }
                }
              },
              {
                key: "extractUrlBase",
                value: function (e) {
                  var t = e.lastIndexOf("/");
                  return -1 === t ? "./" : e.slice(0, t + 1);
                }
              },
              {
                key: "resolveURL",
                value: function (e, t) {
                  return "string" != typeof e || "" === e
                    ? ""
                    : (/^https?:\/\//i.test(t) &&
                        /^\//.test(e) &&
                        (t = t.replace(/(^https?:\/\/[^\/]+).*/i, "$1")),
                      /^(https?:)?\/\//i.test(e) ||
                      /^data:.*,.*$/i.test(e) ||
                      /^blob:.*$/i.test(e)
                        ? e
                        : t + e);
                }
              }
            ]),
            e
          );
        })(),
        Xf = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t, [e])).isImageBitmapLoader = !0),
              "undefined" == typeof createImageBitmap &&
                console.warn(
                  "THREE.ImageBitmapLoader: createImageBitmap() not supported."
                ),
              "undefined" == typeof fetch &&
                console.warn("THREE.ImageBitmapLoader: fetch() not supported."),
              (n.options = { premultiplyAlpha: "none" }),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "setOptions",
                value: function (e) {
                  return (this.options = e), this;
                }
              },
              {
                key: "load",
                value: function (e, t, n, r) {
                  void 0 === e && (e = ""),
                    void 0 !== this.path && (e = this.path + e),
                    (e = this.manager.resolveURL(e));
                  var i = this,
                    a = xf.get(e);
                  if (void 0 !== a)
                    return (
                      i.manager.itemStart(e),
                      a.then
                        ? void a
                            .then(function (n) {
                              t && t(n), i.manager.itemEnd(e);
                            })
                            .catch(function (e) {
                              r && r(e);
                            })
                        : (setTimeout(function () {
                            t && t(a), i.manager.itemEnd(e);
                          }, 0),
                          a)
                    );
                  var s = {};
                  (s.credentials =
                    "anonymous" === this.crossOrigin ? "same-origin" : "include"),
                    (s.headers = this.requestHeader);
                  var o = fetch(e, s)
                    .then(function (e) {
                      return e.blob();
                    })
                    .then(function (e) {
                      return createImageBitmap(
                        e,
                        Object.assign(i.options, { colorSpaceConversion: "none" })
                      );
                    })
                    .then(function (n) {
                      return xf.add(e, n), t && t(n), i.manager.itemEnd(e), n;
                    })
                    .catch(function (t) {
                      r && r(t),
                        xf.remove(e),
                        i.manager.itemError(e),
                        i.manager.itemEnd(e);
                    });
                  xf.add(e, o), i.manager.itemStart(e);
                }
              }
            ]),
            t
          );
        })(Ef),
        qf = (function () {
          function e(t, n, r) {
            var i, a, s;
            switch ((Fi(this, e), (this.binding = t), (this.valueSize = r), n)) {
              case "quaternion":
                (i = this._slerp),
                  (a = this._slerpAdditive),
                  (s = this._setAdditiveIdentityQuaternion),
                  (this.buffer = new Float64Array(6 * r)),
                  (this._workIndex = 5);
                break;
              case "string":
              case "bool":
                (i = this._select),
                  (a = this._select),
                  (s = this._setAdditiveIdentityOther),
                  (this.buffer = new Array(5 * r));
                break;
              default:
                (i = this._lerp),
                  (a = this._lerpAdditive),
                  (s = this._setAdditiveIdentityNumeric),
                  (this.buffer = new Float64Array(5 * r));
            }
            (this._mixBufferRegion = i),
              (this._mixBufferRegionAdditive = a),
              (this._setIdentity = s),
              (this._origIndex = 3),
              (this._addIndex = 4),
              (this.cumulativeWeight = 0),
              (this.cumulativeWeightAdditive = 0),
              (this.useCount = 0),
              (this.referenceCount = 0);
          }
          return (
            Ni(e, [
              {
                key: "accumulate",
                value: function (e, t) {
                  var n = this.buffer,
                    r = this.valueSize,
                    i = e * r + r,
                    a = this.cumulativeWeight;
                  if (0 === a) {
                    for (var s = 0; s !== r; ++s) n[i + s] = n[s];
                    a = t;
                  } else {
                    var o = t / (a += t);
                    this._mixBufferRegion(n, i, 0, o, r);
                  }
                  this.cumulativeWeight = a;
                }
              },
              {
                key: "accumulateAdditive",
                value: function (e) {
                  var t = this.buffer,
                    n = this.valueSize,
                    r = n * this._addIndex;
                  0 === this.cumulativeWeightAdditive && this._setIdentity(),
                    this._mixBufferRegionAdditive(t, r, 0, e, n),
                    (this.cumulativeWeightAdditive += e);
                }
              },
              {
                key: "apply",
                value: function (e) {
                  var t = this.valueSize,
                    n = this.buffer,
                    r = e * t + t,
                    i = this.cumulativeWeight,
                    a = this.cumulativeWeightAdditive,
                    s = this.binding;
                  if (
                    ((this.cumulativeWeight = 0),
                    (this.cumulativeWeightAdditive = 0),
                    i < 1)
                  ) {
                    var o = t * this._origIndex;
                    this._mixBufferRegion(n, r, o, 1 - i, t);
                  }
                  a > 0 &&
                    this._mixBufferRegionAdditive(n, r, this._addIndex * t, 1, t);
                  for (var l = t, h = t + t; l !== h; ++l)
                    if (n[l] !== n[l + t]) {
                      s.setValue(n, r);
                      break;
                    }
                }
              },
              {
                key: "saveOriginalState",
                value: function () {
                  var e = this.binding,
                    t = this.buffer,
                    n = this.valueSize,
                    r = n * this._origIndex;
                  e.getValue(t, r);
                  for (var i = n, a = r; i !== a; ++i) t[i] = t[r + (i % n)];
                  this._setIdentity(),
                    (this.cumulativeWeight = 0),
                    (this.cumulativeWeightAdditive = 0);
                }
              },
              {
                key: "restoreOriginalState",
                value: function () {
                  var e = 3 * this.valueSize;
                  this.binding.setValue(this.buffer, e);
                }
              },
              {
                key: "_setAdditiveIdentityNumeric",
                value: function () {
                  for (
                    var e = this._addIndex * this.valueSize,
                      t = e + this.valueSize,
                      n = e;
                    n < t;
                    n++
                  )
                    this.buffer[n] = 0;
                }
              },
              {
                key: "_setAdditiveIdentityQuaternion",
                value: function () {
                  this._setAdditiveIdentityNumeric(),
                    (this.buffer[this._addIndex * this.valueSize + 3] = 1);
                }
              },
              {
                key: "_setAdditiveIdentityOther",
                value: function () {
                  for (
                    var e = this._origIndex * this.valueSize,
                      t = this._addIndex * this.valueSize,
                      n = 0;
                    n < this.valueSize;
                    n++
                  )
                    this.buffer[t + n] = this.buffer[e + n];
                }
              },
              {
                key: "_select",
                value: function (e, t, n, r, i) {
                  if (r >= 0.5) for (var a = 0; a !== i; ++a) e[t + a] = e[n + a];
                }
              },
              {
                key: "_slerp",
                value: function (e, t, n, r) {
                  eo.slerpFlat(e, t, e, t, e, n, r);
                }
              },
              {
                key: "_slerpAdditive",
                value: function (e, t, n, r, i) {
                  var a = this._workIndex * i;
                  eo.multiplyQuaternionsFlat(e, a, e, t, e, n),
                    eo.slerpFlat(e, t, e, t, e, a, r);
                }
              },
              {
                key: "_lerp",
                value: function (e, t, n, r, i) {
                  for (var a = 1 - r, s = 0; s !== i; ++s) {
                    var o = t + s;
                    e[o] = e[o] * a + e[n + s] * r;
                  }
                }
              },
              {
                key: "_lerpAdditive",
                value: function (e, t, n, r, i) {
                  for (var a = 0; a !== i; ++a) {
                    var s = t + a;
                    e[s] = e[s] + e[n + a] * r;
                  }
                }
              }
            ]),
            e
          );
        })(),
        Yf = new RegExp("[\\[\\]\\.:\\/]", "g"),
        Kf = "[^\\[\\]\\.:\\/]",
        Zf = "[^" + "\\[\\]\\.:\\/".replace("\\.", "") + "]",
        Jf = new RegExp(
          "^" +
            /((?:WC+[\/:])*)/.source.replace("WC", Kf) +
            /(WCOD+)?/.source.replace("WCOD", Zf) +
            /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Kf) +
            /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Kf) +
            "$"
        ),
        $f = ["material", "materials", "bones", "map"],
        Qf = (function () {
          function e(t, n, r) {
            Fi(this, e);
            var i = r || ep.parseTrackName(n);
            (this._targetGroup = t), (this._bindings = t.subscribe_(n, i));
          }
          return (
            Ni(e, [
              {
                key: "getValue",
                value: function (e, t) {
                  this.bind();
                  var n = this._targetGroup.nCachedObjects_,
                    r = this._bindings[n];
                  void 0 !== r && r.getValue(e, t);
                }
              },
              {
                key: "setValue",
                value: function (e, t) {
                  for (
                    var n = this._bindings,
                      r = this._targetGroup.nCachedObjects_,
                      i = n.length;
                    r !== i;
                    ++r
                  )
                    n[r].setValue(e, t);
                }
              },
              {
                key: "bind",
                value: function () {
                  for (
                    var e = this._bindings,
                      t = this._targetGroup.nCachedObjects_,
                      n = e.length;
                    t !== n;
                    ++t
                  )
                    e[t].bind();
                }
              },
              {
                key: "unbind",
                value: function () {
                  for (
                    var e = this._bindings,
                      t = this._targetGroup.nCachedObjects_,
                      n = e.length;
                    t !== n;
                    ++t
                  )
                    e[t].unbind();
                }
              }
            ]),
            e
          );
        })(),
        ep = (function () {
          function e(t, n, r) {
            Fi(this, e),
              (this.path = n),
              (this.parsedPath = r || e.parseTrackName(n)),
              (this.node = e.findNode(t, this.parsedPath.nodeName)),
              (this.rootNode = t),
              (this.getValue = this._getValue_unbound),
              (this.setValue = this._setValue_unbound);
          }
          return (
            Ni(
              e,
              [
                { key: "_getValue_unavailable", value: function () {} },
                { key: "_setValue_unavailable", value: function () {} },
                {
                  key: "_getValue_direct",
                  value: function (e, t) {
                    e[t] = this.targetObject[this.propertyName];
                  }
                },
                {
                  key: "_getValue_array",
                  value: function (e, t) {
                    for (
                      var n = this.resolvedProperty, r = 0, i = n.length;
                      r !== i;
                      ++r
                    )
                      e[t++] = n[r];
                  }
                },
                {
                  key: "_getValue_arrayElement",
                  value: function (e, t) {
                    e[t] = this.resolvedProperty[this.propertyIndex];
                  }
                },
                {
                  key: "_getValue_toArray",
                  value: function (e, t) {
                    this.resolvedProperty.toArray(e, t);
                  }
                },
                {
                  key: "_setValue_direct",
                  value: function (e, t) {
                    this.targetObject[this.propertyName] = e[t];
                  }
                },
                {
                  key: "_setValue_direct_setNeedsUpdate",
                  value: function (e, t) {
                    (this.targetObject[this.propertyName] = e[t]),
                      (this.targetObject.needsUpdate = !0);
                  }
                },
                {
                  key: "_setValue_direct_setMatrixWorldNeedsUpdate",
                  value: function (e, t) {
                    (this.targetObject[this.propertyName] = e[t]),
                      (this.targetObject.matrixWorldNeedsUpdate = !0);
                  }
                },
                {
                  key: "_setValue_array",
                  value: function (e, t) {
                    for (
                      var n = this.resolvedProperty, r = 0, i = n.length;
                      r !== i;
                      ++r
                    )
                      n[r] = e[t++];
                  }
                },
                {
                  key: "_setValue_array_setNeedsUpdate",
                  value: function (e, t) {
                    for (
                      var n = this.resolvedProperty, r = 0, i = n.length;
                      r !== i;
                      ++r
                    )
                      n[r] = e[t++];
                    this.targetObject.needsUpdate = !0;
                  }
                },
                {
                  key: "_setValue_array_setMatrixWorldNeedsUpdate",
                  value: function (e, t) {
                    for (
                      var n = this.resolvedProperty, r = 0, i = n.length;
                      r !== i;
                      ++r
                    )
                      n[r] = e[t++];
                    this.targetObject.matrixWorldNeedsUpdate = !0;
                  }
                },
                {
                  key: "_setValue_arrayElement",
                  value: function (e, t) {
                    this.resolvedProperty[this.propertyIndex] = e[t];
                  }
                },
                {
                  key: "_setValue_arrayElement_setNeedsUpdate",
                  value: function (e, t) {
                    (this.resolvedProperty[this.propertyIndex] = e[t]),
                      (this.targetObject.needsUpdate = !0);
                  }
                },
                {
                  key: "_setValue_arrayElement_setMatrixWorldNeedsUpdate",
                  value: function (e, t) {
                    (this.resolvedProperty[this.propertyIndex] = e[t]),
                      (this.targetObject.matrixWorldNeedsUpdate = !0);
                  }
                },
                {
                  key: "_setValue_fromArray",
                  value: function (e, t) {
                    this.resolvedProperty.fromArray(e, t);
                  }
                },
                {
                  key: "_setValue_fromArray_setNeedsUpdate",
                  value: function (e, t) {
                    this.resolvedProperty.fromArray(e, t),
                      (this.targetObject.needsUpdate = !0);
                  }
                },
                {
                  key: "_setValue_fromArray_setMatrixWorldNeedsUpdate",
                  value: function (e, t) {
                    this.resolvedProperty.fromArray(e, t),
                      (this.targetObject.matrixWorldNeedsUpdate = !0);
                  }
                },
                {
                  key: "_getValue_unbound",
                  value: function (e, t) {
                    this.bind(), this.getValue(e, t);
                  }
                },
                {
                  key: "_setValue_unbound",
                  value: function (e, t) {
                    this.bind(), this.setValue(e, t);
                  }
                },
                {
                  key: "bind",
                  value: function () {
                    var t = this.node,
                      n = this.parsedPath,
                      r = n.objectName,
                      i = n.propertyName,
                      a = n.propertyIndex;
                    if (
                      (t ||
                        ((t = e.findNode(this.rootNode, n.nodeName)),
                        (this.node = t)),
                      (this.getValue = this._getValue_unavailable),
                      (this.setValue = this._setValue_unavailable),
                      t)
                    ) {
                      if (r) {
                        var s = n.objectIndex;
                        switch (r) {
                          case "materials":
                            if (!t.material)
                              return void console.error(
                                "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                                this
                              );
                            if (!t.material.materials)
                              return void console.error(
                                "THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
                                this
                              );
                            t = t.material.materials;
                            break;
                          case "bones":
                            if (!t.skeleton)
                              return void console.error(
                                "THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",
                                this
                              );
                            t = t.skeleton.bones;
                            for (var o = 0; o < t.length; o++)
                              if (t[o].name === s) {
                                s = o;
                                break;
                              }
                            break;
                          case "map":
                            if ("map" in t) {
                              t = t.map;
                              break;
                            }
                            if (!t.material)
                              return void console.error(
                                "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                                this
                              );
                            if (!t.material.map)
                              return void console.error(
                                "THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",
                                this
                              );
                            t = t.material.map;
                            break;
                          default:
                            if (void 0 === t[r])
                              return void console.error(
                                "THREE.PropertyBinding: Can not bind to objectName of node undefined.",
                                this
                              );
                            t = t[r];
                        }
                        if (void 0 !== s) {
                          if (void 0 === t[s])
                            return void console.error(
                              "THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
                              this,
                              t
                            );
                          t = t[s];
                        }
                      }
                      var l = t[i];
                      if (void 0 !== l) {
                        var h = this.Versioning.None;
                        (this.targetObject = t),
                          void 0 !== t.needsUpdate
                            ? (h = this.Versioning.NeedsUpdate)
                            : void 0 !== t.matrixWorldNeedsUpdate &&
                              (h = this.Versioning.MatrixWorldNeedsUpdate);
                        var u = this.BindingType.Direct;
                        if (void 0 !== a) {
                          if ("morphTargetInfluences" === i) {
                            if (!t.geometry)
                              return void console.error(
                                "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
                                this
                              );
                            if (!t.geometry.morphAttributes)
                              return void console.error(
                                "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
                                this
                              );
                            void 0 !== t.morphTargetDictionary[a] &&
                              (a = t.morphTargetDictionary[a]);
                          }
                          (u = this.BindingType.ArrayElement),
                            (this.resolvedProperty = l),
                            (this.propertyIndex = a);
                        } else
                          void 0 !== l.fromArray && void 0 !== l.toArray
                            ? ((u = this.BindingType.HasFromToArray),
                              (this.resolvedProperty = l))
                            : Array.isArray(l)
                            ? ((u = this.BindingType.EntireArray),
                              (this.resolvedProperty = l))
                            : (this.propertyName = i);
                        (this.getValue = this.GetterByBindingType[u]),
                          (this.setValue =
                            this.SetterByBindingTypeAndVersioning[u][h]);
                      } else {
                        var c = n.nodeName;
                        console.error(
                          "THREE.PropertyBinding: Trying to update property for track: " +
                            c +
                            "." +
                            i +
                            " but it wasn't found.",
                          t
                        );
                      }
                    } else
                      console.warn(
                        "THREE.PropertyBinding: No target node found for track: " +
                          this.path +
                          "."
                      );
                  }
                },
                {
                  key: "unbind",
                  value: function () {
                    (this.node = null),
                      (this.getValue = this._getValue_unbound),
                      (this.setValue = this._setValue_unbound);
                  }
                }
              ],
              [
                {
                  key: "create",
                  value: function (t, n, r) {
                    return t && t.isAnimationObjectGroup
                      ? new e.Composite(t, n, r)
                      : new e(t, n, r);
                  }
                },
                {
                  key: "sanitizeNodeName",
                  value: function (e) {
                    return e.replace(/\s/g, "_").replace(Yf, "");
                  }
                },
                {
                  key: "parseTrackName",
                  value: function (e) {
                    var t = Jf.exec(e);
                    if (null === t)
                      throw new Error(
                        "PropertyBinding: Cannot parse trackName: " + e
                      );
                    var n = {
                        nodeName: t[2],
                        objectName: t[3],
                        objectIndex: t[4],
                        propertyName: t[5],
                        propertyIndex: t[6]
                      },
                      r = n.nodeName && n.nodeName.lastIndexOf(".");
                    if (void 0 !== r && -1 !== r) {
                      var i = n.nodeName.substring(r + 1);
                      -1 !== $f.indexOf(i) &&
                        ((n.nodeName = n.nodeName.substring(0, r)),
                        (n.objectName = i));
                    }
                    if (null === n.propertyName || 0 === n.propertyName.length)
                      throw new Error(
                        "PropertyBinding: can not parse propertyName from trackName: " +
                          e
                      );
                    return n;
                  }
                },
                {
                  key: "findNode",
                  value: function (e, t) {
                    if (
                      void 0 === t ||
                      "" === t ||
                      "." === t ||
                      -1 === t ||
                      t === e.name ||
                      t === e.uuid
                    )
                      return e;
                    if (e.skeleton) {
                      var n = e.skeleton.getBoneByName(t);
                      if (void 0 !== n) return n;
                    }
                    if (e.children) {
                      var r = (function e(n) {
                        for (var r = 0; r < n.length; r++) {
                          var i = n[r];
                          if (i.name === t || i.uuid === t) return i;
                          var a = e(i.children);
                          if (a) return a;
                        }
                        return null;
                      })(e.children);
                      if (r) return r;
                    }
                    return null;
                  }
                }
              ]
            ),
            e
          );
        })();
      (ep.Composite = Qf),
        (ep.prototype.BindingType = {
          Direct: 0,
          EntireArray: 1,
          ArrayElement: 2,
          HasFromToArray: 3
        }),
        (ep.prototype.Versioning = {
          None: 0,
          NeedsUpdate: 1,
          MatrixWorldNeedsUpdate: 2
        }),
        (ep.prototype.GetterByBindingType = [
          ep.prototype._getValue_direct,
          ep.prototype._getValue_array,
          ep.prototype._getValue_arrayElement,
          ep.prototype._getValue_toArray
        ]),
        (ep.prototype.SetterByBindingTypeAndVersioning = [
          [
            ep.prototype._setValue_direct,
            ep.prototype._setValue_direct_setNeedsUpdate,
            ep.prototype._setValue_direct_setMatrixWorldNeedsUpdate
          ],
          [
            ep.prototype._setValue_array,
            ep.prototype._setValue_array_setNeedsUpdate,
            ep.prototype._setValue_array_setMatrixWorldNeedsUpdate
          ],
          [
            ep.prototype._setValue_arrayElement,
            ep.prototype._setValue_arrayElement_setNeedsUpdate,
            ep.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate
          ],
          [
            ep.prototype._setValue_fromArray,
            ep.prototype._setValue_fromArray_setNeedsUpdate,
            ep.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate
          ]
        ]);
      var tp = (function () {
          function e(t, n) {
            var r =
                arguments.length > 2 && void 0 !== arguments[2]
                  ? arguments[2]
                  : null,
              i =
                arguments.length > 3 && void 0 !== arguments[3]
                  ? arguments[3]
                  : n.blendMode;
            Fi(this, e),
              (this._mixer = t),
              (this._clip = n),
              (this._localRoot = r),
              (this.blendMode = i);
            for (
              var a = n.tracks,
                s = a.length,
                o = new Array(s),
                l = { endingStart: Ya, endingEnd: Ya },
                h = 0;
              h !== s;
              ++h
            ) {
              var u = a[h].createInterpolant(null);
              (o[h] = u), (u.settings = l);
            }
            (this._interpolantSettings = l),
              (this._interpolants = o),
              (this._propertyBindings = new Array(s)),
              (this._cacheIndex = null),
              (this._byClipCacheIndex = null),
              (this._timeScaleInterpolant = null),
              (this._weightInterpolant = null),
              (this.loop = 2201),
              (this._loopCount = -1),
              (this._startTime = null),
              (this.time = 0),
              (this.timeScale = 1),
              (this._effectiveTimeScale = 1),
              (this.weight = 1),
              (this._effectiveWeight = 1),
              (this.repetitions = 1 / 0),
              (this.paused = !1),
              (this.enabled = !0),
              (this.clampWhenFinished = !1),
              (this.zeroSlopeAtStart = !0),
              (this.zeroSlopeAtEnd = !0);
          }
          return (
            Ni(e, [
              {
                key: "play",
                value: function () {
                  return this._mixer._activateAction(this), this;
                }
              },
              {
                key: "stop",
                value: function () {
                  return this._mixer._deactivateAction(this), this.reset();
                }
              },
              {
                key: "reset",
                value: function () {
                  return (
                    (this.paused = !1),
                    (this.enabled = !0),
                    (this.time = 0),
                    (this._loopCount = -1),
                    (this._startTime = null),
                    this.stopFading().stopWarping()
                  );
                }
              },
              {
                key: "isRunning",
                value: function () {
                  return (
                    this.enabled &&
                    !this.paused &&
                    0 !== this.timeScale &&
                    null === this._startTime &&
                    this._mixer._isActiveAction(this)
                  );
                }
              },
              {
                key: "isScheduled",
                value: function () {
                  return this._mixer._isActiveAction(this);
                }
              },
              {
                key: "startAt",
                value: function (e) {
                  return (this._startTime = e), this;
                }
              },
              {
                key: "setLoop",
                value: function (e, t) {
                  return (this.loop = e), (this.repetitions = t), this;
                }
              },
              {
                key: "setEffectiveWeight",
                value: function (e) {
                  return (
                    (this.weight = e),
                    (this._effectiveWeight = this.enabled ? e : 0),
                    this.stopFading()
                  );
                }
              },
              {
                key: "getEffectiveWeight",
                value: function () {
                  return this._effectiveWeight;
                }
              },
              {
                key: "fadeIn",
                value: function (e) {
                  return this._scheduleFading(e, 0, 1);
                }
              },
              {
                key: "fadeOut",
                value: function (e) {
                  return this._scheduleFading(e, 1, 0);
                }
              },
              {
                key: "crossFadeFrom",
                value: function (e, t, n) {
                  if ((e.fadeOut(t), this.fadeIn(t), n)) {
                    var r = this._clip.duration,
                      i = e._clip.duration,
                      a = i / r,
                      s = r / i;
                    e.warp(1, a, t), this.warp(s, 1, t);
                  }
                  return this;
                }
              },
              {
                key: "crossFadeTo",
                value: function (e, t, n) {
                  return e.crossFadeFrom(this, t, n);
                }
              },
              {
                key: "stopFading",
                value: function () {
                  var e = this._weightInterpolant;
                  return (
                    null !== e &&
                      ((this._weightInterpolant = null),
                      this._mixer._takeBackControlInterpolant(e)),
                    this
                  );
                }
              },
              {
                key: "setEffectiveTimeScale",
                value: function (e) {
                  return (
                    (this.timeScale = e),
                    (this._effectiveTimeScale = this.paused ? 0 : e),
                    this.stopWarping()
                  );
                }
              },
              {
                key: "getEffectiveTimeScale",
                value: function () {
                  return this._effectiveTimeScale;
                }
              },
              {
                key: "setDuration",
                value: function (e) {
                  return (
                    (this.timeScale = this._clip.duration / e), this.stopWarping()
                  );
                }
              },
              {
                key: "syncWith",
                value: function (e) {
                  return (
                    (this.time = e.time),
                    (this.timeScale = e.timeScale),
                    this.stopWarping()
                  );
                }
              },
              {
                key: "halt",
                value: function (e) {
                  return this.warp(this._effectiveTimeScale, 0, e);
                }
              },
              {
                key: "warp",
                value: function (e, t, n) {
                  var r = this._mixer,
                    i = r.time,
                    a = this.timeScale,
                    s = this._timeScaleInterpolant;
                  null === s &&
                    ((s = r._lendControlInterpolant()),
                    (this._timeScaleInterpolant = s));
                  var o = s.parameterPositions,
                    l = s.sampleValues;
                  return (
                    (o[0] = i),
                    (o[1] = i + n),
                    (l[0] = e / a),
                    (l[1] = t / a),
                    this
                  );
                }
              },
              {
                key: "stopWarping",
                value: function () {
                  var e = this._timeScaleInterpolant;
                  return (
                    null !== e &&
                      ((this._timeScaleInterpolant = null),
                      this._mixer._takeBackControlInterpolant(e)),
                    this
                  );
                }
              },
              {
                key: "getMixer",
                value: function () {
                  return this._mixer;
                }
              },
              {
                key: "getClip",
                value: function () {
                  return this._clip;
                }
              },
              {
                key: "getRoot",
                value: function () {
                  return this._localRoot || this._mixer._root;
                }
              },
              {
                key: "_update",
                value: function (e, t, n, r) {
                  if (this.enabled) {
                    var i = this._startTime;
                    if (null !== i) {
                      var a = (e - i) * n;
                      a < 0 || 0 === n
                        ? (t = 0)
                        : ((this._startTime = null), (t = n * a));
                    }
                    t *= this._updateTimeScale(e);
                    var s = this._updateTime(t),
                      o = this._updateWeight(e);
                    if (o > 0) {
                      var l = this._interpolants,
                        h = this._propertyBindings;
                      if (2501 === this.blendMode)
                        for (var u = 0, c = l.length; u !== c; ++u)
                          l[u].evaluate(s), h[u].accumulateAdditive(o);
                      else
                        for (var d = 0, f = l.length; d !== f; ++d)
                          l[d].evaluate(s), h[d].accumulate(r, o);
                    }
                  } else this._updateWeight(e);
                }
              },
              {
                key: "_updateWeight",
                value: function (e) {
                  var t = 0;
                  if (this.enabled) {
                    t = this.weight;
                    var n = this._weightInterpolant;
                    if (null !== n) {
                      var r = n.evaluate(e)[0];
                      (t *= r),
                        e > n.parameterPositions[1] &&
                          (this.stopFading(), 0 === r && (this.enabled = !1));
                    }
                  }
                  return (this._effectiveWeight = t), t;
                }
              },
              {
                key: "_updateTimeScale",
                value: function (e) {
                  var t = 0;
                  if (!this.paused) {
                    t = this.timeScale;
                    var n = this._timeScaleInterpolant;
                    null !== n &&
                      ((t *= n.evaluate(e)[0]),
                      e > n.parameterPositions[1] &&
                        (this.stopWarping(),
                        0 === t ? (this.paused = !0) : (this.timeScale = t)));
                  }
                  return (this._effectiveTimeScale = t), t;
                }
              },
              {
                key: "_updateTime",
                value: function (e) {
                  var t = this._clip.duration,
                    n = this.loop,
                    r = this.time + e,
                    i = this._loopCount,
                    a = 2202 === n;
                  if (0 === e)
                    return -1 === i ? r : a && 1 == (1 & i) ? t - r : r;
                  if (2200 === n) {
                    -1 === i &&
                      ((this._loopCount = 0), this._setEndings(!0, !0, !1));
                    e: {
                      if (r >= t) r = t;
                      else {
                        if (!(r < 0)) {
                          this.time = r;
                          break e;
                        }
                        r = 0;
                      }
                      this.clampWhenFinished
                        ? (this.paused = !0)
                        : (this.enabled = !1),
                        (this.time = r),
                        this._mixer.dispatchEvent({
                          type: "finished",
                          action: this,
                          direction: e < 0 ? -1 : 1
                        });
                    }
                  } else {
                    if (
                      (-1 === i &&
                        (e >= 0
                          ? ((i = 0),
                            this._setEndings(!0, 0 === this.repetitions, a))
                          : this._setEndings(0 === this.repetitions, !0, a)),
                      r >= t || r < 0)
                    ) {
                      var s = Math.floor(r / t);
                      (r -= t * s), (i += Math.abs(s));
                      var o = this.repetitions - i;
                      if (o <= 0)
                        this.clampWhenFinished
                          ? (this.paused = !0)
                          : (this.enabled = !1),
                          (r = e > 0 ? t : 0),
                          (this.time = r),
                          this._mixer.dispatchEvent({
                            type: "finished",
                            action: this,
                            direction: e > 0 ? 1 : -1
                          });
                      else {
                        if (1 === o) {
                          var l = e < 0;
                          this._setEndings(l, !l, a);
                        } else this._setEndings(!1, !1, a);
                        (this._loopCount = i),
                          (this.time = r),
                          this._mixer.dispatchEvent({
                            type: "loop",
                            action: this,
                            loopDelta: s
                          });
                      }
                    } else this.time = r;
                    if (a && 1 == (1 & i)) return t - r;
                  }
                  return r;
                }
              },
              {
                key: "_setEndings",
                value: function (e, t, n) {
                  var r = this._interpolantSettings;
                  n
                    ? ((r.endingStart = Ka), (r.endingEnd = Ka))
                    : ((r.endingStart = e
                        ? this.zeroSlopeAtStart
                          ? Ka
                          : Ya
                        : Za),
                      (r.endingEnd = t ? (this.zeroSlopeAtEnd ? Ka : Ya) : Za));
                }
              },
              {
                key: "_scheduleFading",
                value: function (e, t, n) {
                  var r = this._mixer,
                    i = r.time,
                    a = this._weightInterpolant;
                  null === a &&
                    ((a = r._lendControlInterpolant()),
                    (this._weightInterpolant = a));
                  var s = a.parameterPositions,
                    o = a.sampleValues;
                  return (s[0] = i), (o[0] = t), (s[1] = i + e), (o[1] = n), this;
                }
              }
            ]),
            e
          );
        })(),
        np = new Float32Array(1),
        rp = (function (e) {
          function t(e) {
            var n;
            return (
              Fi(this, t),
              ((n = Mi(this, t))._root = e),
              n._initMemoryManager(),
              (n._accuIndex = 0),
              (n.time = 0),
              (n.timeScale = 1),
              n
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "_bindAction",
                value: function (e, t) {
                  var n = e._localRoot || this._root,
                    r = e._clip.tracks,
                    i = r.length,
                    a = e._propertyBindings,
                    s = e._interpolants,
                    o = n.uuid,
                    l = this._bindingsByRootAndName,
                    h = l[o];
                  void 0 === h && ((h = {}), (l[o] = h));
                  for (var u = 0; u !== i; ++u) {
                    var c = r[u],
                      d = c.name,
                      f = h[d];
                    if (void 0 !== f) ++f.referenceCount, (a[u] = f);
                    else {
                      if (void 0 !== (f = a[u])) {
                        null === f._cacheIndex &&
                          (++f.referenceCount, this._addInactiveBinding(f, o, d));
                        continue;
                      }
                      var p = t && t._propertyBindings[u].binding.parsedPath;
                      ++(f = new qf(
                        ep.create(n, d, p),
                        c.ValueTypeName,
                        c.getValueSize()
                      )).referenceCount,
                        this._addInactiveBinding(f, o, d),
                        (a[u] = f);
                    }
                    s[u].resultBuffer = f.buffer;
                  }
                }
              },
              {
                key: "_activateAction",
                value: function (e) {
                  if (!this._isActiveAction(e)) {
                    if (null === e._cacheIndex) {
                      var t = (e._localRoot || this._root).uuid,
                        n = e._clip.uuid,
                        r = this._actionsByClip[n];
                      this._bindAction(e, r && r.knownActions[0]),
                        this._addInactiveAction(e, n, t);
                    }
                    for (
                      var i = e._propertyBindings, a = 0, s = i.length;
                      a !== s;
                      ++a
                    ) {
                      var o = i[a];
                      0 == o.useCount++ &&
                        (this._lendBinding(o), o.saveOriginalState());
                    }
                    this._lendAction(e);
                  }
                }
              },
              {
                key: "_deactivateAction",
                value: function (e) {
                  if (this._isActiveAction(e)) {
                    for (
                      var t = e._propertyBindings, n = 0, r = t.length;
                      n !== r;
                      ++n
                    ) {
                      var i = t[n];
                      0 == --i.useCount &&
                        (i.restoreOriginalState(), this._takeBackBinding(i));
                    }
                    this._takeBackAction(e);
                  }
                }
              },
              {
                key: "_initMemoryManager",
                value: function () {
                  (this._actions = []),
                    (this._nActiveActions = 0),
                    (this._actionsByClip = {}),
                    (this._bindings = []),
                    (this._nActiveBindings = 0),
                    (this._bindingsByRootAndName = {}),
                    (this._controlInterpolants = []),
                    (this._nActiveControlInterpolants = 0);
                  var e = this;
                  this.stats = {
                    actions: {
                      get total() {
                        return e._actions.length;
                      },
                      get inUse() {
                        return e._nActiveActions;
                      }
                    },
                    bindings: {
                      get total() {
                        return e._bindings.length;
                      },
                      get inUse() {
                        return e._nActiveBindings;
                      }
                    },
                    controlInterpolants: {
                      get total() {
                        return e._controlInterpolants.length;
                      },
                      get inUse() {
                        return e._nActiveControlInterpolants;
                      }
                    }
                  };
                }
              },
              {
                key: "_isActiveAction",
                value: function (e) {
                  var t = e._cacheIndex;
                  return null !== t && t < this._nActiveActions;
                }
              },
              {
                key: "_addInactiveAction",
                value: function (e, t, n) {
                  var r = this._actions,
                    i = this._actionsByClip,
                    a = i[t];
                  if (void 0 === a)
                    (a = { knownActions: [e], actionByRoot: {} }),
                      (e._byClipCacheIndex = 0),
                      (i[t] = a);
                  else {
                    var s = a.knownActions;
                    (e._byClipCacheIndex = s.length), s.push(e);
                  }
                  (e._cacheIndex = r.length), r.push(e), (a.actionByRoot[n] = e);
                }
              },
              {
                key: "_removeInactiveAction",
                value: function (e) {
                  var t = this._actions,
                    n = t[t.length - 1],
                    r = e._cacheIndex;
                  (n._cacheIndex = r),
                    (t[r] = n),
                    t.pop(),
                    (e._cacheIndex = null);
                  var i = e._clip.uuid,
                    a = this._actionsByClip,
                    s = a[i],
                    o = s.knownActions,
                    l = o[o.length - 1],
                    h = e._byClipCacheIndex;
                  (l._byClipCacheIndex = h),
                    (o[h] = l),
                    o.pop(),
                    (e._byClipCacheIndex = null),
                    delete s.actionByRoot[(e._localRoot || this._root).uuid],
                    0 === o.length && delete a[i],
                    this._removeInactiveBindingsForAction(e);
                }
              },
              {
                key: "_removeInactiveBindingsForAction",
                value: function (e) {
                  for (
                    var t = e._propertyBindings, n = 0, r = t.length;
                    n !== r;
                    ++n
                  ) {
                    var i = t[n];
                    0 == --i.referenceCount && this._removeInactiveBinding(i);
                  }
                }
              },
              {
                key: "_lendAction",
                value: function (e) {
                  var t = this._actions,
                    n = e._cacheIndex,
                    r = this._nActiveActions++,
                    i = t[r];
                  (e._cacheIndex = r),
                    (t[r] = e),
                    (i._cacheIndex = n),
                    (t[n] = i);
                }
              },
              {
                key: "_takeBackAction",
                value: function (e) {
                  var t = this._actions,
                    n = e._cacheIndex,
                    r = --this._nActiveActions,
                    i = t[r];
                  (e._cacheIndex = r),
                    (t[r] = e),
                    (i._cacheIndex = n),
                    (t[n] = i);
                }
              },
              {
                key: "_addInactiveBinding",
                value: function (e, t, n) {
                  var r = this._bindingsByRootAndName,
                    i = this._bindings,
                    a = r[t];
                  void 0 === a && ((a = {}), (r[t] = a)),
                    (a[n] = e),
                    (e._cacheIndex = i.length),
                    i.push(e);
                }
              },
              {
                key: "_removeInactiveBinding",
                value: function (e) {
                  var t = this._bindings,
                    n = e.binding,
                    r = n.rootNode.uuid,
                    i = n.path,
                    a = this._bindingsByRootAndName,
                    s = a[r],
                    o = t[t.length - 1],
                    l = e._cacheIndex;
                  (o._cacheIndex = l),
                    (t[l] = o),
                    t.pop(),
                    delete s[i],
                    0 === Object.keys(s).length && delete a[r];
                }
              },
              {
                key: "_lendBinding",
                value: function (e) {
                  var t = this._bindings,
                    n = e._cacheIndex,
                    r = this._nActiveBindings++,
                    i = t[r];
                  (e._cacheIndex = r),
                    (t[r] = e),
                    (i._cacheIndex = n),
                    (t[n] = i);
                }
              },
              {
                key: "_takeBackBinding",
                value: function (e) {
                  var t = this._bindings,
                    n = e._cacheIndex,
                    r = --this._nActiveBindings,
                    i = t[r];
                  (e._cacheIndex = r),
                    (t[r] = e),
                    (i._cacheIndex = n),
                    (t[n] = i);
                }
              },
              {
                key: "_lendControlInterpolant",
                value: function () {
                  var e = this._controlInterpolants,
                    t = this._nActiveControlInterpolants++,
                    n = e[t];
                  return (
                    void 0 === n &&
                      (((n = new hf(
                        new Float32Array(2),
                        new Float32Array(2),
                        1,
                        np
                      )).__cacheIndex = t),
                      (e[t] = n)),
                    n
                  );
                }
              },
              {
                key: "_takeBackControlInterpolant",
                value: function (e) {
                  var t = this._controlInterpolants,
                    n = e.__cacheIndex,
                    r = --this._nActiveControlInterpolants,
                    i = t[r];
                  (e.__cacheIndex = r),
                    (t[r] = e),
                    (i.__cacheIndex = n),
                    (t[n] = i);
                }
              },
              {
                key: "clipAction",
                value: function (e, t, n) {
                  var r = t || this._root,
                    i = r.uuid,
                    a = "string" == typeof e ? _f.findByName(r, e) : e,
                    s = null !== a ? a.uuid : e,
                    o = this._actionsByClip[s],
                    l = null;
                  if (
                    (void 0 === n && (n = null !== a ? a.blendMode : Ja),
                    void 0 !== o)
                  ) {
                    var h = o.actionByRoot[i];
                    if (void 0 !== h && h.blendMode === n) return h;
                    (l = o.knownActions[0]), null === a && (a = l._clip);
                  }
                  if (null === a) return null;
                  var u = new tp(this, a, t, n);
                  return (
                    this._bindAction(u, l), this._addInactiveAction(u, s, i), u
                  );
                }
              },
              {
                key: "existingAction",
                value: function (e, t) {
                  var n = t || this._root,
                    r = n.uuid,
                    i = "string" == typeof e ? _f.findByName(n, e) : e,
                    a = i ? i.uuid : e,
                    s = this._actionsByClip[a];
                  return (void 0 !== s && s.actionByRoot[r]) || null;
                }
              },
              {
                key: "stopAllAction",
                value: function () {
                  for (
                    var e = this._actions, t = this._nActiveActions - 1;
                    t >= 0;
                    --t
                  )
                    e[t].stop();
                  return this;
                }
              },
              {
                key: "update",
                value: function (e) {
                  e *= this.timeScale;
                  for (
                    var t = this._actions,
                      n = this._nActiveActions,
                      r = (this.time += e),
                      i = Math.sign(e),
                      a = (this._accuIndex ^= 1),
                      s = 0;
                    s !== n;
                    ++s
                  )
                    t[s]._update(r, e, i, a);
                  for (
                    var o = this._bindings, l = this._nActiveBindings, h = 0;
                    h !== l;
                    ++h
                  )
                    o[h].apply(a);
                  return this;
                }
              },
              {
                key: "setTime",
                value: function (e) {
                  this.time = 0;
                  for (var t = 0; t < this._actions.length; t++)
                    this._actions[t].time = 0;
                  return this.update(e);
                }
              },
              {
                key: "getRoot",
                value: function () {
                  return this._root;
                }
              },
              {
                key: "uncacheClip",
                value: function (e) {
                  var t = this._actions,
                    n = e.uuid,
                    r = this._actionsByClip,
                    i = r[n];
                  if (void 0 !== i) {
                    for (
                      var a = i.knownActions, s = 0, o = a.length;
                      s !== o;
                      ++s
                    ) {
                      var l = a[s];
                      this._deactivateAction(l);
                      var h = l._cacheIndex,
                        u = t[t.length - 1];
                      (l._cacheIndex = null),
                        (l._byClipCacheIndex = null),
                        (u._cacheIndex = h),
                        (t[h] = u),
                        t.pop(),
                        this._removeInactiveBindingsForAction(l);
                    }
                    delete r[n];
                  }
                }
              },
              {
                key: "uncacheRoot",
                value: function (e) {
                  var t = e.uuid,
                    n = this._actionsByClip;
                  for (var r in n) {
                    var i = n[r].actionByRoot[t];
                    void 0 !== i &&
                      (this._deactivateAction(i), this._removeInactiveAction(i));
                  }
                  var a = this._bindingsByRootAndName[t];
                  if (void 0 !== a)
                    for (var s in a) {
                      var o = a[s];
                      o.restoreOriginalState(), this._removeInactiveBinding(o);
                    }
                }
              },
              {
                key: "uncacheAction",
                value: function (e, t) {
                  var n = this.existingAction(e, t);
                  null !== n &&
                    (this._deactivateAction(n), this._removeInactiveAction(n));
                }
              }
            ]),
            t
          );
        })(ps),
        ip = (function (e) {
          function t(e, n, r) {
            var i;
            return (
              Fi(this, t),
              ((i = Mi(this, t, [
                new $d(n, 4, 2),
                new wl({ wireframe: !0, fog: !1, toneMapped: !1 })
              ])).light = e),
              (i.color = r),
              (i.type = "PointLightHelper"),
              (i.matrix = i.light.matrixWorld),
              (i.matrixAutoUpdate = !1),
              i.update(),
              i
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "dispose",
                value: function () {
                  this.geometry.dispose(), this.material.dispose();
                }
              },
              {
                key: "update",
                value: function () {
                  this.light.updateWorldMatrix(!0, !1),
                    void 0 !== this.color
                      ? this.material.color.set(this.color)
                      : this.material.color.copy(this.light.color);
                }
              }
            ]),
            t
          );
        })(nh),
        ap = new to(),
        sp = new bl(),
        op = new bl(),
        lp = (function (e) {
          function t(e, n, r) {
            var i;
            Fi(this, t),
              ((i = Mi(this, t)).light = e),
              (i.matrix = e.matrixWorld),
              (i.matrixAutoUpdate = !1),
              (i.color = r),
              (i.type = "HemisphereLightHelper");
            var a = new Jd(n);
            a.rotateY(0.5 * Math.PI),
              (i.material = new wl({ wireframe: !0, fog: !1, toneMapped: !1 })),
              void 0 === i.color && (i.material.vertexColors = !0);
            var s = a.getAttribute("position"),
              o = new Float32Array(3 * s.count);
            return (
              a.setAttribute("color", new Al(o, 3)),
              i.add(new nh(a, i.material)),
              i.update(),
              i
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "dispose",
                value: function () {
                  this.children[0].geometry.dispose(),
                    this.children[0].material.dispose();
                }
              },
              {
                key: "update",
                value: function () {
                  var e = this.children[0];
                  if (void 0 !== this.color) this.material.color.set(this.color);
                  else {
                    var t = e.geometry.getAttribute("color");
                    sp.copy(this.light.color), op.copy(this.light.groundColor);
                    for (var n = 0, r = t.count; n < r; n++) {
                      var i = n < r / 2 ? sp : op;
                      t.setXYZ(n, i.r, i.g, i.b);
                    }
                    t.needsUpdate = !0;
                  }
                  this.light.updateWorldMatrix(!0, !1),
                    e.lookAt(
                      ap.setFromMatrixPosition(this.light.matrixWorld).negate()
                    );
                }
              }
            ]),
            t
          );
        })(rl),
        hp = new to(),
        up = new to(),
        cp = new to(),
        dp = (function (e) {
          function t(e, n, r) {
            var i;
            Fi(this, t),
              ((i = Mi(this, t)).light = e),
              (i.matrix = e.matrixWorld),
              (i.matrixAutoUpdate = !1),
              (i.color = r),
              (i.type = "DirectionalLightHelper"),
              void 0 === n && (n = 1);
            var a = new Bl();
            a.setAttribute(
              "position",
              new kl([-n, n, 0, n, n, 0, n, -n, 0, -n, -n, 0, -n, n, 0], 3)
            );
            var s = new Dd({ fog: !1, toneMapped: !1 });
            return (
              (i.lightPlane = new Bd(a, s)),
              i.add(i.lightPlane),
              (a = new Bl()).setAttribute(
                "position",
                new kl([0, 0, 0, 0, 0, 1], 3)
              ),
              (i.targetLine = new Bd(a, s)),
              i.add(i.targetLine),
              i.update(),
              i
            );
          }
          return (
            ki(t, e),
            Ni(t, [
              {
                key: "dispose",
                value: function () {
                  this.lightPlane.geometry.dispose(),
                    this.lightPlane.material.dispose(),
                    this.targetLine.geometry.dispose(),
                    this.targetLine.material.dispose();
                }
              },
              {
                key: "update",
                value: function () {
                  this.light.updateWorldMatrix(!0, !1),
                    this.light.target.updateWorldMatrix(!0, !1),
                    hp.setFromMatrixPosition(this.light.matrixWorld),
                    up.setFromMatrixPosition(this.light.target.matrixWorld),
                    cp.subVectors(up, hp),
                    this.lightPlane.lookAt(up),
                    void 0 !== this.color
                      ? (this.lightPlane.material.color.set(this.color),
                        this.targetLine.material.color.set(this.color))
                      : (this.lightPlane.material.color.copy(this.light.color),
                        this.targetLine.material.color.copy(this.light.color)),
                    this.targetLine.lookAt(up),
                    (this.targetLine.scale.z = cp.length());
                }
              }
            ]),
            t
          );
        })(rl);
      function fp(e, t) {
        if (0 === t)
          return (
            console.warn(
              "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."
            ),
            e
          );
        if (2 === t || 1 === t) {
          var n = e.getIndex();
          if (null === n) {
            var r = [],
              i = e.getAttribute("position");
            if (void 0 === i)
              return (
                console.error(
                  "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."
                ),
                e
              );
            for (var a = 0; a < i.count; a++) r.push(a);
            e.setIndex(r), (n = e.getIndex());
          }
          var s = n.count - 2,
            o = [];
          if (2 === t)
            for (var l = 1; l <= s; l++)
              o.push(n.getX(0)), o.push(n.getX(l)), o.push(n.getX(l + 1));
          else
            for (var h = 0; h < s; h++)
              h % 2 == 0
                ? (o.push(n.getX(h)),
                  o.push(n.getX(h + 1)),
                  o.push(n.getX(h + 2)))
                : (o.push(n.getX(h + 2)),
                  o.push(n.getX(h + 1)),
                  o.push(n.getX(h)));
          o.length / 3 !== s &&
            console.error(
              "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles."
            );
          var u = e.clone();
          return u.setIndex(o), u.clearGroups(), u;
        }
        return (
          console.error(
            "THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",
            t
          ),
          e
        );
      }
      function pp(e, t) {
        return (
          (function (e) {
            if (Array.isArray(e)) return e;
          })(e) ||
          (function (e, t) {
            var n =
              null == e
                ? null
                : ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                  e["@@iterator"];
            if (null != n) {
              var r,
                i,
                a,
                s,
                o = [],
                l = !0,
                h = !1;
              try {
                if (((a = (n = n.call(e)).next), 0 === t)) {
                  if (Object(n) !== n) return;
                  l = !1;
                } else
                  for (
                    ;
                    !(l = (r = a.call(n)).done) &&
                    (o.push(r.value), o.length !== t);
                    l = !0
                  );
              } catch (e) {
                (h = !0), (i = e);
              } finally {
                try {
                  if (
                    !l &&
                    null != n.return &&
                    ((s = n.return()), Object(s) !== s)
                  )
                    return;
                } finally {
                  if (h) throw i;
                }
              }
              return o;
            }
          })(e, t) ||
          _p(e, t) ||
          (function () {
            throw new TypeError(
              "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
            );
          })()
        );
      }
      function mp(e) {
        return (
          (mp =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          mp(e)
        );
      }
      function gp() {
        return (
          (gp =
            "undefined" != typeof Reflect && Reflect.get
              ? Reflect.get.bind()
              : function (e, t, n) {
                  var r = vp(e, t);
                  if (r) {
                    var i = Object.getOwnPropertyDescriptor(r, t);
                    return i.get
                      ? i.get.call(arguments.length < 3 ? e : n)
                      : i.value;
                  }
                }),
          gp.apply(this, arguments)
        );
      }
      function vp(e, t) {
        for (
          ;
          !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = Ap(e));
  
        );
        return e;
      }
      function yp(e, t) {
        var n =
          ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
        if (!n) {
          if (
            Array.isArray(e) ||
            (n = _p(e)) ||
            (t && e && "number" == typeof e.length)
          ) {
            n && (e = n);
            var r = 0,
              i = function () {};
            return {
              s: i,
              n: function () {
                return r >= e.length ? { done: !0 } : { done: !1, value: e[r++] };
              },
              e: function (e) {
                throw e;
              },
              f: i
            };
          }
          throw new TypeError(
            "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        }
        var a,
          s = !0,
          o = !1;
        return {
          s: function () {
            n = n.call(e);
          },
          n: function () {
            var e = n.next();
            return (s = e.done), e;
          },
          e: function (e) {
            (o = !0), (a = e);
          },
          f: function () {
            try {
              s || null == n.return || n.return();
            } finally {
              if (o) throw a;
            }
          }
        };
      }
      function _p(e, t) {
        if (e) {
          if ("string" == typeof e) return bp(e, t);
          var n = Object.prototype.toString.call(e).slice(8, -1);
          return (
            "Object" === n && e.constructor && (n = e.constructor.name),
            "Map" === n || "Set" === n
              ? Array.from(e)
              : "Arguments" === n ||
                /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
              ? bp(e, t)
              : void 0
          );
        }
      }
      function bp(e, t) {
        (null == t || t > e.length) && (t = e.length);
        for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
        return r;
      }
      function xp(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function Sp(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(e, wp(r.key), r);
        }
      }
      function Ep(e, t, n) {
        return (
          t && Sp(e.prototype, t),
          n && Sp(e, n),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          e
        );
      }
      function wp(e) {
        var t = (function (e, t) {
          if ("object" != mp(e) || !e) return e;
          var n = e[Symbol.toPrimitive];
          if (void 0 !== n) {
            var r = n.call(e, t);
            if ("object" != mp(r)) return r;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e, "string");
        return "symbol" == mp(t) ? t : String(t);
      }
      function Tp(e, t, n) {
        return (
          (t = Ap(t)),
          (function (e, t) {
            if (t && ("object" === mp(t) || "function" == typeof t)) return t;
            if (void 0 !== t)
              throw new TypeError(
                "Derived constructors may only return object or undefined"
              );
            return (function (e) {
              if (void 0 === e)
                throw new ReferenceError(
                  "this hasn't been initialised - super() hasn't been called"
                );
              return e;
            })(e);
          })(
            e,
            Mp()
              ? Reflect.construct(t, n || [], Ap(e).constructor)
              : t.apply(e, n)
          )
        );
      }
      function Mp() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (Mp = function () {
          return !!e;
        })();
      }
      function Ap(e) {
        return (
          (Ap = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          Ap(e)
        );
      }
      function Cp(e, t) {
        if ("function" != typeof t && null !== t)
          throw new TypeError(
            "Super expression must either be null or a function"
          );
        (e.prototype = Object.create(t && t.prototype, {
          constructor: { value: e, writable: !0, configurable: !0 }
        })),
          Object.defineProperty(e, "prototype", { writable: !1 }),
          t && Pp(e, t);
      }
      function Pp(e, t) {
        return (
          (Pp = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          Pp(e, t)
        );
      }
      "undefined" != typeof __THREE_DEVTOOLS__ &&
        __THREE_DEVTOOLS__.dispatchEvent(
          new CustomEvent("register", { detail: { revision: Ui } })
        ),
        "undefined" != typeof window &&
          (window.__THREE__
            ? console.warn(
                "WARNING: Multiple instances of Three.js being imported."
              )
            : (window.__THREE__ = Ui));
      var kp = (function (e) {
        function t(e) {
          var n;
          return (
            xp(this, t),
            ((n = Tp(this, t, [e])).dracoLoader = null),
            (n.ktx2Loader = null),
            (n.meshoptDecoder = null),
            (n.pluginCallbacks = []),
            n.register(function (e) {
              return new Op(e);
            }),
            n.register(function (e) {
              return new jp(e);
            }),
            n.register(function (e) {
              return new Xp(e);
            }),
            n.register(function (e) {
              return new qp(e);
            }),
            n.register(function (e) {
              return new Bp(e);
            }),
            n.register(function (e) {
              return new Up(e);
            }),
            n.register(function (e) {
              return new zp(e);
            }),
            n.register(function (e) {
              return new Vp(e);
            }),
            n.register(function (e) {
              return new Fp(e);
            }),
            n.register(function (e) {
              return new Hp(e);
            }),
            n.register(function (e) {
              return new Np(e);
            }),
            n.register(function (e) {
              return new Wp(e);
            }),
            n.register(function (e) {
              return new Gp(e);
            }),
            n.register(function (e) {
              return new Ip(e);
            }),
            n.register(function (e) {
              return new Yp(e);
            }),
            n.register(function (e) {
              return new Kp(e);
            }),
            n
          );
        }
        return (
          Cp(t, e),
          Ep(t, [
            {
              key: "load",
              value: function (e, t, n, r) {
                var i,
                  a = this;
                if ("" !== this.resourcePath) i = this.resourcePath;
                else if ("" !== this.path) {
                  var s = jf.extractUrlBase(e);
                  i = jf.resolveURL(s, this.path);
                } else i = jf.extractUrlBase(e);
                this.manager.itemStart(e);
                var o = function (t) {
                    r ? r(t) : console.error(t),
                      a.manager.itemError(e),
                      a.manager.itemEnd(e);
                  },
                  l = new Mf(this.manager);
                l.setPath(this.path),
                  l.setResponseType("arraybuffer"),
                  l.setRequestHeader(this.requestHeader),
                  l.setWithCredentials(this.withCredentials),
                  l.load(
                    e,
                    function (n) {
                      try {
                        a.parse(
                          n,
                          i,
                          function (n) {
                            t(n), a.manager.itemEnd(e);
                          },
                          o
                        );
                      } catch (e) {
                        o(e);
                      }
                    },
                    n,
                    o
                  );
              }
            },
            {
              key: "setDRACOLoader",
              value: function (e) {
                return (this.dracoLoader = e), this;
              }
            },
            {
              key: "setDDSLoader",
              value: function () {
                throw new Error(
                  'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
                );
              }
            },
            {
              key: "setKTX2Loader",
              value: function (e) {
                return (this.ktx2Loader = e), this;
              }
            },
            {
              key: "setMeshoptDecoder",
              value: function (e) {
                return (this.meshoptDecoder = e), this;
              }
            },
            {
              key: "register",
              value: function (e) {
                return (
                  -1 === this.pluginCallbacks.indexOf(e) &&
                    this.pluginCallbacks.push(e),
                  this
                );
              }
            },
            {
              key: "unregister",
              value: function (e) {
                return (
                  -1 !== this.pluginCallbacks.indexOf(e) &&
                    this.pluginCallbacks.splice(
                      this.pluginCallbacks.indexOf(e),
                      1
                    ),
                  this
                );
              }
            },
            {
              key: "parse",
              value: function (e, t, n, r) {
                var i,
                  a = {},
                  s = {},
                  o = new TextDecoder();
                if ("string" == typeof e) i = JSON.parse(e);
                else if (e instanceof ArrayBuffer) {
                  if (o.decode(new Uint8Array(e, 0, 4)) === Zp) {
                    try {
                      a[Dp.KHR_BINARY_GLTF] = new Jp(e);
                    } catch (e) {
                      return void (r && r(e));
                    }
                    i = JSON.parse(a[Dp.KHR_BINARY_GLTF].content);
                  } else i = JSON.parse(o.decode(e));
                } else i = e;
                if (void 0 === i.asset || i.asset.version[0] < 2)
                  r &&
                    r(
                      new Error(
                        "THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."
                      )
                    );
                else {
                  var l = new _m(i, {
                    path: t || this.resourcePath || "",
                    crossOrigin: this.crossOrigin,
                    requestHeader: this.requestHeader,
                    manager: this.manager,
                    ktx2Loader: this.ktx2Loader,
                    meshoptDecoder: this.meshoptDecoder
                  });
                  l.fileLoader.setRequestHeader(this.requestHeader);
                  for (var h = 0; h < this.pluginCallbacks.length; h++) {
                    var u = this.pluginCallbacks[h](l);
                    u.name ||
                      console.error(
                        "THREE.GLTFLoader: Invalid plugin found: missing name"
                      ),
                      (s[u.name] = u),
                      (a[u.name] = !0);
                  }
                  if (i.extensionsUsed)
                    for (var c = 0; c < i.extensionsUsed.length; ++c) {
                      var d = i.extensionsUsed[c],
                        f = i.extensionsRequired || [];
                      switch (d) {
                        case Dp.KHR_MATERIALS_UNLIT:
                          a[d] = new Lp();
                          break;
                        case Dp.KHR_DRACO_MESH_COMPRESSION:
                          a[d] = new $p(i, this.dracoLoader);
                          break;
                        case Dp.KHR_TEXTURE_TRANSFORM:
                          a[d] = new Qp();
                          break;
                        case Dp.KHR_MESH_QUANTIZATION:
                          a[d] = new em();
                          break;
                        default:
                          f.indexOf(d) >= 0 &&
                            void 0 === s[d] &&
                            console.warn(
                              'THREE.GLTFLoader: Unknown extension "' + d + '".'
                            );
                      }
                    }
                  l.setExtensions(a), l.setPlugins(s), l.parse(n, r);
                }
              }
            },
            {
              key: "parseAsync",
              value: function (e, t) {
                var n = this;
                return new Promise(function (r, i) {
                  n.parse(e, t, r, i);
                });
              }
            }
          ]),
          t
        );
      })(Ef);
      function Rp() {
        var e = {};
        return {
          get: function (t) {
            return e[t];
          },
          add: function (t, n) {
            e[t] = n;
          },
          remove: function (t) {
            delete e[t];
          },
          removeAll: function () {
            e = {};
          }
        };
      }
      var Dp = {
          KHR_BINARY_GLTF: "KHR_binary_glTF",
          KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
          KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
          KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
          KHR_MATERIALS_IOR: "KHR_materials_ior",
          KHR_MATERIALS_SHEEN: "KHR_materials_sheen",
          KHR_MATERIALS_SPECULAR: "KHR_materials_specular",
          KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
          KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence",
          KHR_MATERIALS_ANISOTROPY: "KHR_materials_anisotropy",
          KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
          KHR_MATERIALS_VOLUME: "KHR_materials_volume",
          KHR_TEXTURE_BASISU: "KHR_texture_basisu",
          KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
          KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
          KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength",
          EXT_MATERIALS_BUMP: "EXT_materials_bump",
          EXT_TEXTURE_WEBP: "EXT_texture_webp",
          EXT_TEXTURE_AVIF: "EXT_texture_avif",
          EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
          EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing"
        },
        Ip = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.KHR_LIGHTS_PUNCTUAL),
              (this.cache = { refs: {}, uses: {} });
          }
          return (
            Ep(e, [
              {
                key: "_markDefs",
                value: function () {
                  for (
                    var e = this.parser,
                      t = this.parser.json.nodes || [],
                      n = 0,
                      r = t.length;
                    n < r;
                    n++
                  ) {
                    var i = t[n];
                    i.extensions &&
                      i.extensions[this.name] &&
                      void 0 !== i.extensions[this.name].light &&
                      e._addNodeRef(this.cache, i.extensions[this.name].light);
                  }
                }
              },
              {
                key: "_loadLight",
                value: function (e) {
                  var t = this.parser,
                    n = "light:" + e,
                    r = t.cache.get(n);
                  if (r) return r;
                  var i,
                    a = t.json,
                    s = (((a.extensions && a.extensions[this.name]) || {})
                      .lights || [])[e],
                    o = new bl(16777215);
                  void 0 !== s.color &&
                    o.setRGB(s.color[0], s.color[1], s.color[2], ts);
                  var l = void 0 !== s.range ? s.range : 0;
                  switch (s.type) {
                    case "directional":
                      (i = new Gf(o)).target.position.set(0, 0, -1),
                        i.add(i.target);
                      break;
                    case "point":
                      (i = new Vf(o)).distance = l;
                      break;
                    case "spot":
                      ((i = new Of(o)).distance = l),
                        (s.spot = s.spot || {}),
                        (s.spot.innerConeAngle =
                          void 0 !== s.spot.innerConeAngle
                            ? s.spot.innerConeAngle
                            : 0),
                        (s.spot.outerConeAngle =
                          void 0 !== s.spot.outerConeAngle
                            ? s.spot.outerConeAngle
                            : Math.PI / 4),
                        (i.angle = s.spot.outerConeAngle),
                        (i.penumbra =
                          1 - s.spot.innerConeAngle / s.spot.outerConeAngle),
                        i.target.position.set(0, 0, -1),
                        i.add(i.target);
                      break;
                    default:
                      throw new Error(
                        "THREE.GLTFLoader: Unexpected light type: " + s.type
                      );
                  }
                  return (
                    i.position.set(0, 0, 0),
                    (i.decay = 2),
                    fm(i, s),
                    void 0 !== s.intensity && (i.intensity = s.intensity),
                    (i.name = t.createUniqueName(s.name || "light_" + e)),
                    (r = Promise.resolve(i)),
                    t.cache.add(n, r),
                    r
                  );
                }
              },
              {
                key: "getDependency",
                value: function (e, t) {
                  if ("light" === e) return this._loadLight(t);
                }
              },
              {
                key: "createNodeAttachment",
                value: function (e) {
                  var t = this,
                    n = this.parser,
                    r = n.json.nodes[e],
                    i = ((r.extensions && r.extensions[this.name]) || {}).light;
                  return void 0 === i
                    ? null
                    : this._loadLight(i).then(function (e) {
                        return n._getNodeRef(t.cache, i, e);
                      });
                }
              }
            ]),
            e
          );
        })(),
        Lp = (function () {
          function e() {
            xp(this, e), (this.name = Dp.KHR_MATERIALS_UNLIT);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function () {
                  return wl;
                }
              },
              {
                key: "extendParams",
                value: function (e, t, n) {
                  var r = [];
                  (e.color = new bl(1, 1, 1)), (e.opacity = 1);
                  var i = t.pbrMetallicRoughness;
                  if (i) {
                    if (Array.isArray(i.baseColorFactor)) {
                      var a = i.baseColorFactor;
                      e.color.setRGB(a[0], a[1], a[2], ts), (e.opacity = a[3]);
                    }
                    void 0 !== i.baseColorTexture &&
                      r.push(n.assignTexture(e, "map", i.baseColorTexture, es));
                  }
                  return Promise.all(r);
                }
              }
            ]),
            e
          );
        })(),
        Fp = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.KHR_MATERIALS_EMISSIVE_STRENGTH);
          }
          return (
            Ep(e, [
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser.json.materials[e];
                  if (!n.extensions || !n.extensions[this.name])
                    return Promise.resolve();
                  var r = n.extensions[this.name].emissiveStrength;
                  return (
                    void 0 !== r && (t.emissiveIntensity = r), Promise.resolve()
                  );
                }
              }
            ]),
            e
          );
        })(),
        Op = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.KHR_MATERIALS_CLEARCOAT);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    r = n.json.materials[e];
                  if (!r.extensions || !r.extensions[this.name])
                    return Promise.resolve();
                  var i = [],
                    a = r.extensions[this.name];
                  if (
                    (void 0 !== a.clearcoatFactor &&
                      (t.clearcoat = a.clearcoatFactor),
                    void 0 !== a.clearcoatTexture &&
                      i.push(
                        n.assignTexture(t, "clearcoatMap", a.clearcoatTexture)
                      ),
                    void 0 !== a.clearcoatRoughnessFactor &&
                      (t.clearcoatRoughness = a.clearcoatRoughnessFactor),
                    void 0 !== a.clearcoatRoughnessTexture &&
                      i.push(
                        n.assignTexture(
                          t,
                          "clearcoatRoughnessMap",
                          a.clearcoatRoughnessTexture
                        )
                      ),
                    void 0 !== a.clearcoatNormalTexture &&
                      (i.push(
                        n.assignTexture(
                          t,
                          "clearcoatNormalMap",
                          a.clearcoatNormalTexture
                        )
                      ),
                      void 0 !== a.clearcoatNormalTexture.scale))
                  ) {
                    var s = a.clearcoatNormalTexture.scale;
                    t.clearcoatNormalScale = new Cs(s, s);
                  }
                  return Promise.all(i);
                }
              }
            ]),
            e
          );
        })(),
        Np = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.KHR_MATERIALS_IRIDESCENCE);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    r = n.json.materials[e];
                  if (!r.extensions || !r.extensions[this.name])
                    return Promise.resolve();
                  var i = [],
                    a = r.extensions[this.name];
                  return (
                    void 0 !== a.iridescenceFactor &&
                      (t.iridescence = a.iridescenceFactor),
                    void 0 !== a.iridescenceTexture &&
                      i.push(
                        n.assignTexture(t, "iridescenceMap", a.iridescenceTexture)
                      ),
                    void 0 !== a.iridescenceIor &&
                      (t.iridescenceIOR = a.iridescenceIor),
                    void 0 === t.iridescenceThicknessRange &&
                      (t.iridescenceThicknessRange = [100, 400]),
                    void 0 !== a.iridescenceThicknessMinimum &&
                      (t.iridescenceThicknessRange[0] =
                        a.iridescenceThicknessMinimum),
                    void 0 !== a.iridescenceThicknessMaximum &&
                      (t.iridescenceThicknessRange[1] =
                        a.iridescenceThicknessMaximum),
                    void 0 !== a.iridescenceThicknessTexture &&
                      i.push(
                        n.assignTexture(
                          t,
                          "iridescenceThicknessMap",
                          a.iridescenceThicknessTexture
                        )
                      ),
                    Promise.all(i)
                  );
                }
              }
            ]),
            e
          );
        })(),
        Bp = (function () {
          function e(t) {
            xp(this, e), (this.parser = t), (this.name = Dp.KHR_MATERIALS_SHEEN);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    r = n.json.materials[e];
                  if (!r.extensions || !r.extensions[this.name])
                    return Promise.resolve();
                  var i = [];
                  (t.sheenColor = new bl(0, 0, 0)),
                    (t.sheenRoughness = 0),
                    (t.sheen = 1);
                  var a = r.extensions[this.name];
                  if (void 0 !== a.sheenColorFactor) {
                    var s = a.sheenColorFactor;
                    t.sheenColor.setRGB(s[0], s[1], s[2], ts);
                  }
                  return (
                    void 0 !== a.sheenRoughnessFactor &&
                      (t.sheenRoughness = a.sheenRoughnessFactor),
                    void 0 !== a.sheenColorTexture &&
                      i.push(
                        n.assignTexture(
                          t,
                          "sheenColorMap",
                          a.sheenColorTexture,
                          es
                        )
                      ),
                    void 0 !== a.sheenRoughnessTexture &&
                      i.push(
                        n.assignTexture(
                          t,
                          "sheenRoughnessMap",
                          a.sheenRoughnessTexture
                        )
                      ),
                    Promise.all(i)
                  );
                }
              }
            ]),
            e
          );
        })(),
        Up = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.KHR_MATERIALS_TRANSMISSION);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    r = n.json.materials[e];
                  if (!r.extensions || !r.extensions[this.name])
                    return Promise.resolve();
                  var i = [],
                    a = r.extensions[this.name];
                  return (
                    void 0 !== a.transmissionFactor &&
                      (t.transmission = a.transmissionFactor),
                    void 0 !== a.transmissionTexture &&
                      i.push(
                        n.assignTexture(
                          t,
                          "transmissionMap",
                          a.transmissionTexture
                        )
                      ),
                    Promise.all(i)
                  );
                }
              }
            ]),
            e
          );
        })(),
        zp = (function () {
          function e(t) {
            xp(this, e), (this.parser = t), (this.name = Dp.KHR_MATERIALS_VOLUME);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    r = n.json.materials[e];
                  if (!r.extensions || !r.extensions[this.name])
                    return Promise.resolve();
                  var i = [],
                    a = r.extensions[this.name];
                  (t.thickness =
                    void 0 !== a.thicknessFactor ? a.thicknessFactor : 0),
                    void 0 !== a.thicknessTexture &&
                      i.push(
                        n.assignTexture(t, "thicknessMap", a.thicknessTexture)
                      ),
                    (t.attenuationDistance = a.attenuationDistance || 1 / 0);
                  var s = a.attenuationColor || [1, 1, 1];
                  return (
                    (t.attenuationColor = new bl().setRGB(s[0], s[1], s[2], ts)),
                    Promise.all(i)
                  );
                }
              }
            ]),
            e
          );
        })(),
        Vp = (function () {
          function e(t) {
            xp(this, e), (this.parser = t), (this.name = Dp.KHR_MATERIALS_IOR);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser.json.materials[e];
                  if (!n.extensions || !n.extensions[this.name])
                    return Promise.resolve();
                  var r = n.extensions[this.name];
                  return (
                    (t.ior = void 0 !== r.ior ? r.ior : 1.5), Promise.resolve()
                  );
                }
              }
            ]),
            e
          );
        })(),
        Hp = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.KHR_MATERIALS_SPECULAR);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    r = n.json.materials[e];
                  if (!r.extensions || !r.extensions[this.name])
                    return Promise.resolve();
                  var i = [],
                    a = r.extensions[this.name];
                  (t.specularIntensity =
                    void 0 !== a.specularFactor ? a.specularFactor : 1),
                    void 0 !== a.specularTexture &&
                      i.push(
                        n.assignTexture(
                          t,
                          "specularIntensityMap",
                          a.specularTexture
                        )
                      );
                  var s = a.specularColorFactor || [1, 1, 1];
                  return (
                    (t.specularColor = new bl().setRGB(s[0], s[1], s[2], ts)),
                    void 0 !== a.specularColorTexture &&
                      i.push(
                        n.assignTexture(
                          t,
                          "specularColorMap",
                          a.specularColorTexture,
                          es
                        )
                      ),
                    Promise.all(i)
                  );
                }
              }
            ]),
            e
          );
        })(),
        Gp = (function () {
          function e(t) {
            xp(this, e), (this.parser = t), (this.name = Dp.EXT_MATERIALS_BUMP);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    r = n.json.materials[e];
                  if (!r.extensions || !r.extensions[this.name])
                    return Promise.resolve();
                  var i = [],
                    a = r.extensions[this.name];
                  return (
                    (t.bumpScale = void 0 !== a.bumpFactor ? a.bumpFactor : 1),
                    void 0 !== a.bumpTexture &&
                      i.push(n.assignTexture(t, "bumpMap", a.bumpTexture)),
                    Promise.all(i)
                  );
                }
              }
            ]),
            e
          );
        })(),
        Wp = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.KHR_MATERIALS_ANISOTROPY);
          }
          return (
            Ep(e, [
              {
                key: "getMaterialType",
                value: function (e) {
                  var t = this.parser.json.materials[e];
                  return t.extensions && t.extensions[this.name] ? ef : null;
                }
              },
              {
                key: "extendMaterialParams",
                value: function (e, t) {
                  var n = this.parser,
                    r = n.json.materials[e];
                  if (!r.extensions || !r.extensions[this.name])
                    return Promise.resolve();
                  var i = [],
                    a = r.extensions[this.name];
                  return (
                    void 0 !== a.anisotropyStrength &&
                      (t.anisotropy = a.anisotropyStrength),
                    void 0 !== a.anisotropyRotation &&
                      (t.anisotropyRotation = a.anisotropyRotation),
                    void 0 !== a.anisotropyTexture &&
                      i.push(
                        n.assignTexture(t, "anisotropyMap", a.anisotropyTexture)
                      ),
                    Promise.all(i)
                  );
                }
              }
            ]),
            e
          );
        })(),
        jp = (function () {
          function e(t) {
            xp(this, e), (this.parser = t), (this.name = Dp.KHR_TEXTURE_BASISU);
          }
          return (
            Ep(e, [
              {
                key: "loadTexture",
                value: function (e) {
                  var t = this.parser,
                    n = t.json,
                    r = n.textures[e];
                  if (!r.extensions || !r.extensions[this.name]) return null;
                  var i = r.extensions[this.name],
                    a = t.options.ktx2Loader;
                  if (!a) {
                    if (
                      n.extensionsRequired &&
                      n.extensionsRequired.indexOf(this.name) >= 0
                    )
                      throw new Error(
                        "THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures"
                      );
                    return null;
                  }
                  return t.loadTextureImage(e, i.source, a);
                }
              }
            ]),
            e
          );
        })(),
        Xp = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.EXT_TEXTURE_WEBP),
              (this.isSupported = null);
          }
          return (
            Ep(e, [
              {
                key: "loadTexture",
                value: function (e) {
                  var t = this.name,
                    n = this.parser,
                    r = n.json,
                    i = r.textures[e];
                  if (!i.extensions || !i.extensions[t]) return null;
                  var a = i.extensions[t],
                    s = r.images[a.source],
                    o = n.textureLoader;
                  if (s.uri) {
                    var l = n.options.manager.getHandler(s.uri);
                    null !== l && (o = l);
                  }
                  return this.detectSupport().then(function (i) {
                    if (i) return n.loadTextureImage(e, a.source, o);
                    if (
                      r.extensionsRequired &&
                      r.extensionsRequired.indexOf(t) >= 0
                    )
                      throw new Error(
                        "THREE.GLTFLoader: WebP required by asset but unsupported."
                      );
                    return n.loadTexture(e);
                  });
                }
              },
              {
                key: "detectSupport",
                value: function () {
                  return (
                    this.isSupported ||
                      (this.isSupported = new Promise(function (e) {
                        var t = new Image();
                        (t.src =
                          "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"),
                          (t.onload = t.onerror =
                            function () {
                              e(1 === t.height);
                            });
                      })),
                    this.isSupported
                  );
                }
              }
            ]),
            e
          );
        })(),
        qp = (function () {
          function e(t) {
            xp(this, e),
              (this.parser = t),
              (this.name = Dp.EXT_TEXTURE_AVIF),
              (this.isSupported = null);
          }
          return (
            Ep(e, [
              {
                key: "loadTexture",
                value: function (e) {
                  var t = this.name,
                    n = this.parser,
                    r = n.json,
                    i = r.textures[e];
                  if (!i.extensions || !i.extensions[t]) return null;
                  var a = i.extensions[t],
                    s = r.images[a.source],
                    o = n.textureLoader;
                  if (s.uri) {
                    var l = n.options.manager.getHandler(s.uri);
                    null !== l && (o = l);
                  }
                  return this.detectSupport().then(function (i) {
                    if (i) return n.loadTextureImage(e, a.source, o);
                    if (
                      r.extensionsRequired &&
                      r.extensionsRequired.indexOf(t) >= 0
                    )
                      throw new Error(
                        "THREE.GLTFLoader: AVIF required by asset but unsupported."
                      );
                    return n.loadTexture(e);
                  });
                }
              },
              {
                key: "detectSupport",
                value: function () {
                  return (
                    this.isSupported ||
                      (this.isSupported = new Promise(function (e) {
                        var t = new Image();
                        (t.src =
                          "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI="),
                          (t.onload = t.onerror =
                            function () {
                              e(1 === t.height);
                            });
                      })),
                    this.isSupported
                  );
                }
              }
            ]),
            e
          );
        })(),
        Yp = (function () {
          function e(t) {
            xp(this, e),
              (this.name = Dp.EXT_MESHOPT_COMPRESSION),
              (this.parser = t);
          }
          return (
            Ep(e, [
              {
                key: "loadBufferView",
                value: function (e) {
                  var t = this.parser.json,
                    n = t.bufferViews[e];
                  if (n.extensions && n.extensions[this.name]) {
                    var r = n.extensions[this.name],
                      i = this.parser.getDependency("buffer", r.buffer),
                      a = this.parser.options.meshoptDecoder;
                    if (!a || !a.supported) {
                      if (
                        t.extensionsRequired &&
                        t.extensionsRequired.indexOf(this.name) >= 0
                      )
                        throw new Error(
                          "THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files"
                        );
                      return null;
                    }
                    return i.then(function (e) {
                      var t = r.byteOffset || 0,
                        n = r.byteLength || 0,
                        i = r.count,
                        s = r.byteStride,
                        o = new Uint8Array(e, t, n);
                      return a.decodeGltfBufferAsync
                        ? a
                            .decodeGltfBufferAsync(i, s, o, r.mode, r.filter)
                            .then(function (e) {
                              return e.buffer;
                            })
                        : a.ready.then(function () {
                            var e = new ArrayBuffer(i * s);
                            return (
                              a.decodeGltfBuffer(
                                new Uint8Array(e),
                                i,
                                s,
                                o,
                                r.mode,
                                r.filter
                              ),
                              e
                            );
                          });
                    });
                  }
                  return null;
                }
              }
            ]),
            e
          );
        })(),
        Kp = (function () {
          function e(t) {
            xp(this, e),
              (this.name = Dp.EXT_MESH_GPU_INSTANCING),
              (this.parser = t);
          }
          return (
            Ep(e, [
              {
                key: "createNodeMesh",
                value: function (e) {
                  var t = this,
                    n = this.parser.json,
                    r = n.nodes[e];
                  if (
                    !r.extensions ||
                    !r.extensions[this.name] ||
                    void 0 === r.mesh
                  )
                    return null;
                  var i,
                    a = yp(n.meshes[r.mesh].primitives);
                  try {
                    for (a.s(); !(i = a.n()).done; ) {
                      var s = i.value;
                      if (
                        s.mode !== im.TRIANGLES &&
                        s.mode !== im.TRIANGLE_STRIP &&
                        s.mode !== im.TRIANGLE_FAN &&
                        void 0 !== s.mode
                      )
                        return null;
                    }
                  } catch (e) {
                    a.e(e);
                  } finally {
                    a.f();
                  }
                  var o = r.extensions[this.name].attributes,
                    l = [],
                    h = {},
                    u = function (e) {
                      l.push(
                        t.parser
                          .getDependency("accessor", o[e])
                          .then(function (t) {
                            return (h[e] = t), h[e];
                          })
                      );
                    };
                  for (var c in o) u(c);
                  return l.length < 1
                    ? null
                    : (l.push(this.parser.createNodeMesh(e)),
                      Promise.all(l).then(function (e) {
                        var n,
                          r = e.pop(),
                          i = r.isGroup ? r.children : [r],
                          a = e[0].count,
                          s = [],
                          o = yp(i);
                        try {
                          for (o.s(); !(n = o.n()).done; ) {
                            for (
                              var l = n.value,
                                u = new Do(),
                                c = new to(),
                                d = new eo(),
                                f = new to(1, 1, 1),
                                p = new Rd(l.geometry, l.material, a),
                                m = 0;
                              m < a;
                              m++
                            )
                              h.TRANSLATION &&
                                c.fromBufferAttribute(h.TRANSLATION, m),
                                h.ROTATION &&
                                  d.fromBufferAttribute(h.ROTATION, m),
                                h.SCALE && f.fromBufferAttribute(h.SCALE, m),
                                p.setMatrixAt(m, u.compose(c, d, f));
                            for (var g in h)
                              if ("_COLOR_0" === g) {
                                var v = h[g];
                                p.instanceColor = new Ed(
                                  v.array,
                                  v.itemSize,
                                  v.normalized
                                );
                              } else
                                "TRANSLATION" !== g &&
                                  "ROTATION" !== g &&
                                  "SCALE" !== g &&
                                  l.geometry.setAttribute(g, h[g]);
                            rl.prototype.copy.call(p, l),
                              t.parser.assignFinalMaterial(p),
                              s.push(p);
                          }
                        } catch (e) {
                          o.e(e);
                        } finally {
                          o.f();
                        }
                        return r.isGroup
                          ? (r.clear(), r.add.apply(r, s), r)
                          : s[0];
                      }));
                }
              }
            ]),
            e
          );
        })(),
        Zp = "glTF",
        Jp = Ep(function e(t) {
          xp(this, e),
            (this.name = Dp.KHR_BINARY_GLTF),
            (this.content = null),
            (this.body = null);
          var n = new DataView(t, 0, 12),
            r = new TextDecoder();
          if (
            ((this.header = {
              magic: r.decode(new Uint8Array(t.slice(0, 4))),
              version: n.getUint32(4, !0),
              length: n.getUint32(8, !0)
            }),
            this.header.magic !== Zp)
          )
            throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
          if (this.header.version < 2)
            throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
          for (
            var i = this.header.length - 12, a = new DataView(t, 12), s = 0;
            s < i;
  
          ) {
            var o = a.getUint32(s, !0);
            s += 4;
            var l = a.getUint32(s, !0);
            if (((s += 4), 1313821514 === l)) {
              var h = new Uint8Array(t, 12 + s, o);
              this.content = r.decode(h);
            } else if (5130562 === l) {
              var u = 12 + s;
              this.body = t.slice(u, u + o);
            }
            s += o;
          }
          if (null === this.content)
            throw new Error("THREE.GLTFLoader: JSON content not found.");
        }),
        $p = (function () {
          function e(t, n) {
            if ((xp(this, e), !n))
              throw new Error(
                "THREE.GLTFLoader: No DRACOLoader instance provided."
              );
            (this.name = Dp.KHR_DRACO_MESH_COMPRESSION),
              (this.json = t),
              (this.dracoLoader = n),
              this.dracoLoader.preload();
          }
          return (
            Ep(e, [
              {
                key: "decodePrimitive",
                value: function (e, t) {
                  var n = this.json,
                    r = this.dracoLoader,
                    i = e.extensions[this.name].bufferView,
                    a = e.extensions[this.name].attributes,
                    s = {},
                    o = {},
                    l = {};
                  for (var h in a) {
                    var u = hm[h] || h.toLowerCase();
                    s[u] = a[h];
                  }
                  for (var c in e.attributes) {
                    var d = hm[c] || c.toLowerCase();
                    if (void 0 !== a[c]) {
                      var f = n.accessors[e.attributes[c]],
                        p = am[f.componentType];
                      (l[d] = p.name), (o[d] = !0 === f.normalized);
                    }
                  }
                  return t.getDependency("bufferView", i).then(function (e) {
                    return new Promise(function (t, n) {
                      r.decodeDracoFile(
                        e,
                        function (e) {
                          for (var n in e.attributes) {
                            var r = e.attributes[n],
                              i = o[n];
                            void 0 !== i && (r.normalized = i);
                          }
                          t(e);
                        },
                        s,
                        l,
                        ts,
                        n
                      );
                    });
                  });
                }
              }
            ]),
            e
          );
        })(),
        Qp = (function () {
          function e() {
            xp(this, e), (this.name = Dp.KHR_TEXTURE_TRANSFORM);
          }
          return (
            Ep(e, [
              {
                key: "extendTexture",
                value: function (e, t) {
                  return (void 0 !== t.texCoord && t.texCoord !== e.channel) ||
                    void 0 !== t.offset ||
                    void 0 !== t.rotation ||
                    void 0 !== t.scale
                    ? ((e = e.clone()),
                      void 0 !== t.texCoord && (e.channel = t.texCoord),
                      void 0 !== t.offset && e.offset.fromArray(t.offset),
                      void 0 !== t.rotation && (e.rotation = t.rotation),
                      void 0 !== t.scale && e.repeat.fromArray(t.scale),
                      (e.needsUpdate = !0),
                      e)
                    : e;
                }
              }
            ]),
            e
          );
        })(),
        em = Ep(function e() {
          xp(this, e), (this.name = Dp.KHR_MESH_QUANTIZATION);
        }),
        tm = (function (e) {
          function t(e, n, r, i) {
            return xp(this, t), Tp(this, t, [e, n, r, i]);
          }
          return (
            Cp(t, e),
            Ep(t, [
              {
                key: "copySampleValue_",
                value: function (e) {
                  for (
                    var t = this.resultBuffer,
                      n = this.sampleValues,
                      r = this.valueSize,
                      i = e * r * 3 + r,
                      a = 0;
                    a !== r;
                    a++
                  )
                    t[a] = n[i + a];
                  return t;
                }
              },
              {
                key: "interpolate_",
                value: function (e, t, n, r) {
                  for (
                    var i = this.resultBuffer,
                      a = this.sampleValues,
                      s = this.valueSize,
                      o = 2 * s,
                      l = 3 * s,
                      h = r - t,
                      u = (n - t) / h,
                      c = u * u,
                      d = c * u,
                      f = e * l,
                      p = f - l,
                      m = -2 * d + 3 * c,
                      g = d - c,
                      v = 1 - m,
                      y = g - c + u,
                      _ = 0;
                    _ !== s;
                    _++
                  ) {
                    var b = a[p + _ + s],
                      x = a[p + _ + o] * h,
                      S = a[f + _ + s],
                      E = a[f + _] * h;
                    i[_] = v * b + y * x + m * S + g * E;
                  }
                  return i;
                }
              }
            ]),
            t
          );
        })(of),
        nm = new eo(),
        rm = (function (e) {
          function t() {
            return xp(this, t), Tp(this, t, arguments);
          }
          return (
            Cp(t, e),
            Ep(t, [
              {
                key: "interpolate_",
                value: function (e, n, r, i) {
                  var a = gp(Ap(t.prototype), "interpolate_", this).call(
                    this,
                    e,
                    n,
                    r,
                    i
                  );
                  return nm.fromArray(a).normalize().toArray(a), a;
                }
              }
            ]),
            t
          );
        })(tm),
        im = {
          FLOAT: 5126,
          FLOAT_MAT3: 35675,
          FLOAT_MAT4: 35676,
          FLOAT_VEC2: 35664,
          FLOAT_VEC3: 35665,
          FLOAT_VEC4: 35666,
          LINEAR: 9729,
          REPEAT: 10497,
          SAMPLER_2D: 35678,
          POINTS: 0,
          LINES: 1,
          LINE_LOOP: 2,
          LINE_STRIP: 3,
          TRIANGLES: 4,
          TRIANGLE_STRIP: 5,
          TRIANGLE_FAN: 6,
          UNSIGNED_BYTE: 5121,
          UNSIGNED_SHORT: 5123
        },
        am = {
          5120: Int8Array,
          5121: Uint8Array,
          5122: Int16Array,
          5123: Uint16Array,
          5125: Uint32Array,
          5126: Float32Array
        },
        sm = { 9728: Yi, 9729: Ji, 9984: Ki, 9985: 1007, 9986: Zi, 9987: $i },
        om = { 33071: Xi, 33648: qi, 10497: ji },
        lm = { SCALAR: 1, VEC2: 2, VEC3: 3, VEC4: 4, MAT2: 4, MAT3: 9, MAT4: 16 },
        hm = {
          POSITION: "position",
          NORMAL: "normal",
          TANGENT: "tangent",
          TEXCOORD_0: "uv",
          TEXCOORD_1: "uv1",
          TEXCOORD_2: "uv2",
          TEXCOORD_3: "uv3",
          COLOR_0: "color",
          WEIGHTS_0: "skinWeight",
          JOINTS_0: "skinIndex"
        },
        um = {
          scale: "scale",
          translation: "position",
          rotation: "quaternion",
          weights: "morphTargetInfluences"
        },
        cm = { CUBICSPLINE: void 0, LINEAR: Xa, STEP: ja };
      function dm(e, t, n) {
        for (var r in n.extensions)
          void 0 === e[r] &&
            ((t.userData.gltfExtensions = t.userData.gltfExtensions || {}),
            (t.userData.gltfExtensions[r] = n.extensions[r]));
      }
      function fm(e, t) {
        void 0 !== t.extras &&
          ("object" === mp(t.extras)
            ? Object.assign(e.userData, t.extras)
            : console.warn(
                "THREE.GLTFLoader: Ignoring primitive type .extras, " + t.extras
              ));
      }
      function pm(e, t) {
        if ((e.updateMorphTargets(), void 0 !== t.weights))
          for (var n = 0, r = t.weights.length; n < r; n++)
            e.morphTargetInfluences[n] = t.weights[n];
        if (t.extras && Array.isArray(t.extras.targetNames)) {
          var i = t.extras.targetNames;
          if (e.morphTargetInfluences.length === i.length) {
            e.morphTargetDictionary = {};
            for (var a = 0, s = i.length; a < s; a++)
              e.morphTargetDictionary[i[a]] = a;
          } else
            console.warn(
              "THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names."
            );
        }
      }
      function mm(e) {
        var t,
          n = e.extensions && e.extensions[Dp.KHR_DRACO_MESH_COMPRESSION];
        if (
          ((t = n
            ? "draco:" + n.bufferView + ":" + n.indices + ":" + gm(n.attributes)
            : e.indices + ":" + gm(e.attributes) + ":" + e.mode),
          void 0 !== e.targets)
        )
          for (var r = 0, i = e.targets.length; r < i; r++)
            t += ":" + gm(e.targets[r]);
        return t;
      }
      function gm(e) {
        for (
          var t = "", n = Object.keys(e).sort(), r = 0, i = n.length;
          r < i;
          r++
        )
          t += n[r] + ":" + e[n[r]] + ";";
        return t;
      }
      function vm(e) {
        switch (e) {
          case Int8Array:
            return 1 / 127;
          case Uint8Array:
            return 1 / 255;
          case Int16Array:
            return 1 / 32767;
          case Uint16Array:
            return 1 / 65535;
          default:
            throw new Error(
              "THREE.GLTFLoader: Unsupported normalized accessor component type."
            );
        }
      }
      var ym = new Do(),
        _m = (function () {
          function e() {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : {},
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : {};
            xp(this, e),
              (this.json = t),
              (this.extensions = {}),
              (this.plugins = {}),
              (this.options = n),
              (this.cache = new Rp()),
              (this.associations = new Map()),
              (this.primitiveCache = {}),
              (this.nodeCache = {}),
              (this.meshCache = { refs: {}, uses: {} }),
              (this.cameraCache = { refs: {}, uses: {} }),
              (this.lightCache = { refs: {}, uses: {} }),
              (this.sourceCache = {}),
              (this.textureCache = {}),
              (this.nodeNamesUsed = {});
            var r = !1,
              i = !1,
              a = -1;
            "undefined" != typeof navigator &&
              ((r =
                !0 ===
                /^((?!chrome|android).)*safari/i.test(navigator.userAgent)),
              (a = (i = navigator.userAgent.indexOf("Firefox") > -1)
                ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]
                : -1)),
              "undefined" == typeof createImageBitmap || r || (i && a < 98)
                ? (this.textureLoader = new Pf(this.options.manager))
                : (this.textureLoader = new Xf(this.options.manager)),
              this.textureLoader.setCrossOrigin(this.options.crossOrigin),
              this.textureLoader.setRequestHeader(this.options.requestHeader),
              (this.fileLoader = new Mf(this.options.manager)),
              this.fileLoader.setResponseType("arraybuffer"),
              "use-credentials" === this.options.crossOrigin &&
                this.fileLoader.setWithCredentials(!0);
          }
          return (
            Ep(e, [
              {
                key: "setExtensions",
                value: function (e) {
                  this.extensions = e;
                }
              },
              {
                key: "setPlugins",
                value: function (e) {
                  this.plugins = e;
                }
              },
              {
                key: "parse",
                value: function (e, t) {
                  var n = this,
                    r = this.json,
                    i = this.extensions;
                  this.cache.removeAll(),
                    (this.nodeCache = {}),
                    this._invokeAll(function (e) {
                      return e._markDefs && e._markDefs();
                    }),
                    Promise.all(
                      this._invokeAll(function (e) {
                        return e.beforeRoot && e.beforeRoot();
                      })
                    )
                      .then(function () {
                        return Promise.all([
                          n.getDependencies("scene"),
                          n.getDependencies("animation"),
                          n.getDependencies("camera")
                        ]);
                      })
                      .then(function (t) {
                        var a = {
                          scene: t[0][r.scene || 0],
                          scenes: t[0],
                          animations: t[1],
                          cameras: t[2],
                          asset: r.asset,
                          parser: n,
                          userData: {}
                        };
                        return (
                          dm(i, a, r),
                          fm(a, r),
                          Promise.all(
                            n._invokeAll(function (e) {
                              return e.afterRoot && e.afterRoot(a);
                            })
                          ).then(function () {
                            e(a);
                          })
                        );
                      })
                      .catch(t);
                }
              },
              {
                key: "_markDefs",
                value: function () {
                  for (
                    var e = this.json.nodes || [],
                      t = this.json.skins || [],
                      n = this.json.meshes || [],
                      r = 0,
                      i = t.length;
                    r < i;
                    r++
                  )
                    for (var a = t[r].joints, s = 0, o = a.length; s < o; s++)
                      e[a[s]].isBone = !0;
                  for (var l = 0, h = e.length; l < h; l++) {
                    var u = e[l];
                    void 0 !== u.mesh &&
                      (this._addNodeRef(this.meshCache, u.mesh),
                      void 0 !== u.skin && (n[u.mesh].isSkinnedMesh = !0)),
                      void 0 !== u.camera &&
                        this._addNodeRef(this.cameraCache, u.camera);
                  }
                }
              },
              {
                key: "_addNodeRef",
                value: function (e, t) {
                  void 0 !== t &&
                    (void 0 === e.refs[t] && (e.refs[t] = e.uses[t] = 0),
                    e.refs[t]++);
                }
              },
              {
                key: "_getNodeRef",
                value: function (e, t, n) {
                  var r = this;
                  if (e.refs[t] <= 1) return n;
                  var i = n.clone();
                  return (
                    (function e(t, n) {
                      var i = r.associations.get(t);
                      null != i && r.associations.set(n, i);
                      var a,
                        s = yp(t.children.entries());
                      try {
                        for (s.s(); !(a = s.n()).done; ) {
                          var o = pp(a.value, 2),
                            l = o[0];
                          e(o[1], n.children[l]);
                        }
                      } catch (e) {
                        s.e(e);
                      } finally {
                        s.f();
                      }
                    })(n, i),
                    (i.name += "_instance_" + e.uses[t]++),
                    i
                  );
                }
              },
              {
                key: "_invokeOne",
                value: function (e) {
                  var t = Object.values(this.plugins);
                  t.push(this);
                  for (var n = 0; n < t.length; n++) {
                    var r = e(t[n]);
                    if (r) return r;
                  }
                  return null;
                }
              },
              {
                key: "_invokeAll",
                value: function (e) {
                  var t = Object.values(this.plugins);
                  t.unshift(this);
                  for (var n = [], r = 0; r < t.length; r++) {
                    var i = e(t[r]);
                    i && n.push(i);
                  }
                  return n;
                }
              },
              {
                key: "getDependency",
                value: function (e, t) {
                  var n = e + ":" + t,
                    r = this.cache.get(n);
                  if (!r) {
                    switch (e) {
                      case "scene":
                        r = this.loadScene(t);
                        break;
                      case "node":
                        r = this._invokeOne(function (e) {
                          return e.loadNode && e.loadNode(t);
                        });
                        break;
                      case "mesh":
                        r = this._invokeOne(function (e) {
                          return e.loadMesh && e.loadMesh(t);
                        });
                        break;
                      case "accessor":
                        r = this.loadAccessor(t);
                        break;
                      case "bufferView":
                        r = this._invokeOne(function (e) {
                          return e.loadBufferView && e.loadBufferView(t);
                        });
                        break;
                      case "buffer":
                        r = this.loadBuffer(t);
                        break;
                      case "material":
                        r = this._invokeOne(function (e) {
                          return e.loadMaterial && e.loadMaterial(t);
                        });
                        break;
                      case "texture":
                        r = this._invokeOne(function (e) {
                          return e.loadTexture && e.loadTexture(t);
                        });
                        break;
                      case "skin":
                        r = this.loadSkin(t);
                        break;
                      case "animation":
                        r = this._invokeOne(function (e) {
                          return e.loadAnimation && e.loadAnimation(t);
                        });
                        break;
                      case "camera":
                        r = this.loadCamera(t);
                        break;
                      default:
                        if (
                          !(r = this._invokeOne(function (n) {
                            return (
                              n != this &&
                              n.getDependency &&
                              n.getDependency(e, t)
                            );
                          }))
                        )
                          throw new Error("Unknown type: " + e);
                    }
                    this.cache.add(n, r);
                  }
                  return r;
                }
              },
              {
                key: "getDependencies",
                value: function (e) {
                  var t = this.cache.get(e);
                  if (!t) {
                    var n = this,
                      r = this.json[e + ("mesh" === e ? "es" : "s")] || [];
                    (t = Promise.all(
                      r.map(function (t, r) {
                        return n.getDependency(e, r);
                      })
                    )),
                      this.cache.add(e, t);
                  }
                  return t;
                }
              },
              {
                key: "loadBuffer",
                value: function (e) {
                  var t = this.json.buffers[e],
                    n = this.fileLoader;
                  if (t.type && "arraybuffer" !== t.type)
                    throw new Error(
                      "THREE.GLTFLoader: " +
                        t.type +
                        " buffer type is not supported."
                    );
                  if (void 0 === t.uri && 0 === e)
                    return Promise.resolve(
                      this.extensions[Dp.KHR_BINARY_GLTF].body
                    );
                  var r = this.options;
                  return new Promise(function (e, i) {
                    n.load(jf.resolveURL(t.uri, r.path), e, void 0, function () {
                      i(
                        new Error(
                          'THREE.GLTFLoader: Failed to load buffer "' +
                            t.uri +
                            '".'
                        )
                      );
                    });
                  });
                }
              },
              {
                key: "loadBufferView",
                value: function (e) {
                  var t = this.json.bufferViews[e];
                  return this.getDependency("buffer", t.buffer).then(function (
                    e
                  ) {
                    var n = t.byteLength || 0,
                      r = t.byteOffset || 0;
                    return e.slice(r, r + n);
                  });
                }
              },
              {
                key: "loadAccessor",
                value: function (e) {
                  var t = this,
                    n = this.json,
                    r = this.json.accessors[e];
                  if (void 0 === r.bufferView && void 0 === r.sparse) {
                    var i = lm[r.type],
                      a = am[r.componentType],
                      s = !0 === r.normalized,
                      o = new a(r.count * i);
                    return Promise.resolve(new Al(o, i, s));
                  }
                  var l = [];
                  return (
                    void 0 !== r.bufferView
                      ? l.push(this.getDependency("bufferView", r.bufferView))
                      : l.push(null),
                    void 0 !== r.sparse &&
                      (l.push(
                        this.getDependency(
                          "bufferView",
                          r.sparse.indices.bufferView
                        )
                      ),
                      l.push(
                        this.getDependency(
                          "bufferView",
                          r.sparse.values.bufferView
                        )
                      )),
                    Promise.all(l).then(function (e) {
                      var i,
                        a,
                        s = e[0],
                        o = lm[r.type],
                        l = am[r.componentType],
                        h = l.BYTES_PER_ELEMENT,
                        u = h * o,
                        c = r.byteOffset || 0,
                        d =
                          void 0 !== r.bufferView
                            ? n.bufferViews[r.bufferView].byteStride
                            : void 0,
                        f = !0 === r.normalized;
                      if (d && d !== u) {
                        var p = Math.floor(c / d),
                          m =
                            "InterleavedBuffer:" +
                            r.bufferView +
                            ":" +
                            r.componentType +
                            ":" +
                            p +
                            ":" +
                            r.count,
                          g = t.cache.get(m);
                        g ||
                          ((i = new l(s, p * d, (r.count * d) / h)),
                          (g = new ad(i, d / h)),
                          t.cache.add(m, g)),
                          (a = new od(g, o, (c % d) / h, f));
                      } else (i = null === s ? new l(r.count * o) : new l(s, c, r.count * o)), (a = new Al(i, o, f));
                      if (void 0 !== r.sparse) {
                        var v = lm.SCALAR,
                          y = am[r.sparse.indices.componentType],
                          _ = r.sparse.indices.byteOffset || 0,
                          b = r.sparse.values.byteOffset || 0,
                          x = new y(e[1], _, r.sparse.count * v),
                          S = new l(e[2], b, r.sparse.count * o);
                        null !== s &&
                          (a = new Al(a.array.slice(), a.itemSize, a.normalized));
                        for (var E = 0, w = x.length; E < w; E++) {
                          var T = x[E];
                          if (
                            (a.setX(T, S[E * o]),
                            o >= 2 && a.setY(T, S[E * o + 1]),
                            o >= 3 && a.setZ(T, S[E * o + 2]),
                            o >= 4 && a.setW(T, S[E * o + 3]),
                            o >= 5)
                          )
                            throw new Error(
                              "THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute."
                            );
                        }
                      }
                      return a;
                    })
                  );
                }
              },
              {
                key: "loadTexture",
                value: function (e) {
                  var t = this.json,
                    n = this.options,
                    r = t.textures[e].source,
                    i = t.images[r],
                    a = this.textureLoader;
                  if (i.uri) {
                    var s = n.manager.getHandler(i.uri);
                    null !== s && (a = s);
                  }
                  return this.loadTextureImage(e, r, a);
                }
              },
              {
                key: "loadTextureImage",
                value: function (e, t, n) {
                  var r = this,
                    i = this.json,
                    a = i.textures[e],
                    s = i.images[t],
                    o = (s.uri || s.bufferView) + ":" + a.sampler;
                  if (this.textureCache[o]) return this.textureCache[o];
                  var l = this.loadImageSource(t, n)
                    .then(function (t) {
                      (t.flipY = !1),
                        (t.name = a.name || s.name || ""),
                        "" === t.name &&
                          "string" == typeof s.uri &&
                          !1 === s.uri.startsWith("data:image/") &&
                          (t.name = s.uri);
                      var n = (i.samplers || {})[a.sampler] || {};
                      return (
                        (t.magFilter = sm[n.magFilter] || Ji),
                        (t.minFilter = sm[n.minFilter] || $i),
                        (t.wrapS = om[n.wrapS] || ji),
                        (t.wrapT = om[n.wrapT] || ji),
                        r.associations.set(t, { textures: e }),
                        t
                      );
                    })
                    .catch(function () {
                      return null;
                    });
                  return (this.textureCache[o] = l), l;
                }
              },
              {
                key: "loadImageSource",
                value: function (e, t) {
                  var n = this.json,
                    r = this.options;
                  if (void 0 !== this.sourceCache[e])
                    return this.sourceCache[e].then(function (e) {
                      return e.clone();
                    });
                  var i = n.images[e],
                    a = self.URL || self.webkitURL,
                    s = i.uri || "",
                    o = !1;
                  if (void 0 !== i.bufferView)
                    s = this.getDependency("bufferView", i.bufferView).then(
                      function (e) {
                        o = !0;
                        var t = new Blob([e], { type: i.mimeType });
                        return (s = a.createObjectURL(t));
                      }
                    );
                  else if (void 0 === i.uri)
                    throw new Error(
                      "THREE.GLTFLoader: Image " +
                        e +
                        " is missing URI and bufferView"
                    );
                  var l = Promise.resolve(s)
                    .then(function (e) {
                      return new Promise(function (n, i) {
                        var a = n;
                        !0 === t.isImageBitmapLoader &&
                          (a = function (e) {
                            var t = new Ks(e);
                            (t.needsUpdate = !0), n(t);
                          }),
                          t.load(jf.resolveURL(e, r.path), a, void 0, i);
                      });
                    })
                    .then(function (e) {
                      var t;
                      return (
                        !0 === o && a.revokeObjectURL(s),
                        (e.userData.mimeType =
                          i.mimeType ||
                          ((t = i.uri).search(/\.jpe?g($|\?)/i) > 0 ||
                          0 === t.search(/^data\:image\/jpeg/)
                            ? "image/jpeg"
                            : t.search(/\.webp($|\?)/i) > 0 ||
                              0 === t.search(/^data\:image\/webp/)
                            ? "image/webp"
                            : "image/png")),
                        e
                      );
                    })
                    .catch(function (e) {
                      throw (
                        (console.error(
                          "THREE.GLTFLoader: Couldn't load texture",
                          s
                        ),
                        e)
                      );
                    });
                  return (this.sourceCache[e] = l), l;
                }
              },
              {
                key: "assignTexture",
                value: function (e, t, n, r) {
                  var i = this;
                  return this.getDependency("texture", n.index).then(function (
                    a
                  ) {
                    if (!a) return null;
                    if (
                      (void 0 !== n.texCoord &&
                        n.texCoord > 0 &&
                        ((a = a.clone()).channel = n.texCoord),
                      i.extensions[Dp.KHR_TEXTURE_TRANSFORM])
                    ) {
                      var s =
                        void 0 !== n.extensions
                          ? n.extensions[Dp.KHR_TEXTURE_TRANSFORM]
                          : void 0;
                      if (s) {
                        var o = i.associations.get(a);
                        (a = i.extensions[Dp.KHR_TEXTURE_TRANSFORM].extendTexture(
                          a,
                          s
                        )),
                          i.associations.set(a, o);
                      }
                    }
                    return void 0 !== r && (a.colorSpace = r), (e[t] = a), a;
                  });
                }
              },
              {
                key: "assignFinalMaterial",
                value: function (e) {
                  var t = e.geometry,
                    n = e.material,
                    r = void 0 === t.attributes.tangent,
                    i = void 0 !== t.attributes.color,
                    a = void 0 === t.attributes.normal;
                  if (e.isPoints) {
                    var s = "PointsMaterial:" + n.uuid,
                      o = this.cache.get(s);
                    o ||
                      ((o = new Gd()),
                      El.prototype.copy.call(o, n),
                      o.color.copy(n.color),
                      (o.map = n.map),
                      (o.sizeAttenuation = !1),
                      this.cache.add(s, o)),
                      (n = o);
                  } else if (e.isLine) {
                    var l = "LineBasicMaterial:" + n.uuid,
                      h = this.cache.get(l);
                    h ||
                      ((h = new Dd()),
                      El.prototype.copy.call(h, n),
                      h.color.copy(n.color),
                      (h.map = n.map),
                      this.cache.add(l, h)),
                      (n = h);
                  }
                  if (r || i || a) {
                    var u = "ClonedMaterial:" + n.uuid + ":";
                    r && (u += "derivative-tangents:"),
                      i && (u += "vertex-colors:"),
                      a && (u += "flat-shading:");
                    var c = this.cache.get(u);
                    c ||
                      ((c = n.clone()),
                      i && (c.vertexColors = !0),
                      a && (c.flatShading = !0),
                      r &&
                        (c.normalScale && (c.normalScale.y *= -1),
                        c.clearcoatNormalScale &&
                          (c.clearcoatNormalScale.y *= -1)),
                      this.cache.add(u, c),
                      this.associations.set(c, this.associations.get(n))),
                      (n = c);
                  }
                  e.material = n;
                }
              },
              {
                key: "getMaterialType",
                value: function () {
                  return Qd;
                }
              },
              {
                key: "loadMaterial",
                value: function (e) {
                  var t,
                    n = this,
                    r = this.json,
                    i = this.extensions,
                    a = r.materials[e],
                    s = {},
                    o = [];
                  if ((a.extensions || {})[Dp.KHR_MATERIALS_UNLIT]) {
                    var l = i[Dp.KHR_MATERIALS_UNLIT];
                    (t = l.getMaterialType()), o.push(l.extendParams(s, a, n));
                  } else {
                    var h = a.pbrMetallicRoughness || {};
                    if (
                      ((s.color = new bl(1, 1, 1)),
                      (s.opacity = 1),
                      Array.isArray(h.baseColorFactor))
                    ) {
                      var u = h.baseColorFactor;
                      s.color.setRGB(u[0], u[1], u[2], ts), (s.opacity = u[3]);
                    }
                    void 0 !== h.baseColorTexture &&
                      o.push(n.assignTexture(s, "map", h.baseColorTexture, es)),
                      (s.metalness =
                        void 0 !== h.metallicFactor ? h.metallicFactor : 1),
                      (s.roughness =
                        void 0 !== h.roughnessFactor ? h.roughnessFactor : 1),
                      void 0 !== h.metallicRoughnessTexture &&
                        (o.push(
                          n.assignTexture(
                            s,
                            "metalnessMap",
                            h.metallicRoughnessTexture
                          )
                        ),
                        o.push(
                          n.assignTexture(
                            s,
                            "roughnessMap",
                            h.metallicRoughnessTexture
                          )
                        )),
                      (t = this._invokeOne(function (t) {
                        return t.getMaterialType && t.getMaterialType(e);
                      })),
                      o.push(
                        Promise.all(
                          this._invokeAll(function (t) {
                            return (
                              t.extendMaterialParams &&
                              t.extendMaterialParams(e, s)
                            );
                          })
                        )
                      );
                  }
                  !0 === a.doubleSided && (s.side = 2);
                  var c = a.alphaMode || "OPAQUE";
                  if (
                    ("BLEND" === c
                      ? ((s.transparent = !0), (s.depthWrite = !1))
                      : ((s.transparent = !1),
                        "MASK" === c &&
                          (s.alphaTest =
                            void 0 !== a.alphaCutoff ? a.alphaCutoff : 0.5)),
                    void 0 !== a.normalTexture &&
                      t !== wl &&
                      (o.push(n.assignTexture(s, "normalMap", a.normalTexture)),
                      (s.normalScale = new Cs(1, 1)),
                      void 0 !== a.normalTexture.scale))
                  ) {
                    var d = a.normalTexture.scale;
                    s.normalScale.set(d, d);
                  }
                  if (
                    (void 0 !== a.occlusionTexture &&
                      t !== wl &&
                      (o.push(n.assignTexture(s, "aoMap", a.occlusionTexture)),
                      void 0 !== a.occlusionTexture.strength &&
                        (s.aoMapIntensity = a.occlusionTexture.strength)),
                    void 0 !== a.emissiveFactor && t !== wl)
                  ) {
                    var f = a.emissiveFactor;
                    s.emissive = new bl().setRGB(f[0], f[1], f[2], ts);
                  }
                  return (
                    void 0 !== a.emissiveTexture &&
                      t !== wl &&
                      o.push(
                        n.assignTexture(s, "emissiveMap", a.emissiveTexture, es)
                      ),
                    Promise.all(o).then(function () {
                      var r = new t(s);
                      return (
                        a.name && (r.name = a.name),
                        fm(r, a),
                        n.associations.set(r, { materials: e }),
                        a.extensions && dm(i, r, a),
                        r
                      );
                    })
                  );
                }
              },
              {
                key: "createUniqueName",
                value: function (e) {
                  var t = ep.sanitizeNodeName(e || "");
                  return t in this.nodeNamesUsed
                    ? t + "_" + ++this.nodeNamesUsed[t]
                    : ((this.nodeNamesUsed[t] = 0), t);
                }
              },
              {
                key: "loadGeometries",
                value: function (e) {
                  var t = this,
                    n = this.extensions,
                    r = this.primitiveCache;
                  function i(e) {
                    return n[Dp.KHR_DRACO_MESH_COMPRESSION]
                      .decodePrimitive(e, t)
                      .then(function (n) {
                        return bm(n, e, t);
                      });
                  }
                  for (var a = [], s = 0, o = e.length; s < o; s++) {
                    var l = e[s],
                      h = mm(l),
                      u = r[h];
                    if (u) a.push(u.promise);
                    else {
                      var c;
                      (c =
                        l.extensions &&
                        l.extensions[Dp.KHR_DRACO_MESH_COMPRESSION]
                          ? i(l)
                          : bm(new Bl(), l, t)),
                        (r[h] = { primitive: l, promise: c }),
                        a.push(c);
                    }
                  }
                  return Promise.all(a);
                }
              },
              {
                key: "loadMesh",
                value: function (e) {
                  for (
                    var t,
                      n = this,
                      r = this.json,
                      i = this.extensions,
                      a = r.meshes[e],
                      s = a.primitives,
                      o = [],
                      l = 0,
                      h = s.length;
                    l < h;
                    l++
                  ) {
                    var u =
                      void 0 === s[l].material
                        ? (void 0 === (t = this.cache).DefaultMaterial &&
                            (t.DefaultMaterial = new Qd({
                              color: 16777215,
                              emissive: 0,
                              metalness: 1,
                              roughness: 1,
                              transparent: !1,
                              depthTest: !0,
                              side: 0
                            })),
                          t.DefaultMaterial)
                        : this.getDependency("material", s[l].material);
                    o.push(u);
                  }
                  return (
                    o.push(n.loadGeometries(s)),
                    Promise.all(o).then(function (t) {
                      for (
                        var r = t.slice(0, t.length - 1),
                          o = t[t.length - 1],
                          l = [],
                          h = 0,
                          u = o.length;
                        h < u;
                        h++
                      ) {
                        var c = o[h],
                          d = s[h],
                          f = void 0,
                          p = r[h];
                        if (
                          d.mode === im.TRIANGLES ||
                          d.mode === im.TRIANGLE_STRIP ||
                          d.mode === im.TRIANGLE_FAN ||
                          void 0 === d.mode
                        )
                          !0 ===
                            (f =
                              !0 === a.isSkinnedMesh
                                ? new vd(c, p)
                                : new nh(c, p)).isSkinnedMesh &&
                            f.normalizeSkinWeights(),
                            d.mode === im.TRIANGLE_STRIP
                              ? (f.geometry = fp(f.geometry, 1))
                              : d.mode === im.TRIANGLE_FAN &&
                                (f.geometry = fp(f.geometry, 2));
                        else if (d.mode === im.LINES) f = new Vd(c, p);
                        else if (d.mode === im.LINE_STRIP) f = new Bd(c, p);
                        else if (d.mode === im.LINE_LOOP) f = new Hd(c, p);
                        else {
                          if (d.mode !== im.POINTS)
                            throw new Error(
                              "THREE.GLTFLoader: Primitive mode unsupported: " +
                                d.mode
                            );
                          f = new Yd(c, p);
                        }
                        Object.keys(f.geometry.morphAttributes).length > 0 &&
                          pm(f, a),
                          (f.name = n.createUniqueName(a.name || "mesh_" + e)),
                          fm(f, a),
                          d.extensions && dm(i, f, d),
                          n.assignFinalMaterial(f),
                          l.push(f);
                      }
                      for (var m = 0, g = l.length; m < g; m++)
                        n.associations.set(l[m], { meshes: e, primitives: m });
                      if (1 === l.length)
                        return a.extensions && dm(i, l[0], a), l[0];
                      var v = new Jc();
                      a.extensions && dm(i, v, a),
                        n.associations.set(v, { meshes: e });
                      for (var y = 0, _ = l.length; y < _; y++) v.add(l[y]);
                      return v;
                    })
                  );
                }
              },
              {
                key: "loadCamera",
                value: function (e) {
                  var t,
                    n = this.json.cameras[e],
                    r = n[n.type];
                  if (r)
                    return (
                      "perspective" === n.type
                        ? (t = new ch(
                            As(r.yfov),
                            r.aspectRatio || 1,
                            r.znear || 1,
                            r.zfar || 2e6
                          ))
                        : "orthographic" === n.type &&
                          (t = new Oh(
                            -r.xmag,
                            r.xmag,
                            r.ymag,
                            -r.ymag,
                            r.znear,
                            r.zfar
                          )),
                      n.name && (t.name = this.createUniqueName(n.name)),
                      fm(t, n),
                      Promise.resolve(t)
                    );
                  console.warn("THREE.GLTFLoader: Missing camera parameters.");
                }
              },
              {
                key: "loadSkin",
                value: function (e) {
                  for (
                    var t = this.json.skins[e],
                      n = [],
                      r = 0,
                      i = t.joints.length;
                    r < i;
                    r++
                  )
                    n.push(this._loadNodeShallow(t.joints[r]));
                  return (
                    void 0 !== t.inverseBindMatrices
                      ? n.push(
                          this.getDependency("accessor", t.inverseBindMatrices)
                        )
                      : n.push(null),
                    Promise.all(n).then(function (e) {
                      for (
                        var n = e.pop(),
                          r = e,
                          i = [],
                          a = [],
                          s = 0,
                          o = r.length;
                        s < o;
                        s++
                      ) {
                        var l = r[s];
                        if (l) {
                          i.push(l);
                          var h = new Do();
                          null !== n && h.fromArray(n.array, 16 * s), a.push(h);
                        } else
                          console.warn(
                            'THREE.GLTFLoader: Joint "%s" could not be found.',
                            t.joints[s]
                          );
                      }
                      return new Sd(i, a);
                    })
                  );
                }
              },
              {
                key: "loadAnimation",
                value: function (e) {
                  for (
                    var t = this.json,
                      n = this,
                      r = t.animations[e],
                      i = r.name ? r.name : "animation_" + e,
                      a = [],
                      s = [],
                      o = [],
                      l = [],
                      h = [],
                      u = 0,
                      c = r.channels.length;
                    u < c;
                    u++
                  ) {
                    var d = r.channels[u],
                      f = r.samplers[d.sampler],
                      p = d.target,
                      m = p.node,
                      g =
                        void 0 !== r.parameters ? r.parameters[f.input] : f.input,
                      v =
                        void 0 !== r.parameters
                          ? r.parameters[f.output]
                          : f.output;
                    void 0 !== p.node &&
                      (a.push(this.getDependency("node", m)),
                      s.push(this.getDependency("accessor", g)),
                      o.push(this.getDependency("accessor", v)),
                      l.push(f),
                      h.push(p));
                  }
                  return Promise.all([
                    Promise.all(a),
                    Promise.all(s),
                    Promise.all(o),
                    Promise.all(l),
                    Promise.all(h)
                  ]).then(function (e) {
                    for (
                      var t = e[0],
                        r = e[1],
                        a = e[2],
                        s = e[3],
                        o = e[4],
                        l = [],
                        h = 0,
                        u = t.length;
                      h < u;
                      h++
                    ) {
                      var c = t[h],
                        d = r[h],
                        f = a[h],
                        p = s[h],
                        m = o[h];
                      if (void 0 !== c) {
                        c.updateMatrix && c.updateMatrix();
                        var g = n._createAnimationTracks(c, d, f, p, m);
                        if (g) for (var v = 0; v < g.length; v++) l.push(g[v]);
                      }
                    }
                    return new _f(i, void 0, l);
                  });
                }
              },
              {
                key: "createNodeMesh",
                value: function (e) {
                  var t = this.json,
                    n = this,
                    r = t.nodes[e];
                  return void 0 === r.mesh
                    ? null
                    : n.getDependency("mesh", r.mesh).then(function (e) {
                        var t = n._getNodeRef(n.meshCache, r.mesh, e);
                        return (
                          void 0 !== r.weights &&
                            t.traverse(function (e) {
                              if (e.isMesh)
                                for (var t = 0, n = r.weights.length; t < n; t++)
                                  e.morphTargetInfluences[t] = r.weights[t];
                            }),
                          t
                        );
                      });
                }
              },
              {
                key: "loadNode",
                value: function (e) {
                  for (
                    var t = this,
                      n = this.json.nodes[e],
                      r = t._loadNodeShallow(e),
                      i = [],
                      a = n.children || [],
                      s = 0,
                      o = a.length;
                    s < o;
                    s++
                  )
                    i.push(t.getDependency("node", a[s]));
                  var l =
                    void 0 === n.skin
                      ? Promise.resolve(null)
                      : t.getDependency("skin", n.skin);
                  return Promise.all([r, Promise.all(i), l]).then(function (e) {
                    var t = e[0],
                      n = e[1],
                      r = e[2];
                    null !== r &&
                      t.traverse(function (e) {
                        e.isSkinnedMesh && e.bind(r, ym);
                      });
                    for (var i = 0, a = n.length; i < a; i++) t.add(n[i]);
                    return t;
                  });
                }
              },
              {
                key: "_loadNodeShallow",
                value: function (e) {
                  var t = this.json,
                    n = this.extensions,
                    r = this;
                  if (void 0 !== this.nodeCache[e]) return this.nodeCache[e];
                  var i = t.nodes[e],
                    a = i.name ? r.createUniqueName(i.name) : "",
                    s = [],
                    o = r._invokeOne(function (t) {
                      return t.createNodeMesh && t.createNodeMesh(e);
                    });
                  return (
                    o && s.push(o),
                    void 0 !== i.camera &&
                      s.push(
                        r.getDependency("camera", i.camera).then(function (e) {
                          return r._getNodeRef(r.cameraCache, i.camera, e);
                        })
                      ),
                    r
                      ._invokeAll(function (t) {
                        return (
                          t.createNodeAttachment && t.createNodeAttachment(e)
                        );
                      })
                      .forEach(function (e) {
                        s.push(e);
                      }),
                    (this.nodeCache[e] = Promise.all(s).then(function (t) {
                      var s;
                      if (
                        (s =
                          !0 === i.isBone
                            ? new yd()
                            : t.length > 1
                            ? new Jc()
                            : 1 === t.length
                            ? t[0]
                            : new rl()) !== t[0]
                      )
                        for (var o = 0, l = t.length; o < l; o++) s.add(t[o]);
                      if (
                        (i.name && ((s.userData.name = i.name), (s.name = a)),
                        fm(s, i),
                        i.extensions && dm(n, s, i),
                        void 0 !== i.matrix)
                      ) {
                        var h = new Do();
                        h.fromArray(i.matrix), s.applyMatrix4(h);
                      } else void 0 !== i.translation && s.position.fromArray(i.translation), void 0 !== i.rotation && s.quaternion.fromArray(i.rotation), void 0 !== i.scale && s.scale.fromArray(i.scale);
                      return (
                        r.associations.has(s) || r.associations.set(s, {}),
                        (r.associations.get(s).nodes = e),
                        s
                      );
                    })),
                    this.nodeCache[e]
                  );
                }
              },
              {
                key: "loadScene",
                value: function (e) {
                  var t = this.extensions,
                    n = this.json.scenes[e],
                    r = this,
                    i = new Jc();
                  n.name && (i.name = r.createUniqueName(n.name)),
                    fm(i, n),
                    n.extensions && dm(t, i, n);
                  for (
                    var a = n.nodes || [], s = [], o = 0, l = a.length;
                    o < l;
                    o++
                  )
                    s.push(r.getDependency("node", a[o]));
                  return Promise.all(s).then(function (e) {
                    for (var t = 0, n = e.length; t < n; t++) i.add(e[t]);
                    return (
                      (r.associations = (function (e) {
                        var t,
                          n = new Map(),
                          i = yp(r.associations);
                        try {
                          for (i.s(); !(t = i.n()).done; ) {
                            var a = pp(t.value, 2),
                              s = a[0],
                              o = a[1];
                            (s instanceof El || s instanceof Ks) && n.set(s, o);
                          }
                        } catch (e) {
                          i.e(e);
                        } finally {
                          i.f();
                        }
                        return (
                          e.traverse(function (e) {
                            var t = r.associations.get(e);
                            null != t && n.set(e, t);
                          }),
                          n
                        );
                      })(i)),
                      i
                    );
                  });
                }
              },
              {
                key: "_createAnimationTracks",
                value: function (e, t, n, r, i) {
                  var a,
                    s = [],
                    o = e.name ? e.name : e.uuid,
                    l = [];
                  switch (
                    (um[i.path] === um.weights
                      ? e.traverse(function (e) {
                          e.morphTargetInfluences &&
                            l.push(e.name ? e.name : e.uuid);
                        })
                      : l.push(o),
                    um[i.path])
                  ) {
                    case um.weights:
                      a = pf;
                      break;
                    case um.rotation:
                      a = gf;
                      break;
                    case um.position:
                    case um.scale:
                      a = yf;
                      break;
                    default:
                      a = 1 === n.itemSize ? pf : yf;
                  }
                  for (
                    var h = void 0 !== r.interpolation ? cm[r.interpolation] : Xa,
                      u = this._getArrayFromAccessor(n),
                      c = 0,
                      d = l.length;
                    c < d;
                    c++
                  ) {
                    var f = new a(l[c] + "." + um[i.path], t.array, u, h);
                    "CUBICSPLINE" === r.interpolation &&
                      this._createCubicSplineTrackInterpolant(f),
                      s.push(f);
                  }
                  return s;
                }
              },
              {
                key: "_getArrayFromAccessor",
                value: function (e) {
                  var t = e.array;
                  if (e.normalized) {
                    for (
                      var n = vm(t.constructor),
                        r = new Float32Array(t.length),
                        i = 0,
                        a = t.length;
                      i < a;
                      i++
                    )
                      r[i] = t[i] * n;
                    t = r;
                  }
                  return t;
                }
              },
              {
                key: "_createCubicSplineTrackInterpolant",
                value: function (e) {
                  (e.createInterpolant = function (e) {
                    return new (this instanceof gf ? rm : tm)(
                      this.times,
                      this.values,
                      this.getValueSize() / 3,
                      e
                    );
                  }),
                    (e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline =
                      !0);
                }
              }
            ]),
            e
          );
        })();
      function bm(e, t, n) {
        var r = t.attributes,
          i = [];
        function a(t, r) {
          return n.getDependency("accessor", t).then(function (t) {
            e.setAttribute(r, t);
          });
        }
        for (var s in r) {
          var o = hm[s] || s.toLowerCase();
          o in e.attributes || i.push(a(r[s], o));
        }
        if (void 0 !== t.indices && !e.index) {
          var l = n.getDependency("accessor", t.indices).then(function (t) {
            e.setIndex(t);
          });
          i.push(l);
        }
        return (
          Vs.workingColorSpace !== ts &&
            "COLOR_0" in r &&
            console.warn(
              'THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "'.concat(
                Vs.workingColorSpace,
                '" not supported.'
              )
            ),
          fm(e, t),
          (function (e, t, n) {
            var r = t.attributes,
              i = new io();
            if (void 0 !== r.POSITION) {
              var a = n.json.accessors[r.POSITION],
                s = a.min,
                o = a.max;
              if (void 0 !== s && void 0 !== o) {
                if (
                  (i.set(new to(s[0], s[1], s[2]), new to(o[0], o[1], o[2])),
                  a.normalized)
                ) {
                  var l = vm(am[a.componentType]);
                  i.min.multiplyScalar(l), i.max.multiplyScalar(l);
                }
                var h = t.targets;
                if (void 0 !== h) {
                  for (
                    var u = new to(), c = new to(), d = 0, f = h.length;
                    d < f;
                    d++
                  ) {
                    var p = h[d];
                    if (void 0 !== p.POSITION) {
                      var m = n.json.accessors[p.POSITION],
                        g = m.min,
                        v = m.max;
                      if (void 0 !== g && void 0 !== v) {
                        if (
                          (c.setX(Math.max(Math.abs(g[0]), Math.abs(v[0]))),
                          c.setY(Math.max(Math.abs(g[1]), Math.abs(v[1]))),
                          c.setZ(Math.max(Math.abs(g[2]), Math.abs(v[2]))),
                          m.normalized)
                        ) {
                          var y = vm(am[m.componentType]);
                          c.multiplyScalar(y);
                        }
                        u.max(c);
                      } else
                        console.warn(
                          "THREE.GLTFLoader: Missing min/max properties for accessor POSITION."
                        );
                    }
                  }
                  i.expandByVector(u);
                }
                e.boundingBox = i;
                var _ = new Eo();
                i.getCenter(_.center),
                  (_.radius = i.min.distanceTo(i.max) / 2),
                  (e.boundingSphere = _);
              } else
                console.warn(
                  "THREE.GLTFLoader: Missing min/max properties for accessor POSITION."
                );
            }
          })(e, t, n),
          Promise.all(i).then(function () {
            return void 0 !== t.targets
              ? (function (e, t, n) {
                  for (
                    var r = !1, i = !1, a = !1, s = 0, o = t.length;
                    s < o;
                    s++
                  ) {
                    var l = t[s];
                    if (
                      (void 0 !== l.POSITION && (r = !0),
                      void 0 !== l.NORMAL && (i = !0),
                      void 0 !== l.COLOR_0 && (a = !0),
                      r && i && a)
                    )
                      break;
                  }
                  if (!r && !i && !a) return Promise.resolve(e);
                  for (
                    var h = [], u = [], c = [], d = 0, f = t.length;
                    d < f;
                    d++
                  ) {
                    var p = t[d];
                    if (r) {
                      var m =
                        void 0 !== p.POSITION
                          ? n.getDependency("accessor", p.POSITION)
                          : e.attributes.position;
                      h.push(m);
                    }
                    if (i) {
                      var g =
                        void 0 !== p.NORMAL
                          ? n.getDependency("accessor", p.NORMAL)
                          : e.attributes.normal;
                      u.push(g);
                    }
                    if (a) {
                      var v =
                        void 0 !== p.COLOR_0
                          ? n.getDependency("accessor", p.COLOR_0)
                          : e.attributes.color;
                      c.push(v);
                    }
                  }
                  return Promise.all([
                    Promise.all(h),
                    Promise.all(u),
                    Promise.all(c)
                  ]).then(function (t) {
                    var n = t[0],
                      s = t[1],
                      o = t[2];
                    return (
                      r && (e.morphAttributes.position = n),
                      i && (e.morphAttributes.normal = s),
                      a && (e.morphAttributes.color = o),
                      (e.morphTargetsRelative = !0),
                      e
                    );
                  });
                })(e, t.targets, n)
              : e;
          })
        );
      }
      const xm = 0.01745329238,
        Sm = (e, t) => {
          const n = e.distance,
            r = e.angleX * xm,
            i = e.angleY * xm,
            a = 1e-7,
            s = Math.abs(i) < a ? (0 !== i ? a * Math.sign(i) : a) : i;
          return (
            (t.x = n * Math.sin(r) * Math.cos(s)),
            (t.y = n * Math.sin(s)),
            (t.z = n * Math.cos(r) * Math.cos(s)),
            t
          );
        },
        Em = (e) => {
          const { setting: t, lights: n } = e;
          n.forEach((e) => {
            var n, r, i;
            const a = t.lights[e.name];
            if (a) {
              if (
                (e.color.set(a.color.r / 255, a.color.g / 255, a.color.b / 255),
                (e.intensity = void 0 === a.intensity ? 1 : a.intensity),
                e.isDirectionalLight)
              ) {
                const t = Sm(
                  { angleX: a.angle.x, angleY: a.angle.y, distance: 160 },
                  new to()
                );
                e.position.copy(t);
              }
              if (e.isHemisphereLight) {
                e.groundColor.set(
                  ((null === (n = a.groundColor) || void 0 === n
                    ? void 0
                    : n.r) || 0) / 255,
                  ((null === (r = a.groundColor) || void 0 === r
                    ? void 0
                    : r.g) || 0) / 255,
                  ((null === (i = a.groundColor) || void 0 === i
                    ? void 0
                    : i.b) || 0) / 255
                );
                const t = Sm(
                  { angleX: a.angle.x, angleY: a.angle.y, distance: 0.1 },
                  new to()
                );
                e.position.copy(t);
              }
            }
          });
        },
        wm = "development_setting",
        Tm = (e) => {
          const t = JSON.stringify(e);
          return localStorage.setItem(wm, t), t;
        };
      var Mm = __webpack_require__(528);
      function Am(e) {
        return (
          (Am =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          Am(e)
        );
      }
      function Cm(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(e, Pm(r.key), r);
        }
      }
      function Pm(e) {
        var t = (function (e, t) {
          if ("object" != Am(e) || !e) return e;
          var n = e[Symbol.toPrimitive];
          if (void 0 !== n) {
            var r = n.call(e, t);
            if ("object" != Am(r)) return r;
            throw new TypeError("@@toPrimitive must return a primitive value.");
          }
          return String(e);
        })(e, "string");
        return "symbol" == Am(t) ? t : String(t);
      }
      function km(e, t, n) {
        return (
          (t = Dm(t)),
          (function (e, t) {
            if (t && ("object" === Am(t) || "function" == typeof t)) return t;
            if (void 0 !== t)
              throw new TypeError(
                "Derived constructors may only return object or undefined"
              );
            return (function (e) {
              if (void 0 === e)
                throw new ReferenceError(
                  "this hasn't been initialised - super() hasn't been called"
                );
              return e;
            })(e);
          })(
            e,
            Rm()
              ? Reflect.construct(t, n || [], Dm(e).constructor)
              : t.apply(e, n)
          )
        );
      }
      function Rm() {
        try {
          var e = !Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          );
        } catch (e) {}
        return (Rm = function () {
          return !!e;
        })();
      }
      function Dm(e) {
        return (
          (Dm = Object.setPrototypeOf
            ? Object.getPrototypeOf.bind()
            : function (e) {
                return e.__proto__ || Object.getPrototypeOf(e);
              }),
          Dm(e)
        );
      }
      function Im(e, t) {
        return (
          (Im = Object.setPrototypeOf
            ? Object.setPrototypeOf.bind()
            : function (e, t) {
                return (e.__proto__ = t), e;
              }),
          Im(e, t)
        );
      }
      var Lm = new WeakMap(),
        Fm = (function (e) {
          function t(e) {
            var n;
            return (
              (function (e, t) {
                if (!(e instanceof t))
                  throw new TypeError("Cannot call a class as a function");
              })(this, t),
              ((n = km(this, t, [e])).decoderPath = ""),
              (n.decoderConfig = {}),
              (n.decoderBinary = null),
              (n.decoderPending = null),
              (n.workerLimit = 4),
              (n.workerPool = []),
              (n.workerNextTaskID = 1),
              (n.workerSourceURL = ""),
              (n.defaultAttributeIDs = {
                position: "POSITION",
                normal: "NORMAL",
                color: "COLOR",
                uv: "TEX_COORD"
              }),
              (n.defaultAttributeTypes = {
                position: "Float32Array",
                normal: "Float32Array",
                color: "Float32Array",
                uv: "Float32Array"
              }),
              n
            );
          }
          var n, r;
          return (
            (function (e, t) {
              if ("function" != typeof t && null !== t)
                throw new TypeError(
                  "Super expression must either be null or a function"
                );
              (e.prototype = Object.create(t && t.prototype, {
                constructor: { value: e, writable: !0, configurable: !0 }
              })),
                Object.defineProperty(e, "prototype", { writable: !1 }),
                t && Im(e, t);
            })(t, e),
            (n = t),
            (r = [
              {
                key: "setDecoderPath",
                value: function (e) {
                  return (this.decoderPath = e), this;
                }
              },
              {
                key: "setDecoderConfig",
                value: function (e) {
                  return (this.decoderConfig = e), this;
                }
              },
              {
                key: "setWorkerLimit",
                value: function (e) {
                  return (this.workerLimit = e), this;
                }
              },
              {
                key: "load",
                value: function (e, t, n, r) {
                  var i = this,
                    a = new Mf(this.manager);
                  a.setPath(this.path),
                    a.setResponseType("arraybuffer"),
                    a.setRequestHeader(this.requestHeader),
                    a.setWithCredentials(this.withCredentials),
                    a.load(
                      e,
                      function (e) {
                        i.parse(e, t, r);
                      },
                      n,
                      r
                    );
                }
              },
              {
                key: "parse",
                value: function (e, t) {
                  var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : function () {};
                  this.decodeDracoFile(e, t, null, null, es).catch(n);
                }
              },
              {
                key: "decodeDracoFile",
                value: function (e, t, n, r) {
                  var i =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : ts,
                    a =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : function () {},
                    s = {
                      attributeIDs: n || this.defaultAttributeIDs,
                      attributeTypes: r || this.defaultAttributeTypes,
                      useUniqueIDs: !!n,
                      vertexColorSpace: i
                    };
                  return this.decodeGeometry(e, s).then(t).catch(a);
                }
              },
              {
                key: "decodeGeometry",
                value: function (e, t) {
                  var n,
                    r = this,
                    i = JSON.stringify(t);
                  if (Lm.has(e)) {
                    var a = Lm.get(e);
                    if (a.key === i) return a.promise;
                    if (0 === e.byteLength)
                      throw new Error(
                        "THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred."
                      );
                  }
                  var s = this.workerNextTaskID++,
                    o = e.byteLength,
                    l = this._getWorker(s, o)
                      .then(function (r) {
                        return (
                          (n = r),
                          new Promise(function (r, i) {
                            (n._callbacks[s] = { resolve: r, reject: i }),
                              n.postMessage(
                                {
                                  type: "decode",
                                  id: s,
                                  taskConfig: t,
                                  buffer: e
                                },
                                [e]
                              );
                          })
                        );
                      })
                      .then(function (e) {
                        return r._createGeometry(e.geometry);
                      });
                  return (
                    l
                      .catch(function () {
                        return !0;
                      })
                      .then(function () {
                        n && s && r._releaseTask(n, s);
                      }),
                    Lm.set(e, { key: i, promise: l }),
                    l
                  );
                }
              },
              {
                key: "_createGeometry",
                value: function (e) {
                  var t = new Bl();
                  e.index && t.setIndex(new Al(e.index.array, 1));
                  for (var n = 0; n < e.attributes.length; n++) {
                    var r = e.attributes[n],
                      i = r.name,
                      a = r.array,
                      s = r.itemSize,
                      o = new Al(a, s);
                    "color" === i &&
                      (this._assignVertexColorSpace(o, r.vertexColorSpace),
                      (o.normalized = a instanceof Float32Array == 0)),
                      t.setAttribute(i, o);
                  }
                  return t;
                }
              },
              {
                key: "_assignVertexColorSpace",
                value: function (e, t) {
                  if (t === es)
                    for (var n = new bl(), r = 0, i = e.count; r < i; r++)
                      n.fromBufferAttribute(e, r).convertSRGBToLinear(),
                        e.setXYZ(r, n.r, n.g, n.b);
                }
              },
              {
                key: "_loadLibrary",
                value: function (e, t) {
                  var n = new Mf(this.manager);
                  return (
                    n.setPath(this.decoderPath),
                    n.setResponseType(t),
                    n.setWithCredentials(this.withCredentials),
                    new Promise(function (t, r) {
                      n.load(e, t, void 0, r);
                    })
                  );
                }
              },
              {
                key: "preload",
                value: function () {
                  return this._initDecoder(), this;
                }
              },
              {
                key: "_initDecoder",
                value: function () {
                  var e = this;
                  if (this.decoderPending) return this.decoderPending;
                  var t =
                      "object" !==
                        ("undefined" == typeof WebAssembly
                          ? "undefined"
                          : Am(WebAssembly)) || "js" === this.decoderConfig.type,
                    n = [];
                  return (
                    t
                      ? n.push(this._loadLibrary("draco_decoder.js", "text"))
                      : (n.push(
                          this._loadLibrary("draco_wasm_wrapper.js", "text")
                        ),
                        n.push(
                          this._loadLibrary("draco_decoder.wasm", "arraybuffer")
                        )),
                    (this.decoderPending = Promise.all(n).then(function (n) {
                      var r = n[0];
                      t || (e.decoderConfig.wasmBinary = n[1]);
                      var i = Om.toString(),
                        a = [
                          "/* draco decoder */",
                          r,
                          "",
                          "/* worker */",
                          i.substring(i.indexOf("{") + 1, i.lastIndexOf("}"))
                        ].join("\n");
                      e.workerSourceURL = URL.createObjectURL(new Blob([a]));
                    })),
                    this.decoderPending
                  );
                }
              },
              {
                key: "_getWorker",
                value: function (e, t) {
                  var n = this;
                  return this._initDecoder().then(function () {
                    if (n.workerPool.length < n.workerLimit) {
                      var r = new Worker(n.workerSourceURL);
                      (r._callbacks = {}),
                        (r._taskCosts = {}),
                        (r._taskLoad = 0),
                        r.postMessage({
                          type: "init",
                          decoderConfig: n.decoderConfig
                        }),
                        (r.onmessage = function (e) {
                          var t = e.data;
                          switch (t.type) {
                            case "decode":
                              r._callbacks[t.id].resolve(t);
                              break;
                            case "error":
                              r._callbacks[t.id].reject(t);
                              break;
                            default:
                              console.error(
                                'THREE.DRACOLoader: Unexpected message, "' +
                                  t.type +
                                  '"'
                              );
                          }
                        }),
                        n.workerPool.push(r);
                    } else
                      n.workerPool.sort(function (e, t) {
                        return e._taskLoad > t._taskLoad ? -1 : 1;
                      });
                    var i = n.workerPool[n.workerPool.length - 1];
                    return (i._taskCosts[e] = t), (i._taskLoad += t), i;
                  });
                }
              },
              {
                key: "_releaseTask",
                value: function (e, t) {
                  (e._taskLoad -= e._taskCosts[t]),
                    delete e._callbacks[t],
                    delete e._taskCosts[t];
                }
              },
              {
                key: "debug",
                value: function () {
                  console.log(
                    "Task load: ",
                    this.workerPool.map(function (e) {
                      return e._taskLoad;
                    })
                  );
                }
              },
              {
                key: "dispose",
                value: function () {
                  for (var e = 0; e < this.workerPool.length; ++e)
                    this.workerPool[e].terminate();
                  return (
                    (this.workerPool.length = 0),
                    "" !== this.workerSourceURL &&
                      URL.revokeObjectURL(this.workerSourceURL),
                    this
                  );
                }
              }
            ]),
            r && Cm(n.prototype, r),
            Object.defineProperty(n, "prototype", { writable: !1 }),
            t
          );
        })(Ef);
      function Om() {
        var e, t;
        function n(e, t, n, r, i, a) {
          var s = a.num_components(),
            o = n.num_points() * s,
            l = o * i.BYTES_PER_ELEMENT,
            h = (function (e, t) {
              switch (t) {
                case Float32Array:
                  return e.DT_FLOAT32;
                case Int8Array:
                  return e.DT_INT8;
                case Int16Array:
                  return e.DT_INT16;
                case Int32Array:
                  return e.DT_INT32;
                case Uint8Array:
                  return e.DT_UINT8;
                case Uint16Array:
                  return e.DT_UINT16;
                case Uint32Array:
                  return e.DT_UINT32;
              }
            })(e, i),
            u = e._malloc(l);
          t.GetAttributeDataArrayForAllPoints(n, a, h, l, u);
          var c = new i(e.HEAPF32.buffer, u, o).slice();
          return e._free(u), { name: r, array: c, itemSize: s };
        }
        onmessage = function (r) {
          var i = r.data;
          switch (i.type) {
            case "init":
              (e = i.decoderConfig),
                (t = new Promise(function (t) {
                  (e.onModuleLoaded = function (e) {
                    t({ draco: e });
                  }),
                    DracoDecoderModule(e);
                }));
              break;
            case "decode":
              var a = i.buffer,
                s = i.taskConfig;
              t.then(function (e) {
                var t = e.draco,
                  r = new t.Decoder();
                try {
                  var o = (function (e, t, r, i) {
                      var a,
                        s,
                        o = i.attributeIDs,
                        l = i.attributeTypes,
                        h = t.GetEncodedGeometryType(r);
                      if (h === e.TRIANGULAR_MESH)
                        (a = new e.Mesh()),
                          (s = t.DecodeArrayToMesh(r, r.byteLength, a));
                      else {
                        if (h !== e.POINT_CLOUD)
                          throw new Error(
                            "THREE.DRACOLoader: Unexpected geometry type."
                          );
                        (a = new e.PointCloud()),
                          (s = t.DecodeArrayToPointCloud(r, r.byteLength, a));
                      }
                      if (!s.ok() || 0 === a.ptr)
                        throw new Error(
                          "THREE.DRACOLoader: Decoding failed: " + s.error_msg()
                        );
                      var u = { index: null, attributes: [] };
                      for (var c in o) {
                        var d = self[l[c]],
                          f = void 0,
                          p = void 0;
                        if (i.useUniqueIDs)
                          (p = o[c]), (f = t.GetAttributeByUniqueId(a, p));
                        else {
                          if (-1 === (p = t.GetAttributeId(a, e[o[c]]))) continue;
                          f = t.GetAttribute(a, p);
                        }
                        var m = n(e, t, a, c, d, f);
                        "color" === c &&
                          (m.vertexColorSpace = i.vertexColorSpace),
                          u.attributes.push(m);
                      }
                      return (
                        h === e.TRIANGULAR_MESH &&
                          (u.index = (function (e, t, n) {
                            var r = 3 * n.num_faces(),
                              i = 4 * r,
                              a = e._malloc(i);
                            t.GetTrianglesUInt32Array(n, i, a);
                            var s = new Uint32Array(
                              e.HEAPF32.buffer,
                              a,
                              r
                            ).slice();
                            return e._free(a), { array: s, itemSize: 1 };
                          })(e, t, a)),
                        e.destroy(a),
                        u
                      );
                    })(t, r, new Int8Array(a), s),
                    l = o.attributes.map(function (e) {
                      return e.array.buffer;
                    });
                  o.index && l.push(o.index.array.buffer),
                    self.postMessage(
                      { type: "decode", id: i.id, geometry: o },
                      l
                    );
                } catch (e) {
                  console.error(e),
                    self.postMessage({
                      type: "error",
                      id: i.id,
                      error: e.message
                    });
                } finally {
                  t.destroy(r);
                }
              });
          }
        };
      }
      var Nm = function (e, t, n, r) {
        return new (n || (n = Promise))(function (i, a) {
          function s(e) {
            try {
              l(r.next(e));
            } catch (e) {
              a(e);
            }
          }
          function o(e) {
            try {
              l(r.throw(e));
            } catch (e) {
              a(e);
            }
          }
          function l(e) {
            var t;
            e.done
              ? i(e.value)
              : ((t = e.value),
                t instanceof n
                  ? t
                  : new n(function (e) {
                      e(t);
                    })).then(s, o);
          }
          l((r = r.apply(e, t || [])).next());
        });
      };
      function Bm(e) {
        return (
          (Bm =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          Bm(e)
        );
      }
      function Um(e, t) {
        var n = e.__state.conversionName.toString(),
          r = Math.round(e.r),
          i = Math.round(e.g),
          a = Math.round(e.b),
          s = e.a,
          o = Math.round(e.h),
          l = e.s.toFixed(1),
          h = e.v.toFixed(1);
        if (t || "THREE_CHAR_HEX" === n || "SIX_CHAR_HEX" === n) {
          for (var u = e.hex.toString(16); u.length < 6; ) u = "0" + u;
          return "#" + u;
        }
        return "CSS_RGB" === n
          ? "rgb(" + r + "," + i + "," + a + ")"
          : "CSS_RGBA" === n
          ? "rgba(" + r + "," + i + "," + a + "," + s + ")"
          : "HEX" === n
          ? "0x" + e.hex.toString(16)
          : "RGB_ARRAY" === n
          ? "[" + r + "," + i + "," + a + "]"
          : "RGBA_ARRAY" === n
          ? "[" + r + "," + i + "," + a + "," + s + "]"
          : "RGB_OBJ" === n
          ? "{r:" + r + ",g:" + i + ",b:" + a + "}"
          : "RGBA_OBJ" === n
          ? "{r:" + r + ",g:" + i + ",b:" + a + ",a:" + s + "}"
          : "HSV_OBJ" === n
          ? "{h:" + o + ",s:" + l + ",v:" + h + "}"
          : "HSVA_OBJ" === n
          ? "{h:" + o + ",s:" + l + ",v:" + h + ",a:" + s + "}"
          : "unknown format";
      }
      var zm = Array.prototype.forEach,
        Vm = Array.prototype.slice,
        Hm = {
          BREAK: {},
          extend: function (e) {
            return (
              this.each(
                Vm.call(arguments, 1),
                function (t) {
                  (this.isObject(t) ? Object.keys(t) : []).forEach(
                    function (n) {
                      this.isUndefined(t[n]) || (e[n] = t[n]);
                    }.bind(this)
                  );
                },
                this
              ),
              e
            );
          },
          defaults: function (e) {
            return (
              this.each(
                Vm.call(arguments, 1),
                function (t) {
                  (this.isObject(t) ? Object.keys(t) : []).forEach(
                    function (n) {
                      this.isUndefined(e[n]) && (e[n] = t[n]);
                    }.bind(this)
                  );
                },
                this
              ),
              e
            );
          },
          compose: function () {
            var e = Vm.call(arguments);
            return function () {
              for (var t = Vm.call(arguments), n = e.length - 1; n >= 0; n--)
                t = [e[n].apply(this, t)];
              return t[0];
            };
          },
          each: function (e, t, n) {
            if (e)
              if (zm && e.forEach && e.forEach === zm) e.forEach(t, n);
              else if (e.length === e.length + 0) {
                var r,
                  i = void 0;
                for (i = 0, r = e.length; i < r; i++)
                  if (i in e && t.call(n, e[i], i) === this.BREAK) return;
              } else
                for (var a in e) if (t.call(n, e[a], a) === this.BREAK) return;
          },
          defer: function (e) {
            setTimeout(e, 0);
          },
          debounce: function (e, t, n) {
            var r = void 0;
            return function () {
              var i = this,
                a = arguments;
              function s() {
                (r = null), n || e.apply(i, a);
              }
              var o = n || !r;
              clearTimeout(r), (r = setTimeout(s, t)), o && e.apply(i, a);
            };
          },
          toArray: function (e) {
            return e.toArray ? e.toArray() : Vm.call(e);
          },
          isUndefined: function (e) {
            return void 0 === e;
          },
          isNull: function (e) {
            return null === e;
          },
          isNaN: (function (e) {
            function t(t) {
              return e.apply(this, arguments);
            }
            return (
              (t.toString = function () {
                return e.toString();
              }),
              t
            );
          })(function (e) {
            return isNaN(e);
          }),
          isArray:
            Array.isArray ||
            function (e) {
              return e.constructor === Array;
            },
          isObject: function (e) {
            return e === Object(e);
          },
          isNumber: function (e) {
            return e === e + 0;
          },
          isString: function (e) {
            return e === e + "";
          },
          isBoolean: function (e) {
            return !1 === e || !0 === e;
          },
          isFunction: function (e) {
            return e instanceof Function;
          }
        },
        Gm = [
          {
            litmus: Hm.isString,
            conversions: {
              THREE_CHAR_HEX: {
                read: function (e) {
                  var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                  return (
                    null !== t && {
                      space: "HEX",
                      hex: parseInt(
                        "0x" +
                          t[1].toString() +
                          t[1].toString() +
                          t[2].toString() +
                          t[2].toString() +
                          t[3].toString() +
                          t[3].toString(),
                        0
                      )
                    }
                  );
                },
                write: Um
              },
              SIX_CHAR_HEX: {
                read: function (e) {
                  var t = e.match(/^#([A-F0-9]{6})$/i);
                  return (
                    null !== t && {
                      space: "HEX",
                      hex: parseInt("0x" + t[1].toString(), 0)
                    }
                  );
                },
                write: Um
              },
              CSS_RGB: {
                read: function (e) {
                  var t = e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);
                  return (
                    null !== t && {
                      space: "RGB",
                      r: parseFloat(t[1]),
                      g: parseFloat(t[2]),
                      b: parseFloat(t[3])
                    }
                  );
                },
                write: Um
              },
              CSS_RGBA: {
                read: function (e) {
                  var t = e.match(
                    /^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/
                  );
                  return (
                    null !== t && {
                      space: "RGB",
                      r: parseFloat(t[1]),
                      g: parseFloat(t[2]),
                      b: parseFloat(t[3]),
                      a: parseFloat(t[4])
                    }
                  );
                },
                write: Um
              }
            }
          },
          {
            litmus: Hm.isNumber,
            conversions: {
              HEX: {
                read: function (e) {
                  return { space: "HEX", hex: e, conversionName: "HEX" };
                },
                write: function (e) {
                  return e.hex;
                }
              }
            }
          },
          {
            litmus: Hm.isArray,
            conversions: {
              RGB_ARRAY: {
                read: function (e) {
                  return (
                    3 === e.length && { space: "RGB", r: e[0], g: e[1], b: e[2] }
                  );
                },
                write: function (e) {
                  return [e.r, e.g, e.b];
                }
              },
              RGBA_ARRAY: {
                read: function (e) {
                  return (
                    4 === e.length && {
                      space: "RGB",
                      r: e[0],
                      g: e[1],
                      b: e[2],
                      a: e[3]
                    }
                  );
                },
                write: function (e) {
                  return [e.r, e.g, e.b, e.a];
                }
              }
            }
          },
          {
            litmus: Hm.isObject,
            conversions: {
              RGBA_OBJ: {
                read: function (e) {
                  return (
                    !!(
                      Hm.isNumber(e.r) &&
                      Hm.isNumber(e.g) &&
                      Hm.isNumber(e.b) &&
                      Hm.isNumber(e.a)
                    ) && { space: "RGB", r: e.r, g: e.g, b: e.b, a: e.a }
                  );
                },
                write: function (e) {
                  return { r: e.r, g: e.g, b: e.b, a: e.a };
                }
              },
              RGB_OBJ: {
                read: function (e) {
                  return (
                    !!(
                      Hm.isNumber(e.r) &&
                      Hm.isNumber(e.g) &&
                      Hm.isNumber(e.b)
                    ) && { space: "RGB", r: e.r, g: e.g, b: e.b }
                  );
                },
                write: function (e) {
                  return { r: e.r, g: e.g, b: e.b };
                }
              },
              HSVA_OBJ: {
                read: function (e) {
                  return (
                    !!(
                      Hm.isNumber(e.h) &&
                      Hm.isNumber(e.s) &&
                      Hm.isNumber(e.v) &&
                      Hm.isNumber(e.a)
                    ) && { space: "HSV", h: e.h, s: e.s, v: e.v, a: e.a }
                  );
                },
                write: function (e) {
                  return { h: e.h, s: e.s, v: e.v, a: e.a };
                }
              },
              HSV_OBJ: {
                read: function (e) {
                  return (
                    !!(
                      Hm.isNumber(e.h) &&
                      Hm.isNumber(e.s) &&
                      Hm.isNumber(e.v)
                    ) && { space: "HSV", h: e.h, s: e.s, v: e.v }
                  );
                },
                write: function (e) {
                  return { h: e.h, s: e.s, v: e.v };
                }
              }
            }
          }
        ],
        Wm = void 0,
        jm = void 0,
        Xm = function () {
          jm = !1;
          var e = arguments.length > 1 ? Hm.toArray(arguments) : arguments[0];
          return (
            Hm.each(Gm, function (t) {
              if (t.litmus(e))
                return (
                  Hm.each(t.conversions, function (t, n) {
                    if (((Wm = t.read(e)), !1 === jm && !1 !== Wm))
                      return (
                        (jm = Wm),
                        (Wm.conversionName = n),
                        (Wm.conversion = t),
                        Hm.BREAK
                      );
                  }),
                  Hm.BREAK
                );
            }),
            jm
          );
        },
        qm = void 0,
        Ym = {
          hsv_to_rgb: function (e, t, n) {
            var r = Math.floor(e / 60) % 6,
              i = e / 60 - Math.floor(e / 60),
              a = n * (1 - t),
              s = n * (1 - i * t),
              o = n * (1 - (1 - i) * t),
              l = [
                [n, o, a],
                [s, n, a],
                [a, n, o],
                [a, s, n],
                [o, a, n],
                [n, a, s]
              ][r];
            return { r: 255 * l[0], g: 255 * l[1], b: 255 * l[2] };
          },
          rgb_to_hsv: function (e, t, n) {
            var r = Math.min(e, t, n),
              i = Math.max(e, t, n),
              a = i - r,
              s = void 0;
            return 0 === i
              ? { h: NaN, s: 0, v: 0 }
              : ((s =
                  e === i
                    ? (t - n) / a
                    : t === i
                    ? 2 + (n - e) / a
                    : 4 + (e - t) / a),
                (s /= 6) < 0 && (s += 1),
                { h: 360 * s, s: a / i, v: i / 255 });
          },
          rgb_to_hex: function (e, t, n) {
            var r = this.hex_with_component(0, 2, e);
            return (
              (r = this.hex_with_component(r, 1, t)),
              this.hex_with_component(r, 0, n)
            );
          },
          component_from_hex: function (e, t) {
            return (e >> (8 * t)) & 255;
          },
          hex_with_component: function (e, t, n) {
            return (n << (qm = 8 * t)) | (e & ~(255 << qm));
          }
        },
        Km =
          "function" == typeof Symbol && "symbol" === Bm(Symbol.iterator)
            ? function (e) {
                return Bm(e);
              }
            : function (e) {
                return e &&
                  "function" == typeof Symbol &&
                  e.constructor === Symbol &&
                  e !== Symbol.prototype
                  ? "symbol"
                  : Bm(e);
              },
        Zm = function (e, t) {
          if (!(e instanceof t))
            throw new TypeError("Cannot call a class as a function");
        },
        Jm = (function () {
          function e(e, t) {
            for (var n = 0; n < t.length; n++) {
              var r = t[n];
              (r.enumerable = r.enumerable || !1),
                (r.configurable = !0),
                "value" in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r);
            }
          }
          return function (t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
          };
        })(),
        $m = function e(t, n, r) {
          null === t && (t = Function.prototype);
          var i = Object.getOwnPropertyDescriptor(t, n);
          if (void 0 === i) {
            var a = Object.getPrototypeOf(t);
            return null === a ? void 0 : e(a, n, r);
          }
          if ("value" in i) return i.value;
          var s = i.get;
          return void 0 !== s ? s.call(r) : void 0;
        },
        Qm = function (e, t) {
          if ("function" != typeof t && null !== t)
            throw new TypeError(
              "Super expression must either be null or a function, not " + Bm(t)
            );
          (e.prototype = Object.create(t && t.prototype, {
            constructor: {
              value: e,
              enumerable: !1,
              writable: !0,
              configurable: !0
            }
          })),
            t &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(e, t)
                : (e.__proto__ = t));
        },
        eg = function (e, t) {
          if (!e)
            throw new ReferenceError(
              "this hasn't been initialised - super() hasn't been called"
            );
          return !t || ("object" !== Bm(t) && "function" != typeof t) ? e : t;
        },
        tg = (function () {
          function e() {
            if (
              (Zm(this, e),
              (this.__state = Xm.apply(this, arguments)),
              !1 === this.__state)
            )
              throw new Error("Failed to interpret color arguments");
            this.__state.a = this.__state.a || 1;
          }
          return (
            Jm(e, [
              {
                key: "toString",
                value: function () {
                  return Um(this);
                }
              },
              {
                key: "toHexString",
                value: function () {
                  return Um(this, !0);
                }
              },
              {
                key: "toOriginal",
                value: function () {
                  return this.__state.conversion.write(this);
                }
              }
            ]),
            e
          );
        })();
      function ng(e, t, n) {
        Object.defineProperty(e, t, {
          get: function () {
            return (
              "RGB" === this.__state.space || tg.recalculateRGB(this, t, n),
              this.__state[t]
            );
          },
          set: function (e) {
            "RGB" !== this.__state.space &&
              (tg.recalculateRGB(this, t, n), (this.__state.space = "RGB")),
              (this.__state[t] = e);
          }
        });
      }
      function rg(e, t) {
        Object.defineProperty(e, t, {
          get: function () {
            return (
              "HSV" === this.__state.space || tg.recalculateHSV(this),
              this.__state[t]
            );
          },
          set: function (e) {
            "HSV" !== this.__state.space &&
              (tg.recalculateHSV(this), (this.__state.space = "HSV")),
              (this.__state[t] = e);
          }
        });
      }
      (tg.recalculateRGB = function (e, t, n) {
        if ("HEX" === e.__state.space)
          e.__state[t] = Ym.component_from_hex(e.__state.hex, n);
        else {
          if ("HSV" !== e.__state.space) throw new Error("Corrupted color state");
          Hm.extend(
            e.__state,
            Ym.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v)
          );
        }
      }),
        (tg.recalculateHSV = function (e) {
          var t = Ym.rgb_to_hsv(e.r, e.g, e.b);
          Hm.extend(e.__state, { s: t.s, v: t.v }),
            Hm.isNaN(t.h)
              ? Hm.isUndefined(e.__state.h) && (e.__state.h = 0)
              : (e.__state.h = t.h);
        }),
        (tg.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"]),
        ng(tg.prototype, "r", 2),
        ng(tg.prototype, "g", 1),
        ng(tg.prototype, "b", 0),
        rg(tg.prototype, "h"),
        rg(tg.prototype, "s"),
        rg(tg.prototype, "v"),
        Object.defineProperty(tg.prototype, "a", {
          get: function () {
            return this.__state.a;
          },
          set: function (e) {
            this.__state.a = e;
          }
        }),
        Object.defineProperty(tg.prototype, "hex", {
          get: function () {
            return (
              "HEX" !== this.__state.space &&
                ((this.__state.hex = Ym.rgb_to_hex(this.r, this.g, this.b)),
                (this.__state.space = "HEX")),
              this.__state.hex
            );
          },
          set: function (e) {
            (this.__state.space = "HEX"), (this.__state.hex = e);
          }
        });
      var ig = (function () {
          function e(t, n) {
            Zm(this, e),
              (this.initialValue = t[n]),
              (this.domElement = document.createElement("div")),
              (this.object = t),
              (this.property = n),
              (this.__onChange = void 0),
              (this.__onFinishChange = void 0);
          }
          return (
            Jm(e, [
              {
                key: "onChange",
                value: function (e) {
                  return (this.__onChange = e), this;
                }
              },
              {
                key: "onFinishChange",
                value: function (e) {
                  return (this.__onFinishChange = e), this;
                }
              },
              {
                key: "setValue",
                value: function (e) {
                  return (
                    (this.object[this.property] = e),
                    this.__onChange && this.__onChange.call(this, e),
                    this.updateDisplay(),
                    this
                  );
                }
              },
              {
                key: "getValue",
                value: function () {
                  return this.object[this.property];
                }
              },
              {
                key: "updateDisplay",
                value: function () {
                  return this;
                }
              },
              {
                key: "isModified",
                value: function () {
                  return this.initialValue !== this.getValue();
                }
              }
            ]),
            e
          );
        })(),
        ag = {};
      Hm.each(
        {
          HTMLEvents: ["change"],
          MouseEvents: [
            "click",
            "mousemove",
            "mousedown",
            "mouseup",
            "mouseover"
          ],
          KeyboardEvents: ["keydown"]
        },
        function (e, t) {
          Hm.each(e, function (e) {
            ag[e] = t;
          });
        }
      );
      var sg = /(\d+(\.\d+)?)px/;
      function og(e) {
        if ("0" === e || Hm.isUndefined(e)) return 0;
        var t = e.match(sg);
        return Hm.isNull(t) ? 0 : parseFloat(t[1]);
      }
      var lg = {
          makeSelectable: function (e, t) {
            void 0 !== e &&
              void 0 !== e.style &&
              ((e.onselectstart = t
                ? function () {
                    return !1;
                  }
                : function () {}),
              (e.style.MozUserSelect = t ? "auto" : "none"),
              (e.style.KhtmlUserSelect = t ? "auto" : "none"),
              (e.unselectable = t ? "on" : "off"));
          },
          makeFullscreen: function (e, t, n) {
            var r = n,
              i = t;
            Hm.isUndefined(i) && (i = !0),
              Hm.isUndefined(r) && (r = !0),
              (e.style.position = "absolute"),
              i && ((e.style.left = 0), (e.style.right = 0)),
              r && ((e.style.top = 0), (e.style.bottom = 0));
          },
          fakeEvent: function (e, t, n, r) {
            var i = n || {},
              a = ag[t];
            if (!a) throw new Error("Event type " + t + " not supported.");
            var s = document.createEvent(a);
            switch (a) {
              case "MouseEvents":
                var o = i.x || i.clientX || 0,
                  l = i.y || i.clientY || 0;
                s.initMouseEvent(
                  t,
                  i.bubbles || !1,
                  i.cancelable || !0,
                  window,
                  i.clickCount || 1,
                  0,
                  0,
                  o,
                  l,
                  !1,
                  !1,
                  !1,
                  !1,
                  0,
                  null
                );
                break;
              case "KeyboardEvents":
                var h = s.initKeyboardEvent || s.initKeyEvent;
                Hm.defaults(i, {
                  cancelable: !0,
                  ctrlKey: !1,
                  altKey: !1,
                  shiftKey: !1,
                  metaKey: !1,
                  keyCode: void 0,
                  charCode: void 0
                }),
                  h(
                    t,
                    i.bubbles || !1,
                    i.cancelable,
                    window,
                    i.ctrlKey,
                    i.altKey,
                    i.shiftKey,
                    i.metaKey,
                    i.keyCode,
                    i.charCode
                  );
                break;
              default:
                s.initEvent(t, i.bubbles || !1, i.cancelable || !0);
            }
            Hm.defaults(s, r), e.dispatchEvent(s);
          },
          bind: function (e, t, n, r) {
            var i = r || !1;
            return (
              e.addEventListener
                ? e.addEventListener(t, n, i)
                : e.attachEvent && e.attachEvent("on" + t, n),
              lg
            );
          },
          unbind: function (e, t, n, r) {
            var i = r || !1;
            return (
              e.removeEventListener
                ? e.removeEventListener(t, n, i)
                : e.detachEvent && e.detachEvent("on" + t, n),
              lg
            );
          },
          addClass: function (e, t) {
            if (void 0 === e.className) e.className = t;
            else if (e.className !== t) {
              var n = e.className.split(/ +/);
              -1 === n.indexOf(t) &&
                (n.push(t),
                (e.className = n
                  .join(" ")
                  .replace(/^\s+/, "")
                  .replace(/\s+$/, "")));
            }
            return lg;
          },
          removeClass: function (e, t) {
            if (t) {
              if (e.className === t) e.removeAttribute("class");
              else {
                var n = e.className.split(/ +/),
                  r = n.indexOf(t);
                -1 !== r && (n.splice(r, 1), (e.className = n.join(" ")));
              }
            } else e.className = void 0;
            return lg;
          },
          hasClass: function (e, t) {
            return (
              new RegExp("(?:^|\\s+)" + t + "(?:\\s+|$)").test(e.className) || !1
            );
          },
          getWidth: function (e) {
            var t = getComputedStyle(e);
            return (
              og(t["border-left-width"]) +
              og(t["border-right-width"]) +
              og(t["padding-left"]) +
              og(t["padding-right"]) +
              og(t.width)
            );
          },
          getHeight: function (e) {
            var t = getComputedStyle(e);
            return (
              og(t["border-top-width"]) +
              og(t["border-bottom-width"]) +
              og(t["padding-top"]) +
              og(t["padding-bottom"]) +
              og(t.height)
            );
          },
          getOffset: function (e) {
            var t = e,
              n = { left: 0, top: 0 };
            if (t.offsetParent)
              do {
                (n.left += t.offsetLeft),
                  (n.top += t.offsetTop),
                  (t = t.offsetParent);
              } while (t);
            return n;
          },
          isActive: function (e) {
            return e === document.activeElement && (e.type || e.href);
          }
        },
        hg = (function (e) {
          function t(e, n) {
            Zm(this, t);
            var r = eg(
                this,
                (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)
              ),
              i = r;
            return (
              (r.__prev = r.getValue()),
              (r.__checkbox = document.createElement("input")),
              r.__checkbox.setAttribute("type", "checkbox"),
              lg.bind(
                r.__checkbox,
                "change",
                function () {
                  i.setValue(!i.__prev);
                },
                !1
              ),
              r.domElement.appendChild(r.__checkbox),
              r.updateDisplay(),
              r
            );
          }
          return (
            Qm(t, e),
            Jm(t, [
              {
                key: "setValue",
                value: function (e) {
                  var n = $m(
                    t.prototype.__proto__ || Object.getPrototypeOf(t.prototype),
                    "setValue",
                    this
                  ).call(this, e);
                  return (
                    this.__onFinishChange &&
                      this.__onFinishChange.call(this, this.getValue()),
                    (this.__prev = this.getValue()),
                    n
                  );
                }
              },
              {
                key: "updateDisplay",
                value: function () {
                  return (
                    !0 === this.getValue()
                      ? (this.__checkbox.setAttribute("checked", "checked"),
                        (this.__checkbox.checked = !0),
                        (this.__prev = !0))
                      : ((this.__checkbox.checked = !1), (this.__prev = !1)),
                    $m(
                      t.prototype.__proto__ || Object.getPrototypeOf(t.prototype),
                      "updateDisplay",
                      this
                    ).call(this)
                  );
                }
              }
            ]),
            t
          );
        })(ig),
        ug = (function (e) {
          function t(e, n, r) {
            Zm(this, t);
            var i = eg(
                this,
                (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)
              ),
              a = r,
              s = i;
            if (
              ((i.__select = document.createElement("select")), Hm.isArray(a))
            ) {
              var o = {};
              Hm.each(a, function (e) {
                o[e] = e;
              }),
                (a = o);
            }
            return (
              Hm.each(a, function (e, t) {
                var n = document.createElement("option");
                (n.innerHTML = t),
                  n.setAttribute("value", e),
                  s.__select.appendChild(n);
              }),
              i.updateDisplay(),
              lg.bind(i.__select, "change", function () {
                var e = this.options[this.selectedIndex].value;
                s.setValue(e);
              }),
              i.domElement.appendChild(i.__select),
              i
            );
          }
          return (
            Qm(t, e),
            Jm(t, [
              {
                key: "setValue",
                value: function (e) {
                  var n = $m(
                    t.prototype.__proto__ || Object.getPrototypeOf(t.prototype),
                    "setValue",
                    this
                  ).call(this, e);
                  return (
                    this.__onFinishChange &&
                      this.__onFinishChange.call(this, this.getValue()),
                    n
                  );
                }
              },
              {
                key: "updateDisplay",
                value: function () {
                  return lg.isActive(this.__select)
                    ? this
                    : ((this.__select.value = this.getValue()),
                      $m(
                        t.prototype.__proto__ ||
                          Object.getPrototypeOf(t.prototype),
                        "updateDisplay",
                        this
                      ).call(this));
                }
              }
            ]),
            t
          );
        })(ig),
        cg = (function (e) {
          function t(e, n) {
            Zm(this, t);
            var r = eg(
                this,
                (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)
              ),
              i = r;
            function a() {
              i.setValue(i.__input.value);
            }
            return (
              (r.__input = document.createElement("input")),
              r.__input.setAttribute("type", "text"),
              lg.bind(r.__input, "keyup", a),
              lg.bind(r.__input, "change", a),
              lg.bind(r.__input, "blur", function () {
                i.__onFinishChange && i.__onFinishChange.call(i, i.getValue());
              }),
              lg.bind(r.__input, "keydown", function (e) {
                13 === e.keyCode && this.blur();
              }),
              r.updateDisplay(),
              r.domElement.appendChild(r.__input),
              r
            );
          }
          return (
            Qm(t, e),
            Jm(t, [
              {
                key: "updateDisplay",
                value: function () {
                  return (
                    lg.isActive(this.__input) ||
                      (this.__input.value = this.getValue()),
                    $m(
                      t.prototype.__proto__ || Object.getPrototypeOf(t.prototype),
                      "updateDisplay",
                      this
                    ).call(this)
                  );
                }
              }
            ]),
            t
          );
        })(ig);
      function dg(e) {
        var t = e.toString();
        return t.indexOf(".") > -1 ? t.length - t.indexOf(".") - 1 : 0;
      }
      var fg = (function (e) {
          function t(e, n, r) {
            Zm(this, t);
            var i = eg(
                this,
                (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)
              ),
              a = r || {};
            return (
              (i.__min = a.min),
              (i.__max = a.max),
              (i.__step = a.step),
              Hm.isUndefined(i.__step)
                ? 0 === i.initialValue
                  ? (i.__impliedStep = 1)
                  : (i.__impliedStep =
                      Math.pow(
                        10,
                        Math.floor(Math.log(Math.abs(i.initialValue)) / Math.LN10)
                      ) / 10)
                : (i.__impliedStep = i.__step),
              (i.__precision = dg(i.__impliedStep)),
              i
            );
          }
          return (
            Qm(t, e),
            Jm(t, [
              {
                key: "setValue",
                value: function (e) {
                  var n = e;
                  return (
                    void 0 !== this.__min && n < this.__min
                      ? (n = this.__min)
                      : void 0 !== this.__max &&
                        n > this.__max &&
                        (n = this.__max),
                    void 0 !== this.__step &&
                      n % this.__step != 0 &&
                      (n = Math.round(n / this.__step) * this.__step),
                    $m(
                      t.prototype.__proto__ || Object.getPrototypeOf(t.prototype),
                      "setValue",
                      this
                    ).call(this, n)
                  );
                }
              },
              {
                key: "min",
                value: function (e) {
                  return (this.__min = e), this;
                }
              },
              {
                key: "max",
                value: function (e) {
                  return (this.__max = e), this;
                }
              },
              {
                key: "step",
                value: function (e) {
                  return (
                    (this.__step = e),
                    (this.__impliedStep = e),
                    (this.__precision = dg(e)),
                    this
                  );
                }
              }
            ]),
            t
          );
        })(ig),
        pg = (function (e) {
          function t(e, n, r) {
            Zm(this, t);
            var i = eg(
              this,
              (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n, r)
            );
            i.__truncationSuspended = !1;
            var a = i,
              s = void 0;
            function o() {
              a.__onFinishChange && a.__onFinishChange.call(a, a.getValue());
            }
            function l(e) {
              var t = s - e.clientY;
              a.setValue(a.getValue() + t * a.__impliedStep), (s = e.clientY);
            }
            function h() {
              lg.unbind(window, "mousemove", l),
                lg.unbind(window, "mouseup", h),
                o();
            }
            return (
              (i.__input = document.createElement("input")),
              i.__input.setAttribute("type", "text"),
              lg.bind(i.__input, "change", function () {
                var e = parseFloat(a.__input.value);
                Hm.isNaN(e) || a.setValue(e);
              }),
              lg.bind(i.__input, "blur", function () {
                o();
              }),
              lg.bind(i.__input, "mousedown", function (e) {
                lg.bind(window, "mousemove", l),
                  lg.bind(window, "mouseup", h),
                  (s = e.clientY);
              }),
              lg.bind(i.__input, "keydown", function (e) {
                13 === e.keyCode &&
                  ((a.__truncationSuspended = !0),
                  this.blur(),
                  (a.__truncationSuspended = !1),
                  o());
              }),
              i.updateDisplay(),
              i.domElement.appendChild(i.__input),
              i
            );
          }
          return (
            Qm(t, e),
            Jm(t, [
              {
                key: "updateDisplay",
                value: function () {
                  var e, n, r;
                  return (
                    (this.__input.value = this.__truncationSuspended
                      ? this.getValue()
                      : ((e = this.getValue()),
                        (n = this.__precision),
                        (r = Math.pow(10, n)),
                        Math.round(e * r) / r)),
                    $m(
                      t.prototype.__proto__ || Object.getPrototypeOf(t.prototype),
                      "updateDisplay",
                      this
                    ).call(this)
                  );
                }
              }
            ]),
            t
          );
        })(fg);
      function mg(e, t, n, r, i) {
        return r + ((e - t) / (n - t)) * (i - r);
      }
      var gg = (function (e) {
          function t(e, n, r, i, a) {
            Zm(this, t);
            var s = eg(
                this,
                (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n, {
                  min: r,
                  max: i,
                  step: a
                })
              ),
              o = s;
            function l(e) {
              e.preventDefault();
              var t = o.__background.getBoundingClientRect();
              return (
                o.setValue(mg(e.clientX, t.left, t.right, o.__min, o.__max)), !1
              );
            }
            function h() {
              lg.unbind(window, "mousemove", l),
                lg.unbind(window, "mouseup", h),
                o.__onFinishChange && o.__onFinishChange.call(o, o.getValue());
            }
            function u(e) {
              var t = e.touches[0].clientX,
                n = o.__background.getBoundingClientRect();
              o.setValue(mg(t, n.left, n.right, o.__min, o.__max));
            }
            function c() {
              lg.unbind(window, "touchmove", u),
                lg.unbind(window, "touchend", c),
                o.__onFinishChange && o.__onFinishChange.call(o, o.getValue());
            }
            return (
              (s.__background = document.createElement("div")),
              (s.__foreground = document.createElement("div")),
              lg.bind(s.__background, "mousedown", function (e) {
                document.activeElement.blur(),
                  lg.bind(window, "mousemove", l),
                  lg.bind(window, "mouseup", h),
                  l(e);
              }),
              lg.bind(s.__background, "touchstart", function (e) {
                1 === e.touches.length &&
                  (lg.bind(window, "touchmove", u),
                  lg.bind(window, "touchend", c),
                  u(e));
              }),
              lg.addClass(s.__background, "slider"),
              lg.addClass(s.__foreground, "slider-fg"),
              s.updateDisplay(),
              s.__background.appendChild(s.__foreground),
              s.domElement.appendChild(s.__background),
              s
            );
          }
          return (
            Qm(t, e),
            Jm(t, [
              {
                key: "updateDisplay",
                value: function () {
                  var e =
                    (this.getValue() - this.__min) / (this.__max - this.__min);
                  return (
                    (this.__foreground.style.width = 100 * e + "%"),
                    $m(
                      t.prototype.__proto__ || Object.getPrototypeOf(t.prototype),
                      "updateDisplay",
                      this
                    ).call(this)
                  );
                }
              }
            ]),
            t
          );
        })(fg),
        vg = (function (e) {
          function t(e, n, r) {
            Zm(this, t);
            var i = eg(
                this,
                (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)
              ),
              a = i;
            return (
              (i.__button = document.createElement("div")),
              (i.__button.innerHTML = void 0 === r ? "Fire" : r),
              lg.bind(i.__button, "click", function (e) {
                return e.preventDefault(), a.fire(), !1;
              }),
              lg.addClass(i.__button, "button"),
              i.domElement.appendChild(i.__button),
              i
            );
          }
          return (
            Qm(t, e),
            Jm(t, [
              {
                key: "fire",
                value: function () {
                  this.__onChange && this.__onChange.call(this),
                    this.getValue().call(this.object),
                    this.__onFinishChange &&
                      this.__onFinishChange.call(this, this.getValue());
                }
              }
            ]),
            t
          );
        })(ig),
        yg = (function (e) {
          function t(e, n) {
            Zm(this, t);
            var r = eg(
              this,
              (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)
            );
            (r.__color = new tg(r.getValue())), (r.__temp = new tg(0));
            var i = r;
            (r.domElement = document.createElement("div")),
              lg.makeSelectable(r.domElement, !1),
              (r.__selector = document.createElement("div")),
              (r.__selector.className = "selector"),
              (r.__saturation_field = document.createElement("div")),
              (r.__saturation_field.className = "saturation-field"),
              (r.__field_knob = document.createElement("div")),
              (r.__field_knob.className = "field-knob"),
              (r.__field_knob_border = "2px solid "),
              (r.__hue_knob = document.createElement("div")),
              (r.__hue_knob.className = "hue-knob"),
              (r.__hue_field = document.createElement("div")),
              (r.__hue_field.className = "hue-field"),
              (r.__input = document.createElement("input")),
              (r.__input.type = "text"),
              (r.__input_textShadow = "0 1px 1px "),
              lg.bind(r.__input, "keydown", function (e) {
                13 === e.keyCode && c.call(this);
              }),
              lg.bind(r.__input, "blur", c),
              lg.bind(r.__selector, "mousedown", function () {
                lg.addClass(this, "drag").bind(window, "mouseup", function () {
                  lg.removeClass(i.__selector, "drag");
                });
              }),
              lg.bind(r.__selector, "touchstart", function () {
                lg.addClass(this, "drag").bind(window, "touchend", function () {
                  lg.removeClass(i.__selector, "drag");
                });
              });
            var a,
              s = document.createElement("div");
            function o(e) {
              f(e),
                lg.bind(window, "mousemove", f),
                lg.bind(window, "touchmove", f),
                lg.bind(window, "mouseup", h),
                lg.bind(window, "touchend", h);
            }
            function l(e) {
              p(e),
                lg.bind(window, "mousemove", p),
                lg.bind(window, "touchmove", p),
                lg.bind(window, "mouseup", u),
                lg.bind(window, "touchend", u);
            }
            function h() {
              lg.unbind(window, "mousemove", f),
                lg.unbind(window, "touchmove", f),
                lg.unbind(window, "mouseup", h),
                lg.unbind(window, "touchend", h),
                d();
            }
            function u() {
              lg.unbind(window, "mousemove", p),
                lg.unbind(window, "touchmove", p),
                lg.unbind(window, "mouseup", u),
                lg.unbind(window, "touchend", u),
                d();
            }
            function c() {
              var e = Xm(this.value);
              !1 !== e
                ? ((i.__color.__state = e), i.setValue(i.__color.toOriginal()))
                : (this.value = i.__color.toString());
            }
            function d() {
              i.__onFinishChange &&
                i.__onFinishChange.call(i, i.__color.toOriginal());
            }
            function f(e) {
              -1 === e.type.indexOf("touch") && e.preventDefault();
              var t = i.__saturation_field.getBoundingClientRect(),
                n = (e.touches && e.touches[0]) || e,
                r = n.clientX,
                a = n.clientY,
                s = (r - t.left) / (t.right - t.left),
                o = 1 - (a - t.top) / (t.bottom - t.top);
              return (
                o > 1 ? (o = 1) : o < 0 && (o = 0),
                s > 1 ? (s = 1) : s < 0 && (s = 0),
                (i.__color.v = o),
                (i.__color.s = s),
                i.setValue(i.__color.toOriginal()),
                !1
              );
            }
            function p(e) {
              -1 === e.type.indexOf("touch") && e.preventDefault();
              var t = i.__hue_field.getBoundingClientRect(),
                n =
                  1 -
                  (((e.touches && e.touches[0]) || e).clientY - t.top) /
                    (t.bottom - t.top);
              return (
                n > 1 ? (n = 1) : n < 0 && (n = 0),
                (i.__color.h = 360 * n),
                i.setValue(i.__color.toOriginal()),
                !1
              );
            }
            return (
              Hm.extend(r.__selector.style, {
                width: "122px",
                height: "102px",
                padding: "3px",
                backgroundColor: "#222",
                boxShadow: "0px 1px 3px rgba(0,0,0,0.3)"
              }),
              Hm.extend(r.__field_knob.style, {
                position: "absolute",
                width: "12px",
                height: "12px",
                border:
                  r.__field_knob_border + (r.__color.v < 0.5 ? "#fff" : "#000"),
                boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                borderRadius: "12px",
                zIndex: 1
              }),
              Hm.extend(r.__hue_knob.style, {
                position: "absolute",
                width: "15px",
                height: "2px",
                borderRight: "4px solid #fff",
                zIndex: 1
              }),
              Hm.extend(r.__saturation_field.style, {
                width: "100px",
                height: "100px",
                border: "1px solid #555",
                marginRight: "3px",
                display: "inline-block",
                cursor: "pointer"
              }),
              Hm.extend(s.style, {
                width: "100%",
                height: "100%",
                background: "none"
              }),
              bg(s, "top", "rgba(0,0,0,0)", "#000"),
              Hm.extend(r.__hue_field.style, {
                width: "15px",
                height: "100px",
                border: "1px solid #555",
                cursor: "ns-resize",
                position: "absolute",
                top: "3px",
                right: "3px"
              }),
              ((a = r.__hue_field).style.background = ""),
              (a.style.cssText +=
                "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"),
              (a.style.cssText +=
                "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
              (a.style.cssText +=
                "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
              (a.style.cssText +=
                "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
              (a.style.cssText +=
                "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
              Hm.extend(r.__input.style, {
                outline: "none",
                textAlign: "center",
                color: "#fff",
                border: 0,
                fontWeight: "bold",
                textShadow: r.__input_textShadow + "rgba(0,0,0,0.7)"
              }),
              lg.bind(r.__saturation_field, "mousedown", o),
              lg.bind(r.__saturation_field, "touchstart", o),
              lg.bind(r.__field_knob, "mousedown", o),
              lg.bind(r.__field_knob, "touchstart", o),
              lg.bind(r.__hue_field, "mousedown", l),
              lg.bind(r.__hue_field, "touchstart", l),
              r.__saturation_field.appendChild(s),
              r.__selector.appendChild(r.__field_knob),
              r.__selector.appendChild(r.__saturation_field),
              r.__selector.appendChild(r.__hue_field),
              r.__hue_field.appendChild(r.__hue_knob),
              r.domElement.appendChild(r.__input),
              r.domElement.appendChild(r.__selector),
              r.updateDisplay(),
              r
            );
          }
          return (
            Qm(t, e),
            Jm(t, [
              {
                key: "updateDisplay",
                value: function () {
                  var e = Xm(this.getValue());
                  if (!1 !== e) {
                    var t = !1;
                    Hm.each(
                      tg.COMPONENTS,
                      function (n) {
                        if (
                          !Hm.isUndefined(e[n]) &&
                          !Hm.isUndefined(this.__color.__state[n]) &&
                          e[n] !== this.__color.__state[n]
                        )
                          return (t = !0), {};
                      },
                      this
                    ),
                      t && Hm.extend(this.__color.__state, e);
                  }
                  Hm.extend(this.__temp.__state, this.__color.__state),
                    (this.__temp.a = 1);
                  var n = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0,
                    r = 255 - n;
                  Hm.extend(this.__field_knob.style, {
                    marginLeft: 100 * this.__color.s - 7 + "px",
                    marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                    backgroundColor: this.__temp.toHexString(),
                    border:
                      this.__field_knob_border +
                      "rgb(" +
                      n +
                      "," +
                      n +
                      "," +
                      n +
                      ")"
                  }),
                    (this.__hue_knob.style.marginTop =
                      100 * (1 - this.__color.h / 360) + "px"),
                    (this.__temp.s = 1),
                    (this.__temp.v = 1),
                    bg(
                      this.__saturation_field,
                      "left",
                      "#fff",
                      this.__temp.toHexString()
                    ),
                    (this.__input.value = this.__color.toString()),
                    Hm.extend(this.__input.style, {
                      backgroundColor: this.__color.toHexString(),
                      color: "rgb(" + n + "," + n + "," + n + ")",
                      textShadow:
                        this.__input_textShadow +
                        "rgba(" +
                        r +
                        "," +
                        r +
                        "," +
                        r +
                        ",.7)"
                    });
                }
              }
            ]),
            t
          );
        })(ig),
        _g = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
      function bg(e, t, n, r) {
        (e.style.background = ""),
          Hm.each(_g, function (i) {
            e.style.cssText +=
              "background: " +
              i +
              "linear-gradient(" +
              t +
              ", " +
              n +
              " 0%, " +
              r +
              " 100%); ";
          });
      }
      var xg =
          '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',
        Sg = function (e, t) {
          var n = e[t];
          return Hm.isArray(arguments[2]) || Hm.isObject(arguments[2])
            ? new ug(e, t, arguments[2])
            : Hm.isNumber(n)
            ? Hm.isNumber(arguments[2]) && Hm.isNumber(arguments[3])
              ? Hm.isNumber(arguments[4])
                ? new gg(e, t, arguments[2], arguments[3], arguments[4])
                : new gg(e, t, arguments[2], arguments[3])
              : Hm.isNumber(arguments[4])
              ? new pg(e, t, {
                  min: arguments[2],
                  max: arguments[3],
                  step: arguments[4]
                })
              : new pg(e, t, { min: arguments[2], max: arguments[3] })
            : Hm.isString(n)
            ? new cg(e, t)
            : Hm.isFunction(n)
            ? new vg(e, t, "")
            : Hm.isBoolean(n)
            ? new hg(e, t)
            : null;
        },
        Eg =
          window.requestAnimationFrame ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame ||
          window.oRequestAnimationFrame ||
          window.msRequestAnimationFrame ||
          function (e) {
            setTimeout(e, 1e3 / 60);
          },
        wg = (function () {
          function e() {
            Zm(this, e),
              (this.backgroundElement = document.createElement("div")),
              Hm.extend(this.backgroundElement.style, {
                backgroundColor: "rgba(0,0,0,0.8)",
                top: 0,
                left: 0,
                display: "none",
                zIndex: "1000",
                opacity: 0,
                WebkitTransition: "opacity 0.2s linear",
                transition: "opacity 0.2s linear"
              }),
              lg.makeFullscreen(this.backgroundElement),
              (this.backgroundElement.style.position = "fixed"),
              (this.domElement = document.createElement("div")),
              Hm.extend(this.domElement.style, {
                position: "fixed",
                display: "none",
                zIndex: "1001",
                opacity: 0,
                WebkitTransition:
                  "-webkit-transform 0.2s ease-out, opacity 0.2s linear",
                transition: "transform 0.2s ease-out, opacity 0.2s linear"
              }),
              document.body.appendChild(this.backgroundElement),
              document.body.appendChild(this.domElement);
            var t = this;
            lg.bind(this.backgroundElement, "click", function () {
              t.hide();
            });
          }
          return (
            Jm(e, [
              {
                key: "show",
                value: function () {
                  var e = this;
                  (this.backgroundElement.style.display = "block"),
                    (this.domElement.style.display = "block"),
                    (this.domElement.style.opacity = 0),
                    (this.domElement.style.webkitTransform = "scale(1.1)"),
                    this.layout(),
                    Hm.defer(function () {
                      (e.backgroundElement.style.opacity = 1),
                        (e.domElement.style.opacity = 1),
                        (e.domElement.style.webkitTransform = "scale(1)");
                    });
                }
              },
              {
                key: "hide",
                value: function () {
                  var e = this,
                    t = function t() {
                      (e.domElement.style.display = "none"),
                        (e.backgroundElement.style.display = "none"),
                        lg.unbind(e.domElement, "webkitTransitionEnd", t),
                        lg.unbind(e.domElement, "transitionend", t),
                        lg.unbind(e.domElement, "oTransitionEnd", t);
                    };
                  lg.bind(this.domElement, "webkitTransitionEnd", t),
                    lg.bind(this.domElement, "transitionend", t),
                    lg.bind(this.domElement, "oTransitionEnd", t),
                    (this.backgroundElement.style.opacity = 0),
                    (this.domElement.style.opacity = 0),
                    (this.domElement.style.webkitTransform = "scale(1.1)");
                }
              },
              {
                key: "layout",
                value: function () {
                  (this.domElement.style.left =
                    window.innerWidth / 2 -
                    lg.getWidth(this.domElement) / 2 +
                    "px"),
                    (this.domElement.style.top =
                      window.innerHeight / 2 -
                      lg.getHeight(this.domElement) / 2 +
                      "px");
                }
              }
            ]),
            e
          );
        })();
      !(function (e, t) {
        var n = t || document,
          r = document.createElement("style");
        (r.type = "text/css"), (r.innerHTML = e);
        var i = n.getElementsByTagName("head")[0];
        try {
          i.appendChild(r);
        } catch (e) {}
      })(
        (function (e) {
          if ("undefined" != typeof window) {
            var t = document.createElement("style");
            return (
              t.setAttribute("type", "text/css"),
              (t.innerHTML = e),
              document.head.appendChild(t),
              e
            );
          }
        })(
          ".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"
        )
      );
      var Tg = "Default",
        Mg = (function () {
          try {
            return !!window.localStorage;
          } catch (e) {
            return !1;
          }
        })(),
        Ag = void 0,
        Cg = !0,
        Pg = void 0,
        kg = !1,
        Rg = [],
        Dg = function e(t) {
          var n = this,
            r = t || {};
          (this.domElement = document.createElement("div")),
            (this.__ul = document.createElement("ul")),
            this.domElement.appendChild(this.__ul),
            lg.addClass(this.domElement, "dg"),
            (this.__folders = {}),
            (this.__controllers = []),
            (this.__rememberedObjects = []),
            (this.__rememberedObjectIndecesToControllers = []),
            (this.__listening = []),
            (r = Hm.defaults(r, {
              closeOnTop: !1,
              autoPlace: !0,
              width: e.DEFAULT_WIDTH
            })),
            (r = Hm.defaults(r, {
              resizable: r.autoPlace,
              hideable: r.autoPlace
            })),
            Hm.isUndefined(r.load)
              ? (r.load = { preset: Tg })
              : r.preset && (r.load.preset = r.preset),
            Hm.isUndefined(r.parent) && r.hideable && Rg.push(this),
            (r.resizable = Hm.isUndefined(r.parent) && r.resizable),
            r.autoPlace && Hm.isUndefined(r.scrollable) && (r.scrollable = !0);
          var i,
            a = Mg && "true" === localStorage.getItem(Bg(0, "isLocal")),
            s = void 0,
            o = void 0;
          if (
            (Object.defineProperties(this, {
              parent: {
                get: function () {
                  return r.parent;
                }
              },
              scrollable: {
                get: function () {
                  return r.scrollable;
                }
              },
              autoPlace: {
                get: function () {
                  return r.autoPlace;
                }
              },
              closeOnTop: {
                get: function () {
                  return r.closeOnTop;
                }
              },
              preset: {
                get: function () {
                  return n.parent ? n.getRoot().preset : r.load.preset;
                },
                set: function (e) {
                  n.parent ? (n.getRoot().preset = e) : (r.load.preset = e),
                    (function (e) {
                      for (var t = 0; t < e.__preset_select.length; t++)
                        e.__preset_select[t].value === e.preset &&
                          (e.__preset_select.selectedIndex = t);
                    })(this),
                    n.revert();
                }
              },
              width: {
                get: function () {
                  return r.width;
                },
                set: function (e) {
                  (r.width = e), Gg(n, e);
                }
              },
              name: {
                get: function () {
                  return r.name;
                },
                set: function (e) {
                  (r.name = e), o && (o.innerHTML = r.name);
                }
              },
              closed: {
                get: function () {
                  return r.closed;
                },
                set: function (t) {
                  (r.closed = t),
                    r.closed
                      ? lg.addClass(n.__ul, e.CLASS_CLOSED)
                      : lg.removeClass(n.__ul, e.CLASS_CLOSED),
                    this.onResize(),
                    n.__closeButton &&
                      (n.__closeButton.innerHTML = t
                        ? e.TEXT_OPEN
                        : e.TEXT_CLOSED);
                }
              },
              load: {
                get: function () {
                  return r.load;
                }
              },
              useLocalStorage: {
                get: function () {
                  return a;
                },
                set: function (e) {
                  Mg &&
                    ((a = e),
                    e
                      ? lg.bind(window, "unload", s)
                      : lg.unbind(window, "unload", s),
                    localStorage.setItem(Bg(0, "isLocal"), e));
                }
              }
            }),
            Hm.isUndefined(r.parent))
          ) {
            if (
              ((this.closed = r.closed || !1),
              lg.addClass(this.domElement, e.CLASS_MAIN),
              lg.makeSelectable(this.domElement, !1),
              Mg && a)
            ) {
              n.useLocalStorage = !0;
              var l = localStorage.getItem(Bg(0, "gui"));
              l && (r.load = JSON.parse(l));
            }
            (this.__closeButton = document.createElement("div")),
              (this.__closeButton.innerHTML = e.TEXT_CLOSED),
              lg.addClass(this.__closeButton, e.CLASS_CLOSE_BUTTON),
              r.closeOnTop
                ? (lg.addClass(this.__closeButton, e.CLASS_CLOSE_TOP),
                  this.domElement.insertBefore(
                    this.__closeButton,
                    this.domElement.childNodes[0]
                  ))
                : (lg.addClass(this.__closeButton, e.CLASS_CLOSE_BOTTOM),
                  this.domElement.appendChild(this.__closeButton)),
              lg.bind(this.__closeButton, "click", function () {
                n.closed = !n.closed;
              });
          } else {
            void 0 === r.closed && (r.closed = !0);
            var h = document.createTextNode(r.name);
            lg.addClass(h, "controller-name"),
              (o = Ig(n, h)),
              lg.addClass(this.__ul, e.CLASS_CLOSED),
              lg.addClass(o, "title"),
              lg.bind(o, "click", function (e) {
                return e.preventDefault(), (n.closed = !n.closed), !1;
              }),
              r.closed || (this.closed = !1);
          }
          r.autoPlace &&
            (Hm.isUndefined(r.parent) &&
              (Cg &&
                ((Pg = document.createElement("div")),
                lg.addClass(Pg, "dg"),
                lg.addClass(Pg, e.CLASS_AUTO_PLACE_CONTAINER),
                document.body.appendChild(Pg),
                (Cg = !1)),
              Pg.appendChild(this.domElement),
              lg.addClass(this.domElement, e.CLASS_AUTO_PLACE)),
            this.parent || Gg(n, r.width)),
            (this.__resizeHandler = function () {
              n.onResizeDebounced();
            }),
            lg.bind(window, "resize", this.__resizeHandler),
            lg.bind(this.__ul, "webkitTransitionEnd", this.__resizeHandler),
            lg.bind(this.__ul, "transitionend", this.__resizeHandler),
            lg.bind(this.__ul, "oTransitionEnd", this.__resizeHandler),
            this.onResize(),
            r.resizable && Hg(this),
            (s = function () {
              Mg &&
                "true" === localStorage.getItem(Bg(0, "isLocal")) &&
                localStorage.setItem(
                  Bg(0, "gui"),
                  JSON.stringify(n.getSaveObject())
                );
            }),
            (this.saveToLocalStorageIfPossible = s),
            r.parent ||
              (((i = n.getRoot()).width += 1),
              Hm.defer(function () {
                i.width -= 1;
              }));
        };
      function Ig(e, t, n) {
        var r = document.createElement("li");
        return (
          t && r.appendChild(t),
          n ? e.__ul.insertBefore(r, n) : e.__ul.appendChild(r),
          e.onResize(),
          r
        );
      }
      function Lg(e) {
        lg.unbind(window, "resize", e.__resizeHandler),
          e.saveToLocalStorageIfPossible &&
            lg.unbind(window, "unload", e.saveToLocalStorageIfPossible);
      }
      function Fg(e, t) {
        var n = e.__preset_select[e.__preset_select.selectedIndex];
        n.innerHTML = t ? n.value + "*" : n.value;
      }
      function Og(e, t) {
        var n = e.getRoot(),
          r = n.__rememberedObjects.indexOf(t.object);
        if (-1 !== r) {
          var i = n.__rememberedObjectIndecesToControllers[r];
          if (
            (void 0 === i &&
              ((i = {}), (n.__rememberedObjectIndecesToControllers[r] = i)),
            (i[t.property] = t),
            n.load && n.load.remembered)
          ) {
            var a = n.load.remembered,
              s = void 0;
            if (a[e.preset]) s = a[e.preset];
            else {
              if (!a.Default) return;
              s = a.Default;
            }
            if (s[r] && void 0 !== s[r][t.property]) {
              var o = s[r][t.property];
              (t.initialValue = o), t.setValue(o);
            }
          }
        }
      }
      function Ng(e, t, n, r) {
        if (void 0 === t[n])
          throw new Error('Object "' + t + '" has no property "' + n + '"');
        var i = void 0;
        if (r.color) i = new yg(t, n);
        else {
          var a = [t, n].concat(r.factoryArgs);
          i = Sg.apply(e, a);
        }
        r.before instanceof ig && (r.before = r.before.__li),
          Og(e, i),
          lg.addClass(i.domElement, "c");
        var s = document.createElement("span");
        lg.addClass(s, "property-name"), (s.innerHTML = i.property);
        var o = document.createElement("div");
        o.appendChild(s), o.appendChild(i.domElement);
        var l = Ig(e, o, r.before);
        return (
          lg.addClass(l, Dg.CLASS_CONTROLLER_ROW),
          i instanceof yg
            ? lg.addClass(l, "color")
            : lg.addClass(l, Km(i.getValue())),
          (function (e, t, n) {
            if (
              ((n.__li = t),
              (n.__gui = e),
              Hm.extend(n, {
                options: function (t) {
                  if (arguments.length > 1) {
                    var r = n.__li.nextElementSibling;
                    return (
                      n.remove(),
                      Ng(e, n.object, n.property, {
                        before: r,
                        factoryArgs: [Hm.toArray(arguments)]
                      })
                    );
                  }
                  if (Hm.isArray(t) || Hm.isObject(t)) {
                    var i = n.__li.nextElementSibling;
                    return (
                      n.remove(),
                      Ng(e, n.object, n.property, { before: i, factoryArgs: [t] })
                    );
                  }
                },
                name: function (e) {
                  return (
                    (n.__li.firstElementChild.firstElementChild.innerHTML = e), n
                  );
                },
                listen: function () {
                  return n.__gui.listen(n), n;
                },
                remove: function () {
                  return n.__gui.remove(n), n;
                }
              }),
              n instanceof gg)
            ) {
              var r = new pg(n.object, n.property, {
                min: n.__min,
                max: n.__max,
                step: n.__step
              });
              Hm.each(
                [
                  "updateDisplay",
                  "onChange",
                  "onFinishChange",
                  "step",
                  "min",
                  "max"
                ],
                function (e) {
                  var t = n[e],
                    i = r[e];
                  n[e] = r[e] = function () {
                    var e = Array.prototype.slice.call(arguments);
                    return i.apply(r, e), t.apply(n, e);
                  };
                }
              ),
                lg.addClass(t, "has-slider"),
                n.domElement.insertBefore(
                  r.domElement,
                  n.domElement.firstElementChild
                );
            } else if (n instanceof pg) {
              var i = function (t) {
                if (Hm.isNumber(n.__min) && Hm.isNumber(n.__max)) {
                  var r = n.__li.firstElementChild.firstElementChild.innerHTML,
                    i = n.__gui.__listening.indexOf(n) > -1;
                  n.remove();
                  var a = Ng(e, n.object, n.property, {
                    before: n.__li.nextElementSibling,
                    factoryArgs: [n.__min, n.__max, n.__step]
                  });
                  return a.name(r), i && a.listen(), a;
                }
                return t;
              };
              (n.min = Hm.compose(i, n.min)), (n.max = Hm.compose(i, n.max));
            } else
              n instanceof hg
                ? (lg.bind(t, "click", function () {
                    lg.fakeEvent(n.__checkbox, "click");
                  }),
                  lg.bind(n.__checkbox, "click", function (e) {
                    e.stopPropagation();
                  }))
                : n instanceof vg
                ? (lg.bind(t, "click", function () {
                    lg.fakeEvent(n.__button, "click");
                  }),
                  lg.bind(t, "mouseover", function () {
                    lg.addClass(n.__button, "hover");
                  }),
                  lg.bind(t, "mouseout", function () {
                    lg.removeClass(n.__button, "hover");
                  }))
                : n instanceof yg &&
                  (lg.addClass(t, "color"),
                  (n.updateDisplay = Hm.compose(function (e) {
                    return (t.style.borderLeftColor = n.__color.toString()), e;
                  }, n.updateDisplay)),
                  n.updateDisplay());
            n.setValue = Hm.compose(function (t) {
              return (
                e.getRoot().__preset_select &&
                  n.isModified() &&
                  Fg(e.getRoot(), !0),
                t
              );
            }, n.setValue);
          })(e, l, i),
          e.__controllers.push(i),
          i
        );
      }
      function Bg(e, t) {
        return document.location.href + "." + t;
      }
      function Ug(e, t, n) {
        var r = document.createElement("option");
        (r.innerHTML = t),
          (r.value = t),
          e.__preset_select.appendChild(r),
          n && (e.__preset_select.selectedIndex = e.__preset_select.length - 1);
      }
      function zg(e, t) {
        t.style.display = e.useLocalStorage ? "block" : "none";
      }
      function Vg(e) {
        var t = (e.__save_row = document.createElement("li"));
        lg.addClass(e.domElement, "has-save"),
          e.__ul.insertBefore(t, e.__ul.firstChild),
          lg.addClass(t, "save-row");
        var n = document.createElement("span");
        (n.innerHTML = "&nbsp;"), lg.addClass(n, "button gears");
        var r = document.createElement("span");
        (r.innerHTML = "Save"), lg.addClass(r, "button"), lg.addClass(r, "save");
        var i = document.createElement("span");
        (i.innerHTML = "New"),
          lg.addClass(i, "button"),
          lg.addClass(i, "save-as");
        var a = document.createElement("span");
        (a.innerHTML = "Revert"),
          lg.addClass(a, "button"),
          lg.addClass(a, "revert");
        var s = (e.__preset_select = document.createElement("select"));
        if (
          (e.load && e.load.remembered
            ? Hm.each(e.load.remembered, function (t, n) {
                Ug(e, n, n === e.preset);
              })
            : Ug(e, Tg, !1),
          lg.bind(s, "change", function () {
            for (var t = 0; t < e.__preset_select.length; t++)
              e.__preset_select[t].innerHTML = e.__preset_select[t].value;
            e.preset = this.value;
          }),
          t.appendChild(s),
          t.appendChild(n),
          t.appendChild(r),
          t.appendChild(i),
          t.appendChild(a),
          Mg)
        ) {
          var o = document.getElementById("dg-local-explain"),
            l = document.getElementById("dg-local-storage");
          (document.getElementById("dg-save-locally").style.display = "block"),
            "true" === localStorage.getItem(Bg(0, "isLocal")) &&
              l.setAttribute("checked", "checked"),
            zg(e, o),
            lg.bind(l, "change", function () {
              (e.useLocalStorage = !e.useLocalStorage), zg(e, o);
            });
        }
        var h = document.getElementById("dg-new-constructor");
        lg.bind(h, "keydown", function (e) {
          !e.metaKey || (67 !== e.which && 67 !== e.keyCode) || Ag.hide();
        }),
          lg.bind(n, "click", function () {
            (h.innerHTML = JSON.stringify(e.getSaveObject(), void 0, 2)),
              Ag.show(),
              h.focus(),
              h.select();
          }),
          lg.bind(r, "click", function () {
            e.save();
          }),
          lg.bind(i, "click", function () {
            var t = prompt("Enter a new preset name.");
            t && e.saveAs(t);
          }),
          lg.bind(a, "click", function () {
            e.revert();
          });
      }
      function Hg(e) {
        var t = void 0;
        function n(n) {
          return (
            n.preventDefault(),
            (e.width += t - n.clientX),
            e.onResize(),
            (t = n.clientX),
            !1
          );
        }
        function r() {
          lg.removeClass(e.__closeButton, Dg.CLASS_DRAG),
            lg.unbind(window, "mousemove", n),
            lg.unbind(window, "mouseup", r);
        }
        function i(i) {
          return (
            i.preventDefault(),
            (t = i.clientX),
            lg.addClass(e.__closeButton, Dg.CLASS_DRAG),
            lg.bind(window, "mousemove", n),
            lg.bind(window, "mouseup", r),
            !1
          );
        }
        (e.__resize_handle = document.createElement("div")),
          Hm.extend(e.__resize_handle.style, {
            width: "6px",
            marginLeft: "-3px",
            height: "200px",
            cursor: "ew-resize",
            position: "absolute"
          }),
          lg.bind(e.__resize_handle, "mousedown", i),
          lg.bind(e.__closeButton, "mousedown", i),
          e.domElement.insertBefore(
            e.__resize_handle,
            e.domElement.firstElementChild
          );
      }
      function Gg(e, t) {
        (e.domElement.style.width = t + "px"),
          e.__save_row && e.autoPlace && (e.__save_row.style.width = t + "px"),
          e.__closeButton && (e.__closeButton.style.width = t + "px");
      }
      function Wg(e, t) {
        var n = {};
        return (
          Hm.each(e.__rememberedObjects, function (r, i) {
            var a = {},
              s = e.__rememberedObjectIndecesToControllers[i];
            Hm.each(s, function (e, n) {
              a[n] = t ? e.initialValue : e.getValue();
            }),
              (n[i] = a);
          }),
          n
        );
      }
      function jg(e) {
        0 !== e.length &&
          Eg.call(window, function () {
            jg(e);
          }),
          Hm.each(e, function (e) {
            e.updateDisplay();
          });
      }
      (Dg.toggleHide = function () {
        (kg = !kg),
          Hm.each(Rg, function (e) {
            e.domElement.style.display = kg ? "none" : "";
          });
      }),
        (Dg.CLASS_AUTO_PLACE = "a"),
        (Dg.CLASS_AUTO_PLACE_CONTAINER = "ac"),
        (Dg.CLASS_MAIN = "main"),
        (Dg.CLASS_CONTROLLER_ROW = "cr"),
        (Dg.CLASS_TOO_TALL = "taller-than-window"),
        (Dg.CLASS_CLOSED = "closed"),
        (Dg.CLASS_CLOSE_BUTTON = "close-button"),
        (Dg.CLASS_CLOSE_TOP = "close-top"),
        (Dg.CLASS_CLOSE_BOTTOM = "close-bottom"),
        (Dg.CLASS_DRAG = "drag"),
        (Dg.DEFAULT_WIDTH = 245),
        (Dg.TEXT_CLOSED = "Close Controls"),
        (Dg.TEXT_OPEN = "Open Controls"),
        (Dg._keydownHandler = function (e) {
          "text" === document.activeElement.type ||
            (72 !== e.which && 72 !== e.keyCode) ||
            Dg.toggleHide();
        }),
        lg.bind(window, "keydown", Dg._keydownHandler, !1),
        Hm.extend(Dg.prototype, {
          add: function (e, t) {
            return Ng(this, e, t, {
              factoryArgs: Array.prototype.slice.call(arguments, 2)
            });
          },
          addColor: function (e, t) {
            return Ng(this, e, t, { color: !0 });
          },
          remove: function (e) {
            this.__ul.removeChild(e.__li),
              this.__controllers.splice(this.__controllers.indexOf(e), 1);
            var t = this;
            Hm.defer(function () {
              t.onResize();
            });
          },
          destroy: function () {
            if (this.parent)
              throw new Error(
                "Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead."
              );
            this.autoPlace && Pg.removeChild(this.domElement);
            var e = this;
            Hm.each(this.__folders, function (t) {
              e.removeFolder(t);
            }),
              lg.unbind(window, "keydown", Dg._keydownHandler, !1),
              Lg(this);
          },
          addFolder: function (e) {
            if (void 0 !== this.__folders[e])
              throw new Error(
                'You already have a folder in this GUI by the name "' + e + '"'
              );
            var t = { name: e, parent: this };
            (t.autoPlace = this.autoPlace),
              this.load &&
                this.load.folders &&
                this.load.folders[e] &&
                ((t.closed = this.load.folders[e].closed),
                (t.load = this.load.folders[e]));
            var n = new Dg(t);
            this.__folders[e] = n;
            var r = Ig(this, n.domElement);
            return lg.addClass(r, "folder"), n;
          },
          removeFolder: function (e) {
            this.__ul.removeChild(e.domElement.parentElement),
              delete this.__folders[e.name],
              this.load &&
                this.load.folders &&
                this.load.folders[e.name] &&
                delete this.load.folders[e.name],
              Lg(e);
            var t = this;
            Hm.each(e.__folders, function (t) {
              e.removeFolder(t);
            }),
              Hm.defer(function () {
                t.onResize();
              });
          },
          open: function () {
            this.closed = !1;
          },
          close: function () {
            this.closed = !0;
          },
          hide: function () {
            this.domElement.style.display = "none";
          },
          show: function () {
            this.domElement.style.display = "";
          },
          onResize: function () {
            var e = this.getRoot();
            if (e.scrollable) {
              var t = lg.getOffset(e.__ul).top,
                n = 0;
              Hm.each(e.__ul.childNodes, function (t) {
                (e.autoPlace && t === e.__save_row) || (n += lg.getHeight(t));
              }),
                window.innerHeight - t - 20 < n
                  ? (lg.addClass(e.domElement, Dg.CLASS_TOO_TALL),
                    (e.__ul.style.height = window.innerHeight - t - 20 + "px"))
                  : (lg.removeClass(e.domElement, Dg.CLASS_TOO_TALL),
                    (e.__ul.style.height = "auto"));
            }
            e.__resize_handle &&
              Hm.defer(function () {
                e.__resize_handle.style.height = e.__ul.offsetHeight + "px";
              }),
              e.__closeButton && (e.__closeButton.style.width = e.width + "px");
          },
          onResizeDebounced: Hm.debounce(function () {
            this.onResize();
          }, 50),
          remember: function () {
            if (
              (Hm.isUndefined(Ag) && ((Ag = new wg()).domElement.innerHTML = xg),
              this.parent)
            )
              throw new Error("You can only call remember on a top level GUI.");
            var e = this;
            Hm.each(Array.prototype.slice.call(arguments), function (t) {
              0 === e.__rememberedObjects.length && Vg(e),
                -1 === e.__rememberedObjects.indexOf(t) &&
                  e.__rememberedObjects.push(t);
            }),
              this.autoPlace && Gg(this, this.width);
          },
          getRoot: function () {
            for (var e = this; e.parent; ) e = e.parent;
            return e;
          },
          getSaveObject: function () {
            var e = this.load;
            return (
              (e.closed = this.closed),
              this.__rememberedObjects.length > 0 &&
                ((e.preset = this.preset),
                e.remembered || (e.remembered = {}),
                (e.remembered[this.preset] = Wg(this))),
              (e.folders = {}),
              Hm.each(this.__folders, function (t, n) {
                e.folders[n] = t.getSaveObject();
              }),
              e
            );
          },
          save: function () {
            this.load.remembered || (this.load.remembered = {}),
              (this.load.remembered[this.preset] = Wg(this)),
              Fg(this, !1),
              this.saveToLocalStorageIfPossible();
          },
          saveAs: function (e) {
            this.load.remembered ||
              ((this.load.remembered = {}),
              (this.load.remembered.Default = Wg(this, !0))),
              (this.load.remembered[e] = Wg(this)),
              (this.preset = e),
              Ug(this, e, !0),
              this.saveToLocalStorageIfPossible();
          },
          revert: function (e) {
            Hm.each(
              this.__controllers,
              function (t) {
                this.getRoot().load.remembered
                  ? Og(e || this.getRoot(), t)
                  : t.setValue(t.initialValue),
                  t.__onFinishChange && t.__onFinishChange.call(t, t.getValue());
              },
              this
            ),
              Hm.each(this.__folders, function (e) {
                e.revert(e);
              }),
              e || Fg(this.getRoot(), !1);
          },
          listen: function (e) {
            var t = 0 === this.__listening.length;
            this.__listening.push(e), t && jg(this.__listening);
          },
          updateDisplay: function () {
            Hm.each(this.__controllers, function (e) {
              e.updateDisplay();
            }),
              Hm.each(this.__folders, function (e) {
                e.updateDisplay();
              });
          }
        });
      var Xg = Dg;
      class qg {
        constructor() {
          (this.refPivotCamera = {//cameraposition
            position: { x: -0.61, y: 0.18, z: 2.92 },
            rotation: { x: 0, y: 0 },
            distance: { value: 6 },
            twist: { value: 0 }
          }),
            (this.refScreenAccessPointReduce = { position: new to() }),
            (this.refScreenAccessPointCalculate = { position: new to() }),
            (this.refScreenAccessPointOffset = { position: new to() }),
            (this.refScreenAccessPointContribute = { position: new to() }),
            (this.refScreenAccessPointPersonal = { position: new to() }),
            (this.ref3DAccessPointReduce = new rl()),
            (this.ref3DAccessPointCalculate = new rl()),
            (this.ref3DAccessPointOffset = new rl()),
            (this.ref3DAccessPointContribute = new rl()),
            (this.ref3DAccessPointPersonal = new rl()),
            (this.refWindmills = []),
            (this.camera = new ch(30, 1, 0.01, 1e3)),
            (this.refLimits = { fps: 40, size: 1980 }),
            (this.onResize = ({ devicePixelRatio: e, width: t, height: n }) => {
              if (!this.initializedInstances) return;
              const { normalizedWidth: r, normalizedHeight: i } = (() => {
                  const e = Math.max(t, n);
                  if (e <= this.refLimits.size)
                    return { normalizedWidth: t, normalizedHeight: n };
                  const r = this.refLimits.size / e;
                  return { normalizedWidth: t * r, normalizedHeight: n * r };
                })(),
                { renderer: a } = this.initializedInstances;
              a.setSize(r, i, !1),
                (this.camera.aspect = t / n),
                this.camera.updateProjectionMatrix();
            }),
            (this.onRender = (e) => {});
        }
        initialize(e) {
          return (
            (t = this),
            (n = void 0),
            (i = function* () {
              const t = new to(-0.61, 0.18, 2.92),
                n = new Cs(30, 20);
              (this.refPivotCamera.position = t),
                (this.refPivotCamera.rotation = n),
                (this.refPivotCamera.distance = {
                  value: document.location.search.startsWith("?")
                    ? document.location.search
                        .substring(1)
                        .split("&")
                        .reduce((e, t) => {
                          const [n, r] = t.split("=");
                          return "d" === n ? parseFloat(r) : e;
                        }, 3)
                    : 3
                }),
                (this.refPivotCamera.twist = { value: 0 });
              const r = () => {
                  const e = Sm(
                    {
                      distance: this.refPivotCamera.distance.value,
                      angleX: n.x,
                      angleY: n.y
                    },
                    new to()
                  );
                  this.camera.position.copy(t).add(e);
                  const r = new to(0, 1, 0),
                    i = new eo();
                  i.setFromAxisAngle(
                    new to(0, 0, 1),
                    this.refPivotCamera.twist.value * Ms
                  ),
                    r.applyQuaternion(i),
                    this.camera.up.copy(r),
                    this.camera.lookAt(t);
                },
                i = new id();
              (this.ref3DAccessPointPersonal.position.x = -2),//orange
                (this.ref3DAccessPointPersonal.position.y = 0.7),
                (this.ref3DAccessPointPersonal.position.z = 3.32),
                (this.ref3DAccessPointReduce.position.x = 1.9),//navy
                (this.ref3DAccessPointReduce.position.y = 1),
                (this.ref3DAccessPointReduce.position.z = 0.8),
                (this.ref3DAccessPointCalculate.position.x = 1.98),//pink
                (this.ref3DAccessPointCalculate.position.y = 0.8),
                (this.ref3DAccessPointCalculate.position.z = 3.5),
                (this.ref3DAccessPointOffset.position.x = 2.05),//torquoise
                (this.ref3DAccessPointOffset.position.y = 1),
                (this.ref3DAccessPointOffset.position.z = 2.6),
                (this.ref3DAccessPointContribute.position.x = -1.15),//black
                (this.ref3DAccessPointContribute.position.y = 0.8),
                (this.ref3DAccessPointContribute.position.z = 0.7),
                i.add(
                  this.ref3DAccessPointReduce,
                  this.ref3DAccessPointCalculate,
                  this.ref3DAccessPointOffset,
                  this.ref3DAccessPointContribute,
                  this.ref3DAccessPointPersonal
                );
              const a = [
                  {
                    in: this.ref3DAccessPointReduce,
                    out: this.refScreenAccessPointReduce
                  },
                  {
                    in: this.ref3DAccessPointCalculate,
                    out: this.refScreenAccessPointCalculate
                  },
                  {
                    in: this.ref3DAccessPointOffset,
                    out: this.refScreenAccessPointOffset
                  },
                  {
                    in: this.ref3DAccessPointContribute,
                    out: this.refScreenAccessPointContribute
                  },
                  {
                    in: this.ref3DAccessPointPersonal,
                    out: this.refScreenAccessPointPersonal
                  }
                ],
                s = () => {
                  a.forEach(({ in: e, out: t }) => {
                    const n = e.getWorldPosition(new to()).project(this.camera);
                    t.position.copy(n);
                  });
                },
                o = new rl();
              i.add(o);
              const l = new Gf("#fff");
              l.position.set(0, 20, 40).normalize().multiplyScalar(0.6),
                (l.target = o),
                l.lookAt(0, 0, 0),
                i.add(l),
                (l.name = "base"),
                (l.castShadow = !0),
                (l.shadow.mapSize.width = 4096),
                (l.shadow.mapSize.height = 4096),
                (l.shadow.camera.far = 320),
                (l.shadow.camera.left = -5),
                (l.shadow.camera.bottom = -5),
                (l.shadow.camera.top = 5),
                (l.shadow.camera.right = 5);
              const h = new Gf("#808080");
              h.position.set(0, 20, -40).normalize().multiplyScalar(0.6),
                (h.target = o),
                h.lookAt(0, 0, 0),
                i.add(h),
                (h.name = "sub1");
              const u = new Gf("#808080");
              u.position.set(0, 20, -40).normalize().multiplyScalar(0.6),
                (u.target = o),
                u.lookAt(0, 0, 0),
                i.add(u),
                (u.name = "sub2");
              const c = new Gf("#808080");
              c.position.set(0, 20, -40).normalize().multiplyScalar(0.6),
                (c.target = o),
                c.lookAt(0, 0, 0),
                i.add(c),
                (c.name = "sub3");
              const d = new Wf(e.ambientColor);
              i.add(d), (d.name = "ambient");
              const f = [l, h, u, c, d],
                p = "?debug" === location.search ? new Xg() : void 0;
              if (p) {
                document.body.addEventListener("keydown", (e) => {
                  "i" === e.key &&
                    e.ctrlKey &&
                    window.confirm("Do you want to reset params?") &&
                    (localStorage.removeItem(wm), window.location.reload());
                }),
                  p.domElement.parentElement &&
                    (p.domElement.parentElement.style.zIndex = "1000");
                let e = p.addFolder("Camera");
                e
                  .add(this.refPivotCamera.rotation, "x", -180, 180)
                  .step(0.1)
                  .name("horizontal")
                  .listen(),
                  e
                    .add(this.refPivotCamera.rotation, "y", -90, 90)
                    .step(0.1)
                    .name("vertical")
                    .listen(),
                  e
                    .add(this.refPivotCamera.twist, "value", -180, 180)
                    .listen()
                    .name("twist"),
                  e.open(),
                  e
                    .add(this.refPivotCamera.position, "x", -4, 4)
                    .name("target X")
                    .step(0.01)
                    .listen(),
                  e
                    .add(this.refPivotCamera.position, "y", -4, 4)
                    .name("target Y")
                    .step(0.01)
                    .listen(),
                  e
                    .add(this.refPivotCamera.position, "z", -4, 4)
                    .name("target Z")
                    .step(0.01)
                    .listen(),
                  e
                    .add(this.refPivotCamera.distance, "value", 0.001, 16)
                    .listen()
                    .step(0.01)
                    .name("distance"),
                  e.close(),
                  p.open();
              }
              const m = yield Nm(void 0, void 0, void 0, function* () {
                  const e =
                    ((t = "/common/models/base-model.zip"),
                    (n = "base-model.glb"),
                    Nm(void 0, void 0, void 0, function* () {
                      const e = yield fetch(t),
                        r = yield e.blob(),
                        i = new Mm(),
                        a = (yield i.loadAsync(r)).files[n];
                      if (!a) throw new Error(`"${a}" is not found in "${t}"`);
                      const s = yield a.async("arraybuffer"),
                        o = new kp(),
                        l = new Fm();
                      return (
                        l.setDecoderPath("/common/draco/"),
                        o.setDRACOLoader(l),
                        yield o.parseAsync(s, n)
                      );
                    }));
                  var t, n;
                  const r =
                    ((i = [
                      "px.png",
                      "nx.png",
                      "py.png",
                      "ny.png",
                      "pz.png",
                      "nz.png"
                    ].map((e) => `/common/models/env-maps/world/${e}`)),
                    new Promise((e, t) => {
                      new Cf().load(
                        i,
                        (t) => {
                          e(t);
                        },
                        void 0,
                        (e) => {
                          t(e);
                        }
                      );
                    }));
                  var i;
                  const [a, s] = yield Promise.all([e, r]);
                  return { modelFile: a, worldBackground: s };
                }),
                { worldBackground: g } = m,
                {
                  root: v,
                  animationMixer: y,
                  windmills: _
                } = yield ((b = { allResources: m }),
                Nm(void 0, void 0, void 0, function* () {
                  const { modelFile: e } = b.allResources,
                    t = e.scene,
                    n = ((e) => {
                      const t = [];
                      return (
                        e.traverse((e) => {
                          e.isMesh && t.push(e);
                        }),
                        t
                      );
                    })(t),
                    r = new tf({
                      color: new bl(10, 10, 10),
                      emissive: new bl("#547a91"),
                      side: 0
                    }),
                    i = new tf({
                      color: new bl(255, 0, 0),
                      emissive: new bl("#547a91"),
                      side: 0
                    }),
                    a = {},
                    s = {};
                  n.forEach((e) => {
                    e.name.startsWith("BLD_") ||
                      ((e.castShadow = !0), (e.receiveShadow = !0));
                    const t = ((e) => {
                        const t = e.name,
                          n = e.geometry.attributes.position.count;
                        if (/^Cylinder/.test(t)) {
                          const e = [
                            2568, 1308, 1060, 996, 684, 384, 372, 276
                          ].find((e) => e === n);
                          return e
                            ? { name: `Cylinder: ${e}`, usePool: !0 }
                            : { name: "Cylinder" };
                        }
                        if (/^Cube/.test(t)) {
                          const e = [428, 384, 240, 56, 50].find((e) => e === n);
                          return e
                            ? 384 === e
                              ? { name: "windmill-base", usePool: !0 }
                              : { name: `Cube: ${e}`, usePool: !0 }
                            : { name: "Cube" };
                        }
                        return /^Tree_Spruce_small/.test(t)
                          ? { name: "Tree_Spruce_small", usePool: !0 }
                          : /^Tree_small_regular/.test(t)
                          ? { name: "Tree_small_regular", usePool: !0 }
                          : /^Tree_average_lush/.test(t)
                          ? { name: "Tree_average_lush", usePool: !0 }
                          : /^tree_2/.test(t)
                          ? { name: "tree_2", usePool: !0 }
                          : /^Bush_group_average/.test(t)
                          ? { name: "Bush_group_average", usePool: !0 }
                          : /^Bush_group_big/.test(t)
                          ? { name: "Bush_group_big", usePool: !0 }
                          : /^Bush_average/.test(t)
                          ? { name: "Bush_average", usePool: !0 }
                          : /^Tree_Spruce_tiny/.test(t)
                          ? { name: "Tree_Spruce_tiny", usePool: !0 }
                          : /^Cone/.test(t)
                          ? { name: "Cone", usePool: !0 }
                          : /^windmill/.test(t)
                          ? { name: "windmill", usePool: !0 }
                          : /^BLD_/.test(t)
                          ? { name: "BLD" }
                          : { name: `@${t}: ${n}` };
                      })(e),
                      n = a[t.name] || {};
                    (n[e.geometry.attributes.position.count] =
                      (n[e.geometry.attributes.position.count] || 0) + 1),
                      (a[t.name] = n);
                    const o = e.material;
                    if (
                      ((e.material = "no test geometry" === t.name ? i : r),
                      Array.isArray(o)
                        ? o.forEach((e) => e.dispose())
                        : o.dispose(),
                      t.usePool)
                    ) {
                      const n = s[t.name];
                      (null == n ? void 0 : n.geometry)
                        ? ((e.geometry = n.geometry), n.meshes.push(e))
                        : (s[t.name] = { geometry: e.geometry, meshes: [e] });
                    }
                  }),
                    Object.entries(s)
                      .filter(([e]) => "windmill" !== e && "windmill-base" !== e)
                      .forEach(([e, { geometry: n, meshes: i }]) => {
                        const a = new Rd(n, r, i.length);
                        (a.castShadow = !0),
                          i.forEach((e, t) => {
                            e.updateMatrix(),
                              a.setMatrixAt(t, new Do().copy(e.matrix)),
                              e.removeFromParent(),
                              e.geometry !== n && e.geometry.dispose();
                          }),
                          t.add(a);
                      });
                  const o = new rp(t);
                  return (
                    e.animations.forEach((e) => {
                      const t = o.clipAction(e);
                      t.setDuration(e.duration),
                        t.setEffectiveTimeScale(1),
                        t.play();
                    }),
                    {
                      root: t,
                      animationMixer: o,
                      windmills: n.filter((e) => e.name.startsWith("windmill"))
                    }
                  );
                }));
              var b;
              i.add(v), (this.refWindmills = _);
              const x =
                (p &&
                  (() => {
                    const e = localStorage.getItem(wm);
                    if (e)
                      try {
                        return JSON.parse(e) || void 0;
                      } catch (e) {
                        return;
                      }
                  })()) ||
                JSON.parse(
                  '{"lights":{"base":{"color":{"r":255,"g":255,"b":255},"intensity":0.5837,"groundColor":{"r":255,"g":255,"b":255},"angle":{"x":-18.373,"y":54.124}},"sub":{"color":{"r":237,"g":237,"b":237},"intensity":0.0786,"groundColor":{"r":255,"g":255,"b":255},"angle":{"x":-163.83700000000002,"y":-22.413}},"sub1":{"color":{"r":35.7,"g":35.7,"b":35.7},"intensity":0.4602,"groundColor":{"r":0,"g":0,"b":255},"angle":{"x":86.685,"y":38.197}},"sub2":{"color":{"r":25.499999999999993,"g":25.499999999999993,"b":25.499999999999993},"intensity":0.26940000000000003,"groundColor":{"r":0,"g":0,"b":255},"angle":{"x":-83.024,"y":-18.373}},"sub3":{"color":{"r":25.499999999999993,"g":25.499999999999993,"b":25.499999999999993},"intensity":0.21330000000000002,"groundColor":{"r":0,"g":0,"b":255},"angle":{"x":42.238,"y":-87.06400000000001}}},"standardMaterials":{}}'
                );
              let S;
              Em({ setting: x, lights: f }), (i.background = g);
              const E = new rd({ antialias: !0 });
              return (
                E.setAnimationLoop((e) => {
                  if ((r(), void 0 === S))
                    return E.render(i, this.camera), void (S = e);
                  const t = e - S;
                  t < 1e3 / this.refLimits.fps ||
                    (y.update(t / 1e3),
                    E.render(i, this.camera),
                    s(),
                    this.onRender(e),
                    (S = e));
                }),
                E.setClearColor("#fff"),
                (E.shadowMap.enabled = !0),
                (E.shadowMap.type = 2),
                (E.toneMapping = 4),
                (E.toneMappingExposure = 1),
                (this.initializedInstances = { renderer: E }),
                p &&
                  ((e) => {
                    const { gui: t, lights: n, scene: r } = e;
                    let i = e.setting;
                    const a = () => {
                        (l.json = Tm(i)), h.updateDisplay();
                      },
                      s = t.addFolder("Lights");
                    s.close(),
                      n.forEach((e) => {
                        const t = s.addFolder(e.name),
                          n = Object.assign(
                            {
                              color: { r: 0, g: 0, b: 0 },
                              intensity: 1,
                              groundColor: { r: 0, g: 0, b: 255 },
                              angle: { x: 90, y: 0 }
                            },
                            i.lights[e.name]
                          );
                        (i.lights[e.name] = n), t.open();
                        const o = (r) => {
                            t.addColor(n, "color")
                              .onChange(function (t) {
                                e.color.set(t.r / 255, t.g / 255, t.b / 255),
                                  null == r || r.update(),
                                  a();
                              })
                              .updateDisplay();
                          },
                          l = () => {
                            t.add(n, "intensity")
                              .step(1e-4)
                              .min(0)
                              .max(1)
                              .onChange(function (t) {
                                (e.intensity = t), a();
                              })
                              .updateDisplay();
                          };
                        if (e.isDirectionalLight) {
                          const i = new dp(e, 0.1);
                          r.add(i),
                            o(i),
                            l(),
                            t
                              .add(n.angle, "x")
                              .step(0.001)
                              .max(180)
                              .min(-180)
                              .onChange(function (t) {
                                e.position.copy(
                                  Sm(
                                    {
                                      angleX: t,
                                      angleY: n.angle.y,
                                      distance: 160
                                    },
                                    new to()
                                  )
                                ),
                                  i.update(),
                                  a();
                              })
                              .updateDisplay(),
                            t
                              .add(n.angle, "y")
                              .step(0.001)
                              .max(180)
                              .min(-180)
                              .onChange(function (t) {
                                e.position.copy(
                                  Sm(
                                    {
                                      angleX: n.angle.x,
                                      angleY: t,
                                      distance: 160
                                    },
                                    new to()
                                  )
                                ),
                                  i.update(),
                                  a();
                              })
                              .updateDisplay();
                        } else if (e.isHemisphereLight) {
                          const i = new lp(e, 0.1);
                          r.add(i),
                            o(i),
                            t
                              .addColor(n, "groundColor")
                              .onChange(function (t) {
                                e.groundColor.set(
                                  t.r / 255,
                                  t.g / 255,
                                  t.b / 255
                                ),
                                  i.update(),
                                  a();
                              })
                              .updateDisplay(),
                            l(),
                            t
                              .add(n.angle, "x")
                              .step(0.001)
                              .max(180)
                              .min(-180)
                              .onChange(function (t) {
                                e.position.copy(
                                  Sm(
                                    {
                                      angleX: t,
                                      angleY: n.angle.y,
                                      distance: 0.1
                                    },
                                    new to()
                                  )
                                ),
                                  i.update(),
                                  a();
                              })
                              .updateDisplay(),
                            t
                              .add(n.angle, "y")
                              .step(0.001)
                              .max(180)
                              .min(-180)
                              .onChange(function (t) {
                                e.position.copy(
                                  Sm(
                                    {
                                      angleX: n.angle.x,
                                      angleY: t,
                                      distance: 0.1
                                    },
                                    new to()
                                  )
                                ),
                                  i.update(),
                                  a();
                              })
                              .updateDisplay();
                        } else if (e.isPointLight) {
                          const n = new ip(e, 0.1);
                          r.add(n), o(n), l();
                          const i = { text: "" },
                            a = () => {
                              n.update(),
                                (i.text = `${e.position.x}, ${e.position.y}, ${e.position.z}`);
                            };
                          t
                            .add(e.position, "x")
                            .name("x(RO)")
                            .step(1e-4)
                            .min(-5)
                            .max(5)
                            .onChange(a),
                            t
                              .add(e.position, "y")
                              .name("y(RO)")
                              .step(1e-4)
                              .min(-5)
                              .max(5)
                              .onChange(a),
                            t
                              .add(e.position, "z")
                              .name("z(RO)")
                              .step(1e-4)
                              .min(-5)
                              .max(5)
                              .onChange(a),
                            t.add(i, "text").name("pos(RO)").listen(),
                            t
                              .add(e, "intensity")
                              .name("int(RO)")
                              .step(1e-4)
                              .min(0)
                              .max(5),
                            t
                              .add(e, "distance")
                              .name("dist(RO)")
                              .step(1e-4)
                              .min(0)
                              .max(5),
                            t
                              .add(e, "decay")
                              .name("decay(RO)")
                              .step(1e-6)
                              .min(0)
                              .max(1);
                        } else o(), l();
                      });
                    const o = t.addFolder("Share Data");
                    o.close();
                    const l = { json: "" },
                      h = o.add(l, "json").onChange((e) => {
                        try {
                          (i = JSON.parse(e)),
                            Em({ lights: n, setting: i }),
                            Tm(i);
                        } catch (e) {
                          console.error("bad params");
                        }
                      });
                    a();
                  })({ gui: p, setting: x, lights: f, scene: i }),
                { element: E.domElement }
              );
            }),
            new ((r = void 0) || (r = Promise))(function (e, a) {
              function s(e) {
                try {
                  l(i.next(e));
                } catch (e) {
                  a(e);
                }
              }
              function o(e) {
                try {
                  l(i.throw(e));
                } catch (e) {
                  a(e);
                }
              }
              function l(t) {
                var n;
                t.done
                  ? e(t.value)
                  : ((n = t.value),
                    n instanceof r
                      ? n
                      : new r(function (e) {
                          e(n);
                        })).then(s, o);
              }
              l((i = i.apply(t, n || [])).next());
            })
          );
          var t, n, r, i;
        }
        getPipes(e) {
          return { onResize: this.onResize };
        }
        setOnRenderEvent(e) {
          this.onRender = e.onRender;
        }
      }
      class Yg {
        constructor() {
          this.mediaQuerySp = window.matchMedia("(max-width: 752px)");
          const e = window.document.body.querySelector(
            "[data-bind-main-visual-canvas-root]"
          );
          if (!e)
            throw new Error("[data-bind-main-visual-canvas-root] is not found");
          (this.mainVisualCanvasRootElement = e),
            (this.accessPointElements = {
              accessPointCalculate: m(
                document,
                '[data-main-visual-access-point="calculate"]'
              ),
              accessPointContribute: m(
                document,
                '[data-main-visual-access-point="contribute"]'
              ),
              accessPointOffset: m(
                document,
                '[data-main-visual-access-point="offset"]'
              ),
              accessPointPersonal: m(
                document,
                '[data-main-visual-access-point="personal"]'
              ),
              accessPointReduce: m(
                document,
                '[data-main-visual-access-point="reduce"]'
              )
            });
        }
        appendMainVisualCanvas({ element: e }) {
          this.mainVisualCanvasRootElement &&
            this.mainVisualCanvasRootElement.append(e);
        }
        setMainVisualCanvasRootResizeEvent({ onResize: e }) {
          window.addEventListener("resize", () => {
            this.resizeAbsorberId && window.clearTimeout(this.resizeAbsorberId),
              (this.resizeAbsorberId = window.setTimeout(() => {
                e(), (this.resizeAbsorberId = void 0);
              }, 100));
          });
        }
        getMainVisualCanvasRootProps(e) {
          if (!this.mainVisualCanvasRootElement)
            throw new Error("mainVisualCanvasRootElement is not defined");
          return {
            devicePixelRatio: window.devicePixelRatio,
            width: this.mainVisualCanvasRootElement.clientWidth,
            height: this.mainVisualCanvasRootElement.clientHeight
          };
        }
        setBillboardElementPosition(e) {
          const t = this.mainVisualCanvasRootElement.clientWidth,
            n = this.mainVisualCanvasRootElement.clientHeight;
          Object.entries(e).forEach(([e, r]) => {
            const i = e,
              a = this.accessPointElements[i],
              s = (t / 2) * (+r.x + 1),
              o = (n / 2) * (1 - r.y);
            a.style.transform = `translate(${s}px, ${o}px) translate(-50%, -50%)`;
          });
        }
        setBillboardElementEvents({ accessPoints: e }) {
          Object.entries(this.accessPointElements).forEach(([, t]) => {
            t.addEventListener("mouseenter", () => e.onEnter()),
              t.addEventListener("mouseleave", () => e.onLeave());
          });
        }
        setLoadingState(e) {
          document
            .querySelectorAll("[data-bind-main-visual-loading-state]")
            .forEach((t) => {
              t.setAttribute("data-bind-main-visual-loading-state", e.join(" "));
            });
        }
        setMouseWheelEvent({ onWheel: e }) {
          this.destroyMouseWheelEvent(),
            (this.mouseWheelEvent = (t) => {
              e(t.deltaY);
            }),
            document.addEventListener("wheel", this.mouseWheelEvent);
        }
        destroyMouseWheelEvent(e) {
          this.mouseWheelEvent &&
            (document.removeEventListener("wheel", this.mouseWheelEvent),
            (this.mouseWheelEvent = void 0));
        }
        isSP() {
          return this.mediaQuerySp.matches;
        }
        getAmbientColor() {
          var e;
          return (
            (null ===
              (e = document.querySelector("[data-main-visual-ambient-color]")) ||
            void 0 === e
              ? void 0
              : e.getAttribute("data-main-visual-ambient-color")) || "#303030"
          );
        }
      }
      function Kg(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          (r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(e, r.key, r);
        }
      }
      var Zg,
        Jg,
        $g,
        Qg,
        ev,
        tv,
        nv,
        rv,
        iv,
        av,
        sv,
        ov,
        lv,
        hv = function () {
          return (
            Zg ||
            ("undefined" != typeof window &&
              (Zg = window.gsap) &&
              Zg.registerPlugin &&
              Zg)
          );
        },
        uv = 1,
        cv = [],
        dv = [],
        fv = [],
        pv = Date.now,
        mv = function (e, t) {
          return t;
        },
        gv = function (e, t) {
          return ~fv.indexOf(e) && fv[fv.indexOf(e) + 1][t];
        },
        vv = function (e) {
          return !!~av.indexOf(e);
        },
        yv = function (e, t, n, r, i) {
          return e.addEventListener(t, n, { passive: !r, capture: !!i });
        },
        _v = function (e, t, n, r) {
          return e.removeEventListener(t, n, !!r);
        },
        bv = function () {
          return (sv && sv.isPressed) || dv.cache++;
        },
        xv = function (e, t) {
          var n = function n(r) {
            if (r || 0 === r) {
              uv && ($g.history.scrollRestoration = "manual");
              var i = sv && sv.isPressed;
              (r = n.v = Math.round(r) || (sv && sv.iOS ? 1 : 0)),
                e(r),
                (n.cacheID = dv.cache),
                i && mv("ss", r);
            } else
              (t || dv.cache !== n.cacheID || mv("ref")) &&
                ((n.cacheID = dv.cache), (n.v = e()));
            return n.v + n.offset;
          };
          return (n.offset = 0), e && n;
        },
        Sv = {
          s: "scrollLeft",
          p: "left",
          p2: "Left",
          os: "right",
          os2: "Right",
          d: "width",
          d2: "Width",
          a: "x",
          sc: xv(function (e) {
            return arguments.length
              ? $g.scrollTo(e, Ev.sc())
              : $g.pageXOffset ||
                  Qg.scrollLeft ||
                  ev.scrollLeft ||
                  tv.scrollLeft ||
                  0;
          })
        },
        Ev = {
          s: "scrollTop",
          p: "top",
          p2: "Top",
          os: "bottom",
          os2: "Bottom",
          d: "height",
          d2: "Height",
          a: "y",
          op: Sv,
          sc: xv(function (e) {
            return arguments.length
              ? $g.scrollTo(Sv.sc(), e)
              : $g.pageYOffset ||
                  Qg.scrollTop ||
                  ev.scrollTop ||
                  tv.scrollTop ||
                  0;
          })
        },
        wv = function (e, t) {
          return (
            ((t && t._ctx && t._ctx.selector) || Zg.utils.toArray)(e)[0] ||
            ("string" == typeof e && !1 !== Zg.config().nullTargetWarn
              ? console.warn("Element not found:", e)
              : null)
          );
        },
        Tv = function (e, t) {
          var n = t.s,
            r = t.sc;
          vv(e) && (e = Qg.scrollingElement || ev);
          var i = dv.indexOf(e),
            a = r === Ev.sc ? 1 : 2;
          !~i && (i = dv.push(e) - 1), dv[i + a] || yv(e, "scroll", bv);
          var s = dv[i + a],
            o =
              s ||
              (dv[i + a] =
                xv(gv(e, n), !0) ||
                (vv(e)
                  ? r
                  : xv(function (t) {
                      return arguments.length ? (e[n] = t) : e[n];
                    })));
          return (
            (o.target = e),
            s || (o.smooth = "smooth" === Zg.getProperty(e, "scrollBehavior")),
            o
          );
        },
        Mv = function (e, t, n) {
          var r = e,
            i = e,
            a = pv(),
            s = a,
            o = t || 50,
            l = Math.max(500, 3 * o),
            h = function (e, t) {
              var l = pv();
              t || l - a > o
                ? ((i = r), (r = e), (s = a), (a = l))
                : n
                ? (r += e)
                : (r = i + ((e - i) / (l - s)) * (a - s));
            };
          return {
            update: h,
            reset: function () {
              (i = r = n ? 0 : r), (s = a = 0);
            },
            getVelocity: function (e) {
              var t = s,
                o = i,
                u = pv();
              return (
                (e || 0 === e) && e !== r && h(e),
                a === s || u - s > l
                  ? 0
                  : ((r + (n ? o : -o)) / ((n ? u : a) - t)) * 1e3
              );
            }
          };
        },
        Av = function (e, t) {
          return (
            t && !e._gsapAllow && e.preventDefault(),
            e.changedTouches ? e.changedTouches[0] : e
          );
        },
        Cv = function (e) {
          var t = Math.max.apply(Math, e),
            n = Math.min.apply(Math, e);
          return Math.abs(t) >= Math.abs(n) ? t : n;
        },
        Pv = function () {
          var e, t, n, r;
          (iv = Zg.core.globals().ScrollTrigger) &&
            iv.core &&
            ((e = iv.core),
            (t = e.bridge || {}),
            (n = e._scrollers),
            (r = e._proxies),
            n.push.apply(n, dv),
            r.push.apply(r, fv),
            (dv = n),
            (fv = r),
            (mv = function (e, n) {
              return t[e](n);
            }));
        },
        kv = function (e) {
          return (
            (Zg = e || hv()),
            !Jg &&
              Zg &&
              "undefined" != typeof document &&
              document.body &&
              (($g = window),
              (Qg = document),
              (ev = Qg.documentElement),
              (tv = Qg.body),
              (av = [$g, Qg, ev, tv]),
              Zg.utils.clamp,
              (lv = Zg.core.context || function () {}),
              (rv = "onpointerenter" in tv ? "pointer" : "mouse"),
              (nv = Rv.isTouch =
                $g.matchMedia &&
                $g.matchMedia("(hover: none), (pointer: coarse)").matches
                  ? 1
                  : "ontouchstart" in $g ||
                    navigator.maxTouchPoints > 0 ||
                    navigator.msMaxTouchPoints > 0
                  ? 2
                  : 0),
              (ov = Rv.eventTypes =
                (
                  "ontouchstart" in ev
                    ? "touchstart,touchmove,touchcancel,touchend"
                    : "onpointerdown" in ev
                    ? "pointerdown,pointermove,pointercancel,pointerup"
                    : "mousedown,mousemove,mouseup,mouseup"
                ).split(",")),
              setTimeout(function () {
                return (uv = 0);
              }, 500),
              Pv(),
              (Jg = 1)),
            Jg
          );
        };
      (Sv.op = Ev), (dv.cache = 0);
      var Rv = (function () {
        function e(e) {
          this.init(e);
        }
        var t, n;
        return (
          (e.prototype.init = function (e) {
            Jg || kv(Zg) || console.warn("Please gsap.registerPlugin(Observer)"),
              iv || Pv();
            var t = e.tolerance,
              n = e.dragMinimum,
              r = e.type,
              i = e.target,
              a = e.lineHeight,
              s = e.debounce,
              o = e.preventDefault,
              l = e.onStop,
              h = e.onStopDelay,
              u = e.ignore,
              c = e.wheelSpeed,
              d = e.event,
              f = e.onDragStart,
              p = e.onDragEnd,
              m = e.onDrag,
              g = e.onPress,
              v = e.onRelease,
              y = e.onRight,
              _ = e.onLeft,
              b = e.onUp,
              x = e.onDown,
              S = e.onChangeX,
              E = e.onChangeY,
              w = e.onChange,
              T = e.onToggleX,
              M = e.onToggleY,
              A = e.onHover,
              C = e.onHoverEnd,
              P = e.onMove,
              k = e.ignoreCheck,
              R = e.isNormalizer,
              D = e.onGestureStart,
              I = e.onGestureEnd,
              L = e.onWheel,
              F = e.onEnable,
              O = e.onDisable,
              N = e.onClick,
              B = e.scrollSpeed,
              U = e.capture,
              z = e.allowClicks,
              V = e.lockAxis,
              H = e.onLockAxis;
            (this.target = i = wv(i) || ev),
              (this.vars = e),
              u && (u = Zg.utils.toArray(u)),
              (t = t || 1e-9),
              (n = n || 0),
              (c = c || 1),
              (B = B || 1),
              (r = r || "wheel,touch,pointer"),
              (s = !1 !== s),
              a || (a = parseFloat($g.getComputedStyle(tv).lineHeight) || 22);
            var G,
              W,
              j,
              X,
              q,
              Y,
              K,
              Z = this,
              J = 0,
              $ = 0,
              Q = Tv(i, Sv),
              ee = Tv(i, Ev),
              te = Q(),
              ne = ee(),
              re =
                ~r.indexOf("touch") &&
                !~r.indexOf("pointer") &&
                "pointerdown" === ov[0],
              ie = vv(i),
              ae = i.ownerDocument || Qg,
              se = [0, 0, 0],
              oe = [0, 0, 0],
              le = 0,
              he = function () {
                return (le = pv());
              },
              ue = function (e, t) {
                return (
                  ((Z.event = e) && u && ~u.indexOf(e.target)) ||
                  (t && re && "touch" !== e.pointerType) ||
                  (k && k(e, t))
                );
              },
              ce = function () {
                var e = (Z.deltaX = Cv(se)),
                  n = (Z.deltaY = Cv(oe)),
                  r = Math.abs(e) >= t,
                  i = Math.abs(n) >= t;
                w && (r || i) && w(Z, e, n, se, oe),
                  r &&
                    (y && Z.deltaX > 0 && y(Z),
                    _ && Z.deltaX < 0 && _(Z),
                    S && S(Z),
                    T && Z.deltaX < 0 != J < 0 && T(Z),
                    (J = Z.deltaX),
                    (se[0] = se[1] = se[2] = 0)),
                  i &&
                    (x && Z.deltaY > 0 && x(Z),
                    b && Z.deltaY < 0 && b(Z),
                    E && E(Z),
                    M && Z.deltaY < 0 != $ < 0 && M(Z),
                    ($ = Z.deltaY),
                    (oe[0] = oe[1] = oe[2] = 0)),
                  (X || j) && (P && P(Z), j && (m(Z), (j = !1)), (X = !1)),
                  Y && !(Y = !1) && H && H(Z),
                  q && (L(Z), (q = !1)),
                  (G = 0);
              },
              de = function (e, t, n) {
                (se[n] += e),
                  (oe[n] += t),
                  Z._vx.update(e),
                  Z._vy.update(t),
                  s ? G || (G = requestAnimationFrame(ce)) : ce();
              },
              fe = function (e, t) {
                V &&
                  !K &&
                  ((Z.axis = K = Math.abs(e) > Math.abs(t) ? "x" : "y"),
                  (Y = !0)),
                  "y" !== K && ((se[2] += e), Z._vx.update(e, !0)),
                  "x" !== K && ((oe[2] += t), Z._vy.update(t, !0)),
                  s ? G || (G = requestAnimationFrame(ce)) : ce();
              },
              pe = function (e) {
                if (!ue(e, 1)) {
                  var t = (e = Av(e, o)).clientX,
                    r = e.clientY,
                    i = t - Z.x,
                    a = r - Z.y,
                    s = Z.isDragging;
                  (Z.x = t),
                    (Z.y = r),
                    (s ||
                      Math.abs(Z.startX - t) >= n ||
                      Math.abs(Z.startY - r) >= n) &&
                      (m && (j = !0),
                      s || (Z.isDragging = !0),
                      fe(i, a),
                      s || (f && f(Z)));
                }
              },
              me = (Z.onPress = function (e) {
                ue(e, 1) ||
                  (e && e.button) ||
                  ((Z.axis = K = null),
                  W.pause(),
                  (Z.isPressed = !0),
                  (e = Av(e)),
                  (J = $ = 0),
                  (Z.startX = Z.x = e.clientX),
                  (Z.startY = Z.y = e.clientY),
                  Z._vx.reset(),
                  Z._vy.reset(),
                  yv(R ? i : ae, ov[1], pe, o, !0),
                  (Z.deltaX = Z.deltaY = 0),
                  g && g(Z));
              }),
              ge = (Z.onRelease = function (e) {
                if (!ue(e, 1)) {
                  _v(R ? i : ae, ov[1], pe, !0);
                  var t = !isNaN(Z.y - Z.startY),
                    n = Z.isDragging,
                    r =
                      n &&
                      (Math.abs(Z.x - Z.startX) > 3 ||
                        Math.abs(Z.y - Z.startY) > 3),
                    a = Av(e);
                  !r &&
                    t &&
                    (Z._vx.reset(),
                    Z._vy.reset(),
                    o &&
                      z &&
                      Zg.delayedCall(0.08, function () {
                        if (pv() - le > 300 && !e.defaultPrevented)
                          if (e.target.click) e.target.click();
                          else if (ae.createEvent) {
                            var t = ae.createEvent("MouseEvents");
                            t.initMouseEvent(
                              "click",
                              !0,
                              !0,
                              $g,
                              1,
                              a.screenX,
                              a.screenY,
                              a.clientX,
                              a.clientY,
                              !1,
                              !1,
                              !1,
                              !1,
                              0,
                              null
                            ),
                              e.target.dispatchEvent(t);
                          }
                      })),
                    (Z.isDragging = Z.isGesturing = Z.isPressed = !1),
                    l && n && !R && W.restart(!0),
                    p && n && p(Z),
                    v && v(Z, r);
                }
              }),
              ve = function (e) {
                return (
                  e.touches &&
                  e.touches.length > 1 &&
                  (Z.isGesturing = !0) &&
                  D(e, Z.isDragging)
                );
              },
              ye = function () {
                return (Z.isGesturing = !1) || I(Z);
              },
              _e = function (e) {
                if (!ue(e)) {
                  var t = Q(),
                    n = ee();
                  de((t - te) * B, (n - ne) * B, 1),
                    (te = t),
                    (ne = n),
                    l && W.restart(!0);
                }
              },
              be = function (e) {
                if (!ue(e)) {
                  (e = Av(e, o)), L && (q = !0);
                  var t =
                    (1 === e.deltaMode
                      ? a
                      : 2 === e.deltaMode
                      ? $g.innerHeight
                      : 1) * c;
                  de(e.deltaX * t, e.deltaY * t, 0), l && !R && W.restart(!0);
                }
              },
              xe = function (e) {
                if (!ue(e)) {
                  var t = e.clientX,
                    n = e.clientY,
                    r = t - Z.x,
                    i = n - Z.y;
                  (Z.x = t),
                    (Z.y = n),
                    (X = !0),
                    l && W.restart(!0),
                    (r || i) && fe(r, i);
                }
              },
              Se = function (e) {
                (Z.event = e), A(Z);
              },
              Ee = function (e) {
                (Z.event = e), C(Z);
              },
              we = function (e) {
                return ue(e) || (Av(e, o) && N(Z));
              };
            (W = Z._dc =
              Zg.delayedCall(h || 0.25, function () {
                Z._vx.reset(), Z._vy.reset(), W.pause(), l && l(Z);
              }).pause()),
              (Z.deltaX = Z.deltaY = 0),
              (Z._vx = Mv(0, 50, !0)),
              (Z._vy = Mv(0, 50, !0)),
              (Z.scrollX = Q),
              (Z.scrollY = ee),
              (Z.isDragging = Z.isGesturing = Z.isPressed = !1),
              lv(this),
              (Z.enable = function (e) {
                return (
                  Z.isEnabled ||
                    (yv(ie ? ae : i, "scroll", bv),
                    r.indexOf("scroll") >= 0 &&
                      yv(ie ? ae : i, "scroll", _e, o, U),
                    r.indexOf("wheel") >= 0 && yv(i, "wheel", be, o, U),
                    ((r.indexOf("touch") >= 0 && nv) ||
                      r.indexOf("pointer") >= 0) &&
                      (yv(i, ov[0], me, o, U),
                      yv(ae, ov[2], ge),
                      yv(ae, ov[3], ge),
                      z && yv(i, "click", he, !1, !0),
                      N && yv(i, "click", we),
                      D && yv(ae, "gesturestart", ve),
                      I && yv(ae, "gestureend", ye),
                      A && yv(i, rv + "enter", Se),
                      C && yv(i, rv + "leave", Ee),
                      P && yv(i, rv + "move", xe)),
                    (Z.isEnabled = !0),
                    e && e.type && me(e),
                    F && F(Z)),
                  Z
                );
              }),
              (Z.disable = function () {
                Z.isEnabled &&
                  (cv.filter(function (e) {
                    return e !== Z && vv(e.target);
                  }).length || _v(ie ? ae : i, "scroll", bv),
                  Z.isPressed &&
                    (Z._vx.reset(), Z._vy.reset(), _v(R ? i : ae, ov[1], pe, !0)),
                  _v(ie ? ae : i, "scroll", _e, U),
                  _v(i, "wheel", be, U),
                  _v(i, ov[0], me, U),
                  _v(ae, ov[2], ge),
                  _v(ae, ov[3], ge),
                  _v(i, "click", he, !0),
                  _v(i, "click", we),
                  _v(ae, "gesturestart", ve),
                  _v(ae, "gestureend", ye),
                  _v(i, rv + "enter", Se),
                  _v(i, rv + "leave", Ee),
                  _v(i, rv + "move", xe),
                  (Z.isEnabled = Z.isPressed = Z.isDragging = !1),
                  O && O(Z));
              }),
              (Z.kill = Z.revert =
                function () {
                  Z.disable();
                  var e = cv.indexOf(Z);
                  e >= 0 && cv.splice(e, 1), sv === Z && (sv = 0);
                }),
              cv.push(Z),
              R && vv(i) && (sv = Z),
              Z.enable(d);
          }),
          (t = e),
          (n = [
            {
              key: "velocityX",
              get: function () {
                return this._vx.getVelocity();
              }
            },
            {
              key: "velocityY",
              get: function () {
                return this._vy.getVelocity();
              }
            }
          ]) && Kg(t.prototype, n),
          e
        );
      })();
      function Dv(e) {
        return (
          (Dv =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          Dv(e)
        );
      }
      (Rv.version = "3.12.4"),
        (Rv.create = function (e) {
          return new Rv(e);
        }),
        (Rv.register = kv),
        (Rv.getAll = function () {
          return cv.slice();
        }),
        (Rv.getById = function (e) {
          return cv.filter(function (t) {
            return t.vars.id === e;
          })[0];
        }),
        hv() && Zg.registerPlugin(Rv);
      var Iv,
        Lv,
        Fv,
        Ov,
        Nv,
        Bv,
        Uv,
        zv,
        Vv,
        Hv,
        Gv,
        Wv,
        jv,
        Xv,
        qv,
        Yv,
        Kv,
        Zv,
        Jv,
        $v,
        Qv,
        ey,
        ty,
        ny,
        ry,
        iy,
        ay,
        sy,
        oy,
        ly,
        hy,
        uy,
        cy,
        dy,
        fy,
        py,
        my,
        gy,
        vy = 1,
        yy = Date.now,
        _y = yy(),
        by = 0,
        xy = 0,
        Sy = function (e, t, n) {
          var r = Oy(e) && ("clamp(" === e.substr(0, 6) || e.indexOf("max") > -1);
          return (n["_" + t + "Clamp"] = r), r ? e.substr(6, e.length - 7) : e;
        },
        Ey = function (e, t) {
          return !t || (Oy(e) && "clamp(" === e.substr(0, 6))
            ? e
            : "clamp(" + e + ")";
        },
        wy = function e() {
          return xy && requestAnimationFrame(e);
        },
        Ty = function () {
          return (Xv = 1);
        },
        My = function () {
          return (Xv = 0);
        },
        Ay = function (e) {
          return e;
        },
        Cy = function (e) {
          return Math.round(1e5 * e) / 1e5 || 0;
        },
        Py = function () {
          return "undefined" != typeof window;
        },
        ky = function () {
          return Iv || (Py() && (Iv = window.gsap) && Iv.registerPlugin && Iv);
        },
        Ry = function (e) {
          return !!~Uv.indexOf(e);
        },
        Dy = function (e) {
          return (
            ("Height" === e ? hy : Fv["inner" + e]) ||
            Nv["client" + e] ||
            Bv["client" + e]
          );
        },
        Iy = function (e) {
          return (
            gv(e, "getBoundingClientRect") ||
            (Ry(e)
              ? function () {
                  return (z_.width = Fv.innerWidth), (z_.height = hy), z_;
                }
              : function () {
                  return Qy(e);
                })
          );
        },
        Ly = function (e, t) {
          var n = t.s,
            r = t.d2,
            i = t.d,
            a = t.a;
          return Math.max(
            0,
            (n = "scroll" + r) && (a = gv(e, n))
              ? a() - Iy(e)()[i]
              : Ry(e)
              ? (Nv[n] || Bv[n]) - Dy(r)
              : e[n] - e["offset" + r]
          );
        },
        Fy = function (e, t) {
          for (var n = 0; n < Jv.length; n += 3)
            (!t || ~t.indexOf(Jv[n + 1])) && e(Jv[n], Jv[n + 1], Jv[n + 2]);
        },
        Oy = function (e) {
          return "string" == typeof e;
        },
        Ny = function (e) {
          return "function" == typeof e;
        },
        By = function (e) {
          return "number" == typeof e;
        },
        Uy = function (e) {
          return "object" === Dv(e);
        },
        zy = function (e, t, n) {
          return e && e.progress(t ? 0 : 1) && n && e.pause();
        },
        Vy = function (e, t) {
          if (e.enabled) {
            var n = e._ctx
              ? e._ctx.add(function () {
                  return t(e);
                })
              : t(e);
            n && n.totalTime && (e.callbackAnimation = n);
          }
        },
        Hy = Math.abs,
        Gy = "right",
        Wy = "bottom",
        jy = "width",
        Xy = "height",
        qy = "padding",
        Yy = "margin",
        Ky = "Width",
        Zy = "px",
        Jy = function (e) {
          return Fv.getComputedStyle(e);
        },
        $y = function (e, t) {
          for (var n in t) n in e || (e[n] = t[n]);
          return e;
        },
        Qy = function (e, t) {
          var n =
              t &&
              "matrix(1, 0, 0, 1, 0, 0)" !== Jy(e)[qv] &&
              Iv.to(e, {
                x: 0,
                y: 0,
                xPercent: 0,
                yPercent: 0,
                rotation: 0,
                rotationX: 0,
                rotationY: 0,
                scale: 1,
                skewX: 0,
                skewY: 0
              }).progress(1),
            r = e.getBoundingClientRect();
          return n && n.progress(0).kill(), r;
        },
        e_ = function (e, t) {
          var n = t.d2;
          return e["offset" + n] || e["client" + n] || 0;
        },
        t_ = function (e) {
          var t,
            n = [],
            r = e.labels,
            i = e.duration();
          for (t in r) n.push(r[t] / i);
          return n;
        },
        n_ = function (e) {
          var t = Iv.utils.snap(e),
            n =
              Array.isArray(e) &&
              e.slice(0).sort(function (e, t) {
                return e - t;
              });
          return n
            ? function (e, r, i) {
                var a;
                if ((void 0 === i && (i = 0.001), !r)) return t(e);
                if (r > 0) {
                  for (e -= i, a = 0; a < n.length; a++)
                    if (n[a] >= e) return n[a];
                  return n[a - 1];
                }
                for (a = n.length, e += i; a--; ) if (n[a] <= e) return n[a];
                return n[0];
              }
            : function (n, r, i) {
                void 0 === i && (i = 0.001);
                var a = t(n);
                return !r || Math.abs(a - n) < i || a - n < 0 == r < 0
                  ? a
                  : t(r < 0 ? n - e : n + e);
              };
        },
        r_ = function (e, t, n, r) {
          return n.split(",").forEach(function (n) {
            return e(t, n, r);
          });
        },
        i_ = function (e, t, n, r, i) {
          return e.addEventListener(t, n, { passive: !r, capture: !!i });
        },
        a_ = function (e, t, n, r) {
          return e.removeEventListener(t, n, !!r);
        },
        s_ = function (e, t, n) {
          (n = n && n.wheelHandler) && (e(t, "wheel", n), e(t, "touchmove", n));
        },
        o_ = {
          startColor: "green",
          endColor: "red",
          indent: 0,
          fontSize: "16px",
          fontWeight: "normal"
        },
        l_ = { toggleActions: "play", anticipatePin: 0 },
        h_ = { top: 0, left: 0, center: 0.5, bottom: 1, right: 1 },
        u_ = function (e, t) {
          if (Oy(e)) {
            var n = e.indexOf("="),
              r = ~n ? +(e.charAt(n - 1) + 1) * parseFloat(e.substr(n + 1)) : 0;
            ~n &&
              (e.indexOf("%") > n && (r *= t / 100), (e = e.substr(0, n - 1))),
              (e =
                r +
                (e in h_
                  ? h_[e] * t
                  : ~e.indexOf("%")
                  ? (parseFloat(e) * t) / 100
                  : parseFloat(e) || 0));
          }
          return e;
        },
        c_ = function (e, t, n, r, i, a, s, o) {
          var l = i.startColor,
            h = i.endColor,
            u = i.fontSize,
            c = i.indent,
            d = i.fontWeight,
            f = Ov.createElement("div"),
            p = Ry(n) || "fixed" === gv(n, "pinType"),
            m = -1 !== e.indexOf("scroller"),
            g = p ? Bv : n,
            v = -1 !== e.indexOf("start"),
            y = v ? l : h,
            _ =
              "border-color:" +
              y +
              ";font-size:" +
              u +
              ";color:" +
              y +
              ";font-weight:" +
              d +
              ";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";
          return (
            (_ += "position:" + ((m || o) && p ? "fixed;" : "absolute;")),
            (m || o || !p) &&
              (_ += (r === Ev ? Gy : Wy) + ":" + (a + parseFloat(c)) + "px;"),
            s &&
              (_ +=
                "box-sizing:border-box;text-align:left;width:" +
                s.offsetWidth +
                "px;"),
            (f._isStart = v),
            f.setAttribute(
              "class",
              "gsap-marker-" + e + (t ? " marker-" + t : "")
            ),
            (f.style.cssText = _),
            (f.innerText = t || 0 === t ? e + "-" + t : e),
            g.children[0] ? g.insertBefore(f, g.children[0]) : g.appendChild(f),
            (f._offset = f["offset" + r.op.d2]),
            d_(f, 0, r, v),
            f
          );
        },
        d_ = function (e, t, n, r) {
          var i = { display: "block" },
            a = n[r ? "os2" : "p2"],
            s = n[r ? "p2" : "os2"];
          (e._isFlipped = r),
            (i[n.a + "Percent"] = r ? -100 : 0),
            (i[n.a] = r ? "1px" : 0),
            (i["border" + a + Ky] = 1),
            (i["border" + s + Ky] = 0),
            (i[n.p] = t + "px"),
            Iv.set(e, i);
        },
        f_ = [],
        p_ = {},
        m_ = function () {
          return yy() - by > 34 && (fy || (fy = requestAnimationFrame(I_)));
        },
        g_ = function () {
          (!ty || !ty.isPressed || ty.startX > Bv.clientWidth) &&
            (dv.cache++,
            ty ? fy || (fy = requestAnimationFrame(I_)) : I_(),
            by || S_("scrollStart"),
            (by = yy()));
        },
        v_ = function () {
          (iy = Fv.innerWidth), (ry = Fv.innerHeight);
        },
        y_ = function () {
          dv.cache++,
            !jv &&
              !ey &&
              !Ov.fullscreenElement &&
              !Ov.webkitFullscreenElement &&
              (!ny ||
                iy !== Fv.innerWidth ||
                Math.abs(Fv.innerHeight - ry) > 0.25 * Fv.innerHeight) &&
              zv.restart(!0);
        },
        __ = {},
        b_ = [],
        x_ = function e() {
          return a_(q_, "scrollEnd", e) || k_(!0);
        },
        S_ = function (e) {
          return (
            (__[e] &&
              __[e].map(function (e) {
                return e();
              })) ||
            b_
          );
        },
        E_ = [],
        w_ = function (e) {
          for (var t = 0; t < E_.length; t += 5)
            (!e || (E_[t + 4] && E_[t + 4].query === e)) &&
              ((E_[t].style.cssText = E_[t + 1]),
              E_[t].getBBox && E_[t].setAttribute("transform", E_[t + 2] || ""),
              (E_[t + 3].uncache = 1));
        },
        T_ = function (e, t) {
          var n;
          for (Yv = 0; Yv < f_.length; Yv++)
            !(n = f_[Yv]) ||
              (t && n._ctx !== t) ||
              (e ? n.kill(1) : n.revert(!0, !0));
          (uy = !0), t && w_(t), t || S_("revert");
        },
        M_ = function (e, t) {
          dv.cache++,
            (t || !py) &&
              dv.forEach(function (e) {
                return Ny(e) && e.cacheID++ && (e.rec = 0);
              }),
            Oy(e) && (Fv.history.scrollRestoration = oy = e);
        },
        A_ = 0,
        C_ = function () {
          Bv.appendChild(ly),
            (hy = (!ty && ly.offsetHeight) || Fv.innerHeight),
            Bv.removeChild(ly);
        },
        P_ = function (e) {
          return Vv(
            ".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end"
          ).forEach(function (t) {
            return (t.style.display = e ? "none" : "block");
          });
        },
        k_ = function (e, t) {
          if (!by || e || uy) {
            C_(),
              (py = q_.isRefreshing = !0),
              dv.forEach(function (e) {
                return Ny(e) && ++e.cacheID && (e.rec = e());
              });
            var n = S_("refreshInit");
            $v && q_.sort(),
              t || T_(),
              dv.forEach(function (e) {
                Ny(e) &&
                  (e.smooth && (e.target.style.scrollBehavior = "auto"), e(0));
              }),
              f_.slice(0).forEach(function (e) {
                return e.refresh();
              }),
              (uy = !1),
              f_.forEach(function (e) {
                if (e._subPinOffset && e.pin) {
                  var t = e.vars.horizontal ? "offsetWidth" : "offsetHeight",
                    n = e.pin[t];
                  e.revert(!0, 1), e.adjustPinSpacing(e.pin[t] - n), e.refresh();
                }
              }),
              (cy = 1),
              P_(!0),
              f_.forEach(function (e) {
                var t = Ly(e.scroller, e._dir),
                  n = "max" === e.vars.end || (e._endClamp && e.end > t),
                  r = e._startClamp && e.start >= t;
                (n || r) &&
                  e.setPositions(
                    r ? t - 1 : e.start,
                    n ? Math.max(r ? t : e.start + 1, t) : e.end,
                    !0
                  );
              }),
              P_(!1),
              (cy = 0),
              n.forEach(function (e) {
                return e && e.render && e.render(-1);
              }),
              dv.forEach(function (e) {
                Ny(e) &&
                  (e.smooth &&
                    requestAnimationFrame(function () {
                      return (e.target.style.scrollBehavior = "smooth");
                    }),
                  e.rec && e(e.rec));
              }),
              M_(oy, 1),
              zv.pause(),
              A_++,
              (py = 2),
              I_(2),
              f_.forEach(function (e) {
                return Ny(e.vars.onRefresh) && e.vars.onRefresh(e);
              }),
              (py = q_.isRefreshing = !1),
              S_("refresh");
          } else i_(q_, "scrollEnd", x_);
        },
        R_ = 0,
        D_ = 1,
        I_ = function (e) {
          if (2 === e || (!py && !uy)) {
            (q_.isUpdating = !0), gy && gy.update(0);
            var t = f_.length,
              n = yy(),
              r = n - _y >= 50,
              i = t && f_[0].scroll();
            if (
              ((D_ = R_ > i ? -1 : 1),
              py || (R_ = i),
              r &&
                (by && !Xv && n - by > 200 && ((by = 0), S_("scrollEnd")),
                (Gv = _y),
                (_y = n)),
              D_ < 0)
            ) {
              for (Yv = t; Yv-- > 0; ) f_[Yv] && f_[Yv].update(0, r);
              D_ = 1;
            } else for (Yv = 0; Yv < t; Yv++) f_[Yv] && f_[Yv].update(0, r);
            q_.isUpdating = !1;
          }
          fy = 0;
        },
        L_ = [
          "left",
          "top",
          Wy,
          Gy,
          "marginBottom",
          "marginRight",
          "marginTop",
          "marginLeft",
          "display",
          "flexShrink",
          "float",
          "zIndex",
          "gridColumnStart",
          "gridColumnEnd",
          "gridRowStart",
          "gridRowEnd",
          "gridArea",
          "justifySelf",
          "alignSelf",
          "placeSelf",
          "order"
        ],
        F_ = L_.concat([
          jy,
          Xy,
          "boxSizing",
          "maxWidth",
          "maxHeight",
          "position",
          Yy,
          qy,
          "paddingTop",
          "paddingRight",
          "paddingBottom",
          "paddingLeft"
        ]),
        O_ = function (e, t, n, r) {
          if (!e._gsap.swappedIn) {
            for (var i, a = L_.length, s = t.style, o = e.style; a--; )
              s[(i = L_[a])] = n[i];
            (s.position = "absolute" === n.position ? "absolute" : "relative"),
              "inline" === n.display && (s.display = "inline-block"),
              (o.bottom = o.right = "auto"),
              (s.flexBasis = n.flexBasis || "auto"),
              (s.overflow = "visible"),
              (s.boxSizing = "border-box"),
              (s.width = e_(e, Sv) + Zy),
              (s.height = e_(e, Ev) + Zy),
              (s.padding = o.margin = o.top = o.left = "0"),
              B_(r),
              (o.width = o.maxWidth = n.width),
              (o.height = o.maxHeight = n.height),
              (o.padding = n.padding),
              e.parentNode !== t &&
                (e.parentNode.insertBefore(t, e), t.appendChild(e)),
              (e._gsap.swappedIn = !0);
          }
        },
        N_ = /([A-Z])/g,
        B_ = function (e) {
          if (e) {
            var t,
              n,
              r = e.t.style,
              i = e.length,
              a = 0;
            for ((e.t._gsap || Iv.core.getCache(e.t)).uncache = 1; a < i; a += 2)
              (n = e[a + 1]),
                (t = e[a]),
                n
                  ? (r[t] = n)
                  : r[t] && r.removeProperty(t.replace(N_, "-$1").toLowerCase());
          }
        },
        U_ = function (e) {
          for (var t = F_.length, n = e.style, r = [], i = 0; i < t; i++)
            r.push(F_[i], n[F_[i]]);
          return (r.t = e), r;
        },
        z_ = { left: 0, top: 0 },
        V_ = function (e, t, n, r, i, a, s, o, l, h, u, c, d, f) {
          Ny(e) && (e = e(o)),
            Oy(e) &&
              "max" === e.substr(0, 3) &&
              (e = c + ("=" === e.charAt(4) ? u_("0" + e.substr(3), n) : 0));
          var p,
            m,
            g,
            v = d ? d.time() : 0;
          if ((d && d.seek(0), isNaN(e) || (e = +e), By(e)))
            d &&
              (e = Iv.utils.mapRange(
                d.scrollTrigger.start,
                d.scrollTrigger.end,
                0,
                c,
                e
              )),
              s && d_(s, n, r, !0);
          else {
            Ny(t) && (t = t(o));
            var y,
              _,
              b,
              x,
              S = (e || "0").split(" ");
            (g = wv(t, o) || Bv),
              ((y = Qy(g) || {}) && (y.left || y.top)) ||
                "none" !== Jy(g).display ||
                ((x = g.style.display),
                (g.style.display = "block"),
                (y = Qy(g)),
                x ? (g.style.display = x) : g.style.removeProperty("display")),
              (_ = u_(S[0], y[r.d])),
              (b = u_(S[1] || "0", n)),
              (e = y[r.p] - l[r.p] - h + _ + i - b),
              s && d_(s, b, r, n - b < 20 || (s._isStart && b > 20)),
              (n -= n - b);
          }
          if ((f && ((o[f] = e || -0.001), e < 0 && (e = 0)), a)) {
            var E = e + n,
              w = a._isStart;
            (p = "scroll" + r.d2),
              d_(
                a,
                E,
                r,
                (w && E > 20) ||
                  (!w && (u ? Math.max(Bv[p], Nv[p]) : a.parentNode[p]) <= E + 1)
              ),
              u &&
                ((l = Qy(s)),
                u && (a.style[r.op.p] = l[r.op.p] - r.op.m - a._offset + Zy));
          }
          return (
            d &&
              g &&
              ((p = Qy(g)),
              d.seek(c),
              (m = Qy(g)),
              (d._caScrollDist = p[r.p] - m[r.p]),
              (e = (e / d._caScrollDist) * c)),
            d && d.seek(v),
            d ? e : Math.round(e)
          );
        },
        H_ = /(webkit|moz|length|cssText|inset)/i,
        G_ = function (e, t, n, r) {
          if (e.parentNode !== t) {
            var i,
              a,
              s = e.style;
            if (t === Bv) {
              for (i in ((e._stOrig = s.cssText), (a = Jy(e))))
                +i ||
                  H_.test(i) ||
                  !a[i] ||
                  "string" != typeof s[i] ||
                  "0" === i ||
                  (s[i] = a[i]);
              (s.top = n), (s.left = r);
            } else s.cssText = e._stOrig;
            (Iv.core.getCache(e).uncache = 1), t.appendChild(e);
          }
        },
        W_ = function (e, t, n) {
          var r = t,
            i = r;
          return function (t) {
            var a = Math.round(e());
            return (
              a !== r &&
                a !== i &&
                Math.abs(a - r) > 3 &&
                Math.abs(a - i) > 3 &&
                ((t = a), n && n()),
              (i = r),
              (r = t),
              t
            );
          };
        },
        j_ = function (e, t, n) {
          var r = {};
          (r[t.p] = "+=" + n), Iv.set(e, r);
        },
        X_ = function (e, t) {
          var n = Tv(e, t),
            r = "_scroll" + t.p2,
            i = function t(i, a, s, o, l) {
              var h = t.tween,
                u = a.onComplete,
                c = {};
              s = s || n();
              var d = W_(n, s, function () {
                h.kill(), (t.tween = 0);
              });
              return (
                (l = (o && l) || 0),
                (o = o || i - s),
                h && h.kill(),
                (a[r] = i),
                (a.modifiers = c),
                (c[r] = function () {
                  return d(s + o * h.ratio + l * h.ratio * h.ratio);
                }),
                (a.onUpdate = function () {
                  dv.cache++, t.tween && I_();
                }),
                (a.onComplete = function () {
                  (t.tween = 0), u && u.call(h);
                }),
                (h = t.tween = Iv.to(e, a))
              );
            };
          return (
            (e[r] = n),
            (n.wheelHandler = function () {
              return i.tween && i.tween.kill() && (i.tween = 0);
            }),
            i_(e, "wheel", n.wheelHandler),
            q_.isTouch && i_(e, "touchmove", n.wheelHandler),
            i
          );
        },
        q_ = (function () {
          function e(t, n) {
            Lv ||
              e.register(Iv) ||
              console.warn("Please gsap.registerPlugin(ScrollTrigger)"),
              sy(this),
              this.init(t, n);
          }
          return (
            (e.prototype.init = function (t, n) {
              if (
                ((this.progress = this.start = 0),
                this.vars && this.kill(!0, !0),
                xy)
              ) {
                var r,
                  i,
                  a,
                  s,
                  o,
                  l,
                  h,
                  u,
                  c,
                  d,
                  f,
                  p,
                  m,
                  g,
                  v,
                  y,
                  _,
                  b,
                  x,
                  S,
                  E,
                  w,
                  T,
                  M,
                  A,
                  C,
                  P,
                  k,
                  R,
                  D,
                  I,
                  L,
                  F,
                  O,
                  N,
                  B,
                  U,
                  z,
                  V,
                  H,
                  G,
                  W,
                  j = (t = $y(
                    Oy(t) || By(t) || t.nodeType ? { trigger: t } : t,
                    l_
                  )),
                  X = j.onUpdate,
                  q = j.toggleClass,
                  Y = j.id,
                  K = j.onToggle,
                  Z = j.onRefresh,
                  J = j.scrub,
                  $ = j.trigger,
                  Q = j.pin,
                  ee = j.pinSpacing,
                  te = j.invalidateOnRefresh,
                  ne = j.anticipatePin,
                  re = j.onScrubComplete,
                  ie = j.onSnapComplete,
                  ae = j.once,
                  se = j.snap,
                  oe = j.pinReparent,
                  le = j.pinSpacer,
                  he = j.containerAnimation,
                  ue = j.fastScrollEnd,
                  ce = j.preventOverlaps,
                  de =
                    t.horizontal || (t.containerAnimation && !1 !== t.horizontal)
                      ? Sv
                      : Ev,
                  fe = !J && 0 !== J,
                  pe = wv(t.scroller || Fv),
                  me = Iv.core.getCache(pe),
                  ge = Ry(pe),
                  ve =
                    "fixed" ===
                    ("pinType" in t
                      ? t.pinType
                      : gv(pe, "pinType") || (ge && "fixed")),
                  ye = [t.onEnter, t.onLeave, t.onEnterBack, t.onLeaveBack],
                  _e = fe && t.toggleActions.split(" "),
                  be = "markers" in t ? t.markers : l_.markers,
                  xe = ge ? 0 : parseFloat(Jy(pe)["border" + de.p2 + Ky]) || 0,
                  Se = this,
                  Ee =
                    t.onRefreshInit &&
                    function () {
                      return t.onRefreshInit(Se);
                    },
                  we = (function (e, t, n) {
                    var r = n.d,
                      i = n.d2,
                      a = n.a;
                    return (a = gv(e, "getBoundingClientRect"))
                      ? function () {
                          return a()[r];
                        }
                      : function () {
                          return (t ? Dy(i) : e["client" + i]) || 0;
                        };
                  })(pe, ge, de),
                  Te = (function (e, t) {
                    return !t || ~fv.indexOf(e)
                      ? Iy(e)
                      : function () {
                          return z_;
                        };
                  })(pe, ge),
                  Me = 0,
                  Ae = 0,
                  Ce = 0,
                  Pe = Tv(pe, de);
                if (
                  ((Se._startClamp = Se._endClamp = !1),
                  (Se._dir = de),
                  (ne *= 45),
                  (Se.scroller = pe),
                  (Se.scroll = he ? he.time.bind(he) : Pe),
                  (s = Pe()),
                  (Se.vars = t),
                  (n = n || t.animation),
                  "refreshPriority" in t &&
                    (($v = 1), -9999 === t.refreshPriority && (gy = Se)),
                  (me.tweenScroll = me.tweenScroll || {
                    top: X_(pe, Ev),
                    left: X_(pe, Sv)
                  }),
                  (Se.tweenTo = r = me.tweenScroll[de.p]),
                  (Se.scrubDuration = function (e) {
                    (F = By(e) && e)
                      ? L
                        ? L.duration(e)
                        : (L = Iv.to(n, {
                            ease: "expo",
                            totalProgress: "+=0",
                            duration: F,
                            paused: !0,
                            onComplete: function () {
                              return re && re(Se);
                            }
                          }))
                      : (L && L.progress(1).kill(), (L = 0));
                  }),
                  n &&
                    ((n.vars.lazy = !1),
                    (n._initted && !Se.isReverted) ||
                      (!1 !== n.vars.immediateRender &&
                        !1 !== t.immediateRender &&
                        n.duration() &&
                        n.render(0, !0, !0)),
                    (Se.animation = n.pause()),
                    (n.scrollTrigger = Se),
                    Se.scrubDuration(J),
                    (D = 0),
                    Y || (Y = n.vars.id)),
                  se &&
                    ((Uy(se) && !se.push) || (se = { snapTo: se }),
                    "scrollBehavior" in Bv.style &&
                      Iv.set(ge ? [Bv, Nv] : pe, { scrollBehavior: "auto" }),
                    dv.forEach(function (e) {
                      return (
                        Ny(e) &&
                        e.target === (ge ? Ov.scrollingElement || Nv : pe) &&
                        (e.smooth = !1)
                      );
                    }),
                    (a = Ny(se.snapTo)
                      ? se.snapTo
                      : "labels" === se.snapTo
                      ? (function (e) {
                          return function (t) {
                            return Iv.utils.snap(t_(e), t);
                          };
                        })(n)
                      : "labelsDirectional" === se.snapTo
                      ? ((H = n),
                        function (e, t) {
                          return n_(t_(H))(e, t.direction);
                        })
                      : !1 !== se.directional
                      ? function (e, t) {
                          return n_(se.snapTo)(
                            e,
                            yy() - Ae < 500 ? 0 : t.direction
                          );
                        }
                      : Iv.utils.snap(se.snapTo)),
                    (O = se.duration || { min: 0.1, max: 2 }),
                    (O = Uy(O) ? Hv(O.min, O.max) : Hv(O, O)),
                    (N = Iv.delayedCall(se.delay || F / 2 || 0.1, function () {
                      var e = Pe(),
                        t = yy() - Ae < 500,
                        i = r.tween;
                      if (
                        !(t || Math.abs(Se.getVelocity()) < 10) ||
                        i ||
                        Xv ||
                        Me === e
                      )
                        Se.isActive && Me !== e && N.restart(!0);
                      else {
                        var s = (e - l) / g,
                          o = n && !fe ? n.totalProgress() : s,
                          u = t ? 0 : ((o - I) / (yy() - Gv)) * 1e3 || 0,
                          c = Iv.utils.clamp(-s, 1 - s, (Hy(u / 2) * u) / 0.185),
                          d = s + (!1 === se.inertia ? 0 : c),
                          f = Hv(0, 1, a(d, Se)),
                          p = Math.round(l + f * g),
                          m = se,
                          v = m.onStart,
                          y = m.onInterrupt,
                          _ = m.onComplete;
                        if (e <= h && e >= l && p !== e) {
                          if (i && !i._initted && i.data <= Hy(p - e)) return;
                          !1 === se.inertia && (c = f - s),
                            r(
                              p,
                              {
                                duration: O(
                                  Hy(
                                    (0.185 * Math.max(Hy(d - o), Hy(f - o))) /
                                      u /
                                      0.05 || 0
                                  )
                                ),
                                ease: se.ease || "power3",
                                data: Hy(p - e),
                                onInterrupt: function () {
                                  return N.restart(!0) && y && y(Se);
                                },
                                onComplete: function () {
                                  Se.update(),
                                    (Me = Pe()),
                                    L && n && n.progress(f),
                                    (D = I =
                                      n && !fe ? n.totalProgress() : Se.progress),
                                    ie && ie(Se),
                                    _ && _(Se);
                                }
                              },
                              e,
                              c * g,
                              p - e - c * g
                            ),
                            v && v(Se, r.tween);
                        }
                      }
                    }).pause())),
                  Y && (p_[Y] = Se),
                  (V =
                    ($ = Se.trigger = wv($ || (!0 !== Q && Q))) &&
                    $._gsap &&
                    $._gsap.stRevert) && (V = V(Se)),
                  (Q = !0 === Q ? $ : wv(Q)),
                  Oy(q) && (q = { targets: $, className: q }),
                  Q &&
                    (!1 === ee ||
                      ee === Yy ||
                      (ee =
                        !(
                          !ee &&
                          Q.parentNode &&
                          Q.parentNode.style &&
                          "flex" === Jy(Q.parentNode).display
                        ) && qy),
                    (Se.pin = Q),
                    (i = Iv.core.getCache(Q)).spacer
                      ? (v = i.pinState)
                      : (le &&
                          ((le = wv(le)) &&
                            !le.nodeType &&
                            (le = le.current || le.nativeElement),
                          (i.spacerIsNative = !!le),
                          le && (i.spacerState = U_(le))),
                        (i.spacer = b = le || Ov.createElement("div")),
                        b.classList.add("pin-spacer"),
                        Y && b.classList.add("pin-spacer-" + Y),
                        (i.pinState = v = U_(Q))),
                    !1 !== t.force3D && Iv.set(Q, { force3D: !0 }),
                    (Se.spacer = b = i.spacer),
                    (R = Jy(Q)),
                    (M = R[ee + de.os2]),
                    (S = Iv.getProperty(Q)),
                    (E = Iv.quickSetter(Q, de.a, Zy)),
                    O_(Q, b, R),
                    (_ = U_(Q))),
                  be)
                ) {
                  (p = Uy(be) ? $y(be, o_) : o_),
                    (d = c_("scroller-start", Y, pe, de, p, 0)),
                    (f = c_("scroller-end", Y, pe, de, p, 0, d)),
                    (x = d["offset" + de.op.d2]);
                  var ke = wv(gv(pe, "content") || pe);
                  (u = this.markerStart = c_("start", Y, ke, de, p, x, 0, he)),
                    (c = this.markerEnd = c_("end", Y, ke, de, p, x, 0, he)),
                    he && (z = Iv.quickSetter([u, c], de.a, Zy)),
                    ve ||
                      (fv.length && !0 === gv(pe, "fixedMarkers")) ||
                      ((W = Jy((G = ge ? Bv : pe)).position),
                      (G.style.position =
                        "absolute" === W || "fixed" === W ? W : "relative"),
                      Iv.set([d, f], { force3D: !0 }),
                      (C = Iv.quickSetter(d, de.a, Zy)),
                      (k = Iv.quickSetter(f, de.a, Zy)));
                }
                if (he) {
                  var Re = he.vars.onUpdate,
                    De = he.vars.onUpdateParams;
                  he.eventCallback("onUpdate", function () {
                    Se.update(0, 0, 1), Re && Re.apply(he, De || []);
                  });
                }
                if (
                  ((Se.previous = function () {
                    return f_[f_.indexOf(Se) - 1];
                  }),
                  (Se.next = function () {
                    return f_[f_.indexOf(Se) + 1];
                  }),
                  (Se.revert = function (e, t) {
                    if (!t) return Se.kill(!0);
                    var r = !1 !== e || !Se.enabled,
                      i = jv;
                    r !== Se.isReverted &&
                      (r &&
                        ((B = Math.max(Pe(), Se.scroll.rec || 0)),
                        (Ce = Se.progress),
                        (U = n && n.progress())),
                      u &&
                        [u, c, d, f].forEach(function (e) {
                          return (e.style.display = r ? "none" : "block");
                        }),
                      r && ((jv = Se), Se.update(r)),
                      !Q ||
                        (oe && Se.isActive) ||
                        (r
                          ? (function (e, t, n) {
                              B_(n);
                              var r = e._gsap;
                              if (r.spacerIsNative) B_(r.spacerState);
                              else if (e._gsap.swappedIn) {
                                var i = t.parentNode;
                                i && (i.insertBefore(e, t), i.removeChild(t));
                              }
                              e._gsap.swappedIn = !1;
                            })(Q, b, v)
                          : O_(Q, b, Jy(Q), A)),
                      r || Se.update(r),
                      (jv = i),
                      (Se.isReverted = r));
                  }),
                  (Se.refresh = function (i, a, p, x) {
                    if ((!jv && Se.enabled) || a)
                      if (Q && i && by) i_(e, "scrollEnd", x_);
                      else {
                        !py && Ee && Ee(Se),
                          (jv = Se),
                          r.tween && !p && (r.tween.kill(), (r.tween = 0)),
                          L && L.pause(),
                          te && n && n.revert({ kill: !1 }).invalidate(),
                          Se.isReverted || Se.revert(!0, !0),
                          (Se._subPinOffset = !1);
                        var E,
                          M,
                          C,
                          k,
                          R,
                          D,
                          I,
                          F,
                          O,
                          z,
                          V,
                          H,
                          G,
                          W = we(),
                          j = Te(),
                          X = he ? he.duration() : Ly(pe, de),
                          q = g <= 0.01,
                          Y = 0,
                          K = x || 0,
                          J = Uy(p) ? p.end : t.end,
                          ne = t.endTrigger || $,
                          re = Uy(p)
                            ? p.start
                            : t.start ||
                              (0 !== t.start && $ ? (Q ? "0 0" : "0 100%") : 0),
                          ie = (Se.pinnedContainer =
                            t.pinnedContainer && wv(t.pinnedContainer, Se)),
                          ae = ($ && Math.max(0, f_.indexOf(Se))) || 0,
                          se = ae;
                        for (
                          be &&
                          Uy(p) &&
                          ((H = Iv.getProperty(d, de.p)),
                          (G = Iv.getProperty(f, de.p)));
                          se--;
  
                        )
                          (D = f_[se]).end || D.refresh(0, 1) || (jv = Se),
                            !(I = D.pin) ||
                              (I !== $ && I !== Q && I !== ie) ||
                              D.isReverted ||
                              (z || (z = []), z.unshift(D), D.revert(!0, !0)),
                            D !== f_[se] && (ae--, se--);
                        for (
                          Ny(re) && (re = re(Se)),
                            re = Sy(re, "start", Se),
                            l =
                              V_(
                                re,
                                $,
                                W,
                                de,
                                Pe(),
                                u,
                                d,
                                Se,
                                j,
                                xe,
                                ve,
                                X,
                                he,
                                Se._startClamp && "_startClamp"
                              ) || (Q ? -0.001 : 0),
                            Ny(J) && (J = J(Se)),
                            Oy(J) &&
                              !J.indexOf("+=") &&
                              (~J.indexOf(" ")
                                ? (J = (Oy(re) ? re.split(" ")[0] : "") + J)
                                : ((Y = u_(J.substr(2), W)),
                                  (J = Oy(re)
                                    ? re
                                    : (he
                                        ? Iv.utils.mapRange(
                                            0,
                                            he.duration(),
                                            he.scrollTrigger.start,
                                            he.scrollTrigger.end,
                                            l
                                          )
                                        : l) + Y),
                                  (ne = $))),
                            J = Sy(J, "end", Se),
                            h =
                              Math.max(
                                l,
                                V_(
                                  J || (ne ? "100% 0" : X),
                                  ne,
                                  W,
                                  de,
                                  Pe() + Y,
                                  c,
                                  f,
                                  Se,
                                  j,
                                  xe,
                                  ve,
                                  X,
                                  he,
                                  Se._endClamp && "_endClamp"
                                )
                              ) || -0.001,
                            Y = 0,
                            se = ae;
                          se--;
  
                        )
                          (I = (D = f_[se]).pin) &&
                            D.start - D._pinPush <= l &&
                            !he &&
                            D.end > 0 &&
                            ((E =
                              D.end -
                              (Se._startClamp ? Math.max(0, D.start) : D.start)),
                            ((I === $ && D.start - D._pinPush < l) || I === ie) &&
                              isNaN(re) &&
                              (Y += E * (1 - D.progress)),
                            I === Q && (K += E));
                        if (
                          ((l += Y),
                          (h += Y),
                          Se._startClamp && (Se._startClamp += Y),
                          Se._endClamp &&
                            !py &&
                            ((Se._endClamp = h || -0.001),
                            (h = Math.min(h, Ly(pe, de)))),
                          (g = h - l || ((l -= 0.01) && 0.001)),
                          q &&
                            (Ce = Iv.utils.clamp(
                              0,
                              1,
                              Iv.utils.normalize(l, h, B)
                            )),
                          (Se._pinPush = K),
                          u &&
                            Y &&
                            (((E = {})[de.a] = "+=" + Y),
                            ie && (E[de.p] = "-=" + Pe()),
                            Iv.set([u, c], E)),
                          !Q || (cy && Se.end >= Ly(pe, de)))
                        ) {
                          if ($ && Pe() && !he)
                            for (M = $.parentNode; M && M !== Bv; )
                              M._pinOffset &&
                                ((l -= M._pinOffset), (h -= M._pinOffset)),
                                (M = M.parentNode);
                        } else
                          (E = Jy(Q)),
                            (k = de === Ev),
                            (C = Pe()),
                            (w = parseFloat(S(de.a)) + K),
                            !X &&
                              h > 1 &&
                              ((V = {
                                style: (V = (ge ? Ov.scrollingElement || Nv : pe)
                                  .style),
                                value: V["overflow" + de.a.toUpperCase()]
                              }),
                              ge &&
                                "scroll" !==
                                  Jy(Bv)["overflow" + de.a.toUpperCase()] &&
                                (V.style["overflow" + de.a.toUpperCase()] =
                                  "scroll")),
                            O_(Q, b, E),
                            (_ = U_(Q)),
                            (M = Qy(Q, !0)),
                            (F = ve && Tv(pe, k ? Sv : Ev)()),
                            ee &&
                              (((A = [ee + de.os2, g + K + Zy]).t = b),
                              (se = ee === qy ? e_(Q, de) + g + K : 0) &&
                                (A.push(de.d, se + Zy),
                                "auto" !== b.style.flexBasis &&
                                  (b.style.flexBasis = se + Zy)),
                              B_(A),
                              ie &&
                                f_.forEach(function (e) {
                                  e.pin === ie &&
                                    !1 !== e.vars.pinSpacing &&
                                    (e._subPinOffset = !0);
                                }),
                              ve && Pe(B)),
                            ve &&
                              (((R = {
                                top: M.top + (k ? C - l : F) + Zy,
                                left: M.left + (k ? F : C - l) + Zy,
                                boxSizing: "border-box",
                                position: "fixed"
                              }).width = R.maxWidth =
                                Math.ceil(M.width) + Zy),
                              (R.height = R.maxHeight = Math.ceil(M.height) + Zy),
                              (R.margin =
                                R.marginTop =
                                R.marginRight =
                                R.marginBottom =
                                R.marginLeft =
                                  "0"),
                              (R.padding = E.padding),
                              (R.paddingTop = E.paddingTop),
                              (R.paddingRight = E.paddingRight),
                              (R.paddingBottom = E.paddingBottom),
                              (R.paddingLeft = E.paddingLeft),
                              (y = (function (e, t, n) {
                                for (
                                  var r, i = [], a = e.length, s = n ? 8 : 0;
                                  s < a;
                                  s += 2
                                )
                                  (r = e[s]), i.push(r, r in t ? t[r] : e[s + 1]);
                                return (i.t = e.t), i;
                              })(v, R, oe)),
                              py && Pe(0)),
                            n
                              ? ((O = n._initted),
                                Qv(1),
                                n.render(n.duration(), !0, !0),
                                (T = S(de.a) - w + g + K),
                                (P = Math.abs(g - T) > 1),
                                ve && P && y.splice(y.length - 2, 2),
                                n.render(0, !0, !0),
                                O || n.invalidate(!0),
                                n.parent || n.totalTime(n.totalTime()),
                                Qv(0))
                              : (T = g),
                            V &&
                              (V.value
                                ? (V.style["overflow" + de.a.toUpperCase()] =
                                    V.value)
                                : V.style.removeProperty("overflow-" + de.a));
                        z &&
                          z.forEach(function (e) {
                            return e.revert(!1, !0);
                          }),
                          (Se.start = l),
                          (Se.end = h),
                          (s = o = py ? B : Pe()),
                          he || py || (s < B && Pe(B), (Se.scroll.rec = 0)),
                          Se.revert(!1, !0),
                          (Ae = yy()),
                          N && ((Me = -1), N.restart(!0)),
                          (jv = 0),
                          n &&
                            fe &&
                            (n._initted || U) &&
                            n.progress() !== U &&
                            n.progress(U || 0, !0).render(n.time(), !0, !0),
                          (q || Ce !== Se.progress || he) &&
                            (n &&
                              !fe &&
                              n.totalProgress(
                                he && l < -0.001 && !Ce
                                  ? Iv.utils.normalize(l, h, 0)
                                  : Ce,
                                !0
                              ),
                            (Se.progress = q || (s - l) / g === Ce ? 0 : Ce)),
                          Q && ee && (b._pinOffset = Math.round(Se.progress * T)),
                          L && L.invalidate(),
                          isNaN(H) ||
                            ((H -= Iv.getProperty(d, de.p)),
                            (G -= Iv.getProperty(f, de.p)),
                            j_(d, de, H),
                            j_(u, de, H - (x || 0)),
                            j_(f, de, G),
                            j_(c, de, G - (x || 0))),
                          q && !py && Se.update(),
                          !Z || py || m || ((m = !0), Z(Se), (m = !1));
                      }
                  }),
                  (Se.getVelocity = function () {
                    return ((Pe() - o) / (yy() - Gv)) * 1e3 || 0;
                  }),
                  (Se.endAnimation = function () {
                    zy(Se.callbackAnimation),
                      n &&
                        (L
                          ? L.progress(1)
                          : n.paused()
                          ? fe || zy(n, Se.direction < 0, 1)
                          : zy(n, n.reversed()));
                  }),
                  (Se.labelToScroll = function (e) {
                    return (
                      (n &&
                        n.labels &&
                        (l || Se.refresh() || l) +
                          (n.labels[e] / n.duration()) * g) ||
                      0
                    );
                  }),
                  (Se.getTrailing = function (e) {
                    var t = f_.indexOf(Se),
                      n =
                        Se.direction > 0
                          ? f_.slice(0, t).reverse()
                          : f_.slice(t + 1);
                    return (
                      Oy(e)
                        ? n.filter(function (t) {
                            return t.vars.preventOverlaps === e;
                          })
                        : n
                    ).filter(function (e) {
                      return Se.direction > 0 ? e.end <= l : e.start >= h;
                    });
                  }),
                  (Se.update = function (e, t, i) {
                    if (!he || i || e) {
                      var a,
                        u,
                        c,
                        f,
                        p,
                        m,
                        v,
                        x = !0 === py ? B : Se.scroll(),
                        S = e ? 0 : (x - l) / g,
                        A = S < 0 ? 0 : S > 1 ? 1 : S || 0,
                        R = Se.progress;
                      if (
                        (t &&
                          ((o = s),
                          (s = he ? Pe() : x),
                          se &&
                            ((I = D), (D = n && !fe ? n.totalProgress() : A))),
                        ne &&
                          !A &&
                          Q &&
                          !jv &&
                          !vy &&
                          by &&
                          l < x + ((x - o) / (yy() - Gv)) * ne &&
                          (A = 1e-4),
                        A !== R && Se.enabled)
                      ) {
                        if (
                          ((f =
                            (p =
                              (a = Se.isActive = !!A && A < 1) !=
                              (!!R && R < 1)) || !!A != !!R),
                          (Se.direction = A > R ? 1 : -1),
                          (Se.progress = A),
                          f &&
                            !jv &&
                            ((u = A && !R ? 0 : 1 === A ? 1 : 1 === R ? 2 : 3),
                            fe &&
                              ((c =
                                (!p && "none" !== _e[u + 1] && _e[u + 1]) ||
                                _e[u]),
                              (v =
                                n &&
                                ("complete" === c || "reset" === c || c in n)))),
                          ce &&
                            (p || v) &&
                            (v || J || !n) &&
                            (Ny(ce)
                              ? ce(Se)
                              : Se.getTrailing(ce).forEach(function (e) {
                                  return e.endAnimation();
                                })),
                          fe ||
                            (!L || jv || vy
                              ? n && n.totalProgress(A, !(!jv || (!Ae && !e)))
                              : (L._dp._time - L._start !== L._time &&
                                  L.render(L._dp._time - L._start),
                                L.resetTo
                                  ? L.resetTo(
                                      "totalProgress",
                                      A,
                                      n._tTime / n._tDur
                                    )
                                  : ((L.vars.totalProgress = A),
                                    L.invalidate().restart()))),
                          Q)
                        )
                          if ((e && ee && (b.style[ee + de.os2] = M), ve)) {
                            if (f) {
                              if (
                                ((m =
                                  !e &&
                                  A > R &&
                                  h + 1 > x &&
                                  x + 1 >= Ly(pe, de)),
                                oe)
                              )
                                if (e || (!a && !m)) G_(Q, b);
                                else {
                                  var F = Qy(Q, !0),
                                    O = x - l;
                                  G_(
                                    Q,
                                    Bv,
                                    F.top + (de === Ev ? O : 0) + Zy,
                                    F.left + (de === Ev ? 0 : O) + Zy
                                  );
                                }
                              B_(a || m ? y : _),
                                (P && A < 1 && a) ||
                                  E(w + (1 !== A || m ? 0 : T));
                            }
                          } else E(Cy(w + T * A));
                        se && !r.tween && !jv && !vy && N.restart(!0),
                          q &&
                            (p || (ae && A && (A < 1 || !dy))) &&
                            Vv(q.targets).forEach(function (e) {
                              return e.classList[a || ae ? "add" : "remove"](
                                q.className
                              );
                            }),
                          X && !fe && !e && X(Se),
                          f && !jv
                            ? (fe &&
                                (v &&
                                  ("complete" === c
                                    ? n.pause().totalProgress(1)
                                    : "reset" === c
                                    ? n.restart(!0).pause()
                                    : "restart" === c
                                    ? n.restart(!0)
                                    : n[c]()),
                                X && X(Se)),
                              (!p && dy) ||
                                (K && p && Vy(Se, K),
                                ye[u] && Vy(Se, ye[u]),
                                ae && (1 === A ? Se.kill(!1, 1) : (ye[u] = 0)),
                                p ||
                                  (ye[(u = 1 === A ? 1 : 3)] && Vy(Se, ye[u]))),
                              ue &&
                                !a &&
                                Math.abs(Se.getVelocity()) >
                                  (By(ue) ? ue : 2500) &&
                                (zy(Se.callbackAnimation),
                                L
                                  ? L.progress(1)
                                  : zy(n, "reverse" === c ? 1 : !A, 1)))
                            : fe && X && !jv && X(Se);
                      }
                      if (k) {
                        var U = he
                          ? (x / he.duration()) * (he._caScrollDist || 0)
                          : x;
                        C(U + (d._isFlipped ? 1 : 0)), k(U);
                      }
                      z && z((-x / he.duration()) * (he._caScrollDist || 0));
                    }
                  }),
                  (Se.enable = function (t, n) {
                    Se.enabled ||
                      ((Se.enabled = !0),
                      i_(pe, "resize", y_),
                      ge || i_(pe, "scroll", g_),
                      Ee && i_(e, "refreshInit", Ee),
                      !1 !== t && ((Se.progress = Ce = 0), (s = o = Me = Pe())),
                      !1 !== n && Se.refresh());
                  }),
                  (Se.getTween = function (e) {
                    return e && r ? r.tween : L;
                  }),
                  (Se.setPositions = function (e, t, n, r) {
                    if (he) {
                      var i = he.scrollTrigger,
                        a = he.duration(),
                        s = i.end - i.start;
                      (e = i.start + (s * e) / a), (t = i.start + (s * t) / a);
                    }
                    Se.refresh(
                      !1,
                      !1,
                      {
                        start: Ey(e, n && !!Se._startClamp),
                        end: Ey(t, n && !!Se._endClamp)
                      },
                      r
                    ),
                      Se.update();
                  }),
                  (Se.adjustPinSpacing = function (e) {
                    if (A && e) {
                      var t = A.indexOf(de.d) + 1;
                      (A[t] = parseFloat(A[t]) + e + Zy),
                        (A[1] = parseFloat(A[1]) + e + Zy),
                        B_(A);
                    }
                  }),
                  (Se.disable = function (t, n) {
                    if (
                      Se.enabled &&
                      (!1 !== t && Se.revert(!0, !0),
                      (Se.enabled = Se.isActive = !1),
                      n || (L && L.pause()),
                      (B = 0),
                      i && (i.uncache = 1),
                      Ee && a_(e, "refreshInit", Ee),
                      N &&
                        (N.pause(), r.tween && r.tween.kill() && (r.tween = 0)),
                      !ge)
                    ) {
                      for (var a = f_.length; a--; )
                        if (f_[a].scroller === pe && f_[a] !== Se) return;
                      a_(pe, "resize", y_), ge || a_(pe, "scroll", g_);
                    }
                  }),
                  (Se.kill = function (e, r) {
                    Se.disable(e, r), L && !r && L.kill(), Y && delete p_[Y];
                    var a = f_.indexOf(Se);
                    a >= 0 && f_.splice(a, 1),
                      a === Yv && D_ > 0 && Yv--,
                      (a = 0),
                      f_.forEach(function (e) {
                        return e.scroller === Se.scroller && (a = 1);
                      }),
                      a || py || (Se.scroll.rec = 0),
                      n &&
                        ((n.scrollTrigger = null),
                        e && n.revert({ kill: !1 }),
                        r || n.kill()),
                      u &&
                        [u, c, d, f].forEach(function (e) {
                          return e.parentNode && e.parentNode.removeChild(e);
                        }),
                      gy === Se && (gy = 0),
                      Q &&
                        (i && (i.uncache = 1),
                        (a = 0),
                        f_.forEach(function (e) {
                          return e.pin === Q && a++;
                        }),
                        a || (i.spacer = 0)),
                      t.onKill && t.onKill(Se);
                  }),
                  f_.push(Se),
                  Se.enable(!1, !1),
                  V && V(Se),
                  n && n.add && !g)
                ) {
                  var Ie = Se.update;
                  (Se.update = function () {
                    (Se.update = Ie), l || h || Se.refresh();
                  }),
                    Iv.delayedCall(0.01, Se.update),
                    (g = 0.01),
                    (l = h = 0);
                } else Se.refresh();
                Q &&
                  (function () {
                    if (my !== A_) {
                      var e = (my = A_);
                      requestAnimationFrame(function () {
                        return e === A_ && k_(!0);
                      });
                    }
                  })();
              } else this.update = this.refresh = this.kill = Ay;
            }),
            (e.register = function (t) {
              return (
                Lv ||
                  ((Iv = t || ky()),
                  Py() && window.document && e.enable(),
                  (Lv = xy)),
                Lv
              );
            }),
            (e.defaults = function (e) {
              if (e) for (var t in e) l_[t] = e[t];
              return l_;
            }),
            (e.disable = function (e, t) {
              (xy = 0),
                f_.forEach(function (n) {
                  return n[t ? "kill" : "disable"](e);
                }),
                a_(Fv, "wheel", g_),
                a_(Ov, "scroll", g_),
                clearInterval(Wv),
                a_(Ov, "touchcancel", Ay),
                a_(Bv, "touchstart", Ay),
                r_(a_, Ov, "pointerdown,touchstart,mousedown", Ty),
                r_(a_, Ov, "pointerup,touchend,mouseup", My),
                zv.kill(),
                Fy(a_);
              for (var n = 0; n < dv.length; n += 3)
                s_(a_, dv[n], dv[n + 1]), s_(a_, dv[n], dv[n + 2]);
            }),
            (e.enable = function () {
              if (
                ((Fv = window),
                (Ov = document),
                (Nv = Ov.documentElement),
                (Bv = Ov.body),
                Iv &&
                  ((Vv = Iv.utils.toArray),
                  (Hv = Iv.utils.clamp),
                  (sy = Iv.core.context || Ay),
                  (Qv = Iv.core.suppressOverwrites || Ay),
                  (oy = Fv.history.scrollRestoration || "auto"),
                  (R_ = Fv.pageYOffset),
                  Iv.core.globals("ScrollTrigger", e),
                  Bv))
              ) {
                (xy = 1),
                  ((ly = document.createElement("div")).style.height = "100vh"),
                  (ly.style.position = "absolute"),
                  C_(),
                  wy(),
                  Rv.register(Iv),
                  (e.isTouch = Rv.isTouch),
                  (ay =
                    Rv.isTouch &&
                    /(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent)),
                  i_(Fv, "wheel", g_),
                  (Uv = [Fv, Ov, Nv, Bv]),
                  Iv.matchMedia
                    ? ((e.matchMedia = function (e) {
                        var t,
                          n = Iv.matchMedia();
                        for (t in e) n.add(t, e[t]);
                        return n;
                      }),
                      Iv.addEventListener("matchMediaInit", function () {
                        return T_();
                      }),
                      Iv.addEventListener("matchMediaRevert", function () {
                        return w_();
                      }),
                      Iv.addEventListener("matchMedia", function () {
                        k_(0, 1), S_("matchMedia");
                      }),
                      Iv.matchMedia("(orientation: portrait)", function () {
                        return v_(), v_;
                      }))
                    : console.warn("Requires GSAP 3.11.0 or later"),
                  v_(),
                  i_(Ov, "scroll", g_);
                var t,
                  n,
                  r = Bv.style,
                  i = r.borderTopStyle,
                  a = Iv.core.Animation.prototype;
                for (
                  a.revert ||
                    Object.defineProperty(a, "revert", {
                      value: function () {
                        return this.time(-0.01, !0);
                      }
                    }),
                    r.borderTopStyle = "solid",
                    t = Qy(Bv),
                    Ev.m = Math.round(t.top + Ev.sc()) || 0,
                    Sv.m = Math.round(t.left + Sv.sc()) || 0,
                    i
                      ? (r.borderTopStyle = i)
                      : r.removeProperty("border-top-style"),
                    Wv = setInterval(m_, 250),
                    Iv.delayedCall(0.5, function () {
                      return (vy = 0);
                    }),
                    i_(Ov, "touchcancel", Ay),
                    i_(Bv, "touchstart", Ay),
                    r_(i_, Ov, "pointerdown,touchstart,mousedown", Ty),
                    r_(i_, Ov, "pointerup,touchend,mouseup", My),
                    qv = Iv.utils.checkPrefix("transform"),
                    F_.push(qv),
                    Lv = yy(),
                    zv = Iv.delayedCall(0.2, k_).pause(),
                    Jv = [
                      Ov,
                      "visibilitychange",
                      function () {
                        var e = Fv.innerWidth,
                          t = Fv.innerHeight;
                        Ov.hidden
                          ? ((Kv = e), (Zv = t))
                          : (Kv === e && Zv === t) || y_();
                      },
                      Ov,
                      "DOMContentLoaded",
                      k_,
                      Fv,
                      "load",
                      k_,
                      Fv,
                      "resize",
                      y_
                    ],
                    Fy(i_),
                    f_.forEach(function (e) {
                      return e.enable(0, 1);
                    }),
                    n = 0;
                  n < dv.length;
                  n += 3
                )
                  s_(a_, dv[n], dv[n + 1]), s_(a_, dv[n], dv[n + 2]);
              }
            }),
            (e.config = function (t) {
              "limitCallbacks" in t && (dy = !!t.limitCallbacks);
              var n = t.syncInterval;
              (n && clearInterval(Wv)) || ((Wv = n) && setInterval(m_, n)),
                "ignoreMobileResize" in t &&
                  (ny = 1 === e.isTouch && t.ignoreMobileResize),
                "autoRefreshEvents" in t &&
                  (Fy(a_) || Fy(i_, t.autoRefreshEvents || "none"),
                  (ey = -1 === (t.autoRefreshEvents + "").indexOf("resize")));
            }),
            (e.scrollerProxy = function (e, t) {
              var n = wv(e),
                r = dv.indexOf(n),
                i = Ry(n);
              ~r && dv.splice(r, i ? 6 : 2),
                t && (i ? fv.unshift(Fv, t, Bv, t, Nv, t) : fv.unshift(n, t));
            }),
            (e.clearMatchMedia = function (e) {
              f_.forEach(function (t) {
                return t._ctx && t._ctx.query === e && t._ctx.kill(!0, !0);
              });
            }),
            (e.isInViewport = function (e, t, n) {
              var r = (Oy(e) ? wv(e) : e).getBoundingClientRect(),
                i = r[n ? jy : Xy] * t || 0;
              return n
                ? r.right - i > 0 && r.left + i < Fv.innerWidth
                : r.bottom - i > 0 && r.top + i < Fv.innerHeight;
            }),
            (e.positionInViewport = function (e, t, n) {
              Oy(e) && (e = wv(e));
              var r = e.getBoundingClientRect(),
                i = r[n ? jy : Xy],
                a =
                  null == t
                    ? i / 2
                    : t in h_
                    ? h_[t] * i
                    : ~t.indexOf("%")
                    ? (parseFloat(t) * i) / 100
                    : parseFloat(t) || 0;
              return n
                ? (r.left + a) / Fv.innerWidth
                : (r.top + a) / Fv.innerHeight;
            }),
            (e.killAll = function (e) {
              if (
                (f_.slice(0).forEach(function (e) {
                  return "ScrollSmoother" !== e.vars.id && e.kill();
                }),
                !0 !== e)
              ) {
                var t = __.killAll || [];
                (__ = {}),
                  t.forEach(function (e) {
                    return e();
                  });
              }
            }),
            e
          );
        })();
      (q_.version = "3.12.4"),
        (q_.saveStyles = function (e) {
          return e
            ? Vv(e).forEach(function (e) {
                if (e && e.style) {
                  var t = E_.indexOf(e);
                  t >= 0 && E_.splice(t, 5),
                    E_.push(
                      e,
                      e.style.cssText,
                      e.getBBox && e.getAttribute("transform"),
                      Iv.core.getCache(e),
                      sy()
                    );
                }
              })
            : E_;
        }),
        (q_.revert = function (e, t) {
          return T_(!e, t);
        }),
        (q_.create = function (e, t) {
          return new q_(e, t);
        }),
        (q_.refresh = function (e) {
          return e ? y_() : (Lv || q_.register()) && k_(!0);
        }),
        (q_.update = function (e) {
          return ++dv.cache && I_(!0 === e ? 2 : 0);
        }),
        (q_.clearScrollMemory = M_),
        (q_.maxScroll = function (e, t) {
          return Ly(e, t ? Sv : Ev);
        }),
        (q_.getScrollFunc = function (e, t) {
          return Tv(wv(e), t ? Sv : Ev);
        }),
        (q_.getById = function (e) {
          return p_[e];
        }),
        (q_.getAll = function () {
          return f_.filter(function (e) {
            return "ScrollSmoother" !== e.vars.id;
          });
        }),
        (q_.isScrolling = function () {
          return !!by;
        }),
        (q_.snapDirectional = n_),
        (q_.addEventListener = function (e, t) {
          var n = __[e] || (__[e] = []);
          ~n.indexOf(t) || n.push(t);
        }),
        (q_.removeEventListener = function (e, t) {
          var n = __[e],
            r = n && n.indexOf(t);
          r >= 0 && n.splice(r, 1);
        }),
        (q_.batch = function (e, t) {
          var n,
            r = [],
            i = {},
            a = t.interval || 0.016,
            s = t.batchMax || 1e9,
            o = function (e, t) {
              var n = [],
                r = [],
                i = Iv.delayedCall(a, function () {
                  t(n, r), (n = []), (r = []);
                }).pause();
              return function (e) {
                n.length || i.restart(!0),
                  n.push(e.trigger),
                  r.push(e),
                  s <= n.length && i.progress(1);
              };
            };
          for (n in t)
            i[n] =
              "on" === n.substr(0, 2) && Ny(t[n]) && "onRefreshInit" !== n
                ? o(0, t[n])
                : t[n];
          return (
            Ny(s) &&
              ((s = s()),
              i_(q_, "refresh", function () {
                return (s = t.batchMax());
              })),
            Vv(e).forEach(function (e) {
              var t = {};
              for (n in i) t[n] = i[n];
              (t.trigger = e), r.push(q_.create(t));
            }),
            r
          );
        });
      var Y_,
        K_ = function (e, t, n, r) {
          return (
            t > r ? e(r) : t < 0 && e(0),
            n > r ? (r - t) / (n - t) : n < 0 ? t / (t - n) : 1
          );
        },
        Z_ = function e(t, n) {
          !0 === n
            ? t.style.removeProperty("touch-action")
            : (t.style.touchAction =
                !0 === n
                  ? "auto"
                  : n
                  ? "pan-" + n + (Rv.isTouch ? " pinch-zoom" : "")
                  : "none"),
            t === Nv && e(Bv, n);
        },
        J_ = { auto: 1, scroll: 1 },
        $_ = function (e) {
          var t,
            n = e.event,
            r = e.target,
            i = e.axis,
            a = (n.changedTouches ? n.changedTouches[0] : n).target,
            s = a._gsap || Iv.core.getCache(a),
            o = yy();
          if (!s._isScrollT || o - s._isScrollT > 2e3) {
            for (
              ;
              a &&
              a !== Bv &&
              ((a.scrollHeight <= a.clientHeight &&
                a.scrollWidth <= a.clientWidth) ||
                (!J_[(t = Jy(a)).overflowY] && !J_[t.overflowX]));
  
            )
              a = a.parentNode;
            (s._isScroll =
              a &&
              a !== r &&
              !Ry(a) &&
              (J_[(t = Jy(a)).overflowY] || J_[t.overflowX])),
              (s._isScrollT = o);
          }
          (s._isScroll || "x" === i) &&
            (n.stopPropagation(), (n._gsapAllow = !0));
        },
        Q_ = function (e, t, n, r) {
          return Rv.create({
            target: e,
            capture: !0,
            debounce: !1,
            lockAxis: !0,
            type: t,
            onWheel: (r = r && $_),
            onPress: r,
            onDrag: r,
            onScroll: r,
            onEnable: function () {
              return n && i_(Ov, Rv.eventTypes[0], tb, !1, !0);
            },
            onDisable: function () {
              return a_(Ov, Rv.eventTypes[0], tb, !0);
            }
          });
        },
        eb = /(input|label|select|textarea)/i,
        tb = function (e) {
          var t = eb.test(e.target.tagName);
          (t || Y_) && ((e._gsapAllow = !0), (Y_ = t));
        };
      (q_.sort = function (e) {
        return f_.sort(
          e ||
            function (e, t) {
              return (
                -1e6 * (e.vars.refreshPriority || 0) +
                e.start -
                (t.start + -1e6 * (t.vars.refreshPriority || 0))
              );
            }
        );
      }),
        (q_.observe = function (e) {
          return new Rv(e);
        }),
        (q_.normalizeScroll = function (e) {
          if (void 0 === e) return ty;
          if (!0 === e && ty) return ty.enable();
          if (!1 === e) return ty && ty.kill(), void (ty = e);
          var t =
            e instanceof Rv
              ? e
              : (function (e) {
                  Uy(e) || (e = {}),
                    (e.preventDefault = e.isNormalizer = e.allowClicks = !0),
                    e.type || (e.type = "wheel,touch"),
                    (e.debounce = !!e.debounce),
                    (e.id = e.id || "normalizer");
                  var t,
                    n,
                    r,
                    i,
                    a,
                    s,
                    o,
                    l,
                    h = e,
                    u = h.normalizeScrollX,
                    c = h.momentum,
                    d = h.allowNestedScroll,
                    f = h.onRelease,
                    p = wv(e.target) || Nv,
                    m = Iv.core.globals().ScrollSmoother,
                    g = m && m.get(),
                    v =
                      ay &&
                      ((e.content && wv(e.content)) ||
                        (g && !1 !== e.content && !g.smooth() && g.content())),
                    y = Tv(p, Ev),
                    _ = Tv(p, Sv),
                    b = 1,
                    x =
                      (Rv.isTouch && Fv.visualViewport
                        ? Fv.visualViewport.scale * Fv.visualViewport.width
                        : Fv.outerWidth) / Fv.innerWidth,
                    S = 0,
                    E = Ny(c)
                      ? function () {
                          return c(t);
                        }
                      : function () {
                          return c || 2.8;
                        },
                    w = Q_(p, e.type, !0, d),
                    T = function () {
                      return (i = !1);
                    },
                    M = Ay,
                    A = Ay,
                    C = function () {
                      (n = Ly(p, Ev)),
                        (A = Hv(ay ? 1 : 0, n)),
                        u && (M = Hv(0, Ly(p, Sv))),
                        (r = A_);
                    },
                    P = function () {
                      (v._gsap.y = Cy(parseFloat(v._gsap.y) + y.offset) + "px"),
                        (v.style.transform =
                          "matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, " +
                          parseFloat(v._gsap.y) +
                          ", 0, 1)"),
                        (y.offset = y.cacheID = 0);
                    },
                    k = function () {
                      C(),
                        a.isActive() &&
                          a.vars.scrollY > n &&
                          (y() > n
                            ? a.progress(1) && y(n)
                            : a.resetTo("scrollY", n));
                    };
                  return (
                    v && Iv.set(v, { y: "+=0" }),
                    (e.ignoreCheck = function (e) {
                      return (
                        (ay &&
                          "touchmove" === e.type &&
                          (function () {
                            if (i) {
                              requestAnimationFrame(T);
                              var e = Cy(t.deltaY / 2),
                                n = A(y.v - e);
                              if (v && n !== y.v + y.offset) {
                                y.offset = n - y.v;
                                var r = Cy(
                                  (parseFloat(v && v._gsap.y) || 0) - y.offset
                                );
                                (v.style.transform =
                                  "matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, " +
                                  r +
                                  ", 0, 1)"),
                                  (v._gsap.y = r + "px"),
                                  (y.cacheID = dv.cache),
                                  I_();
                              }
                              return !0;
                            }
                            y.offset && P(), (i = !0);
                          })()) ||
                        (b > 1.05 && "touchstart" !== e.type) ||
                        t.isGesturing ||
                        (e.touches && e.touches.length > 1)
                      );
                    }),
                    (e.onPress = function () {
                      i = !1;
                      var e = b;
                      (b = Cy(
                        ((Fv.visualViewport && Fv.visualViewport.scale) || 1) / x
                      )),
                        a.pause(),
                        e !== b && Z_(p, b > 1.01 || (!u && "x")),
                        (s = _()),
                        (o = y()),
                        C(),
                        (r = A_);
                    }),
                    (e.onRelease = e.onGestureStart =
                      function (e, t) {
                        if ((y.offset && P(), t)) {
                          dv.cache++;
                          var r,
                            i,
                            s = E();
                          u &&
                            ((i = (r = _()) + (0.05 * s * -e.velocityX) / 0.227),
                            (s *= K_(_, r, i, Ly(p, Sv))),
                            (a.vars.scrollX = M(i))),
                            (i = (r = y()) + (0.05 * s * -e.velocityY) / 0.227),
                            (s *= K_(y, r, i, Ly(p, Ev))),
                            (a.vars.scrollY = A(i)),
                            a.invalidate().duration(s).play(0.01),
                            ((ay && a.vars.scrollY >= n) || r >= n - 1) &&
                              Iv.to({}, { onUpdate: k, duration: s });
                        } else l.restart(!0);
                        f && f(e);
                      }),
                    (e.onWheel = function () {
                      a._ts && a.pause(), yy() - S > 1e3 && ((r = 0), (S = yy()));
                    }),
                    (e.onChange = function (e, t, n, i, a) {
                      if (
                        (A_ !== r && C(),
                        t &&
                          u &&
                          _(
                            M(i[2] === t ? s + (e.startX - e.x) : _() + t - i[1])
                          ),
                        n)
                      ) {
                        y.offset && P();
                        var l = a[2] === n,
                          h = l ? o + e.startY - e.y : y() + n - a[1],
                          c = A(h);
                        l && h !== c && (o += c - h), y(c);
                      }
                      (n || t) && I_();
                    }),
                    (e.onEnable = function () {
                      Z_(p, !u && "x"),
                        q_.addEventListener("refresh", k),
                        i_(Fv, "resize", k),
                        y.smooth &&
                          ((y.target.style.scrollBehavior = "auto"),
                          (y.smooth = _.smooth = !1)),
                        w.enable();
                    }),
                    (e.onDisable = function () {
                      Z_(p, !0),
                        a_(Fv, "resize", k),
                        q_.removeEventListener("refresh", k),
                        w.kill();
                    }),
                    (e.lockAxis = !1 !== e.lockAxis),
                    ((t = new Rv(e)).iOS = ay),
                    ay && !y() && y(1),
                    ay && Iv.ticker.add(Ay),
                    (l = t._dc),
                    (a = Iv.to(t, {
                      ease: "power4",
                      paused: !0,
                      scrollX: u ? "+=0.1" : "+=0",
                      scrollY: "+=0.1",
                      modifiers: {
                        scrollY: W_(y, y(), function () {
                          return a.pause();
                        })
                      },
                      onUpdate: I_,
                      onComplete: l.vars.onComplete
                    })),
                    t
                  );
                })(e);
          return (
            ty && ty.target === t.target && ty.kill(), Ry(t.target) && (ty = t), t
          );
        }),
        (q_.core = {
          _getVelocityProp: Mv,
          _inputObserver: Q_,
          _scrollers: dv,
          _proxies: fv,
          bridge: {
            ss: function () {
              by || S_("scrollStart"), (by = yy());
            },
            ref: function () {
              return jv;
            }
          }
        }),
        ky() && Iv.registerPlugin(q_),
        pi.registerPlugin(q_);
      const nb = (e) => {
        const t = Math.floor(e < 0 ? (e % 360) + 360 : e % 360),
          n = (
            [
              { degree: 44, label: "calculate" },
              { degree: 90, label: "reduce" },
              { degree: 165, label: "contribute" },
              { degree: 280, label: "personal" },
              { degree: 340, label: "offset" }
            ]
              .reverse()
              .find(({ degree: e }) => t >= e) || { label: "offset" }
          ).label;
        window.document.body.setAttribute(
          "data-bind-forcused-main-visual-access-point",
          n
        );
      };
      class rb {
        applyPassiveCameraRotation(e) {
          this.passiveCameraRotation ||
            (this.passiveCameraRotation = pi.fromTo(
              e.refPivotCamera.rotation,
              { x: e.refPivotCamera.rotation.x % 360 },
              {
                x: e.refPivotCamera.rotation.x + 360,
                repeat: -1,
                ease: "none",
                duration: 58,
                onUpdate: () => {
                  nb(e.refPivotCamera.rotation.x);
                }
              }
            ));
        }
        destroyPassiveCameraRotation() {
          this.passiveCameraRotation &&
            (this.passiveCameraRotation.kill(),
            (this.passiveCameraRotation = void 0));
        }
        zoomPivotCameraTo({ refPivotCamera: e, target: t }) {//rotatecamera
          return new Promise((n) => {
            const r = e.rotation.x % 360,
              i = t.rotation.x,
              a = [r, r + 360, r - 360]
                .map((e) => ({ x: e, distance: Math.abs(i - e) }))
                .sort(({ distance: e }, { distance: t }) => e - t)[0].x;
            pi.fromTo(
              e.rotation,
              { x: a, y: e.rotation.y },
              { x: i, y: t.rotation.y, duration: 2 }
            ),
              pi.to(e.distance, { value: t.distance, duration: 2 }),
              pi.to(e.position, {
                x: t.position.x,
                y: t.position.y,
                z: t.position.z,
                duration: 2,
                onComplete: () => {
                  n();
                }
              });
          });
        }
        resetPivotCameraToCenter({ refPivotCamera: e, draft: t, target: n }) {
          return new Promise((r) => {
            pi.fromTo(
              e.rotation,
              { y: e.rotation.y, x: e.rotation.x - t },
              { y: n.rotation.y, x: e.rotation.x, duration: 2 }
            ),
              pi.to(e.distance, { value: n.distance, duration: 2 }),
              pi.to(e.position, {
                x: n.position.x,
                y: n.position.y,
                z: n.position.z,
                duration: 2,
                onComplete: () => {
                  r();
                }
              });
          });
        }
        destroyPrevCameraRotationAnimation() {
          this.prevCameraRotationAnimation &&
            (this.prevCameraRotationAnimation.kill(),
            (this.prevCameraRotationAnimation = void 0));
        }
        rotateCameraBy({ refPivotCamera: e, degree: t, onComplete: n }) {
          this.destroyPrevCameraRotationAnimation();
          const r = pi.timeline({ onComplete: n });
          r.to(e.rotation, {
            x: `+=${t}`,
            ease: "power3.out",
            duration: 2,
            onUpdate: () => {
              nb(e.rotation.x);
            }
          }),
            (this.prevCameraRotationAnimation = r);
        }
        applyPassiveWindmillRotation(e) {
          pi.to(
            e.windmillRotations.map((e) => e.rotation),
            { z: "+=6.2831852567999995", duration: 3, repeat: -1, ease: "none" }
          );
        }
        applyNavigationPointAnimation() {
          document.body
            .querySelectorAll("[data-main-visual-access-point]")
            .forEach((e) => {
              e.querySelectorAll(
                "[data-main-visual-access-point-mouse-over-event]"
              ).forEach((t) => {
                t.addEventListener("mouseenter", () => {
                  window.document.body.setAttribute(
                    "data-bind-forcused-main-visual-access-point",
                    e.getAttribute("data-main-visual-access-point") || ""
                  );
                }),
                  t.addEventListener("mouseleave", () => {
                    window.document.body.setAttribute(
                      "data-bind-forcused-main-visual-access-point",
                      ""
                    );
                  }),
                  t.setAttribute(
                    "data-main-visual-access-point-mouse-over-event",
                    "attached"
                  );
              });
            });
        }
        playSubPageLoadedAnimation() {
          const e = pi.timeline({});
          e.addLabel("show"),
            e.fromTo(
              document.body.querySelectorAll(
                '[data-seamless-page-loader-overlap="main"]'
              ),
              { opacity: 0, duration: 0.5 },
              { opacity: 1 },
              "show"
            ),
            e.from(
              document.body.querySelectorAll(
                '[data-seamless-page-loader-anim="slide-in"]'
              ),
              { y: 70, duration: 0.5, stagger: { each: 0.1 } },
              "show"
            );
        }
      }
      class ib {
        constructor() {
          this.onStateChanged = () => {};
        }
        setOnStateChangedEvent({ onStateChanged: e }) {
          this.onStateChanged = e;
        }
        doOnStateChangedEvent(e) {
          this.onStateChanged(e);
        }
      }
      function ab(e) {
        return (
          (ab =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                }),
          ab(e)
        );
      }
      var sb,
        ob,
        lb,
        hb,
        ub,
        cb,
        db,
        fb,
        pb = function () {
          return "undefined" != typeof window;
        },
        mb = function () {
          return sb || (pb() && (sb = window.gsap) && sb.registerPlugin && sb);
        },
        gb = function (e) {
          return "string" == typeof e;
        },
        vb = function (e) {
          return "function" == typeof e;
        },
        yb = function (e, t) {
          var n = "x" === t ? "Width" : "Height",
            r = "scroll" + n,
            i = "client" + n;
          return e === lb || e === hb || e === ub
            ? Math.max(hb[r], ub[r]) - (lb["inner" + n] || hb[i] || ub[i])
            : e[r] - e["offset" + n];
        },
        _b = function (e, t) {
          var n = "scroll" + ("x" === t ? "Left" : "Top");
          return (
            e === lb &&
              (null != e.pageXOffset
                ? (n = "page" + t.toUpperCase() + "Offset")
                : (e = null != hb[n] ? hb : ub)),
            function () {
              return e[n];
            }
          );
        },
        bb = function (e, t) {
          if (!(e = cb(e)[0]) || !e.getBoundingClientRect)
            return (
              console.warn("scrollTo target doesn't exist. Using 0") || {
                x: 0,
                y: 0
              }
            );
          var n = e.getBoundingClientRect(),
            r = !t || t === lb || t === ub,
            i = r
              ? {
                  top:
                    hb.clientTop -
                    (lb.pageYOffset || hb.scrollTop || ub.scrollTop || 0),
                  left:
                    hb.clientLeft -
                    (lb.pageXOffset || hb.scrollLeft || ub.scrollLeft || 0)
                }
              : t.getBoundingClientRect(),
            a = { x: n.left - i.left, y: n.top - i.top };
          return !r && t && ((a.x += _b(t, "x")()), (a.y += _b(t, "y")())), a;
        },
        xb = function (e, t, n, r, i) {
          return isNaN(e) || "object" === ab(e)
            ? gb(e) && "=" === e.charAt(1)
              ? parseFloat(e.substr(2)) * ("-" === e.charAt(0) ? -1 : 1) + r - i
              : "max" === e
              ? yb(t, n) - i
              : Math.min(yb(t, n), bb(e, t)[n] - i)
            : parseFloat(e) - i;
        },
        Sb = function () {
          (sb = mb()),
            pb() &&
              sb &&
              "undefined" != typeof document &&
              document.body &&
              ((lb = window),
              (ub = document.body),
              (hb = document.documentElement),
              (cb = sb.utils.toArray),
              sb.config({ autoKillThreshold: 7 }),
              (db = sb.config()),
              (ob = 1));
        },
        Eb = {
          version: "3.12.4",
          name: "scrollTo",
          rawVars: 1,
          register: function (e) {
            (sb = e), Sb();
          },
          init: function (e, t, n, r, i) {
            ob || Sb();
            var a = this,
              s = sb.getProperty(e, "scrollSnapType");
            (a.isWin = e === lb),
              (a.target = e),
              (a.tween = n),
              (t = (function (e, t, n, r) {
                if ((vb(e) && (e = e(t, n, r)), "object" !== ab(e)))
                  return gb(e) && "max" !== e && "=" !== e.charAt(1)
                    ? { x: e, y: e }
                    : { y: e };
                if (e.nodeType) return { y: e, x: e };
                var i,
                  a = {};
                for (i in e)
                  a[i] = "onAutoKill" !== i && vb(e[i]) ? e[i](t, n, r) : e[i];
                return a;
              })(t, r, e, i)),
              (a.vars = t),
              (a.autoKill = !!t.autoKill),
              (a.getX = _b(e, "x")),
              (a.getY = _b(e, "y")),
              (a.x = a.xPrev = a.getX()),
              (a.y = a.yPrev = a.getY()),
              fb || (fb = sb.core.globals().ScrollTrigger),
              "smooth" === sb.getProperty(e, "scrollBehavior") &&
                sb.set(e, { scrollBehavior: "auto" }),
              s &&
                "none" !== s &&
                ((a.snap = 1),
                (a.snapInline = e.style.scrollSnapType),
                (e.style.scrollSnapType = "none")),
              null != t.x
                ? (a.add(a, "x", a.x, xb(t.x, e, "x", a.x, t.offsetX || 0), r, i),
                  a._props.push("scrollTo_x"))
                : (a.skipX = 1),
              null != t.y
                ? (a.add(a, "y", a.y, xb(t.y, e, "y", a.y, t.offsetY || 0), r, i),
                  a._props.push("scrollTo_y"))
                : (a.skipY = 1);
          },
          render: function (e, t) {
            for (
              var n,
                r,
                i,
                a,
                s,
                o = t._pt,
                l = t.target,
                h = t.tween,
                u = t.autoKill,
                c = t.xPrev,
                d = t.yPrev,
                f = t.isWin,
                p = t.snap,
                m = t.snapInline;
              o;
  
            )
              o.r(e, o.d), (o = o._next);
            (n = f || !t.skipX ? t.getX() : c),
              (i = (r = f || !t.skipY ? t.getY() : d) - d),
              (a = n - c),
              (s = db.autoKillThreshold),
              t.x < 0 && (t.x = 0),
              t.y < 0 && (t.y = 0),
              u &&
                (!t.skipX && (a > s || a < -s) && n < yb(l, "x") && (t.skipX = 1),
                !t.skipY && (i > s || i < -s) && r < yb(l, "y") && (t.skipY = 1),
                t.skipX &&
                  t.skipY &&
                  (h.kill(),
                  t.vars.onAutoKill &&
                    t.vars.onAutoKill.apply(h, t.vars.onAutoKillParams || []))),
              f
                ? lb.scrollTo(t.skipX ? n : t.x, t.skipY ? r : t.y)
                : (t.skipY || (l.scrollTop = t.y),
                  t.skipX || (l.scrollLeft = t.x)),
              !p ||
                (1 !== e && 0 !== e) ||
                ((r = l.scrollTop),
                (n = l.scrollLeft),
                m
                  ? (l.style.scrollSnapType = m)
                  : l.style.removeProperty("scroll-snap-type"),
                (l.scrollTop = r + 1),
                (l.scrollLeft = n + 1),
                (l.scrollTop = r),
                (l.scrollLeft = n)),
              (t.xPrev = t.x),
              (t.yPrev = t.y),
              fb && fb.update();
          },
          kill: function (e) {
            var t = "scrollTo" === e,
              n = this._props.indexOf(e);
            return (
              (t || "scrollTo_x" === e) && (this.skipX = 1),
              (t || "scrollTo_y" === e) && (this.skipY = 1),
              n > -1 && this._props.splice(n, 1),
              !this._props.length
            );
          }
        };
      (Eb.max = yb),
        (Eb.getOffset = bb),
        (Eb.buildGetter = _b),
        mb() && sb.registerPlugin(Eb),
        pi.registerPlugin(Eb),
        pi.registerPlugin(q_);
      const wb = () => {
        const e = document.querySelectorAll("[data-scroll-slide]"),
          t = document.querySelectorAll(
            '[data-bind-page-scroller-progress="bar"]'
          ),
          n = document.querySelectorAll(
            '[data-bind-page-scroller-progress="length"]'
          ),
          r = document.querySelectorAll(
            '[data-bind-page-scroller-progress="count"]'
          ),
          i = document.querySelectorAll(
            '[data-bind-page-scroller-progress="name"]'
          ),
          a = document.querySelector(
            'svg path[data-bind-page-scroller-end="stroke"]'
          );
        return {
          slides: e,
          contentsSections: Array.from(
            document.body.querySelectorAll(
              "[data-page-scroller-progress-contents]"
            )
          ),
          progressBarElements: t,
          progressLengthElements: n,
          progressCountElements: r,
          progressNameElements: i,
          endIndicatorStroke: a
        };
      };
      class Tb {
        constructor() {
          (this.mediaQuerySp = window.matchMedia("(max-width: 752px)")),
            (this.responsiveFunction = void 0);
        }
        initialize({ onComplete: e }) {
          this.destroy(),
            (this.responsiveFunction = () => {
              this.destroyAnimation(), this.destroyScrollEvents();
              const t = document.querySelector("[data-scroll-container]");
              if (!t) return;
              const n = { container: t, onComplete: e },
                { animation: r, scrollEvent: i } = this.mediaQuerySp.matches
                  ? (({ onComplete: e }) => {
                      const {
                        slides: t,
                        contentsSections: n,
                        progressBarElements: r,
                        progressLengthElements: i,
                        progressCountElements: a,
                        progressNameElements: s,
                        endIndicatorStroke: o
                      } = wb();
                      return (
                        o &&
                          (o.style.strokeDasharray = `${o.getTotalLength()}px`),
                        i.forEach((e) => (e.textContent = `${n.length}`)),
                        {
                          animation: void 0,
                          scrollEvent: (i) => {
                            const l = 0.5 * window.innerHeight;
                            for (let e = 0; e < t.length; e += 1) {
                              const n = t[e].getBoundingClientRect();
                              if (!(n.top > l || n.bottom < l)) break;
                            }
                            const h = Math.min(
                              1,
                              -window.document.body.getBoundingClientRect().y /
                                (document.documentElement.scrollHeight -
                                  window.innerHeight)
                            );
                            r.forEach((e) => (e.style.width = 100 * h + "%"));
                            const u = t[t.length - 1].getBoundingClientRect(),
                              c = Math.min(
                                1,
                                Math.max(
                                  0,
                                  (window.innerHeight -
                                    (u.top + window.innerHeight)) /
                                    (u.height - window.innerHeight) +
                                    0.001
                                )
                              );
                            o &&
                              (o.style.strokeDashoffset =
                                o.getTotalLength() * c + "px");
                            const d = 0.5 * window.innerHeight,
                              f = n.filter(
                                (e) => e.getBoundingClientRect().top <= d
                              ),
                              p = f[f.length - 1];
                            p &&
                              (s.forEach((e) => {
                                e.textContent =
                                  p.getAttribute(
                                    "data-page-scroller-progress-contents"
                                  ) || "";
                              }),
                              a.forEach(
                                (e) => (e.textContent = f.length.toString(10))
                              )),
                              1 === c && e();
                          }
                        }
                      );
                    })(n)
                  : ((e) => {
                      const { container: t, onComplete: n } = e,
                        r = t.offsetWidth,
                        {
                          slides: i,
                          contentsSections: a,
                          progressBarElements: s,
                          progressLengthElements: o,
                          progressCountElements: l,
                          progressNameElements: h,
                          endIndicatorStroke: u
                        } = wb();
                      o.forEach((e) => (e.textContent = a.length.toString(10)));
                      const c = pi.timeline({
                        scrollTrigger: {
                          trigger: t,
                          pin: !0,
                          scrub: 2,
                          end: "+=" + r,
                          anticipatePin: 1,
                          invalidateOnRefresh: !0
                        },
                        onUpdate: () => {
                          s.forEach(
                            (e) => (e.style.width = 100 * c.progress() + "%")
                          );
                          const e = 0.5 * window.innerWidth,
                            t = a.filter(
                              (t) => t.getBoundingClientRect().left <= e
                            ),
                            n = t[t.length - 1];
                          n &&
                            (h.forEach((e) => {
                              e.textContent =
                                n.getAttribute(
                                  "data-page-scroller-progress-contents"
                                ) || "";
                            }),
                            l.forEach(
                              (e) => (e.textContent = t.length.toString(10))
                            ));
                        }
                      });
                      c.addLabel("SlideCount#1");
                      const d = window.innerWidth;
                      return (
                        i.forEach((e, t) => {
                          if (
                            (e.id && c.addLabel(`HashId#${e.id}`),
                            t === i.length - 1)
                          )
                            return;
                          const n = e.getBoundingClientRect().width / d,
                            a = 100 * n;
                          c.to(i, {
                            ease: "none",
                            x: `-=${a}vw`,
                            duration: 15 * r * n
                          });
                        }),
                        u &&
                          ((u.style.strokeDasharray = `${u.getTotalLength()}px`),
                          c.fromTo(
                            u,
                            { strokeDashoffset: 0 },
                            {
                              strokeDashoffset: u.getTotalLength(),
                              delay: 1,
                              duration: 15 * d,
                              ease: "none",
                              onComplete: () => {
                                var e;
                                null === (e = c.scrollTrigger) ||
                                  void 0 === e ||
                                  e.kill(),
                                  pi.set(i, {
                                    ease: "none",
                                    opacity: 0,
                                    duration: 1,
                                    onComplete: n
                                  });
                              }
                            }
                          )),
                        t.querySelectorAll('a[href^="#"]').forEach((e) => {
                          "attached" !==
                            e.getAttribute(
                              "data-bind-page-scroller-anchor-element"
                            ) &&
                            (e.setAttribute(
                              "data-bind-page-scroller-anchor-element",
                              "attached"
                            ),
                            e.addEventListener("click", (t) => {
                              var n;
                              t.preventDefault(),
                                pi.to(window, {
                                  scrollTo:
                                    null === (n = c.scrollTrigger) || void 0 === n
                                      ? void 0
                                      : n.labelToScroll(
                                          `HashId${e.getAttribute("href")}`
                                        )
                                });
                            }));
                        }),
                        { animation: c, scrollEvent: void 0 }
                      );
                    })(n);
              (this.animation = r),
                (this.scrollEvent = i),
                i && window.addEventListener("scroll", i);
            }),
            this.mediaQuerySp.addEventListener("change", this.responsiveFunction),
            this.responsiveFunction();
        }
        destroyAnimation() {
          var e;
          this.animation &&
            (null === (e = this.animation.scrollTrigger) ||
              void 0 === e ||
              e.kill(),
            this.animation.kill(),
            (this.animation = void 0));
        }
        destroyResponsiveEvents() {
          this.responsiveFunction &&
            (this.mediaQuerySp.removeEventListener(
              "change",
              this.responsiveFunction
            ),
            (this.responsiveFunction = void 0));
        }
        destroyScrollEvents() {
          this.scrollEvent &&
            (window.removeEventListener("scroll", this.scrollEvent),
            (this.scrollEvent = void 0));
        }
        destroy() {
          this.destroyAnimation(),
            this.destroyResponsiveEvents(),
            this.destroyScrollEvents();
        }
      }
      var Mb = __webpack_require__(196),
        Ab = __webpack_require__.n(Mb);
      class Cb {
        applyLoadingAnimation() {
          return new Promise((e) => {
            const t = null;
            if (!t) return console.log("no loading animation element"), void e();
            const n = Ab().loadAnimation({
              container: t,
              renderer: "svg",
              loop: !0,
              autoplay: !0,
              path: "/common/images/loading.json"
            });
            this.loadingAnimation = n;
            const r = () => {
              e(), n.removeEventListener("loopComplete", r);
            };
            n.addEventListener("loopComplete", r);
          });
        }
        applyEndSectionAnimation() {
          return new Promise((e) => {
            const t = document.body.querySelector(
              '[data-bind-lottie-animation="endSection"]'
            );
            if (!t) return console.log("no loading animation element"), void e();
            const n = Ab().loadAnimation({
              container: t,
              renderer: "svg",
              loop: !0,
              autoplay: !0,
              path: "/common/images/map-icon.json"
            });
            (this.endSectionAnimation = n), e();
          });
        }
        destroyLoadingAnimation() {
          this.loadingAnimation &&
            (this.loadingAnimation.destroy(), (this.loadingAnimation = void 0));
        }
        destroyEndSectionAnimation() {
          this.endSectionAnimation &&
            (this.endSectionAnimation.destroy(),
            (this.endSectionAnimation = void 0));
        }
      }
      class Pb {
        constructor(e) {
          (this.framePageHtmlSourcePresenter = new x({
            host: e.host,
            ignore: e.ignorePagePaths
          })),
            (this.pageLoaderEventsPresenter = new ib());
        }
        get pageAnimationPresenter() {
          return new mi();
        }
        get mainVisualHtmlSourcePresenter() {
          return new Yg();
        }
        get render3DPresenter() {
          return new qg();
        }
        get keyframeAnimationPresenter() {
          return new rb();
        }
        get pageScrollerPresenter() {
          return new Tb();
        }
        get lottieAnimationPresenter() {
          return new Cb();
        }
      }
      var kb = function (e, t, n, r) {
        return new (n || (n = Promise))(function (i, a) {
          function s(e) {
            try {
              l(r.next(e));
            } catch (e) {
              a(e);
            }
          }
          function o(e) {
            try {
              l(r.throw(e));
            } catch (e) {
              a(e);
            }
          }
          function l(e) {
            var t;
            e.done
              ? i(e.value)
              : ((t = e.value),
                t instanceof n
                  ? t
                  : new n(function (e) {
                      e(t);
                    })).then(s, o);
          }
          l((r = r.apply(e, t || [])).next());
        });
      };
      class Rb {
        constructor() {
          const e = { host: document.location.host, ignorePagePaths: [] },
            t = new b(),
            n = new Pb(e),
            r = new o({ repositoryFactory: t, presenterFactory: n });
          this.loadPageInteractor = r.loadPageUsecase;
          try {
            this.mainVisualInteractor = r.mainVisualUsecase;
          } catch (e) {
            console.log("no main visual");
          }
        }
        initialize() {
          return kb(this, void 0, void 0, function* () {
            this.loadPageInteractor.initialize(),
              this.mainVisualInteractor &&
                (yield this.mainVisualInteractor.initialize());
          });
        }
        load(e) {
          return kb(this, void 0, void 0, function* () {
            yield this.loadPageInteractor.load({ url: e.path });
          });
        }
      }
      const Db = "data-bind-accordion-animation-states",
        Ib = "data-accordion-target";
      var Lb, Fb, Ob, Nb;
      (Lb = void 0),
        (Fb = void 0),
        (Nb = function* () {
          yield t.waitLoad(),
            new Rb().initialize(),
            ((e) => {
              const t = Object.assign(
                Object.assign(
                  {},
                  {
                    getKeyframeAnimationOptions: () => ({
                      duration: 400,
                      easing: "ease-out"
                    }),
                    getStyle: ({ state: e }) => ({
                      opacity: "close" === e ? "0" : "1"
                    })
                  }
                ),
                e || {}
              );
              document.body.querySelectorAll(`[${Ib}="details"]`).forEach((e) => {
                const n = "DETAILS" === e.tagName ? e : void 0,
                  r =
                    ("LABEL" === e.tagName &&
                      document.querySelector(
                        `input[id="${e.getAttribute("for")}"]`
                      )) ||
                    void 0,
                  i = t.getKeyframeAnimationOptions({
                    element: e,
                    state: "open"
                  }),
                  a = t.getKeyframeAnimationOptions({
                    element: e,
                    state: "close"
                  }),
                  s = t.getStyle({ element: e, state: "open" }),
                  o = t.getStyle({ element: e, state: "close" }),
                  l = (e) => (n ? n.open : r ? r.checked : "opened" === e),
                  h = (e) => {
                    n ? (n.open = e) : r && (r.checked = e);
                  },
                  u = (t) => {
                    e.setAttribute(Db, t);
                  },
                  c = (e) => {
                    const {
                      open: t,
                      contentElement: n,
                      openKeyframeAnimationOptions: r,
                      closeKeyframeAnimationOptions: i
                    } = e;
                    if (t) {
                      h(!0);
                      const e = n.animate(
                        ((a = n),
                        [
                          Object.assign(Object.assign({}, o), { height: 0 }),
                          Object.assign(Object.assign({}, s), {
                            height: a.offsetHeight + "px"
                          })
                        ]),
                        r
                      );
                      u("opening"),
                        (e.onfinish = () => {
                          u("opened");
                        });
                    } else {
                      const e = n.animate(
                        ((e) => [
                          Object.assign(Object.assign({}, s), {
                            height: e.offsetHeight + "px"
                          }),
                          Object.assign(Object.assign({}, o), { height: 0 })
                        ])(n),
                        i
                      );
                      (e.onfinish = () => {
                        h(!1), u("closed");
                      }),
                        u("closing");
                    }
                    var a;
                  },
                  d = e.querySelector(`[${Ib}="content"]`);
                d &&
                  e.querySelectorAll(`[${Ib}="summary"]`).forEach((t) => {
                    t.addEventListener("click", (t) => {
                      const n = e.getAttribute(Db);
                      "closing" !== n &&
                        "opening" !== n &&
                        ((d.style.paddingTop = "0"),
                        (d.style.paddingBottom = "0"),
                        t.preventDefault(),
                        c({
                          open: !l(n),
                          contentElement: d,
                          openKeyframeAnimationOptions: i,
                          closeKeyframeAnimationOptions: a
                        }));
                    });
                    const n = e.getAttribute(Db);
                    c({
                      open: l(n),
                      contentElement: d,
                      openKeyframeAnimationOptions: 0,
                      closeKeyframeAnimationOptions: 0
                    });
                  });
              });
            })(),
            t.cancelWaitLoadGlobal();
        }),
        new ((Ob = void 0) || (Ob = Promise))(function (e, t) {
          function n(e) {
            try {
              i(Nb.next(e));
            } catch (e) {
              t(e);
            }
          }
          function r(e) {
            try {
              i(Nb.throw(e));
            } catch (e) {
              t(e);
            }
          }
          function i(t) {
            var i;
            t.done
              ? e(t.value)
              : ((i = t.value),
                i instanceof Ob
                  ? i
                  : new Ob(function (e) {
                      e(i);
                    })).then(n, r);
          }
          i((Nb = Nb.apply(Lb, Fb || [])).next());
        });
    })();
  })();
  